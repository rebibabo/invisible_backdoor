<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<unit xmlns="http://www.srcML.org/srcML/src" xmlns:cpp="http://www.srcML.org/srcML/cpp" xmlns:pos="http://www.srcML.org/srcML/position" revision="1.0.0" language="C" filename="dataset/ropgen/aug/1/17988.c" pos:tabs="8"><function pos:start="1:1" pos:end="125:32"><type pos:start="1:1" pos:end="1:11"><specifier pos:start="1:1" pos:end="1:6">static</specifier> <name pos:start="1:8" pos:end="1:11">void</name></type> <name pos:start="1:13" pos:end="1:32">pflash_cfi01_realize</name><parameter_list pos:start="1:33" pos:end="1:64">(<parameter pos:start="1:34" pos:end="1:49"><decl pos:start="1:34" pos:end="1:49"><type pos:start="1:34" pos:end="1:49"><name pos:start="1:34" pos:end="1:44">DeviceState</name> <modifier pos:start="1:46" pos:end="1:46">*</modifier></type><name pos:start="1:47" pos:end="1:49">dev</name></decl></parameter>, <parameter pos:start="1:52" pos:end="1:63"><decl pos:start="1:52" pos:end="1:63"><type pos:start="1:52" pos:end="1:63"><name pos:start="1:52" pos:end="1:56">Error</name> <modifier pos:start="1:58" pos:end="1:58">*</modifier><modifier pos:start="1:59" pos:end="1:59">*</modifier></type><name pos:start="1:60" pos:end="1:63">errp</name></decl></parameter>)</parameter_list>
<block pos:start="2:1" pos:end="125:32">{<block_content pos:start="3:5" pos:end="125:32">
    <decl_stmt pos:start="3:5" pos:end="3:38"><decl pos:start="3:5" pos:end="3:37"><type pos:start="3:5" pos:end="3:14"><name pos:start="3:5" pos:end="3:12">pflash_t</name> <modifier pos:start="3:14" pos:end="3:14">*</modifier></type><name pos:start="3:15" pos:end="3:17">pfl</name> <init pos:start="3:19" pos:end="3:37">= <expr pos:start="3:21" pos:end="3:37"><call pos:start="3:21" pos:end="3:37"><name pos:start="3:21" pos:end="3:32">CFI_PFLASH01</name><argument_list pos:start="3:33" pos:end="3:37">(<argument pos:start="3:34" pos:end="3:36"><expr pos:start="3:34" pos:end="3:36"><name pos:start="3:34" pos:end="3:36">dev</name></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>
    <decl_stmt pos:start="4:5" pos:end="4:23"><decl pos:start="4:5" pos:end="4:22"><type pos:start="4:5" pos:end="4:12"><name pos:start="4:5" pos:end="4:12">uint64_t</name></type> <name pos:start="4:14" pos:end="4:22">total_len</name></decl>;</decl_stmt>
    <decl_stmt pos:start="5:5" pos:end="5:12"><decl pos:start="5:5" pos:end="5:11"><type pos:start="5:5" pos:end="5:7"><name pos:start="5:5" pos:end="5:7">int</name></type> <name pos:start="5:9" pos:end="5:11">ret</name></decl>;</decl_stmt>
    <decl_stmt pos:start="6:5" pos:end="6:43"><decl pos:start="6:5" pos:end="6:30"><type pos:start="6:5" pos:end="6:12"><name pos:start="6:5" pos:end="6:12">uint64_t</name></type> <name pos:start="6:14" pos:end="6:30">blocks_per_device</name></decl>, <decl pos:start="6:33" pos:end="6:42"><type ref="prev" pos:start="6:5" pos:end="6:12"/><name pos:start="6:33" pos:end="6:42">device_len</name></decl>;</decl_stmt>
    <decl_stmt pos:start="7:5" pos:end="7:20"><decl pos:start="7:5" pos:end="7:19"><type pos:start="7:5" pos:end="7:7"><name pos:start="7:5" pos:end="7:7">int</name></type> <name pos:start="7:9" pos:end="7:19">num_devices</name></decl>;</decl_stmt>
    <decl_stmt pos:start="8:5" pos:end="8:28"><decl pos:start="8:5" pos:end="8:27"><type pos:start="8:5" pos:end="8:11"><name pos:start="8:5" pos:end="8:9">Error</name> <modifier pos:start="8:11" pos:end="8:11">*</modifier></type><name pos:start="8:12" pos:end="8:20">local_err</name> <init pos:start="8:22" pos:end="8:27">= <expr pos:start="8:24" pos:end="8:27"><name pos:start="8:24" pos:end="8:27">NULL</name></expr></init></decl>;</decl_stmt>
    <expr_stmt pos:start="9:5" pos:end="9:48"><expr pos:start="9:5" pos:end="9:47"><name pos:start="9:5" pos:end="9:13">total_len</name> <operator pos:start="9:15" pos:end="9:15">=</operator> <name pos:start="9:17" pos:end="9:31"><name pos:start="9:17" pos:end="9:19">pfl</name><operator pos:start="9:20" pos:end="9:21">-&gt;</operator><name pos:start="9:22" pos:end="9:31">sector_len</name></name> <operator pos:start="9:33" pos:end="9:33">*</operator> <name pos:start="9:35" pos:end="9:47"><name pos:start="9:35" pos:end="9:37">pfl</name><operator pos:start="9:38" pos:end="9:39">-&gt;</operator><name pos:start="9:40" pos:end="9:47">nb_blocs</name></name></expr>;</expr_stmt>
    <comment type="block" pos:start="10:5" pos:end="12:7">/* These are only used to expose the parameters of each device
     * in the cfi_table[].
     */</comment>
    <expr_stmt pos:start="13:5" pos:end="13:80"><expr pos:start="13:5" pos:end="13:79"><name pos:start="13:5" pos:end="13:15">num_devices</name> <operator pos:start="13:17" pos:end="13:17">=</operator> <ternary pos:start="13:19" pos:end="13:79"><condition pos:start="13:19" pos:end="13:37"><expr pos:start="13:19" pos:end="13:35"><name pos:start="13:19" pos:end="13:35"><name pos:start="13:19" pos:end="13:21">pfl</name><operator pos:start="13:22" pos:end="13:23">-&gt;</operator><name pos:start="13:24" pos:end="13:35">device_width</name></name></expr> ?</condition><then pos:start="13:39" pos:end="13:75"> <expr pos:start="13:39" pos:end="13:75"><operator pos:start="13:39" pos:end="13:39">(</operator><name pos:start="13:40" pos:end="13:54"><name pos:start="13:40" pos:end="13:42">pfl</name><operator pos:start="13:43" pos:end="13:44">-&gt;</operator><name pos:start="13:45" pos:end="13:54">bank_width</name></name> <operator pos:start="13:56" pos:end="13:56">/</operator> <name pos:start="13:58" pos:end="13:74"><name pos:start="13:58" pos:end="13:60">pfl</name><operator pos:start="13:61" pos:end="13:62">-&gt;</operator><name pos:start="13:63" pos:end="13:74">device_width</name></name><operator pos:start="13:75" pos:end="13:75">)</operator></expr> </then><else pos:start="13:77" pos:end="13:79">: <expr pos:start="13:79" pos:end="13:79"><literal type="number" pos:start="13:79" pos:end="13:79">1</literal></expr></else></ternary></expr>;</expr_stmt>
    <expr_stmt pos:start="14:5" pos:end="14:52"><expr pos:start="14:5" pos:end="14:51"><name pos:start="14:5" pos:end="14:21">blocks_per_device</name> <operator pos:start="14:23" pos:end="14:23">=</operator> <name pos:start="14:25" pos:end="14:37"><name pos:start="14:25" pos:end="14:27">pfl</name><operator pos:start="14:28" pos:end="14:29">-&gt;</operator><name pos:start="14:30" pos:end="14:37">nb_blocs</name></name> <operator pos:start="14:39" pos:end="14:39">/</operator> <name pos:start="14:41" pos:end="14:51">num_devices</name></expr>;</expr_stmt>
    <expr_stmt pos:start="15:5" pos:end="22:0"><expr pos:start="15:5" pos:end="15:52"><name pos:start="15:5" pos:end="15:14">device_len</name> <operator pos:start="15:16" pos:end="15:16">=</operator> <name pos:start="15:18" pos:end="15:32"><name pos:start="15:18" pos:end="15:20">pfl</name><operator pos:start="15:21" pos:end="15:22">-&gt;</operator><name pos:start="15:23" pos:end="15:32">sector_len</name></name> <operator pos:start="15:34" pos:end="15:34">*</operator> <name pos:start="15:36" pos:end="15:52">blocks_per_device</name></expr>;</expr_stmt>
    <comment type="block" pos:start="16:5" pos:end="16:26">/* XXX: to be fixed */</comment>
<cpp:if pos:start="17:1" pos:end="17:5">#<cpp:directive pos:start="17:2" pos:end="17:3">if</cpp:directive> <expr pos:start="17:5" pos:end="17:5"><literal type="number" pos:start="17:5" pos:end="17:5">0</literal></expr></cpp:if>
    if (total_len != (8 * 1024 * 1024) &amp;&amp; total_len != (16 * 1024 * 1024) &amp;&amp;
        total_len != (32 * 1024 * 1024) &amp;&amp; total_len != (64 * 1024 * 1024))
        return NULL;
<cpp:endif pos:start="21:1" pos:end="21:6">#<cpp:directive pos:start="21:2" pos:end="21:6">endif</cpp:directive></cpp:endif>
    <expr_stmt pos:start="22:5" pos:end="26:42"><expr pos:start="22:5" pos:end="26:41"><call pos:start="22:5" pos:end="26:41"><name pos:start="22:5" pos:end="22:33">memory_region_init_rom_device</name><argument_list pos:start="22:34" pos:end="26:41">(
        <argument pos:start="23:9" pos:end="23:17"><expr pos:start="23:9" pos:end="23:17"><operator pos:start="23:9" pos:end="23:9">&amp;</operator><name pos:start="23:10" pos:end="23:17"><name pos:start="23:10" pos:end="23:12">pfl</name><operator pos:start="23:13" pos:end="23:14">-&gt;</operator><name pos:start="23:15" pos:end="23:17">mem</name></name></expr></argument>, <argument pos:start="23:20" pos:end="23:30"><expr pos:start="23:20" pos:end="23:30"><call pos:start="23:20" pos:end="23:30"><name pos:start="23:20" pos:end="23:25">OBJECT</name><argument_list pos:start="23:26" pos:end="23:30">(<argument pos:start="23:27" pos:end="23:29"><expr pos:start="23:27" pos:end="23:29"><name pos:start="23:27" pos:end="23:29">dev</name></expr></argument>)</argument_list></call></expr></argument>,
        <argument pos:start="24:9" pos:end="24:25"><expr pos:start="24:9" pos:end="24:25"><operator pos:start="24:9" pos:end="24:9">&amp;</operator><name pos:start="24:10" pos:end="24:25">pflash_cfi01_ops</name></expr></argument>,
        <argument pos:start="25:9" pos:end="25:11"><expr pos:start="25:9" pos:end="25:11"><name pos:start="25:9" pos:end="25:11">pfl</name></expr></argument>,
        <argument pos:start="26:9" pos:end="26:17"><expr pos:start="26:9" pos:end="26:17"><name pos:start="26:9" pos:end="26:17"><name pos:start="26:9" pos:end="26:11">pfl</name><operator pos:start="26:12" pos:end="26:13">-&gt;</operator><name pos:start="26:14" pos:end="26:17">name</name></name></expr></argument>, <argument pos:start="26:20" pos:end="26:28"><expr pos:start="26:20" pos:end="26:28"><name pos:start="26:20" pos:end="26:28">total_len</name></expr></argument>, <argument pos:start="26:31" pos:end="26:40"><expr pos:start="26:31" pos:end="26:40"><operator pos:start="26:31" pos:end="26:31">&amp;</operator><name pos:start="26:32" pos:end="26:40">local_err</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
    <if_stmt pos:start="27:5" pos:end="125:32"><if pos:start="27:5" pos:end="125:32">if <condition pos:start="27:8" pos:end="27:18">(<expr pos:start="27:9" pos:end="27:17"><name pos:start="27:9" pos:end="27:17">local_err</name></expr>)</condition> <block pos:start="27:20" pos:end="125:32">{<block_content pos:start="28:9" pos:end="125:32">
        <expr_stmt pos:start="28:9" pos:end="28:41"><expr pos:start="28:9" pos:end="28:40"><call pos:start="28:9" pos:end="28:40"><name pos:start="28:9" pos:end="28:23">error_propagate</name><argument_list pos:start="28:24" pos:end="28:40">(<argument pos:start="28:25" pos:end="28:28"><expr pos:start="28:25" pos:end="28:28"><name pos:start="28:25" pos:end="28:28">errp</name></expr></argument>, <argument pos:start="28:31" pos:end="28:39"><expr pos:start="28:31" pos:end="28:39"><name pos:start="28:31" pos:end="28:39">local_err</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
    <expr_stmt pos:start="29:5" pos:end="29:49"><expr pos:start="29:5" pos:end="29:48"><call pos:start="29:5" pos:end="29:48"><name pos:start="29:5" pos:end="29:24">vmstate_register_ram</name><argument_list pos:start="29:25" pos:end="29:48">(<argument pos:start="29:26" pos:end="29:34"><expr pos:start="29:26" pos:end="29:34"><operator pos:start="29:26" pos:end="29:26">&amp;</operator><name pos:start="29:27" pos:end="29:34"><name pos:start="29:27" pos:end="29:29">pfl</name><operator pos:start="29:30" pos:end="29:31">-&gt;</operator><name pos:start="29:32" pos:end="29:34">mem</name></name></expr></argument>, <argument pos:start="29:37" pos:end="29:47"><expr pos:start="29:37" pos:end="29:47"><call pos:start="29:37" pos:end="29:47"><name pos:start="29:37" pos:end="29:42">DEVICE</name><argument_list pos:start="29:43" pos:end="29:47">(<argument pos:start="29:44" pos:end="29:46"><expr pos:start="29:44" pos:end="29:46"><name pos:start="29:44" pos:end="29:46">pfl</name></expr></argument>)</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
    <expr_stmt pos:start="30:5" pos:end="30:56"><expr pos:start="30:5" pos:end="30:55"><name pos:start="30:5" pos:end="30:16"><name pos:start="30:5" pos:end="30:7">pfl</name><operator pos:start="30:8" pos:end="30:9">-&gt;</operator><name pos:start="30:10" pos:end="30:16">storage</name></name> <operator pos:start="30:18" pos:end="30:18">=</operator> <call pos:start="30:20" pos:end="30:55"><name pos:start="30:20" pos:end="30:44">memory_region_get_ram_ptr</name><argument_list pos:start="30:45" pos:end="30:55">(<argument pos:start="30:46" pos:end="30:54"><expr pos:start="30:46" pos:end="30:54"><operator pos:start="30:46" pos:end="30:46">&amp;</operator><name pos:start="30:47" pos:end="30:54"><name pos:start="30:47" pos:end="30:49">pfl</name><operator pos:start="30:50" pos:end="30:51">-&gt;</operator><name pos:start="30:52" pos:end="30:54">mem</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
    <expr_stmt pos:start="31:5" pos:end="31:53"><expr pos:start="31:5" pos:end="31:52"><call pos:start="31:5" pos:end="31:52"><name pos:start="31:5" pos:end="31:20">sysbus_init_mmio</name><argument_list pos:start="31:21" pos:end="31:52">(<argument pos:start="31:22" pos:end="31:40"><expr pos:start="31:22" pos:end="31:40"><call pos:start="31:22" pos:end="31:40"><name pos:start="31:22" pos:end="31:35">SYS_BUS_DEVICE</name><argument_list pos:start="31:36" pos:end="31:40">(<argument pos:start="31:37" pos:end="31:39"><expr pos:start="31:37" pos:end="31:39"><name pos:start="31:37" pos:end="31:39">dev</name></expr></argument>)</argument_list></call></expr></argument>, <argument pos:start="31:43" pos:end="31:51"><expr pos:start="31:43" pos:end="31:51"><operator pos:start="31:43" pos:end="31:43">&amp;</operator><name pos:start="31:44" pos:end="31:51"><name pos:start="31:44" pos:end="31:46">pfl</name><operator pos:start="31:47" pos:end="31:48">-&gt;</operator><name pos:start="31:49" pos:end="31:51">mem</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
    <if_stmt pos:start="32:5" pos:end="125:32"><if pos:start="32:5" pos:end="125:32">if <condition pos:start="32:8" pos:end="32:17">(<expr pos:start="32:9" pos:end="32:16"><name pos:start="32:9" pos:end="32:16"><name pos:start="32:9" pos:end="32:11">pfl</name><operator pos:start="32:12" pos:end="32:13">-&gt;</operator><name pos:start="32:14" pos:end="32:16">blk</name></name></expr>)</condition> <block pos:start="32:19" pos:end="125:32">{<block_content pos:start="34:9" pos:end="125:32">
        <comment type="block" pos:start="33:9" pos:end="33:44">/* read the initial flash content */</comment>
        <expr_stmt pos:start="34:9" pos:end="34:62"><expr pos:start="34:9" pos:end="34:61"><name pos:start="34:9" pos:end="34:11">ret</name> <operator pos:start="34:13" pos:end="34:13">=</operator> <call pos:start="34:15" pos:end="34:61"><name pos:start="34:15" pos:end="34:23">blk_pread</name><argument_list pos:start="34:24" pos:end="34:61">(<argument pos:start="34:25" pos:end="34:32"><expr pos:start="34:25" pos:end="34:32"><name pos:start="34:25" pos:end="34:32"><name pos:start="34:25" pos:end="34:27">pfl</name><operator pos:start="34:28" pos:end="34:29">-&gt;</operator><name pos:start="34:30" pos:end="34:32">blk</name></name></expr></argument>, <argument pos:start="34:35" pos:end="34:35"><expr pos:start="34:35" pos:end="34:35"><literal type="number" pos:start="34:35" pos:end="34:35">0</literal></expr></argument>, <argument pos:start="34:38" pos:end="34:49"><expr pos:start="34:38" pos:end="34:49"><name pos:start="34:38" pos:end="34:49"><name pos:start="34:38" pos:end="34:40">pfl</name><operator pos:start="34:41" pos:end="34:42">-&gt;</operator><name pos:start="34:43" pos:end="34:49">storage</name></name></expr></argument>, <argument pos:start="34:52" pos:end="34:60"><expr pos:start="34:52" pos:end="34:60"><name pos:start="34:52" pos:end="34:60">total_len</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <if_stmt pos:start="35:9" pos:end="125:32"><if pos:start="35:9" pos:end="125:32">if <condition pos:start="35:12" pos:end="35:20">(<expr pos:start="35:13" pos:end="35:19"><name pos:start="35:13" pos:end="35:15">ret</name> <operator pos:start="35:17" pos:end="35:17">&lt;</operator> <literal type="number" pos:start="35:19" pos:end="35:19">0</literal></expr>)</condition> <block pos:start="35:22" pos:end="125:32">{<block_content pos:start="36:13" pos:end="125:32">
            <expr_stmt pos:start="36:13" pos:end="36:59"><expr pos:start="36:13" pos:end="36:58"><call pos:start="36:13" pos:end="36:58"><name pos:start="36:13" pos:end="36:34">vmstate_unregister_ram</name><argument_list pos:start="36:35" pos:end="36:58">(<argument pos:start="36:36" pos:end="36:44"><expr pos:start="36:36" pos:end="36:44"><operator pos:start="36:36" pos:end="36:36">&amp;</operator><name pos:start="36:37" pos:end="36:44"><name pos:start="36:37" pos:end="36:39">pfl</name><operator pos:start="36:40" pos:end="36:41">-&gt;</operator><name pos:start="36:42" pos:end="36:44">mem</name></name></expr></argument>, <argument pos:start="36:47" pos:end="36:57"><expr pos:start="36:47" pos:end="36:57"><call pos:start="36:47" pos:end="36:57"><name pos:start="36:47" pos:end="36:52">DEVICE</name><argument_list pos:start="36:53" pos:end="36:57">(<argument pos:start="36:54" pos:end="36:56"><expr pos:start="36:54" pos:end="36:56"><name pos:start="36:54" pos:end="36:56">pfl</name></expr></argument>)</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>
            <expr_stmt pos:start="37:13" pos:end="37:73"><expr pos:start="37:13" pos:end="37:72"><call pos:start="37:13" pos:end="37:72"><name pos:start="37:13" pos:end="37:22">error_setg</name><argument_list pos:start="37:23" pos:end="37:72">(<argument pos:start="37:24" pos:end="37:27"><expr pos:start="37:24" pos:end="37:27"><name pos:start="37:24" pos:end="37:27">errp</name></expr></argument>, <argument pos:start="37:30" pos:end="37:71"><expr pos:start="37:30" pos:end="37:71"><literal type="string" pos:start="37:30" pos:end="37:71">"failed to read the initial flash content"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
    <if_stmt pos:start="38:5" pos:end="125:32"><if pos:start="38:5" pos:end="40:5">if <condition pos:start="38:8" pos:end="38:17">(<expr pos:start="38:9" pos:end="38:16"><name pos:start="38:9" pos:end="38:16"><name pos:start="38:9" pos:end="38:11">pfl</name><operator pos:start="38:12" pos:end="38:13">-&gt;</operator><name pos:start="38:14" pos:end="38:16">blk</name></name></expr>)</condition> <block pos:start="38:19" pos:end="40:5">{<block_content pos:start="39:9" pos:end="39:45">
        <expr_stmt pos:start="39:9" pos:end="39:45"><expr pos:start="39:9" pos:end="39:44"><name pos:start="39:9" pos:end="39:15"><name pos:start="39:9" pos:end="39:11">pfl</name><operator pos:start="39:12" pos:end="39:13">-&gt;</operator><name pos:start="39:14" pos:end="39:15">ro</name></name> <operator pos:start="39:17" pos:end="39:17">=</operator> <call pos:start="39:19" pos:end="39:44"><name pos:start="39:19" pos:end="39:34">blk_is_read_only</name><argument_list pos:start="39:35" pos:end="39:44">(<argument pos:start="39:36" pos:end="39:43"><expr pos:start="39:36" pos:end="39:43"><name pos:start="39:36" pos:end="39:43"><name pos:start="39:36" pos:end="39:38">pfl</name><operator pos:start="39:39" pos:end="39:40">-&gt;</operator><name pos:start="39:41" pos:end="39:43">blk</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
    </block_content>}</block></if> <else pos:start="40:7" pos:end="125:32">else <block pos:start="40:12" pos:end="125:32">{<block_content pos:start="41:9" pos:end="125:32">
        <expr_stmt pos:start="41:9" pos:end="41:20"><expr pos:start="41:9" pos:end="41:19"><name pos:start="41:9" pos:end="41:15"><name pos:start="41:9" pos:end="41:11">pfl</name><operator pos:start="41:12" pos:end="41:13">-&gt;</operator><name pos:start="41:14" pos:end="41:15">ro</name></name> <operator pos:start="41:17" pos:end="41:17">=</operator> <literal type="number" pos:start="41:19" pos:end="41:19">0</literal></expr>;</expr_stmt>
    <comment type="block" pos:start="42:5" pos:end="44:7">/* Default to devices being used at their maximum device width. This was
     * assumed before the device_width support was added.
     */</comment>
    <if_stmt pos:start="45:5" pos:end="125:32"><if pos:start="45:5" pos:end="125:32">if <condition pos:start="45:8" pos:end="45:31">(<expr pos:start="45:9" pos:end="45:30"><operator pos:start="45:9" pos:end="45:9">!</operator><name pos:start="45:10" pos:end="45:30"><name pos:start="45:10" pos:end="45:12">pfl</name><operator pos:start="45:13" pos:end="45:14">-&gt;</operator><name pos:start="45:15" pos:end="45:30">max_device_width</name></name></expr>)</condition> <block pos:start="45:33" pos:end="125:32">{<block_content pos:start="46:9" pos:end="125:32">
        <expr_stmt pos:start="46:9" pos:end="46:50"><expr pos:start="46:9" pos:end="46:49"><name pos:start="46:9" pos:end="46:29"><name pos:start="46:9" pos:end="46:11">pfl</name><operator pos:start="46:12" pos:end="46:13">-&gt;</operator><name pos:start="46:14" pos:end="46:29">max_device_width</name></name> <operator pos:start="46:31" pos:end="46:31">=</operator> <name pos:start="46:33" pos:end="46:49"><name pos:start="46:33" pos:end="46:35">pfl</name><operator pos:start="46:36" pos:end="46:37">-&gt;</operator><name pos:start="46:38" pos:end="46:49">device_width</name></name></expr>;</expr_stmt>
    <expr_stmt pos:start="47:5" pos:end="47:69"><expr pos:start="47:5" pos:end="47:68"><name pos:start="47:5" pos:end="47:14"><name pos:start="47:5" pos:end="47:7">pfl</name><operator pos:start="47:8" pos:end="47:9">-&gt;</operator><name pos:start="47:10" pos:end="47:14">timer</name></name> <operator pos:start="47:16" pos:end="47:16">=</operator> <call pos:start="47:18" pos:end="47:68"><name pos:start="47:18" pos:end="47:29">timer_new_ns</name><argument_list pos:start="47:30" pos:end="47:68">(<argument pos:start="47:31" pos:end="47:48"><expr pos:start="47:31" pos:end="47:48"><name pos:start="47:31" pos:end="47:48">QEMU_CLOCK_VIRTUAL</name></expr></argument>, <argument pos:start="47:51" pos:end="47:62"><expr pos:start="47:51" pos:end="47:62"><name pos:start="47:51" pos:end="47:62">pflash_timer</name></expr></argument>, <argument pos:start="47:65" pos:end="47:67"><expr pos:start="47:65" pos:end="47:67"><name pos:start="47:65" pos:end="47:67">pfl</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
    <expr_stmt pos:start="48:5" pos:end="48:20"><expr pos:start="48:5" pos:end="48:19"><name pos:start="48:5" pos:end="48:15"><name pos:start="48:5" pos:end="48:7">pfl</name><operator pos:start="48:8" pos:end="48:9">-&gt;</operator><name pos:start="48:10" pos:end="48:15">wcycle</name></name> <operator pos:start="48:17" pos:end="48:17">=</operator> <literal type="number" pos:start="48:19" pos:end="48:19">0</literal></expr>;</expr_stmt>
    <expr_stmt pos:start="49:5" pos:end="49:17"><expr pos:start="49:5" pos:end="49:16"><name pos:start="49:5" pos:end="49:12"><name pos:start="49:5" pos:end="49:7">pfl</name><operator pos:start="49:8" pos:end="49:9">-&gt;</operator><name pos:start="49:10" pos:end="49:12">cmd</name></name> <operator pos:start="49:14" pos:end="49:14">=</operator> <literal type="number" pos:start="49:16" pos:end="49:16">0</literal></expr>;</expr_stmt>
    <expr_stmt pos:start="50:5" pos:end="50:20"><expr pos:start="50:5" pos:end="50:19"><name pos:start="50:5" pos:end="50:15"><name pos:start="50:5" pos:end="50:7">pfl</name><operator pos:start="50:8" pos:end="50:9">-&gt;</operator><name pos:start="50:10" pos:end="50:15">status</name></name> <operator pos:start="50:17" pos:end="50:17">=</operator> <literal type="number" pos:start="50:19" pos:end="50:19">0</literal></expr>;</expr_stmt>
    <comment type="block" pos:start="51:5" pos:end="51:29">/* Hardcoded CFI table */</comment>
    <expr_stmt pos:start="52:5" pos:end="52:24"><expr pos:start="52:5" pos:end="52:23"><name pos:start="52:5" pos:end="52:16"><name pos:start="52:5" pos:end="52:7">pfl</name><operator pos:start="52:8" pos:end="52:9">-&gt;</operator><name pos:start="52:10" pos:end="52:16">cfi_len</name></name> <operator pos:start="52:18" pos:end="52:18">=</operator> <literal type="number" pos:start="52:20" pos:end="52:23">0x52</literal></expr>;</expr_stmt>
    <comment type="block" pos:start="53:5" pos:end="53:31">/* Standard "QRY" string */</comment>
    <expr_stmt pos:start="54:5" pos:end="54:31"><expr pos:start="54:5" pos:end="54:30"><name pos:start="54:5" pos:end="54:24"><name pos:start="54:5" pos:end="54:7">pfl</name><operator pos:start="54:8" pos:end="54:9">-&gt;</operator><name pos:start="54:10" pos:end="54:18">cfi_table</name><index pos:start="54:19" pos:end="54:24">[<expr pos:start="54:20" pos:end="54:23"><literal type="number" pos:start="54:20" pos:end="54:23">0x10</literal></expr>]</index></name> <operator pos:start="54:26" pos:end="54:26">=</operator> <literal type="char" pos:start="54:28" pos:end="54:30">'Q'</literal></expr>;</expr_stmt>
    <expr_stmt pos:start="55:5" pos:end="55:31"><expr pos:start="55:5" pos:end="55:30"><name pos:start="55:5" pos:end="55:24"><name pos:start="55:5" pos:end="55:7">pfl</name><operator pos:start="55:8" pos:end="55:9">-&gt;</operator><name pos:start="55:10" pos:end="55:18">cfi_table</name><index pos:start="55:19" pos:end="55:24">[<expr pos:start="55:20" pos:end="55:23"><literal type="number" pos:start="55:20" pos:end="55:23">0x11</literal></expr>]</index></name> <operator pos:start="55:26" pos:end="55:26">=</operator> <literal type="char" pos:start="55:28" pos:end="55:30">'R'</literal></expr>;</expr_stmt>
    <expr_stmt pos:start="56:5" pos:end="56:31"><expr pos:start="56:5" pos:end="56:30"><name pos:start="56:5" pos:end="56:24"><name pos:start="56:5" pos:end="56:7">pfl</name><operator pos:start="56:8" pos:end="56:9">-&gt;</operator><name pos:start="56:10" pos:end="56:18">cfi_table</name><index pos:start="56:19" pos:end="56:24">[<expr pos:start="56:20" pos:end="56:23"><literal type="number" pos:start="56:20" pos:end="56:23">0x12</literal></expr>]</index></name> <operator pos:start="56:26" pos:end="56:26">=</operator> <literal type="char" pos:start="56:28" pos:end="56:30">'Y'</literal></expr>;</expr_stmt>
    <comment type="block" pos:start="57:5" pos:end="57:29">/* Command set (Intel) */</comment>
    <expr_stmt pos:start="58:5" pos:end="58:32"><expr pos:start="58:5" pos:end="58:31"><name pos:start="58:5" pos:end="58:24"><name pos:start="58:5" pos:end="58:7">pfl</name><operator pos:start="58:8" pos:end="58:9">-&gt;</operator><name pos:start="58:10" pos:end="58:18">cfi_table</name><index pos:start="58:19" pos:end="58:24">[<expr pos:start="58:20" pos:end="58:23"><literal type="number" pos:start="58:20" pos:end="58:23">0x13</literal></expr>]</index></name> <operator pos:start="58:26" pos:end="58:26">=</operator> <literal type="number" pos:start="58:28" pos:end="58:31">0x01</literal></expr>;</expr_stmt>
    <expr_stmt pos:start="59:5" pos:end="59:32"><expr pos:start="59:5" pos:end="59:31"><name pos:start="59:5" pos:end="59:24"><name pos:start="59:5" pos:end="59:7">pfl</name><operator pos:start="59:8" pos:end="59:9">-&gt;</operator><name pos:start="59:10" pos:end="59:18">cfi_table</name><index pos:start="59:19" pos:end="59:24">[<expr pos:start="59:20" pos:end="59:23"><literal type="number" pos:start="59:20" pos:end="59:23">0x14</literal></expr>]</index></name> <operator pos:start="59:26" pos:end="59:26">=</operator> <literal type="number" pos:start="59:28" pos:end="59:31">0x00</literal></expr>;</expr_stmt>
    <comment type="block" pos:start="60:5" pos:end="60:47">/* Primary extended table address (none) */</comment>
    <expr_stmt pos:start="61:5" pos:end="61:32"><expr pos:start="61:5" pos:end="61:31"><name pos:start="61:5" pos:end="61:24"><name pos:start="61:5" pos:end="61:7">pfl</name><operator pos:start="61:8" pos:end="61:9">-&gt;</operator><name pos:start="61:10" pos:end="61:18">cfi_table</name><index pos:start="61:19" pos:end="61:24">[<expr pos:start="61:20" pos:end="61:23"><literal type="number" pos:start="61:20" pos:end="61:23">0x15</literal></expr>]</index></name> <operator pos:start="61:26" pos:end="61:26">=</operator> <literal type="number" pos:start="61:28" pos:end="61:31">0x31</literal></expr>;</expr_stmt>
    <expr_stmt pos:start="62:5" pos:end="62:32"><expr pos:start="62:5" pos:end="62:31"><name pos:start="62:5" pos:end="62:24"><name pos:start="62:5" pos:end="62:7">pfl</name><operator pos:start="62:8" pos:end="62:9">-&gt;</operator><name pos:start="62:10" pos:end="62:18">cfi_table</name><index pos:start="62:19" pos:end="62:24">[<expr pos:start="62:20" pos:end="62:23"><literal type="number" pos:start="62:20" pos:end="62:23">0x16</literal></expr>]</index></name> <operator pos:start="62:26" pos:end="62:26">=</operator> <literal type="number" pos:start="62:28" pos:end="62:31">0x00</literal></expr>;</expr_stmt>
    <comment type="block" pos:start="63:5" pos:end="63:38">/* Alternate command set (none) */</comment>
    <expr_stmt pos:start="64:5" pos:end="64:32"><expr pos:start="64:5" pos:end="64:31"><name pos:start="64:5" pos:end="64:24"><name pos:start="64:5" pos:end="64:7">pfl</name><operator pos:start="64:8" pos:end="64:9">-&gt;</operator><name pos:start="64:10" pos:end="64:18">cfi_table</name><index pos:start="64:19" pos:end="64:24">[<expr pos:start="64:20" pos:end="64:23"><literal type="number" pos:start="64:20" pos:end="64:23">0x17</literal></expr>]</index></name> <operator pos:start="64:26" pos:end="64:26">=</operator> <literal type="number" pos:start="64:28" pos:end="64:31">0x00</literal></expr>;</expr_stmt>
    <expr_stmt pos:start="65:5" pos:end="65:32"><expr pos:start="65:5" pos:end="65:31"><name pos:start="65:5" pos:end="65:24"><name pos:start="65:5" pos:end="65:7">pfl</name><operator pos:start="65:8" pos:end="65:9">-&gt;</operator><name pos:start="65:10" pos:end="65:18">cfi_table</name><index pos:start="65:19" pos:end="65:24">[<expr pos:start="65:20" pos:end="65:23"><literal type="number" pos:start="65:20" pos:end="65:23">0x18</literal></expr>]</index></name> <operator pos:start="65:26" pos:end="65:26">=</operator> <literal type="number" pos:start="65:28" pos:end="65:31">0x00</literal></expr>;</expr_stmt>
    <comment type="block" pos:start="66:5" pos:end="66:41">/* Alternate extended table (none) */</comment>
    <expr_stmt pos:start="67:5" pos:end="67:32"><expr pos:start="67:5" pos:end="67:31"><name pos:start="67:5" pos:end="67:24"><name pos:start="67:5" pos:end="67:7">pfl</name><operator pos:start="67:8" pos:end="67:9">-&gt;</operator><name pos:start="67:10" pos:end="67:18">cfi_table</name><index pos:start="67:19" pos:end="67:24">[<expr pos:start="67:20" pos:end="67:23"><literal type="number" pos:start="67:20" pos:end="67:23">0x19</literal></expr>]</index></name> <operator pos:start="67:26" pos:end="67:26">=</operator> <literal type="number" pos:start="67:28" pos:end="67:31">0x00</literal></expr>;</expr_stmt>
    <expr_stmt pos:start="68:5" pos:end="68:32"><expr pos:start="68:5" pos:end="68:31"><name pos:start="68:5" pos:end="68:24"><name pos:start="68:5" pos:end="68:7">pfl</name><operator pos:start="68:8" pos:end="68:9">-&gt;</operator><name pos:start="68:10" pos:end="68:18">cfi_table</name><index pos:start="68:19" pos:end="68:24">[<expr pos:start="68:20" pos:end="68:23"><literal type="number" pos:start="68:20" pos:end="68:23">0x1A</literal></expr>]</index></name> <operator pos:start="68:26" pos:end="68:26">=</operator> <literal type="number" pos:start="68:28" pos:end="68:31">0x00</literal></expr>;</expr_stmt>
    <comment type="block" pos:start="69:5" pos:end="69:17">/* Vcc min */</comment>
    <expr_stmt pos:start="70:5" pos:end="70:32"><expr pos:start="70:5" pos:end="70:31"><name pos:start="70:5" pos:end="70:24"><name pos:start="70:5" pos:end="70:7">pfl</name><operator pos:start="70:8" pos:end="70:9">-&gt;</operator><name pos:start="70:10" pos:end="70:18">cfi_table</name><index pos:start="70:19" pos:end="70:24">[<expr pos:start="70:20" pos:end="70:23"><literal type="number" pos:start="70:20" pos:end="70:23">0x1B</literal></expr>]</index></name> <operator pos:start="70:26" pos:end="70:26">=</operator> <literal type="number" pos:start="70:28" pos:end="70:31">0x45</literal></expr>;</expr_stmt>
    <comment type="block" pos:start="71:5" pos:end="71:17">/* Vcc max */</comment>
    <expr_stmt pos:start="72:5" pos:end="72:32"><expr pos:start="72:5" pos:end="72:31"><name pos:start="72:5" pos:end="72:24"><name pos:start="72:5" pos:end="72:7">pfl</name><operator pos:start="72:8" pos:end="72:9">-&gt;</operator><name pos:start="72:10" pos:end="72:18">cfi_table</name><index pos:start="72:19" pos:end="72:24">[<expr pos:start="72:20" pos:end="72:23"><literal type="number" pos:start="72:20" pos:end="72:23">0x1C</literal></expr>]</index></name> <operator pos:start="72:26" pos:end="72:26">=</operator> <literal type="number" pos:start="72:28" pos:end="72:31">0x55</literal></expr>;</expr_stmt>
    <comment type="block" pos:start="73:5" pos:end="73:30">/* Vpp min (no Vpp pin) */</comment>
    <expr_stmt pos:start="74:5" pos:end="74:32"><expr pos:start="74:5" pos:end="74:31"><name pos:start="74:5" pos:end="74:24"><name pos:start="74:5" pos:end="74:7">pfl</name><operator pos:start="74:8" pos:end="74:9">-&gt;</operator><name pos:start="74:10" pos:end="74:18">cfi_table</name><index pos:start="74:19" pos:end="74:24">[<expr pos:start="74:20" pos:end="74:23"><literal type="number" pos:start="74:20" pos:end="74:23">0x1D</literal></expr>]</index></name> <operator pos:start="74:26" pos:end="74:26">=</operator> <literal type="number" pos:start="74:28" pos:end="74:31">0x00</literal></expr>;</expr_stmt>
    <comment type="block" pos:start="75:5" pos:end="75:30">/* Vpp max (no Vpp pin) */</comment>
    <expr_stmt pos:start="76:5" pos:end="76:32"><expr pos:start="76:5" pos:end="76:31"><name pos:start="76:5" pos:end="76:24"><name pos:start="76:5" pos:end="76:7">pfl</name><operator pos:start="76:8" pos:end="76:9">-&gt;</operator><name pos:start="76:10" pos:end="76:18">cfi_table</name><index pos:start="76:19" pos:end="76:24">[<expr pos:start="76:20" pos:end="76:23"><literal type="number" pos:start="76:20" pos:end="76:23">0x1E</literal></expr>]</index></name> <operator pos:start="76:26" pos:end="76:26">=</operator> <literal type="number" pos:start="76:28" pos:end="76:31">0x00</literal></expr>;</expr_stmt>
    <comment type="block" pos:start="77:5" pos:end="77:18">/* Reserved */</comment>
    <expr_stmt pos:start="78:5" pos:end="78:32"><expr pos:start="78:5" pos:end="78:31"><name pos:start="78:5" pos:end="78:24"><name pos:start="78:5" pos:end="78:7">pfl</name><operator pos:start="78:8" pos:end="78:9">-&gt;</operator><name pos:start="78:10" pos:end="78:18">cfi_table</name><index pos:start="78:19" pos:end="78:24">[<expr pos:start="78:20" pos:end="78:23"><literal type="number" pos:start="78:20" pos:end="78:23">0x1F</literal></expr>]</index></name> <operator pos:start="78:26" pos:end="78:26">=</operator> <literal type="number" pos:start="78:28" pos:end="78:31">0x07</literal></expr>;</expr_stmt>
    <comment type="block" pos:start="79:5" pos:end="79:43">/* Timeout for min size buffer write */</comment>
    <expr_stmt pos:start="80:5" pos:end="80:32"><expr pos:start="80:5" pos:end="80:31"><name pos:start="80:5" pos:end="80:24"><name pos:start="80:5" pos:end="80:7">pfl</name><operator pos:start="80:8" pos:end="80:9">-&gt;</operator><name pos:start="80:10" pos:end="80:18">cfi_table</name><index pos:start="80:19" pos:end="80:24">[<expr pos:start="80:20" pos:end="80:23"><literal type="number" pos:start="80:20" pos:end="80:23">0x20</literal></expr>]</index></name> <operator pos:start="80:26" pos:end="80:26">=</operator> <literal type="number" pos:start="80:28" pos:end="80:31">0x07</literal></expr>;</expr_stmt>
    <comment type="block" pos:start="81:5" pos:end="81:41">/* Typical timeout for block erase */</comment>
    <expr_stmt pos:start="82:5" pos:end="82:32"><expr pos:start="82:5" pos:end="82:31"><name pos:start="82:5" pos:end="82:24"><name pos:start="82:5" pos:end="82:7">pfl</name><operator pos:start="82:8" pos:end="82:9">-&gt;</operator><name pos:start="82:10" pos:end="82:18">cfi_table</name><index pos:start="82:19" pos:end="82:24">[<expr pos:start="82:20" pos:end="82:23"><literal type="number" pos:start="82:20" pos:end="82:23">0x21</literal></expr>]</index></name> <operator pos:start="82:26" pos:end="82:26">=</operator> <literal type="number" pos:start="82:28" pos:end="82:31">0x0a</literal></expr>;</expr_stmt>
    <comment type="block" pos:start="83:5" pos:end="83:55">/* Typical timeout for full chip erase (4096 ms) */</comment>
    <expr_stmt pos:start="84:5" pos:end="84:32"><expr pos:start="84:5" pos:end="84:31"><name pos:start="84:5" pos:end="84:24"><name pos:start="84:5" pos:end="84:7">pfl</name><operator pos:start="84:8" pos:end="84:9">-&gt;</operator><name pos:start="84:10" pos:end="84:18">cfi_table</name><index pos:start="84:19" pos:end="84:24">[<expr pos:start="84:20" pos:end="84:23"><literal type="number" pos:start="84:20" pos:end="84:23">0x22</literal></expr>]</index></name> <operator pos:start="84:26" pos:end="84:26">=</operator> <literal type="number" pos:start="84:28" pos:end="84:31">0x00</literal></expr>;</expr_stmt>
    <comment type="block" pos:start="85:5" pos:end="85:18">/* Reserved */</comment>
    <expr_stmt pos:start="86:5" pos:end="86:32"><expr pos:start="86:5" pos:end="86:31"><name pos:start="86:5" pos:end="86:24"><name pos:start="86:5" pos:end="86:7">pfl</name><operator pos:start="86:8" pos:end="86:9">-&gt;</operator><name pos:start="86:10" pos:end="86:18">cfi_table</name><index pos:start="86:19" pos:end="86:24">[<expr pos:start="86:20" pos:end="86:23"><literal type="number" pos:start="86:20" pos:end="86:23">0x23</literal></expr>]</index></name> <operator pos:start="86:26" pos:end="86:26">=</operator> <literal type="number" pos:start="86:28" pos:end="86:31">0x04</literal></expr>;</expr_stmt>
    <comment type="block" pos:start="87:5" pos:end="87:38">/* Max timeout for buffer write */</comment>
    <expr_stmt pos:start="88:5" pos:end="88:32"><expr pos:start="88:5" pos:end="88:31"><name pos:start="88:5" pos:end="88:24"><name pos:start="88:5" pos:end="88:7">pfl</name><operator pos:start="88:8" pos:end="88:9">-&gt;</operator><name pos:start="88:10" pos:end="88:18">cfi_table</name><index pos:start="88:19" pos:end="88:24">[<expr pos:start="88:20" pos:end="88:23"><literal type="number" pos:start="88:20" pos:end="88:23">0x24</literal></expr>]</index></name> <operator pos:start="88:26" pos:end="88:26">=</operator> <literal type="number" pos:start="88:28" pos:end="88:31">0x04</literal></expr>;</expr_stmt>
    <comment type="block" pos:start="89:5" pos:end="89:37">/* Max timeout for block erase */</comment>
    <expr_stmt pos:start="90:5" pos:end="90:32"><expr pos:start="90:5" pos:end="90:31"><name pos:start="90:5" pos:end="90:24"><name pos:start="90:5" pos:end="90:7">pfl</name><operator pos:start="90:8" pos:end="90:9">-&gt;</operator><name pos:start="90:10" pos:end="90:18">cfi_table</name><index pos:start="90:19" pos:end="90:24">[<expr pos:start="90:20" pos:end="90:23"><literal type="number" pos:start="90:20" pos:end="90:23">0x25</literal></expr>]</index></name> <operator pos:start="90:26" pos:end="90:26">=</operator> <literal type="number" pos:start="90:28" pos:end="90:31">0x04</literal></expr>;</expr_stmt>
    <comment type="block" pos:start="91:5" pos:end="91:36">/* Max timeout for chip erase */</comment>
    <expr_stmt pos:start="92:5" pos:end="92:32"><expr pos:start="92:5" pos:end="92:31"><name pos:start="92:5" pos:end="92:24"><name pos:start="92:5" pos:end="92:7">pfl</name><operator pos:start="92:8" pos:end="92:9">-&gt;</operator><name pos:start="92:10" pos:end="92:18">cfi_table</name><index pos:start="92:19" pos:end="92:24">[<expr pos:start="92:20" pos:end="92:23"><literal type="number" pos:start="92:20" pos:end="92:23">0x26</literal></expr>]</index></name> <operator pos:start="92:26" pos:end="92:26">=</operator> <literal type="number" pos:start="92:28" pos:end="92:31">0x00</literal></expr>;</expr_stmt>
    <comment type="block" pos:start="93:5" pos:end="93:21">/* Device size */</comment>
    <expr_stmt pos:start="94:5" pos:end="94:45"><expr pos:start="94:5" pos:end="94:44"><name pos:start="94:5" pos:end="94:24"><name pos:start="94:5" pos:end="94:7">pfl</name><operator pos:start="94:8" pos:end="94:9">-&gt;</operator><name pos:start="94:10" pos:end="94:18">cfi_table</name><index pos:start="94:19" pos:end="94:24">[<expr pos:start="94:20" pos:end="94:23"><literal type="number" pos:start="94:20" pos:end="94:23">0x27</literal></expr>]</index></name> <operator pos:start="94:26" pos:end="94:26">=</operator> <call pos:start="94:28" pos:end="94:44"><name pos:start="94:28" pos:end="94:32">ctz32</name><argument_list pos:start="94:33" pos:end="94:44">(<argument pos:start="94:34" pos:end="94:43"><expr pos:start="94:34" pos:end="94:43"><name pos:start="94:34" pos:end="94:43">device_len</name></expr></argument>)</argument_list></call></expr>;</expr_stmt> <comment type="block" pos:start="94:47" pos:end="94:56">/* + 1; */</comment>
    <comment type="block" pos:start="95:5" pos:end="95:46">/* Flash device interface (8 &amp; 16 bits) */</comment>
    <expr_stmt pos:start="96:5" pos:end="96:32"><expr pos:start="96:5" pos:end="96:31"><name pos:start="96:5" pos:end="96:24"><name pos:start="96:5" pos:end="96:7">pfl</name><operator pos:start="96:8" pos:end="96:9">-&gt;</operator><name pos:start="96:10" pos:end="96:18">cfi_table</name><index pos:start="96:19" pos:end="96:24">[<expr pos:start="96:20" pos:end="96:23"><literal type="number" pos:start="96:20" pos:end="96:23">0x28</literal></expr>]</index></name> <operator pos:start="96:26" pos:end="96:26">=</operator> <literal type="number" pos:start="96:28" pos:end="96:31">0x02</literal></expr>;</expr_stmt>
    <expr_stmt pos:start="97:5" pos:end="97:32"><expr pos:start="97:5" pos:end="97:31"><name pos:start="97:5" pos:end="97:24"><name pos:start="97:5" pos:end="97:7">pfl</name><operator pos:start="97:8" pos:end="97:9">-&gt;</operator><name pos:start="97:10" pos:end="97:18">cfi_table</name><index pos:start="97:19" pos:end="97:24">[<expr pos:start="97:20" pos:end="97:23"><literal type="number" pos:start="97:20" pos:end="97:23">0x29</literal></expr>]</index></name> <operator pos:start="97:26" pos:end="97:26">=</operator> <literal type="number" pos:start="97:28" pos:end="97:31">0x00</literal></expr>;</expr_stmt>
    <comment type="block" pos:start="98:5" pos:end="98:50">/* Max number of bytes in multi-bytes write */</comment>
    <if_stmt pos:start="99:5" pos:end="125:32"><if pos:start="99:5" pos:end="101:5">if <condition pos:start="99:8" pos:end="99:29">(<expr pos:start="99:9" pos:end="99:28"><name pos:start="99:9" pos:end="99:23"><name pos:start="99:9" pos:end="99:11">pfl</name><operator pos:start="99:12" pos:end="99:13">-&gt;</operator><name pos:start="99:14" pos:end="99:23">bank_width</name></name> <operator pos:start="99:25" pos:end="99:26">==</operator> <literal type="number" pos:start="99:28" pos:end="99:28">1</literal></expr>)</condition> <block pos:start="99:31" pos:end="101:5">{<block_content pos:start="100:9" pos:end="100:36">
        <expr_stmt pos:start="100:9" pos:end="100:36"><expr pos:start="100:9" pos:end="100:35"><name pos:start="100:9" pos:end="100:28"><name pos:start="100:9" pos:end="100:11">pfl</name><operator pos:start="100:12" pos:end="100:13">-&gt;</operator><name pos:start="100:14" pos:end="100:22">cfi_table</name><index pos:start="100:23" pos:end="100:28">[<expr pos:start="100:24" pos:end="100:27"><literal type="number" pos:start="100:24" pos:end="100:27">0x2A</literal></expr>]</index></name> <operator pos:start="100:30" pos:end="100:30">=</operator> <literal type="number" pos:start="100:32" pos:end="100:35">0x08</literal></expr>;</expr_stmt>
    </block_content>}</block></if> <else pos:start="101:7" pos:end="125:32">else <block pos:start="101:12" pos:end="125:32">{<block_content pos:start="102:9" pos:end="125:32">
        <expr_stmt pos:start="102:9" pos:end="102:36"><expr pos:start="102:9" pos:end="102:35"><name pos:start="102:9" pos:end="102:28"><name pos:start="102:9" pos:end="102:11">pfl</name><operator pos:start="102:12" pos:end="102:13">-&gt;</operator><name pos:start="102:14" pos:end="102:22">cfi_table</name><index pos:start="102:23" pos:end="102:28">[<expr pos:start="102:24" pos:end="102:27"><literal type="number" pos:start="102:24" pos:end="102:27">0x2A</literal></expr>]</index></name> <operator pos:start="102:30" pos:end="102:30">=</operator> <literal type="number" pos:start="102:32" pos:end="102:35">0x0B</literal></expr>;</expr_stmt>
    <expr_stmt pos:start="103:5" pos:end="103:53"><expr pos:start="103:5" pos:end="103:52"><name pos:start="103:5" pos:end="103:24"><name pos:start="103:5" pos:end="103:7">pfl</name><operator pos:start="103:8" pos:end="103:9">-&gt;</operator><name pos:start="103:10" pos:end="103:24">writeblock_size</name></name> <operator pos:start="103:26" pos:end="103:26">=</operator> <literal type="number" pos:start="103:28" pos:end="103:28">1</literal> <operator pos:start="103:30" pos:end="103:31">&lt;&lt;</operator> <name pos:start="103:33" pos:end="103:52"><name pos:start="103:33" pos:end="103:35">pfl</name><operator pos:start="103:36" pos:end="103:37">-&gt;</operator><name pos:start="103:38" pos:end="103:46">cfi_table</name><index pos:start="103:47" pos:end="103:52">[<expr pos:start="103:48" pos:end="103:51"><literal type="number" pos:start="103:48" pos:end="103:51">0x2A</literal></expr>]</index></name></expr>;</expr_stmt>
    <expr_stmt pos:start="104:5" pos:end="104:32"><expr pos:start="104:5" pos:end="104:31"><name pos:start="104:5" pos:end="104:24"><name pos:start="104:5" pos:end="104:7">pfl</name><operator pos:start="104:8" pos:end="104:9">-&gt;</operator><name pos:start="104:10" pos:end="104:18">cfi_table</name><index pos:start="104:19" pos:end="104:24">[<expr pos:start="104:20" pos:end="104:23"><literal type="number" pos:start="104:20" pos:end="104:23">0x2B</literal></expr>]</index></name> <operator pos:start="104:26" pos:end="104:26">=</operator> <literal type="number" pos:start="104:28" pos:end="104:31">0x00</literal></expr>;</expr_stmt>
    <comment type="block" pos:start="105:5" pos:end="105:49">/* Number of erase block regions (uniform) */</comment>
    <expr_stmt pos:start="106:5" pos:end="106:32"><expr pos:start="106:5" pos:end="106:31"><name pos:start="106:5" pos:end="106:24"><name pos:start="106:5" pos:end="106:7">pfl</name><operator pos:start="106:8" pos:end="106:9">-&gt;</operator><name pos:start="106:10" pos:end="106:18">cfi_table</name><index pos:start="106:19" pos:end="106:24">[<expr pos:start="106:20" pos:end="106:23"><literal type="number" pos:start="106:20" pos:end="106:23">0x2C</literal></expr>]</index></name> <operator pos:start="106:26" pos:end="106:26">=</operator> <literal type="number" pos:start="106:28" pos:end="106:31">0x01</literal></expr>;</expr_stmt>
    <comment type="block" pos:start="107:5" pos:end="107:30">/* Erase block region 1 */</comment>
    <expr_stmt pos:start="108:5" pos:end="108:49"><expr pos:start="108:5" pos:end="108:48"><name pos:start="108:5" pos:end="108:24"><name pos:start="108:5" pos:end="108:7">pfl</name><operator pos:start="108:8" pos:end="108:9">-&gt;</operator><name pos:start="108:10" pos:end="108:18">cfi_table</name><index pos:start="108:19" pos:end="108:24">[<expr pos:start="108:20" pos:end="108:23"><literal type="number" pos:start="108:20" pos:end="108:23">0x2D</literal></expr>]</index></name> <operator pos:start="108:26" pos:end="108:26">=</operator> <name pos:start="108:28" pos:end="108:44">blocks_per_device</name> <operator pos:start="108:46" pos:end="108:46">-</operator> <literal type="number" pos:start="108:48" pos:end="108:48">1</literal></expr>;</expr_stmt>
    <expr_stmt pos:start="109:5" pos:end="109:56"><expr pos:start="109:5" pos:end="109:55"><name pos:start="109:5" pos:end="109:24"><name pos:start="109:5" pos:end="109:7">pfl</name><operator pos:start="109:8" pos:end="109:9">-&gt;</operator><name pos:start="109:10" pos:end="109:18">cfi_table</name><index pos:start="109:19" pos:end="109:24">[<expr pos:start="109:20" pos:end="109:23"><literal type="number" pos:start="109:20" pos:end="109:23">0x2E</literal></expr>]</index></name> <operator pos:start="109:26" pos:end="109:26">=</operator> <operator pos:start="109:28" pos:end="109:28">(</operator><name pos:start="109:29" pos:end="109:45">blocks_per_device</name> <operator pos:start="109:47" pos:end="109:47">-</operator> <literal type="number" pos:start="109:49" pos:end="109:49">1</literal><operator pos:start="109:50" pos:end="109:50">)</operator> <operator pos:start="109:52" pos:end="109:53">&gt;&gt;</operator> <literal type="number" pos:start="109:55" pos:end="109:55">8</literal></expr>;</expr_stmt>
    <expr_stmt pos:start="110:5" pos:end="110:48"><expr pos:start="110:5" pos:end="110:47"><name pos:start="110:5" pos:end="110:24"><name pos:start="110:5" pos:end="110:7">pfl</name><operator pos:start="110:8" pos:end="110:9">-&gt;</operator><name pos:start="110:10" pos:end="110:18">cfi_table</name><index pos:start="110:19" pos:end="110:24">[<expr pos:start="110:20" pos:end="110:23"><literal type="number" pos:start="110:20" pos:end="110:23">0x2F</literal></expr>]</index></name> <operator pos:start="110:26" pos:end="110:26">=</operator> <name pos:start="110:28" pos:end="110:42"><name pos:start="110:28" pos:end="110:30">pfl</name><operator pos:start="110:31" pos:end="110:32">-&gt;</operator><name pos:start="110:33" pos:end="110:42">sector_len</name></name> <operator pos:start="110:44" pos:end="110:45">&gt;&gt;</operator> <literal type="number" pos:start="110:47" pos:end="110:47">8</literal></expr>;</expr_stmt>
    <expr_stmt pos:start="111:5" pos:end="111:49"><expr pos:start="111:5" pos:end="111:48"><name pos:start="111:5" pos:end="111:24"><name pos:start="111:5" pos:end="111:7">pfl</name><operator pos:start="111:8" pos:end="111:9">-&gt;</operator><name pos:start="111:10" pos:end="111:18">cfi_table</name><index pos:start="111:19" pos:end="111:24">[<expr pos:start="111:20" pos:end="111:23"><literal type="number" pos:start="111:20" pos:end="111:23">0x30</literal></expr>]</index></name> <operator pos:start="111:26" pos:end="111:26">=</operator> <name pos:start="111:28" pos:end="111:42"><name pos:start="111:28" pos:end="111:30">pfl</name><operator pos:start="111:31" pos:end="111:32">-&gt;</operator><name pos:start="111:33" pos:end="111:42">sector_len</name></name> <operator pos:start="111:44" pos:end="111:45">&gt;&gt;</operator> <literal type="number" pos:start="111:47" pos:end="111:48">16</literal></expr>;</expr_stmt>
    <comment type="block" pos:start="112:5" pos:end="112:18">/* Extended */</comment>
    <expr_stmt pos:start="113:5" pos:end="113:31"><expr pos:start="113:5" pos:end="113:30"><name pos:start="113:5" pos:end="113:24"><name pos:start="113:5" pos:end="113:7">pfl</name><operator pos:start="113:8" pos:end="113:9">-&gt;</operator><name pos:start="113:10" pos:end="113:18">cfi_table</name><index pos:start="113:19" pos:end="113:24">[<expr pos:start="113:20" pos:end="113:23"><literal type="number" pos:start="113:20" pos:end="113:23">0x31</literal></expr>]</index></name> <operator pos:start="113:26" pos:end="113:26">=</operator> <literal type="char" pos:start="113:28" pos:end="113:30">'P'</literal></expr>;</expr_stmt>
    <expr_stmt pos:start="114:5" pos:end="114:31"><expr pos:start="114:5" pos:end="114:30"><name pos:start="114:5" pos:end="114:24"><name pos:start="114:5" pos:end="114:7">pfl</name><operator pos:start="114:8" pos:end="114:9">-&gt;</operator><name pos:start="114:10" pos:end="114:18">cfi_table</name><index pos:start="114:19" pos:end="114:24">[<expr pos:start="114:20" pos:end="114:23"><literal type="number" pos:start="114:20" pos:end="114:23">0x32</literal></expr>]</index></name> <operator pos:start="114:26" pos:end="114:26">=</operator> <literal type="char" pos:start="114:28" pos:end="114:30">'R'</literal></expr>;</expr_stmt>
    <expr_stmt pos:start="115:5" pos:end="115:31"><expr pos:start="115:5" pos:end="115:30"><name pos:start="115:5" pos:end="115:24"><name pos:start="115:5" pos:end="115:7">pfl</name><operator pos:start="115:8" pos:end="115:9">-&gt;</operator><name pos:start="115:10" pos:end="115:18">cfi_table</name><index pos:start="115:19" pos:end="115:24">[<expr pos:start="115:20" pos:end="115:23"><literal type="number" pos:start="115:20" pos:end="115:23">0x33</literal></expr>]</index></name> <operator pos:start="115:26" pos:end="115:26">=</operator> <literal type="char" pos:start="115:28" pos:end="115:30">'I'</literal></expr>;</expr_stmt>
    <expr_stmt pos:start="116:5" pos:end="116:31"><expr pos:start="116:5" pos:end="116:30"><name pos:start="116:5" pos:end="116:24"><name pos:start="116:5" pos:end="116:7">pfl</name><operator pos:start="116:8" pos:end="116:9">-&gt;</operator><name pos:start="116:10" pos:end="116:18">cfi_table</name><index pos:start="116:19" pos:end="116:24">[<expr pos:start="116:20" pos:end="116:23"><literal type="number" pos:start="116:20" pos:end="116:23">0x34</literal></expr>]</index></name> <operator pos:start="116:26" pos:end="116:26">=</operator> <literal type="char" pos:start="116:28" pos:end="116:30">'1'</literal></expr>;</expr_stmt>
    <expr_stmt pos:start="117:5" pos:end="117:31"><expr pos:start="117:5" pos:end="117:30"><name pos:start="117:5" pos:end="117:24"><name pos:start="117:5" pos:end="117:7">pfl</name><operator pos:start="117:8" pos:end="117:9">-&gt;</operator><name pos:start="117:10" pos:end="117:18">cfi_table</name><index pos:start="117:19" pos:end="117:24">[<expr pos:start="117:20" pos:end="117:23"><literal type="number" pos:start="117:20" pos:end="117:23">0x35</literal></expr>]</index></name> <operator pos:start="117:26" pos:end="117:26">=</operator> <literal type="char" pos:start="117:28" pos:end="117:30">'0'</literal></expr>;</expr_stmt>
    <expr_stmt pos:start="118:5" pos:end="118:32"><expr pos:start="118:5" pos:end="118:31"><name pos:start="118:5" pos:end="118:24"><name pos:start="118:5" pos:end="118:7">pfl</name><operator pos:start="118:8" pos:end="118:9">-&gt;</operator><name pos:start="118:10" pos:end="118:18">cfi_table</name><index pos:start="118:19" pos:end="118:24">[<expr pos:start="118:20" pos:end="118:23"><literal type="number" pos:start="118:20" pos:end="118:23">0x36</literal></expr>]</index></name> <operator pos:start="118:26" pos:end="118:26">=</operator> <literal type="number" pos:start="118:28" pos:end="118:31">0x00</literal></expr>;</expr_stmt>
    <expr_stmt pos:start="119:5" pos:end="119:32"><expr pos:start="119:5" pos:end="119:31"><name pos:start="119:5" pos:end="119:24"><name pos:start="119:5" pos:end="119:7">pfl</name><operator pos:start="119:8" pos:end="119:9">-&gt;</operator><name pos:start="119:10" pos:end="119:18">cfi_table</name><index pos:start="119:19" pos:end="119:24">[<expr pos:start="119:20" pos:end="119:23"><literal type="number" pos:start="119:20" pos:end="119:23">0x37</literal></expr>]</index></name> <operator pos:start="119:26" pos:end="119:26">=</operator> <literal type="number" pos:start="119:28" pos:end="119:31">0x00</literal></expr>;</expr_stmt>
    <expr_stmt pos:start="120:5" pos:end="120:32"><expr pos:start="120:5" pos:end="120:31"><name pos:start="120:5" pos:end="120:24"><name pos:start="120:5" pos:end="120:7">pfl</name><operator pos:start="120:8" pos:end="120:9">-&gt;</operator><name pos:start="120:10" pos:end="120:18">cfi_table</name><index pos:start="120:19" pos:end="120:24">[<expr pos:start="120:20" pos:end="120:23"><literal type="number" pos:start="120:20" pos:end="120:23">0x38</literal></expr>]</index></name> <operator pos:start="120:26" pos:end="120:26">=</operator> <literal type="number" pos:start="120:28" pos:end="120:31">0x00</literal></expr>;</expr_stmt>
    <expr_stmt pos:start="121:5" pos:end="121:32"><expr pos:start="121:5" pos:end="121:31"><name pos:start="121:5" pos:end="121:24"><name pos:start="121:5" pos:end="121:7">pfl</name><operator pos:start="121:8" pos:end="121:9">-&gt;</operator><name pos:start="121:10" pos:end="121:18">cfi_table</name><index pos:start="121:19" pos:end="121:24">[<expr pos:start="121:20" pos:end="121:23"><literal type="number" pos:start="121:20" pos:end="121:23">0x39</literal></expr>]</index></name> <operator pos:start="121:26" pos:end="121:26">=</operator> <literal type="number" pos:start="121:28" pos:end="121:31">0x00</literal></expr>;</expr_stmt>
    <expr_stmt pos:start="122:5" pos:end="122:32"><expr pos:start="122:5" pos:end="122:31"><name pos:start="122:5" pos:end="122:24"><name pos:start="122:5" pos:end="122:7">pfl</name><operator pos:start="122:8" pos:end="122:9">-&gt;</operator><name pos:start="122:10" pos:end="122:18">cfi_table</name><index pos:start="122:19" pos:end="122:24">[<expr pos:start="122:20" pos:end="122:23"><literal type="number" pos:start="122:20" pos:end="122:23">0x3a</literal></expr>]</index></name> <operator pos:start="122:26" pos:end="122:26">=</operator> <literal type="number" pos:start="122:28" pos:end="122:31">0x00</literal></expr>;</expr_stmt>
    <expr_stmt pos:start="123:5" pos:end="123:32"><expr pos:start="123:5" pos:end="123:31"><name pos:start="123:5" pos:end="123:24"><name pos:start="123:5" pos:end="123:7">pfl</name><operator pos:start="123:8" pos:end="123:9">-&gt;</operator><name pos:start="123:10" pos:end="123:18">cfi_table</name><index pos:start="123:19" pos:end="123:24">[<expr pos:start="123:20" pos:end="123:23"><literal type="number" pos:start="123:20" pos:end="123:23">0x3b</literal></expr>]</index></name> <operator pos:start="123:26" pos:end="123:26">=</operator> <literal type="number" pos:start="123:28" pos:end="123:31">0x00</literal></expr>;</expr_stmt>
    <expr_stmt pos:start="124:5" pos:end="124:32"><expr pos:start="124:5" pos:end="124:31"><name pos:start="124:5" pos:end="124:24"><name pos:start="124:5" pos:end="124:7">pfl</name><operator pos:start="124:8" pos:end="124:9">-&gt;</operator><name pos:start="124:10" pos:end="124:18">cfi_table</name><index pos:start="124:19" pos:end="124:24">[<expr pos:start="124:20" pos:end="124:23"><literal type="number" pos:start="124:20" pos:end="124:23">0x3c</literal></expr>]</index></name> <operator pos:start="124:26" pos:end="124:26">=</operator> <literal type="number" pos:start="124:28" pos:end="124:31">0x00</literal></expr>;</expr_stmt>
    <expr_stmt pos:start="125:5" pos:end="125:32"><expr pos:start="125:5" pos:end="125:31"><name pos:start="125:5" pos:end="125:24"><name pos:start="125:5" pos:end="125:7">pfl</name><operator pos:start="125:8" pos:end="125:9">-&gt;</operator><name pos:start="125:10" pos:end="125:18">cfi_table</name><index pos:start="125:19" pos:end="125:24">[<expr pos:start="125:20" pos:end="125:23"><literal type="number" pos:start="125:20" pos:end="125:23">0x3f</literal></expr>]</index></name> <operator pos:start="125:26" pos:end="125:26">=</operator> <literal type="number" pos:start="125:28" pos:end="125:31">0x01</literal></expr>;</expr_stmt></block_content></block></else></if_stmt></block_content></block></if></if_stmt></block_content></block></else></if_stmt></block_content></block></if></if_stmt></block_content></block></if></if_stmt></block_content></block></if></if_stmt></block_content></block></function> <comment type="block" pos:start="125:34" pos:end="125:66">/* Number of protection fields */</comment></unit>
