<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<unit xmlns="http://www.srcML.org/srcML/src" xmlns:pos="http://www.srcML.org/srcML/position" revision="1.0.0" language="C" filename="dataset/ropgen/aug/1/4171.c" pos:tabs="8"><function pos:start="1:1" pos:end="42:21"><type pos:start="1:1" pos:end="1:11"><specifier pos:start="1:1" pos:end="1:6">static</specifier> <name pos:start="1:8" pos:end="1:11">void</name></type> <name pos:start="1:13" pos:end="1:28">close_connection</name><parameter_list pos:start="1:29" pos:end="1:44">(<parameter pos:start="1:30" pos:end="1:43"><decl pos:start="1:30" pos:end="1:43"><type pos:start="1:30" pos:end="1:42"><name pos:start="1:30" pos:end="1:40">HTTPContext</name> <modifier pos:start="1:42" pos:end="1:42">*</modifier></type><name pos:start="1:43" pos:end="1:43">c</name></decl></parameter>)</parameter_list>
<block pos:start="2:1" pos:end="42:21">{<block_content pos:start="3:5" pos:end="42:21">
    <decl_stmt pos:start="3:5" pos:end="3:26"><decl pos:start="3:5" pos:end="3:20"><type pos:start="3:5" pos:end="3:18"><name pos:start="3:5" pos:end="3:15">HTTPContext</name> <modifier pos:start="3:17" pos:end="3:17">*</modifier><modifier pos:start="3:18" pos:end="3:18">*</modifier></type><name pos:start="3:19" pos:end="3:20">cp</name></decl>, <decl pos:start="3:23" pos:end="3:25"><type ref="prev" pos:start="3:5" pos:end="3:18"><modifier pos:start="3:23" pos:end="3:23">*</modifier></type><name pos:start="3:24" pos:end="3:25">c1</name></decl>;</decl_stmt>
    <decl_stmt pos:start="4:5" pos:end="4:22"><decl pos:start="4:5" pos:end="4:9"><type pos:start="4:5" pos:end="4:7"><name pos:start="4:5" pos:end="4:7">int</name></type> <name pos:start="4:9" pos:end="4:9">i</name></decl>, <decl pos:start="4:12" pos:end="4:21"><type ref="prev" pos:start="4:5" pos:end="4:7"/><name pos:start="4:12" pos:end="4:21">nb_streams</name></decl>;</decl_stmt>
    <decl_stmt pos:start="5:5" pos:end="5:25"><decl pos:start="5:5" pos:end="5:24"><type pos:start="5:5" pos:end="5:21"><name pos:start="5:5" pos:end="5:19">AVFormatContext</name> <modifier pos:start="5:21" pos:end="5:21">*</modifier></type><name pos:start="5:22" pos:end="5:24">ctx</name></decl>;</decl_stmt>
    <decl_stmt pos:start="6:5" pos:end="6:18"><decl pos:start="6:5" pos:end="6:17"><type pos:start="6:5" pos:end="6:16"><name pos:start="6:5" pos:end="6:14">URLContext</name> <modifier pos:start="6:16" pos:end="6:16">*</modifier></type><name pos:start="6:17" pos:end="6:17">h</name></decl>;</decl_stmt>
    <decl_stmt pos:start="7:5" pos:end="7:17"><decl pos:start="7:5" pos:end="7:16"><type pos:start="7:5" pos:end="7:14"><name pos:start="7:5" pos:end="7:12">AVStream</name> <modifier pos:start="7:14" pos:end="7:14">*</modifier></type><name pos:start="7:15" pos:end="7:16">st</name></decl>;</decl_stmt>
    <comment type="block" pos:start="8:5" pos:end="8:37">/* remove connection from list */</comment>
    <expr_stmt pos:start="9:5" pos:end="9:25"><expr pos:start="9:5" pos:end="9:24"><name pos:start="9:5" pos:end="9:6">cp</name> <operator pos:start="9:8" pos:end="9:8">=</operator> <operator pos:start="9:10" pos:end="9:10">&amp;</operator><name pos:start="9:11" pos:end="9:24">first_http_ctx</name></expr>;</expr_stmt>
    <while pos:start="10:5" pos:end="42:21">while <condition pos:start="10:11" pos:end="10:25">(<expr pos:start="10:12" pos:end="10:24"><operator pos:start="10:12" pos:end="10:12">(</operator><operator pos:start="10:13" pos:end="10:13">*</operator><name pos:start="10:14" pos:end="10:15">cp</name><operator pos:start="10:16" pos:end="10:16">)</operator> <operator pos:start="10:18" pos:end="10:19">!=</operator> <name pos:start="10:21" pos:end="10:24">NULL</name></expr>)</condition> <block pos:start="10:27" pos:end="42:21">{<block_content pos:start="11:9" pos:end="42:21">
        <expr_stmt pos:start="11:9" pos:end="11:17"><expr pos:start="11:9" pos:end="11:16"><name pos:start="11:9" pos:end="11:10">c1</name> <operator pos:start="11:12" pos:end="11:12">=</operator> <operator pos:start="11:14" pos:end="11:14">*</operator><name pos:start="11:15" pos:end="11:16">cp</name></expr>;</expr_stmt>
        <if_stmt pos:start="12:9" pos:end="42:21"><if pos:start="12:9" pos:end="14:9">if <condition pos:start="12:12" pos:end="12:20">(<expr pos:start="12:13" pos:end="12:19"><name pos:start="12:13" pos:end="12:14">c1</name> <operator pos:start="12:16" pos:end="12:17">==</operator> <name pos:start="12:19" pos:end="12:19">c</name></expr>)</condition> <block pos:start="12:22" pos:end="14:9">{<block_content pos:start="13:13" pos:end="13:26">
            <expr_stmt pos:start="13:13" pos:end="13:26"><expr pos:start="13:13" pos:end="13:25"><operator pos:start="13:13" pos:end="13:13">*</operator><name pos:start="13:14" pos:end="13:15">cp</name> <operator pos:start="13:17" pos:end="13:17">=</operator> <name pos:start="13:19" pos:end="13:25"><name pos:start="13:19" pos:end="13:19">c</name><operator pos:start="13:20" pos:end="13:21">-&gt;</operator><name pos:start="13:22" pos:end="13:25">next</name></name></expr>;</expr_stmt>
        </block_content>}</block></if> <else pos:start="14:11" pos:end="42:21">else <block pos:start="14:16" pos:end="42:21">{<block_content pos:start="15:13" pos:end="42:21">
            <expr_stmt pos:start="15:13" pos:end="15:27"><expr pos:start="15:13" pos:end="15:26"><name pos:start="15:13" pos:end="15:14">cp</name> <operator pos:start="15:16" pos:end="15:16">=</operator> <operator pos:start="15:18" pos:end="15:18">&amp;</operator><name pos:start="15:19" pos:end="15:26"><name pos:start="15:19" pos:end="15:20">c1</name><operator pos:start="15:21" pos:end="15:22">-&gt;</operator><name pos:start="15:23" pos:end="15:26">next</name></name></expr>;</expr_stmt>
    <comment type="block" pos:start="16:5" pos:end="16:48">/* remove connection associated resources */</comment>
    <if_stmt pos:start="17:5" pos:end="18:21"><if pos:start="17:5" pos:end="18:21">if <condition pos:start="17:8" pos:end="17:19">(<expr pos:start="17:9" pos:end="17:18"><name pos:start="17:9" pos:end="17:13"><name pos:start="17:9" pos:end="17:9">c</name><operator pos:start="17:10" pos:end="17:11">-&gt;</operator><name pos:start="17:12" pos:end="17:13">fd</name></name> <operator pos:start="17:15" pos:end="17:16">&gt;=</operator> <literal type="number" pos:start="17:18" pos:end="17:18">0</literal></expr>)</condition><block type="pseudo" pos:start="18:9" pos:end="18:21"><block_content pos:start="18:9" pos:end="18:21">
        <expr_stmt pos:start="18:9" pos:end="18:21"><expr pos:start="18:9" pos:end="18:20"><call pos:start="18:9" pos:end="18:20"><name pos:start="18:9" pos:end="18:13">close</name><argument_list pos:start="18:14" pos:end="18:20">(<argument pos:start="18:15" pos:end="18:19"><expr pos:start="18:15" pos:end="18:19"><name pos:start="18:15" pos:end="18:19"><name pos:start="18:15" pos:end="18:15">c</name><operator pos:start="18:16" pos:end="18:17">-&gt;</operator><name pos:start="18:18" pos:end="18:19">fd</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt></block_content></block></if></if_stmt>
    <if_stmt pos:start="19:5" pos:end="42:21"><if pos:start="19:5" pos:end="42:21">if <condition pos:start="19:8" pos:end="19:18">(<expr pos:start="19:9" pos:end="19:17"><name pos:start="19:9" pos:end="19:17"><name pos:start="19:9" pos:end="19:9">c</name><operator pos:start="19:10" pos:end="19:11">-&gt;</operator><name pos:start="19:12" pos:end="19:17">fmt_in</name></name></expr>)</condition> <block pos:start="19:20" pos:end="42:21">{<block_content pos:start="21:9" pos:end="42:21">
        <comment type="block" pos:start="20:9" pos:end="20:37">/* close each frame parser */</comment>
        <for pos:start="21:9" pos:end="42:21">for<control pos:start="21:12" pos:end="21:44">(<init pos:start="21:13" pos:end="21:16"><expr pos:start="21:13" pos:end="21:15"><name pos:start="21:13" pos:end="21:13">i</name><operator pos:start="21:14" pos:end="21:14">=</operator><literal type="number" pos:start="21:15" pos:end="21:15">0</literal></expr>;</init><condition pos:start="21:17" pos:end="21:40"><expr pos:start="21:17" pos:end="21:39"><name pos:start="21:17" pos:end="21:17">i</name><operator pos:start="21:18" pos:end="21:18">&lt;</operator><name pos:start="21:19" pos:end="21:39"><name pos:start="21:19" pos:end="21:19">c</name><operator pos:start="21:20" pos:end="21:21">-&gt;</operator><name pos:start="21:22" pos:end="21:27">fmt_in</name><operator pos:start="21:28" pos:end="21:29">-&gt;</operator><name pos:start="21:30" pos:end="21:39">nb_streams</name></name></expr>;</condition><incr pos:start="21:41" pos:end="21:43"><expr pos:start="21:41" pos:end="21:43"><name pos:start="21:41" pos:end="21:41">i</name><operator pos:start="21:42" pos:end="21:43">++</operator></expr></incr>)</control> <block pos:start="21:46" pos:end="42:21">{<block_content pos:start="22:13" pos:end="42:21">
            <expr_stmt pos:start="22:13" pos:end="22:39"><expr pos:start="22:13" pos:end="22:38"><name pos:start="22:13" pos:end="22:14">st</name> <operator pos:start="22:16" pos:end="22:16">=</operator> <name pos:start="22:18" pos:end="22:38"><name pos:start="22:18" pos:end="22:18">c</name><operator pos:start="22:19" pos:end="22:20">-&gt;</operator><name pos:start="22:21" pos:end="22:26">fmt_in</name><operator pos:start="22:27" pos:end="22:28">-&gt;</operator><name pos:start="22:29" pos:end="22:35">streams</name><index pos:start="22:36" pos:end="22:38">[<expr pos:start="22:37" pos:end="22:37"><name pos:start="22:37" pos:end="22:37">i</name></expr>]</index></name></expr>;</expr_stmt>
            <if_stmt pos:start="23:13" pos:end="42:21"><if pos:start="23:13" pos:end="42:21">if <condition pos:start="23:16" pos:end="23:32">(<expr pos:start="23:17" pos:end="23:31"><name pos:start="23:17" pos:end="23:31"><name pos:start="23:17" pos:end="23:18">st</name><operator pos:start="23:19" pos:end="23:20">-&gt;</operator><name pos:start="23:21" pos:end="23:25">codec</name><operator pos:start="23:26" pos:end="23:26">.</operator><name pos:start="23:27" pos:end="23:31">codec</name></name></expr>)</condition> <block pos:start="23:34" pos:end="42:21">{<block_content pos:start="24:17" pos:end="42:21">
                <expr_stmt pos:start="24:17" pos:end="24:42"><expr pos:start="24:17" pos:end="24:41"><call pos:start="24:17" pos:end="24:41"><name pos:start="24:17" pos:end="24:29">avcodec_close</name><argument_list pos:start="24:30" pos:end="24:41">(<argument pos:start="24:31" pos:end="24:40"><expr pos:start="24:31" pos:end="24:40"><operator pos:start="24:31" pos:end="24:31">&amp;</operator><name pos:start="24:32" pos:end="24:40"><name pos:start="24:32" pos:end="24:33">st</name><operator pos:start="24:34" pos:end="24:35">-&gt;</operator><name pos:start="24:36" pos:end="24:40">codec</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt pos:start="25:9" pos:end="25:39"><expr pos:start="25:9" pos:end="25:38"><call pos:start="25:9" pos:end="25:38"><name pos:start="25:9" pos:end="25:27">av_close_input_file</name><argument_list pos:start="25:28" pos:end="25:38">(<argument pos:start="25:29" pos:end="25:37"><expr pos:start="25:29" pos:end="25:37"><name pos:start="25:29" pos:end="25:37"><name pos:start="25:29" pos:end="25:29">c</name><operator pos:start="25:30" pos:end="25:31">-&gt;</operator><name pos:start="25:32" pos:end="25:37">fmt_in</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
    <comment type="block" pos:start="26:5" pos:end="26:40">/* free RTP output streams if any */</comment>
    <expr_stmt pos:start="27:5" pos:end="27:19"><expr pos:start="27:5" pos:end="27:18"><name pos:start="27:5" pos:end="27:14">nb_streams</name> <operator pos:start="27:16" pos:end="27:16">=</operator> <literal type="number" pos:start="27:18" pos:end="27:18">0</literal></expr>;</expr_stmt>
    <if_stmt pos:start="28:5" pos:end="29:43"><if pos:start="28:5" pos:end="29:43">if <condition pos:start="28:8" pos:end="28:18">(<expr pos:start="28:9" pos:end="28:17"><name pos:start="28:9" pos:end="28:17"><name pos:start="28:9" pos:end="28:9">c</name><operator pos:start="28:10" pos:end="28:11">-&gt;</operator><name pos:start="28:12" pos:end="28:17">stream</name></name></expr>)</condition><block type="pseudo" pos:start="29:9" pos:end="29:43"><block_content pos:start="29:9" pos:end="29:43"> 
        <expr_stmt pos:start="29:9" pos:end="29:43"><expr pos:start="29:9" pos:end="29:42"><name pos:start="29:9" pos:end="29:18">nb_streams</name> <operator pos:start="29:20" pos:end="29:20">=</operator> <name pos:start="29:22" pos:end="29:42"><name pos:start="29:22" pos:end="29:22">c</name><operator pos:start="29:23" pos:end="29:24">-&gt;</operator><name pos:start="29:25" pos:end="29:30">stream</name><operator pos:start="29:31" pos:end="29:32">-&gt;</operator><name pos:start="29:33" pos:end="29:42">nb_streams</name></name></expr>;</expr_stmt></block_content></block></if></if_stmt>
    <for pos:start="30:5" pos:end="42:21">for<control pos:start="30:8" pos:end="30:29">(<init pos:start="30:9" pos:end="30:12"><expr pos:start="30:9" pos:end="30:11"><name pos:start="30:9" pos:end="30:9">i</name><operator pos:start="30:10" pos:end="30:10">=</operator><literal type="number" pos:start="30:11" pos:end="30:11">0</literal></expr>;</init><condition pos:start="30:13" pos:end="30:25"><expr pos:start="30:13" pos:end="30:24"><name pos:start="30:13" pos:end="30:13">i</name><operator pos:start="30:14" pos:end="30:14">&lt;</operator><name pos:start="30:15" pos:end="30:24">nb_streams</name></expr>;</condition><incr pos:start="30:26" pos:end="30:28"><expr pos:start="30:26" pos:end="30:28"><name pos:start="30:26" pos:end="30:26">i</name><operator pos:start="30:27" pos:end="30:28">++</operator></expr></incr>)</control> <block pos:start="30:31" pos:end="42:21">{<block_content pos:start="31:9" pos:end="42:21">
        <expr_stmt pos:start="31:9" pos:end="31:28"><expr pos:start="31:9" pos:end="31:27"><name pos:start="31:9" pos:end="31:11">ctx</name> <operator pos:start="31:13" pos:end="31:13">=</operator> <name pos:start="31:15" pos:end="31:27"><name pos:start="31:15" pos:end="31:15">c</name><operator pos:start="31:16" pos:end="31:17">-&gt;</operator><name pos:start="31:18" pos:end="31:24">rtp_ctx</name><index pos:start="31:25" pos:end="31:27">[<expr pos:start="31:26" pos:end="31:26"><name pos:start="31:26" pos:end="31:26">i</name></expr>]</index></name></expr>;</expr_stmt>
        <if_stmt pos:start="32:9" pos:end="42:21"><if pos:start="32:9" pos:end="42:21">if <condition pos:start="32:12" pos:end="32:16">(<expr pos:start="32:13" pos:end="32:15"><name pos:start="32:13" pos:end="32:15">ctx</name></expr>)</condition> <block pos:start="32:18" pos:end="42:21">{<block_content pos:start="33:13" pos:end="42:21">
            <expr_stmt pos:start="33:13" pos:end="33:25"><expr pos:start="33:13" pos:end="33:24"><call pos:start="33:13" pos:end="33:24"><name pos:start="33:13" pos:end="33:19">av_free</name><argument_list pos:start="33:20" pos:end="33:24">(<argument pos:start="33:21" pos:end="33:23"><expr pos:start="33:21" pos:end="33:23"><name pos:start="33:21" pos:end="33:23">ctx</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <expr_stmt pos:start="34:9" pos:end="34:30"><expr pos:start="34:9" pos:end="34:29"><name pos:start="34:9" pos:end="34:9">h</name> <operator pos:start="34:11" pos:end="34:11">=</operator> <name pos:start="34:13" pos:end="34:29"><name pos:start="34:13" pos:end="34:13">c</name><operator pos:start="34:14" pos:end="34:15">-&gt;</operator><name pos:start="34:16" pos:end="34:26">rtp_handles</name><index pos:start="34:27" pos:end="34:29">[<expr pos:start="34:28" pos:end="34:28"><name pos:start="34:28" pos:end="34:28">i</name></expr>]</index></name></expr>;</expr_stmt>
        <if_stmt pos:start="35:9" pos:end="42:21"><if pos:start="35:9" pos:end="42:21">if <condition pos:start="35:12" pos:end="35:14">(<expr pos:start="35:13" pos:end="35:13"><name pos:start="35:13" pos:end="35:13">h</name></expr>)</condition> <block pos:start="35:16" pos:end="42:21">{<block_content pos:start="36:13" pos:end="42:21">
            <expr_stmt pos:start="36:13" pos:end="36:25"><expr pos:start="36:13" pos:end="36:24"><call pos:start="36:13" pos:end="36:24"><name pos:start="36:13" pos:end="36:21">url_close</name><argument_list pos:start="36:22" pos:end="36:24">(<argument pos:start="36:23" pos:end="36:23"><expr pos:start="36:23" pos:end="36:23"><name pos:start="36:23" pos:end="36:23">h</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
    <if_stmt pos:start="37:5" pos:end="38:50"><if pos:start="37:5" pos:end="38:50">if <condition pos:start="37:8" pos:end="37:18">(<expr pos:start="37:9" pos:end="37:17"><name pos:start="37:9" pos:end="37:17"><name pos:start="37:9" pos:end="37:9">c</name><operator pos:start="37:10" pos:end="37:11">-&gt;</operator><name pos:start="37:12" pos:end="37:17">stream</name></name></expr>)</condition><block type="pseudo" pos:start="38:9" pos:end="38:50"><block_content pos:start="38:9" pos:end="38:50">
        <expr_stmt pos:start="38:9" pos:end="38:50"><expr pos:start="38:9" pos:end="38:49"><name pos:start="38:9" pos:end="38:25">current_bandwidth</name> <operator pos:start="38:27" pos:end="38:28">-=</operator> <name pos:start="38:30" pos:end="38:49"><name pos:start="38:30" pos:end="38:30">c</name><operator pos:start="38:31" pos:end="38:32">-&gt;</operator><name pos:start="38:33" pos:end="38:38">stream</name><operator pos:start="38:39" pos:end="38:40">-&gt;</operator><name pos:start="38:41" pos:end="38:49">bandwidth</name></name></expr>;</expr_stmt></block_content></block></if></if_stmt>
    <expr_stmt pos:start="39:5" pos:end="39:28"><expr pos:start="39:5" pos:end="39:27"><call pos:start="39:5" pos:end="39:27"><name pos:start="39:5" pos:end="39:12">av_freep</name><argument_list pos:start="39:13" pos:end="39:27">(<argument pos:start="39:14" pos:end="39:26"><expr pos:start="39:14" pos:end="39:26"><operator pos:start="39:14" pos:end="39:14">&amp;</operator><name pos:start="39:15" pos:end="39:26"><name pos:start="39:15" pos:end="39:15">c</name><operator pos:start="39:16" pos:end="39:17">-&gt;</operator><name pos:start="39:18" pos:end="39:26">pb_buffer</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
    <expr_stmt pos:start="40:5" pos:end="40:23"><expr pos:start="40:5" pos:end="40:22"><call pos:start="40:5" pos:end="40:22"><name pos:start="40:5" pos:end="40:11">av_free</name><argument_list pos:start="40:12" pos:end="40:22">(<argument pos:start="40:13" pos:end="40:21"><expr pos:start="40:13" pos:end="40:21"><name pos:start="40:13" pos:end="40:21"><name pos:start="40:13" pos:end="40:13">c</name><operator pos:start="40:14" pos:end="40:15">-&gt;</operator><name pos:start="40:16" pos:end="40:21">buffer</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
    <expr_stmt pos:start="41:5" pos:end="41:15"><expr pos:start="41:5" pos:end="41:14"><call pos:start="41:5" pos:end="41:14"><name pos:start="41:5" pos:end="41:11">av_free</name><argument_list pos:start="41:12" pos:end="41:14">(<argument pos:start="41:13" pos:end="41:13"><expr pos:start="41:13" pos:end="41:13"><name pos:start="41:13" pos:end="41:13">c</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
    <expr_stmt pos:start="42:5" pos:end="42:21"><expr pos:start="42:5" pos:end="42:20"><name pos:start="42:5" pos:end="42:18">nb_connections</name><operator pos:start="42:19" pos:end="42:20">--</operator></expr>;</expr_stmt></block_content></block></if></if_stmt></block_content></block></if></if_stmt></block_content></block></for></block_content></block></if></if_stmt></block_content></block></for></block_content></block></if></if_stmt></block_content></block></else></if_stmt></block_content></block></while></block_content></block></function></unit>
