<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<unit xmlns="http://www.srcML.org/srcML/src" xmlns:pos="http://www.srcML.org/srcML/position" revision="1.0.0" language="C" filename="dataset/ropgen/aug/1/9191.c" pos:tabs="8"><function pos:start="1:1" pos:end="76:1"><type pos:start="1:1" pos:end="1:4"><name pos:start="1:1" pos:end="1:4">void</name></type> <name pos:start="1:6" pos:end="1:16">virtio_init</name><parameter_list pos:start="1:17" pos:end="3:56">(<parameter pos:start="1:18" pos:end="1:35"><decl pos:start="1:18" pos:end="1:35"><type pos:start="1:18" pos:end="1:35"><name pos:start="1:18" pos:end="1:29">VirtIODevice</name> <modifier pos:start="1:31" pos:end="1:31">*</modifier></type><name pos:start="1:32" pos:end="1:35">vdev</name></decl></parameter>, <parameter pos:start="1:38" pos:end="1:53"><decl pos:start="1:38" pos:end="1:53"><type pos:start="1:38" pos:end="1:53"><specifier pos:start="1:38" pos:end="1:42">const</specifier> <name pos:start="1:44" pos:end="1:47">char</name> <modifier pos:start="1:49" pos:end="1:49">*</modifier></type><name pos:start="1:50" pos:end="1:53">name</name></decl></parameter>,

                 <parameter pos:start="3:18" pos:end="3:35"><decl pos:start="3:18" pos:end="3:35"><type pos:start="3:18" pos:end="3:35"><name pos:start="3:18" pos:end="3:25">uint16_t</name></type> <name pos:start="3:27" pos:end="3:35">device_id</name></decl></parameter>, <parameter pos:start="3:38" pos:end="3:55"><decl pos:start="3:38" pos:end="3:55"><type pos:start="3:38" pos:end="3:55"><name pos:start="3:38" pos:end="3:43">size_t</name></type> <name pos:start="3:45" pos:end="3:55">config_size</name></decl></parameter>)</parameter_list>

<block pos:start="5:1" pos:end="76:1">{<block_content pos:start="7:5" pos:end="74:41">

    <decl_stmt pos:start="7:5" pos:end="7:55"><decl pos:start="7:5" pos:end="7:54"><type pos:start="7:5" pos:end="7:14"><name pos:start="7:5" pos:end="7:12">BusState</name> <modifier pos:start="7:14" pos:end="7:14">*</modifier></type><name pos:start="7:15" pos:end="7:18">qbus</name> <init pos:start="7:20" pos:end="7:54">= <expr pos:start="7:22" pos:end="7:54"><call pos:start="7:22" pos:end="7:54"><name pos:start="7:22" pos:end="7:40">qdev_get_parent_bus</name><argument_list pos:start="7:41" pos:end="7:54">(<argument pos:start="7:42" pos:end="7:53"><expr pos:start="7:42" pos:end="7:53"><call pos:start="7:42" pos:end="7:53"><name pos:start="7:42" pos:end="7:47">DEVICE</name><argument_list pos:start="7:48" pos:end="7:53">(<argument pos:start="7:49" pos:end="7:52"><expr pos:start="7:49" pos:end="7:52"><name pos:start="7:49" pos:end="7:52">vdev</name></expr></argument>)</argument_list></call></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>

    <decl_stmt pos:start="9:5" pos:end="9:51"><decl pos:start="9:5" pos:end="9:50"><type pos:start="9:5" pos:end="9:20"><name pos:start="9:5" pos:end="9:18">VirtioBusClass</name> <modifier pos:start="9:20" pos:end="9:20">*</modifier></type><name pos:start="9:21" pos:end="9:21">k</name> <init pos:start="9:23" pos:end="9:50">= <expr pos:start="9:25" pos:end="9:50"><call pos:start="9:25" pos:end="9:50"><name pos:start="9:25" pos:end="9:44">VIRTIO_BUS_GET_CLASS</name><argument_list pos:start="9:45" pos:end="9:50">(<argument pos:start="9:46" pos:end="9:49"><expr pos:start="9:46" pos:end="9:49"><name pos:start="9:46" pos:end="9:49">qbus</name></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>

    <decl_stmt pos:start="11:5" pos:end="11:10"><decl pos:start="11:5" pos:end="11:9"><type pos:start="11:5" pos:end="11:7"><name pos:start="11:5" pos:end="11:7">int</name></type> <name pos:start="11:9" pos:end="11:9">i</name></decl>;</decl_stmt>

    <decl_stmt pos:start="13:5" pos:end="13:75"><decl pos:start="13:5" pos:end="13:74"><type pos:start="13:5" pos:end="13:7"><name pos:start="13:5" pos:end="13:7">int</name></type> <name pos:start="13:9" pos:end="13:16">nvectors</name> <init pos:start="13:18" pos:end="13:74">= <expr pos:start="13:20" pos:end="13:74"><ternary pos:start="13:20" pos:end="13:74"><condition pos:start="13:20" pos:end="13:38"><expr pos:start="13:20" pos:end="13:36"><name pos:start="13:20" pos:end="13:36"><name pos:start="13:20" pos:end="13:20">k</name><operator pos:start="13:21" pos:end="13:22">-&gt;</operator><name pos:start="13:23" pos:end="13:36">query_nvectors</name></name></expr> ?</condition><then pos:start="13:40" pos:end="13:70"> <expr pos:start="13:40" pos:end="13:70"><call pos:start="13:40" pos:end="13:70"><name pos:start="13:40" pos:end="13:56"><name pos:start="13:40" pos:end="13:40">k</name><operator pos:start="13:41" pos:end="13:42">-&gt;</operator><name pos:start="13:43" pos:end="13:56">query_nvectors</name></name><argument_list pos:start="13:57" pos:end="13:70">(<argument pos:start="13:58" pos:end="13:69"><expr pos:start="13:58" pos:end="13:69"><name pos:start="13:58" pos:end="13:69"><name pos:start="13:58" pos:end="13:61">qbus</name><operator pos:start="13:62" pos:end="13:63">-&gt;</operator><name pos:start="13:64" pos:end="13:69">parent</name></name></expr></argument>)</argument_list></call></expr> </then><else pos:start="13:72" pos:end="13:74">: <expr pos:start="13:74" pos:end="13:74"><literal type="number" pos:start="13:74" pos:end="13:74">0</literal></expr></else></ternary></expr></init></decl>;</decl_stmt>



    <if_stmt pos:start="17:5" pos:end="23:5"><if pos:start="17:5" pos:end="23:5">if <condition pos:start="17:8" pos:end="17:17">(<expr pos:start="17:9" pos:end="17:16"><name pos:start="17:9" pos:end="17:16">nvectors</name></expr>)</condition> <block pos:start="17:19" pos:end="23:5">{<block_content pos:start="19:9" pos:end="21:63">

        <expr_stmt pos:start="19:9" pos:end="21:63"><expr pos:start="19:9" pos:end="21:62"><name pos:start="19:9" pos:end="19:27"><name pos:start="19:9" pos:end="19:12">vdev</name><operator pos:start="19:13" pos:end="19:14">-&gt;</operator><name pos:start="19:15" pos:end="19:27">vector_queues</name></name> <operator pos:start="19:29" pos:end="19:29">=</operator>

            <call pos:start="21:13" pos:end="21:62"><name pos:start="21:13" pos:end="21:21">g_malloc0</name><argument_list pos:start="21:22" pos:end="21:62">(<argument pos:start="21:23" pos:end="21:61"><expr pos:start="21:23" pos:end="21:61"><sizeof pos:start="21:23" pos:end="21:50">sizeof<argument_list pos:start="21:29" pos:end="21:50">(<argument pos:start="21:30" pos:end="21:49"><expr pos:start="21:30" pos:end="21:49"><operator pos:start="21:30" pos:end="21:30">*</operator><name pos:start="21:31" pos:end="21:49"><name pos:start="21:31" pos:end="21:34">vdev</name><operator pos:start="21:35" pos:end="21:36">-&gt;</operator><name pos:start="21:37" pos:end="21:49">vector_queues</name></name></expr></argument>)</argument_list></sizeof> <operator pos:start="21:52" pos:end="21:52">*</operator> <name pos:start="21:54" pos:end="21:61">nvectors</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    </block_content>}</block></if></if_stmt>



    <expr_stmt pos:start="27:5" pos:end="27:32"><expr pos:start="27:5" pos:end="27:31"><name pos:start="27:5" pos:end="27:19"><name pos:start="27:5" pos:end="27:8">vdev</name><operator pos:start="27:9" pos:end="27:10">-&gt;</operator><name pos:start="27:11" pos:end="27:19">device_id</name></name> <operator pos:start="27:21" pos:end="27:21">=</operator> <name pos:start="27:23" pos:end="27:31">device_id</name></expr>;</expr_stmt>

    <expr_stmt pos:start="29:5" pos:end="29:21"><expr pos:start="29:5" pos:end="29:20"><name pos:start="29:5" pos:end="29:16"><name pos:start="29:5" pos:end="29:8">vdev</name><operator pos:start="29:9" pos:end="29:10">-&gt;</operator><name pos:start="29:11" pos:end="29:16">status</name></name> <operator pos:start="29:18" pos:end="29:18">=</operator> <literal type="number" pos:start="29:20" pos:end="29:20">0</literal></expr>;</expr_stmt>

    <expr_stmt pos:start="31:5" pos:end="31:18"><expr pos:start="31:5" pos:end="31:17"><name pos:start="31:5" pos:end="31:13"><name pos:start="31:5" pos:end="31:8">vdev</name><operator pos:start="31:9" pos:end="31:10">-&gt;</operator><name pos:start="31:11" pos:end="31:13">isr</name></name> <operator pos:start="31:15" pos:end="31:15">=</operator> <literal type="number" pos:start="31:17" pos:end="31:17">0</literal></expr>;</expr_stmt>

    <expr_stmt pos:start="33:5" pos:end="33:24"><expr pos:start="33:5" pos:end="33:23"><name pos:start="33:5" pos:end="33:19"><name pos:start="33:5" pos:end="33:8">vdev</name><operator pos:start="33:9" pos:end="33:10">-&gt;</operator><name pos:start="33:11" pos:end="33:19">queue_sel</name></name> <operator pos:start="33:21" pos:end="33:21">=</operator> <literal type="number" pos:start="33:23" pos:end="33:23">0</literal></expr>;</expr_stmt>

    <expr_stmt pos:start="35:5" pos:end="35:43"><expr pos:start="35:5" pos:end="35:42"><name pos:start="35:5" pos:end="35:23"><name pos:start="35:5" pos:end="35:8">vdev</name><operator pos:start="35:9" pos:end="35:10">-&gt;</operator><name pos:start="35:11" pos:end="35:23">config_vector</name></name> <operator pos:start="35:25" pos:end="35:25">=</operator> <name pos:start="35:27" pos:end="35:42">VIRTIO_NO_VECTOR</name></expr>;</expr_stmt>

    <expr_stmt pos:start="37:5" pos:end="37:63"><expr pos:start="37:5" pos:end="37:62"><name pos:start="37:5" pos:end="37:12"><name pos:start="37:5" pos:end="37:8">vdev</name><operator pos:start="37:9" pos:end="37:10">-&gt;</operator><name pos:start="37:11" pos:end="37:12">vq</name></name> <operator pos:start="37:14" pos:end="37:14">=</operator> <call pos:start="37:16" pos:end="37:62"><name pos:start="37:16" pos:end="37:24">g_malloc0</name><argument_list pos:start="37:25" pos:end="37:62">(<argument pos:start="37:26" pos:end="37:61"><expr pos:start="37:26" pos:end="37:61"><sizeof pos:start="37:26" pos:end="37:42">sizeof<argument_list pos:start="37:32" pos:end="37:42">(<argument pos:start="37:33" pos:end="37:41"><expr pos:start="37:33" pos:end="37:41"><name pos:start="37:33" pos:end="37:41">VirtQueue</name></expr></argument>)</argument_list></sizeof> <operator pos:start="37:44" pos:end="37:44">*</operator> <name pos:start="37:46" pos:end="37:61">VIRTIO_QUEUE_MAX</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    <expr_stmt pos:start="39:5" pos:end="39:45"><expr pos:start="39:5" pos:end="39:44"><name pos:start="39:5" pos:end="39:20"><name pos:start="39:5" pos:end="39:8">vdev</name><operator pos:start="39:9" pos:end="39:10">-&gt;</operator><name pos:start="39:11" pos:end="39:20">vm_running</name></name> <operator pos:start="39:22" pos:end="39:22">=</operator> <call pos:start="39:24" pos:end="39:44"><name pos:start="39:24" pos:end="39:42">runstate_is_running</name><argument_list pos:start="39:43" pos:end="39:44">()</argument_list></call></expr>;</expr_stmt>


    <for pos:start="42:5" pos:end="50:5">for <control pos:start="42:9" pos:end="42:42">(<init pos:start="42:10" pos:end="42:15"><expr pos:start="42:10" pos:end="42:14"><name pos:start="42:10" pos:end="42:10">i</name> <operator pos:start="42:12" pos:end="42:12">=</operator> <literal type="number" pos:start="42:14" pos:end="42:14">0</literal></expr>;</init> <condition pos:start="42:17" pos:end="42:37"><expr pos:start="42:17" pos:end="42:36"><name pos:start="42:17" pos:end="42:17">i</name> <operator pos:start="42:19" pos:end="42:19">&lt;</operator> <name pos:start="42:21" pos:end="42:36">VIRTIO_QUEUE_MAX</name></expr>;</condition> <incr pos:start="42:39" pos:end="42:41"><expr pos:start="42:39" pos:end="42:41"><name pos:start="42:39" pos:end="42:39">i</name><operator pos:start="42:40" pos:end="42:41">++</operator></expr></incr>)</control> <block pos:start="42:44" pos:end="50:5">{<block_content pos:start="44:9" pos:end="48:36">

        <expr_stmt pos:start="44:9" pos:end="44:46"><expr pos:start="44:9" pos:end="44:45"><name pos:start="44:9" pos:end="44:19"><name pos:start="44:9" pos:end="44:12">vdev</name><operator pos:start="44:13" pos:end="44:14">-&gt;</operator><name pos:start="44:15" pos:end="44:16">vq</name><index pos:start="44:17" pos:end="44:19">[<expr pos:start="44:18" pos:end="44:18"><name pos:start="44:18" pos:end="44:18">i</name></expr>]</index></name><operator pos:start="44:20" pos:end="44:20">.</operator><name pos:start="44:21" pos:end="44:26">vector</name> <operator pos:start="44:28" pos:end="44:28">=</operator> <name pos:start="44:30" pos:end="44:45">VIRTIO_NO_VECTOR</name></expr>;</expr_stmt>

        <expr_stmt pos:start="46:9" pos:end="46:32"><expr pos:start="46:9" pos:end="46:31"><name pos:start="46:9" pos:end="46:19"><name pos:start="46:9" pos:end="46:12">vdev</name><operator pos:start="46:13" pos:end="46:14">-&gt;</operator><name pos:start="46:15" pos:end="46:16">vq</name><index pos:start="46:17" pos:end="46:19">[<expr pos:start="46:18" pos:end="46:18"><name pos:start="46:18" pos:end="46:18">i</name></expr>]</index></name><operator pos:start="46:20" pos:end="46:20">.</operator><name pos:start="46:21" pos:end="46:24">vdev</name> <operator pos:start="46:26" pos:end="46:26">=</operator> <name pos:start="46:28" pos:end="46:31">vdev</name></expr>;</expr_stmt>

        <expr_stmt pos:start="48:9" pos:end="48:36"><expr pos:start="48:9" pos:end="48:35"><name pos:start="48:9" pos:end="48:19"><name pos:start="48:9" pos:end="48:12">vdev</name><operator pos:start="48:13" pos:end="48:14">-&gt;</operator><name pos:start="48:15" pos:end="48:16">vq</name><index pos:start="48:17" pos:end="48:19">[<expr pos:start="48:18" pos:end="48:18"><name pos:start="48:18" pos:end="48:18">i</name></expr>]</index></name><operator pos:start="48:20" pos:end="48:20">.</operator><name pos:start="48:21" pos:end="48:31">queue_index</name> <operator pos:start="48:33" pos:end="48:33">=</operator> <name pos:start="48:35" pos:end="48:35">i</name></expr>;</expr_stmt>

    </block_content>}</block></for>



    <expr_stmt pos:start="54:5" pos:end="54:22"><expr pos:start="54:5" pos:end="54:21"><name pos:start="54:5" pos:end="54:14"><name pos:start="54:5" pos:end="54:8">vdev</name><operator pos:start="54:9" pos:end="54:10">-&gt;</operator><name pos:start="54:11" pos:end="54:14">name</name></name> <operator pos:start="54:16" pos:end="54:16">=</operator> <name pos:start="54:18" pos:end="54:21">name</name></expr>;</expr_stmt>

    <expr_stmt pos:start="56:5" pos:end="56:35"><expr pos:start="56:5" pos:end="56:34"><name pos:start="56:5" pos:end="56:20"><name pos:start="56:5" pos:end="56:8">vdev</name><operator pos:start="56:9" pos:end="56:10">-&gt;</operator><name pos:start="56:11" pos:end="56:20">config_len</name></name> <operator pos:start="56:22" pos:end="56:22">=</operator> <name pos:start="56:24" pos:end="56:34">config_size</name></expr>;</expr_stmt>

    <if_stmt pos:start="58:5" pos:end="66:5"><if pos:start="58:5" pos:end="62:5">if <condition pos:start="58:8" pos:end="58:25">(<expr pos:start="58:9" pos:end="58:24"><name pos:start="58:9" pos:end="58:24"><name pos:start="58:9" pos:end="58:12">vdev</name><operator pos:start="58:13" pos:end="58:14">-&gt;</operator><name pos:start="58:15" pos:end="58:24">config_len</name></name></expr>)</condition> <block pos:start="58:27" pos:end="62:5">{<block_content pos:start="60:9" pos:end="60:46">

        <expr_stmt pos:start="60:9" pos:end="60:46"><expr pos:start="60:9" pos:end="60:45"><name pos:start="60:9" pos:end="60:20"><name pos:start="60:9" pos:end="60:12">vdev</name><operator pos:start="60:13" pos:end="60:14">-&gt;</operator><name pos:start="60:15" pos:end="60:20">config</name></name> <operator pos:start="60:22" pos:end="60:22">=</operator> <call pos:start="60:24" pos:end="60:45"><name pos:start="60:24" pos:end="60:32">g_malloc0</name><argument_list pos:start="60:33" pos:end="60:45">(<argument pos:start="60:34" pos:end="60:44"><expr pos:start="60:34" pos:end="60:44"><name pos:start="60:34" pos:end="60:44">config_size</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    </block_content>}</block></if> <else pos:start="62:7" pos:end="66:5">else <block pos:start="62:12" pos:end="66:5">{<block_content pos:start="64:9" pos:end="64:28">

        <expr_stmt pos:start="64:9" pos:end="64:28"><expr pos:start="64:9" pos:end="64:27"><name pos:start="64:9" pos:end="64:20"><name pos:start="64:9" pos:end="64:12">vdev</name><operator pos:start="64:13" pos:end="64:14">-&gt;</operator><name pos:start="64:15" pos:end="64:20">config</name></name> <operator pos:start="64:22" pos:end="64:22">=</operator> <name pos:start="64:24" pos:end="64:27">NULL</name></expr>;</expr_stmt>

    </block_content>}</block></else></if_stmt>

    <expr_stmt pos:start="68:5" pos:end="70:59"><expr pos:start="68:5" pos:end="70:58"><name pos:start="68:5" pos:end="68:17"><name pos:start="68:5" pos:end="68:8">vdev</name><operator pos:start="68:9" pos:end="68:10">-&gt;</operator><name pos:start="68:11" pos:end="68:17">vmstate</name></name> <operator pos:start="68:19" pos:end="68:19">=</operator> <call pos:start="68:21" pos:end="70:58"><name pos:start="68:21" pos:end="68:52">qemu_add_vm_change_state_handler</name><argument_list pos:start="68:53" pos:end="70:58">(<argument pos:start="68:54" pos:end="68:74"><expr pos:start="68:54" pos:end="68:74"><name pos:start="68:54" pos:end="68:74">virtio_vmstate_change</name></expr></argument>,

                                                     <argument pos:start="70:54" pos:end="70:57"><expr pos:start="70:54" pos:end="70:57"><name pos:start="70:54" pos:end="70:57">vdev</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    <expr_stmt pos:start="72:5" pos:end="72:50"><expr pos:start="72:5" pos:end="72:49"><name pos:start="72:5" pos:end="72:23"><name pos:start="72:5" pos:end="72:8">vdev</name><operator pos:start="72:9" pos:end="72:10">-&gt;</operator><name pos:start="72:11" pos:end="72:23">device_endian</name></name> <operator pos:start="72:25" pos:end="72:25">=</operator> <call pos:start="72:27" pos:end="72:49"><name pos:start="72:27" pos:end="72:47">virtio_default_endian</name><argument_list pos:start="72:48" pos:end="72:49">()</argument_list></call></expr>;</expr_stmt>

    <expr_stmt pos:start="74:5" pos:end="74:41"><expr pos:start="74:5" pos:end="74:40"><name pos:start="74:5" pos:end="74:33"><name pos:start="74:5" pos:end="74:8">vdev</name><operator pos:start="74:9" pos:end="74:10">-&gt;</operator><name pos:start="74:11" pos:end="74:33">use_guest_notifier_mask</name></name> <operator pos:start="74:35" pos:end="74:35">=</operator> <name pos:start="74:37" pos:end="74:40">true</name></expr>;</expr_stmt>

</block_content>}</block></function></unit>
