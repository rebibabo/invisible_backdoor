<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<unit xmlns="http://www.srcML.org/srcML/src" xmlns:pos="http://www.srcML.org/srcML/position" revision="1.0.0" language="C" filename="dataset/ropgen/aug/1/19634.c" pos:tabs="8"><function pos:start="1:1" pos:end="66:62"><type pos:start="1:1" pos:end="1:10"><specifier pos:start="1:1" pos:end="1:6">static</specifier> <name pos:start="1:8" pos:end="1:10">int</name></type> <name pos:start="1:12" pos:end="1:41">webm_dash_manifest_read_header</name><parameter_list pos:start="1:42" pos:end="1:61">(<parameter pos:start="1:43" pos:end="1:60"><decl pos:start="1:43" pos:end="1:60"><type pos:start="1:43" pos:end="1:59"><name pos:start="1:43" pos:end="1:57">AVFormatContext</name> <modifier pos:start="1:59" pos:end="1:59">*</modifier></type><name pos:start="1:60" pos:end="1:60">s</name></decl></parameter>)</parameter_list>

<block pos:start="3:1" pos:end="66:62">{<block_content pos:start="5:5" pos:end="66:62">

    <decl_stmt pos:start="5:5" pos:end="5:14"><decl pos:start="5:5" pos:end="5:13"><type pos:start="5:5" pos:end="5:10"><name pos:start="5:5" pos:end="5:8">char</name> <modifier pos:start="5:10" pos:end="5:10">*</modifier></type><name pos:start="5:11" pos:end="5:13">buf</name></decl>;</decl_stmt>

    <decl_stmt pos:start="7:5" pos:end="7:38"><decl pos:start="7:5" pos:end="7:37"><type pos:start="7:5" pos:end="7:7"><name pos:start="7:5" pos:end="7:7">int</name></type> <name pos:start="7:9" pos:end="7:11">ret</name> <init pos:start="7:13" pos:end="7:37">= <expr pos:start="7:15" pos:end="7:37"><call pos:start="7:15" pos:end="7:37"><name pos:start="7:15" pos:end="7:34">matroska_read_header</name><argument_list pos:start="7:35" pos:end="7:37">(<argument pos:start="7:36" pos:end="7:36"><expr pos:start="7:36" pos:end="7:36"><name pos:start="7:36" pos:end="7:36">s</name></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>

    <decl_stmt pos:start="9:5" pos:end="9:26"><decl pos:start="9:5" pos:end="9:25"><type pos:start="9:5" pos:end="9:19"><name pos:start="9:5" pos:end="9:17">MatroskaTrack</name> <modifier pos:start="9:19" pos:end="9:19">*</modifier></type><name pos:start="9:20" pos:end="9:25">tracks</name></decl>;</decl_stmt>

    <decl_stmt pos:start="11:5" pos:end="11:50"><decl pos:start="11:5" pos:end="11:49"><type pos:start="11:5" pos:end="11:26"><name pos:start="11:5" pos:end="11:24">MatroskaDemuxContext</name> <modifier pos:start="11:26" pos:end="11:26">*</modifier></type><name pos:start="11:27" pos:end="11:34">matroska</name> <init pos:start="11:36" pos:end="11:49">= <expr pos:start="11:38" pos:end="11:49"><name pos:start="11:38" pos:end="11:49"><name pos:start="11:38" pos:end="11:38">s</name><operator pos:start="11:39" pos:end="11:40">-&gt;</operator><name pos:start="11:41" pos:end="11:49">priv_data</name></name></expr></init></decl>;</decl_stmt>

    <if_stmt pos:start="13:5" pos:end="66:62"><if pos:start="13:5" pos:end="66:62">if <condition pos:start="13:8" pos:end="13:12">(<expr pos:start="13:9" pos:end="13:11"><name pos:start="13:9" pos:end="13:11">ret</name></expr>)</condition> <block pos:start="13:14" pos:end="66:62">{<block_content pos:start="15:9" pos:end="66:62">

        <expr_stmt pos:start="15:9" pos:end="15:65"><expr pos:start="15:9" pos:end="15:64"><call pos:start="15:9" pos:end="15:64"><name pos:start="15:9" pos:end="15:14">av_log</name><argument_list pos:start="15:15" pos:end="15:64">(<argument pos:start="15:16" pos:end="15:16"><expr pos:start="15:16" pos:end="15:16"><name pos:start="15:16" pos:end="15:16">s</name></expr></argument>, <argument pos:start="15:19" pos:end="15:30"><expr pos:start="15:19" pos:end="15:30"><name pos:start="15:19" pos:end="15:30">AV_LOG_ERROR</name></expr></argument>, <argument pos:start="15:33" pos:end="15:63"><expr pos:start="15:33" pos:end="15:63"><literal type="string" pos:start="15:33" pos:end="15:63">"Failed to read file headers\n"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <return pos:start="17:9" pos:end="17:18">return <expr pos:start="17:16" pos:end="17:17"><operator pos:start="17:16" pos:end="17:16">-</operator><literal type="number" pos:start="17:17" pos:end="17:17">1</literal></expr>;</return>









    <if_stmt pos:start="27:5" pos:end="66:62"><if pos:start="27:5" pos:end="66:62">if <condition pos:start="27:8" pos:end="27:27">(<expr pos:start="27:9" pos:end="27:26"><operator pos:start="27:9" pos:end="27:9">!</operator><name pos:start="27:10" pos:end="27:26"><name pos:start="27:10" pos:end="27:17">matroska</name><operator pos:start="27:18" pos:end="27:19">-&gt;</operator><name pos:start="27:20" pos:end="27:26">is_live</name></name></expr>)</condition> <block pos:start="27:29" pos:end="66:62">{<block_content pos:start="29:9" pos:end="66:62">

        <expr_stmt pos:start="29:9" pos:end="29:52"><expr pos:start="29:9" pos:end="29:51"><name pos:start="29:9" pos:end="29:11">buf</name> <operator pos:start="29:13" pos:end="29:13">=</operator> <call pos:start="29:15" pos:end="29:51"><name pos:start="29:15" pos:end="29:25">av_asprintf</name><argument_list pos:start="29:26" pos:end="29:51">(<argument pos:start="29:27" pos:end="29:30"><expr pos:start="29:27" pos:end="29:30"><literal type="string" pos:start="29:27" pos:end="29:30">"%g"</literal></expr></argument>, <argument pos:start="29:33" pos:end="29:50"><expr pos:start="29:33" pos:end="29:50"><name pos:start="29:33" pos:end="29:50"><name pos:start="29:33" pos:end="29:40">matroska</name><operator pos:start="29:41" pos:end="29:42">-&gt;</operator><name pos:start="29:43" pos:end="29:50">duration</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <if_stmt pos:start="31:9" pos:end="31:41"><if pos:start="31:9" pos:end="31:41">if <condition pos:start="31:12" pos:end="31:17">(<expr pos:start="31:13" pos:end="31:16"><operator pos:start="31:13" pos:end="31:13">!</operator><name pos:start="31:14" pos:end="31:16">buf</name></expr>)</condition><block type="pseudo" pos:start="31:19" pos:end="31:41"><block_content pos:start="31:19" pos:end="31:41"> <return pos:start="31:19" pos:end="31:41">return <expr pos:start="31:26" pos:end="31:40"><call pos:start="31:26" pos:end="31:40"><name pos:start="31:26" pos:end="31:32">AVERROR</name><argument_list pos:start="31:33" pos:end="31:40">(<argument pos:start="31:34" pos:end="31:39"><expr pos:start="31:34" pos:end="31:39"><name pos:start="31:34" pos:end="31:39">ENOMEM</name></expr></argument>)</argument_list></call></expr>;</return></block_content></block></if></if_stmt>

        <expr_stmt pos:start="33:9" pos:end="33:64"><expr pos:start="33:9" pos:end="33:63"><call pos:start="33:9" pos:end="33:63"><name pos:start="33:9" pos:end="33:19">av_dict_set</name><argument_list pos:start="33:20" pos:end="33:63">(<argument pos:start="33:21" pos:end="33:44"><expr pos:start="33:21" pos:end="33:44"><operator pos:start="33:21" pos:end="33:21">&amp;</operator><name pos:start="33:22" pos:end="33:34"><name pos:start="33:22" pos:end="33:22">s</name><operator pos:start="33:23" pos:end="33:24">-&gt;</operator><name pos:start="33:25" pos:end="33:31">streams</name><index pos:start="33:32" pos:end="33:34">[<expr pos:start="33:33" pos:end="33:33"><literal type="number" pos:start="33:33" pos:end="33:33">0</literal></expr>]</index></name><operator pos:start="33:35" pos:end="33:36">-&gt;</operator><name pos:start="33:37" pos:end="33:44">metadata</name></expr></argument>, <argument pos:start="33:47" pos:end="33:54"><expr pos:start="33:47" pos:end="33:54"><name pos:start="33:47" pos:end="33:54">DURATION</name></expr></argument>, <argument pos:start="33:57" pos:end="33:59"><expr pos:start="33:57" pos:end="33:59"><name pos:start="33:57" pos:end="33:59">buf</name></expr></argument>, <argument pos:start="33:62" pos:end="33:62"><expr pos:start="33:62" pos:end="33:62"><literal type="number" pos:start="33:62" pos:end="33:62">0</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <expr_stmt pos:start="35:9" pos:end="35:21"><expr pos:start="35:9" pos:end="35:20"><call pos:start="35:9" pos:end="35:20"><name pos:start="35:9" pos:end="35:15">av_free</name><argument_list pos:start="35:16" pos:end="35:20">(<argument pos:start="35:17" pos:end="35:19"><expr pos:start="35:17" pos:end="35:19"><name pos:start="35:17" pos:end="35:19">buf</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>



        <comment type="line" pos:start="39:9" pos:end="39:31">// initialization range</comment>

        <comment type="line" pos:start="41:9" pos:end="41:41">// 5 is the offset of Cluster ID.</comment>

        <expr_stmt pos:start="43:9" pos:end="43:97"><expr pos:start="43:9" pos:end="43:96"><call pos:start="43:9" pos:end="43:96"><name pos:start="43:9" pos:end="43:23">av_dict_set_int</name><argument_list pos:start="43:24" pos:end="43:96">(<argument pos:start="43:25" pos:end="43:48"><expr pos:start="43:25" pos:end="43:48"><operator pos:start="43:25" pos:end="43:25">&amp;</operator><name pos:start="43:26" pos:end="43:38"><name pos:start="43:26" pos:end="43:26">s</name><operator pos:start="43:27" pos:end="43:28">-&gt;</operator><name pos:start="43:29" pos:end="43:35">streams</name><index pos:start="43:36" pos:end="43:38">[<expr pos:start="43:37" pos:end="43:37"><literal type="number" pos:start="43:37" pos:end="43:37">0</literal></expr>]</index></name><operator pos:start="43:39" pos:end="43:40">-&gt;</operator><name pos:start="43:41" pos:end="43:48">metadata</name></expr></argument>, <argument pos:start="43:51" pos:end="43:70"><expr pos:start="43:51" pos:end="43:70"><name pos:start="43:51" pos:end="43:70">INITIALIZATION_RANGE</name></expr></argument>, <argument pos:start="43:73" pos:end="43:92"><expr pos:start="43:73" pos:end="43:92"><call pos:start="43:73" pos:end="43:88"><name pos:start="43:73" pos:end="43:81">avio_tell</name><argument_list pos:start="43:82" pos:end="43:88">(<argument pos:start="43:83" pos:end="43:87"><expr pos:start="43:83" pos:end="43:87"><name pos:start="43:83" pos:end="43:87"><name pos:start="43:83" pos:end="43:83">s</name><operator pos:start="43:84" pos:end="43:85">-&gt;</operator><name pos:start="43:86" pos:end="43:87">pb</name></name></expr></argument>)</argument_list></call> <operator pos:start="43:90" pos:end="43:90">-</operator> <literal type="number" pos:start="43:92" pos:end="43:92">5</literal></expr></argument>, <argument pos:start="43:95" pos:end="43:95"><expr pos:start="43:95" pos:end="43:95"><literal type="number" pos:start="43:95" pos:end="43:95">0</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>




    <comment type="line" pos:start="48:5" pos:end="48:27">// basename of the file</comment>

    <expr_stmt pos:start="50:5" pos:end="50:36"><expr pos:start="50:5" pos:end="50:35"><name pos:start="50:5" pos:end="50:7">buf</name> <operator pos:start="50:9" pos:end="50:9">=</operator> <call pos:start="50:11" pos:end="50:35"><name pos:start="50:11" pos:end="50:17">strrchr</name><argument_list pos:start="50:18" pos:end="50:35">(<argument pos:start="50:19" pos:end="50:29"><expr pos:start="50:19" pos:end="50:29"><name pos:start="50:19" pos:end="50:29"><name pos:start="50:19" pos:end="50:19">s</name><operator pos:start="50:20" pos:end="50:21">-&gt;</operator><name pos:start="50:22" pos:end="50:29">filename</name></name></expr></argument>, <argument pos:start="50:32" pos:end="50:34"><expr pos:start="50:32" pos:end="50:34"><literal type="char" pos:start="50:32" pos:end="50:34">'/'</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    <expr_stmt pos:start="52:5" pos:end="52:82"><expr pos:start="52:5" pos:end="52:81"><call pos:start="52:5" pos:end="52:81"><name pos:start="52:5" pos:end="52:15">av_dict_set</name><argument_list pos:start="52:16" pos:end="52:81">(<argument pos:start="52:17" pos:end="52:40"><expr pos:start="52:17" pos:end="52:40"><operator pos:start="52:17" pos:end="52:17">&amp;</operator><name pos:start="52:18" pos:end="52:30"><name pos:start="52:18" pos:end="52:18">s</name><operator pos:start="52:19" pos:end="52:20">-&gt;</operator><name pos:start="52:21" pos:end="52:27">streams</name><index pos:start="52:28" pos:end="52:30">[<expr pos:start="52:29" pos:end="52:29"><literal type="number" pos:start="52:29" pos:end="52:29">0</literal></expr>]</index></name><operator pos:start="52:31" pos:end="52:32">-&gt;</operator><name pos:start="52:33" pos:end="52:40">metadata</name></expr></argument>, <argument pos:start="52:43" pos:end="52:50"><expr pos:start="52:43" pos:end="52:50"><name pos:start="52:43" pos:end="52:50">FILENAME</name></expr></argument>, <argument pos:start="52:53" pos:end="52:77"><expr pos:start="52:53" pos:end="52:77"><ternary pos:start="52:53" pos:end="52:77"><condition pos:start="52:53" pos:end="52:57"><expr pos:start="52:53" pos:end="52:55"><name pos:start="52:53" pos:end="52:55">buf</name></expr> ?</condition><then pos:start="52:59" pos:end="52:63"> <expr pos:start="52:59" pos:end="52:63"><operator pos:start="52:59" pos:end="52:60">++</operator><name pos:start="52:61" pos:end="52:63">buf</name></expr> </then><else pos:start="52:65" pos:end="52:77">: <expr pos:start="52:67" pos:end="52:77"><name pos:start="52:67" pos:end="52:77"><name pos:start="52:67" pos:end="52:67">s</name><operator pos:start="52:68" pos:end="52:69">-&gt;</operator><name pos:start="52:70" pos:end="52:77">filename</name></name></expr></else></ternary></expr></argument>, <argument pos:start="52:80" pos:end="52:80"><expr pos:start="52:80" pos:end="52:80"><literal type="number" pos:start="52:80" pos:end="52:80">0</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>



    <comment type="line" pos:start="56:5" pos:end="56:19">// track number</comment>

    <expr_stmt pos:start="58:5" pos:end="58:35"><expr pos:start="58:5" pos:end="58:34"><name pos:start="58:5" pos:end="58:10">tracks</name> <operator pos:start="58:12" pos:end="58:12">=</operator> <name pos:start="58:14" pos:end="58:34"><name pos:start="58:14" pos:end="58:21">matroska</name><operator pos:start="58:22" pos:end="58:23">-&gt;</operator><name pos:start="58:24" pos:end="58:29">tracks</name><operator pos:start="58:30" pos:end="58:30">.</operator><name pos:start="58:31" pos:end="58:34">elem</name></name></expr>;</expr_stmt>

    <expr_stmt pos:start="60:5" pos:end="60:78"><expr pos:start="60:5" pos:end="60:77"><call pos:start="60:5" pos:end="60:77"><name pos:start="60:5" pos:end="60:19">av_dict_set_int</name><argument_list pos:start="60:20" pos:end="60:77">(<argument pos:start="60:21" pos:end="60:44"><expr pos:start="60:21" pos:end="60:44"><operator pos:start="60:21" pos:end="60:21">&amp;</operator><name pos:start="60:22" pos:end="60:34"><name pos:start="60:22" pos:end="60:22">s</name><operator pos:start="60:23" pos:end="60:24">-&gt;</operator><name pos:start="60:25" pos:end="60:31">streams</name><index pos:start="60:32" pos:end="60:34">[<expr pos:start="60:33" pos:end="60:33"><literal type="number" pos:start="60:33" pos:end="60:33">0</literal></expr>]</index></name><operator pos:start="60:35" pos:end="60:36">-&gt;</operator><name pos:start="60:37" pos:end="60:44">metadata</name></expr></argument>, <argument pos:start="60:47" pos:end="60:58"><expr pos:start="60:47" pos:end="60:58"><name pos:start="60:47" pos:end="60:58">TRACK_NUMBER</name></expr></argument>, <argument pos:start="60:61" pos:end="60:73"><expr pos:start="60:61" pos:end="60:73"><name pos:start="60:61" pos:end="60:69"><name pos:start="60:61" pos:end="60:66">tracks</name><index pos:start="60:67" pos:end="60:69">[<expr pos:start="60:68" pos:end="60:68"><literal type="number" pos:start="60:68" pos:end="60:68">0</literal></expr>]</index></name><operator pos:start="60:70" pos:end="60:70">.</operator><name pos:start="60:71" pos:end="60:73">num</name></expr></argument>, <argument pos:start="60:76" pos:end="60:76"><expr pos:start="60:76" pos:end="60:76"><literal type="number" pos:start="60:76" pos:end="60:76">0</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>



    <comment type="line" pos:start="64:5" pos:end="64:53">// parse the cues and populate Cue related fields</comment>

    <return pos:start="66:5" pos:end="66:62">return <expr pos:start="66:12" pos:end="66:61"><ternary pos:start="66:12" pos:end="66:61"><condition pos:start="66:12" pos:end="66:30"><expr pos:start="66:12" pos:end="66:28"><name pos:start="66:12" pos:end="66:28"><name pos:start="66:12" pos:end="66:19">matroska</name><operator pos:start="66:20" pos:end="66:21">-&gt;</operator><name pos:start="66:22" pos:end="66:28">is_live</name></name></expr> ?</condition><then pos:start="66:32" pos:end="66:32"> <expr pos:start="66:32" pos:end="66:32"><literal type="number" pos:start="66:32" pos:end="66:32">0</literal></expr> </then><else pos:start="66:34" pos:end="66:61">: <expr pos:start="66:36" pos:end="66:61"><call pos:start="66:36" pos:end="66:61"><name pos:start="66:36" pos:end="66:58">webm_dash_manifest_cues</name><argument_list pos:start="66:59" pos:end="66:61">(<argument pos:start="66:60" pos:end="66:60"><expr pos:start="66:60" pos:end="66:60"><name pos:start="66:60" pos:end="66:60">s</name></expr></argument>)</argument_list></call></expr></else></ternary></expr>;</return></block_content></block></if></if_stmt></block_content></block></if></if_stmt></block_content></block></function>
</unit>
