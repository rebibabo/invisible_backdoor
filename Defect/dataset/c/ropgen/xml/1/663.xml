<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<unit xmlns="http://www.srcML.org/srcML/src" xmlns:pos="http://www.srcML.org/srcML/position" revision="1.0.0" language="C" filename="dataset/ropgen/aug/1/663.c" pos:tabs="8"><function pos:start="1:1" pos:end="153:1"><type pos:start="1:1" pos:end="1:10"><specifier pos:start="1:1" pos:end="1:6">static</specifier> <name pos:start="1:8" pos:end="1:10">int</name></type> <name pos:start="1:12" pos:end="1:29">encode_audio_frame</name><parameter_list pos:start="1:30" pos:end="3:63">(<parameter pos:start="1:31" pos:end="1:48"><decl pos:start="1:31" pos:end="1:48"><type pos:start="1:31" pos:end="1:48"><name pos:start="1:31" pos:end="1:45">AVFormatContext</name> <modifier pos:start="1:47" pos:end="1:47">*</modifier></type><name pos:start="1:48" pos:end="1:48">s</name></decl></parameter>, <parameter pos:start="1:51" pos:end="1:67"><decl pos:start="1:51" pos:end="1:67"><type pos:start="1:51" pos:end="1:67"><name pos:start="1:51" pos:end="1:62">OutputStream</name> <modifier pos:start="1:64" pos:end="1:64">*</modifier></type><name pos:start="1:65" pos:end="1:67">ost</name></decl></parameter>,

                              <parameter pos:start="3:31" pos:end="3:48"><decl pos:start="3:31" pos:end="3:48"><type pos:start="3:31" pos:end="3:48"><specifier pos:start="3:31" pos:end="3:35">const</specifier> <name pos:start="3:37" pos:end="3:43">uint8_t</name> <modifier pos:start="3:45" pos:end="3:45">*</modifier></type><name pos:start="3:46" pos:end="3:48">buf</name></decl></parameter>, <parameter pos:start="3:51" pos:end="3:62"><decl pos:start="3:51" pos:end="3:62"><type pos:start="3:51" pos:end="3:62"><name pos:start="3:51" pos:end="3:53">int</name></type> <name pos:start="3:55" pos:end="3:62">buf_size</name></decl></parameter>)</parameter_list>

<block pos:start="5:1" pos:end="153:1">{<block_content pos:start="7:5" pos:end="151:15">

    <decl_stmt pos:start="7:5" pos:end="7:41"><decl pos:start="7:5" pos:end="7:40"><type pos:start="7:5" pos:end="7:20"><name pos:start="7:5" pos:end="7:18">AVCodecContext</name> <modifier pos:start="7:20" pos:end="7:20">*</modifier></type><name pos:start="7:21" pos:end="7:23">enc</name> <init pos:start="7:25" pos:end="7:40">= <expr pos:start="7:27" pos:end="7:40"><name pos:start="7:27" pos:end="7:40"><name pos:start="7:27" pos:end="7:29">ost</name><operator pos:start="7:30" pos:end="7:31">-&gt;</operator><name pos:start="7:32" pos:end="7:33">st</name><operator pos:start="7:34" pos:end="7:35">-&gt;</operator><name pos:start="7:36" pos:end="7:40">codec</name></name></expr></init></decl>;</decl_stmt>

    <decl_stmt pos:start="9:5" pos:end="9:26"><decl pos:start="9:5" pos:end="9:25"><type pos:start="9:5" pos:end="9:13"><name pos:start="9:5" pos:end="9:11">AVFrame</name> <modifier pos:start="9:13" pos:end="9:13">*</modifier></type><name pos:start="9:14" pos:end="9:18">frame</name> <init pos:start="9:20" pos:end="9:25">= <expr pos:start="9:22" pos:end="9:25"><name pos:start="9:22" pos:end="9:25">NULL</name></expr></init></decl>;</decl_stmt>

    <decl_stmt pos:start="11:5" pos:end="11:17"><decl pos:start="11:5" pos:end="11:16"><type pos:start="11:5" pos:end="11:12"><name pos:start="11:5" pos:end="11:12">AVPacket</name></type> <name pos:start="11:14" pos:end="11:16">pkt</name></decl>;</decl_stmt>

    <decl_stmt pos:start="13:5" pos:end="13:24"><decl pos:start="13:5" pos:end="13:11"><type pos:start="13:5" pos:end="13:7"><name pos:start="13:5" pos:end="13:7">int</name></type> <name pos:start="13:9" pos:end="13:11">ret</name></decl>, <decl pos:start="13:14" pos:end="13:23"><type ref="prev" pos:start="13:5" pos:end="13:7"/><name pos:start="13:14" pos:end="13:23">got_packet</name></decl>;</decl_stmt>



    <expr_stmt pos:start="17:5" pos:end="17:25"><expr pos:start="17:5" pos:end="17:24"><call pos:start="17:5" pos:end="17:24"><name pos:start="17:5" pos:end="17:18">av_init_packet</name><argument_list pos:start="17:19" pos:end="17:24">(<argument pos:start="17:20" pos:end="17:23"><expr pos:start="17:20" pos:end="17:23"><operator pos:start="17:20" pos:end="17:20">&amp;</operator><name pos:start="17:21" pos:end="17:23">pkt</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    <expr_stmt pos:start="19:5" pos:end="19:20"><expr pos:start="19:5" pos:end="19:19"><name pos:start="19:5" pos:end="19:12"><name pos:start="19:5" pos:end="19:7">pkt</name><operator pos:start="19:8" pos:end="19:8">.</operator><name pos:start="19:9" pos:end="19:12">data</name></name> <operator pos:start="19:14" pos:end="19:14">=</operator> <name pos:start="19:16" pos:end="19:19">NULL</name></expr>;</expr_stmt>

    <expr_stmt pos:start="21:5" pos:end="21:17"><expr pos:start="21:5" pos:end="21:16"><name pos:start="21:5" pos:end="21:12"><name pos:start="21:5" pos:end="21:7">pkt</name><operator pos:start="21:8" pos:end="21:8">.</operator><name pos:start="21:9" pos:end="21:12">size</name></name> <operator pos:start="21:14" pos:end="21:14">=</operator> <literal type="number" pos:start="21:16" pos:end="21:16">0</literal></expr>;</expr_stmt>



    <if_stmt pos:start="25:5" pos:end="71:5"><if pos:start="25:5" pos:end="71:5">if <condition pos:start="25:8" pos:end="25:24">(<expr pos:start="25:9" pos:end="25:23"><name pos:start="25:9" pos:end="25:11">buf</name> <operator pos:start="25:13" pos:end="25:14">&amp;&amp;</operator> <name pos:start="25:16" pos:end="25:23">buf_size</name></expr>)</condition> <block pos:start="25:26" pos:end="71:5">{<block_content pos:start="27:9" pos:end="69:44">

        <if_stmt pos:start="27:9" pos:end="39:9"><if pos:start="27:9" pos:end="39:9">if <condition pos:start="27:12" pos:end="27:31">(<expr pos:start="27:13" pos:end="27:30"><operator pos:start="27:13" pos:end="27:13">!</operator><name pos:start="27:14" pos:end="27:30"><name pos:start="27:14" pos:end="27:16">ost</name><operator pos:start="27:17" pos:end="27:18">-&gt;</operator><name pos:start="27:19" pos:end="27:30">output_frame</name></name></expr>)</condition> <block pos:start="27:33" pos:end="39:9">{<block_content pos:start="29:13" pos:end="37:13">

            <expr_stmt pos:start="29:13" pos:end="29:54"><expr pos:start="29:13" pos:end="29:53"><name pos:start="29:13" pos:end="29:29"><name pos:start="29:13" pos:end="29:15">ost</name><operator pos:start="29:16" pos:end="29:17">-&gt;</operator><name pos:start="29:18" pos:end="29:29">output_frame</name></name> <operator pos:start="29:31" pos:end="29:31">=</operator> <call pos:start="29:33" pos:end="29:53"><name pos:start="29:33" pos:end="29:51">avcodec_alloc_frame</name><argument_list pos:start="29:52" pos:end="29:53">()</argument_list></call></expr>;</expr_stmt>

            <if_stmt pos:start="31:13" pos:end="37:13"><if pos:start="31:13" pos:end="37:13">if <condition pos:start="31:16" pos:end="31:35">(<expr pos:start="31:17" pos:end="31:34"><operator pos:start="31:17" pos:end="31:17">!</operator><name pos:start="31:18" pos:end="31:34"><name pos:start="31:18" pos:end="31:20">ost</name><operator pos:start="31:21" pos:end="31:22">-&gt;</operator><name pos:start="31:23" pos:end="31:34">output_frame</name></name></expr>)</condition> <block pos:start="31:37" pos:end="37:13">{<block_content pos:start="33:17" pos:end="35:32">

                <expr_stmt pos:start="33:17" pos:end="33:86"><expr pos:start="33:17" pos:end="33:85"><call pos:start="33:17" pos:end="33:85"><name pos:start="33:17" pos:end="33:22">av_log</name><argument_list pos:start="33:23" pos:end="33:85">(<argument pos:start="33:24" pos:end="33:27"><expr pos:start="33:24" pos:end="33:27"><name pos:start="33:24" pos:end="33:27">NULL</name></expr></argument>, <argument pos:start="33:30" pos:end="33:41"><expr pos:start="33:30" pos:end="33:41"><name pos:start="33:30" pos:end="33:41">AV_LOG_FATAL</name></expr></argument>, <argument pos:start="33:44" pos:end="33:84"><expr pos:start="33:44" pos:end="33:84"><literal type="string" pos:start="33:44" pos:end="33:84">"out-of-memory in encode_audio_frame()\n"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

                <expr_stmt pos:start="35:17" pos:end="35:32"><expr pos:start="35:17" pos:end="35:31"><call pos:start="35:17" pos:end="35:31"><name pos:start="35:17" pos:end="35:28">exit_program</name><argument_list pos:start="35:29" pos:end="35:31">(<argument pos:start="35:30" pos:end="35:30"><expr pos:start="35:30" pos:end="35:30"><literal type="number" pos:start="35:30" pos:end="35:30">1</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

            </block_content>}</block></if></if_stmt>

        </block_content>}</block></if></if_stmt>

        <expr_stmt pos:start="41:9" pos:end="41:34"><expr pos:start="41:9" pos:end="41:33"><name pos:start="41:9" pos:end="41:13">frame</name> <operator pos:start="41:15" pos:end="41:15">=</operator> <name pos:start="41:17" pos:end="41:33"><name pos:start="41:17" pos:end="41:19">ost</name><operator pos:start="41:20" pos:end="41:21">-&gt;</operator><name pos:start="41:22" pos:end="41:33">output_frame</name></name></expr>;</expr_stmt>

        <if_stmt pos:start="43:9" pos:end="45:44"><if pos:start="43:9" pos:end="45:44">if <condition pos:start="43:12" pos:end="43:48">(<expr pos:start="43:13" pos:end="43:47"><name pos:start="43:13" pos:end="43:32"><name pos:start="43:13" pos:end="43:17">frame</name><operator pos:start="43:18" pos:end="43:19">-&gt;</operator><name pos:start="43:20" pos:end="43:32">extended_data</name></name> <operator pos:start="43:34" pos:end="43:35">!=</operator> <name pos:start="43:37" pos:end="43:47"><name pos:start="43:37" pos:end="43:41">frame</name><operator pos:start="43:42" pos:end="43:43">-&gt;</operator><name pos:start="43:44" pos:end="43:47">data</name></name></expr>)</condition><block type="pseudo" pos:start="45:13" pos:end="45:44"><block_content pos:start="45:13" pos:end="45:44">

            <expr_stmt pos:start="45:13" pos:end="45:44"><expr pos:start="45:13" pos:end="45:43"><call pos:start="45:13" pos:end="45:43"><name pos:start="45:13" pos:end="45:20">av_freep</name><argument_list pos:start="45:21" pos:end="45:43">(<argument pos:start="45:22" pos:end="45:42"><expr pos:start="45:22" pos:end="45:42"><operator pos:start="45:22" pos:end="45:22">&amp;</operator><name pos:start="45:23" pos:end="45:42"><name pos:start="45:23" pos:end="45:27">frame</name><operator pos:start="45:28" pos:end="45:29">-&gt;</operator><name pos:start="45:30" pos:end="45:42">extended_data</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt></block_content></block></if></if_stmt>

        <expr_stmt pos:start="47:9" pos:end="47:42"><expr pos:start="47:9" pos:end="47:41"><call pos:start="47:9" pos:end="47:41"><name pos:start="47:9" pos:end="47:34">avcodec_get_frame_defaults</name><argument_list pos:start="47:35" pos:end="47:41">(<argument pos:start="47:36" pos:end="47:40"><expr pos:start="47:36" pos:end="47:40"><name pos:start="47:36" pos:end="47:40">frame</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>



        <expr_stmt pos:start="51:9" pos:end="53:88"><expr pos:start="51:9" pos:end="53:87"><name pos:start="51:9" pos:end="51:25"><name pos:start="51:9" pos:end="51:13">frame</name><operator pos:start="51:14" pos:end="51:15">-&gt;</operator><name pos:start="51:16" pos:end="51:25">nb_samples</name></name>  <operator pos:start="51:28" pos:end="51:28">=</operator> <name pos:start="51:30" pos:end="51:37">buf_size</name> <operator pos:start="51:39" pos:end="51:39">/</operator>

                             <operator pos:start="53:30" pos:end="53:30">(</operator><name pos:start="53:31" pos:end="53:43"><name pos:start="53:31" pos:end="53:33">enc</name><operator pos:start="53:34" pos:end="53:35">-&gt;</operator><name pos:start="53:36" pos:end="53:43">channels</name></name> <operator pos:start="53:45" pos:end="53:45">*</operator> <call pos:start="53:47" pos:end="53:86"><name pos:start="53:47" pos:end="53:69">av_get_bytes_per_sample</name><argument_list pos:start="53:70" pos:end="53:86">(<argument pos:start="53:71" pos:end="53:85"><expr pos:start="53:71" pos:end="53:85"><name pos:start="53:71" pos:end="53:85"><name pos:start="53:71" pos:end="53:73">enc</name><operator pos:start="53:74" pos:end="53:75">-&gt;</operator><name pos:start="53:76" pos:end="53:85">sample_fmt</name></name></expr></argument>)</argument_list></call><operator pos:start="53:87" pos:end="53:87">)</operator></expr>;</expr_stmt>

        <if_stmt pos:start="55:9" pos:end="63:9"><if pos:start="55:9" pos:end="63:9">if <condition pos:start="55:12" pos:end="57:67">(<expr pos:start="55:13" pos:end="57:66"><operator pos:start="55:13" pos:end="55:13">(</operator><name pos:start="55:14" pos:end="55:16">ret</name> <operator pos:start="55:18" pos:end="55:18">=</operator> <call pos:start="55:20" pos:end="57:61"><name pos:start="55:20" pos:end="55:43">avcodec_fill_audio_frame</name><argument_list pos:start="55:44" pos:end="57:61">(<argument pos:start="55:45" pos:end="55:49"><expr pos:start="55:45" pos:end="55:49"><name pos:start="55:45" pos:end="55:49">frame</name></expr></argument>, <argument pos:start="55:52" pos:end="55:64"><expr pos:start="55:52" pos:end="55:64"><name pos:start="55:52" pos:end="55:64"><name pos:start="55:52" pos:end="55:54">enc</name><operator pos:start="55:55" pos:end="55:56">-&gt;</operator><name pos:start="55:57" pos:end="55:64">channels</name></name></expr></argument>, <argument pos:start="55:67" pos:end="55:81"><expr pos:start="55:67" pos:end="55:81"><name pos:start="55:67" pos:end="55:81"><name pos:start="55:67" pos:end="55:69">enc</name><operator pos:start="55:70" pos:end="55:71">-&gt;</operator><name pos:start="55:72" pos:end="55:81">sample_fmt</name></name></expr></argument>,

                                            <argument pos:start="57:45" pos:end="57:47"><expr pos:start="57:45" pos:end="57:47"><name pos:start="57:45" pos:end="57:47">buf</name></expr></argument>, <argument pos:start="57:50" pos:end="57:57"><expr pos:start="57:50" pos:end="57:57"><name pos:start="57:50" pos:end="57:57">buf_size</name></expr></argument>, <argument pos:start="57:60" pos:end="57:60"><expr pos:start="57:60" pos:end="57:60"><literal type="number" pos:start="57:60" pos:end="57:60">1</literal></expr></argument>)</argument_list></call><operator pos:start="57:62" pos:end="57:62">)</operator> <operator pos:start="57:64" pos:end="57:64">&lt;</operator> <literal type="number" pos:start="57:66" pos:end="57:66">0</literal></expr>)</condition> <block pos:start="57:69" pos:end="63:9">{<block_content pos:start="59:13" pos:end="61:28">

            <expr_stmt pos:start="59:13" pos:end="59:93"><expr pos:start="59:13" pos:end="59:92"><call pos:start="59:13" pos:end="59:92"><name pos:start="59:13" pos:end="59:18">av_log</name><argument_list pos:start="59:19" pos:end="59:92">(<argument pos:start="59:20" pos:end="59:23"><expr pos:start="59:20" pos:end="59:23"><name pos:start="59:20" pos:end="59:23">NULL</name></expr></argument>, <argument pos:start="59:26" pos:end="59:37"><expr pos:start="59:26" pos:end="59:37"><name pos:start="59:26" pos:end="59:37">AV_LOG_FATAL</name></expr></argument>, <argument pos:start="59:40" pos:end="59:91"><expr pos:start="59:40" pos:end="59:91"><literal type="string" pos:start="59:40" pos:end="59:91">"Audio encoding failed (avcodec_fill_audio_frame)\n"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

            <expr_stmt pos:start="61:13" pos:end="61:28"><expr pos:start="61:13" pos:end="61:27"><call pos:start="61:13" pos:end="61:27"><name pos:start="61:13" pos:end="61:24">exit_program</name><argument_list pos:start="61:25" pos:end="61:27">(<argument pos:start="61:26" pos:end="61:26"><expr pos:start="61:26" pos:end="61:26"><literal type="number" pos:start="61:26" pos:end="61:26">1</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        </block_content>}</block></if></if_stmt>



        <expr_stmt pos:start="67:9" pos:end="67:36"><expr pos:start="67:9" pos:end="67:35"><name pos:start="67:9" pos:end="67:18"><name pos:start="67:9" pos:end="67:13">frame</name><operator pos:start="67:14" pos:end="67:15">-&gt;</operator><name pos:start="67:16" pos:end="67:18">pts</name></name> <operator pos:start="67:20" pos:end="67:20">=</operator> <name pos:start="67:22" pos:end="67:35"><name pos:start="67:22" pos:end="67:24">ost</name><operator pos:start="67:25" pos:end="67:26">-&gt;</operator><name pos:start="67:27" pos:end="67:35">sync_opts</name></name></expr>;</expr_stmt>

        <expr_stmt pos:start="69:9" pos:end="69:44"><expr pos:start="69:9" pos:end="69:43"><name pos:start="69:9" pos:end="69:22"><name pos:start="69:9" pos:end="69:11">ost</name><operator pos:start="69:12" pos:end="69:13">-&gt;</operator><name pos:start="69:14" pos:end="69:22">sync_opts</name></name> <operator pos:start="69:24" pos:end="69:25">+=</operator> <name pos:start="69:27" pos:end="69:43"><name pos:start="69:27" pos:end="69:31">frame</name><operator pos:start="69:32" pos:end="69:33">-&gt;</operator><name pos:start="69:34" pos:end="69:43">nb_samples</name></name></expr>;</expr_stmt>

    </block_content>}</block></if></if_stmt>



    <expr_stmt pos:start="75:5" pos:end="75:19"><expr pos:start="75:5" pos:end="75:18"><name pos:start="75:5" pos:end="75:14">got_packet</name> <operator pos:start="75:16" pos:end="75:16">=</operator> <literal type="number" pos:start="75:18" pos:end="75:18">0</literal></expr>;</expr_stmt>

    <expr_stmt pos:start="77:5" pos:end="77:27"><expr pos:start="77:5" pos:end="77:26"><call pos:start="77:5" pos:end="77:26"><name pos:start="77:5" pos:end="77:20">update_benchmark</name><argument_list pos:start="77:21" pos:end="77:26">(<argument pos:start="77:22" pos:end="77:25"><expr pos:start="77:22" pos:end="77:25"><name pos:start="77:22" pos:end="77:25">NULL</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    <if_stmt pos:start="79:5" pos:end="85:5"><if pos:start="79:5" pos:end="85:5">if <condition pos:start="79:8" pos:end="79:65">(<expr pos:start="79:9" pos:end="79:64"><call pos:start="79:9" pos:end="79:60"><name pos:start="79:9" pos:end="79:29">avcodec_encode_audio2</name><argument_list pos:start="79:30" pos:end="79:60">(<argument pos:start="79:31" pos:end="79:33"><expr pos:start="79:31" pos:end="79:33"><name pos:start="79:31" pos:end="79:33">enc</name></expr></argument>, <argument pos:start="79:36" pos:end="79:39"><expr pos:start="79:36" pos:end="79:39"><operator pos:start="79:36" pos:end="79:36">&amp;</operator><name pos:start="79:37" pos:end="79:39">pkt</name></expr></argument>, <argument pos:start="79:42" pos:end="79:46"><expr pos:start="79:42" pos:end="79:46"><name pos:start="79:42" pos:end="79:46">frame</name></expr></argument>, <argument pos:start="79:49" pos:end="79:59"><expr pos:start="79:49" pos:end="79:59"><operator pos:start="79:49" pos:end="79:49">&amp;</operator><name pos:start="79:50" pos:end="79:59">got_packet</name></expr></argument>)</argument_list></call> <operator pos:start="79:62" pos:end="79:62">&lt;</operator> <literal type="number" pos:start="79:64" pos:end="79:64">0</literal></expr>)</condition> <block pos:start="79:67" pos:end="85:5">{<block_content pos:start="81:9" pos:end="83:24">

        <expr_stmt pos:start="81:9" pos:end="81:86"><expr pos:start="81:9" pos:end="81:85"><call pos:start="81:9" pos:end="81:85"><name pos:start="81:9" pos:end="81:14">av_log</name><argument_list pos:start="81:15" pos:end="81:85">(<argument pos:start="81:16" pos:end="81:19"><expr pos:start="81:16" pos:end="81:19"><name pos:start="81:16" pos:end="81:19">NULL</name></expr></argument>, <argument pos:start="81:22" pos:end="81:33"><expr pos:start="81:22" pos:end="81:33"><name pos:start="81:22" pos:end="81:33">AV_LOG_FATAL</name></expr></argument>, <argument pos:start="81:36" pos:end="81:84"><expr pos:start="81:36" pos:end="81:84"><literal type="string" pos:start="81:36" pos:end="81:84">"Audio encoding failed (avcodec_encode_audio2)\n"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <expr_stmt pos:start="83:9" pos:end="83:24"><expr pos:start="83:9" pos:end="83:23"><call pos:start="83:9" pos:end="83:23"><name pos:start="83:9" pos:end="83:20">exit_program</name><argument_list pos:start="83:21" pos:end="83:23">(<argument pos:start="83:22" pos:end="83:22"><expr pos:start="83:22" pos:end="83:22"><literal type="number" pos:start="83:22" pos:end="83:22">1</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    </block_content>}</block></if></if_stmt>

    <expr_stmt pos:start="87:5" pos:end="87:72"><expr pos:start="87:5" pos:end="87:71"><call pos:start="87:5" pos:end="87:71"><name pos:start="87:5" pos:end="87:20">update_benchmark</name><argument_list pos:start="87:21" pos:end="87:71">(<argument pos:start="87:22" pos:end="87:41"><expr pos:start="87:22" pos:end="87:41"><literal type="string" pos:start="87:22" pos:end="87:41">"encode_audio %d.%d"</literal></expr></argument>, <argument pos:start="87:44" pos:end="87:58"><expr pos:start="87:44" pos:end="87:58"><name pos:start="87:44" pos:end="87:58"><name pos:start="87:44" pos:end="87:46">ost</name><operator pos:start="87:47" pos:end="87:48">-&gt;</operator><name pos:start="87:49" pos:end="87:58">file_index</name></name></expr></argument>, <argument pos:start="87:61" pos:end="87:70"><expr pos:start="87:61" pos:end="87:70"><name pos:start="87:61" pos:end="87:70"><name pos:start="87:61" pos:end="87:63">ost</name><operator pos:start="87:64" pos:end="87:65">-&gt;</operator><name pos:start="87:66" pos:end="87:70">index</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>



    <expr_stmt pos:start="91:5" pos:end="91:19"><expr pos:start="91:5" pos:end="91:18"><name pos:start="91:5" pos:end="91:7">ret</name> <operator pos:start="91:9" pos:end="91:9">=</operator> <name pos:start="91:11" pos:end="91:18"><name pos:start="91:11" pos:end="91:13">pkt</name><operator pos:start="91:14" pos:end="91:14">.</operator><name pos:start="91:15" pos:end="91:18">size</name></name></expr>;</expr_stmt>



    <if_stmt pos:start="95:5" pos:end="133:5"><if pos:start="95:5" pos:end="133:5">if <condition pos:start="95:8" pos:end="95:19">(<expr pos:start="95:9" pos:end="95:18"><name pos:start="95:9" pos:end="95:18">got_packet</name></expr>)</condition> <block pos:start="95:21" pos:end="133:5">{<block_content pos:start="97:9" pos:end="131:29">

        <if_stmt pos:start="97:9" pos:end="99:90"><if pos:start="97:9" pos:end="99:90">if <condition pos:start="97:12" pos:end="97:38">(<expr pos:start="97:13" pos:end="97:37"><name pos:start="97:13" pos:end="97:19"><name pos:start="97:13" pos:end="97:15">pkt</name><operator pos:start="97:16" pos:end="97:16">.</operator><name pos:start="97:17" pos:end="97:19">pts</name></name> <operator pos:start="97:21" pos:end="97:22">!=</operator> <name pos:start="97:24" pos:end="97:37">AV_NOPTS_VALUE</name></expr>)</condition><block type="pseudo" pos:start="99:13" pos:end="99:90"><block_content pos:start="99:13" pos:end="99:90">

            <expr_stmt pos:start="99:13" pos:end="99:90"><expr pos:start="99:13" pos:end="99:89"><name pos:start="99:13" pos:end="99:19"><name pos:start="99:13" pos:end="99:15">pkt</name><operator pos:start="99:16" pos:end="99:16">.</operator><name pos:start="99:17" pos:end="99:19">pts</name></name>      <operator pos:start="99:26" pos:end="99:26">=</operator> <call pos:start="99:28" pos:end="99:89"><name pos:start="99:28" pos:end="99:39">av_rescale_q</name><argument_list pos:start="99:40" pos:end="99:89">(<argument pos:start="99:41" pos:end="99:47"><expr pos:start="99:41" pos:end="99:47"><name pos:start="99:41" pos:end="99:47"><name pos:start="99:41" pos:end="99:43">pkt</name><operator pos:start="99:44" pos:end="99:44">.</operator><name pos:start="99:45" pos:end="99:47">pts</name></name></expr></argument>,      <argument pos:start="99:55" pos:end="99:68"><expr pos:start="99:55" pos:end="99:68"><name pos:start="99:55" pos:end="99:68"><name pos:start="99:55" pos:end="99:57">enc</name><operator pos:start="99:58" pos:end="99:59">-&gt;</operator><name pos:start="99:60" pos:end="99:68">time_base</name></name></expr></argument>, <argument pos:start="99:71" pos:end="99:88"><expr pos:start="99:71" pos:end="99:88"><name pos:start="99:71" pos:end="99:88"><name pos:start="99:71" pos:end="99:73">ost</name><operator pos:start="99:74" pos:end="99:75">-&gt;</operator><name pos:start="99:76" pos:end="99:77">st</name><operator pos:start="99:78" pos:end="99:79">-&gt;</operator><name pos:start="99:80" pos:end="99:88">time_base</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt></block_content></block></if></if_stmt>

        <if_stmt pos:start="101:9" pos:end="115:9"><if pos:start="101:9" pos:end="115:9">if <condition pos:start="101:12" pos:end="101:38">(<expr pos:start="101:13" pos:end="101:37"><name pos:start="101:13" pos:end="101:19"><name pos:start="101:13" pos:end="101:15">pkt</name><operator pos:start="101:16" pos:end="101:16">.</operator><name pos:start="101:17" pos:end="101:19">dts</name></name> <operator pos:start="101:21" pos:end="101:22">!=</operator> <name pos:start="101:24" pos:end="101:37">AV_NOPTS_VALUE</name></expr>)</condition> <block pos:start="101:40" pos:end="115:9">{<block_content pos:start="103:13" pos:end="113:13">

            <decl_stmt pos:start="103:13" pos:end="103:87"><decl pos:start="103:13" pos:end="103:86"><type pos:start="103:13" pos:end="103:19"><name pos:start="103:13" pos:end="103:19">int64_t</name></type> <name pos:start="103:21" pos:end="103:23">max</name> <init pos:start="103:25" pos:end="103:86">= <expr pos:start="103:27" pos:end="103:86"><name pos:start="103:27" pos:end="103:42"><name pos:start="103:27" pos:end="103:29">ost</name><operator pos:start="103:30" pos:end="103:31">-&gt;</operator><name pos:start="103:32" pos:end="103:33">st</name><operator pos:start="103:34" pos:end="103:35">-&gt;</operator><name pos:start="103:36" pos:end="103:42">cur_dts</name></name> <operator pos:start="103:44" pos:end="103:44">+</operator> <operator pos:start="103:46" pos:end="103:46">!</operator><operator pos:start="103:47" pos:end="103:47">(</operator><name pos:start="103:48" pos:end="103:64"><name pos:start="103:48" pos:end="103:48">s</name><operator pos:start="103:49" pos:end="103:50">-&gt;</operator><name pos:start="103:51" pos:end="103:57">oformat</name><operator pos:start="103:58" pos:end="103:59">-&gt;</operator><name pos:start="103:60" pos:end="103:64">flags</name></name> <operator pos:start="103:66" pos:end="103:66">&amp;</operator> <name pos:start="103:68" pos:end="103:85">AVFMT_TS_NONSTRICT</name><operator pos:start="103:86" pos:end="103:86">)</operator></expr></init></decl>;</decl_stmt>

            <expr_stmt pos:start="105:13" pos:end="105:90"><expr pos:start="105:13" pos:end="105:89"><name pos:start="105:13" pos:end="105:19"><name pos:start="105:13" pos:end="105:15">pkt</name><operator pos:start="105:16" pos:end="105:16">.</operator><name pos:start="105:17" pos:end="105:19">dts</name></name>      <operator pos:start="105:26" pos:end="105:26">=</operator> <call pos:start="105:28" pos:end="105:89"><name pos:start="105:28" pos:end="105:39">av_rescale_q</name><argument_list pos:start="105:40" pos:end="105:89">(<argument pos:start="105:41" pos:end="105:47"><expr pos:start="105:41" pos:end="105:47"><name pos:start="105:41" pos:end="105:47"><name pos:start="105:41" pos:end="105:43">pkt</name><operator pos:start="105:44" pos:end="105:44">.</operator><name pos:start="105:45" pos:end="105:47">dts</name></name></expr></argument>,      <argument pos:start="105:55" pos:end="105:68"><expr pos:start="105:55" pos:end="105:68"><name pos:start="105:55" pos:end="105:68"><name pos:start="105:55" pos:end="105:57">enc</name><operator pos:start="105:58" pos:end="105:59">-&gt;</operator><name pos:start="105:60" pos:end="105:68">time_base</name></name></expr></argument>, <argument pos:start="105:71" pos:end="105:88"><expr pos:start="105:71" pos:end="105:88"><name pos:start="105:71" pos:end="105:88"><name pos:start="105:71" pos:end="105:73">ost</name><operator pos:start="105:74" pos:end="105:75">-&gt;</operator><name pos:start="105:76" pos:end="105:77">st</name><operator pos:start="105:78" pos:end="105:79">-&gt;</operator><name pos:start="105:80" pos:end="105:88">time_base</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

            <if_stmt pos:start="107:13" pos:end="113:13"><if pos:start="107:13" pos:end="113:13">if <condition pos:start="107:16" pos:end="107:89">(<expr pos:start="107:17" pos:end="107:88"><name pos:start="107:17" pos:end="107:32"><name pos:start="107:17" pos:end="107:19">ost</name><operator pos:start="107:20" pos:end="107:21">-&gt;</operator><name pos:start="107:22" pos:end="107:23">st</name><operator pos:start="107:24" pos:end="107:25">-&gt;</operator><name pos:start="107:26" pos:end="107:32">cur_dts</name></name> <operator pos:start="107:34" pos:end="107:35">&amp;&amp;</operator> <name pos:start="107:37" pos:end="107:52"><name pos:start="107:37" pos:end="107:39">ost</name><operator pos:start="107:40" pos:end="107:41">-&gt;</operator><name pos:start="107:42" pos:end="107:43">st</name><operator pos:start="107:44" pos:end="107:45">-&gt;</operator><name pos:start="107:46" pos:end="107:52">cur_dts</name></name> <operator pos:start="107:54" pos:end="107:55">!=</operator> <name pos:start="107:57" pos:end="107:70">AV_NOPTS_VALUE</name> <operator pos:start="107:72" pos:end="107:73">&amp;&amp;</operator>  <name pos:start="107:76" pos:end="107:78">max</name> <operator pos:start="107:80" pos:end="107:80">&gt;</operator> <name pos:start="107:82" pos:end="107:88"><name pos:start="107:82" pos:end="107:84">pkt</name><operator pos:start="107:85" pos:end="107:85">.</operator><name pos:start="107:86" pos:end="107:88">dts</name></name></expr>)</condition> <block pos:start="107:91" pos:end="113:13">{<block_content pos:start="109:17" pos:end="111:40">

                <expr_stmt pos:start="109:17" pos:end="109:151"><expr pos:start="109:17" pos:end="109:150"><call pos:start="109:17" pos:end="109:150"><name pos:start="109:17" pos:end="109:22">av_log</name><argument_list pos:start="109:23" pos:end="109:150">(<argument pos:start="109:24" pos:end="109:24"><expr pos:start="109:24" pos:end="109:24"><name pos:start="109:24" pos:end="109:24">s</name></expr></argument>, <argument pos:start="109:27" pos:end="109:75"><expr pos:start="109:27" pos:end="109:75"><ternary pos:start="109:27" pos:end="109:75"><condition pos:start="109:27" pos:end="109:45"><expr pos:start="109:27" pos:end="109:43"><name pos:start="109:27" pos:end="109:29">max</name> <operator pos:start="109:31" pos:end="109:31">-</operator> <name pos:start="109:33" pos:end="109:39"><name pos:start="109:33" pos:end="109:35">pkt</name><operator pos:start="109:36" pos:end="109:36">.</operator><name pos:start="109:37" pos:end="109:39">dts</name></name> <operator pos:start="109:41" pos:end="109:41">&gt;</operator> <literal type="number" pos:start="109:43" pos:end="109:43">2</literal></expr> ?</condition><then pos:start="109:47" pos:end="109:60"> <expr pos:start="109:47" pos:end="109:60"><name pos:start="109:47" pos:end="109:60">AV_LOG_WARNING</name></expr> </then><else pos:start="109:62" pos:end="109:75">: <expr pos:start="109:64" pos:end="109:75"><name pos:start="109:64" pos:end="109:75">AV_LOG_DEBUG</name></expr></else></ternary></expr></argument>, <argument pos:start="109:78" pos:end="109:135"><expr pos:start="109:78" pos:end="109:135"><literal type="string" pos:start="109:78" pos:end="109:96">"Audio timestamp %"</literal><name pos:start="109:97" pos:end="109:102">PRId64</name><literal type="string" pos:start="109:103" pos:end="109:108">" &lt; %"</literal><name pos:start="109:109" pos:end="109:114">PRId64</name><literal type="string" pos:start="109:115" pos:end="109:135">" invalid, cliping\n"</literal></expr></argument>, <argument pos:start="109:138" pos:end="109:144"><expr pos:start="109:138" pos:end="109:144"><name pos:start="109:138" pos:end="109:144"><name pos:start="109:138" pos:end="109:140">pkt</name><operator pos:start="109:141" pos:end="109:141">.</operator><name pos:start="109:142" pos:end="109:144">dts</name></name></expr></argument>, <argument pos:start="109:147" pos:end="109:149"><expr pos:start="109:147" pos:end="109:149"><name pos:start="109:147" pos:end="109:149">max</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

                <expr_stmt pos:start="111:17" pos:end="111:40"><expr pos:start="111:17" pos:end="111:39"><name pos:start="111:17" pos:end="111:23"><name pos:start="111:17" pos:end="111:19">pkt</name><operator pos:start="111:20" pos:end="111:20">.</operator><name pos:start="111:21" pos:end="111:23">pts</name></name> <operator pos:start="111:25" pos:end="111:25">=</operator> <name pos:start="111:27" pos:end="111:33"><name pos:start="111:27" pos:end="111:29">pkt</name><operator pos:start="111:30" pos:end="111:30">.</operator><name pos:start="111:31" pos:end="111:33">dts</name></name> <operator pos:start="111:35" pos:end="111:35">=</operator> <name pos:start="111:37" pos:end="111:39">max</name></expr>;</expr_stmt>

            </block_content>}</block></if></if_stmt>

        </block_content>}</block></if></if_stmt>

        <if_stmt pos:start="117:9" pos:end="119:90"><if pos:start="117:9" pos:end="119:90">if <condition pos:start="117:12" pos:end="117:29">(<expr pos:start="117:13" pos:end="117:28"><name pos:start="117:13" pos:end="117:24"><name pos:start="117:13" pos:end="117:15">pkt</name><operator pos:start="117:16" pos:end="117:16">.</operator><name pos:start="117:17" pos:end="117:24">duration</name></name> <operator pos:start="117:26" pos:end="117:26">&gt;</operator> <literal type="number" pos:start="117:28" pos:end="117:28">0</literal></expr>)</condition><block type="pseudo" pos:start="119:13" pos:end="119:90"><block_content pos:start="119:13" pos:end="119:90">

            <expr_stmt pos:start="119:13" pos:end="119:90"><expr pos:start="119:13" pos:end="119:89"><name pos:start="119:13" pos:end="119:24"><name pos:start="119:13" pos:end="119:15">pkt</name><operator pos:start="119:16" pos:end="119:16">.</operator><name pos:start="119:17" pos:end="119:24">duration</name></name> <operator pos:start="119:26" pos:end="119:26">=</operator> <call pos:start="119:28" pos:end="119:89"><name pos:start="119:28" pos:end="119:39">av_rescale_q</name><argument_list pos:start="119:40" pos:end="119:89">(<argument pos:start="119:41" pos:end="119:52"><expr pos:start="119:41" pos:end="119:52"><name pos:start="119:41" pos:end="119:52"><name pos:start="119:41" pos:end="119:43">pkt</name><operator pos:start="119:44" pos:end="119:44">.</operator><name pos:start="119:45" pos:end="119:52">duration</name></name></expr></argument>, <argument pos:start="119:55" pos:end="119:68"><expr pos:start="119:55" pos:end="119:68"><name pos:start="119:55" pos:end="119:68"><name pos:start="119:55" pos:end="119:57">enc</name><operator pos:start="119:58" pos:end="119:59">-&gt;</operator><name pos:start="119:60" pos:end="119:68">time_base</name></name></expr></argument>, <argument pos:start="119:71" pos:end="119:88"><expr pos:start="119:71" pos:end="119:88"><name pos:start="119:71" pos:end="119:88"><name pos:start="119:71" pos:end="119:73">ost</name><operator pos:start="119:74" pos:end="119:75">-&gt;</operator><name pos:start="119:76" pos:end="119:77">st</name><operator pos:start="119:78" pos:end="119:79">-&gt;</operator><name pos:start="119:80" pos:end="119:88">time_base</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt></block_content></block></if></if_stmt>



        <expr_stmt pos:start="123:9" pos:end="123:34"><expr pos:start="123:9" pos:end="123:33"><call pos:start="123:9" pos:end="123:33"><name pos:start="123:9" pos:end="123:19">write_frame</name><argument_list pos:start="123:20" pos:end="123:33">(<argument pos:start="123:21" pos:end="123:21"><expr pos:start="123:21" pos:end="123:21"><name pos:start="123:21" pos:end="123:21">s</name></expr></argument>, <argument pos:start="123:24" pos:end="123:27"><expr pos:start="123:24" pos:end="123:27"><operator pos:start="123:24" pos:end="123:24">&amp;</operator><name pos:start="123:25" pos:end="123:27">pkt</name></expr></argument>, <argument pos:start="123:30" pos:end="123:32"><expr pos:start="123:30" pos:end="123:32"><name pos:start="123:30" pos:end="123:32">ost</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>



        <expr_stmt pos:start="127:9" pos:end="127:31"><expr pos:start="127:9" pos:end="127:30"><name pos:start="127:9" pos:end="127:18">audio_size</name> <operator pos:start="127:20" pos:end="127:21">+=</operator> <name pos:start="127:23" pos:end="127:30"><name pos:start="127:23" pos:end="127:25">pkt</name><operator pos:start="127:26" pos:end="127:26">.</operator><name pos:start="127:27" pos:end="127:30">size</name></name></expr>;</expr_stmt>



        <expr_stmt pos:start="131:9" pos:end="131:29"><expr pos:start="131:9" pos:end="131:28"><call pos:start="131:9" pos:end="131:28"><name pos:start="131:9" pos:end="131:22">av_free_packet</name><argument_list pos:start="131:23" pos:end="131:28">(<argument pos:start="131:24" pos:end="131:27"><expr pos:start="131:24" pos:end="131:27"><operator pos:start="131:24" pos:end="131:24">&amp;</operator><name pos:start="131:25" pos:end="131:27">pkt</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    </block_content>}</block></if></if_stmt>



    <if_stmt pos:start="137:5" pos:end="147:5"><if pos:start="137:5" pos:end="147:5">if <condition pos:start="137:8" pos:end="137:17">(<expr pos:start="137:9" pos:end="137:16"><name pos:start="137:9" pos:end="137:16">debug_ts</name></expr>)</condition> <block pos:start="137:19" pos:end="147:5">{<block_content pos:start="139:9" pos:end="145:80">

        <expr_stmt pos:start="139:9" pos:end="145:80"><expr pos:start="139:9" pos:end="145:79"><call pos:start="139:9" pos:end="145:79"><name pos:start="139:9" pos:end="139:14">av_log</name><argument_list pos:start="139:15" pos:end="145:79">(<argument pos:start="139:16" pos:end="139:19"><expr pos:start="139:16" pos:end="139:19"><name pos:start="139:16" pos:end="139:19">NULL</name></expr></argument>, <argument pos:start="139:22" pos:end="139:32"><expr pos:start="139:22" pos:end="139:32"><name pos:start="139:22" pos:end="139:32">AV_LOG_INFO</name></expr></argument>, <argument pos:start="139:35" pos:end="141:72"><expr pos:start="139:35" pos:end="141:72"><literal type="string" pos:start="139:35" pos:end="139:58">"encoder -&gt; type:audio "</literal>

               <literal type="string" pos:start="141:16" pos:end="141:72">"pkt_pts:%s pkt_pts_time:%s pkt_dts:%s pkt_dts_time:%s\n"</literal></expr></argument>,

               <argument pos:start="143:16" pos:end="143:33"><expr pos:start="143:16" pos:end="143:33"><call pos:start="143:16" pos:end="143:33"><name pos:start="143:16" pos:end="143:24">av_ts2str</name><argument_list pos:start="143:25" pos:end="143:33">(<argument pos:start="143:26" pos:end="143:32"><expr pos:start="143:26" pos:end="143:32"><name pos:start="143:26" pos:end="143:32"><name pos:start="143:26" pos:end="143:28">pkt</name><operator pos:start="143:29" pos:end="143:29">.</operator><name pos:start="143:30" pos:end="143:32">pts</name></name></expr></argument>)</argument_list></call></expr></argument>, <argument pos:start="143:36" pos:end="143:78"><expr pos:start="143:36" pos:end="143:78"><call pos:start="143:36" pos:end="143:78"><name pos:start="143:36" pos:end="143:48">av_ts2timestr</name><argument_list pos:start="143:49" pos:end="143:78">(<argument pos:start="143:50" pos:end="143:56"><expr pos:start="143:50" pos:end="143:56"><name pos:start="143:50" pos:end="143:56"><name pos:start="143:50" pos:end="143:52">pkt</name><operator pos:start="143:53" pos:end="143:53">.</operator><name pos:start="143:54" pos:end="143:56">pts</name></name></expr></argument>, <argument pos:start="143:59" pos:end="143:77"><expr pos:start="143:59" pos:end="143:77"><operator pos:start="143:59" pos:end="143:59">&amp;</operator><name pos:start="143:60" pos:end="143:77"><name pos:start="143:60" pos:end="143:62">ost</name><operator pos:start="143:63" pos:end="143:64">-&gt;</operator><name pos:start="143:65" pos:end="143:66">st</name><operator pos:start="143:67" pos:end="143:68">-&gt;</operator><name pos:start="143:69" pos:end="143:77">time_base</name></name></expr></argument>)</argument_list></call></expr></argument>,

               <argument pos:start="145:16" pos:end="145:33"><expr pos:start="145:16" pos:end="145:33"><call pos:start="145:16" pos:end="145:33"><name pos:start="145:16" pos:end="145:24">av_ts2str</name><argument_list pos:start="145:25" pos:end="145:33">(<argument pos:start="145:26" pos:end="145:32"><expr pos:start="145:26" pos:end="145:32"><name pos:start="145:26" pos:end="145:32"><name pos:start="145:26" pos:end="145:28">pkt</name><operator pos:start="145:29" pos:end="145:29">.</operator><name pos:start="145:30" pos:end="145:32">dts</name></name></expr></argument>)</argument_list></call></expr></argument>, <argument pos:start="145:36" pos:end="145:78"><expr pos:start="145:36" pos:end="145:78"><call pos:start="145:36" pos:end="145:78"><name pos:start="145:36" pos:end="145:48">av_ts2timestr</name><argument_list pos:start="145:49" pos:end="145:78">(<argument pos:start="145:50" pos:end="145:56"><expr pos:start="145:50" pos:end="145:56"><name pos:start="145:50" pos:end="145:56"><name pos:start="145:50" pos:end="145:52">pkt</name><operator pos:start="145:53" pos:end="145:53">.</operator><name pos:start="145:54" pos:end="145:56">dts</name></name></expr></argument>, <argument pos:start="145:59" pos:end="145:77"><expr pos:start="145:59" pos:end="145:77"><operator pos:start="145:59" pos:end="145:59">&amp;</operator><name pos:start="145:60" pos:end="145:77"><name pos:start="145:60" pos:end="145:62">ost</name><operator pos:start="145:63" pos:end="145:64">-&gt;</operator><name pos:start="145:65" pos:end="145:66">st</name><operator pos:start="145:67" pos:end="145:68">-&gt;</operator><name pos:start="145:69" pos:end="145:77">time_base</name></name></expr></argument>)</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    </block_content>}</block></if></if_stmt>



    <return pos:start="151:5" pos:end="151:15">return <expr pos:start="151:12" pos:end="151:14"><name pos:start="151:12" pos:end="151:14">ret</name></expr>;</return>

</block_content>}</block></function>
</unit>
