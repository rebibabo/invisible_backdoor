<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<unit xmlns="http://www.srcML.org/srcML/src" xmlns:pos="http://www.srcML.org/srcML/position" revision="1.0.0" language="C" filename="dataset/ropgen/aug/1/21568.c" pos:tabs="8"><function pos:start="1:1" pos:end="135:1"><type pos:start="1:1" pos:end="1:10"><specifier pos:start="1:1" pos:end="1:6">static</specifier> <name pos:start="1:8" pos:end="1:10">int</name></type> <name pos:start="1:12" pos:end="1:24">vorbis_packet</name><parameter_list pos:start="1:25" pos:end="1:53">(<parameter pos:start="1:26" pos:end="1:43"><decl pos:start="1:26" pos:end="1:43"><type pos:start="1:26" pos:end="1:43"><name pos:start="1:26" pos:end="1:40">AVFormatContext</name> <modifier pos:start="1:42" pos:end="1:42">*</modifier></type><name pos:start="1:43" pos:end="1:43">s</name></decl></parameter>, <parameter pos:start="1:46" pos:end="1:52"><decl pos:start="1:46" pos:end="1:52"><type pos:start="1:46" pos:end="1:52"><name pos:start="1:46" pos:end="1:48">int</name></type> <name pos:start="1:50" pos:end="1:52">idx</name></decl></parameter>)</parameter_list>

<block pos:start="3:1" pos:end="135:1">{<block_content pos:start="5:5" pos:end="133:13">

    <decl_stmt pos:start="5:5" pos:end="5:35"><decl pos:start="5:5" pos:end="5:34"><type pos:start="5:5" pos:end="5:16"><name pos:start="5:5" pos:end="5:14"><name pos:start="5:5" pos:end="5:10">struct</name> <name pos:start="5:12" pos:end="5:14">ogg</name></name> <modifier pos:start="5:16" pos:end="5:16">*</modifier></type><name pos:start="5:17" pos:end="5:19">ogg</name> <init pos:start="5:21" pos:end="5:34">= <expr pos:start="5:23" pos:end="5:34"><name pos:start="5:23" pos:end="5:34"><name pos:start="5:23" pos:end="5:23">s</name><operator pos:start="5:24" pos:end="5:25">-&gt;</operator><name pos:start="5:26" pos:end="5:34">priv_data</name></name></expr></init></decl>;</decl_stmt>

    <decl_stmt pos:start="7:5" pos:end="7:47"><decl pos:start="7:5" pos:end="7:46"><type pos:start="7:5" pos:end="7:23"><name pos:start="7:5" pos:end="7:21"><name pos:start="7:5" pos:end="7:10">struct</name> <name pos:start="7:12" pos:end="7:21">ogg_stream</name></name> <modifier pos:start="7:23" pos:end="7:23">*</modifier></type><name pos:start="7:24" pos:end="7:25">os</name> <init pos:start="7:27" pos:end="7:46">= <expr pos:start="7:29" pos:end="7:46"><name pos:start="7:29" pos:end="7:40"><name pos:start="7:29" pos:end="7:31">ogg</name><operator pos:start="7:32" pos:end="7:33">-&gt;</operator><name pos:start="7:34" pos:end="7:40">streams</name></name> <operator pos:start="7:42" pos:end="7:42">+</operator> <name pos:start="7:44" pos:end="7:46">idx</name></expr></init></decl>;</decl_stmt>

    <decl_stmt pos:start="9:5" pos:end="9:49"><decl pos:start="9:5" pos:end="9:48"><type pos:start="9:5" pos:end="9:30"><name pos:start="9:5" pos:end="9:28"><name pos:start="9:5" pos:end="9:10">struct</name> <name pos:start="9:12" pos:end="9:28">oggvorbis_private</name></name> <modifier pos:start="9:30" pos:end="9:30">*</modifier></type><name pos:start="9:31" pos:end="9:34">priv</name> <init pos:start="9:36" pos:end="9:48">= <expr pos:start="9:38" pos:end="9:48"><name pos:start="9:38" pos:end="9:48"><name pos:start="9:38" pos:end="9:39">os</name><operator pos:start="9:40" pos:end="9:41">-&gt;</operator><name pos:start="9:42" pos:end="9:48">private</name></name></expr></init></decl>;</decl_stmt>

    <decl_stmt pos:start="11:5" pos:end="11:17"><decl pos:start="11:5" pos:end="11:16"><type pos:start="11:5" pos:end="11:7"><name pos:start="11:5" pos:end="11:7">int</name></type> <name pos:start="11:9" pos:end="11:16">duration</name></decl>;</decl_stmt>



    <comment type="block" pos:start="15:5" pos:end="21:33">/* first packet handling

       here we parse the duration of each packet in the first page and compare

       the total duration to the page granule to find the encoder delay and

       set the first timestamp */</comment>

    <if_stmt pos:start="23:5" pos:end="81:5"><if pos:start="23:5" pos:end="81:5">if <condition pos:start="23:8" pos:end="23:21">(<expr pos:start="23:9" pos:end="23:20"><operator pos:start="23:9" pos:end="23:9">!</operator><name pos:start="23:10" pos:end="23:20"><name pos:start="23:10" pos:end="23:11">os</name><operator pos:start="23:12" pos:end="23:13">-&gt;</operator><name pos:start="23:14" pos:end="23:20">lastpts</name></name></expr>)</condition> <block pos:start="23:23" pos:end="81:5">{<block_content pos:start="25:9" pos:end="79:45">

        <decl_stmt pos:start="25:9" pos:end="25:16"><decl pos:start="25:9" pos:end="25:15"><type pos:start="25:9" pos:end="25:11"><name pos:start="25:9" pos:end="25:11">int</name></type> <name pos:start="25:13" pos:end="25:15">seg</name></decl>;</decl_stmt>

        <decl_stmt pos:start="27:9" pos:end="27:49"><decl pos:start="27:9" pos:end="27:48"><type pos:start="27:9" pos:end="27:17"><name pos:start="27:9" pos:end="27:15">uint8_t</name> <modifier pos:start="27:17" pos:end="27:17">*</modifier></type><name pos:start="27:18" pos:end="27:25">last_pkt</name> <init pos:start="27:27" pos:end="27:48">= <expr pos:start="27:29" pos:end="27:48"><name pos:start="27:29" pos:end="27:35"><name pos:start="27:29" pos:end="27:30">os</name><operator pos:start="27:31" pos:end="27:32">-&gt;</operator><name pos:start="27:33" pos:end="27:35">buf</name></name> <operator pos:start="27:37" pos:end="27:37">+</operator> <name pos:start="27:39" pos:end="27:48"><name pos:start="27:39" pos:end="27:40">os</name><operator pos:start="27:41" pos:end="27:42">-&gt;</operator><name pos:start="27:43" pos:end="27:48">pstart</name></name></expr></init></decl>;</decl_stmt>

        <decl_stmt pos:start="29:9" pos:end="29:37"><decl pos:start="29:9" pos:end="29:36"><type pos:start="29:9" pos:end="29:17"><name pos:start="29:9" pos:end="29:15">uint8_t</name> <modifier pos:start="29:17" pos:end="29:17">*</modifier></type><name pos:start="29:18" pos:end="29:25">next_pkt</name> <init pos:start="29:27" pos:end="29:36">= <expr pos:start="29:29" pos:end="29:36"><name pos:start="29:29" pos:end="29:36">last_pkt</name></expr></init></decl>;</decl_stmt>

        <decl_stmt pos:start="31:9" pos:end="31:31"><decl pos:start="31:9" pos:end="31:30"><type pos:start="31:9" pos:end="31:11"><name pos:start="31:9" pos:end="31:11">int</name></type> <name pos:start="31:13" pos:end="31:26">first_duration</name> <init pos:start="31:28" pos:end="31:30">= <expr pos:start="31:30" pos:end="31:30"><literal type="number" pos:start="31:30" pos:end="31:30">0</literal></expr></init></decl>;</decl_stmt>



        <expr_stmt pos:start="35:9" pos:end="35:45"><expr pos:start="35:9" pos:end="35:44"><call pos:start="35:9" pos:end="35:44"><name pos:start="35:9" pos:end="35:33">avpriv_vorbis_parse_reset</name><argument_list pos:start="35:34" pos:end="35:44">(<argument pos:start="35:35" pos:end="35:43"><expr pos:start="35:35" pos:end="35:43"><operator pos:start="35:35" pos:end="35:35">&amp;</operator><name pos:start="35:36" pos:end="35:43"><name pos:start="35:36" pos:end="35:39">priv</name><operator pos:start="35:40" pos:end="35:41">-&gt;</operator><name pos:start="35:42" pos:end="35:43">vp</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <expr_stmt pos:start="37:9" pos:end="37:21"><expr pos:start="37:9" pos:end="37:20"><name pos:start="37:9" pos:end="37:16">duration</name> <operator pos:start="37:18" pos:end="37:18">=</operator> <literal type="number" pos:start="37:20" pos:end="37:20">0</literal></expr>;</expr_stmt>

        <for pos:start="39:9" pos:end="65:9">for <control pos:start="39:13" pos:end="39:45">(<init pos:start="39:14" pos:end="39:21"><expr pos:start="39:14" pos:end="39:20"><name pos:start="39:14" pos:end="39:16">seg</name> <operator pos:start="39:18" pos:end="39:18">=</operator> <literal type="number" pos:start="39:20" pos:end="39:20">0</literal></expr>;</init> <condition pos:start="39:23" pos:end="39:38"><expr pos:start="39:23" pos:end="39:37"><name pos:start="39:23" pos:end="39:25">seg</name> <operator pos:start="39:27" pos:end="39:27">&lt;</operator> <name pos:start="39:29" pos:end="39:37"><name pos:start="39:29" pos:end="39:30">os</name><operator pos:start="39:31" pos:end="39:32">-&gt;</operator><name pos:start="39:33" pos:end="39:37">nsegs</name></name></expr>;</condition> <incr pos:start="39:40" pos:end="39:44"><expr pos:start="39:40" pos:end="39:44"><name pos:start="39:40" pos:end="39:42">seg</name><operator pos:start="39:43" pos:end="39:44">++</operator></expr></incr>)</control> <block pos:start="39:47" pos:end="65:9">{<block_content pos:start="41:13" pos:end="63:42">

            <if_stmt pos:start="41:13" pos:end="61:13"><if pos:start="41:13" pos:end="61:13">if <condition pos:start="41:16" pos:end="41:40">(<expr pos:start="41:17" pos:end="41:39"><name pos:start="41:17" pos:end="41:33"><name pos:start="41:17" pos:end="41:18">os</name><operator pos:start="41:19" pos:end="41:20">-&gt;</operator><name pos:start="41:21" pos:end="41:28">segments</name><index pos:start="41:29" pos:end="41:33">[<expr pos:start="41:30" pos:end="41:32"><name pos:start="41:30" pos:end="41:32">seg</name></expr>]</index></name> <operator pos:start="41:35" pos:end="41:35">&lt;</operator> <literal type="number" pos:start="41:37" pos:end="41:39">255</literal></expr>)</condition> <block pos:start="41:42" pos:end="61:13">{<block_content pos:start="43:17" pos:end="59:56">

                <decl_stmt pos:start="43:17" pos:end="43:74"><decl pos:start="43:17" pos:end="43:73"><type pos:start="43:17" pos:end="43:19"><name pos:start="43:17" pos:end="43:19">int</name></type> <name pos:start="43:21" pos:end="43:21">d</name> <init pos:start="43:23" pos:end="43:73">= <expr pos:start="43:25" pos:end="43:73"><call pos:start="43:25" pos:end="43:73"><name pos:start="43:25" pos:end="43:49">avpriv_vorbis_parse_frame</name><argument_list pos:start="43:50" pos:end="43:73">(<argument pos:start="43:51" pos:end="43:59"><expr pos:start="43:51" pos:end="43:59"><operator pos:start="43:51" pos:end="43:51">&amp;</operator><name pos:start="43:52" pos:end="43:59"><name pos:start="43:52" pos:end="43:55">priv</name><operator pos:start="43:56" pos:end="43:57">-&gt;</operator><name pos:start="43:58" pos:end="43:59">vp</name></name></expr></argument>, <argument pos:start="43:62" pos:end="43:69"><expr pos:start="43:62" pos:end="43:69"><name pos:start="43:62" pos:end="43:69">last_pkt</name></expr></argument>, <argument pos:start="43:72" pos:end="43:72"><expr pos:start="43:72" pos:end="43:72"><literal type="number" pos:start="43:72" pos:end="43:72">1</literal></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>

                <if_stmt pos:start="45:17" pos:end="51:17"><if pos:start="45:17" pos:end="51:17">if <condition pos:start="45:20" pos:end="45:26">(<expr pos:start="45:21" pos:end="45:25"><name pos:start="45:21" pos:end="45:21">d</name> <operator pos:start="45:23" pos:end="45:23">&lt;</operator> <literal type="number" pos:start="45:25" pos:end="45:25">0</literal></expr>)</condition> <block pos:start="45:28" pos:end="51:17">{<block_content pos:start="47:21" pos:end="49:26">

                    <expr_stmt pos:start="47:21" pos:end="47:43"><expr pos:start="47:21" pos:end="47:42"><name pos:start="47:21" pos:end="47:28">duration</name> <operator pos:start="47:30" pos:end="47:30">=</operator> <name pos:start="47:32" pos:end="47:42"><name pos:start="47:32" pos:end="47:33">os</name><operator pos:start="47:34" pos:end="47:35">-&gt;</operator><name pos:start="47:36" pos:end="47:42">granule</name></name></expr>;</expr_stmt>

                    <break pos:start="49:21" pos:end="49:26">break;</break>

                </block_content>}</block></if></if_stmt>

                <if_stmt pos:start="53:17" pos:end="55:39"><if pos:start="53:17" pos:end="55:39">if <condition pos:start="53:20" pos:end="53:30">(<expr pos:start="53:21" pos:end="53:29"><operator pos:start="53:21" pos:end="53:21">!</operator><name pos:start="53:22" pos:end="53:29">duration</name></expr>)</condition><block type="pseudo" pos:start="55:21" pos:end="55:39"><block_content pos:start="55:21" pos:end="55:39">

                    <expr_stmt pos:start="55:21" pos:end="55:39"><expr pos:start="55:21" pos:end="55:38"><name pos:start="55:21" pos:end="55:34">first_duration</name> <operator pos:start="55:36" pos:end="55:36">=</operator> <name pos:start="55:38" pos:end="55:38">d</name></expr>;</expr_stmt></block_content></block></if></if_stmt>

                <expr_stmt pos:start="57:17" pos:end="57:30"><expr pos:start="57:17" pos:end="57:29"><name pos:start="57:17" pos:end="57:24">duration</name> <operator pos:start="57:26" pos:end="57:27">+=</operator> <name pos:start="57:29" pos:end="57:29">d</name></expr>;</expr_stmt>

                <expr_stmt pos:start="59:17" pos:end="59:56"><expr pos:start="59:17" pos:end="59:55"><name pos:start="59:17" pos:end="59:24">last_pkt</name> <operator pos:start="59:26" pos:end="59:26">=</operator> <name pos:start="59:28" pos:end="59:35">next_pkt</name> <operator pos:start="59:37" pos:end="59:37">+</operator> <name pos:start="59:39" pos:end="59:55"><name pos:start="59:39" pos:end="59:40">os</name><operator pos:start="59:41" pos:end="59:42">-&gt;</operator><name pos:start="59:43" pos:end="59:50">segments</name><index pos:start="59:51" pos:end="59:55">[<expr pos:start="59:52" pos:end="59:54"><name pos:start="59:52" pos:end="59:54">seg</name></expr>]</index></name></expr>;</expr_stmt>

            </block_content>}</block></if></if_stmt>

            <expr_stmt pos:start="63:13" pos:end="63:42"><expr pos:start="63:13" pos:end="63:41"><name pos:start="63:13" pos:end="63:20">next_pkt</name> <operator pos:start="63:22" pos:end="63:23">+=</operator> <name pos:start="63:25" pos:end="63:41"><name pos:start="63:25" pos:end="63:26">os</name><operator pos:start="63:27" pos:end="63:28">-&gt;</operator><name pos:start="63:29" pos:end="63:36">segments</name><index pos:start="63:37" pos:end="63:41">[<expr pos:start="63:38" pos:end="63:40"><name pos:start="63:38" pos:end="63:40">seg</name></expr>]</index></name></expr>;</expr_stmt>

        </block_content>}</block></for>

        <expr_stmt pos:start="67:9" pos:end="67:61"><expr pos:start="67:9" pos:end="67:60"><name pos:start="67:9" pos:end="67:19"><name pos:start="67:9" pos:end="67:10">os</name><operator pos:start="67:11" pos:end="67:12">-&gt;</operator><name pos:start="67:13" pos:end="67:19">lastpts</name></name> <operator pos:start="67:21" pos:end="67:21">=</operator> <name pos:start="67:23" pos:end="67:33"><name pos:start="67:23" pos:end="67:24">os</name><operator pos:start="67:25" pos:end="67:26">-&gt;</operator><name pos:start="67:27" pos:end="67:33">lastdts</name></name>   <operator pos:start="67:37" pos:end="67:37">=</operator> <name pos:start="67:39" pos:end="67:49"><name pos:start="67:39" pos:end="67:40">os</name><operator pos:start="67:41" pos:end="67:42">-&gt;</operator><name pos:start="67:43" pos:end="67:49">granule</name></name> <operator pos:start="67:51" pos:end="67:51">-</operator> <name pos:start="67:53" pos:end="67:60">duration</name></expr>;</expr_stmt>

        <expr_stmt pos:start="69:9" pos:end="69:67"><expr pos:start="69:9" pos:end="69:66"><name pos:start="69:9" pos:end="69:23"><name pos:start="69:9" pos:end="69:9">s</name><operator pos:start="69:10" pos:end="69:11">-&gt;</operator><name pos:start="69:12" pos:end="69:18">streams</name><index pos:start="69:19" pos:end="69:23">[<expr pos:start="69:20" pos:end="69:22"><name pos:start="69:20" pos:end="69:22">idx</name></expr>]</index></name><operator pos:start="69:24" pos:end="69:25">-&gt;</operator><name pos:start="69:26" pos:end="69:35">start_time</name> <operator pos:start="69:37" pos:end="69:37">=</operator> <name pos:start="69:39" pos:end="69:49"><name pos:start="69:39" pos:end="69:40">os</name><operator pos:start="69:41" pos:end="69:42">-&gt;</operator><name pos:start="69:43" pos:end="69:49">lastpts</name></name> <operator pos:start="69:51" pos:end="69:51">+</operator> <name pos:start="69:53" pos:end="69:66">first_duration</name></expr>;</expr_stmt>

        <if_stmt pos:start="71:9" pos:end="73:69"><if pos:start="71:9" pos:end="73:69">if <condition pos:start="71:12" pos:end="71:38">(<expr pos:start="71:13" pos:end="71:37"><name pos:start="71:13" pos:end="71:27"><name pos:start="71:13" pos:end="71:13">s</name><operator pos:start="71:14" pos:end="71:15">-&gt;</operator><name pos:start="71:16" pos:end="71:22">streams</name><index pos:start="71:23" pos:end="71:27">[<expr pos:start="71:24" pos:end="71:26"><name pos:start="71:24" pos:end="71:26">idx</name></expr>]</index></name><operator pos:start="71:28" pos:end="71:29">-&gt;</operator><name pos:start="71:30" pos:end="71:37">duration</name></expr>)</condition><block type="pseudo" pos:start="73:13" pos:end="73:69"><block_content pos:start="73:13" pos:end="73:69">

            <expr_stmt pos:start="73:13" pos:end="73:69"><expr pos:start="73:13" pos:end="73:68"><name pos:start="73:13" pos:end="73:27"><name pos:start="73:13" pos:end="73:13">s</name><operator pos:start="73:14" pos:end="73:15">-&gt;</operator><name pos:start="73:16" pos:end="73:22">streams</name><index pos:start="73:23" pos:end="73:27">[<expr pos:start="73:24" pos:end="73:26"><name pos:start="73:24" pos:end="73:26">idx</name></expr>]</index></name><operator pos:start="73:28" pos:end="73:29">-&gt;</operator><name pos:start="73:30" pos:end="73:37">duration</name> <operator pos:start="73:39" pos:end="73:40">-=</operator> <name pos:start="73:42" pos:end="73:56"><name pos:start="73:42" pos:end="73:42">s</name><operator pos:start="73:43" pos:end="73:44">-&gt;</operator><name pos:start="73:45" pos:end="73:51">streams</name><index pos:start="73:52" pos:end="73:56">[<expr pos:start="73:53" pos:end="73:55"><name pos:start="73:53" pos:end="73:55">idx</name></expr>]</index></name><operator pos:start="73:57" pos:end="73:58">-&gt;</operator><name pos:start="73:59" pos:end="73:68">start_time</name></expr>;</expr_stmt></block_content></block></if></if_stmt>

        <expr_stmt pos:start="75:9" pos:end="75:53"><expr pos:start="75:9" pos:end="75:52"><name pos:start="75:9" pos:end="75:23"><name pos:start="75:9" pos:end="75:9">s</name><operator pos:start="75:10" pos:end="75:11">-&gt;</operator><name pos:start="75:12" pos:end="75:18">streams</name><index pos:start="75:19" pos:end="75:23">[<expr pos:start="75:20" pos:end="75:22"><name pos:start="75:20" pos:end="75:22">idx</name></expr>]</index></name><operator pos:start="75:24" pos:end="75:25">-&gt;</operator><name pos:start="75:26" pos:end="75:32">cur_dts</name>    <operator pos:start="75:37" pos:end="75:37">=</operator> <name pos:start="75:39" pos:end="75:52">AV_NOPTS_VALUE</name></expr>;</expr_stmt>

        <expr_stmt pos:start="77:9" pos:end="77:53"><expr pos:start="77:9" pos:end="77:52"><name pos:start="77:9" pos:end="77:23"><name pos:start="77:9" pos:end="77:12">priv</name><operator pos:start="77:13" pos:end="77:14">-&gt;</operator><name pos:start="77:15" pos:end="77:23">final_pts</name></name>             <operator pos:start="77:37" pos:end="77:37">=</operator> <name pos:start="77:39" pos:end="77:52">AV_NOPTS_VALUE</name></expr>;</expr_stmt>

        <expr_stmt pos:start="79:9" pos:end="79:45"><expr pos:start="79:9" pos:end="79:44"><call pos:start="79:9" pos:end="79:44"><name pos:start="79:9" pos:end="79:33">avpriv_vorbis_parse_reset</name><argument_list pos:start="79:34" pos:end="79:44">(<argument pos:start="79:35" pos:end="79:43"><expr pos:start="79:35" pos:end="79:43"><operator pos:start="79:35" pos:end="79:35">&amp;</operator><name pos:start="79:36" pos:end="79:43"><name pos:start="79:36" pos:end="79:39">priv</name><operator pos:start="79:40" pos:end="79:41">-&gt;</operator><name pos:start="79:42" pos:end="79:43">vp</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    </block_content>}</block></if></if_stmt>



    <comment type="block" pos:start="85:5" pos:end="85:31">/* parse packet duration */</comment>

    <if_stmt pos:start="87:5" pos:end="101:5"><if pos:start="87:5" pos:end="101:5">if <condition pos:start="87:8" pos:end="87:22">(<expr pos:start="87:9" pos:end="87:21"><name pos:start="87:9" pos:end="87:17"><name pos:start="87:9" pos:end="87:10">os</name><operator pos:start="87:11" pos:end="87:12">-&gt;</operator><name pos:start="87:13" pos:end="87:17">psize</name></name> <operator pos:start="87:19" pos:end="87:19">&gt;</operator> <literal type="number" pos:start="87:21" pos:end="87:21">0</literal></expr>)</condition> <block pos:start="87:24" pos:end="101:5">{<block_content pos:start="89:9" pos:end="99:33">

        <expr_stmt pos:start="89:9" pos:end="89:81"><expr pos:start="89:9" pos:end="89:80"><name pos:start="89:9" pos:end="89:16">duration</name> <operator pos:start="89:18" pos:end="89:18">=</operator> <call pos:start="89:20" pos:end="89:80"><name pos:start="89:20" pos:end="89:44">avpriv_vorbis_parse_frame</name><argument_list pos:start="89:45" pos:end="89:80">(<argument pos:start="89:46" pos:end="89:54"><expr pos:start="89:46" pos:end="89:54"><operator pos:start="89:46" pos:end="89:46">&amp;</operator><name pos:start="89:47" pos:end="89:54"><name pos:start="89:47" pos:end="89:50">priv</name><operator pos:start="89:51" pos:end="89:52">-&gt;</operator><name pos:start="89:53" pos:end="89:54">vp</name></name></expr></argument>, <argument pos:start="89:57" pos:end="89:76"><expr pos:start="89:57" pos:end="89:76"><name pos:start="89:57" pos:end="89:63"><name pos:start="89:57" pos:end="89:58">os</name><operator pos:start="89:59" pos:end="89:60">-&gt;</operator><name pos:start="89:61" pos:end="89:63">buf</name></name> <operator pos:start="89:65" pos:end="89:65">+</operator> <name pos:start="89:67" pos:end="89:76"><name pos:start="89:67" pos:end="89:68">os</name><operator pos:start="89:69" pos:end="89:70">-&gt;</operator><name pos:start="89:71" pos:end="89:76">pstart</name></name></expr></argument>, <argument pos:start="89:79" pos:end="89:79"><expr pos:start="89:79" pos:end="89:79"><literal type="number" pos:start="89:79" pos:end="89:79">1</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <if_stmt pos:start="91:9" pos:end="97:9"><if pos:start="91:9" pos:end="97:9">if <condition pos:start="91:12" pos:end="91:26">(<expr pos:start="91:13" pos:end="91:25"><name pos:start="91:13" pos:end="91:20">duration</name> <operator pos:start="91:22" pos:end="91:23">&lt;=</operator> <literal type="number" pos:start="91:25" pos:end="91:25">0</literal></expr>)</condition> <block pos:start="91:28" pos:end="97:9">{<block_content pos:start="93:13" pos:end="95:21">

            <expr_stmt pos:start="93:13" pos:end="93:46"><expr pos:start="93:13" pos:end="93:45"><name pos:start="93:13" pos:end="93:22"><name pos:start="93:13" pos:end="93:14">os</name><operator pos:start="93:15" pos:end="93:16">-&gt;</operator><name pos:start="93:17" pos:end="93:22">pflags</name></name> <operator pos:start="93:24" pos:end="93:25">|=</operator> <name pos:start="93:27" pos:end="93:45">AV_PKT_FLAG_CORRUPT</name></expr>;</expr_stmt>

            <return pos:start="95:13" pos:end="95:21">return <expr pos:start="95:20" pos:end="95:20"><literal type="number" pos:start="95:20" pos:end="95:20">0</literal></expr>;</return>

        </block_content>}</block></if></if_stmt>

        <expr_stmt pos:start="99:9" pos:end="99:33"><expr pos:start="99:9" pos:end="99:32"><name pos:start="99:9" pos:end="99:21"><name pos:start="99:9" pos:end="99:10">os</name><operator pos:start="99:11" pos:end="99:12">-&gt;</operator><name pos:start="99:13" pos:end="99:21">pduration</name></name> <operator pos:start="99:23" pos:end="99:23">=</operator> <name pos:start="99:25" pos:end="99:32">duration</name></expr>;</expr_stmt>

    </block_content>}</block></if></if_stmt>



    <comment type="block" pos:start="105:5" pos:end="111:70">/* final packet handling

       here we save the pts of the first packet in the final page, sum up all

       packet durations in the final page except for the last one, and compare

       to the page granule to find the duration of the final packet */</comment>

    <if_stmt pos:start="113:5" pos:end="129:5"><if pos:start="113:5" pos:end="129:5">if <condition pos:start="113:8" pos:end="113:33">(<expr pos:start="113:9" pos:end="113:32"><name pos:start="113:9" pos:end="113:17"><name pos:start="113:9" pos:end="113:10">os</name><operator pos:start="113:11" pos:end="113:12">-&gt;</operator><name pos:start="113:13" pos:end="113:17">flags</name></name> <operator pos:start="113:19" pos:end="113:19">&amp;</operator> <name pos:start="113:21" pos:end="113:32">OGG_FLAG_EOS</name></expr>)</condition> <block pos:start="113:35" pos:end="129:5">{<block_content pos:start="115:9" pos:end="127:46">

        <if_stmt pos:start="115:9" pos:end="121:9"><if pos:start="115:9" pos:end="121:9">if <condition pos:start="115:12" pos:end="115:42">(<expr pos:start="115:13" pos:end="115:41"><name pos:start="115:13" pos:end="115:23"><name pos:start="115:13" pos:end="115:14">os</name><operator pos:start="115:15" pos:end="115:16">-&gt;</operator><name pos:start="115:17" pos:end="115:23">lastpts</name></name> <operator pos:start="115:25" pos:end="115:26">!=</operator> <name pos:start="115:28" pos:end="115:41">AV_NOPTS_VALUE</name></expr>)</condition> <block pos:start="115:44" pos:end="121:9">{<block_content pos:start="117:13" pos:end="119:37">

            <expr_stmt pos:start="117:13" pos:end="117:42"><expr pos:start="117:13" pos:end="117:41"><name pos:start="117:13" pos:end="117:27"><name pos:start="117:13" pos:end="117:16">priv</name><operator pos:start="117:17" pos:end="117:18">-&gt;</operator><name pos:start="117:19" pos:end="117:27">final_pts</name></name> <operator pos:start="117:29" pos:end="117:29">=</operator> <name pos:start="117:31" pos:end="117:41"><name pos:start="117:31" pos:end="117:32">os</name><operator pos:start="117:33" pos:end="117:34">-&gt;</operator><name pos:start="117:35" pos:end="117:41">lastpts</name></name></expr>;</expr_stmt>

            <expr_stmt pos:start="119:13" pos:end="119:37"><expr pos:start="119:13" pos:end="119:36"><name pos:start="119:13" pos:end="119:32"><name pos:start="119:13" pos:end="119:16">priv</name><operator pos:start="119:17" pos:end="119:18">-&gt;</operator><name pos:start="119:19" pos:end="119:32">final_duration</name></name> <operator pos:start="119:34" pos:end="119:34">=</operator> <literal type="number" pos:start="119:36" pos:end="119:36">0</literal></expr>;</expr_stmt>

        </block_content>}</block></if></if_stmt>

        <if_stmt pos:start="123:9" pos:end="125:81"><if pos:start="123:9" pos:end="125:81">if <condition pos:start="123:12" pos:end="123:34">(<expr pos:start="123:13" pos:end="123:33"><name pos:start="123:13" pos:end="123:20"><name pos:start="123:13" pos:end="123:14">os</name><operator pos:start="123:15" pos:end="123:16">-&gt;</operator><name pos:start="123:17" pos:end="123:20">segp</name></name> <operator pos:start="123:22" pos:end="123:23">==</operator> <name pos:start="123:25" pos:end="123:33"><name pos:start="123:25" pos:end="123:26">os</name><operator pos:start="123:27" pos:end="123:28">-&gt;</operator><name pos:start="123:29" pos:end="123:33">nsegs</name></name></expr>)</condition><block type="pseudo" pos:start="125:13" pos:end="125:81"><block_content pos:start="125:13" pos:end="125:81">

            <expr_stmt pos:start="125:13" pos:end="125:81"><expr pos:start="125:13" pos:end="125:80"><name pos:start="125:13" pos:end="125:25"><name pos:start="125:13" pos:end="125:14">os</name><operator pos:start="125:15" pos:end="125:16">-&gt;</operator><name pos:start="125:17" pos:end="125:25">pduration</name></name> <operator pos:start="125:27" pos:end="125:27">=</operator> <name pos:start="125:29" pos:end="125:39"><name pos:start="125:29" pos:end="125:30">os</name><operator pos:start="125:31" pos:end="125:32">-&gt;</operator><name pos:start="125:33" pos:end="125:39">granule</name></name> <operator pos:start="125:41" pos:end="125:41">-</operator> <name pos:start="125:43" pos:end="125:57"><name pos:start="125:43" pos:end="125:46">priv</name><operator pos:start="125:47" pos:end="125:48">-&gt;</operator><name pos:start="125:49" pos:end="125:57">final_pts</name></name> <operator pos:start="125:59" pos:end="125:59">-</operator> <name pos:start="125:61" pos:end="125:80"><name pos:start="125:61" pos:end="125:64">priv</name><operator pos:start="125:65" pos:end="125:66">-&gt;</operator><name pos:start="125:67" pos:end="125:80">final_duration</name></name></expr>;</expr_stmt></block_content></block></if></if_stmt>

        <expr_stmt pos:start="127:9" pos:end="127:46"><expr pos:start="127:9" pos:end="127:45"><name pos:start="127:9" pos:end="127:28"><name pos:start="127:9" pos:end="127:12">priv</name><operator pos:start="127:13" pos:end="127:14">-&gt;</operator><name pos:start="127:15" pos:end="127:28">final_duration</name></name> <operator pos:start="127:30" pos:end="127:31">+=</operator> <name pos:start="127:33" pos:end="127:45"><name pos:start="127:33" pos:end="127:34">os</name><operator pos:start="127:35" pos:end="127:36">-&gt;</operator><name pos:start="127:37" pos:end="127:45">pduration</name></name></expr>;</expr_stmt>

    </block_content>}</block></if></if_stmt>



    <return pos:start="133:5" pos:end="133:13">return <expr pos:start="133:12" pos:end="133:12"><literal type="number" pos:start="133:12" pos:end="133:12">0</literal></expr>;</return>

</block_content>}</block></function>
</unit>
