<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<unit xmlns="http://www.srcML.org/srcML/src" xmlns:pos="http://www.srcML.org/srcML/position" revision="1.0.0" language="C" filename="dataset/ropgen/aug/1/12263.c" pos:tabs="8"><function pos:start="1:1" pos:end="331:1"><type pos:start="1:1" pos:end="1:11"><specifier pos:start="1:1" pos:end="1:6">static</specifier> <name pos:start="1:8" pos:end="1:11">void</name></type> <name pos:start="1:13" pos:end="1:32">select_input_picture</name><parameter_list pos:start="1:33" pos:end="1:51">(<parameter pos:start="1:34" pos:end="1:50"><decl pos:start="1:34" pos:end="1:50"><type pos:start="1:34" pos:end="1:49"><name pos:start="1:34" pos:end="1:47">MpegEncContext</name> <modifier pos:start="1:49" pos:end="1:49">*</modifier></type><name pos:start="1:50" pos:end="1:50">s</name></decl></parameter>)</parameter_list><block pos:start="1:52" pos:end="331:1">{<block_content pos:start="3:5" pos:end="329:5">

    <decl_stmt pos:start="3:5" pos:end="3:10"><decl pos:start="3:5" pos:end="3:9"><type pos:start="3:5" pos:end="3:7"><name pos:start="3:5" pos:end="3:7">int</name></type> <name pos:start="3:9" pos:end="3:9">i</name></decl>;</decl_stmt>



    <for pos:start="7:5" pos:end="9:71">for<control pos:start="7:8" pos:end="7:38">(<init pos:start="7:9" pos:end="7:12"><expr pos:start="7:9" pos:end="7:11"><name pos:start="7:9" pos:end="7:9">i</name><operator pos:start="7:10" pos:end="7:10">=</operator><literal type="number" pos:start="7:11" pos:end="7:11">1</literal></expr>;</init> <condition pos:start="7:14" pos:end="7:33"><expr pos:start="7:14" pos:end="7:32"><name pos:start="7:14" pos:end="7:14">i</name><operator pos:start="7:15" pos:end="7:15">&lt;</operator><name pos:start="7:16" pos:end="7:32">MAX_PICTURE_COUNT</name></expr>;</condition> <incr pos:start="7:35" pos:end="7:37"><expr pos:start="7:35" pos:end="7:37"><name pos:start="7:35" pos:end="7:35">i</name><operator pos:start="7:36" pos:end="7:37">++</operator></expr></incr>)</control><block type="pseudo" pos:start="9:9" pos:end="9:71"><block_content pos:start="9:9" pos:end="9:71">

        <expr_stmt pos:start="9:9" pos:end="9:71"><expr pos:start="9:9" pos:end="9:70"><name pos:start="9:9" pos:end="9:39"><name pos:start="9:9" pos:end="9:9">s</name><operator pos:start="9:10" pos:end="9:11">-&gt;</operator><name pos:start="9:12" pos:end="9:34">reordered_input_picture</name><index pos:start="9:35" pos:end="9:39">[<expr pos:start="9:36" pos:end="9:38"><name pos:start="9:36" pos:end="9:36">i</name><operator pos:start="9:37" pos:end="9:37">-</operator><literal type="number" pos:start="9:38" pos:end="9:38">1</literal></expr>]</index></name><operator pos:start="9:40" pos:end="9:40">=</operator> <name pos:start="9:42" pos:end="9:70"><name pos:start="9:42" pos:end="9:42">s</name><operator pos:start="9:43" pos:end="9:44">-&gt;</operator><name pos:start="9:45" pos:end="9:67">reordered_input_picture</name><index pos:start="9:68" pos:end="9:70">[<expr pos:start="9:69" pos:end="9:69"><name pos:start="9:69" pos:end="9:69">i</name></expr>]</index></name></expr>;</expr_stmt></block_content></block></for>

    <expr_stmt pos:start="11:5" pos:end="11:58"><expr pos:start="11:5" pos:end="11:57"><name pos:start="11:5" pos:end="11:51"><name pos:start="11:5" pos:end="11:5">s</name><operator pos:start="11:6" pos:end="11:7">-&gt;</operator><name pos:start="11:8" pos:end="11:30">reordered_input_picture</name><index pos:start="11:31" pos:end="11:51">[<expr pos:start="11:32" pos:end="11:50"><name pos:start="11:32" pos:end="11:48">MAX_PICTURE_COUNT</name><operator pos:start="11:49" pos:end="11:49">-</operator><literal type="number" pos:start="11:50" pos:end="11:50">1</literal></expr>]</index></name><operator pos:start="11:52" pos:end="11:52">=</operator> <name pos:start="11:54" pos:end="11:57">NULL</name></expr>;</expr_stmt>



    <comment type="block" pos:start="15:5" pos:end="15:42">/* set next picture type &amp; ordering */</comment>

    <if_stmt pos:start="17:5" pos:end="245:5"><if pos:start="17:5" pos:end="245:5">if<condition pos:start="17:7" pos:end="17:66">(<expr pos:start="17:8" pos:end="17:65"><name pos:start="17:8" pos:end="17:36"><name pos:start="17:8" pos:end="17:8">s</name><operator pos:start="17:9" pos:end="17:10">-&gt;</operator><name pos:start="17:11" pos:end="17:33">reordered_input_picture</name><index pos:start="17:34" pos:end="17:36">[<expr pos:start="17:35" pos:end="17:35"><literal type="number" pos:start="17:35" pos:end="17:35">0</literal></expr>]</index></name><operator pos:start="17:37" pos:end="17:38">==</operator><name pos:start="17:39" pos:end="17:42">NULL</name> <operator pos:start="17:44" pos:end="17:45">&amp;&amp;</operator> <name pos:start="17:47" pos:end="17:65"><name pos:start="17:47" pos:end="17:47">s</name><operator pos:start="17:48" pos:end="17:49">-&gt;</operator><name pos:start="17:50" pos:end="17:62">input_picture</name><index pos:start="17:63" pos:end="17:65">[<expr pos:start="17:64" pos:end="17:64"><literal type="number" pos:start="17:64" pos:end="17:64">0</literal></expr>]</index></name></expr>)</condition><block pos:start="17:67" pos:end="245:5">{<block_content pos:start="19:9" pos:end="243:9">

        <if_stmt pos:start="19:9" pos:end="243:9"><if pos:start="19:9" pos:end="27:9">if<condition pos:start="19:11" pos:end="19:101">(<comment type="block" pos:start="19:12" pos:end="19:57">/*s-&gt;picture_in_gop_number &gt;= s-&gt;gop_size ||*/</comment> <expr pos:start="19:59" pos:end="19:100"><name pos:start="19:59" pos:end="19:77"><name pos:start="19:59" pos:end="19:59">s</name><operator pos:start="19:60" pos:end="19:61">-&gt;</operator><name pos:start="19:62" pos:end="19:77">next_picture_ptr</name></name><operator pos:start="19:78" pos:end="19:79">==</operator><name pos:start="19:80" pos:end="19:83">NULL</name> <operator pos:start="19:85" pos:end="19:86">||</operator> <name pos:start="19:88" pos:end="19:100"><name pos:start="19:88" pos:end="19:88">s</name><operator pos:start="19:89" pos:end="19:90">-&gt;</operator><name pos:start="19:91" pos:end="19:100">intra_only</name></name></expr>)</condition><block pos:start="19:102" pos:end="27:9">{<block_content pos:start="21:13" pos:end="25:91">

            <expr_stmt pos:start="21:13" pos:end="21:63"><expr pos:start="21:13" pos:end="21:62"><name pos:start="21:13" pos:end="21:41"><name pos:start="21:13" pos:end="21:13">s</name><operator pos:start="21:14" pos:end="21:15">-&gt;</operator><name pos:start="21:16" pos:end="21:38">reordered_input_picture</name><index pos:start="21:39" pos:end="21:41">[<expr pos:start="21:40" pos:end="21:40"><literal type="number" pos:start="21:40" pos:end="21:40">0</literal></expr>]</index></name><operator pos:start="21:42" pos:end="21:42">=</operator> <name pos:start="21:44" pos:end="21:62"><name pos:start="21:44" pos:end="21:44">s</name><operator pos:start="21:45" pos:end="21:46">-&gt;</operator><name pos:start="21:47" pos:end="21:59">input_picture</name><index pos:start="21:60" pos:end="21:62">[<expr pos:start="21:61" pos:end="21:61"><literal type="number" pos:start="21:61" pos:end="21:61">0</literal></expr>]</index></name></expr>;</expr_stmt>

            <expr_stmt pos:start="23:13" pos:end="23:61"><expr pos:start="23:13" pos:end="23:60"><name pos:start="23:13" pos:end="23:41"><name pos:start="23:13" pos:end="23:13">s</name><operator pos:start="23:14" pos:end="23:15">-&gt;</operator><name pos:start="23:16" pos:end="23:38">reordered_input_picture</name><index pos:start="23:39" pos:end="23:41">[<expr pos:start="23:40" pos:end="23:40"><literal type="number" pos:start="23:40" pos:end="23:40">0</literal></expr>]</index></name><operator pos:start="23:42" pos:end="23:43">-&gt;</operator><name pos:start="23:44" pos:end="23:52">pict_type</name><operator pos:start="23:53" pos:end="23:53">=</operator> <name pos:start="23:55" pos:end="23:60">I_TYPE</name></expr>;</expr_stmt>

            <expr_stmt pos:start="25:13" pos:end="25:91"><expr pos:start="25:13" pos:end="25:90"><name pos:start="25:13" pos:end="25:41"><name pos:start="25:13" pos:end="25:13">s</name><operator pos:start="25:14" pos:end="25:15">-&gt;</operator><name pos:start="25:16" pos:end="25:38">reordered_input_picture</name><index pos:start="25:39" pos:end="25:41">[<expr pos:start="25:40" pos:end="25:40"><literal type="number" pos:start="25:40" pos:end="25:40">0</literal></expr>]</index></name><operator pos:start="25:42" pos:end="25:43">-&gt;</operator><name pos:start="25:44" pos:end="25:63">coded_picture_number</name><operator pos:start="25:64" pos:end="25:64">=</operator> <name pos:start="25:66" pos:end="25:88"><name pos:start="25:66" pos:end="25:66">s</name><operator pos:start="25:67" pos:end="25:68">-&gt;</operator><name pos:start="25:69" pos:end="25:88">coded_picture_number</name></name><operator pos:start="25:89" pos:end="25:90">++</operator></expr>;</expr_stmt>

        </block_content>}</block></if><else pos:start="27:10" pos:end="243:9">else<block pos:start="27:14" pos:end="243:9">{<block_content pos:start="29:13" pos:end="241:13">

            <decl_stmt pos:start="29:13" pos:end="29:25"><decl pos:start="29:13" pos:end="29:24"><type pos:start="29:13" pos:end="29:15"><name pos:start="29:13" pos:end="29:15">int</name></type> <name pos:start="29:17" pos:end="29:24">b_frames</name></decl>;</decl_stmt>



            <if_stmt pos:start="33:13" pos:end="75:13"><if pos:start="33:13" pos:end="75:13">if<condition pos:start="33:15" pos:end="33:77">(<expr pos:start="33:16" pos:end="33:76"><name pos:start="33:16" pos:end="33:45"><name pos:start="33:16" pos:end="33:16">s</name><operator pos:start="33:17" pos:end="33:18">-&gt;</operator><name pos:start="33:19" pos:end="33:23">avctx</name><operator pos:start="33:24" pos:end="33:25">-&gt;</operator><name pos:start="33:26" pos:end="33:45">frame_skip_threshold</name></name> <operator pos:start="33:47" pos:end="33:48">||</operator> <name pos:start="33:50" pos:end="33:76"><name pos:start="33:50" pos:end="33:50">s</name><operator pos:start="33:51" pos:end="33:52">-&gt;</operator><name pos:start="33:53" pos:end="33:57">avctx</name><operator pos:start="33:58" pos:end="33:59">-&gt;</operator><name pos:start="33:60" pos:end="33:76">frame_skip_factor</name></name></expr>)</condition><block pos:start="33:78" pos:end="75:13">{<block_content pos:start="35:17" pos:end="73:17">

                <if_stmt pos:start="35:17" pos:end="73:17"><if pos:start="35:17" pos:end="73:17">if<condition pos:start="35:19" pos:end="35:117">(<expr pos:start="35:20" pos:end="35:116"><name pos:start="35:20" pos:end="35:43"><name pos:start="35:20" pos:end="35:20">s</name><operator pos:start="35:21" pos:end="35:22">-&gt;</operator><name pos:start="35:23" pos:end="35:43">picture_in_gop_number</name></name> <operator pos:start="35:45" pos:end="35:45">&lt;</operator> <name pos:start="35:47" pos:end="35:57"><name pos:start="35:47" pos:end="35:47">s</name><operator pos:start="35:48" pos:end="35:49">-&gt;</operator><name pos:start="35:50" pos:end="35:57">gop_size</name></name> <operator pos:start="35:59" pos:end="35:60">&amp;&amp;</operator> <call pos:start="35:62" pos:end="35:116"><name pos:start="35:62" pos:end="35:71">skip_check</name><argument_list pos:start="35:72" pos:end="35:116">(<argument pos:start="35:73" pos:end="35:73"><expr pos:start="35:73" pos:end="35:73"><name pos:start="35:73" pos:end="35:73">s</name></expr></argument>, <argument pos:start="35:76" pos:end="35:94"><expr pos:start="35:76" pos:end="35:94"><name pos:start="35:76" pos:end="35:94"><name pos:start="35:76" pos:end="35:76">s</name><operator pos:start="35:77" pos:end="35:78">-&gt;</operator><name pos:start="35:79" pos:end="35:91">input_picture</name><index pos:start="35:92" pos:end="35:94">[<expr pos:start="35:93" pos:end="35:93"><literal type="number" pos:start="35:93" pos:end="35:93">0</literal></expr>]</index></name></expr></argument>, <argument pos:start="35:97" pos:end="35:115"><expr pos:start="35:97" pos:end="35:115"><name pos:start="35:97" pos:end="35:115"><name pos:start="35:97" pos:end="35:97">s</name><operator pos:start="35:98" pos:end="35:99">-&gt;</operator><name pos:start="35:100" pos:end="35:115">next_picture_ptr</name></name></expr></argument>)</argument_list></call></expr>)</condition><block pos:start="35:118" pos:end="73:17">{<block_content pos:start="43:21" pos:end="71:39">

                <comment type="line" pos:start="37:17" pos:end="37:68">//FIXME check that te gop check above is +-1 correct</comment>

<comment type="line" pos:start="39:1" pos:end="39:102">//av_log(NULL, AV_LOG_DEBUG, "skip %p %Ld\n", s-&gt;input_picture[0]-&gt;data[0], s-&gt;input_picture[0]-&gt;pts);</comment>



                    <if_stmt pos:start="43:21" pos:end="61:21"><if pos:start="43:21" pos:end="51:21">if<condition pos:start="43:23" pos:end="43:74">(<expr pos:start="43:24" pos:end="43:73"><name pos:start="43:24" pos:end="43:42"><name pos:start="43:24" pos:end="43:24">s</name><operator pos:start="43:25" pos:end="43:26">-&gt;</operator><name pos:start="43:27" pos:end="43:39">input_picture</name><index pos:start="43:40" pos:end="43:42">[<expr pos:start="43:41" pos:end="43:41"><literal type="number" pos:start="43:41" pos:end="43:41">0</literal></expr>]</index></name><operator pos:start="43:43" pos:end="43:44">-&gt;</operator><name pos:start="43:45" pos:end="43:48">type</name> <operator pos:start="43:50" pos:end="43:51">==</operator> <name pos:start="43:53" pos:end="43:73">FF_BUFFER_TYPE_SHARED</name></expr>)</condition><block pos:start="43:75" pos:end="51:21">{<block_content pos:start="45:25" pos:end="49:53">

                        <for pos:start="45:25" pos:end="47:63">for<control pos:start="45:28" pos:end="45:42">(<init pos:start="45:29" pos:end="45:32"><expr pos:start="45:29" pos:end="45:31"><name pos:start="45:29" pos:end="45:29">i</name><operator pos:start="45:30" pos:end="45:30">=</operator><literal type="number" pos:start="45:31" pos:end="45:31">0</literal></expr>;</init> <condition pos:start="45:34" pos:end="45:37"><expr pos:start="45:34" pos:end="45:36"><name pos:start="45:34" pos:end="45:34">i</name><operator pos:start="45:35" pos:end="45:35">&lt;</operator><literal type="number" pos:start="45:36" pos:end="45:36">4</literal></expr>;</condition> <incr pos:start="45:39" pos:end="45:41"><expr pos:start="45:39" pos:end="45:41"><name pos:start="45:39" pos:end="45:39">i</name><operator pos:start="45:40" pos:end="45:41">++</operator></expr></incr>)</control><block type="pseudo" pos:start="47:29" pos:end="47:63"><block_content pos:start="47:29" pos:end="47:63">

                            <expr_stmt pos:start="47:29" pos:end="47:63"><expr pos:start="47:29" pos:end="47:62"><name pos:start="47:29" pos:end="47:47"><name pos:start="47:29" pos:end="47:29">s</name><operator pos:start="47:30" pos:end="47:31">-&gt;</operator><name pos:start="47:32" pos:end="47:44">input_picture</name><index pos:start="47:45" pos:end="47:47">[<expr pos:start="47:46" pos:end="47:46"><literal type="number" pos:start="47:46" pos:end="47:46">0</literal></expr>]</index></name><operator pos:start="47:48" pos:end="47:49">-&gt;</operator><name pos:start="47:50" pos:end="47:56"><name pos:start="47:50" pos:end="47:53">data</name><index pos:start="47:54" pos:end="47:56">[<expr pos:start="47:55" pos:end="47:55"><name pos:start="47:55" pos:end="47:55">i</name></expr>]</index></name><operator pos:start="47:57" pos:end="47:57">=</operator> <name pos:start="47:59" pos:end="47:62">NULL</name></expr>;</expr_stmt></block_content></block></for>

                        <expr_stmt pos:start="49:25" pos:end="49:53"><expr pos:start="49:25" pos:end="49:52"><name pos:start="49:25" pos:end="49:43"><name pos:start="49:25" pos:end="49:25">s</name><operator pos:start="49:26" pos:end="49:27">-&gt;</operator><name pos:start="49:28" pos:end="49:40">input_picture</name><index pos:start="49:41" pos:end="49:43">[<expr pos:start="49:42" pos:end="49:42"><literal type="number" pos:start="49:42" pos:end="49:42">0</literal></expr>]</index></name><operator pos:start="49:44" pos:end="49:45">-&gt;</operator><name pos:start="49:46" pos:end="49:49">type</name><operator pos:start="49:50" pos:end="49:50">=</operator> <literal type="number" pos:start="49:52" pos:end="49:52">0</literal></expr>;</expr_stmt>

                    </block_content>}</block></if><else pos:start="51:22" pos:end="61:21">else<block pos:start="51:26" pos:end="61:21">{<block_content pos:start="53:25" pos:end="59:90">

                        <expr_stmt pos:start="53:25" pos:end="55:86"><expr pos:start="53:25" pos:end="55:85"><call pos:start="53:25" pos:end="55:85"><name pos:start="53:25" pos:end="53:30">assert</name><argument_list pos:start="53:31" pos:end="55:85">(   <argument pos:start="53:35" pos:end="55:84"><expr pos:start="53:35" pos:end="55:84"><name pos:start="53:35" pos:end="53:53"><name pos:start="53:35" pos:end="53:35">s</name><operator pos:start="53:36" pos:end="53:37">-&gt;</operator><name pos:start="53:38" pos:end="53:50">input_picture</name><index pos:start="53:51" pos:end="53:53">[<expr pos:start="53:52" pos:end="53:52"><literal type="number" pos:start="53:52" pos:end="53:52">0</literal></expr>]</index></name><operator pos:start="53:54" pos:end="53:55">-&gt;</operator><name pos:start="53:56" pos:end="53:59">type</name><operator pos:start="53:60" pos:end="53:61">==</operator><name pos:start="53:62" pos:end="53:80">FF_BUFFER_TYPE_USER</name>

                               <operator pos:start="55:32" pos:end="55:33">||</operator> <name pos:start="55:35" pos:end="55:53"><name pos:start="55:35" pos:end="55:35">s</name><operator pos:start="55:36" pos:end="55:37">-&gt;</operator><name pos:start="55:38" pos:end="55:50">input_picture</name><index pos:start="55:51" pos:end="55:53">[<expr pos:start="55:52" pos:end="55:52"><literal type="number" pos:start="55:52" pos:end="55:52">0</literal></expr>]</index></name><operator pos:start="55:54" pos:end="55:55">-&gt;</operator><name pos:start="55:56" pos:end="55:59">type</name><operator pos:start="55:60" pos:end="55:61">==</operator><name pos:start="55:62" pos:end="55:84">FF_BUFFER_TYPE_INTERNAL</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>



                        <expr_stmt pos:start="59:25" pos:end="59:90"><expr pos:start="59:25" pos:end="59:89"><call pos:start="59:25" pos:end="59:89"><name pos:start="59:25" pos:end="59:48"><name pos:start="59:25" pos:end="59:25">s</name><operator pos:start="59:26" pos:end="59:27">-&gt;</operator><name pos:start="59:28" pos:end="59:32">avctx</name><operator pos:start="59:33" pos:end="59:34">-&gt;</operator><name pos:start="59:35" pos:end="59:48">release_buffer</name></name><argument_list pos:start="59:49" pos:end="59:89">(<argument pos:start="59:50" pos:end="59:57"><expr pos:start="59:50" pos:end="59:57"><name pos:start="59:50" pos:end="59:57"><name pos:start="59:50" pos:end="59:50">s</name><operator pos:start="59:51" pos:end="59:52">-&gt;</operator><name pos:start="59:53" pos:end="59:57">avctx</name></name></expr></argument>, <argument pos:start="59:60" pos:end="59:88"><expr pos:start="59:60" pos:end="59:88"><operator pos:start="59:60" pos:end="59:60">(</operator><name pos:start="59:61" pos:end="59:67">AVFrame</name><operator pos:start="59:68" pos:end="59:68">*</operator><operator pos:start="59:69" pos:end="59:69">)</operator><name pos:start="59:70" pos:end="59:88"><name pos:start="59:70" pos:end="59:70">s</name><operator pos:start="59:71" pos:end="59:72">-&gt;</operator><name pos:start="59:73" pos:end="59:85">input_picture</name><index pos:start="59:86" pos:end="59:88">[<expr pos:start="59:87" pos:end="59:87"><literal type="number" pos:start="59:87" pos:end="59:87">0</literal></expr>]</index></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

                    </block_content>}</block></else></if_stmt>



                    <expr_stmt pos:start="65:21" pos:end="65:29"><expr pos:start="65:21" pos:end="65:28"><call pos:start="65:21" pos:end="65:28"><name pos:start="65:21" pos:end="65:26">emms_c</name><argument_list pos:start="65:27" pos:end="65:28">()</argument_list></call></expr>;</expr_stmt>

                    <expr_stmt pos:start="67:21" pos:end="67:40"><expr pos:start="67:21" pos:end="67:39"><call pos:start="67:21" pos:end="67:39"><name pos:start="67:21" pos:end="67:33">ff_vbv_update</name><argument_list pos:start="67:34" pos:end="67:39">(<argument pos:start="67:35" pos:end="67:35"><expr pos:start="67:35" pos:end="67:35"><name pos:start="67:35" pos:end="67:35">s</name></expr></argument>, <argument pos:start="67:38" pos:end="67:38"><expr pos:start="67:38" pos:end="67:38"><literal type="number" pos:start="67:38" pos:end="67:38">0</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>



                    <goto pos:start="71:21" pos:end="71:39">goto <name pos:start="71:26" pos:end="71:38">no_output_pic</name>;</goto>

                </block_content>}</block></if></if_stmt>

            </block_content>}</block></if></if_stmt>



            <if_stmt pos:start="79:13" pos:end="107:13"><if pos:start="79:13" pos:end="107:13">if<condition pos:start="79:15" pos:end="79:41">(<expr pos:start="79:16" pos:end="79:40"><name pos:start="79:16" pos:end="79:23"><name pos:start="79:16" pos:end="79:16">s</name><operator pos:start="79:17" pos:end="79:18">-&gt;</operator><name pos:start="79:19" pos:end="79:23">flags</name></name><operator pos:start="79:24" pos:end="79:24">&amp;</operator><name pos:start="79:25" pos:end="79:40">CODEC_FLAG_PASS2</name></expr>)</condition><block pos:start="79:42" pos:end="107:13">{<block_content pos:start="81:17" pos:end="105:17">

                <for pos:start="81:17" pos:end="105:17">for<control pos:start="81:20" pos:end="81:50">(<init pos:start="81:21" pos:end="81:24"><expr pos:start="81:21" pos:end="81:23"><name pos:start="81:21" pos:end="81:21">i</name><operator pos:start="81:22" pos:end="81:22">=</operator><literal type="number" pos:start="81:23" pos:end="81:23">0</literal></expr>;</init> <condition pos:start="81:26" pos:end="81:45"><expr pos:start="81:26" pos:end="81:44"><name pos:start="81:26" pos:end="81:26">i</name><operator pos:start="81:27" pos:end="81:27">&lt;</operator><name pos:start="81:28" pos:end="81:42"><name pos:start="81:28" pos:end="81:28">s</name><operator pos:start="81:29" pos:end="81:30">-&gt;</operator><name pos:start="81:31" pos:end="81:42">max_b_frames</name></name><operator pos:start="81:43" pos:end="81:43">+</operator><literal type="number" pos:start="81:44" pos:end="81:44">1</literal></expr>;</condition> <incr pos:start="81:47" pos:end="81:49"><expr pos:start="81:47" pos:end="81:49"><name pos:start="81:47" pos:end="81:47">i</name><operator pos:start="81:48" pos:end="81:49">++</operator></expr></incr>)</control><block pos:start="81:51" pos:end="105:17">{<block_content pos:start="83:21" pos:end="103:68">

                    <decl_stmt pos:start="83:21" pos:end="83:82"><decl pos:start="83:21" pos:end="83:81"><type pos:start="83:21" pos:end="83:23"><name pos:start="83:21" pos:end="83:23">int</name></type> <name pos:start="83:25" pos:end="83:32">pict_num</name><init pos:start="83:33" pos:end="83:81">= <expr pos:start="83:35" pos:end="83:81"><name pos:start="83:35" pos:end="83:53"><name pos:start="83:35" pos:end="83:35">s</name><operator pos:start="83:36" pos:end="83:37">-&gt;</operator><name pos:start="83:38" pos:end="83:50">input_picture</name><index pos:start="83:51" pos:end="83:53">[<expr pos:start="83:52" pos:end="83:52"><literal type="number" pos:start="83:52" pos:end="83:52">0</literal></expr>]</index></name><operator pos:start="83:54" pos:end="83:55">-&gt;</operator><name pos:start="83:56" pos:end="83:77">display_picture_number</name> <operator pos:start="83:79" pos:end="83:79">+</operator> <name pos:start="83:81" pos:end="83:81">i</name></expr></init></decl>;</decl_stmt>



                    <if_stmt pos:start="87:21" pos:end="89:30"><if pos:start="87:21" pos:end="89:30">if<condition pos:start="87:23" pos:end="87:61">(<expr pos:start="87:24" pos:end="87:60"><name pos:start="87:24" pos:end="87:31">pict_num</name> <operator pos:start="87:33" pos:end="87:34">&gt;=</operator> <name pos:start="87:36" pos:end="87:60"><name pos:start="87:36" pos:end="87:36">s</name><operator pos:start="87:37" pos:end="87:38">-&gt;</operator><name pos:start="87:39" pos:end="87:48">rc_context</name><operator pos:start="87:49" pos:end="87:49">.</operator><name pos:start="87:50" pos:end="87:60">num_entries</name></name></expr>)</condition><block type="pseudo" pos:start="89:25" pos:end="89:30"><block_content pos:start="89:25" pos:end="89:30">

                        <break pos:start="89:25" pos:end="89:30">break;</break></block_content></block></if></if_stmt>

                    <if_stmt pos:start="91:21" pos:end="97:21"><if pos:start="91:21" pos:end="97:21">if<condition pos:start="91:23" pos:end="91:44">(<expr pos:start="91:24" pos:end="91:43"><operator pos:start="91:24" pos:end="91:24">!</operator><name pos:start="91:25" pos:end="91:43"><name pos:start="91:25" pos:end="91:25">s</name><operator pos:start="91:26" pos:end="91:27">-&gt;</operator><name pos:start="91:28" pos:end="91:40">input_picture</name><index pos:start="91:41" pos:end="91:43">[<expr pos:start="91:42" pos:end="91:42"><name pos:start="91:42" pos:end="91:42">i</name></expr>]</index></name></expr>)</condition><block pos:start="91:45" pos:end="97:21">{<block_content pos:start="93:25" pos:end="95:30">

                        <expr_stmt pos:start="93:25" pos:end="93:79"><expr pos:start="93:25" pos:end="93:78"><name pos:start="93:25" pos:end="93:55"><name pos:start="93:25" pos:end="93:25">s</name><operator pos:start="93:26" pos:end="93:27">-&gt;</operator><name pos:start="93:28" pos:end="93:37">rc_context</name><operator pos:start="93:38" pos:end="93:38">.</operator><name pos:start="93:39" pos:end="93:43">entry</name><index pos:start="93:44" pos:end="93:55">[<expr pos:start="93:45" pos:end="93:54"><name pos:start="93:45" pos:end="93:52">pict_num</name><operator pos:start="93:53" pos:end="93:53">-</operator><literal type="number" pos:start="93:54" pos:end="93:54">1</literal></expr>]</index></name><operator pos:start="93:56" pos:end="93:56">.</operator><name pos:start="93:57" pos:end="93:69">new_pict_type</name> <operator pos:start="93:71" pos:end="93:71">=</operator> <name pos:start="93:73" pos:end="93:78">P_TYPE</name></expr>;</expr_stmt>

                        <break pos:start="95:25" pos:end="95:30">break;</break>

                    </block_content>}</block></if></if_stmt>



                    <expr_stmt pos:start="101:21" pos:end="103:68"><expr pos:start="101:21" pos:end="103:67"><name pos:start="101:21" pos:end="101:39"><name pos:start="101:21" pos:end="101:21">s</name><operator pos:start="101:22" pos:end="101:23">-&gt;</operator><name pos:start="101:24" pos:end="101:36">input_picture</name><index pos:start="101:37" pos:end="101:39">[<expr pos:start="101:38" pos:end="101:38"><name pos:start="101:38" pos:end="101:38">i</name></expr>]</index></name><operator pos:start="101:40" pos:end="101:41">-&gt;</operator><name pos:start="101:42" pos:end="101:50">pict_type</name><operator pos:start="101:51" pos:end="101:51">=</operator>

                        <name pos:start="103:25" pos:end="103:53"><name pos:start="103:25" pos:end="103:25">s</name><operator pos:start="103:26" pos:end="103:27">-&gt;</operator><name pos:start="103:28" pos:end="103:37">rc_context</name><operator pos:start="103:38" pos:end="103:38">.</operator><name pos:start="103:39" pos:end="103:43">entry</name><index pos:start="103:44" pos:end="103:53">[<expr pos:start="103:45" pos:end="103:52"><name pos:start="103:45" pos:end="103:52">pict_num</name></expr>]</index></name><operator pos:start="103:54" pos:end="103:54">.</operator><name pos:start="103:55" pos:end="103:67">new_pict_type</name></expr>;</expr_stmt>

                </block_content>}</block></for>

            </block_content>}</block></if></if_stmt>



            <if_stmt pos:start="111:13" pos:end="163:13"><if pos:start="111:13" pos:end="117:13">if<condition pos:start="111:15" pos:end="111:45">(<expr pos:start="111:16" pos:end="111:44"><name pos:start="111:16" pos:end="111:41"><name pos:start="111:16" pos:end="111:16">s</name><operator pos:start="111:17" pos:end="111:18">-&gt;</operator><name pos:start="111:19" pos:end="111:23">avctx</name><operator pos:start="111:24" pos:end="111:25">-&gt;</operator><name pos:start="111:26" pos:end="111:41">b_frame_strategy</name></name><operator pos:start="111:42" pos:end="111:43">==</operator><literal type="number" pos:start="111:44" pos:end="111:44">0</literal></expr>)</condition><block pos:start="111:46" pos:end="117:13">{<block_content pos:start="113:17" pos:end="115:74">

                <expr_stmt pos:start="113:17" pos:end="113:42"><expr pos:start="113:17" pos:end="113:41"><name pos:start="113:17" pos:end="113:24">b_frames</name><operator pos:start="113:25" pos:end="113:25">=</operator> <name pos:start="113:27" pos:end="113:41"><name pos:start="113:27" pos:end="113:27">s</name><operator pos:start="113:28" pos:end="113:29">-&gt;</operator><name pos:start="113:30" pos:end="113:41">max_b_frames</name></name></expr>;</expr_stmt>

                <while pos:start="115:17" pos:end="115:74">while<condition pos:start="115:22" pos:end="115:62">(<expr pos:start="115:23" pos:end="115:61"><name pos:start="115:23" pos:end="115:30">b_frames</name> <operator pos:start="115:32" pos:end="115:33">&amp;&amp;</operator> <operator pos:start="115:35" pos:end="115:35">!</operator><name pos:start="115:36" pos:end="115:61"><name pos:start="115:36" pos:end="115:36">s</name><operator pos:start="115:37" pos:end="115:38">-&gt;</operator><name pos:start="115:39" pos:end="115:51">input_picture</name><index pos:start="115:52" pos:end="115:61">[<expr pos:start="115:53" pos:end="115:60"><name pos:start="115:53" pos:end="115:60">b_frames</name></expr>]</index></name></expr>)</condition><block type="pseudo" pos:start="115:64" pos:end="115:74"><block_content pos:start="115:64" pos:end="115:74"> <expr_stmt pos:start="115:64" pos:end="115:74"><expr pos:start="115:64" pos:end="115:73"><name pos:start="115:64" pos:end="115:71">b_frames</name><operator pos:start="115:72" pos:end="115:73">--</operator></expr>;</expr_stmt></block_content></block></while>

            </block_content>}</block></if><if type="elseif" pos:start="117:14" pos:end="153:13">else if<condition pos:start="117:21" pos:end="117:51">(<expr pos:start="117:22" pos:end="117:50"><name pos:start="117:22" pos:end="117:47"><name pos:start="117:22" pos:end="117:22">s</name><operator pos:start="117:23" pos:end="117:24">-&gt;</operator><name pos:start="117:25" pos:end="117:29">avctx</name><operator pos:start="117:30" pos:end="117:31">-&gt;</operator><name pos:start="117:32" pos:end="117:47">b_frame_strategy</name></name><operator pos:start="117:48" pos:end="117:49">==</operator><literal type="number" pos:start="117:50" pos:end="117:50">1</literal></expr>)</condition><block pos:start="117:52" pos:end="153:13">{<block_content pos:start="119:17" pos:end="151:17">

                <for pos:start="119:17" pos:end="131:17">for<control pos:start="119:20" pos:end="119:50">(<init pos:start="119:21" pos:end="119:24"><expr pos:start="119:21" pos:end="119:23"><name pos:start="119:21" pos:end="119:21">i</name><operator pos:start="119:22" pos:end="119:22">=</operator><literal type="number" pos:start="119:23" pos:end="119:23">1</literal></expr>;</init> <condition pos:start="119:26" pos:end="119:45"><expr pos:start="119:26" pos:end="119:44"><name pos:start="119:26" pos:end="119:26">i</name><operator pos:start="119:27" pos:end="119:27">&lt;</operator><name pos:start="119:28" pos:end="119:42"><name pos:start="119:28" pos:end="119:28">s</name><operator pos:start="119:29" pos:end="119:30">-&gt;</operator><name pos:start="119:31" pos:end="119:42">max_b_frames</name></name><operator pos:start="119:43" pos:end="119:43">+</operator><literal type="number" pos:start="119:44" pos:end="119:44">1</literal></expr>;</condition> <incr pos:start="119:47" pos:end="119:49"><expr pos:start="119:47" pos:end="119:49"><name pos:start="119:47" pos:end="119:47">i</name><operator pos:start="119:48" pos:end="119:49">++</operator></expr></incr>)</control><block pos:start="119:51" pos:end="131:17">{<block_content pos:start="121:21" pos:end="129:21">

                    <if_stmt pos:start="121:21" pos:end="129:21"><if pos:start="121:21" pos:end="129:21">if<condition pos:start="121:23" pos:end="121:84">(<expr pos:start="121:24" pos:end="121:83"><name pos:start="121:24" pos:end="121:42"><name pos:start="121:24" pos:end="121:24">s</name><operator pos:start="121:25" pos:end="121:26">-&gt;</operator><name pos:start="121:27" pos:end="121:39">input_picture</name><index pos:start="121:40" pos:end="121:42">[<expr pos:start="121:41" pos:end="121:41"><name pos:start="121:41" pos:end="121:41">i</name></expr>]</index></name> <operator pos:start="121:44" pos:end="121:45">&amp;&amp;</operator> <name pos:start="121:47" pos:end="121:65"><name pos:start="121:47" pos:end="121:47">s</name><operator pos:start="121:48" pos:end="121:49">-&gt;</operator><name pos:start="121:50" pos:end="121:62">input_picture</name><index pos:start="121:63" pos:end="121:65">[<expr pos:start="121:64" pos:end="121:64"><name pos:start="121:64" pos:end="121:64">i</name></expr>]</index></name><operator pos:start="121:66" pos:end="121:67">-&gt;</operator><name pos:start="121:68" pos:end="121:80">b_frame_score</name><operator pos:start="121:81" pos:end="121:82">==</operator><literal type="number" pos:start="121:83" pos:end="121:83">0</literal></expr>)</condition><block pos:start="121:85" pos:end="129:21">{<block_content pos:start="123:25" pos:end="127:96">

                        <expr_stmt pos:start="123:25" pos:end="127:96"><expr pos:start="123:25" pos:end="127:95"><name pos:start="123:25" pos:end="123:43"><name pos:start="123:25" pos:end="123:25">s</name><operator pos:start="123:26" pos:end="123:27">-&gt;</operator><name pos:start="123:28" pos:end="123:40">input_picture</name><index pos:start="123:41" pos:end="123:43">[<expr pos:start="123:42" pos:end="123:42"><name pos:start="123:42" pos:end="123:42">i</name></expr>]</index></name><operator pos:start="123:44" pos:end="123:45">-&gt;</operator><name pos:start="123:46" pos:end="123:58">b_frame_score</name><operator pos:start="123:59" pos:end="123:59">=</operator>

                            <call pos:start="125:29" pos:end="127:91"><name pos:start="125:29" pos:end="125:43">get_intra_count</name><argument_list pos:start="125:44" pos:end="127:91">(<argument pos:start="125:45" pos:end="125:45"><expr pos:start="125:45" pos:end="125:45"><name pos:start="125:45" pos:end="125:45">s</name></expr></argument>, <argument pos:start="125:48" pos:end="125:77"><expr pos:start="125:48" pos:end="125:77"><name pos:start="125:48" pos:end="125:68"><name pos:start="125:48" pos:end="125:48">s</name><operator pos:start="125:49" pos:end="125:50">-&gt;</operator><name pos:start="125:51" pos:end="125:63">input_picture</name><index pos:start="125:64" pos:end="125:68">[<expr pos:start="125:65" pos:end="125:65"><name pos:start="125:65" pos:end="125:65">i</name></expr>  ]</index></name><operator pos:start="125:69" pos:end="125:70">-&gt;</operator><name pos:start="125:71" pos:end="125:77"><name pos:start="125:71" pos:end="125:74">data</name><index pos:start="125:75" pos:end="125:77">[<expr pos:start="125:76" pos:end="125:76"><literal type="number" pos:start="125:76" pos:end="125:76">0</literal></expr>]</index></name></expr></argument>,

                                               <argument pos:start="127:48" pos:end="127:77"><expr pos:start="127:48" pos:end="127:77"><name pos:start="127:48" pos:end="127:68"><name pos:start="127:48" pos:end="127:48">s</name><operator pos:start="127:49" pos:end="127:50">-&gt;</operator><name pos:start="127:51" pos:end="127:63">input_picture</name><index pos:start="127:64" pos:end="127:68">[<expr pos:start="127:65" pos:end="127:67"><name pos:start="127:65" pos:end="127:65">i</name><operator pos:start="127:66" pos:end="127:66">-</operator><literal type="number" pos:start="127:67" pos:end="127:67">1</literal></expr>]</index></name><operator pos:start="127:69" pos:end="127:70">-&gt;</operator><name pos:start="127:71" pos:end="127:77"><name pos:start="127:71" pos:end="127:74">data</name><index pos:start="127:75" pos:end="127:77">[<expr pos:start="127:76" pos:end="127:76"><literal type="number" pos:start="127:76" pos:end="127:76">0</literal></expr>]</index></name></expr></argument>, <argument pos:start="127:80" pos:end="127:90"><expr pos:start="127:80" pos:end="127:90"><name pos:start="127:80" pos:end="127:90"><name pos:start="127:80" pos:end="127:80">s</name><operator pos:start="127:81" pos:end="127:82">-&gt;</operator><name pos:start="127:83" pos:end="127:90">linesize</name></name></expr></argument>)</argument_list></call> <operator pos:start="127:93" pos:end="127:93">+</operator> <literal type="number" pos:start="127:95" pos:end="127:95">1</literal></expr>;</expr_stmt>

                    </block_content>}</block></if></if_stmt>

                </block_content>}</block></for>

                <for pos:start="133:17" pos:end="137:17">for<control pos:start="133:20" pos:end="133:50">(<init pos:start="133:21" pos:end="133:24"><expr pos:start="133:21" pos:end="133:23"><name pos:start="133:21" pos:end="133:21">i</name><operator pos:start="133:22" pos:end="133:22">=</operator><literal type="number" pos:start="133:23" pos:end="133:23">0</literal></expr>;</init> <condition pos:start="133:26" pos:end="133:45"><expr pos:start="133:26" pos:end="133:44"><name pos:start="133:26" pos:end="133:26">i</name><operator pos:start="133:27" pos:end="133:27">&lt;</operator><name pos:start="133:28" pos:end="133:42"><name pos:start="133:28" pos:end="133:28">s</name><operator pos:start="133:29" pos:end="133:30">-&gt;</operator><name pos:start="133:31" pos:end="133:42">max_b_frames</name></name><operator pos:start="133:43" pos:end="133:43">+</operator><literal type="number" pos:start="133:44" pos:end="133:44">1</literal></expr>;</condition> <incr pos:start="133:47" pos:end="133:49"><expr pos:start="133:47" pos:end="133:49"><name pos:start="133:47" pos:end="133:47">i</name><operator pos:start="133:48" pos:end="133:49">++</operator></expr></incr>)</control><block pos:start="133:51" pos:end="137:17">{<block_content pos:start="135:21" pos:end="135:134">

                    <if_stmt pos:start="135:21" pos:end="135:134"><if pos:start="135:21" pos:end="135:134">if<condition pos:start="135:23" pos:end="135:127">(<expr pos:start="135:24" pos:end="135:126"><name pos:start="135:24" pos:end="135:42"><name pos:start="135:24" pos:end="135:24">s</name><operator pos:start="135:25" pos:end="135:26">-&gt;</operator><name pos:start="135:27" pos:end="135:39">input_picture</name><index pos:start="135:40" pos:end="135:42">[<expr pos:start="135:41" pos:end="135:41"><name pos:start="135:41" pos:end="135:41">i</name></expr>]</index></name><operator pos:start="135:43" pos:end="135:44">==</operator><name pos:start="135:45" pos:end="135:48">NULL</name> <operator pos:start="135:50" pos:end="135:51">||</operator> <name pos:start="135:53" pos:end="135:71"><name pos:start="135:53" pos:end="135:53">s</name><operator pos:start="135:54" pos:end="135:55">-&gt;</operator><name pos:start="135:56" pos:end="135:68">input_picture</name><index pos:start="135:69" pos:end="135:71">[<expr pos:start="135:70" pos:end="135:70"><name pos:start="135:70" pos:end="135:70">i</name></expr>]</index></name><operator pos:start="135:72" pos:end="135:73">-&gt;</operator><name pos:start="135:74" pos:end="135:86">b_frame_score</name> <operator pos:start="135:88" pos:end="135:88">-</operator> <literal type="number" pos:start="135:90" pos:end="135:90">1</literal> <operator pos:start="135:92" pos:end="135:92">&gt;</operator> <name pos:start="135:94" pos:end="135:102"><name pos:start="135:94" pos:end="135:94">s</name><operator pos:start="135:95" pos:end="135:96">-&gt;</operator><name pos:start="135:97" pos:end="135:102">mb_num</name></name><operator pos:start="135:103" pos:end="135:103">/</operator><name pos:start="135:104" pos:end="135:126"><name pos:start="135:104" pos:end="135:104">s</name><operator pos:start="135:105" pos:end="135:106">-&gt;</operator><name pos:start="135:107" pos:end="135:111">avctx</name><operator pos:start="135:112" pos:end="135:113">-&gt;</operator><name pos:start="135:114" pos:end="135:126">b_sensitivity</name></name></expr>)</condition><block type="pseudo" pos:start="135:129" pos:end="135:134"><block_content pos:start="135:129" pos:end="135:134"> <break pos:start="135:129" pos:end="135:134">break;</break></block_content></block></if></if_stmt>

                </block_content>}</block></for>



                <expr_stmt pos:start="141:17" pos:end="141:40"><expr pos:start="141:17" pos:end="141:39"><name pos:start="141:17" pos:end="141:24">b_frames</name><operator pos:start="141:25" pos:end="141:25">=</operator> <call pos:start="141:27" pos:end="141:39"><name pos:start="141:27" pos:end="141:31">FFMAX</name><argument_list pos:start="141:32" pos:end="141:39">(<argument pos:start="141:33" pos:end="141:33"><expr pos:start="141:33" pos:end="141:33"><literal type="number" pos:start="141:33" pos:end="141:33">0</literal></expr></argument>, <argument pos:start="141:36" pos:end="141:38"><expr pos:start="141:36" pos:end="141:38"><name pos:start="141:36" pos:end="141:36">i</name><operator pos:start="141:37" pos:end="141:37">-</operator><literal type="number" pos:start="141:38" pos:end="141:38">1</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>



                <comment type="block" pos:start="145:17" pos:end="145:34">/* reset scores */</comment>

                <for pos:start="147:17" pos:end="151:17">for<control pos:start="147:20" pos:end="147:43">(<init pos:start="147:21" pos:end="147:24"><expr pos:start="147:21" pos:end="147:23"><name pos:start="147:21" pos:end="147:21">i</name><operator pos:start="147:22" pos:end="147:22">=</operator><literal type="number" pos:start="147:23" pos:end="147:23">0</literal></expr>;</init> <condition pos:start="147:26" pos:end="147:38"><expr pos:start="147:26" pos:end="147:37"><name pos:start="147:26" pos:end="147:26">i</name><operator pos:start="147:27" pos:end="147:27">&lt;</operator><name pos:start="147:28" pos:end="147:35">b_frames</name><operator pos:start="147:36" pos:end="147:36">+</operator><literal type="number" pos:start="147:37" pos:end="147:37">1</literal></expr>;</condition> <incr pos:start="147:40" pos:end="147:42"><expr pos:start="147:40" pos:end="147:42"><name pos:start="147:40" pos:end="147:40">i</name><operator pos:start="147:41" pos:end="147:42">++</operator></expr></incr>)</control><block pos:start="147:44" pos:end="151:17">{<block_content pos:start="149:21" pos:end="149:57">

                    <expr_stmt pos:start="149:21" pos:end="149:57"><expr pos:start="149:21" pos:end="149:56"><name pos:start="149:21" pos:end="149:39"><name pos:start="149:21" pos:end="149:21">s</name><operator pos:start="149:22" pos:end="149:23">-&gt;</operator><name pos:start="149:24" pos:end="149:36">input_picture</name><index pos:start="149:37" pos:end="149:39">[<expr pos:start="149:38" pos:end="149:38"><name pos:start="149:38" pos:end="149:38">i</name></expr>]</index></name><operator pos:start="149:40" pos:end="149:41">-&gt;</operator><name pos:start="149:42" pos:end="149:54">b_frame_score</name><operator pos:start="149:55" pos:end="149:55">=</operator><literal type="number" pos:start="149:56" pos:end="149:56">0</literal></expr>;</expr_stmt>

                </block_content>}</block></for>

            </block_content>}</block></if><if type="elseif" pos:start="153:14" pos:end="157:13">else if<condition pos:start="153:21" pos:end="153:51">(<expr pos:start="153:22" pos:end="153:50"><name pos:start="153:22" pos:end="153:47"><name pos:start="153:22" pos:end="153:22">s</name><operator pos:start="153:23" pos:end="153:24">-&gt;</operator><name pos:start="153:25" pos:end="153:29">avctx</name><operator pos:start="153:30" pos:end="153:31">-&gt;</operator><name pos:start="153:32" pos:end="153:47">b_frame_strategy</name></name><operator pos:start="153:48" pos:end="153:49">==</operator><literal type="number" pos:start="153:50" pos:end="153:50">2</literal></expr>)</condition><block pos:start="153:52" pos:end="157:13">{<block_content pos:start="155:17" pos:end="155:51">

                <expr_stmt pos:start="155:17" pos:end="155:51"><expr pos:start="155:17" pos:end="155:50"><name pos:start="155:17" pos:end="155:24">b_frames</name><operator pos:start="155:25" pos:end="155:25">=</operator> <call pos:start="155:27" pos:end="155:50"><name pos:start="155:27" pos:end="155:47">estimate_best_b_count</name><argument_list pos:start="155:48" pos:end="155:50">(<argument pos:start="155:49" pos:end="155:49"><expr pos:start="155:49" pos:end="155:49"><name pos:start="155:49" pos:end="155:49">s</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

            </block_content>}</block></if><else pos:start="157:14" pos:end="163:13">else<block pos:start="157:18" pos:end="163:13">{<block_content pos:start="159:17" pos:end="161:27">

                <expr_stmt pos:start="159:17" pos:end="159:77"><expr pos:start="159:17" pos:end="159:76"><call pos:start="159:17" pos:end="159:76"><name pos:start="159:17" pos:end="159:22">av_log</name><argument_list pos:start="159:23" pos:end="159:76">(<argument pos:start="159:24" pos:end="159:31"><expr pos:start="159:24" pos:end="159:31"><name pos:start="159:24" pos:end="159:31"><name pos:start="159:24" pos:end="159:24">s</name><operator pos:start="159:25" pos:end="159:26">-&gt;</operator><name pos:start="159:27" pos:end="159:31">avctx</name></name></expr></argument>, <argument pos:start="159:34" pos:end="159:45"><expr pos:start="159:34" pos:end="159:45"><name pos:start="159:34" pos:end="159:45">AV_LOG_ERROR</name></expr></argument>, <argument pos:start="159:48" pos:end="159:75"><expr pos:start="159:48" pos:end="159:75"><literal type="string" pos:start="159:48" pos:end="159:75">"illegal b frame strategy\n"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

                <expr_stmt pos:start="161:17" pos:end="161:27"><expr pos:start="161:17" pos:end="161:26"><name pos:start="161:17" pos:end="161:24">b_frames</name><operator pos:start="161:25" pos:end="161:25">=</operator><literal type="number" pos:start="161:26" pos:end="161:26">0</literal></expr>;</expr_stmt>

            </block_content>}</block></else></if_stmt>



            <expr_stmt pos:start="167:13" pos:end="167:21"><expr pos:start="167:13" pos:end="167:20"><call pos:start="167:13" pos:end="167:20"><name pos:start="167:13" pos:end="167:18">emms_c</name><argument_list pos:start="167:19" pos:end="167:20">()</argument_list></call></expr>;</expr_stmt>

<comment type="line" pos:start="169:1" pos:end="169:23">//static int b_count=0;</comment>

<comment type="line" pos:start="171:1" pos:end="171:21">//b_count+= b_frames;</comment>

<comment type="line" pos:start="173:1" pos:end="173:60">//av_log(s-&gt;avctx, AV_LOG_DEBUG, "b_frames: %d\n", b_count);</comment>



            <for pos:start="177:13" pos:end="185:13">for<control pos:start="177:16" pos:end="177:43">(<init pos:start="177:17" pos:end="177:32"><expr pos:start="177:17" pos:end="177:31"><name pos:start="177:17" pos:end="177:17">i</name><operator pos:start="177:18" pos:end="177:18">=</operator> <name pos:start="177:20" pos:end="177:27">b_frames</name> <operator pos:start="177:29" pos:end="177:29">-</operator> <literal type="number" pos:start="177:31" pos:end="177:31">1</literal></expr>;</init> <condition pos:start="177:34" pos:end="177:38"><expr pos:start="177:34" pos:end="177:37"><name pos:start="177:34" pos:end="177:34">i</name><operator pos:start="177:35" pos:end="177:36">&gt;=</operator><literal type="number" pos:start="177:37" pos:end="177:37">0</literal></expr>;</condition> <incr pos:start="177:40" pos:end="177:42"><expr pos:start="177:40" pos:end="177:42"><name pos:start="177:40" pos:end="177:40">i</name><operator pos:start="177:41" pos:end="177:42">--</operator></expr></incr>)</control><block pos:start="177:44" pos:end="185:13">{<block_content pos:start="179:17" pos:end="183:32">

                <decl_stmt pos:start="179:17" pos:end="179:57"><decl pos:start="179:17" pos:end="179:56"><type pos:start="179:17" pos:end="179:19"><name pos:start="179:17" pos:end="179:19">int</name></type> <name pos:start="179:21" pos:end="179:24">type</name><init pos:start="179:25" pos:end="179:56">= <expr pos:start="179:27" pos:end="179:56"><name pos:start="179:27" pos:end="179:45"><name pos:start="179:27" pos:end="179:27">s</name><operator pos:start="179:28" pos:end="179:29">-&gt;</operator><name pos:start="179:30" pos:end="179:42">input_picture</name><index pos:start="179:43" pos:end="179:45">[<expr pos:start="179:44" pos:end="179:44"><name pos:start="179:44" pos:end="179:44">i</name></expr>]</index></name><operator pos:start="179:46" pos:end="179:47">-&gt;</operator><name pos:start="179:48" pos:end="179:56">pict_type</name></expr></init></decl>;</decl_stmt>

                <if_stmt pos:start="181:17" pos:end="183:32"><if pos:start="181:17" pos:end="183:32">if<condition pos:start="181:19" pos:end="181:42">(<expr pos:start="181:20" pos:end="181:41"><name pos:start="181:20" pos:end="181:23">type</name> <operator pos:start="181:25" pos:end="181:26">&amp;&amp;</operator> <name pos:start="181:28" pos:end="181:31">type</name> <operator pos:start="181:33" pos:end="181:34">!=</operator> <name pos:start="181:36" pos:end="181:41">B_TYPE</name></expr>)</condition><block type="pseudo" pos:start="183:21" pos:end="183:32"><block_content pos:start="183:21" pos:end="183:32">

                    <expr_stmt pos:start="183:21" pos:end="183:32"><expr pos:start="183:21" pos:end="183:31"><name pos:start="183:21" pos:end="183:28">b_frames</name><operator pos:start="183:29" pos:end="183:29">=</operator> <name pos:start="183:31" pos:end="183:31">i</name></expr>;</expr_stmt></block_content></block></if></if_stmt>

            </block_content>}</block></for>

            <if_stmt pos:start="187:13" pos:end="191:13"><if pos:start="187:13" pos:end="191:13">if<condition pos:start="187:15" pos:end="187:94">(<expr pos:start="187:16" pos:end="187:93"><name pos:start="187:16" pos:end="187:41"><name pos:start="187:16" pos:end="187:16">s</name><operator pos:start="187:17" pos:end="187:18">-&gt;</operator><name pos:start="187:19" pos:end="187:31">input_picture</name><index pos:start="187:32" pos:end="187:41">[<expr pos:start="187:33" pos:end="187:40"><name pos:start="187:33" pos:end="187:40">b_frames</name></expr>]</index></name><operator pos:start="187:42" pos:end="187:43">-&gt;</operator><name pos:start="187:44" pos:end="187:52">pict_type</name> <operator pos:start="187:54" pos:end="187:55">==</operator> <name pos:start="187:57" pos:end="187:62">B_TYPE</name> <operator pos:start="187:64" pos:end="187:65">&amp;&amp;</operator> <name pos:start="187:67" pos:end="187:74">b_frames</name> <operator pos:start="187:76" pos:end="187:77">==</operator> <name pos:start="187:79" pos:end="187:93"><name pos:start="187:79" pos:end="187:79">s</name><operator pos:start="187:80" pos:end="187:81">-&gt;</operator><name pos:start="187:82" pos:end="187:93">max_b_frames</name></name></expr>)</condition><block pos:start="187:95" pos:end="191:13">{<block_content pos:start="189:17" pos:end="189:88">

                <expr_stmt pos:start="189:17" pos:end="189:88"><expr pos:start="189:17" pos:end="189:87"><call pos:start="189:17" pos:end="189:87"><name pos:start="189:17" pos:end="189:22">av_log</name><argument_list pos:start="189:23" pos:end="189:87">(<argument pos:start="189:24" pos:end="189:31"><expr pos:start="189:24" pos:end="189:31"><name pos:start="189:24" pos:end="189:31"><name pos:start="189:24" pos:end="189:24">s</name><operator pos:start="189:25" pos:end="189:26">-&gt;</operator><name pos:start="189:27" pos:end="189:31">avctx</name></name></expr></argument>, <argument pos:start="189:34" pos:end="189:45"><expr pos:start="189:34" pos:end="189:45"><name pos:start="189:34" pos:end="189:45">AV_LOG_ERROR</name></expr></argument>, <argument pos:start="189:48" pos:end="189:86"><expr pos:start="189:48" pos:end="189:86"><literal type="string" pos:start="189:48" pos:end="189:86">"warning, too many b frames in a row\n"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

            </block_content>}</block></if></if_stmt>



            <if_stmt pos:start="195:13" pos:end="211:13"><if pos:start="195:13" pos:end="211:13">if<condition pos:start="195:15" pos:end="195:66">(<expr pos:start="195:16" pos:end="195:65"><name pos:start="195:16" pos:end="195:39"><name pos:start="195:16" pos:end="195:16">s</name><operator pos:start="195:17" pos:end="195:18">-&gt;</operator><name pos:start="195:19" pos:end="195:39">picture_in_gop_number</name></name> <operator pos:start="195:41" pos:end="195:41">+</operator> <name pos:start="195:43" pos:end="195:50">b_frames</name> <operator pos:start="195:52" pos:end="195:53">&gt;=</operator> <name pos:start="195:55" pos:end="195:65"><name pos:start="195:55" pos:end="195:55">s</name><operator pos:start="195:56" pos:end="195:57">-&gt;</operator><name pos:start="195:58" pos:end="195:65">gop_size</name></name></expr>)</condition><block pos:start="195:67" pos:end="211:13">{<block_content pos:start="197:15" pos:end="209:15">

              <if_stmt pos:start="197:15" pos:end="209:15"><if pos:start="197:15" pos:end="201:15">if<condition pos:start="197:17" pos:end="197:96">(<expr pos:start="197:18" pos:end="197:95"><operator pos:start="197:18" pos:end="197:18">(</operator><name pos:start="197:19" pos:end="197:27"><name pos:start="197:19" pos:end="197:19">s</name><operator pos:start="197:20" pos:end="197:21">-&gt;</operator><name pos:start="197:22" pos:end="197:27">flags2</name></name> <operator pos:start="197:29" pos:end="197:29">&amp;</operator> <name pos:start="197:31" pos:end="197:52">CODEC_FLAG2_STRICT_GOP</name><operator pos:start="197:53" pos:end="197:53">)</operator> <operator pos:start="197:55" pos:end="197:56">&amp;&amp;</operator> <name pos:start="197:58" pos:end="197:68"><name pos:start="197:58" pos:end="197:58">s</name><operator pos:start="197:59" pos:end="197:60">-&gt;</operator><name pos:start="197:61" pos:end="197:68">gop_size</name></name> <operator pos:start="197:70" pos:end="197:70">&gt;</operator> <name pos:start="197:72" pos:end="197:95"><name pos:start="197:72" pos:end="197:72">s</name><operator pos:start="197:73" pos:end="197:74">-&gt;</operator><name pos:start="197:75" pos:end="197:95">picture_in_gop_number</name></name></expr>)</condition><block pos:start="197:97" pos:end="201:15">{<block_content pos:start="199:21" pos:end="199:73">

                    <expr_stmt pos:start="199:21" pos:end="199:73"><expr pos:start="199:21" pos:end="199:72"><name pos:start="199:21" pos:end="199:28">b_frames</name><operator pos:start="199:29" pos:end="199:29">=</operator> <name pos:start="199:31" pos:end="199:41"><name pos:start="199:31" pos:end="199:31">s</name><operator pos:start="199:32" pos:end="199:33">-&gt;</operator><name pos:start="199:34" pos:end="199:41">gop_size</name></name> <operator pos:start="199:43" pos:end="199:43">-</operator> <name pos:start="199:45" pos:end="199:68"><name pos:start="199:45" pos:end="199:45">s</name><operator pos:start="199:46" pos:end="199:47">-&gt;</operator><name pos:start="199:48" pos:end="199:68">picture_in_gop_number</name></name> <operator pos:start="199:70" pos:end="199:70">-</operator> <literal type="number" pos:start="199:72" pos:end="199:72">1</literal></expr>;</expr_stmt>

              </block_content>}</block></if><else pos:start="201:16" pos:end="209:15">else<block pos:start="201:20" pos:end="209:15">{<block_content pos:start="203:17" pos:end="207:62">

                <if_stmt pos:start="203:17" pos:end="205:31"><if pos:start="203:17" pos:end="205:31">if<condition pos:start="203:19" pos:end="203:52">(<expr pos:start="203:20" pos:end="203:51"><name pos:start="203:20" pos:end="203:27"><name pos:start="203:20" pos:end="203:20">s</name><operator pos:start="203:21" pos:end="203:22">-&gt;</operator><name pos:start="203:23" pos:end="203:27">flags</name></name> <operator pos:start="203:29" pos:end="203:29">&amp;</operator> <name pos:start="203:31" pos:end="203:51">CODEC_FLAG_CLOSED_GOP</name></expr>)</condition><block type="pseudo" pos:start="205:21" pos:end="205:31"><block_content pos:start="205:21" pos:end="205:31">

                    <expr_stmt pos:start="205:21" pos:end="205:31"><expr pos:start="205:21" pos:end="205:30"><name pos:start="205:21" pos:end="205:28">b_frames</name><operator pos:start="205:29" pos:end="205:29">=</operator><literal type="number" pos:start="205:30" pos:end="205:30">0</literal></expr>;</expr_stmt></block_content></block></if></if_stmt>

                <expr_stmt pos:start="207:17" pos:end="207:62"><expr pos:start="207:17" pos:end="207:61"><name pos:start="207:17" pos:end="207:42"><name pos:start="207:17" pos:end="207:17">s</name><operator pos:start="207:18" pos:end="207:19">-&gt;</operator><name pos:start="207:20" pos:end="207:32">input_picture</name><index pos:start="207:33" pos:end="207:42">[<expr pos:start="207:34" pos:end="207:41"><name pos:start="207:34" pos:end="207:41">b_frames</name></expr>]</index></name><operator pos:start="207:43" pos:end="207:44">-&gt;</operator><name pos:start="207:45" pos:end="207:53">pict_type</name><operator pos:start="207:54" pos:end="207:54">=</operator> <name pos:start="207:56" pos:end="207:61">I_TYPE</name></expr>;</expr_stmt>

              </block_content>}</block></else></if_stmt>

            </block_content>}</block></if></if_stmt>



            <if_stmt pos:start="215:13" pos:end="221:27"><if pos:start="215:13" pos:end="221:27">if<condition pos:start="215:15" pos:end="219:65">(   <expr pos:start="215:19" pos:end="219:64"><operator pos:start="215:19" pos:end="215:19">(</operator><name pos:start="215:20" pos:end="215:27"><name pos:start="215:20" pos:end="215:20">s</name><operator pos:start="215:21" pos:end="215:22">-&gt;</operator><name pos:start="215:23" pos:end="215:27">flags</name></name> <operator pos:start="215:29" pos:end="215:29">&amp;</operator> <name pos:start="215:31" pos:end="215:51">CODEC_FLAG_CLOSED_GOP</name><operator pos:start="215:52" pos:end="215:52">)</operator>

               <operator pos:start="217:16" pos:end="217:17">&amp;&amp;</operator> <name pos:start="217:19" pos:end="217:26">b_frames</name>

               <operator pos:start="219:16" pos:end="219:17">&amp;&amp;</operator> <name pos:start="219:19" pos:end="219:44"><name pos:start="219:19" pos:end="219:19">s</name><operator pos:start="219:20" pos:end="219:21">-&gt;</operator><name pos:start="219:22" pos:end="219:34">input_picture</name><index pos:start="219:35" pos:end="219:44">[<expr pos:start="219:36" pos:end="219:43"><name pos:start="219:36" pos:end="219:43">b_frames</name></expr>]</index></name><operator pos:start="219:45" pos:end="219:46">-&gt;</operator><name pos:start="219:47" pos:end="219:55">pict_type</name><operator pos:start="219:56" pos:end="219:57">==</operator> <name pos:start="219:59" pos:end="219:64">I_TYPE</name></expr>)</condition><block type="pseudo" pos:start="221:17" pos:end="221:27"><block_content pos:start="221:17" pos:end="221:27">

                <expr_stmt pos:start="221:17" pos:end="221:27"><expr pos:start="221:17" pos:end="221:26"><name pos:start="221:17" pos:end="221:24">b_frames</name><operator pos:start="221:25" pos:end="221:26">--</operator></expr>;</expr_stmt></block_content></block></if></if_stmt>



            <expr_stmt pos:start="225:13" pos:end="225:70"><expr pos:start="225:13" pos:end="225:69"><name pos:start="225:13" pos:end="225:41"><name pos:start="225:13" pos:end="225:13">s</name><operator pos:start="225:14" pos:end="225:15">-&gt;</operator><name pos:start="225:16" pos:end="225:38">reordered_input_picture</name><index pos:start="225:39" pos:end="225:41">[<expr pos:start="225:40" pos:end="225:40"><literal type="number" pos:start="225:40" pos:end="225:40">0</literal></expr>]</index></name><operator pos:start="225:42" pos:end="225:42">=</operator> <name pos:start="225:44" pos:end="225:69"><name pos:start="225:44" pos:end="225:44">s</name><operator pos:start="225:45" pos:end="225:46">-&gt;</operator><name pos:start="225:47" pos:end="225:59">input_picture</name><index pos:start="225:60" pos:end="225:69">[<expr pos:start="225:61" pos:end="225:68"><name pos:start="225:61" pos:end="225:68">b_frames</name></expr>]</index></name></expr>;</expr_stmt>

            <if_stmt pos:start="227:13" pos:end="229:65"><if pos:start="227:13" pos:end="229:65">if<condition pos:start="227:15" pos:end="227:66">(<expr pos:start="227:16" pos:end="227:65"><name pos:start="227:16" pos:end="227:44"><name pos:start="227:16" pos:end="227:16">s</name><operator pos:start="227:17" pos:end="227:18">-&gt;</operator><name pos:start="227:19" pos:end="227:41">reordered_input_picture</name><index pos:start="227:42" pos:end="227:44">[<expr pos:start="227:43" pos:end="227:43"><literal type="number" pos:start="227:43" pos:end="227:43">0</literal></expr>]</index></name><operator pos:start="227:45" pos:end="227:46">-&gt;</operator><name pos:start="227:47" pos:end="227:55">pict_type</name> <operator pos:start="227:57" pos:end="227:58">!=</operator> <name pos:start="227:60" pos:end="227:65">I_TYPE</name></expr>)</condition><block type="pseudo" pos:start="229:17" pos:end="229:65"><block_content pos:start="229:17" pos:end="229:65">

                <expr_stmt pos:start="229:17" pos:end="229:65"><expr pos:start="229:17" pos:end="229:64"><name pos:start="229:17" pos:end="229:45"><name pos:start="229:17" pos:end="229:17">s</name><operator pos:start="229:18" pos:end="229:19">-&gt;</operator><name pos:start="229:20" pos:end="229:42">reordered_input_picture</name><index pos:start="229:43" pos:end="229:45">[<expr pos:start="229:44" pos:end="229:44"><literal type="number" pos:start="229:44" pos:end="229:44">0</literal></expr>]</index></name><operator pos:start="229:46" pos:end="229:47">-&gt;</operator><name pos:start="229:48" pos:end="229:56">pict_type</name><operator pos:start="229:57" pos:end="229:57">=</operator> <name pos:start="229:59" pos:end="229:64">P_TYPE</name></expr>;</expr_stmt></block_content></block></if></if_stmt>

            <expr_stmt pos:start="231:13" pos:end="231:91"><expr pos:start="231:13" pos:end="231:90"><name pos:start="231:13" pos:end="231:41"><name pos:start="231:13" pos:end="231:13">s</name><operator pos:start="231:14" pos:end="231:15">-&gt;</operator><name pos:start="231:16" pos:end="231:38">reordered_input_picture</name><index pos:start="231:39" pos:end="231:41">[<expr pos:start="231:40" pos:end="231:40"><literal type="number" pos:start="231:40" pos:end="231:40">0</literal></expr>]</index></name><operator pos:start="231:42" pos:end="231:43">-&gt;</operator><name pos:start="231:44" pos:end="231:63">coded_picture_number</name><operator pos:start="231:64" pos:end="231:64">=</operator> <name pos:start="231:66" pos:end="231:88"><name pos:start="231:66" pos:end="231:66">s</name><operator pos:start="231:67" pos:end="231:68">-&gt;</operator><name pos:start="231:69" pos:end="231:88">coded_picture_number</name></name><operator pos:start="231:89" pos:end="231:90">++</operator></expr>;</expr_stmt>

            <for pos:start="233:13" pos:end="241:13">for<control pos:start="233:16" pos:end="233:37">(<init pos:start="233:17" pos:end="233:20"><expr pos:start="233:17" pos:end="233:19"><name pos:start="233:17" pos:end="233:17">i</name><operator pos:start="233:18" pos:end="233:18">=</operator><literal type="number" pos:start="233:19" pos:end="233:19">0</literal></expr>;</init> <condition pos:start="233:22" pos:end="233:32"><expr pos:start="233:22" pos:end="233:31"><name pos:start="233:22" pos:end="233:22">i</name><operator pos:start="233:23" pos:end="233:23">&lt;</operator><name pos:start="233:24" pos:end="233:31">b_frames</name></expr>;</condition> <incr pos:start="233:34" pos:end="233:36"><expr pos:start="233:34" pos:end="233:36"><name pos:start="233:34" pos:end="233:34">i</name><operator pos:start="233:35" pos:end="233:36">++</operator></expr></incr>)</control><block pos:start="233:38" pos:end="241:13">{<block_content pos:start="235:17" pos:end="239:97">

                <expr_stmt pos:start="235:17" pos:end="235:69"><expr pos:start="235:17" pos:end="235:68"><name pos:start="235:17" pos:end="235:47"><name pos:start="235:17" pos:end="235:17">s</name><operator pos:start="235:18" pos:end="235:19">-&gt;</operator><name pos:start="235:20" pos:end="235:42">reordered_input_picture</name><index pos:start="235:43" pos:end="235:47">[<expr pos:start="235:44" pos:end="235:46"><name pos:start="235:44" pos:end="235:44">i</name><operator pos:start="235:45" pos:end="235:45">+</operator><literal type="number" pos:start="235:46" pos:end="235:46">1</literal></expr>]</index></name><operator pos:start="235:48" pos:end="235:48">=</operator> <name pos:start="235:50" pos:end="235:68"><name pos:start="235:50" pos:end="235:50">s</name><operator pos:start="235:51" pos:end="235:52">-&gt;</operator><name pos:start="235:53" pos:end="235:65">input_picture</name><index pos:start="235:66" pos:end="235:68">[<expr pos:start="235:67" pos:end="235:67"><name pos:start="235:67" pos:end="235:67">i</name></expr>]</index></name></expr>;</expr_stmt>

                <expr_stmt pos:start="237:17" pos:end="237:67"><expr pos:start="237:17" pos:end="237:66"><name pos:start="237:17" pos:end="237:47"><name pos:start="237:17" pos:end="237:17">s</name><operator pos:start="237:18" pos:end="237:19">-&gt;</operator><name pos:start="237:20" pos:end="237:42">reordered_input_picture</name><index pos:start="237:43" pos:end="237:47">[<expr pos:start="237:44" pos:end="237:46"><name pos:start="237:44" pos:end="237:44">i</name><operator pos:start="237:45" pos:end="237:45">+</operator><literal type="number" pos:start="237:46" pos:end="237:46">1</literal></expr>]</index></name><operator pos:start="237:48" pos:end="237:49">-&gt;</operator><name pos:start="237:50" pos:end="237:58">pict_type</name><operator pos:start="237:59" pos:end="237:59">=</operator> <name pos:start="237:61" pos:end="237:66">B_TYPE</name></expr>;</expr_stmt>

                <expr_stmt pos:start="239:17" pos:end="239:97"><expr pos:start="239:17" pos:end="239:96"><name pos:start="239:17" pos:end="239:47"><name pos:start="239:17" pos:end="239:17">s</name><operator pos:start="239:18" pos:end="239:19">-&gt;</operator><name pos:start="239:20" pos:end="239:42">reordered_input_picture</name><index pos:start="239:43" pos:end="239:47">[<expr pos:start="239:44" pos:end="239:46"><name pos:start="239:44" pos:end="239:44">i</name><operator pos:start="239:45" pos:end="239:45">+</operator><literal type="number" pos:start="239:46" pos:end="239:46">1</literal></expr>]</index></name><operator pos:start="239:48" pos:end="239:49">-&gt;</operator><name pos:start="239:50" pos:end="239:69">coded_picture_number</name><operator pos:start="239:70" pos:end="239:70">=</operator> <name pos:start="239:72" pos:end="239:94"><name pos:start="239:72" pos:end="239:72">s</name><operator pos:start="239:73" pos:end="239:74">-&gt;</operator><name pos:start="239:75" pos:end="239:94">coded_picture_number</name></name><operator pos:start="239:95" pos:end="239:96">++</operator></expr>;</expr_stmt>

            </block_content>}</block></for>

        </block_content>}</block></else></if_stmt>

    </block_content>}</block></if></if_stmt>

<label pos:start="247:1" pos:end="247:14"><name pos:start="247:1" pos:end="247:13">no_output_pic</name>:</label>

    <if_stmt pos:start="249:5" pos:end="329:5"><if pos:start="249:5" pos:end="325:5">if<condition pos:start="249:7" pos:end="249:37">(<expr pos:start="249:8" pos:end="249:36"><name pos:start="249:8" pos:end="249:36"><name pos:start="249:8" pos:end="249:8">s</name><operator pos:start="249:9" pos:end="249:10">-&gt;</operator><name pos:start="249:11" pos:end="249:33">reordered_input_picture</name><index pos:start="249:34" pos:end="249:36">[<expr pos:start="249:35" pos:end="249:35"><literal type="number" pos:start="249:35" pos:end="249:35">0</literal></expr>]</index></name></expr>)</condition><block pos:start="249:38" pos:end="325:5">{<block_content pos:start="251:9" pos:end="321:65">

        <expr_stmt pos:start="251:9" pos:end="251:107"><expr pos:start="251:9" pos:end="251:106"><name pos:start="251:9" pos:end="251:37"><name pos:start="251:9" pos:end="251:9">s</name><operator pos:start="251:10" pos:end="251:11">-&gt;</operator><name pos:start="251:12" pos:end="251:34">reordered_input_picture</name><index pos:start="251:35" pos:end="251:37">[<expr pos:start="251:36" pos:end="251:36"><literal type="number" pos:start="251:36" pos:end="251:36">0</literal></expr>]</index></name><operator pos:start="251:38" pos:end="251:39">-&gt;</operator><name pos:start="251:40" pos:end="251:48">reference</name><operator pos:start="251:49" pos:end="251:49">=</operator> <ternary pos:start="251:51" pos:end="251:106"><condition pos:start="251:51" pos:end="251:100"><expr pos:start="251:51" pos:end="251:98"><name pos:start="251:51" pos:end="251:79"><name pos:start="251:51" pos:end="251:51">s</name><operator pos:start="251:52" pos:end="251:53">-&gt;</operator><name pos:start="251:54" pos:end="251:76">reordered_input_picture</name><index pos:start="251:77" pos:end="251:79">[<expr pos:start="251:78" pos:end="251:78"><literal type="number" pos:start="251:78" pos:end="251:78">0</literal></expr>]</index></name><operator pos:start="251:80" pos:end="251:81">-&gt;</operator><name pos:start="251:82" pos:end="251:90">pict_type</name><operator pos:start="251:91" pos:end="251:92">!=</operator><name pos:start="251:93" pos:end="251:98">B_TYPE</name></expr> ?</condition><then pos:start="251:102" pos:end="251:102"> <expr pos:start="251:102" pos:end="251:102"><literal type="number" pos:start="251:102" pos:end="251:102">3</literal></expr> </then><else pos:start="251:104" pos:end="251:106">: <expr pos:start="251:106" pos:end="251:106"><literal type="number" pos:start="251:106" pos:end="251:106">0</literal></expr></else></ternary></expr>;</expr_stmt>



        <expr_stmt pos:start="255:9" pos:end="255:69"><expr pos:start="255:9" pos:end="255:68"><call pos:start="255:9" pos:end="255:68"><name pos:start="255:9" pos:end="255:20">copy_picture</name><argument_list pos:start="255:21" pos:end="255:68">(<argument pos:start="255:22" pos:end="255:36"><expr pos:start="255:22" pos:end="255:36"><operator pos:start="255:22" pos:end="255:22">&amp;</operator><name pos:start="255:23" pos:end="255:36"><name pos:start="255:23" pos:end="255:23">s</name><operator pos:start="255:24" pos:end="255:25">-&gt;</operator><name pos:start="255:26" pos:end="255:36">new_picture</name></name></expr></argument>, <argument pos:start="255:39" pos:end="255:67"><expr pos:start="255:39" pos:end="255:67"><name pos:start="255:39" pos:end="255:67"><name pos:start="255:39" pos:end="255:39">s</name><operator pos:start="255:40" pos:end="255:41">-&gt;</operator><name pos:start="255:42" pos:end="255:64">reordered_input_picture</name><index pos:start="255:65" pos:end="255:67">[<expr pos:start="255:66" pos:end="255:66"><literal type="number" pos:start="255:66" pos:end="255:66">0</literal></expr>]</index></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>



        <if_stmt pos:start="259:9" pos:end="315:9"><if pos:start="259:9" pos:end="295:9">if<condition pos:start="259:11" pos:end="259:72">(<expr pos:start="259:12" pos:end="259:71"><name pos:start="259:12" pos:end="259:40"><name pos:start="259:12" pos:end="259:12">s</name><operator pos:start="259:13" pos:end="259:14">-&gt;</operator><name pos:start="259:15" pos:end="259:37">reordered_input_picture</name><index pos:start="259:38" pos:end="259:40">[<expr pos:start="259:39" pos:end="259:39"><literal type="number" pos:start="259:39" pos:end="259:39">0</literal></expr>]</index></name><operator pos:start="259:41" pos:end="259:42">-&gt;</operator><name pos:start="259:43" pos:end="259:46">type</name> <operator pos:start="259:48" pos:end="259:49">==</operator> <name pos:start="259:51" pos:end="259:71">FF_BUFFER_TYPE_SHARED</name></expr>)</condition><block pos:start="259:73" pos:end="295:9">{<block_content pos:start="265:13" pos:end="293:40">

            <comment type="line" pos:start="261:13" pos:end="261:121">// input is a shared pix, so we can't modifiy it -&gt; alloc a new one &amp; ensure that the shared one is reuseable</comment>



            <decl_stmt pos:start="265:13" pos:end="265:48"><decl pos:start="265:13" pos:end="265:47"><type pos:start="265:13" pos:end="265:15"><name pos:start="265:13" pos:end="265:15">int</name></type> <name pos:start="265:17" pos:end="265:17">i</name><init pos:start="265:18" pos:end="265:47">= <expr pos:start="265:20" pos:end="265:47"><call pos:start="265:20" pos:end="265:47"><name pos:start="265:20" pos:end="265:41">ff_find_unused_picture</name><argument_list pos:start="265:42" pos:end="265:47">(<argument pos:start="265:43" pos:end="265:43"><expr pos:start="265:43" pos:end="265:43"><name pos:start="265:43" pos:end="265:43">s</name></expr></argument>, <argument pos:start="265:46" pos:end="265:46"><expr pos:start="265:46" pos:end="265:46"><literal type="number" pos:start="265:46" pos:end="265:46">0</literal></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>

            <decl_stmt pos:start="267:13" pos:end="267:41"><decl pos:start="267:13" pos:end="267:40"><type pos:start="267:13" pos:end="267:21"><name pos:start="267:13" pos:end="267:19">Picture</name> <modifier pos:start="267:21" pos:end="267:21">*</modifier></type><name pos:start="267:22" pos:end="267:24">pic</name><init pos:start="267:25" pos:end="267:40">= <expr pos:start="267:27" pos:end="267:40"><operator pos:start="267:27" pos:end="267:27">&amp;</operator><name pos:start="267:28" pos:end="267:40"><name pos:start="267:28" pos:end="267:28">s</name><operator pos:start="267:29" pos:end="267:30">-&gt;</operator><name pos:start="267:31" pos:end="267:37">picture</name><index pos:start="267:38" pos:end="267:40">[<expr pos:start="267:39" pos:end="267:39"><name pos:start="267:39" pos:end="267:39">i</name></expr>]</index></name></expr></init></decl>;</decl_stmt>



            <comment type="block" pos:start="271:13" pos:end="271:50">/* mark us unused / free shared pic */</comment>

            <for pos:start="273:13" pos:end="275:61">for<control pos:start="273:16" pos:end="273:30">(<init pos:start="273:17" pos:end="273:20"><expr pos:start="273:17" pos:end="273:19"><name pos:start="273:17" pos:end="273:17">i</name><operator pos:start="273:18" pos:end="273:18">=</operator><literal type="number" pos:start="273:19" pos:end="273:19">0</literal></expr>;</init> <condition pos:start="273:22" pos:end="273:25"><expr pos:start="273:22" pos:end="273:24"><name pos:start="273:22" pos:end="273:22">i</name><operator pos:start="273:23" pos:end="273:23">&lt;</operator><literal type="number" pos:start="273:24" pos:end="273:24">4</literal></expr>;</condition> <incr pos:start="273:27" pos:end="273:29"><expr pos:start="273:27" pos:end="273:29"><name pos:start="273:27" pos:end="273:27">i</name><operator pos:start="273:28" pos:end="273:29">++</operator></expr></incr>)</control><block type="pseudo" pos:start="275:17" pos:end="275:61"><block_content pos:start="275:17" pos:end="275:61">

                <expr_stmt pos:start="275:17" pos:end="275:61"><expr pos:start="275:17" pos:end="275:60"><name pos:start="275:17" pos:end="275:45"><name pos:start="275:17" pos:end="275:17">s</name><operator pos:start="275:18" pos:end="275:19">-&gt;</operator><name pos:start="275:20" pos:end="275:42">reordered_input_picture</name><index pos:start="275:43" pos:end="275:45">[<expr pos:start="275:44" pos:end="275:44"><literal type="number" pos:start="275:44" pos:end="275:44">0</literal></expr>]</index></name><operator pos:start="275:46" pos:end="275:47">-&gt;</operator><name pos:start="275:48" pos:end="275:54"><name pos:start="275:48" pos:end="275:51">data</name><index pos:start="275:52" pos:end="275:54">[<expr pos:start="275:53" pos:end="275:53"><name pos:start="275:53" pos:end="275:53">i</name></expr>]</index></name><operator pos:start="275:55" pos:end="275:55">=</operator> <name pos:start="275:57" pos:end="275:60">NULL</name></expr>;</expr_stmt></block_content></block></for>

            <expr_stmt pos:start="277:13" pos:end="277:51"><expr pos:start="277:13" pos:end="277:50"><name pos:start="277:13" pos:end="277:41"><name pos:start="277:13" pos:end="277:13">s</name><operator pos:start="277:14" pos:end="277:15">-&gt;</operator><name pos:start="277:16" pos:end="277:38">reordered_input_picture</name><index pos:start="277:39" pos:end="277:41">[<expr pos:start="277:40" pos:end="277:40"><literal type="number" pos:start="277:40" pos:end="277:40">0</literal></expr>]</index></name><operator pos:start="277:42" pos:end="277:43">-&gt;</operator><name pos:start="277:44" pos:end="277:47">type</name><operator pos:start="277:48" pos:end="277:48">=</operator> <literal type="number" pos:start="277:50" pos:end="277:50">0</literal></expr>;</expr_stmt>



            <expr_stmt pos:start="281:13" pos:end="281:83"><expr pos:start="281:13" pos:end="281:82"><name pos:start="281:13" pos:end="281:26"><name pos:start="281:13" pos:end="281:15">pic</name><operator pos:start="281:16" pos:end="281:17">-&gt;</operator><name pos:start="281:18" pos:end="281:26">reference</name></name>              <operator pos:start="281:41" pos:end="281:41">=</operator> <name pos:start="281:43" pos:end="281:71"><name pos:start="281:43" pos:end="281:43">s</name><operator pos:start="281:44" pos:end="281:45">-&gt;</operator><name pos:start="281:46" pos:end="281:68">reordered_input_picture</name><index pos:start="281:69" pos:end="281:71">[<expr pos:start="281:70" pos:end="281:70"><literal type="number" pos:start="281:70" pos:end="281:70">0</literal></expr>]</index></name><operator pos:start="281:72" pos:end="281:73">-&gt;</operator><name pos:start="281:74" pos:end="281:82">reference</name></expr>;</expr_stmt>



            <expr_stmt pos:start="285:13" pos:end="285:37"><expr pos:start="285:13" pos:end="285:36"><call pos:start="285:13" pos:end="285:36"><name pos:start="285:13" pos:end="285:25">alloc_picture</name><argument_list pos:start="285:26" pos:end="285:36">(<argument pos:start="285:27" pos:end="285:27"><expr pos:start="285:27" pos:end="285:27"><name pos:start="285:27" pos:end="285:27">s</name></expr></argument>, <argument pos:start="285:30" pos:end="285:32"><expr pos:start="285:30" pos:end="285:32"><name pos:start="285:30" pos:end="285:32">pic</name></expr></argument>, <argument pos:start="285:35" pos:end="285:35"><expr pos:start="285:35" pos:end="285:35"><literal type="number" pos:start="285:35" pos:end="285:35">0</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>



            <expr_stmt pos:start="289:13" pos:end="289:95"><expr pos:start="289:13" pos:end="289:94"><call pos:start="289:13" pos:end="289:94"><name pos:start="289:13" pos:end="289:35">copy_picture_attributes</name><argument_list pos:start="289:36" pos:end="289:94">(<argument pos:start="289:37" pos:end="289:37"><expr pos:start="289:37" pos:end="289:37"><name pos:start="289:37" pos:end="289:37">s</name></expr></argument>, <argument pos:start="289:40" pos:end="289:52"><expr pos:start="289:40" pos:end="289:52"><operator pos:start="289:40" pos:end="289:40">(</operator><name pos:start="289:41" pos:end="289:47">AVFrame</name><operator pos:start="289:48" pos:end="289:48">*</operator><operator pos:start="289:49" pos:end="289:49">)</operator><name pos:start="289:50" pos:end="289:52">pic</name></expr></argument>, <argument pos:start="289:55" pos:end="289:93"><expr pos:start="289:55" pos:end="289:93"><operator pos:start="289:55" pos:end="289:55">(</operator><name pos:start="289:56" pos:end="289:62">AVFrame</name><operator pos:start="289:63" pos:end="289:63">*</operator><operator pos:start="289:64" pos:end="289:64">)</operator><name pos:start="289:65" pos:end="289:93"><name pos:start="289:65" pos:end="289:65">s</name><operator pos:start="289:66" pos:end="289:67">-&gt;</operator><name pos:start="289:68" pos:end="289:90">reordered_input_picture</name><index pos:start="289:91" pos:end="289:93">[<expr pos:start="289:92" pos:end="289:92"><literal type="number" pos:start="289:92" pos:end="289:92">0</literal></expr>]</index></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>



            <expr_stmt pos:start="293:13" pos:end="293:40"><expr pos:start="293:13" pos:end="293:39"><name pos:start="293:13" pos:end="293:34"><name pos:start="293:13" pos:end="293:13">s</name><operator pos:start="293:14" pos:end="293:15">-&gt;</operator><name pos:start="293:16" pos:end="293:34">current_picture_ptr</name></name><operator pos:start="293:35" pos:end="293:35">=</operator> <name pos:start="293:37" pos:end="293:39">pic</name></expr>;</expr_stmt>

        </block_content>}</block></if><else pos:start="295:10" pos:end="315:9">else<block pos:start="295:14" pos:end="315:9">{<block_content pos:start="301:13" pos:end="313:13">

            <comment type="line" pos:start="297:13" pos:end="297:72">// input is not a shared pix -&gt; reuse buffer for current_pix</comment>



            <expr_stmt pos:start="301:13" pos:end="303:84"><expr pos:start="301:13" pos:end="303:83"><call pos:start="301:13" pos:end="303:83"><name pos:start="301:13" pos:end="301:18">assert</name><argument_list pos:start="301:19" pos:end="303:83">(   <argument pos:start="301:23" pos:end="303:82"><expr pos:start="301:23" pos:end="303:82"><name pos:start="301:23" pos:end="301:51"><name pos:start="301:23" pos:end="301:23">s</name><operator pos:start="301:24" pos:end="301:25">-&gt;</operator><name pos:start="301:26" pos:end="301:48">reordered_input_picture</name><index pos:start="301:49" pos:end="301:51">[<expr pos:start="301:50" pos:end="301:50"><literal type="number" pos:start="301:50" pos:end="301:50">0</literal></expr>]</index></name><operator pos:start="301:52" pos:end="301:53">-&gt;</operator><name pos:start="301:54" pos:end="301:57">type</name><operator pos:start="301:58" pos:end="301:59">==</operator><name pos:start="301:60" pos:end="301:78">FF_BUFFER_TYPE_USER</name>

                   <operator pos:start="303:20" pos:end="303:21">||</operator> <name pos:start="303:23" pos:end="303:51"><name pos:start="303:23" pos:end="303:23">s</name><operator pos:start="303:24" pos:end="303:25">-&gt;</operator><name pos:start="303:26" pos:end="303:48">reordered_input_picture</name><index pos:start="303:49" pos:end="303:51">[<expr pos:start="303:50" pos:end="303:50"><literal type="number" pos:start="303:50" pos:end="303:50">0</literal></expr>]</index></name><operator pos:start="303:52" pos:end="303:53">-&gt;</operator><name pos:start="303:54" pos:end="303:57">type</name><operator pos:start="303:58" pos:end="303:59">==</operator><name pos:start="303:60" pos:end="303:82">FF_BUFFER_TYPE_INTERNAL</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>



            <expr_stmt pos:start="307:13" pos:end="307:66"><expr pos:start="307:13" pos:end="307:65"><name pos:start="307:13" pos:end="307:34"><name pos:start="307:13" pos:end="307:13">s</name><operator pos:start="307:14" pos:end="307:15">-&gt;</operator><name pos:start="307:16" pos:end="307:34">current_picture_ptr</name></name><operator pos:start="307:35" pos:end="307:35">=</operator> <name pos:start="307:37" pos:end="307:65"><name pos:start="307:37" pos:end="307:37">s</name><operator pos:start="307:38" pos:end="307:39">-&gt;</operator><name pos:start="307:40" pos:end="307:62">reordered_input_picture</name><index pos:start="307:63" pos:end="307:65">[<expr pos:start="307:64" pos:end="307:64"><literal type="number" pos:start="307:64" pos:end="307:64">0</literal></expr>]</index></name></expr>;</expr_stmt>

            <for pos:start="309:13" pos:end="313:13">for<control pos:start="309:16" pos:end="309:30">(<init pos:start="309:17" pos:end="309:20"><expr pos:start="309:17" pos:end="309:19"><name pos:start="309:17" pos:end="309:17">i</name><operator pos:start="309:18" pos:end="309:18">=</operator><literal type="number" pos:start="309:19" pos:end="309:19">0</literal></expr>;</init> <condition pos:start="309:22" pos:end="309:25"><expr pos:start="309:22" pos:end="309:24"><name pos:start="309:22" pos:end="309:22">i</name><operator pos:start="309:23" pos:end="309:23">&lt;</operator><literal type="number" pos:start="309:24" pos:end="309:24">4</literal></expr>;</condition> <incr pos:start="309:27" pos:end="309:29"><expr pos:start="309:27" pos:end="309:29"><name pos:start="309:27" pos:end="309:27">i</name><operator pos:start="309:28" pos:end="309:29">++</operator></expr></incr>)</control><block pos:start="309:31" pos:end="313:13">{<block_content pos:start="311:17" pos:end="311:56">

                <expr_stmt pos:start="311:17" pos:end="311:56"><expr pos:start="311:17" pos:end="311:55"><name pos:start="311:17" pos:end="311:38"><name pos:start="311:17" pos:end="311:17">s</name><operator pos:start="311:18" pos:end="311:19">-&gt;</operator><name pos:start="311:20" pos:end="311:30">new_picture</name><operator pos:start="311:31" pos:end="311:31">.</operator><name pos:start="311:32" pos:end="311:35">data</name><index pos:start="311:36" pos:end="311:38">[<expr pos:start="311:37" pos:end="311:37"><name pos:start="311:37" pos:end="311:37">i</name></expr>]</index></name><operator pos:start="311:39" pos:end="311:40">+=</operator> <name pos:start="311:42" pos:end="311:55">INPLACE_OFFSET</name></expr>;</expr_stmt>

            </block_content>}</block></for>

        </block_content>}</block></else></if_stmt>

        <expr_stmt pos:start="317:9" pos:end="317:66"><expr pos:start="317:9" pos:end="317:65"><call pos:start="317:9" pos:end="317:65"><name pos:start="317:9" pos:end="317:20">copy_picture</name><argument_list pos:start="317:21" pos:end="317:65">(<argument pos:start="317:22" pos:end="317:40"><expr pos:start="317:22" pos:end="317:40"><operator pos:start="317:22" pos:end="317:22">&amp;</operator><name pos:start="317:23" pos:end="317:40"><name pos:start="317:23" pos:end="317:23">s</name><operator pos:start="317:24" pos:end="317:25">-&gt;</operator><name pos:start="317:26" pos:end="317:40">current_picture</name></name></expr></argument>, <argument pos:start="317:43" pos:end="317:64"><expr pos:start="317:43" pos:end="317:64"><name pos:start="317:43" pos:end="317:64"><name pos:start="317:43" pos:end="317:43">s</name><operator pos:start="317:44" pos:end="317:45">-&gt;</operator><name pos:start="317:46" pos:end="317:64">current_picture_ptr</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>



        <expr_stmt pos:start="321:9" pos:end="321:65"><expr pos:start="321:9" pos:end="321:64"><name pos:start="321:9" pos:end="321:25"><name pos:start="321:9" pos:end="321:9">s</name><operator pos:start="321:10" pos:end="321:11">-&gt;</operator><name pos:start="321:12" pos:end="321:25">picture_number</name></name><operator pos:start="321:26" pos:end="321:26">=</operator> <name pos:start="321:28" pos:end="321:64"><name pos:start="321:28" pos:end="321:28">s</name><operator pos:start="321:29" pos:end="321:30">-&gt;</operator><name pos:start="321:31" pos:end="321:41">new_picture</name><operator pos:start="321:42" pos:end="321:42">.</operator><name pos:start="321:43" pos:end="321:64">display_picture_number</name></name></expr>;</expr_stmt>

<comment type="line" pos:start="323:1" pos:end="323:40">//printf("dpn:%d\n", s-&gt;picture_number);</comment>

    </block_content>}</block></if><else pos:start="325:6" pos:end="329:5">else<block pos:start="325:10" pos:end="329:5">{<block_content pos:start="327:8" pos:end="327:51">

       <expr_stmt pos:start="327:8" pos:end="327:51"><expr pos:start="327:8" pos:end="327:50"><call pos:start="327:8" pos:end="327:50"><name pos:start="327:8" pos:end="327:13">memset</name><argument_list pos:start="327:14" pos:end="327:50">(<argument pos:start="327:15" pos:end="327:29"><expr pos:start="327:15" pos:end="327:29"><operator pos:start="327:15" pos:end="327:15">&amp;</operator><name pos:start="327:16" pos:end="327:29"><name pos:start="327:16" pos:end="327:16">s</name><operator pos:start="327:17" pos:end="327:18">-&gt;</operator><name pos:start="327:19" pos:end="327:29">new_picture</name></name></expr></argument>, <argument pos:start="327:32" pos:end="327:32"><expr pos:start="327:32" pos:end="327:32"><literal type="number" pos:start="327:32" pos:end="327:32">0</literal></expr></argument>, <argument pos:start="327:35" pos:end="327:49"><expr pos:start="327:35" pos:end="327:49"><sizeof pos:start="327:35" pos:end="327:49">sizeof<argument_list pos:start="327:41" pos:end="327:49">(<argument pos:start="327:42" pos:end="327:48"><expr pos:start="327:42" pos:end="327:48"><name pos:start="327:42" pos:end="327:48">Picture</name></expr></argument>)</argument_list></sizeof></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    </block_content>}</block></else></if_stmt>

</block_content>}</block></function>
</unit>
