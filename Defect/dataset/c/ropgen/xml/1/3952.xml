<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<unit xmlns="http://www.srcML.org/srcML/src" xmlns:pos="http://www.srcML.org/srcML/position" revision="1.0.0" language="C" filename="dataset/ropgen/aug/1/3952.c" pos:tabs="8"><function pos:start="1:1" pos:end="231:1"><type pos:start="1:1" pos:end="1:10"><specifier pos:start="1:1" pos:end="1:6">static</specifier> <name pos:start="1:8" pos:end="1:10">int</name></type> <name pos:start="1:12" pos:end="1:29">hls_append_segment</name><parameter_list pos:start="1:30" pos:end="3:56">(<parameter pos:start="1:31" pos:end="1:55"><decl pos:start="1:31" pos:end="1:55"><type pos:start="1:31" pos:end="1:55"><name pos:start="1:31" pos:end="1:52"><name pos:start="1:31" pos:end="1:36">struct</name> <name pos:start="1:38" pos:end="1:52">AVFormatContext</name></name> <modifier pos:start="1:54" pos:end="1:54">*</modifier></type><name pos:start="1:55" pos:end="1:55">s</name></decl></parameter>, <parameter pos:start="1:58" pos:end="1:72"><decl pos:start="1:58" pos:end="1:72"><type pos:start="1:58" pos:end="1:72"><name pos:start="1:58" pos:end="1:67">HLSContext</name> <modifier pos:start="1:69" pos:end="1:69">*</modifier></type><name pos:start="1:70" pos:end="1:72">hls</name></decl></parameter>, <parameter pos:start="1:75" pos:end="1:89"><decl pos:start="1:75" pos:end="1:89"><type pos:start="1:75" pos:end="1:89"><name pos:start="1:75" pos:end="1:80">double</name></type> <name pos:start="1:82" pos:end="1:89">duration</name></decl></parameter>,

                              <parameter pos:start="3:31" pos:end="3:41"><decl pos:start="3:31" pos:end="3:41"><type pos:start="3:31" pos:end="3:41"><name pos:start="3:31" pos:end="3:37">int64_t</name></type> <name pos:start="3:39" pos:end="3:41">pos</name></decl></parameter>, <parameter pos:start="3:44" pos:end="3:55"><decl pos:start="3:44" pos:end="3:55"><type pos:start="3:44" pos:end="3:55"><name pos:start="3:44" pos:end="3:50">int64_t</name></type> <name pos:start="3:52" pos:end="3:55">size</name></decl></parameter>)</parameter_list>

<block pos:start="5:1" pos:end="231:1">{<block_content pos:start="7:5" pos:end="229:13">

    <decl_stmt pos:start="7:5" pos:end="7:44"><decl pos:start="7:5" pos:end="7:43"><type pos:start="7:5" pos:end="7:16"><name pos:start="7:5" pos:end="7:14">HLSSegment</name> <modifier pos:start="7:16" pos:end="7:16">*</modifier></type><name pos:start="7:17" pos:end="7:18">en</name> <init pos:start="7:20" pos:end="7:43">= <expr pos:start="7:22" pos:end="7:43"><call pos:start="7:22" pos:end="7:43"><name pos:start="7:22" pos:end="7:30">av_malloc</name><argument_list pos:start="7:31" pos:end="7:43">(<argument pos:start="7:32" pos:end="7:42"><expr pos:start="7:32" pos:end="7:42"><sizeof pos:start="7:32" pos:end="7:42">sizeof<argument_list pos:start="7:38" pos:end="7:42">(<argument pos:start="7:39" pos:end="7:41"><expr pos:start="7:39" pos:end="7:41"><operator pos:start="7:39" pos:end="7:39">*</operator><name pos:start="7:40" pos:end="7:41">en</name></expr></argument>)</argument_list></sizeof></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>

    <decl_stmt pos:start="9:5" pos:end="9:26"><decl pos:start="9:5" pos:end="9:25"><type pos:start="9:5" pos:end="9:17"><specifier pos:start="9:5" pos:end="9:9">const</specifier> <name pos:start="9:11" pos:end="9:14">char</name>  <modifier pos:start="9:17" pos:end="9:17">*</modifier></type><name pos:start="9:18" pos:end="9:25">filename</name></decl>;</decl_stmt>

    <decl_stmt pos:start="11:5" pos:end="11:12"><decl pos:start="11:5" pos:end="11:11"><type pos:start="11:5" pos:end="11:7"><name pos:start="11:5" pos:end="11:7">int</name></type> <name pos:start="11:9" pos:end="11:11">ret</name></decl>;</decl_stmt>



    <if_stmt pos:start="15:5" pos:end="17:31"><if pos:start="15:5" pos:end="17:31">if <condition pos:start="15:8" pos:end="15:12">(<expr pos:start="15:9" pos:end="15:11"><operator pos:start="15:9" pos:end="15:9">!</operator><name pos:start="15:10" pos:end="15:11">en</name></expr>)</condition><block type="pseudo" pos:start="17:9" pos:end="17:31"><block_content pos:start="17:9" pos:end="17:31">

        <return pos:start="17:9" pos:end="17:31">return <expr pos:start="17:16" pos:end="17:30"><call pos:start="17:16" pos:end="17:30"><name pos:start="17:16" pos:end="17:22">AVERROR</name><argument_list pos:start="17:23" pos:end="17:30">(<argument pos:start="17:24" pos:end="17:29"><expr pos:start="17:24" pos:end="17:29"><name pos:start="17:24" pos:end="17:29">ENOMEM</name></expr></argument>)</argument_list></call></expr>;</return></block_content></block></if></if_stmt>



    <if_stmt pos:start="21:5" pos:end="97:5"><if pos:start="21:5" pos:end="97:5">if <condition pos:start="21:8" pos:end="23:56">(<expr pos:start="21:9" pos:end="23:55"><operator pos:start="21:9" pos:end="21:9">(</operator><name pos:start="21:10" pos:end="21:19"><name pos:start="21:10" pos:end="21:12">hls</name><operator pos:start="21:13" pos:end="21:14">-&gt;</operator><name pos:start="21:15" pos:end="21:19">flags</name></name> <operator pos:start="21:21" pos:end="21:21">&amp;</operator> <operator pos:start="21:23" pos:end="21:23">(</operator><name pos:start="21:24" pos:end="21:52">HLS_SECOND_LEVEL_SEGMENT_SIZE</name> <operator pos:start="21:54" pos:end="21:54">|</operator> <name pos:start="21:56" pos:end="21:88">HLS_SECOND_LEVEL_SEGMENT_DURATION</name><operator pos:start="21:89" pos:end="21:89">)</operator><operator pos:start="21:90" pos:end="21:90">)</operator> <operator pos:start="21:92" pos:end="21:93">&amp;&amp;</operator>

        <call pos:start="23:9" pos:end="23:55"><name pos:start="23:9" pos:end="23:14">strlen</name><argument_list pos:start="23:15" pos:end="23:55">(<argument pos:start="23:16" pos:end="23:54"><expr pos:start="23:16" pos:end="23:54"><name pos:start="23:16" pos:end="23:54"><name pos:start="23:16" pos:end="23:18">hls</name><operator pos:start="23:19" pos:end="23:20">-&gt;</operator><name pos:start="23:21" pos:end="23:54">current_segment_final_filename_fmt</name></name></expr></argument>)</argument_list></call></expr>)</condition> <block pos:start="23:58" pos:end="97:5">{<block_content pos:start="25:9" pos:end="95:30">

        <decl_stmt pos:start="25:9" pos:end="25:60"><decl pos:start="25:9" pos:end="25:59"><type pos:start="25:9" pos:end="25:14"><name pos:start="25:9" pos:end="25:12">char</name> <modifier pos:start="25:14" pos:end="25:14">*</modifier></type> <name pos:start="25:16" pos:end="25:27">old_filename</name> <init pos:start="25:29" pos:end="25:59">= <expr pos:start="25:31" pos:end="25:59"><call pos:start="25:31" pos:end="25:59"><name pos:start="25:31" pos:end="25:39">av_strdup</name><argument_list pos:start="25:40" pos:end="25:59">(<argument pos:start="25:41" pos:end="25:58"><expr pos:start="25:41" pos:end="25:58"><name pos:start="25:41" pos:end="25:58"><name pos:start="25:41" pos:end="25:43">hls</name><operator pos:start="25:44" pos:end="25:45">-&gt;</operator><name pos:start="25:46" pos:end="25:48">avf</name><operator pos:start="25:49" pos:end="25:50">-&gt;</operator><name pos:start="25:51" pos:end="25:58">filename</name></name></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>  <comment type="line" pos:start="25:63" pos:end="25:94">// %%s will be %s after strftime</comment>

        <expr_stmt pos:start="27:9" pos:end="27:108"><expr pos:start="27:9" pos:end="27:107"><call pos:start="27:9" pos:end="27:107"><name pos:start="27:9" pos:end="27:18">av_strlcpy</name><argument_list pos:start="27:19" pos:end="27:107">(<argument pos:start="27:20" pos:end="27:37"><expr pos:start="27:20" pos:end="27:37"><name pos:start="27:20" pos:end="27:37"><name pos:start="27:20" pos:end="27:22">hls</name><operator pos:start="27:23" pos:end="27:24">-&gt;</operator><name pos:start="27:25" pos:end="27:27">avf</name><operator pos:start="27:28" pos:end="27:29">-&gt;</operator><name pos:start="27:30" pos:end="27:37">filename</name></name></expr></argument>, <argument pos:start="27:40" pos:end="27:78"><expr pos:start="27:40" pos:end="27:78"><name pos:start="27:40" pos:end="27:78"><name pos:start="27:40" pos:end="27:42">hls</name><operator pos:start="27:43" pos:end="27:44">-&gt;</operator><name pos:start="27:45" pos:end="27:78">current_segment_final_filename_fmt</name></name></expr></argument>, <argument pos:start="27:81" pos:end="27:106"><expr pos:start="27:81" pos:end="27:106"><sizeof pos:start="27:81" pos:end="27:106">sizeof<argument_list pos:start="27:87" pos:end="27:106">(<argument pos:start="27:88" pos:end="27:105"><expr pos:start="27:88" pos:end="27:105"><name pos:start="27:88" pos:end="27:105"><name pos:start="27:88" pos:end="27:90">hls</name><operator pos:start="27:91" pos:end="27:92">-&gt;</operator><name pos:start="27:93" pos:end="27:95">avf</name><operator pos:start="27:96" pos:end="27:97">-&gt;</operator><name pos:start="27:98" pos:end="27:105">filename</name></name></expr></argument>)</argument_list></sizeof></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <if_stmt pos:start="29:9" pos:end="59:9"><if pos:start="29:9" pos:end="59:9">if <condition pos:start="29:12" pos:end="29:55">(<expr pos:start="29:13" pos:end="29:54"><name pos:start="29:13" pos:end="29:22"><name pos:start="29:13" pos:end="29:15">hls</name><operator pos:start="29:16" pos:end="29:17">-&gt;</operator><name pos:start="29:18" pos:end="29:22">flags</name></name> <operator pos:start="29:24" pos:end="29:24">&amp;</operator> <name pos:start="29:26" pos:end="29:54">HLS_SECOND_LEVEL_SEGMENT_SIZE</name></expr>)</condition> <block pos:start="29:57" pos:end="59:9">{<block_content pos:start="31:13" pos:end="57:30">

            <decl_stmt pos:start="31:13" pos:end="31:60"><decl pos:start="31:13" pos:end="31:59"><type pos:start="31:13" pos:end="31:18"><name pos:start="31:13" pos:end="31:16">char</name> <modifier pos:start="31:18" pos:end="31:18">*</modifier></type> <name pos:start="31:20" pos:end="31:27">filename</name> <init pos:start="31:29" pos:end="31:59">= <expr pos:start="31:31" pos:end="31:59"><call pos:start="31:31" pos:end="31:59"><name pos:start="31:31" pos:end="31:39">av_strdup</name><argument_list pos:start="31:40" pos:end="31:59">(<argument pos:start="31:41" pos:end="31:58"><expr pos:start="31:41" pos:end="31:58"><name pos:start="31:41" pos:end="31:58"><name pos:start="31:41" pos:end="31:43">hls</name><operator pos:start="31:44" pos:end="31:45">-&gt;</operator><name pos:start="31:46" pos:end="31:48">avf</name><operator pos:start="31:49" pos:end="31:50">-&gt;</operator><name pos:start="31:51" pos:end="31:58">filename</name></name></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>  <comment type="line" pos:start="31:63" pos:end="31:94">// %%s will be %s after strftime</comment>

            <if_stmt pos:start="33:13" pos:end="35:39"><if pos:start="33:13" pos:end="35:39">if <condition pos:start="33:16" pos:end="33:26">(<expr pos:start="33:17" pos:end="33:25"><operator pos:start="33:17" pos:end="33:17">!</operator><name pos:start="33:18" pos:end="33:25">filename</name></expr>)</condition><block type="pseudo" pos:start="35:17" pos:end="35:39"><block_content pos:start="35:17" pos:end="35:39">

                <return pos:start="35:17" pos:end="35:39">return <expr pos:start="35:24" pos:end="35:38"><call pos:start="35:24" pos:end="35:38"><name pos:start="35:24" pos:end="35:30">AVERROR</name><argument_list pos:start="35:31" pos:end="35:38">(<argument pos:start="35:32" pos:end="35:37"><expr pos:start="35:32" pos:end="35:37"><name pos:start="35:32" pos:end="35:37">ENOMEM</name></expr></argument>)</argument_list></call></expr>;</return></block_content></block></if></if_stmt>

            <if_stmt pos:start="37:13" pos:end="55:13"><if pos:start="37:13" pos:end="55:13">if <condition pos:start="37:16" pos:end="39:47">(<expr pos:start="37:17" pos:end="39:46"><call pos:start="37:17" pos:end="39:42"><name pos:start="37:17" pos:end="37:44">replace_int_data_in_filename</name><argument_list pos:start="37:45" pos:end="39:42">(<argument pos:start="37:46" pos:end="37:63"><expr pos:start="37:46" pos:end="37:63"><name pos:start="37:46" pos:end="37:63"><name pos:start="37:46" pos:end="37:48">hls</name><operator pos:start="37:49" pos:end="37:50">-&gt;</operator><name pos:start="37:51" pos:end="37:53">avf</name><operator pos:start="37:54" pos:end="37:55">-&gt;</operator><name pos:start="37:56" pos:end="37:63">filename</name></name></expr></argument>, <argument pos:start="37:66" pos:end="37:91"><expr pos:start="37:66" pos:end="37:91"><sizeof pos:start="37:66" pos:end="37:91">sizeof<argument_list pos:start="37:72" pos:end="37:91">(<argument pos:start="37:73" pos:end="37:90"><expr pos:start="37:73" pos:end="37:90"><name pos:start="37:73" pos:end="37:90"><name pos:start="37:73" pos:end="37:75">hls</name><operator pos:start="37:76" pos:end="37:77">-&gt;</operator><name pos:start="37:78" pos:end="37:80">avf</name><operator pos:start="37:81" pos:end="37:82">-&gt;</operator><name pos:start="37:83" pos:end="37:90">filename</name></name></expr></argument>)</argument_list></sizeof></expr></argument>,

                <argument pos:start="39:17" pos:end="39:24"><expr pos:start="39:17" pos:end="39:24"><name pos:start="39:17" pos:end="39:24">filename</name></expr></argument>, <argument pos:start="39:27" pos:end="39:29"><expr pos:start="39:27" pos:end="39:29"><literal type="char" pos:start="39:27" pos:end="39:29">'s'</literal></expr></argument>, <argument pos:start="39:32" pos:end="39:41"><expr pos:start="39:32" pos:end="39:41"><name pos:start="39:32" pos:end="39:34">pos</name> <operator pos:start="39:36" pos:end="39:36">+</operator> <name pos:start="39:38" pos:end="39:41">size</name></expr></argument>)</argument_list></call> <operator pos:start="39:44" pos:end="39:44">&lt;</operator> <literal type="number" pos:start="39:46" pos:end="39:46">1</literal></expr>)</condition> <block pos:start="39:49" pos:end="55:13">{<block_content pos:start="41:17" pos:end="53:39">

                <expr_stmt pos:start="41:17" pos:end="47:33"><expr pos:start="41:17" pos:end="47:32"><call pos:start="41:17" pos:end="47:32"><name pos:start="41:17" pos:end="41:22">av_log</name><argument_list pos:start="41:23" pos:end="47:32">(<argument pos:start="41:24" pos:end="41:26"><expr pos:start="41:24" pos:end="41:26"><name pos:start="41:24" pos:end="41:26">hls</name></expr></argument>, <argument pos:start="41:29" pos:end="41:40"><expr pos:start="41:29" pos:end="41:40"><name pos:start="41:29" pos:end="41:40">AV_LOG_ERROR</name></expr></argument>,

                       <argument pos:start="43:24" pos:end="45:80"><expr pos:start="43:24" pos:end="45:80"><literal type="string" pos:start="43:24" pos:end="43:78">"Invalid second level segment filename template '%s', "</literal>

                        <literal type="string" pos:start="45:25" pos:end="45:80">"you can try to remove second_level_segment_size flag\n"</literal></expr></argument>,

                       <argument pos:start="47:24" pos:end="47:31"><expr pos:start="47:24" pos:end="47:31"><name pos:start="47:24" pos:end="47:31">filename</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

                <expr_stmt pos:start="49:17" pos:end="49:34"><expr pos:start="49:17" pos:end="49:33"><call pos:start="49:17" pos:end="49:33"><name pos:start="49:17" pos:end="49:23">av_free</name><argument_list pos:start="49:24" pos:end="49:33">(<argument pos:start="49:25" pos:end="49:32"><expr pos:start="49:25" pos:end="49:32"><name pos:start="49:25" pos:end="49:32">filename</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

                <expr_stmt pos:start="51:17" pos:end="51:38"><expr pos:start="51:17" pos:end="51:37"><call pos:start="51:17" pos:end="51:37"><name pos:start="51:17" pos:end="51:23">av_free</name><argument_list pos:start="51:24" pos:end="51:37">(<argument pos:start="51:25" pos:end="51:36"><expr pos:start="51:25" pos:end="51:36"><name pos:start="51:25" pos:end="51:36">old_filename</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

                <return pos:start="53:17" pos:end="53:39">return <expr pos:start="53:24" pos:end="53:38"><call pos:start="53:24" pos:end="53:38"><name pos:start="53:24" pos:end="53:30">AVERROR</name><argument_list pos:start="53:31" pos:end="53:38">(<argument pos:start="53:32" pos:end="53:37"><expr pos:start="53:32" pos:end="53:37"><name pos:start="53:32" pos:end="53:37">EINVAL</name></expr></argument>)</argument_list></call></expr>;</return>

            </block_content>}</block></if></if_stmt>

            <expr_stmt pos:start="57:13" pos:end="57:30"><expr pos:start="57:13" pos:end="57:29"><call pos:start="57:13" pos:end="57:29"><name pos:start="57:13" pos:end="57:19">av_free</name><argument_list pos:start="57:20" pos:end="57:29">(<argument pos:start="57:21" pos:end="57:28"><expr pos:start="57:21" pos:end="57:28"><name pos:start="57:21" pos:end="57:28">filename</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        </block_content>}</block></if></if_stmt>

        <if_stmt pos:start="61:9" pos:end="91:9"><if pos:start="61:9" pos:end="91:9">if <condition pos:start="61:12" pos:end="61:59">(<expr pos:start="61:13" pos:end="61:58"><name pos:start="61:13" pos:end="61:22"><name pos:start="61:13" pos:end="61:15">hls</name><operator pos:start="61:16" pos:end="61:17">-&gt;</operator><name pos:start="61:18" pos:end="61:22">flags</name></name> <operator pos:start="61:24" pos:end="61:24">&amp;</operator> <name pos:start="61:26" pos:end="61:58">HLS_SECOND_LEVEL_SEGMENT_DURATION</name></expr>)</condition> <block pos:start="61:61" pos:end="91:9">{<block_content pos:start="63:13" pos:end="89:30">

            <decl_stmt pos:start="63:13" pos:end="63:60"><decl pos:start="63:13" pos:end="63:59"><type pos:start="63:13" pos:end="63:18"><name pos:start="63:13" pos:end="63:16">char</name> <modifier pos:start="63:18" pos:end="63:18">*</modifier></type> <name pos:start="63:20" pos:end="63:27">filename</name> <init pos:start="63:29" pos:end="63:59">= <expr pos:start="63:31" pos:end="63:59"><call pos:start="63:31" pos:end="63:59"><name pos:start="63:31" pos:end="63:39">av_strdup</name><argument_list pos:start="63:40" pos:end="63:59">(<argument pos:start="63:41" pos:end="63:58"><expr pos:start="63:41" pos:end="63:58"><name pos:start="63:41" pos:end="63:58"><name pos:start="63:41" pos:end="63:43">hls</name><operator pos:start="63:44" pos:end="63:45">-&gt;</operator><name pos:start="63:46" pos:end="63:48">avf</name><operator pos:start="63:49" pos:end="63:50">-&gt;</operator><name pos:start="63:51" pos:end="63:58">filename</name></name></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>  <comment type="line" pos:start="63:63" pos:end="63:94">// %%t will be %t after strftime</comment>

            <if_stmt pos:start="65:13" pos:end="67:39"><if pos:start="65:13" pos:end="67:39">if <condition pos:start="65:16" pos:end="65:26">(<expr pos:start="65:17" pos:end="65:25"><operator pos:start="65:17" pos:end="65:17">!</operator><name pos:start="65:18" pos:end="65:25">filename</name></expr>)</condition><block type="pseudo" pos:start="67:17" pos:end="67:39"><block_content pos:start="67:17" pos:end="67:39">

                <return pos:start="67:17" pos:end="67:39">return <expr pos:start="67:24" pos:end="67:38"><call pos:start="67:24" pos:end="67:38"><name pos:start="67:24" pos:end="67:30">AVERROR</name><argument_list pos:start="67:31" pos:end="67:38">(<argument pos:start="67:32" pos:end="67:37"><expr pos:start="67:32" pos:end="67:37"><name pos:start="67:32" pos:end="67:37">ENOMEM</name></expr></argument>)</argument_list></call></expr>;</return></block_content></block></if></if_stmt>

            <if_stmt pos:start="69:13" pos:end="87:13"><if pos:start="69:13" pos:end="87:13">if <condition pos:start="69:16" pos:end="71:72">(<expr pos:start="69:17" pos:end="71:71"><call pos:start="69:17" pos:end="71:67"><name pos:start="69:17" pos:end="69:44">replace_int_data_in_filename</name><argument_list pos:start="69:45" pos:end="71:67">(<argument pos:start="69:46" pos:end="69:63"><expr pos:start="69:46" pos:end="69:63"><name pos:start="69:46" pos:end="69:63"><name pos:start="69:46" pos:end="69:48">hls</name><operator pos:start="69:49" pos:end="69:50">-&gt;</operator><name pos:start="69:51" pos:end="69:53">avf</name><operator pos:start="69:54" pos:end="69:55">-&gt;</operator><name pos:start="69:56" pos:end="69:63">filename</name></name></expr></argument>, <argument pos:start="69:66" pos:end="69:91"><expr pos:start="69:66" pos:end="69:91"><sizeof pos:start="69:66" pos:end="69:91">sizeof<argument_list pos:start="69:72" pos:end="69:91">(<argument pos:start="69:73" pos:end="69:90"><expr pos:start="69:73" pos:end="69:90"><name pos:start="69:73" pos:end="69:90"><name pos:start="69:73" pos:end="69:75">hls</name><operator pos:start="69:76" pos:end="69:77">-&gt;</operator><name pos:start="69:78" pos:end="69:80">avf</name><operator pos:start="69:81" pos:end="69:82">-&gt;</operator><name pos:start="69:83" pos:end="69:90">filename</name></name></expr></argument>)</argument_list></sizeof></expr></argument>,

                <argument pos:start="71:17" pos:end="71:24"><expr pos:start="71:17" pos:end="71:24"><name pos:start="71:17" pos:end="71:24">filename</name></expr></argument>, <argument pos:start="71:27" pos:end="71:29"><expr pos:start="71:27" pos:end="71:29"><literal type="char" pos:start="71:27" pos:end="71:29">'t'</literal></expr></argument>,  <argument pos:start="71:33" pos:end="71:66"><expr pos:start="71:33" pos:end="71:66"><operator pos:start="71:33" pos:end="71:33">(</operator><name pos:start="71:34" pos:end="71:40">int64_t</name><operator pos:start="71:41" pos:end="71:41">)</operator><call pos:start="71:42" pos:end="71:66"><name pos:start="71:42" pos:end="71:46">round</name><argument_list pos:start="71:47" pos:end="71:66">(<argument pos:start="71:48" pos:end="71:65"><expr pos:start="71:48" pos:end="71:65"><literal type="number" pos:start="71:48" pos:end="71:54">1000000</literal> <operator pos:start="71:56" pos:end="71:56">*</operator> <name pos:start="71:58" pos:end="71:65">duration</name></expr></argument>)</argument_list></call></expr></argument>)</argument_list></call> <operator pos:start="71:69" pos:end="71:69">&lt;</operator> <literal type="number" pos:start="71:71" pos:end="71:71">1</literal></expr>)</condition> <block pos:start="71:74" pos:end="87:13">{<block_content pos:start="73:17" pos:end="85:39">

                <expr_stmt pos:start="73:17" pos:end="79:33"><expr pos:start="73:17" pos:end="79:32"><call pos:start="73:17" pos:end="79:32"><name pos:start="73:17" pos:end="73:22">av_log</name><argument_list pos:start="73:23" pos:end="79:32">(<argument pos:start="73:24" pos:end="73:26"><expr pos:start="73:24" pos:end="73:26"><name pos:start="73:24" pos:end="73:26">hls</name></expr></argument>, <argument pos:start="73:29" pos:end="73:40"><expr pos:start="73:29" pos:end="73:40"><name pos:start="73:29" pos:end="73:40">AV_LOG_ERROR</name></expr></argument>,

                       <argument pos:start="75:24" pos:end="77:80"><expr pos:start="75:24" pos:end="77:80"><literal type="string" pos:start="75:24" pos:end="75:78">"Invalid second level segment filename template '%s', "</literal>

                        <literal type="string" pos:start="77:25" pos:end="77:80">"you can try to remove second_level_segment_time flag\n"</literal></expr></argument>,

                       <argument pos:start="79:24" pos:end="79:31"><expr pos:start="79:24" pos:end="79:31"><name pos:start="79:24" pos:end="79:31">filename</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

                <expr_stmt pos:start="81:17" pos:end="81:34"><expr pos:start="81:17" pos:end="81:33"><call pos:start="81:17" pos:end="81:33"><name pos:start="81:17" pos:end="81:23">av_free</name><argument_list pos:start="81:24" pos:end="81:33">(<argument pos:start="81:25" pos:end="81:32"><expr pos:start="81:25" pos:end="81:32"><name pos:start="81:25" pos:end="81:32">filename</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

                <expr_stmt pos:start="83:17" pos:end="83:38"><expr pos:start="83:17" pos:end="83:37"><call pos:start="83:17" pos:end="83:37"><name pos:start="83:17" pos:end="83:23">av_free</name><argument_list pos:start="83:24" pos:end="83:37">(<argument pos:start="83:25" pos:end="83:36"><expr pos:start="83:25" pos:end="83:36"><name pos:start="83:25" pos:end="83:36">old_filename</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

                <return pos:start="85:17" pos:end="85:39">return <expr pos:start="85:24" pos:end="85:38"><call pos:start="85:24" pos:end="85:38"><name pos:start="85:24" pos:end="85:30">AVERROR</name><argument_list pos:start="85:31" pos:end="85:38">(<argument pos:start="85:32" pos:end="85:37"><expr pos:start="85:32" pos:end="85:37"><name pos:start="85:32" pos:end="85:37">EINVAL</name></expr></argument>)</argument_list></call></expr>;</return>

            </block_content>}</block></if></if_stmt>

            <expr_stmt pos:start="89:13" pos:end="89:30"><expr pos:start="89:13" pos:end="89:29"><call pos:start="89:13" pos:end="89:29"><name pos:start="89:13" pos:end="89:19">av_free</name><argument_list pos:start="89:20" pos:end="89:29">(<argument pos:start="89:21" pos:end="89:28"><expr pos:start="89:21" pos:end="89:28"><name pos:start="89:21" pos:end="89:28">filename</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        </block_content>}</block></if></if_stmt>

        <expr_stmt pos:start="93:9" pos:end="93:57"><expr pos:start="93:9" pos:end="93:56"><call pos:start="93:9" pos:end="93:56"><name pos:start="93:9" pos:end="93:17">ff_rename</name><argument_list pos:start="93:18" pos:end="93:56">(<argument pos:start="93:19" pos:end="93:30"><expr pos:start="93:19" pos:end="93:30"><name pos:start="93:19" pos:end="93:30">old_filename</name></expr></argument>, <argument pos:start="93:33" pos:end="93:50"><expr pos:start="93:33" pos:end="93:50"><name pos:start="93:33" pos:end="93:50"><name pos:start="93:33" pos:end="93:35">hls</name><operator pos:start="93:36" pos:end="93:37">-&gt;</operator><name pos:start="93:38" pos:end="93:40">avf</name><operator pos:start="93:41" pos:end="93:42">-&gt;</operator><name pos:start="93:43" pos:end="93:50">filename</name></name></expr></argument>, <argument pos:start="93:53" pos:end="93:55"><expr pos:start="93:53" pos:end="93:55"><name pos:start="93:53" pos:end="93:55">hls</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <expr_stmt pos:start="95:9" pos:end="95:30"><expr pos:start="95:9" pos:end="95:29"><call pos:start="95:9" pos:end="95:29"><name pos:start="95:9" pos:end="95:15">av_free</name><argument_list pos:start="95:16" pos:end="95:29">(<argument pos:start="95:17" pos:end="95:28"><expr pos:start="95:17" pos:end="95:28"><name pos:start="95:17" pos:end="95:28">old_filename</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    </block_content>}</block></if></if_stmt>





    <expr_stmt pos:start="103:5" pos:end="103:47"><expr pos:start="103:5" pos:end="103:46"><name pos:start="103:5" pos:end="103:12">filename</name> <operator pos:start="103:14" pos:end="103:14">=</operator> <call pos:start="103:16" pos:end="103:46"><name pos:start="103:16" pos:end="103:26">av_basename</name><argument_list pos:start="103:27" pos:end="103:46">(<argument pos:start="103:28" pos:end="103:45"><expr pos:start="103:28" pos:end="103:45"><name pos:start="103:28" pos:end="103:45"><name pos:start="103:28" pos:end="103:30">hls</name><operator pos:start="103:31" pos:end="103:32">-&gt;</operator><name pos:start="103:33" pos:end="103:35">avf</name><operator pos:start="103:36" pos:end="103:37">-&gt;</operator><name pos:start="103:38" pos:end="103:45">filename</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>



    <if_stmt pos:start="107:5" pos:end="111:5"><if pos:start="107:5" pos:end="111:5">if <condition pos:start="107:8" pos:end="107:33">(<expr pos:start="107:9" pos:end="107:32"><name pos:start="107:9" pos:end="107:32"><name pos:start="107:9" pos:end="107:11">hls</name><operator pos:start="107:12" pos:end="107:13">-&gt;</operator><name pos:start="107:14" pos:end="107:32">use_localtime_mkdir</name></name></expr>)</condition> <block pos:start="107:35" pos:end="111:5">{<block_content pos:start="109:9" pos:end="109:38">

        <expr_stmt pos:start="109:9" pos:end="109:38"><expr pos:start="109:9" pos:end="109:37"><name pos:start="109:9" pos:end="109:16">filename</name> <operator pos:start="109:18" pos:end="109:18">=</operator> <name pos:start="109:20" pos:end="109:37"><name pos:start="109:20" pos:end="109:22">hls</name><operator pos:start="109:23" pos:end="109:24">-&gt;</operator><name pos:start="109:25" pos:end="109:27">avf</name><operator pos:start="109:28" pos:end="109:29">-&gt;</operator><name pos:start="109:30" pos:end="109:37">filename</name></name></expr>;</expr_stmt>

    </block_content>}</block></if></if_stmt>

    <if_stmt pos:start="113:5" pos:end="119:5"><if pos:start="113:5" pos:end="119:5">if <condition pos:start="113:8" pos:end="115:65">(<expr pos:start="113:9" pos:end="115:64"><call pos:start="113:9" pos:end="113:57"><name pos:start="113:9" pos:end="113:32">find_segment_by_filename</name><argument_list pos:start="113:33" pos:end="113:57">(<argument pos:start="113:34" pos:end="113:46"><expr pos:start="113:34" pos:end="113:46"><name pos:start="113:34" pos:end="113:46"><name pos:start="113:34" pos:end="113:36">hls</name><operator pos:start="113:37" pos:end="113:38">-&gt;</operator><name pos:start="113:39" pos:end="113:46">segments</name></name></expr></argument>, <argument pos:start="113:49" pos:end="113:56"><expr pos:start="113:49" pos:end="113:56"><name pos:start="113:49" pos:end="113:56">filename</name></expr></argument>)</argument_list></call>

        <operator pos:start="115:9" pos:end="115:10">||</operator> <call pos:start="115:12" pos:end="115:64"><name pos:start="115:12" pos:end="115:35">find_segment_by_filename</name><argument_list pos:start="115:36" pos:end="115:64">(<argument pos:start="115:37" pos:end="115:53"><expr pos:start="115:37" pos:end="115:53"><name pos:start="115:37" pos:end="115:53"><name pos:start="115:37" pos:end="115:39">hls</name><operator pos:start="115:40" pos:end="115:41">-&gt;</operator><name pos:start="115:42" pos:end="115:53">old_segments</name></name></expr></argument>, <argument pos:start="115:56" pos:end="115:63"><expr pos:start="115:56" pos:end="115:63"><name pos:start="115:56" pos:end="115:63">filename</name></expr></argument>)</argument_list></call></expr>)</condition> <block pos:start="115:67" pos:end="119:5">{<block_content pos:start="117:9" pos:end="117:92">

        <expr_stmt pos:start="117:9" pos:end="117:92"><expr pos:start="117:9" pos:end="117:91"><call pos:start="117:9" pos:end="117:91"><name pos:start="117:9" pos:end="117:14">av_log</name><argument_list pos:start="117:15" pos:end="117:91">(<argument pos:start="117:16" pos:end="117:18"><expr pos:start="117:16" pos:end="117:18"><name pos:start="117:16" pos:end="117:18">hls</name></expr></argument>, <argument pos:start="117:21" pos:end="117:34"><expr pos:start="117:21" pos:end="117:34"><name pos:start="117:21" pos:end="117:34">AV_LOG_WARNING</name></expr></argument>, <argument pos:start="117:37" pos:end="117:80"><expr pos:start="117:37" pos:end="117:80"><literal type="string" pos:start="117:37" pos:end="117:80">"Duplicated segment filename detected: %s\n"</literal></expr></argument>, <argument pos:start="117:83" pos:end="117:90"><expr pos:start="117:83" pos:end="117:90"><name pos:start="117:83" pos:end="117:90">filename</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    </block_content>}</block></if></if_stmt>

    <expr_stmt pos:start="121:5" pos:end="121:61"><expr pos:start="121:5" pos:end="121:60"><call pos:start="121:5" pos:end="121:60"><name pos:start="121:5" pos:end="121:14">av_strlcpy</name><argument_list pos:start="121:15" pos:end="121:60">(<argument pos:start="121:16" pos:end="121:27"><expr pos:start="121:16" pos:end="121:27"><name pos:start="121:16" pos:end="121:27"><name pos:start="121:16" pos:end="121:17">en</name><operator pos:start="121:18" pos:end="121:19">-&gt;</operator><name pos:start="121:20" pos:end="121:27">filename</name></name></expr></argument>, <argument pos:start="121:30" pos:end="121:37"><expr pos:start="121:30" pos:end="121:37"><name pos:start="121:30" pos:end="121:37">filename</name></expr></argument>, <argument pos:start="121:40" pos:end="121:59"><expr pos:start="121:40" pos:end="121:59"><sizeof pos:start="121:40" pos:end="121:59">sizeof<argument_list pos:start="121:46" pos:end="121:59">(<argument pos:start="121:47" pos:end="121:58"><expr pos:start="121:47" pos:end="121:58"><name pos:start="121:47" pos:end="121:58"><name pos:start="121:47" pos:end="121:48">en</name><operator pos:start="121:49" pos:end="121:50">-&gt;</operator><name pos:start="121:51" pos:end="121:58">filename</name></name></expr></argument>)</argument_list></sizeof></expr></argument>)</argument_list></call></expr>;</expr_stmt>



    <if_stmt pos:start="125:5" pos:end="131:35"><if pos:start="125:5" pos:end="127:100">if<condition pos:start="125:7" pos:end="125:25">(<expr pos:start="125:8" pos:end="125:24"><name pos:start="125:8" pos:end="125:24"><name pos:start="125:8" pos:end="125:10">hls</name><operator pos:start="125:11" pos:end="125:12">-&gt;</operator><name pos:start="125:13" pos:end="125:24">has_subtitle</name></name></expr>)</condition><block type="pseudo" pos:start="127:9" pos:end="127:100"><block_content pos:start="127:9" pos:end="127:100">

        <expr_stmt pos:start="127:9" pos:end="127:100"><expr pos:start="127:9" pos:end="127:99"><call pos:start="127:9" pos:end="127:99"><name pos:start="127:9" pos:end="127:18">av_strlcpy</name><argument_list pos:start="127:19" pos:end="127:99">(<argument pos:start="127:20" pos:end="127:35"><expr pos:start="127:20" pos:end="127:35"><name pos:start="127:20" pos:end="127:35"><name pos:start="127:20" pos:end="127:21">en</name><operator pos:start="127:22" pos:end="127:23">-&gt;</operator><name pos:start="127:24" pos:end="127:35">sub_filename</name></name></expr></argument>, <argument pos:start="127:38" pos:end="127:72"><expr pos:start="127:38" pos:end="127:72"><call pos:start="127:38" pos:end="127:72"><name pos:start="127:38" pos:end="127:48">av_basename</name><argument_list pos:start="127:49" pos:end="127:72">(<argument pos:start="127:50" pos:end="127:71"><expr pos:start="127:50" pos:end="127:71"><name pos:start="127:50" pos:end="127:71"><name pos:start="127:50" pos:end="127:52">hls</name><operator pos:start="127:53" pos:end="127:54">-&gt;</operator><name pos:start="127:55" pos:end="127:61">vtt_avf</name><operator pos:start="127:62" pos:end="127:63">-&gt;</operator><name pos:start="127:64" pos:end="127:71">filename</name></name></expr></argument>)</argument_list></call></expr></argument>, <argument pos:start="127:75" pos:end="127:98"><expr pos:start="127:75" pos:end="127:98"><sizeof pos:start="127:75" pos:end="127:98">sizeof<argument_list pos:start="127:81" pos:end="127:98">(<argument pos:start="127:82" pos:end="127:97"><expr pos:start="127:82" pos:end="127:97"><name pos:start="127:82" pos:end="127:97"><name pos:start="127:82" pos:end="127:83">en</name><operator pos:start="127:84" pos:end="127:85">-&gt;</operator><name pos:start="127:86" pos:end="127:97">sub_filename</name></name></expr></argument>)</argument_list></sizeof></expr></argument>)</argument_list></call></expr>;</expr_stmt></block_content></block></if>

    <else pos:start="129:5" pos:end="131:35">else<block type="pseudo" pos:start="131:9" pos:end="131:35"><block_content pos:start="131:9" pos:end="131:35">

        <expr_stmt pos:start="131:9" pos:end="131:35"><expr pos:start="131:9" pos:end="131:34"><name pos:start="131:9" pos:end="131:27"><name pos:start="131:9" pos:end="131:10">en</name><operator pos:start="131:11" pos:end="131:12">-&gt;</operator><name pos:start="131:13" pos:end="131:24">sub_filename</name><index pos:start="131:25" pos:end="131:27">[<expr pos:start="131:26" pos:end="131:26"><literal type="number" pos:start="131:26" pos:end="131:26">0</literal></expr>]</index></name> <operator pos:start="131:29" pos:end="131:29">=</operator> <literal type="char" pos:start="131:31" pos:end="131:34">'\0'</literal></expr>;</expr_stmt></block_content></block></else></if_stmt>



    <expr_stmt pos:start="135:5" pos:end="135:28"><expr pos:start="135:5" pos:end="135:27"><name pos:start="135:5" pos:end="135:16"><name pos:start="135:5" pos:end="135:6">en</name><operator pos:start="135:7" pos:end="135:8">-&gt;</operator><name pos:start="135:9" pos:end="135:16">duration</name></name> <operator pos:start="135:18" pos:end="135:18">=</operator> <name pos:start="135:20" pos:end="135:27">duration</name></expr>;</expr_stmt>

    <expr_stmt pos:start="137:5" pos:end="137:23"><expr pos:start="137:5" pos:end="137:22"><name pos:start="137:5" pos:end="137:11"><name pos:start="137:5" pos:end="137:6">en</name><operator pos:start="137:7" pos:end="137:8">-&gt;</operator><name pos:start="137:9" pos:end="137:11">pos</name></name>      <operator pos:start="137:18" pos:end="137:18">=</operator> <name pos:start="137:20" pos:end="137:22">pos</name></expr>;</expr_stmt>

    <expr_stmt pos:start="139:5" pos:end="139:24"><expr pos:start="139:5" pos:end="139:23"><name pos:start="139:5" pos:end="139:12"><name pos:start="139:5" pos:end="139:6">en</name><operator pos:start="139:7" pos:end="139:8">-&gt;</operator><name pos:start="139:9" pos:end="139:12">size</name></name>     <operator pos:start="139:18" pos:end="139:18">=</operator> <name pos:start="139:20" pos:end="139:23">size</name></expr>;</expr_stmt>

    <expr_stmt pos:start="141:5" pos:end="141:24"><expr pos:start="141:5" pos:end="141:23"><name pos:start="141:5" pos:end="141:12"><name pos:start="141:5" pos:end="141:6">en</name><operator pos:start="141:7" pos:end="141:8">-&gt;</operator><name pos:start="141:9" pos:end="141:12">next</name></name>     <operator pos:start="141:18" pos:end="141:18">=</operator> <name pos:start="141:20" pos:end="141:23">NULL</name></expr>;</expr_stmt>

    <expr_stmt pos:start="143:5" pos:end="143:21"><expr pos:start="143:5" pos:end="143:20"><name pos:start="143:5" pos:end="143:15"><name pos:start="143:5" pos:end="143:6">en</name><operator pos:start="143:7" pos:end="143:8">-&gt;</operator><name pos:start="143:9" pos:end="143:15">discont</name></name>  <operator pos:start="143:18" pos:end="143:18">=</operator> <literal type="number" pos:start="143:20" pos:end="143:20">0</literal></expr>;</expr_stmt>



    <if_stmt pos:start="147:5" pos:end="153:5"><if pos:start="147:5" pos:end="153:5">if <condition pos:start="147:8" pos:end="147:27">(<expr pos:start="147:9" pos:end="147:26"><name pos:start="147:9" pos:end="147:26"><name pos:start="147:9" pos:end="147:11">hls</name><operator pos:start="147:12" pos:end="147:13">-&gt;</operator><name pos:start="147:14" pos:end="147:26">discontinuity</name></name></expr>)</condition> <block pos:start="147:29" pos:end="153:5">{<block_content pos:start="149:9" pos:end="151:31">

        <expr_stmt pos:start="149:9" pos:end="149:24"><expr pos:start="149:9" pos:end="149:23"><name pos:start="149:9" pos:end="149:19"><name pos:start="149:9" pos:end="149:10">en</name><operator pos:start="149:11" pos:end="149:12">-&gt;</operator><name pos:start="149:13" pos:end="149:19">discont</name></name> <operator pos:start="149:21" pos:end="149:21">=</operator> <literal type="number" pos:start="149:23" pos:end="149:23">1</literal></expr>;</expr_stmt>

        <expr_stmt pos:start="151:9" pos:end="151:31"><expr pos:start="151:9" pos:end="151:30"><name pos:start="151:9" pos:end="151:26"><name pos:start="151:9" pos:end="151:11">hls</name><operator pos:start="151:12" pos:end="151:13">-&gt;</operator><name pos:start="151:14" pos:end="151:26">discontinuity</name></name> <operator pos:start="151:28" pos:end="151:28">=</operator> <literal type="number" pos:start="151:30" pos:end="151:30">0</literal></expr>;</expr_stmt>

    </block_content>}</block></if></if_stmt>



    <if_stmt pos:start="157:5" pos:end="163:5"><if pos:start="157:5" pos:end="163:5">if <condition pos:start="157:8" pos:end="157:27">(<expr pos:start="157:9" pos:end="157:26"><name pos:start="157:9" pos:end="157:26"><name pos:start="157:9" pos:end="157:11">hls</name><operator pos:start="157:12" pos:end="157:13">-&gt;</operator><name pos:start="157:14" pos:end="157:26">key_info_file</name></name></expr>)</condition> <block pos:start="157:29" pos:end="163:5">{<block_content pos:start="159:9" pos:end="161:73">

        <expr_stmt pos:start="159:9" pos:end="159:67"><expr pos:start="159:9" pos:end="159:66"><call pos:start="159:9" pos:end="159:66"><name pos:start="159:9" pos:end="159:18">av_strlcpy</name><argument_list pos:start="159:19" pos:end="159:66">(<argument pos:start="159:20" pos:end="159:30"><expr pos:start="159:20" pos:end="159:30"><name pos:start="159:20" pos:end="159:30"><name pos:start="159:20" pos:end="159:21">en</name><operator pos:start="159:22" pos:end="159:23">-&gt;</operator><name pos:start="159:24" pos:end="159:30">key_uri</name></name></expr></argument>, <argument pos:start="159:33" pos:end="159:44"><expr pos:start="159:33" pos:end="159:44"><name pos:start="159:33" pos:end="159:44"><name pos:start="159:33" pos:end="159:35">hls</name><operator pos:start="159:36" pos:end="159:37">-&gt;</operator><name pos:start="159:38" pos:end="159:44">key_uri</name></name></expr></argument>, <argument pos:start="159:47" pos:end="159:65"><expr pos:start="159:47" pos:end="159:65"><sizeof pos:start="159:47" pos:end="159:65">sizeof<argument_list pos:start="159:53" pos:end="159:65">(<argument pos:start="159:54" pos:end="159:64"><expr pos:start="159:54" pos:end="159:64"><name pos:start="159:54" pos:end="159:64"><name pos:start="159:54" pos:end="159:55">en</name><operator pos:start="159:56" pos:end="159:57">-&gt;</operator><name pos:start="159:58" pos:end="159:64">key_uri</name></name></expr></argument>)</argument_list></sizeof></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <expr_stmt pos:start="161:9" pos:end="161:73"><expr pos:start="161:9" pos:end="161:72"><call pos:start="161:9" pos:end="161:72"><name pos:start="161:9" pos:end="161:18">av_strlcpy</name><argument_list pos:start="161:19" pos:end="161:72">(<argument pos:start="161:20" pos:end="161:32"><expr pos:start="161:20" pos:end="161:32"><name pos:start="161:20" pos:end="161:32"><name pos:start="161:20" pos:end="161:21">en</name><operator pos:start="161:22" pos:end="161:23">-&gt;</operator><name pos:start="161:24" pos:end="161:32">iv_string</name></name></expr></argument>, <argument pos:start="161:35" pos:end="161:48"><expr pos:start="161:35" pos:end="161:48"><name pos:start="161:35" pos:end="161:48"><name pos:start="161:35" pos:end="161:37">hls</name><operator pos:start="161:38" pos:end="161:39">-&gt;</operator><name pos:start="161:40" pos:end="161:48">iv_string</name></name></expr></argument>, <argument pos:start="161:51" pos:end="161:71"><expr pos:start="161:51" pos:end="161:71"><sizeof pos:start="161:51" pos:end="161:71">sizeof<argument_list pos:start="161:57" pos:end="161:71">(<argument pos:start="161:58" pos:end="161:70"><expr pos:start="161:58" pos:end="161:70"><name pos:start="161:58" pos:end="161:70"><name pos:start="161:58" pos:end="161:59">en</name><operator pos:start="161:60" pos:end="161:61">-&gt;</operator><name pos:start="161:62" pos:end="161:70">iv_string</name></name></expr></argument>)</argument_list></sizeof></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    </block_content>}</block></if></if_stmt>



    <if_stmt pos:start="167:5" pos:end="173:37"><if pos:start="167:5" pos:end="169:27">if <condition pos:start="167:8" pos:end="167:23">(<expr pos:start="167:9" pos:end="167:22"><operator pos:start="167:9" pos:end="167:9">!</operator><name pos:start="167:10" pos:end="167:22"><name pos:start="167:10" pos:end="167:12">hls</name><operator pos:start="167:13" pos:end="167:14">-&gt;</operator><name pos:start="167:15" pos:end="167:22">segments</name></name></expr>)</condition><block type="pseudo" pos:start="169:9" pos:end="169:27"><block_content pos:start="169:9" pos:end="169:27">

        <expr_stmt pos:start="169:9" pos:end="169:27"><expr pos:start="169:9" pos:end="169:26"><name pos:start="169:9" pos:end="169:21"><name pos:start="169:9" pos:end="169:11">hls</name><operator pos:start="169:12" pos:end="169:13">-&gt;</operator><name pos:start="169:14" pos:end="169:21">segments</name></name> <operator pos:start="169:23" pos:end="169:23">=</operator> <name pos:start="169:25" pos:end="169:26">en</name></expr>;</expr_stmt></block_content></block></if>

    <else pos:start="171:5" pos:end="173:37">else<block type="pseudo" pos:start="173:9" pos:end="173:37"><block_content pos:start="173:9" pos:end="173:37">

        <expr_stmt pos:start="173:9" pos:end="173:37"><expr pos:start="173:9" pos:end="173:36"><name pos:start="173:9" pos:end="173:31"><name pos:start="173:9" pos:end="173:11">hls</name><operator pos:start="173:12" pos:end="173:13">-&gt;</operator><name pos:start="173:14" pos:end="173:25">last_segment</name><operator pos:start="173:26" pos:end="173:27">-&gt;</operator><name pos:start="173:28" pos:end="173:31">next</name></name> <operator pos:start="173:33" pos:end="173:33">=</operator> <name pos:start="173:35" pos:end="173:36">en</name></expr>;</expr_stmt></block_content></block></else></if_stmt>



    <expr_stmt pos:start="177:5" pos:end="177:27"><expr pos:start="177:5" pos:end="177:26"><name pos:start="177:5" pos:end="177:21"><name pos:start="177:5" pos:end="177:7">hls</name><operator pos:start="177:8" pos:end="177:9">-&gt;</operator><name pos:start="177:10" pos:end="177:21">last_segment</name></name> <operator pos:start="177:23" pos:end="177:23">=</operator> <name pos:start="177:25" pos:end="177:26">en</name></expr>;</expr_stmt>



    <comment type="line" pos:start="181:5" pos:end="181:65">// EVENT or VOD playlists imply sliding window cannot be used</comment>

    <if_stmt pos:start="183:5" pos:end="185:33"><if pos:start="183:5" pos:end="185:33">if <condition pos:start="183:8" pos:end="183:43">(<expr pos:start="183:9" pos:end="183:42"><name pos:start="183:9" pos:end="183:20"><name pos:start="183:9" pos:end="183:11">hls</name><operator pos:start="183:12" pos:end="183:13">-&gt;</operator><name pos:start="183:14" pos:end="183:20">pl_type</name></name> <operator pos:start="183:22" pos:end="183:23">!=</operator> <name pos:start="183:25" pos:end="183:42">PLAYLIST_TYPE_NONE</name></expr>)</condition><block type="pseudo" pos:start="185:9" pos:end="185:33"><block_content pos:start="185:9" pos:end="185:33">

        <expr_stmt pos:start="185:9" pos:end="185:33"><expr pos:start="185:9" pos:end="185:32"><name pos:start="185:9" pos:end="185:28"><name pos:start="185:9" pos:end="185:11">hls</name><operator pos:start="185:12" pos:end="185:13">-&gt;</operator><name pos:start="185:14" pos:end="185:28">max_nb_segments</name></name> <operator pos:start="185:30" pos:end="185:30">=</operator> <literal type="number" pos:start="185:32" pos:end="185:32">0</literal></expr>;</expr_stmt></block_content></block></if></if_stmt>



    <if_stmt pos:start="189:5" pos:end="215:26"><if pos:start="189:5" pos:end="213:5">if <condition pos:start="189:8" pos:end="189:72">(<expr pos:start="189:9" pos:end="189:71"><name pos:start="189:9" pos:end="189:28"><name pos:start="189:9" pos:end="189:11">hls</name><operator pos:start="189:12" pos:end="189:13">-&gt;</operator><name pos:start="189:14" pos:end="189:28">max_nb_segments</name></name> <operator pos:start="189:30" pos:end="189:31">&amp;&amp;</operator> <name pos:start="189:33" pos:end="189:47"><name pos:start="189:33" pos:end="189:35">hls</name><operator pos:start="189:36" pos:end="189:37">-&gt;</operator><name pos:start="189:38" pos:end="189:47">nb_entries</name></name> <operator pos:start="189:49" pos:end="189:50">&gt;=</operator> <name pos:start="189:52" pos:end="189:71"><name pos:start="189:52" pos:end="189:54">hls</name><operator pos:start="189:55" pos:end="189:56">-&gt;</operator><name pos:start="189:57" pos:end="189:71">max_nb_segments</name></name></expr>)</condition> <block pos:start="189:74" pos:end="213:5">{<block_content pos:start="191:9" pos:end="211:24">

        <expr_stmt pos:start="191:9" pos:end="191:27"><expr pos:start="191:9" pos:end="191:26"><name pos:start="191:9" pos:end="191:10">en</name> <operator pos:start="191:12" pos:end="191:12">=</operator> <name pos:start="191:14" pos:end="191:26"><name pos:start="191:14" pos:end="191:16">hls</name><operator pos:start="191:17" pos:end="191:18">-&gt;</operator><name pos:start="191:19" pos:end="191:26">segments</name></name></expr>;</expr_stmt>

        <expr_stmt pos:start="193:9" pos:end="193:52"><expr pos:start="193:9" pos:end="193:51"><name pos:start="193:9" pos:end="193:35"><name pos:start="193:9" pos:end="193:11">hls</name><operator pos:start="193:12" pos:end="193:13">-&gt;</operator><name pos:start="193:14" pos:end="193:35">initial_prog_date_time</name></name> <operator pos:start="193:37" pos:end="193:38">+=</operator> <name pos:start="193:40" pos:end="193:51"><name pos:start="193:40" pos:end="193:41">en</name><operator pos:start="193:42" pos:end="193:43">-&gt;</operator><name pos:start="193:44" pos:end="193:51">duration</name></name></expr>;</expr_stmt>

        <expr_stmt pos:start="195:9" pos:end="195:33"><expr pos:start="195:9" pos:end="195:32"><name pos:start="195:9" pos:end="195:21"><name pos:start="195:9" pos:end="195:11">hls</name><operator pos:start="195:12" pos:end="195:13">-&gt;</operator><name pos:start="195:14" pos:end="195:21">segments</name></name> <operator pos:start="195:23" pos:end="195:23">=</operator> <name pos:start="195:25" pos:end="195:32"><name pos:start="195:25" pos:end="195:26">en</name><operator pos:start="195:27" pos:end="195:28">-&gt;</operator><name pos:start="195:29" pos:end="195:32">next</name></name></expr>;</expr_stmt>

        <if_stmt pos:start="197:9" pos:end="211:24"><if pos:start="197:9" pos:end="209:9">if <condition pos:start="197:12" pos:end="199:61">(<expr pos:start="197:13" pos:end="199:60"><name pos:start="197:13" pos:end="197:14">en</name> <operator pos:start="197:16" pos:end="197:17">&amp;&amp;</operator> <name pos:start="197:19" pos:end="197:28"><name pos:start="197:19" pos:end="197:21">hls</name><operator pos:start="197:22" pos:end="197:23">-&gt;</operator><name pos:start="197:24" pos:end="197:28">flags</name></name> <operator pos:start="197:30" pos:end="197:30">&amp;</operator> <name pos:start="197:32" pos:end="197:50">HLS_DELETE_SEGMENTS</name> <operator pos:start="197:52" pos:end="197:53">&amp;&amp;</operator>

                <operator pos:start="199:17" pos:end="199:17">!</operator><operator pos:start="199:18" pos:end="199:18">(</operator><name pos:start="199:19" pos:end="199:28"><name pos:start="199:19" pos:end="199:21">hls</name><operator pos:start="199:22" pos:end="199:23">-&gt;</operator><name pos:start="199:24" pos:end="199:28">flags</name></name> <operator pos:start="199:30" pos:end="199:30">&amp;</operator> <name pos:start="199:32" pos:end="199:46">HLS_SINGLE_FILE</name> <operator pos:start="199:48" pos:end="199:49">||</operator> <name pos:start="199:51" pos:end="199:59"><name pos:start="199:51" pos:end="199:53">hls</name><operator pos:start="199:54" pos:end="199:55">-&gt;</operator><name pos:start="199:56" pos:end="199:59">wrap</name></name><operator pos:start="199:60" pos:end="199:60">)</operator></expr>)</condition> <block pos:start="199:63" pos:end="209:9">{<block_content pos:start="201:13" pos:end="207:27">

            <expr_stmt pos:start="201:13" pos:end="201:41"><expr pos:start="201:13" pos:end="201:40"><name pos:start="201:13" pos:end="201:20"><name pos:start="201:13" pos:end="201:14">en</name><operator pos:start="201:15" pos:end="201:16">-&gt;</operator><name pos:start="201:17" pos:end="201:20">next</name></name> <operator pos:start="201:22" pos:end="201:22">=</operator> <name pos:start="201:24" pos:end="201:40"><name pos:start="201:24" pos:end="201:26">hls</name><operator pos:start="201:27" pos:end="201:28">-&gt;</operator><name pos:start="201:29" pos:end="201:40">old_segments</name></name></expr>;</expr_stmt>

            <expr_stmt pos:start="203:13" pos:end="203:35"><expr pos:start="203:13" pos:end="203:34"><name pos:start="203:13" pos:end="203:29"><name pos:start="203:13" pos:end="203:15">hls</name><operator pos:start="203:16" pos:end="203:17">-&gt;</operator><name pos:start="203:18" pos:end="203:29">old_segments</name></name> <operator pos:start="203:31" pos:end="203:31">=</operator> <name pos:start="203:33" pos:end="203:34">en</name></expr>;</expr_stmt>

            <if_stmt pos:start="205:13" pos:end="207:27"><if pos:start="205:13" pos:end="207:27">if <condition pos:start="205:16" pos:end="205:57">(<expr pos:start="205:17" pos:end="205:56"><operator pos:start="205:17" pos:end="205:17">(</operator><name pos:start="205:18" pos:end="205:20">ret</name> <operator pos:start="205:22" pos:end="205:22">=</operator> <call pos:start="205:24" pos:end="205:51"><name pos:start="205:24" pos:end="205:46">hls_delete_old_segments</name><argument_list pos:start="205:47" pos:end="205:51">(<argument pos:start="205:48" pos:end="205:50"><expr pos:start="205:48" pos:end="205:50"><name pos:start="205:48" pos:end="205:50">hls</name></expr></argument>)</argument_list></call><operator pos:start="205:52" pos:end="205:52">)</operator> <operator pos:start="205:54" pos:end="205:54">&lt;</operator> <literal type="number" pos:start="205:56" pos:end="205:56">0</literal></expr>)</condition><block type="pseudo" pos:start="207:17" pos:end="207:27"><block_content pos:start="207:17" pos:end="207:27">

                <return pos:start="207:17" pos:end="207:27">return <expr pos:start="207:24" pos:end="207:26"><name pos:start="207:24" pos:end="207:26">ret</name></expr>;</return></block_content></block></if></if_stmt>

        </block_content>}</block></if> <else pos:start="209:11" pos:end="211:24">else<block type="pseudo" pos:start="211:13" pos:end="211:24"><block_content pos:start="211:13" pos:end="211:24">

            <expr_stmt pos:start="211:13" pos:end="211:24"><expr pos:start="211:13" pos:end="211:23"><call pos:start="211:13" pos:end="211:23"><name pos:start="211:13" pos:end="211:19">av_free</name><argument_list pos:start="211:20" pos:end="211:23">(<argument pos:start="211:21" pos:end="211:22"><expr pos:start="211:21" pos:end="211:22"><name pos:start="211:21" pos:end="211:22">en</name></expr></argument>)</argument_list></call></expr>;</expr_stmt></block_content></block></else></if_stmt>

    </block_content>}</block></if> <else pos:start="213:7" pos:end="215:26">else<block type="pseudo" pos:start="215:9" pos:end="215:26"><block_content pos:start="215:9" pos:end="215:26">

        <expr_stmt pos:start="215:9" pos:end="215:26"><expr pos:start="215:9" pos:end="215:25"><name pos:start="215:9" pos:end="215:23"><name pos:start="215:9" pos:end="215:11">hls</name><operator pos:start="215:12" pos:end="215:13">-&gt;</operator><name pos:start="215:14" pos:end="215:23">nb_entries</name></name><operator pos:start="215:24" pos:end="215:25">++</operator></expr>;</expr_stmt></block_content></block></else></if_stmt>



    <if_stmt pos:start="219:5" pos:end="223:5"><if pos:start="219:5" pos:end="223:5">if <condition pos:start="219:8" pos:end="219:30">(<expr pos:start="219:9" pos:end="219:29"><name pos:start="219:9" pos:end="219:25"><name pos:start="219:9" pos:end="219:11">hls</name><operator pos:start="219:12" pos:end="219:13">-&gt;</operator><name pos:start="219:14" pos:end="219:25">max_seg_size</name></name> <operator pos:start="219:27" pos:end="219:27">&gt;</operator> <literal type="number" pos:start="219:29" pos:end="219:29">0</literal></expr>)</condition> <block pos:start="219:32" pos:end="223:5">{<block_content pos:start="221:9" pos:end="221:17">

        <return pos:start="221:9" pos:end="221:17">return <expr pos:start="221:16" pos:end="221:16"><literal type="number" pos:start="221:16" pos:end="221:16">0</literal></expr>;</return>

    </block_content>}</block></if></if_stmt>

    <expr_stmt pos:start="225:5" pos:end="225:20"><expr pos:start="225:5" pos:end="225:19"><name pos:start="225:5" pos:end="225:17"><name pos:start="225:5" pos:end="225:7">hls</name><operator pos:start="225:8" pos:end="225:9">-&gt;</operator><name pos:start="225:10" pos:end="225:17">sequence</name></name><operator pos:start="225:18" pos:end="225:19">++</operator></expr>;</expr_stmt>



    <return pos:start="229:5" pos:end="229:13">return <expr pos:start="229:12" pos:end="229:12"><literal type="number" pos:start="229:12" pos:end="229:12">0</literal></expr>;</return>

</block_content>}</block></function>
</unit>
