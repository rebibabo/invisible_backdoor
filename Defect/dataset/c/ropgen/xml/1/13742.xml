<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<unit xmlns="http://www.srcML.org/srcML/src" xmlns:pos="http://www.srcML.org/srcML/position" revision="1.0.0" language="C" filename="dataset/ropgen/aug/1/13742.c" pos:tabs="8"><function pos:start="1:1" pos:end="82:1"><type pos:start="1:1" pos:end="1:4"><name pos:start="1:1" pos:end="1:4">void</name></type> <name pos:start="1:6" pos:end="1:17">virtio_reset</name><parameter_list pos:start="1:18" pos:end="1:31">(<parameter pos:start="1:19" pos:end="1:30"><decl pos:start="1:19" pos:end="1:30"><type pos:start="1:19" pos:end="1:24"><name pos:start="1:19" pos:end="1:22">void</name> <modifier pos:start="1:24" pos:end="1:24">*</modifier></type><name pos:start="1:25" pos:end="1:30">opaque</name></decl></parameter>)</parameter_list>

<block pos:start="3:1" pos:end="82:1">{<block_content pos:start="5:5" pos:end="80:5">

    <decl_stmt pos:start="5:5" pos:end="5:32"><decl pos:start="5:5" pos:end="5:31"><type pos:start="5:5" pos:end="5:18"><name pos:start="5:5" pos:end="5:16">VirtIODevice</name> <modifier pos:start="5:18" pos:end="5:18">*</modifier></type><name pos:start="5:19" pos:end="5:22">vdev</name> <init pos:start="5:24" pos:end="5:31">= <expr pos:start="5:26" pos:end="5:31"><name pos:start="5:26" pos:end="5:31">opaque</name></expr></init></decl>;</decl_stmt>

    <decl_stmt pos:start="7:5" pos:end="7:57"><decl pos:start="7:5" pos:end="7:56"><type pos:start="7:5" pos:end="7:23"><name pos:start="7:5" pos:end="7:21">VirtioDeviceClass</name> <modifier pos:start="7:23" pos:end="7:23">*</modifier></type><name pos:start="7:24" pos:end="7:24">k</name> <init pos:start="7:26" pos:end="7:56">= <expr pos:start="7:28" pos:end="7:56"><call pos:start="7:28" pos:end="7:56"><name pos:start="7:28" pos:end="7:50">VIRTIO_DEVICE_GET_CLASS</name><argument_list pos:start="7:51" pos:end="7:56">(<argument pos:start="7:52" pos:end="7:55"><expr pos:start="7:52" pos:end="7:55"><name pos:start="7:52" pos:end="7:55">vdev</name></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>

    <decl_stmt pos:start="9:5" pos:end="9:10"><decl pos:start="9:5" pos:end="9:9"><type pos:start="9:5" pos:end="9:7"><name pos:start="9:5" pos:end="9:7">int</name></type> <name pos:start="9:9" pos:end="9:9">i</name></decl>;</decl_stmt>



    <expr_stmt pos:start="13:5" pos:end="13:31"><expr pos:start="13:5" pos:end="13:30"><call pos:start="13:5" pos:end="13:30"><name pos:start="13:5" pos:end="13:21">virtio_set_status</name><argument_list pos:start="13:22" pos:end="13:30">(<argument pos:start="13:23" pos:end="13:26"><expr pos:start="13:23" pos:end="13:26"><name pos:start="13:23" pos:end="13:26">vdev</name></expr></argument>, <argument pos:start="13:29" pos:end="13:29"><expr pos:start="13:29" pos:end="13:29"><literal type="number" pos:start="13:29" pos:end="13:29">0</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    <if_stmt pos:start="15:5" pos:end="27:5"><if pos:start="15:5" pos:end="21:5">if <condition pos:start="15:8" pos:end="15:20">(<expr pos:start="15:9" pos:end="15:19"><name pos:start="15:9" pos:end="15:19">current_cpu</name></expr>)</condition> <block pos:start="15:22" pos:end="21:5">{<block_content pos:start="19:9" pos:end="19:58">

        <comment type="block" pos:start="17:9" pos:end="17:35">/* Guest initiated reset */</comment>

        <expr_stmt pos:start="19:9" pos:end="19:58"><expr pos:start="19:9" pos:end="19:57"><name pos:start="19:9" pos:end="19:27"><name pos:start="19:9" pos:end="19:12">vdev</name><operator pos:start="19:13" pos:end="19:14">-&gt;</operator><name pos:start="19:15" pos:end="19:27">device_endian</name></name> <operator pos:start="19:29" pos:end="19:29">=</operator> <call pos:start="19:31" pos:end="19:57"><name pos:start="19:31" pos:end="19:55">virtio_current_cpu_endian</name><argument_list pos:start="19:56" pos:end="19:57">()</argument_list></call></expr>;</expr_stmt>

    </block_content>}</block></if> <else pos:start="21:7" pos:end="27:5">else <block pos:start="21:12" pos:end="27:5">{<block_content pos:start="25:9" pos:end="25:54">

        <comment type="block" pos:start="23:9" pos:end="23:26">/* System reset */</comment>

        <expr_stmt pos:start="25:9" pos:end="25:54"><expr pos:start="25:9" pos:end="25:53"><name pos:start="25:9" pos:end="25:27"><name pos:start="25:9" pos:end="25:12">vdev</name><operator pos:start="25:13" pos:end="25:14">-&gt;</operator><name pos:start="25:15" pos:end="25:27">device_endian</name></name> <operator pos:start="25:29" pos:end="25:29">=</operator> <call pos:start="25:31" pos:end="25:53"><name pos:start="25:31" pos:end="25:51">virtio_default_endian</name><argument_list pos:start="25:52" pos:end="25:53">()</argument_list></call></expr>;</expr_stmt>

    </block_content>}</block></else></if_stmt>



    <if_stmt pos:start="31:5" pos:end="35:5"><if pos:start="31:5" pos:end="35:5">if <condition pos:start="31:8" pos:end="31:17">(<expr pos:start="31:9" pos:end="31:16"><name pos:start="31:9" pos:end="31:16"><name pos:start="31:9" pos:end="31:9">k</name><operator pos:start="31:10" pos:end="31:11">-&gt;</operator><name pos:start="31:12" pos:end="31:16">reset</name></name></expr>)</condition> <block pos:start="31:19" pos:end="35:5">{<block_content pos:start="33:9" pos:end="33:23">

        <expr_stmt pos:start="33:9" pos:end="33:23"><expr pos:start="33:9" pos:end="33:22"><call pos:start="33:9" pos:end="33:22"><name pos:start="33:9" pos:end="33:16"><name pos:start="33:9" pos:end="33:9">k</name><operator pos:start="33:10" pos:end="33:11">-&gt;</operator><name pos:start="33:12" pos:end="33:16">reset</name></name><argument_list pos:start="33:17" pos:end="33:22">(<argument pos:start="33:18" pos:end="33:21"><expr pos:start="33:18" pos:end="33:21"><name pos:start="33:18" pos:end="33:21">vdev</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    </block_content>}</block></if></if_stmt>




    <expr_stmt pos:start="40:5" pos:end="40:29"><expr pos:start="40:5" pos:end="40:28"><name pos:start="40:5" pos:end="40:24"><name pos:start="40:5" pos:end="40:8">vdev</name><operator pos:start="40:9" pos:end="40:10">-&gt;</operator><name pos:start="40:11" pos:end="40:24">guest_features</name></name> <operator pos:start="40:26" pos:end="40:26">=</operator> <literal type="number" pos:start="40:28" pos:end="40:28">0</literal></expr>;</expr_stmt>

    <expr_stmt pos:start="42:5" pos:end="42:24"><expr pos:start="42:5" pos:end="42:23"><name pos:start="42:5" pos:end="42:19"><name pos:start="42:5" pos:end="42:8">vdev</name><operator pos:start="42:9" pos:end="42:10">-&gt;</operator><name pos:start="42:11" pos:end="42:19">queue_sel</name></name> <operator pos:start="42:21" pos:end="42:21">=</operator> <literal type="number" pos:start="42:23" pos:end="42:23">0</literal></expr>;</expr_stmt>

    <expr_stmt pos:start="44:5" pos:end="44:21"><expr pos:start="44:5" pos:end="44:20"><name pos:start="44:5" pos:end="44:16"><name pos:start="44:5" pos:end="44:8">vdev</name><operator pos:start="44:9" pos:end="44:10">-&gt;</operator><name pos:start="44:11" pos:end="44:16">status</name></name> <operator pos:start="44:18" pos:end="44:18">=</operator> <literal type="number" pos:start="44:20" pos:end="44:20">0</literal></expr>;</expr_stmt>

    <expr_stmt pos:start="46:5" pos:end="46:18"><expr pos:start="46:5" pos:end="46:17"><name pos:start="46:5" pos:end="46:13"><name pos:start="46:5" pos:end="46:8">vdev</name><operator pos:start="46:9" pos:end="46:10">-&gt;</operator><name pos:start="46:11" pos:end="46:13">isr</name></name> <operator pos:start="46:15" pos:end="46:15">=</operator> <literal type="number" pos:start="46:17" pos:end="46:17">0</literal></expr>;</expr_stmt>

    <expr_stmt pos:start="48:5" pos:end="48:43"><expr pos:start="48:5" pos:end="48:42"><name pos:start="48:5" pos:end="48:23"><name pos:start="48:5" pos:end="48:8">vdev</name><operator pos:start="48:9" pos:end="48:10">-&gt;</operator><name pos:start="48:11" pos:end="48:23">config_vector</name></name> <operator pos:start="48:25" pos:end="48:25">=</operator> <name pos:start="48:27" pos:end="48:42">VIRTIO_NO_VECTOR</name></expr>;</expr_stmt>

    <expr_stmt pos:start="50:5" pos:end="50:52"><expr pos:start="50:5" pos:end="50:51"><call pos:start="50:5" pos:end="50:51"><name pos:start="50:5" pos:end="50:24">virtio_notify_vector</name><argument_list pos:start="50:25" pos:end="50:51">(<argument pos:start="50:26" pos:end="50:29"><expr pos:start="50:26" pos:end="50:29"><name pos:start="50:26" pos:end="50:29">vdev</name></expr></argument>, <argument pos:start="50:32" pos:end="50:50"><expr pos:start="50:32" pos:end="50:50"><name pos:start="50:32" pos:end="50:50"><name pos:start="50:32" pos:end="50:35">vdev</name><operator pos:start="50:36" pos:end="50:37">-&gt;</operator><name pos:start="50:38" pos:end="50:50">config_vector</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>



    <for pos:start="54:5" pos:end="80:5">for<control pos:start="54:8" pos:end="54:41">(<init pos:start="54:9" pos:end="54:14"><expr pos:start="54:9" pos:end="54:13"><name pos:start="54:9" pos:end="54:9">i</name> <operator pos:start="54:11" pos:end="54:11">=</operator> <literal type="number" pos:start="54:13" pos:end="54:13">0</literal></expr>;</init> <condition pos:start="54:16" pos:end="54:36"><expr pos:start="54:16" pos:end="54:35"><name pos:start="54:16" pos:end="54:16">i</name> <operator pos:start="54:18" pos:end="54:18">&lt;</operator> <name pos:start="54:20" pos:end="54:35">VIRTIO_QUEUE_MAX</name></expr>;</condition> <incr pos:start="54:38" pos:end="54:40"><expr pos:start="54:38" pos:end="54:40"><name pos:start="54:38" pos:end="54:38">i</name><operator pos:start="54:39" pos:end="54:40">++</operator></expr></incr>)</control> <block pos:start="54:43" pos:end="80:5">{<block_content pos:start="56:9" pos:end="78:30">

        <expr_stmt pos:start="56:9" pos:end="56:35"><expr pos:start="56:9" pos:end="56:34"><name pos:start="56:9" pos:end="56:19"><name pos:start="56:9" pos:end="56:12">vdev</name><operator pos:start="56:13" pos:end="56:14">-&gt;</operator><name pos:start="56:15" pos:end="56:16">vq</name><index pos:start="56:17" pos:end="56:19">[<expr pos:start="56:18" pos:end="56:18"><name pos:start="56:18" pos:end="56:18">i</name></expr>]</index></name><operator pos:start="56:20" pos:end="56:20">.</operator><name pos:start="56:21" pos:end="56:30"><name pos:start="56:21" pos:end="56:25">vring</name><operator pos:start="56:26" pos:end="56:26">.</operator><name pos:start="56:27" pos:end="56:30">desc</name></name> <operator pos:start="56:32" pos:end="56:32">=</operator> <literal type="number" pos:start="56:34" pos:end="56:34">0</literal></expr>;</expr_stmt>

        <expr_stmt pos:start="58:9" pos:end="58:36"><expr pos:start="58:9" pos:end="58:35"><name pos:start="58:9" pos:end="58:19"><name pos:start="58:9" pos:end="58:12">vdev</name><operator pos:start="58:13" pos:end="58:14">-&gt;</operator><name pos:start="58:15" pos:end="58:16">vq</name><index pos:start="58:17" pos:end="58:19">[<expr pos:start="58:18" pos:end="58:18"><name pos:start="58:18" pos:end="58:18">i</name></expr>]</index></name><operator pos:start="58:20" pos:end="58:20">.</operator><name pos:start="58:21" pos:end="58:31"><name pos:start="58:21" pos:end="58:25">vring</name><operator pos:start="58:26" pos:end="58:26">.</operator><name pos:start="58:27" pos:end="58:31">avail</name></name> <operator pos:start="58:33" pos:end="58:33">=</operator> <literal type="number" pos:start="58:35" pos:end="58:35">0</literal></expr>;</expr_stmt>

        <expr_stmt pos:start="60:9" pos:end="60:35"><expr pos:start="60:9" pos:end="60:34"><name pos:start="60:9" pos:end="60:19"><name pos:start="60:9" pos:end="60:12">vdev</name><operator pos:start="60:13" pos:end="60:14">-&gt;</operator><name pos:start="60:15" pos:end="60:16">vq</name><index pos:start="60:17" pos:end="60:19">[<expr pos:start="60:18" pos:end="60:18"><name pos:start="60:18" pos:end="60:18">i</name></expr>]</index></name><operator pos:start="60:20" pos:end="60:20">.</operator><name pos:start="60:21" pos:end="60:30"><name pos:start="60:21" pos:end="60:25">vring</name><operator pos:start="60:26" pos:end="60:26">.</operator><name pos:start="60:27" pos:end="60:30">used</name></name> <operator pos:start="60:32" pos:end="60:32">=</operator> <literal type="number" pos:start="60:34" pos:end="60:34">0</literal></expr>;</expr_stmt>

        <expr_stmt pos:start="62:9" pos:end="62:39"><expr pos:start="62:9" pos:end="62:38"><name pos:start="62:9" pos:end="62:19"><name pos:start="62:9" pos:end="62:12">vdev</name><operator pos:start="62:13" pos:end="62:14">-&gt;</operator><name pos:start="62:15" pos:end="62:16">vq</name><index pos:start="62:17" pos:end="62:19">[<expr pos:start="62:18" pos:end="62:18"><name pos:start="62:18" pos:end="62:18">i</name></expr>]</index></name><operator pos:start="62:20" pos:end="62:20">.</operator><name pos:start="62:21" pos:end="62:34">last_avail_idx</name> <operator pos:start="62:36" pos:end="62:36">=</operator> <literal type="number" pos:start="62:38" pos:end="62:38">0</literal></expr>;</expr_stmt>

        <expr_stmt pos:start="64:9" pos:end="64:41"><expr pos:start="64:9" pos:end="64:40"><name pos:start="64:9" pos:end="64:19"><name pos:start="64:9" pos:end="64:12">vdev</name><operator pos:start="64:13" pos:end="64:14">-&gt;</operator><name pos:start="64:15" pos:end="64:16">vq</name><index pos:start="64:17" pos:end="64:19">[<expr pos:start="64:18" pos:end="64:18"><name pos:start="64:18" pos:end="64:18">i</name></expr>]</index></name><operator pos:start="64:20" pos:end="64:20">.</operator><name pos:start="64:21" pos:end="64:36">shadow_avail_idx</name> <operator pos:start="64:38" pos:end="64:38">=</operator> <literal type="number" pos:start="64:40" pos:end="64:40">0</literal></expr>;</expr_stmt>

        <expr_stmt pos:start="66:9" pos:end="66:33"><expr pos:start="66:9" pos:end="66:32"><name pos:start="66:9" pos:end="66:19"><name pos:start="66:9" pos:end="66:12">vdev</name><operator pos:start="66:13" pos:end="66:14">-&gt;</operator><name pos:start="66:15" pos:end="66:16">vq</name><index pos:start="66:17" pos:end="66:19">[<expr pos:start="66:18" pos:end="66:18"><name pos:start="66:18" pos:end="66:18">i</name></expr>]</index></name><operator pos:start="66:20" pos:end="66:20">.</operator><name pos:start="66:21" pos:end="66:28">used_idx</name> <operator pos:start="66:30" pos:end="66:30">=</operator> <literal type="number" pos:start="66:32" pos:end="66:32">0</literal></expr>;</expr_stmt>

        <expr_stmt pos:start="68:9" pos:end="68:59"><expr pos:start="68:9" pos:end="68:58"><call pos:start="68:9" pos:end="68:58"><name pos:start="68:9" pos:end="68:31">virtio_queue_set_vector</name><argument_list pos:start="68:32" pos:end="68:58">(<argument pos:start="68:33" pos:end="68:36"><expr pos:start="68:33" pos:end="68:36"><name pos:start="68:33" pos:end="68:36">vdev</name></expr></argument>, <argument pos:start="68:39" pos:end="68:39"><expr pos:start="68:39" pos:end="68:39"><name pos:start="68:39" pos:end="68:39">i</name></expr></argument>, <argument pos:start="68:42" pos:end="68:57"><expr pos:start="68:42" pos:end="68:57"><name pos:start="68:42" pos:end="68:57">VIRTIO_NO_VECTOR</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <expr_stmt pos:start="70:9" pos:end="70:39"><expr pos:start="70:9" pos:end="70:38"><name pos:start="70:9" pos:end="70:19"><name pos:start="70:9" pos:end="70:12">vdev</name><operator pos:start="70:13" pos:end="70:14">-&gt;</operator><name pos:start="70:15" pos:end="70:16">vq</name><index pos:start="70:17" pos:end="70:19">[<expr pos:start="70:18" pos:end="70:18"><name pos:start="70:18" pos:end="70:18">i</name></expr>]</index></name><operator pos:start="70:20" pos:end="70:20">.</operator><name pos:start="70:21" pos:end="70:34">signalled_used</name> <operator pos:start="70:36" pos:end="70:36">=</operator> <literal type="number" pos:start="70:38" pos:end="70:38">0</literal></expr>;</expr_stmt>

        <expr_stmt pos:start="72:9" pos:end="72:49"><expr pos:start="72:9" pos:end="72:48"><name pos:start="72:9" pos:end="72:19"><name pos:start="72:9" pos:end="72:12">vdev</name><operator pos:start="72:13" pos:end="72:14">-&gt;</operator><name pos:start="72:15" pos:end="72:16">vq</name><index pos:start="72:17" pos:end="72:19">[<expr pos:start="72:18" pos:end="72:18"><name pos:start="72:18" pos:end="72:18">i</name></expr>]</index></name><operator pos:start="72:20" pos:end="72:20">.</operator><name pos:start="72:21" pos:end="72:40">signalled_used_valid</name> <operator pos:start="72:42" pos:end="72:42">=</operator> <name pos:start="72:44" pos:end="72:48">false</name></expr>;</expr_stmt>

        <expr_stmt pos:start="74:9" pos:end="74:40"><expr pos:start="74:9" pos:end="74:39"><name pos:start="74:9" pos:end="74:19"><name pos:start="74:9" pos:end="74:12">vdev</name><operator pos:start="74:13" pos:end="74:14">-&gt;</operator><name pos:start="74:15" pos:end="74:16">vq</name><index pos:start="74:17" pos:end="74:19">[<expr pos:start="74:18" pos:end="74:18"><name pos:start="74:18" pos:end="74:18">i</name></expr>]</index></name><operator pos:start="74:20" pos:end="74:20">.</operator><name pos:start="74:21" pos:end="74:32">notification</name> <operator pos:start="74:34" pos:end="74:34">=</operator> <name pos:start="74:36" pos:end="74:39">true</name></expr>;</expr_stmt>

        <expr_stmt pos:start="76:9" pos:end="76:62"><expr pos:start="76:9" pos:end="76:61"><name pos:start="76:9" pos:end="76:19"><name pos:start="76:9" pos:end="76:12">vdev</name><operator pos:start="76:13" pos:end="76:14">-&gt;</operator><name pos:start="76:15" pos:end="76:16">vq</name><index pos:start="76:17" pos:end="76:19">[<expr pos:start="76:18" pos:end="76:18"><name pos:start="76:18" pos:end="76:18">i</name></expr>]</index></name><operator pos:start="76:20" pos:end="76:20">.</operator><name pos:start="76:21" pos:end="76:29"><name pos:start="76:21" pos:end="76:25">vring</name><operator pos:start="76:26" pos:end="76:26">.</operator><name pos:start="76:27" pos:end="76:29">num</name></name> <operator pos:start="76:31" pos:end="76:31">=</operator> <name pos:start="76:33" pos:end="76:43"><name pos:start="76:33" pos:end="76:36">vdev</name><operator pos:start="76:37" pos:end="76:38">-&gt;</operator><name pos:start="76:39" pos:end="76:40">vq</name><index pos:start="76:41" pos:end="76:43">[<expr pos:start="76:42" pos:end="76:42"><name pos:start="76:42" pos:end="76:42">i</name></expr>]</index></name><operator pos:start="76:44" pos:end="76:44">.</operator><name pos:start="76:45" pos:end="76:61"><name pos:start="76:45" pos:end="76:49">vring</name><operator pos:start="76:50" pos:end="76:50">.</operator><name pos:start="76:51" pos:end="76:61">num_default</name></name></expr>;</expr_stmt>

        <expr_stmt pos:start="78:9" pos:end="78:30"><expr pos:start="78:9" pos:end="78:29"><name pos:start="78:9" pos:end="78:19"><name pos:start="78:9" pos:end="78:12">vdev</name><operator pos:start="78:13" pos:end="78:14">-&gt;</operator><name pos:start="78:15" pos:end="78:16">vq</name><index pos:start="78:17" pos:end="78:19">[<expr pos:start="78:18" pos:end="78:18"><name pos:start="78:18" pos:end="78:18">i</name></expr>]</index></name><operator pos:start="78:20" pos:end="78:20">.</operator><name pos:start="78:21" pos:end="78:25">inuse</name> <operator pos:start="78:27" pos:end="78:27">=</operator> <literal type="number" pos:start="78:29" pos:end="78:29">0</literal></expr>;</expr_stmt>

    </block_content>}</block></for>

</block_content>}</block></function></unit>
