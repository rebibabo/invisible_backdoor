<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<unit xmlns="http://www.srcML.org/srcML/src" xmlns:pos="http://www.srcML.org/srcML/position" revision="1.0.0" language="C" filename="dataset/ropgen/aug/1/1051.c" pos:tabs="8"><function pos:start="1:1" pos:end="209:1"><type pos:start="1:1" pos:end="1:4"><name pos:start="1:1" pos:end="1:4">void</name></type> <name pos:start="1:6" pos:end="1:31">ff_estimate_b_frame_motion</name><parameter_list pos:start="1:32" pos:end="3:48">(<parameter pos:start="1:33" pos:end="1:50"><decl pos:start="1:33" pos:end="1:50"><type pos:start="1:33" pos:end="1:50"><name pos:start="1:33" pos:end="1:46">MpegEncContext</name> <modifier pos:start="1:48" pos:end="1:48">*</modifier></type> <name pos:start="1:50" pos:end="1:50">s</name></decl></parameter>,

                             <parameter pos:start="3:30" pos:end="3:37"><decl pos:start="3:30" pos:end="3:37"><type pos:start="3:30" pos:end="3:37"><name pos:start="3:30" pos:end="3:32">int</name></type> <name pos:start="3:34" pos:end="3:37">mb_x</name></decl></parameter>, <parameter pos:start="3:40" pos:end="3:47"><decl pos:start="3:40" pos:end="3:47"><type pos:start="3:40" pos:end="3:47"><name pos:start="3:40" pos:end="3:42">int</name></type> <name pos:start="3:44" pos:end="3:47">mb_y</name></decl></parameter>)</parameter_list>

<block pos:start="5:1" pos:end="209:1">{<block_content pos:start="7:5" pos:end="207:47">

    <decl_stmt pos:start="7:5" pos:end="7:39"><decl pos:start="7:5" pos:end="7:38"><type pos:start="7:5" pos:end="7:28"><name pos:start="7:5" pos:end="7:20">MotionEstContext</name> <modifier pos:start="7:22" pos:end="7:22">*</modifier> <specifier pos:start="7:24" pos:end="7:28">const</specifier></type> <name pos:start="7:30" pos:end="7:30">c</name><init pos:start="7:31" pos:end="7:38">= <expr pos:start="7:33" pos:end="7:38"><operator pos:start="7:33" pos:end="7:33">&amp;</operator><name pos:start="7:34" pos:end="7:38"><name pos:start="7:34" pos:end="7:34">s</name><operator pos:start="7:35" pos:end="7:36">-&gt;</operator><name pos:start="7:37" pos:end="7:38">me</name></name></expr></init></decl>;</decl_stmt>

    <decl_stmt pos:start="9:5" pos:end="9:51"><decl pos:start="9:5" pos:end="9:50"><type pos:start="9:5" pos:end="9:13"><specifier pos:start="9:5" pos:end="9:9">const</specifier> <name pos:start="9:11" pos:end="9:13">int</name></type> <name pos:start="9:15" pos:end="9:28">penalty_factor</name><init pos:start="9:29" pos:end="9:50">= <expr pos:start="9:31" pos:end="9:50"><name pos:start="9:31" pos:end="9:50"><name pos:start="9:31" pos:end="9:31">c</name><operator pos:start="9:32" pos:end="9:33">-&gt;</operator><name pos:start="9:34" pos:end="9:50">mb_penalty_factor</name></name></expr></init></decl>;</decl_stmt>

    <decl_stmt pos:start="11:5" pos:end="11:46"><decl pos:start="11:5" pos:end="11:12"><type pos:start="11:5" pos:end="11:7"><name pos:start="11:5" pos:end="11:7">int</name></type> <name pos:start="11:9" pos:end="11:12">fmin</name></decl>, <decl pos:start="11:15" pos:end="11:18"><type ref="prev" pos:start="11:5" pos:end="11:7"/><name pos:start="11:15" pos:end="11:18">bmin</name></decl>, <decl pos:start="11:21" pos:end="11:24"><type ref="prev" pos:start="11:5" pos:end="11:7"/><name pos:start="11:21" pos:end="11:24">dmin</name></decl>, <decl pos:start="11:27" pos:end="11:31"><type ref="prev" pos:start="11:5" pos:end="11:7"/><name pos:start="11:27" pos:end="11:31">fbmin</name></decl>, <decl pos:start="11:34" pos:end="11:38"><type ref="prev" pos:start="11:5" pos:end="11:7"/><name pos:start="11:34" pos:end="11:38">bimin</name></decl>, <decl pos:start="11:41" pos:end="11:45"><type ref="prev" pos:start="11:5" pos:end="11:7"/><name pos:start="11:41" pos:end="11:45">fimin</name></decl>;</decl_stmt>

    <decl_stmt pos:start="13:5" pos:end="13:15"><decl pos:start="13:5" pos:end="13:14"><type pos:start="13:5" pos:end="13:7"><name pos:start="13:5" pos:end="13:7">int</name></type> <name pos:start="13:9" pos:end="13:12">type</name><init pos:start="13:13" pos:end="13:14">=<expr pos:start="13:14" pos:end="13:14"><literal type="number" pos:start="13:14" pos:end="13:14">0</literal></expr></init></decl>;</decl_stmt>

    <decl_stmt pos:start="15:5" pos:end="15:44"><decl pos:start="15:5" pos:end="15:43"><type pos:start="15:5" pos:end="15:13"><specifier pos:start="15:5" pos:end="15:9">const</specifier> <name pos:start="15:11" pos:end="15:13">int</name></type> <name pos:start="15:15" pos:end="15:16">xy</name> <init pos:start="15:18" pos:end="15:43">= <expr pos:start="15:20" pos:end="15:43"><name pos:start="15:20" pos:end="15:23">mb_y</name><operator pos:start="15:24" pos:end="15:24">*</operator><name pos:start="15:25" pos:end="15:36"><name pos:start="15:25" pos:end="15:25">s</name><operator pos:start="15:26" pos:end="15:27">-&gt;</operator><name pos:start="15:28" pos:end="15:36">mb_stride</name></name> <operator pos:start="15:38" pos:end="15:38">+</operator> <name pos:start="15:40" pos:end="15:43">mb_x</name></expr></init></decl>;</decl_stmt>

    <expr_stmt pos:start="17:5" pos:end="19:62"><expr pos:start="17:5" pos:end="19:61"><call pos:start="17:5" pos:end="19:61"><name pos:start="17:5" pos:end="17:12">init_ref</name><argument_list pos:start="17:13" pos:end="19:61">(<argument pos:start="17:14" pos:end="17:14"><expr pos:start="17:14" pos:end="17:14"><name pos:start="17:14" pos:end="17:14">c</name></expr></argument>, <argument pos:start="17:17" pos:end="17:37"><expr pos:start="17:17" pos:end="17:37"><name pos:start="17:17" pos:end="17:37"><name pos:start="17:17" pos:end="17:17">s</name><operator pos:start="17:18" pos:end="17:19">-&gt;</operator><name pos:start="17:20" pos:end="17:30">new_picture</name><operator pos:start="17:31" pos:end="17:31">.</operator><name pos:start="17:32" pos:end="17:32">f</name><operator pos:start="17:33" pos:end="17:33">.</operator><name pos:start="17:34" pos:end="17:37">data</name></name></expr></argument>, <argument pos:start="17:40" pos:end="17:61"><expr pos:start="17:40" pos:end="17:61"><name pos:start="17:40" pos:end="17:61"><name pos:start="17:40" pos:end="17:40">s</name><operator pos:start="17:41" pos:end="17:42">-&gt;</operator><name pos:start="17:43" pos:end="17:54">last_picture</name><operator pos:start="17:55" pos:end="17:55">.</operator><name pos:start="17:56" pos:end="17:56">f</name><operator pos:start="17:57" pos:end="17:57">.</operator><name pos:start="17:58" pos:end="17:61">data</name></name></expr></argument>,

             <argument pos:start="19:14" pos:end="19:35"><expr pos:start="19:14" pos:end="19:35"><name pos:start="19:14" pos:end="19:35"><name pos:start="19:14" pos:end="19:14">s</name><operator pos:start="19:15" pos:end="19:16">-&gt;</operator><name pos:start="19:17" pos:end="19:28">next_picture</name><operator pos:start="19:29" pos:end="19:29">.</operator><name pos:start="19:30" pos:end="19:30">f</name><operator pos:start="19:31" pos:end="19:31">.</operator><name pos:start="19:32" pos:end="19:35">data</name></name></expr></argument>, <argument pos:start="19:38" pos:end="19:46"><expr pos:start="19:38" pos:end="19:46"><literal type="number" pos:start="19:38" pos:end="19:39">16</literal> <operator pos:start="19:41" pos:end="19:41">*</operator> <name pos:start="19:43" pos:end="19:46">mb_x</name></expr></argument>, <argument pos:start="19:49" pos:end="19:57"><expr pos:start="19:49" pos:end="19:57"><literal type="number" pos:start="19:49" pos:end="19:50">16</literal> <operator pos:start="19:52" pos:end="19:52">*</operator> <name pos:start="19:54" pos:end="19:57">mb_y</name></expr></argument>, <argument pos:start="19:60" pos:end="19:60"><expr pos:start="19:60" pos:end="19:60"><literal type="number" pos:start="19:60" pos:end="19:60">2</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>



    <expr_stmt pos:start="23:5" pos:end="23:36"><expr pos:start="23:5" pos:end="23:35"><call pos:start="23:5" pos:end="23:35"><name pos:start="23:5" pos:end="23:14">get_limits</name><argument_list pos:start="23:15" pos:end="23:35">(<argument pos:start="23:16" pos:end="23:16"><expr pos:start="23:16" pos:end="23:16"><name pos:start="23:16" pos:end="23:16">s</name></expr></argument>, <argument pos:start="23:19" pos:end="23:25"><expr pos:start="23:19" pos:end="23:25"><literal type="number" pos:start="23:19" pos:end="23:20">16</literal><operator pos:start="23:21" pos:end="23:21">*</operator><name pos:start="23:22" pos:end="23:25">mb_x</name></expr></argument>, <argument pos:start="23:28" pos:end="23:34"><expr pos:start="23:28" pos:end="23:34"><literal type="number" pos:start="23:28" pos:end="23:29">16</literal><operator pos:start="23:30" pos:end="23:30">*</operator><name pos:start="23:31" pos:end="23:34">mb_y</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>



    <expr_stmt pos:start="27:5" pos:end="27:14"><expr pos:start="27:5" pos:end="27:13"><name pos:start="27:5" pos:end="27:11"><name pos:start="27:5" pos:end="27:5">c</name><operator pos:start="27:6" pos:end="27:7">-&gt;</operator><name pos:start="27:8" pos:end="27:11">skip</name></name><operator pos:start="27:12" pos:end="27:12">=</operator><literal type="number" pos:start="27:13" pos:end="27:13">0</literal></expr>;</expr_stmt>



    <if_stmt pos:start="31:5" pos:end="49:5"><if pos:start="31:5" pos:end="49:5">if <condition pos:start="31:8" pos:end="31:77">(<expr pos:start="31:9" pos:end="31:76"><name pos:start="31:9" pos:end="31:19"><name pos:start="31:9" pos:end="31:9">s</name><operator pos:start="31:10" pos:end="31:11">-&gt;</operator><name pos:start="31:12" pos:end="31:19">codec_id</name></name> <operator pos:start="31:21" pos:end="31:22">==</operator> <name pos:start="31:24" pos:end="31:40">AV_CODEC_ID_MPEG4</name> <operator pos:start="31:42" pos:end="31:43">&amp;&amp;</operator> <name pos:start="31:45" pos:end="31:76"><name pos:start="31:45" pos:end="31:45">s</name><operator pos:start="31:46" pos:end="31:47">-&gt;</operator><name pos:start="31:48" pos:end="31:59">next_picture</name><operator pos:start="31:60" pos:end="31:60">.</operator><name pos:start="31:61" pos:end="31:72">mbskip_table</name><index pos:start="31:73" pos:end="31:76">[<expr pos:start="31:74" pos:end="31:75"><name pos:start="31:74" pos:end="31:75">xy</name></expr>]</index></name></expr>)</condition> <block pos:start="31:79" pos:end="49:5">{<block_content pos:start="33:9" pos:end="47:15">

        <decl_stmt pos:start="33:9" pos:end="33:48"><decl pos:start="33:9" pos:end="33:47"><type pos:start="33:9" pos:end="33:11"><name pos:start="33:9" pos:end="33:11">int</name></type> <name pos:start="33:13" pos:end="33:17">score</name><init pos:start="33:18" pos:end="33:47">= <expr pos:start="33:20" pos:end="33:47"><call pos:start="33:20" pos:end="33:47"><name pos:start="33:20" pos:end="33:32">direct_search</name><argument_list pos:start="33:33" pos:end="33:47">(<argument pos:start="33:34" pos:end="33:34"><expr pos:start="33:34" pos:end="33:34"><name pos:start="33:34" pos:end="33:34">s</name></expr></argument>, <argument pos:start="33:37" pos:end="33:40"><expr pos:start="33:37" pos:end="33:40"><name pos:start="33:37" pos:end="33:40">mb_x</name></expr></argument>, <argument pos:start="33:43" pos:end="33:46"><expr pos:start="33:43" pos:end="33:46"><name pos:start="33:43" pos:end="33:46">mb_y</name></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt> <comment type="line" pos:start="33:50" pos:end="33:71">//FIXME just check 0,0</comment>



        <expr_stmt pos:start="37:9" pos:end="37:55"><expr pos:start="37:9" pos:end="37:54"><name pos:start="37:9" pos:end="37:13">score</name><operator pos:start="37:14" pos:end="37:14">=</operator> <operator pos:start="37:16" pos:end="37:16">(</operator><operator pos:start="37:17" pos:end="37:17">(</operator><name pos:start="37:18" pos:end="37:25">unsigned</name><operator pos:start="37:26" pos:end="37:26">)</operator><operator pos:start="37:27" pos:end="37:27">(</operator><name pos:start="37:28" pos:end="37:32">score</name><operator pos:start="37:33" pos:end="37:33">*</operator><name pos:start="37:34" pos:end="37:38">score</name> <operator pos:start="37:40" pos:end="37:40">+</operator> <literal type="number" pos:start="37:42" pos:end="37:44">128</literal><operator pos:start="37:45" pos:end="37:45">*</operator><literal type="number" pos:start="37:46" pos:end="37:48">256</literal><operator pos:start="37:49" pos:end="37:49">)</operator><operator pos:start="37:50" pos:end="37:50">)</operator><operator pos:start="37:51" pos:end="37:52">&gt;&gt;</operator><literal type="number" pos:start="37:53" pos:end="37:54">16</literal></expr>;</expr_stmt>

        <expr_stmt pos:start="39:9" pos:end="39:39"><expr pos:start="39:9" pos:end="39:38"><name pos:start="39:9" pos:end="39:29"><name pos:start="39:9" pos:end="39:9">c</name><operator pos:start="39:10" pos:end="39:11">-&gt;</operator><name pos:start="39:12" pos:end="39:29">mc_mb_var_sum_temp</name></name> <operator pos:start="39:31" pos:end="39:32">+=</operator> <name pos:start="39:34" pos:end="39:38">score</name></expr>;</expr_stmt>

        <expr_stmt pos:start="41:9" pos:end="41:71"><expr pos:start="41:9" pos:end="41:70"><name pos:start="41:9" pos:end="41:62"><name pos:start="41:9" pos:end="41:9">s</name><operator pos:start="41:10" pos:end="41:11">-&gt;</operator><name pos:start="41:12" pos:end="41:26">current_picture</name><operator pos:start="41:27" pos:end="41:27">.</operator><name pos:start="41:28" pos:end="41:36">mc_mb_var</name><index pos:start="41:37" pos:end="41:62">[<expr pos:start="41:38" pos:end="41:61"><name pos:start="41:38" pos:end="41:41">mb_y</name><operator pos:start="41:42" pos:end="41:42">*</operator><name pos:start="41:43" pos:end="41:54"><name pos:start="41:43" pos:end="41:43">s</name><operator pos:start="41:44" pos:end="41:45">-&gt;</operator><name pos:start="41:46" pos:end="41:54">mb_stride</name></name> <operator pos:start="41:56" pos:end="41:56">+</operator> <name pos:start="41:58" pos:end="41:61">mb_x</name></expr>]</index></name> <operator pos:start="41:64" pos:end="41:64">=</operator> <name pos:start="41:66" pos:end="41:70">score</name></expr>;</expr_stmt> <comment type="line" pos:start="41:73" pos:end="41:87">//FIXME use SSE</comment>

        <expr_stmt pos:start="43:9" pos:end="43:72"><expr pos:start="43:9" pos:end="43:71"><name pos:start="43:9" pos:end="43:44"><name pos:start="43:9" pos:end="43:9">s</name><operator pos:start="43:10" pos:end="43:11">-&gt;</operator><name pos:start="43:12" pos:end="43:18">mb_type</name><index pos:start="43:19" pos:end="43:44">[<expr pos:start="43:20" pos:end="43:43"><name pos:start="43:20" pos:end="43:23">mb_y</name><operator pos:start="43:24" pos:end="43:24">*</operator><name pos:start="43:25" pos:end="43:36"><name pos:start="43:25" pos:end="43:25">s</name><operator pos:start="43:26" pos:end="43:27">-&gt;</operator><name pos:start="43:28" pos:end="43:36">mb_stride</name></name> <operator pos:start="43:38" pos:end="43:38">+</operator> <name pos:start="43:40" pos:end="43:43">mb_x</name></expr>]</index></name><operator pos:start="43:45" pos:end="43:45">=</operator> <name pos:start="43:47" pos:end="43:71">CANDIDATE_MB_TYPE_DIRECT0</name></expr>;</expr_stmt>



        <return pos:start="47:9" pos:end="47:15">return;</return>

    </block_content>}</block></if></if_stmt>



    <if_stmt pos:start="53:5" pos:end="59:22"><if pos:start="53:5" pos:end="55:43">if <condition pos:start="53:8" pos:end="53:41">(<expr pos:start="53:9" pos:end="53:40"><name pos:start="53:9" pos:end="53:19"><name pos:start="53:9" pos:end="53:9">s</name><operator pos:start="53:10" pos:end="53:11">-&gt;</operator><name pos:start="53:12" pos:end="53:19">codec_id</name></name> <operator pos:start="53:21" pos:end="53:22">==</operator> <name pos:start="53:24" pos:end="53:40">AV_CODEC_ID_MPEG4</name></expr>)</condition><block type="pseudo" pos:start="55:9" pos:end="55:43"><block_content pos:start="55:9" pos:end="55:43">

        <expr_stmt pos:start="55:9" pos:end="55:43"><expr pos:start="55:9" pos:end="55:42"><name pos:start="55:9" pos:end="55:12">dmin</name><operator pos:start="55:13" pos:end="55:13">=</operator> <call pos:start="55:15" pos:end="55:42"><name pos:start="55:15" pos:end="55:27">direct_search</name><argument_list pos:start="55:28" pos:end="55:42">(<argument pos:start="55:29" pos:end="55:29"><expr pos:start="55:29" pos:end="55:29"><name pos:start="55:29" pos:end="55:29">s</name></expr></argument>, <argument pos:start="55:32" pos:end="55:35"><expr pos:start="55:32" pos:end="55:35"><name pos:start="55:32" pos:end="55:35">mb_x</name></expr></argument>, <argument pos:start="55:38" pos:end="55:41"><expr pos:start="55:38" pos:end="55:41"><name pos:start="55:38" pos:end="55:41">mb_y</name></expr></argument>)</argument_list></call></expr>;</expr_stmt></block_content></block></if>

    <else pos:start="57:5" pos:end="59:22">else<block type="pseudo" pos:start="59:9" pos:end="59:22"><block_content pos:start="59:9" pos:end="59:22">

        <expr_stmt pos:start="59:9" pos:end="59:22"><expr pos:start="59:9" pos:end="59:21"><name pos:start="59:9" pos:end="59:12">dmin</name><operator pos:start="59:13" pos:end="59:13">=</operator> <name pos:start="59:15" pos:end="59:21">INT_MAX</name></expr>;</expr_stmt></block_content></block></else></if_stmt>

<comment type="line" pos:start="61:1" pos:end="61:35">//FIXME penalty stuff for non mpeg4</comment>

    <expr_stmt pos:start="63:5" pos:end="63:14"><expr pos:start="63:5" pos:end="63:13"><name pos:start="63:5" pos:end="63:11"><name pos:start="63:5" pos:end="63:5">c</name><operator pos:start="63:6" pos:end="63:7">-&gt;</operator><name pos:start="63:8" pos:end="63:11">skip</name></name><operator pos:start="63:12" pos:end="63:12">=</operator><literal type="number" pos:start="63:13" pos:end="63:13">0</literal></expr>;</expr_stmt>

    <expr_stmt pos:start="65:5" pos:end="67:30"><expr pos:start="65:5" pos:end="67:29"><name pos:start="65:5" pos:end="65:8">fmin</name> <operator pos:start="65:10" pos:end="65:10">=</operator> <call pos:start="65:12" pos:end="65:77"><name pos:start="65:12" pos:end="65:28">estimate_motion_b</name><argument_list pos:start="65:29" pos:end="65:77">(<argument pos:start="65:30" pos:end="65:30"><expr pos:start="65:30" pos:end="65:30"><name pos:start="65:30" pos:end="65:30">s</name></expr></argument>, <argument pos:start="65:33" pos:end="65:36"><expr pos:start="65:33" pos:end="65:36"><name pos:start="65:33" pos:end="65:36">mb_x</name></expr></argument>, <argument pos:start="65:39" pos:end="65:42"><expr pos:start="65:39" pos:end="65:42"><name pos:start="65:39" pos:end="65:42">mb_y</name></expr></argument>, <argument pos:start="65:45" pos:end="65:62"><expr pos:start="65:45" pos:end="65:62"><name pos:start="65:45" pos:end="65:62"><name pos:start="65:45" pos:end="65:45">s</name><operator pos:start="65:46" pos:end="65:47">-&gt;</operator><name pos:start="65:48" pos:end="65:62">b_forw_mv_table</name></name></expr></argument>, <argument pos:start="65:65" pos:end="65:65"><expr pos:start="65:65" pos:end="65:65"><literal type="number" pos:start="65:65" pos:end="65:65">0</literal></expr></argument>, <argument pos:start="65:68" pos:end="65:76"><expr pos:start="65:68" pos:end="65:76"><name pos:start="65:68" pos:end="65:76"><name pos:start="65:68" pos:end="65:68">s</name><operator pos:start="65:69" pos:end="65:70">-&gt;</operator><name pos:start="65:71" pos:end="65:76">f_code</name></name></expr></argument>)</argument_list></call> <operator pos:start="65:79" pos:end="65:79">+</operator>

           <literal type="number" pos:start="67:12" pos:end="67:12">3</literal> <operator pos:start="67:14" pos:end="67:14">*</operator> <name pos:start="67:16" pos:end="67:29">penalty_factor</name></expr>;</expr_stmt>



    <expr_stmt pos:start="71:5" pos:end="71:14"><expr pos:start="71:5" pos:end="71:13"><name pos:start="71:5" pos:end="71:11"><name pos:start="71:5" pos:end="71:5">c</name><operator pos:start="71:6" pos:end="71:7">-&gt;</operator><name pos:start="71:8" pos:end="71:11">skip</name></name><operator pos:start="71:12" pos:end="71:12">=</operator><literal type="number" pos:start="71:13" pos:end="71:13">0</literal></expr>;</expr_stmt>

    <expr_stmt pos:start="73:5" pos:end="75:30"><expr pos:start="73:5" pos:end="75:29"><name pos:start="73:5" pos:end="73:8">bmin</name> <operator pos:start="73:10" pos:end="73:10">=</operator> <call pos:start="73:12" pos:end="73:77"><name pos:start="73:12" pos:end="73:28">estimate_motion_b</name><argument_list pos:start="73:29" pos:end="73:77">(<argument pos:start="73:30" pos:end="73:30"><expr pos:start="73:30" pos:end="73:30"><name pos:start="73:30" pos:end="73:30">s</name></expr></argument>, <argument pos:start="73:33" pos:end="73:36"><expr pos:start="73:33" pos:end="73:36"><name pos:start="73:33" pos:end="73:36">mb_x</name></expr></argument>, <argument pos:start="73:39" pos:end="73:42"><expr pos:start="73:39" pos:end="73:42"><name pos:start="73:39" pos:end="73:42">mb_y</name></expr></argument>, <argument pos:start="73:45" pos:end="73:62"><expr pos:start="73:45" pos:end="73:62"><name pos:start="73:45" pos:end="73:62"><name pos:start="73:45" pos:end="73:45">s</name><operator pos:start="73:46" pos:end="73:47">-&gt;</operator><name pos:start="73:48" pos:end="73:62">b_back_mv_table</name></name></expr></argument>, <argument pos:start="73:65" pos:end="73:65"><expr pos:start="73:65" pos:end="73:65"><literal type="number" pos:start="73:65" pos:end="73:65">2</literal></expr></argument>, <argument pos:start="73:68" pos:end="73:76"><expr pos:start="73:68" pos:end="73:76"><name pos:start="73:68" pos:end="73:76"><name pos:start="73:68" pos:end="73:68">s</name><operator pos:start="73:69" pos:end="73:70">-&gt;</operator><name pos:start="73:71" pos:end="73:76">b_code</name></name></expr></argument>)</argument_list></call> <operator pos:start="73:79" pos:end="73:79">+</operator>

           <literal type="number" pos:start="75:12" pos:end="75:12">2</literal> <operator pos:start="75:14" pos:end="75:14">*</operator> <name pos:start="75:16" pos:end="75:29">penalty_factor</name></expr>;</expr_stmt>

    <expr_stmt pos:start="77:5" pos:end="77:80"><expr pos:start="77:5" pos:end="77:79"><call pos:start="77:5" pos:end="77:79"><name pos:start="77:5" pos:end="77:11">av_dlog</name><argument_list pos:start="77:12" pos:end="77:79">(<argument pos:start="77:13" pos:end="77:13"><expr pos:start="77:13" pos:end="77:13"><name pos:start="77:13" pos:end="77:13">s</name></expr></argument>, <argument pos:start="77:16" pos:end="77:24"><expr pos:start="77:16" pos:end="77:24"><literal type="string" pos:start="77:16" pos:end="77:24">" %d %d "</literal></expr></argument>, <argument pos:start="77:27" pos:end="77:51"><expr pos:start="77:27" pos:end="77:51"><name pos:start="77:27" pos:end="77:51"><name pos:start="77:27" pos:end="77:27">s</name><operator pos:start="77:28" pos:end="77:29">-&gt;</operator><name pos:start="77:30" pos:end="77:44">b_forw_mv_table</name><index pos:start="77:45" pos:end="77:48">[<expr pos:start="77:46" pos:end="77:47"><name pos:start="77:46" pos:end="77:47">xy</name></expr>]</index><index pos:start="77:49" pos:end="77:51">[<expr pos:start="77:50" pos:end="77:50"><literal type="number" pos:start="77:50" pos:end="77:50">0</literal></expr>]</index></name></expr></argument>, <argument pos:start="77:54" pos:end="77:78"><expr pos:start="77:54" pos:end="77:78"><name pos:start="77:54" pos:end="77:78"><name pos:start="77:54" pos:end="77:54">s</name><operator pos:start="77:55" pos:end="77:56">-&gt;</operator><name pos:start="77:57" pos:end="77:71">b_forw_mv_table</name><index pos:start="77:72" pos:end="77:75">[<expr pos:start="77:73" pos:end="77:74"><name pos:start="77:73" pos:end="77:74">xy</name></expr>]</index><index pos:start="77:76" pos:end="77:78">[<expr pos:start="77:77" pos:end="77:77"><literal type="number" pos:start="77:77" pos:end="77:77">1</literal></expr>]</index></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>



    <expr_stmt pos:start="81:5" pos:end="81:14"><expr pos:start="81:5" pos:end="81:13"><name pos:start="81:5" pos:end="81:11"><name pos:start="81:5" pos:end="81:5">c</name><operator pos:start="81:6" pos:end="81:7">-&gt;</operator><name pos:start="81:8" pos:end="81:11">skip</name></name><operator pos:start="81:12" pos:end="81:12">=</operator><literal type="number" pos:start="81:13" pos:end="81:13">0</literal></expr>;</expr_stmt>

    <expr_stmt pos:start="83:5" pos:end="83:56"><expr pos:start="83:5" pos:end="83:55"><name pos:start="83:5" pos:end="83:9">fbmin</name><operator pos:start="83:10" pos:end="83:10">=</operator> <call pos:start="83:12" pos:end="83:38"><name pos:start="83:12" pos:end="83:23">bidir_refine</name><argument_list pos:start="83:24" pos:end="83:38">(<argument pos:start="83:25" pos:end="83:25"><expr pos:start="83:25" pos:end="83:25"><name pos:start="83:25" pos:end="83:25">s</name></expr></argument>, <argument pos:start="83:28" pos:end="83:31"><expr pos:start="83:28" pos:end="83:31"><name pos:start="83:28" pos:end="83:31">mb_x</name></expr></argument>, <argument pos:start="83:34" pos:end="83:37"><expr pos:start="83:34" pos:end="83:37"><name pos:start="83:34" pos:end="83:37">mb_y</name></expr></argument>)</argument_list></call> <operator pos:start="83:40" pos:end="83:40">+</operator> <name pos:start="83:42" pos:end="83:55">penalty_factor</name></expr>;</expr_stmt>

    <expr_stmt pos:start="85:5" pos:end="85:57"><expr pos:start="85:5" pos:end="85:56"><call pos:start="85:5" pos:end="85:56"><name pos:start="85:5" pos:end="85:11">av_dlog</name><argument_list pos:start="85:12" pos:end="85:56">(<argument pos:start="85:13" pos:end="85:13"><expr pos:start="85:13" pos:end="85:13"><name pos:start="85:13" pos:end="85:13">s</name></expr></argument>, <argument pos:start="85:16" pos:end="85:30"><expr pos:start="85:16" pos:end="85:30"><literal type="string" pos:start="85:16" pos:end="85:30">"%d %d %d %d\n"</literal></expr></argument>, <argument pos:start="85:33" pos:end="85:36"><expr pos:start="85:33" pos:end="85:36"><name pos:start="85:33" pos:end="85:36">dmin</name></expr></argument>, <argument pos:start="85:39" pos:end="85:42"><expr pos:start="85:39" pos:end="85:42"><name pos:start="85:39" pos:end="85:42">fmin</name></expr></argument>, <argument pos:start="85:45" pos:end="85:48"><expr pos:start="85:45" pos:end="85:48"><name pos:start="85:45" pos:end="85:48">bmin</name></expr></argument>, <argument pos:start="85:51" pos:end="85:55"><expr pos:start="85:51" pos:end="85:55"><name pos:start="85:51" pos:end="85:55">fbmin</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>



    <if_stmt pos:start="89:5" pos:end="113:30"><if pos:start="89:5" pos:end="111:5">if<condition pos:start="89:7" pos:end="89:43">(<expr pos:start="89:8" pos:end="89:42"><name pos:start="89:8" pos:end="89:15"><name pos:start="89:8" pos:end="89:8">s</name><operator pos:start="89:9" pos:end="89:10">-&gt;</operator><name pos:start="89:11" pos:end="89:15">flags</name></name> <operator pos:start="89:17" pos:end="89:17">&amp;</operator> <name pos:start="89:19" pos:end="89:42">CODEC_FLAG_INTERLACED_ME</name></expr>)</condition><block pos:start="89:44" pos:end="111:5">{<block_content pos:start="93:9" pos:end="109:90">

<comment type="line" pos:start="91:1" pos:end="91:23">//FIXME mb type penalty</comment>

        <expr_stmt pos:start="93:9" pos:end="93:18"><expr pos:start="93:9" pos:end="93:17"><name pos:start="93:9" pos:end="93:15"><name pos:start="93:9" pos:end="93:9">c</name><operator pos:start="93:10" pos:end="93:11">-&gt;</operator><name pos:start="93:12" pos:end="93:15">skip</name></name><operator pos:start="93:16" pos:end="93:16">=</operator><literal type="number" pos:start="93:17" pos:end="93:17">0</literal></expr>;</expr_stmt>

        <expr_stmt pos:start="95:9" pos:end="95:65"><expr pos:start="95:9" pos:end="95:64"><name pos:start="95:9" pos:end="95:29"><name pos:start="95:9" pos:end="95:9">c</name><operator pos:start="95:10" pos:end="95:11">-&gt;</operator><name pos:start="95:12" pos:end="95:29">current_mv_penalty</name></name><operator pos:start="95:30" pos:end="95:30">=</operator> <name pos:start="95:32" pos:end="95:55"><name pos:start="95:32" pos:end="95:32">c</name><operator pos:start="95:33" pos:end="95:34">-&gt;</operator><name pos:start="95:35" pos:end="95:44">mv_penalty</name><index pos:start="95:45" pos:end="95:55">[<expr pos:start="95:46" pos:end="95:54"><name pos:start="95:46" pos:end="95:54"><name pos:start="95:46" pos:end="95:46">s</name><operator pos:start="95:47" pos:end="95:48">-&gt;</operator><name pos:start="95:49" pos:end="95:54">f_code</name></name></expr>]</index></name> <operator pos:start="95:57" pos:end="95:57">+</operator> <name pos:start="95:59" pos:end="95:64">MAX_MV</name></expr>;</expr_stmt>

        <expr_stmt pos:start="97:9" pos:end="101:90"><expr pos:start="97:9" pos:end="101:89"><name pos:start="97:9" pos:end="97:13">fimin</name><operator pos:start="97:14" pos:end="97:14">=</operator> <call pos:start="97:16" pos:end="101:89"><name pos:start="97:16" pos:end="97:32">interlaced_search</name><argument_list pos:start="97:33" pos:end="101:89">(<argument pos:start="97:34" pos:end="97:34"><expr pos:start="97:34" pos:end="97:34"><name pos:start="97:34" pos:end="97:34">s</name></expr></argument>, <argument pos:start="97:37" pos:end="97:37"><expr pos:start="97:37" pos:end="97:37"><literal type="number" pos:start="97:37" pos:end="97:37">0</literal></expr></argument>,

                                 <argument pos:start="99:34" pos:end="99:55"><expr pos:start="99:34" pos:end="99:55"><name pos:start="99:34" pos:end="99:55"><name pos:start="99:34" pos:end="99:34">s</name><operator pos:start="99:35" pos:end="99:36">-&gt;</operator><name pos:start="99:37" pos:end="99:52">b_field_mv_table</name><index pos:start="99:53" pos:end="99:55">[<expr pos:start="99:54" pos:end="99:54"><literal type="number" pos:start="99:54" pos:end="99:54">0</literal></expr>]</index></name></expr></argument>, <argument pos:start="99:58" pos:end="99:83"><expr pos:start="99:58" pos:end="99:83"><name pos:start="99:58" pos:end="99:83"><name pos:start="99:58" pos:end="99:58">s</name><operator pos:start="99:59" pos:end="99:60">-&gt;</operator><name pos:start="99:61" pos:end="99:80">b_field_select_table</name><index pos:start="99:81" pos:end="99:83">[<expr pos:start="99:82" pos:end="99:82"><literal type="number" pos:start="99:82" pos:end="99:82">0</literal></expr>]</index></name></expr></argument>,

                                 <argument pos:start="101:34" pos:end="101:58"><expr pos:start="101:34" pos:end="101:58"><name pos:start="101:34" pos:end="101:58"><name pos:start="101:34" pos:end="101:34">s</name><operator pos:start="101:35" pos:end="101:36">-&gt;</operator><name pos:start="101:37" pos:end="101:51">b_forw_mv_table</name><index pos:start="101:52" pos:end="101:55">[<expr pos:start="101:53" pos:end="101:54"><name pos:start="101:53" pos:end="101:54">xy</name></expr>]</index><index pos:start="101:56" pos:end="101:58">[<expr pos:start="101:57" pos:end="101:57"><literal type="number" pos:start="101:57" pos:end="101:57">0</literal></expr>]</index></name></expr></argument>, <argument pos:start="101:61" pos:end="101:85"><expr pos:start="101:61" pos:end="101:85"><name pos:start="101:61" pos:end="101:85"><name pos:start="101:61" pos:end="101:61">s</name><operator pos:start="101:62" pos:end="101:63">-&gt;</operator><name pos:start="101:64" pos:end="101:78">b_forw_mv_table</name><index pos:start="101:79" pos:end="101:82">[<expr pos:start="101:80" pos:end="101:81"><name pos:start="101:80" pos:end="101:81">xy</name></expr>]</index><index pos:start="101:83" pos:end="101:85">[<expr pos:start="101:84" pos:end="101:84"><literal type="number" pos:start="101:84" pos:end="101:84">1</literal></expr>]</index></name></expr></argument>, <argument pos:start="101:88" pos:end="101:88"><expr pos:start="101:88" pos:end="101:88"><literal type="number" pos:start="101:88" pos:end="101:88">0</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <expr_stmt pos:start="103:9" pos:end="103:65"><expr pos:start="103:9" pos:end="103:64"><name pos:start="103:9" pos:end="103:29"><name pos:start="103:9" pos:end="103:9">c</name><operator pos:start="103:10" pos:end="103:11">-&gt;</operator><name pos:start="103:12" pos:end="103:29">current_mv_penalty</name></name><operator pos:start="103:30" pos:end="103:30">=</operator> <name pos:start="103:32" pos:end="103:55"><name pos:start="103:32" pos:end="103:32">c</name><operator pos:start="103:33" pos:end="103:34">-&gt;</operator><name pos:start="103:35" pos:end="103:44">mv_penalty</name><index pos:start="103:45" pos:end="103:55">[<expr pos:start="103:46" pos:end="103:54"><name pos:start="103:46" pos:end="103:54"><name pos:start="103:46" pos:end="103:46">s</name><operator pos:start="103:47" pos:end="103:48">-&gt;</operator><name pos:start="103:49" pos:end="103:54">b_code</name></name></expr>]</index></name> <operator pos:start="103:57" pos:end="103:57">+</operator> <name pos:start="103:59" pos:end="103:64">MAX_MV</name></expr>;</expr_stmt>

        <expr_stmt pos:start="105:9" pos:end="109:90"><expr pos:start="105:9" pos:end="109:89"><name pos:start="105:9" pos:end="105:13">bimin</name><operator pos:start="105:14" pos:end="105:14">=</operator> <call pos:start="105:16" pos:end="109:89"><name pos:start="105:16" pos:end="105:32">interlaced_search</name><argument_list pos:start="105:33" pos:end="109:89">(<argument pos:start="105:34" pos:end="105:34"><expr pos:start="105:34" pos:end="105:34"><name pos:start="105:34" pos:end="105:34">s</name></expr></argument>, <argument pos:start="105:37" pos:end="105:37"><expr pos:start="105:37" pos:end="105:37"><literal type="number" pos:start="105:37" pos:end="105:37">2</literal></expr></argument>,

                                 <argument pos:start="107:34" pos:end="107:55"><expr pos:start="107:34" pos:end="107:55"><name pos:start="107:34" pos:end="107:55"><name pos:start="107:34" pos:end="107:34">s</name><operator pos:start="107:35" pos:end="107:36">-&gt;</operator><name pos:start="107:37" pos:end="107:52">b_field_mv_table</name><index pos:start="107:53" pos:end="107:55">[<expr pos:start="107:54" pos:end="107:54"><literal type="number" pos:start="107:54" pos:end="107:54">1</literal></expr>]</index></name></expr></argument>, <argument pos:start="107:58" pos:end="107:83"><expr pos:start="107:58" pos:end="107:83"><name pos:start="107:58" pos:end="107:83"><name pos:start="107:58" pos:end="107:58">s</name><operator pos:start="107:59" pos:end="107:60">-&gt;</operator><name pos:start="107:61" pos:end="107:80">b_field_select_table</name><index pos:start="107:81" pos:end="107:83">[<expr pos:start="107:82" pos:end="107:82"><literal type="number" pos:start="107:82" pos:end="107:82">1</literal></expr>]</index></name></expr></argument>,

                                 <argument pos:start="109:34" pos:end="109:58"><expr pos:start="109:34" pos:end="109:58"><name pos:start="109:34" pos:end="109:58"><name pos:start="109:34" pos:end="109:34">s</name><operator pos:start="109:35" pos:end="109:36">-&gt;</operator><name pos:start="109:37" pos:end="109:51">b_back_mv_table</name><index pos:start="109:52" pos:end="109:55">[<expr pos:start="109:53" pos:end="109:54"><name pos:start="109:53" pos:end="109:54">xy</name></expr>]</index><index pos:start="109:56" pos:end="109:58">[<expr pos:start="109:57" pos:end="109:57"><literal type="number" pos:start="109:57" pos:end="109:57">0</literal></expr>]</index></name></expr></argument>, <argument pos:start="109:61" pos:end="109:85"><expr pos:start="109:61" pos:end="109:85"><name pos:start="109:61" pos:end="109:85"><name pos:start="109:61" pos:end="109:61">s</name><operator pos:start="109:62" pos:end="109:63">-&gt;</operator><name pos:start="109:64" pos:end="109:78">b_back_mv_table</name><index pos:start="109:79" pos:end="109:82">[<expr pos:start="109:80" pos:end="109:81"><name pos:start="109:80" pos:end="109:81">xy</name></expr>]</index><index pos:start="109:83" pos:end="109:85">[<expr pos:start="109:84" pos:end="109:84"><literal type="number" pos:start="109:84" pos:end="109:84">1</literal></expr>]</index></name></expr></argument>, <argument pos:start="109:88" pos:end="109:88"><expr pos:start="109:88" pos:end="109:88"><literal type="number" pos:start="109:88" pos:end="109:88">0</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    </block_content>}</block></if><else pos:start="111:6" pos:end="113:30">else<block type="pseudo" pos:start="113:9" pos:end="113:30"><block_content pos:start="113:9" pos:end="113:30">

        <expr_stmt pos:start="113:9" pos:end="113:30"><expr pos:start="113:9" pos:end="113:29"><name pos:start="113:9" pos:end="113:13">fimin</name><operator pos:start="113:14" pos:end="113:14">=</operator> <name pos:start="113:16" pos:end="113:20">bimin</name><operator pos:start="113:21" pos:end="113:21">=</operator> <name pos:start="113:23" pos:end="113:29">INT_MAX</name></expr>;</expr_stmt></block_content></block></else></if_stmt>



    <block pos:start="117:5" pos:end="173:5">{<block_content pos:start="119:9" pos:end="171:71">

        <decl_stmt pos:start="119:9" pos:end="119:24"><decl pos:start="119:9" pos:end="119:23"><type pos:start="119:9" pos:end="119:11"><name pos:start="119:9" pos:end="119:11">int</name></type> <name pos:start="119:13" pos:end="119:17">score</name><init pos:start="119:18" pos:end="119:23">= <expr pos:start="119:20" pos:end="119:23"><name pos:start="119:20" pos:end="119:23">fmin</name></expr></init></decl>;</decl_stmt>

        <expr_stmt pos:start="121:9" pos:end="121:41"><expr pos:start="121:9" pos:end="121:40"><name pos:start="121:9" pos:end="121:12">type</name> <operator pos:start="121:14" pos:end="121:14">=</operator> <name pos:start="121:16" pos:end="121:40">CANDIDATE_MB_TYPE_FORWARD</name></expr>;</expr_stmt>



        <if_stmt pos:start="125:9" pos:end="131:9"><if pos:start="125:9" pos:end="131:9">if <condition pos:start="125:12" pos:end="125:26">(<expr pos:start="125:13" pos:end="125:25"><name pos:start="125:13" pos:end="125:16">dmin</name> <operator pos:start="125:18" pos:end="125:19">&lt;=</operator> <name pos:start="125:21" pos:end="125:25">score</name></expr>)</condition><block pos:start="125:27" pos:end="131:9">{<block_content pos:start="127:13" pos:end="129:44">

            <expr_stmt pos:start="127:13" pos:end="127:25"><expr pos:start="127:13" pos:end="127:24"><name pos:start="127:13" pos:end="127:17">score</name> <operator pos:start="127:19" pos:end="127:19">=</operator> <name pos:start="127:21" pos:end="127:24">dmin</name></expr>;</expr_stmt>

            <expr_stmt pos:start="129:13" pos:end="129:44"><expr pos:start="129:13" pos:end="129:43"><name pos:start="129:13" pos:end="129:16">type</name> <operator pos:start="129:18" pos:end="129:18">=</operator> <name pos:start="129:20" pos:end="129:43">CANDIDATE_MB_TYPE_DIRECT</name></expr>;</expr_stmt>

        </block_content>}</block></if></if_stmt>

        <if_stmt pos:start="133:9" pos:end="139:9"><if pos:start="133:9" pos:end="139:9">if<condition pos:start="133:11" pos:end="133:22">(<expr pos:start="133:12" pos:end="133:21"><name pos:start="133:12" pos:end="133:15">bmin</name><operator pos:start="133:16" pos:end="133:16">&lt;</operator><name pos:start="133:17" pos:end="133:21">score</name></expr>)</condition><block pos:start="133:23" pos:end="139:9">{<block_content pos:start="135:13" pos:end="137:45">

            <expr_stmt pos:start="135:13" pos:end="135:23"><expr pos:start="135:13" pos:end="135:22"><name pos:start="135:13" pos:end="135:17">score</name><operator pos:start="135:18" pos:end="135:18">=</operator><name pos:start="135:19" pos:end="135:22">bmin</name></expr>;</expr_stmt>

            <expr_stmt pos:start="137:13" pos:end="137:45"><expr pos:start="137:13" pos:end="137:44"><name pos:start="137:13" pos:end="137:16">type</name><operator pos:start="137:17" pos:end="137:17">=</operator> <name pos:start="137:19" pos:end="137:44">CANDIDATE_MB_TYPE_BACKWARD</name></expr>;</expr_stmt>

        </block_content>}</block></if></if_stmt>

        <if_stmt pos:start="141:9" pos:end="147:9"><if pos:start="141:9" pos:end="147:9">if<condition pos:start="141:11" pos:end="141:23">(<expr pos:start="141:12" pos:end="141:22"><name pos:start="141:12" pos:end="141:16">fbmin</name><operator pos:start="141:17" pos:end="141:17">&lt;</operator><name pos:start="141:18" pos:end="141:22">score</name></expr>)</condition><block pos:start="141:24" pos:end="147:9">{<block_content pos:start="143:13" pos:end="145:42">

            <expr_stmt pos:start="143:13" pos:end="143:24"><expr pos:start="143:13" pos:end="143:23"><name pos:start="143:13" pos:end="143:17">score</name><operator pos:start="143:18" pos:end="143:18">=</operator><name pos:start="143:19" pos:end="143:23">fbmin</name></expr>;</expr_stmt>

            <expr_stmt pos:start="145:13" pos:end="145:42"><expr pos:start="145:13" pos:end="145:41"><name pos:start="145:13" pos:end="145:16">type</name><operator pos:start="145:17" pos:end="145:17">=</operator> <name pos:start="145:19" pos:end="145:41">CANDIDATE_MB_TYPE_BIDIR</name></expr>;</expr_stmt>

        </block_content>}</block></if></if_stmt>

        <if_stmt pos:start="149:9" pos:end="155:9"><if pos:start="149:9" pos:end="155:9">if<condition pos:start="149:11" pos:end="149:23">(<expr pos:start="149:12" pos:end="149:22"><name pos:start="149:12" pos:end="149:16">fimin</name><operator pos:start="149:17" pos:end="149:17">&lt;</operator><name pos:start="149:18" pos:end="149:22">score</name></expr>)</condition><block pos:start="149:24" pos:end="155:9">{<block_content pos:start="151:13" pos:end="153:46">

            <expr_stmt pos:start="151:13" pos:end="151:24"><expr pos:start="151:13" pos:end="151:23"><name pos:start="151:13" pos:end="151:17">score</name><operator pos:start="151:18" pos:end="151:18">=</operator><name pos:start="151:19" pos:end="151:23">fimin</name></expr>;</expr_stmt>

            <expr_stmt pos:start="153:13" pos:end="153:46"><expr pos:start="153:13" pos:end="153:45"><name pos:start="153:13" pos:end="153:16">type</name><operator pos:start="153:17" pos:end="153:17">=</operator> <name pos:start="153:19" pos:end="153:45">CANDIDATE_MB_TYPE_FORWARD_I</name></expr>;</expr_stmt>

        </block_content>}</block></if></if_stmt>

        <if_stmt pos:start="157:9" pos:end="163:9"><if pos:start="157:9" pos:end="163:9">if<condition pos:start="157:11" pos:end="157:23">(<expr pos:start="157:12" pos:end="157:22"><name pos:start="157:12" pos:end="157:16">bimin</name><operator pos:start="157:17" pos:end="157:17">&lt;</operator><name pos:start="157:18" pos:end="157:22">score</name></expr>)</condition><block pos:start="157:24" pos:end="163:9">{<block_content pos:start="159:13" pos:end="161:47">

            <expr_stmt pos:start="159:13" pos:end="159:24"><expr pos:start="159:13" pos:end="159:23"><name pos:start="159:13" pos:end="159:17">score</name><operator pos:start="159:18" pos:end="159:18">=</operator><name pos:start="159:19" pos:end="159:23">bimin</name></expr>;</expr_stmt>

            <expr_stmt pos:start="161:13" pos:end="161:47"><expr pos:start="161:13" pos:end="161:46"><name pos:start="161:13" pos:end="161:16">type</name><operator pos:start="161:17" pos:end="161:17">=</operator> <name pos:start="161:19" pos:end="161:46">CANDIDATE_MB_TYPE_BACKWARD_I</name></expr>;</expr_stmt>

        </block_content>}</block></if></if_stmt>



        <expr_stmt pos:start="167:9" pos:end="167:55"><expr pos:start="167:9" pos:end="167:54"><name pos:start="167:9" pos:end="167:13">score</name><operator pos:start="167:14" pos:end="167:14">=</operator> <operator pos:start="167:16" pos:end="167:16">(</operator><operator pos:start="167:17" pos:end="167:17">(</operator><name pos:start="167:18" pos:end="167:25">unsigned</name><operator pos:start="167:26" pos:end="167:26">)</operator><operator pos:start="167:27" pos:end="167:27">(</operator><name pos:start="167:28" pos:end="167:32">score</name><operator pos:start="167:33" pos:end="167:33">*</operator><name pos:start="167:34" pos:end="167:38">score</name> <operator pos:start="167:40" pos:end="167:40">+</operator> <literal type="number" pos:start="167:42" pos:end="167:44">128</literal><operator pos:start="167:45" pos:end="167:45">*</operator><literal type="number" pos:start="167:46" pos:end="167:48">256</literal><operator pos:start="167:49" pos:end="167:49">)</operator><operator pos:start="167:50" pos:end="167:50">)</operator><operator pos:start="167:51" pos:end="167:52">&gt;&gt;</operator><literal type="number" pos:start="167:53" pos:end="167:54">16</literal></expr>;</expr_stmt>

        <expr_stmt pos:start="169:9" pos:end="169:39"><expr pos:start="169:9" pos:end="169:38"><name pos:start="169:9" pos:end="169:29"><name pos:start="169:9" pos:end="169:9">c</name><operator pos:start="169:10" pos:end="169:11">-&gt;</operator><name pos:start="169:12" pos:end="169:29">mc_mb_var_sum_temp</name></name> <operator pos:start="169:31" pos:end="169:32">+=</operator> <name pos:start="169:34" pos:end="169:38">score</name></expr>;</expr_stmt>

        <expr_stmt pos:start="171:9" pos:end="171:71"><expr pos:start="171:9" pos:end="171:70"><name pos:start="171:9" pos:end="171:62"><name pos:start="171:9" pos:end="171:9">s</name><operator pos:start="171:10" pos:end="171:11">-&gt;</operator><name pos:start="171:12" pos:end="171:26">current_picture</name><operator pos:start="171:27" pos:end="171:27">.</operator><name pos:start="171:28" pos:end="171:36">mc_mb_var</name><index pos:start="171:37" pos:end="171:62">[<expr pos:start="171:38" pos:end="171:61"><name pos:start="171:38" pos:end="171:41">mb_y</name><operator pos:start="171:42" pos:end="171:42">*</operator><name pos:start="171:43" pos:end="171:54"><name pos:start="171:43" pos:end="171:43">s</name><operator pos:start="171:44" pos:end="171:45">-&gt;</operator><name pos:start="171:46" pos:end="171:54">mb_stride</name></name> <operator pos:start="171:56" pos:end="171:56">+</operator> <name pos:start="171:58" pos:end="171:61">mb_x</name></expr>]</index></name> <operator pos:start="171:64" pos:end="171:64">=</operator> <name pos:start="171:66" pos:end="171:70">score</name></expr>;</expr_stmt> <comment type="line" pos:start="171:73" pos:end="171:87">//FIXME use SSE</comment>

    </block_content>}</block>



    <if_stmt pos:start="177:5" pos:end="203:5"><if pos:start="177:5" pos:end="203:5">if<condition pos:start="177:7" pos:end="177:53">(<expr pos:start="177:8" pos:end="177:52"><name pos:start="177:8" pos:end="177:28"><name pos:start="177:8" pos:end="177:8">c</name><operator pos:start="177:9" pos:end="177:10">-&gt;</operator><name pos:start="177:11" pos:end="177:15">avctx</name><operator pos:start="177:16" pos:end="177:17">-&gt;</operator><name pos:start="177:18" pos:end="177:28">mb_decision</name></name> <operator pos:start="177:30" pos:end="177:30">&gt;</operator> <name pos:start="177:32" pos:end="177:52">FF_MB_DECISION_SIMPLE</name></expr>)</condition><block pos:start="177:54" pos:end="203:5">{<block_content pos:start="179:9" pos:end="201:46">

        <expr_stmt pos:start="179:9" pos:end="179:122"><expr pos:start="179:9" pos:end="179:121"><name pos:start="179:9" pos:end="179:12">type</name><operator pos:start="179:13" pos:end="179:13">=</operator> <name pos:start="179:15" pos:end="179:39">CANDIDATE_MB_TYPE_FORWARD</name> <operator pos:start="179:41" pos:end="179:41">|</operator> <name pos:start="179:43" pos:end="179:68">CANDIDATE_MB_TYPE_BACKWARD</name> <operator pos:start="179:70" pos:end="179:70">|</operator> <name pos:start="179:72" pos:end="179:94">CANDIDATE_MB_TYPE_BIDIR</name> <operator pos:start="179:96" pos:end="179:96">|</operator> <name pos:start="179:98" pos:end="179:121">CANDIDATE_MB_TYPE_DIRECT</name></expr>;</expr_stmt>

        <if_stmt pos:start="181:9" pos:end="183:48"><if pos:start="181:9" pos:end="183:48">if<condition pos:start="181:11" pos:end="181:27">(<expr pos:start="181:12" pos:end="181:26"><name pos:start="181:12" pos:end="181:16">fimin</name> <operator pos:start="181:18" pos:end="181:18">&lt;</operator> <name pos:start="181:20" pos:end="181:26">INT_MAX</name></expr>)</condition><block type="pseudo" pos:start="183:13" pos:end="183:48"><block_content pos:start="183:13" pos:end="183:48">

            <expr_stmt pos:start="183:13" pos:end="183:48"><expr pos:start="183:13" pos:end="183:47"><name pos:start="183:13" pos:end="183:16">type</name> <operator pos:start="183:18" pos:end="183:19">|=</operator> <name pos:start="183:21" pos:end="183:47">CANDIDATE_MB_TYPE_FORWARD_I</name></expr>;</expr_stmt></block_content></block></if></if_stmt>

        <if_stmt pos:start="185:9" pos:end="187:49"><if pos:start="185:9" pos:end="187:49">if<condition pos:start="185:11" pos:end="185:27">(<expr pos:start="185:12" pos:end="185:26"><name pos:start="185:12" pos:end="185:16">bimin</name> <operator pos:start="185:18" pos:end="185:18">&lt;</operator> <name pos:start="185:20" pos:end="185:26">INT_MAX</name></expr>)</condition><block type="pseudo" pos:start="187:13" pos:end="187:49"><block_content pos:start="187:13" pos:end="187:49">

            <expr_stmt pos:start="187:13" pos:end="187:49"><expr pos:start="187:13" pos:end="187:48"><name pos:start="187:13" pos:end="187:16">type</name> <operator pos:start="187:18" pos:end="187:19">|=</operator> <name pos:start="187:21" pos:end="187:48">CANDIDATE_MB_TYPE_BACKWARD_I</name></expr>;</expr_stmt></block_content></block></if></if_stmt>

        <if_stmt pos:start="189:9" pos:end="193:9"><if pos:start="189:9" pos:end="193:9">if<condition pos:start="189:11" pos:end="189:46">(<expr pos:start="189:12" pos:end="189:45"><name pos:start="189:12" pos:end="189:16">fimin</name> <operator pos:start="189:18" pos:end="189:18">&lt;</operator> <name pos:start="189:20" pos:end="189:26">INT_MAX</name> <operator pos:start="189:28" pos:end="189:29">&amp;&amp;</operator> <name pos:start="189:31" pos:end="189:35">bimin</name> <operator pos:start="189:37" pos:end="189:37">&lt;</operator> <name pos:start="189:39" pos:end="189:45">INT_MAX</name></expr>)</condition><block pos:start="189:47" pos:end="193:9">{<block_content pos:start="191:13" pos:end="191:46">

            <expr_stmt pos:start="191:13" pos:end="191:46"><expr pos:start="191:13" pos:end="191:45"><name pos:start="191:13" pos:end="191:16">type</name> <operator pos:start="191:18" pos:end="191:19">|=</operator> <name pos:start="191:21" pos:end="191:45">CANDIDATE_MB_TYPE_BIDIR_I</name></expr>;</expr_stmt>

        </block_content>}</block></if></if_stmt>

         <comment type="line" pos:start="195:10" pos:end="195:34">//FIXME something smarter</comment>

        <if_stmt pos:start="197:9" pos:end="197:61"><if pos:start="197:9" pos:end="197:61">if<condition pos:start="197:11" pos:end="197:27">(<expr pos:start="197:12" pos:end="197:26"><name pos:start="197:12" pos:end="197:15">dmin</name><operator pos:start="197:16" pos:end="197:16">&gt;</operator><literal type="number" pos:start="197:17" pos:end="197:19">256</literal><operator pos:start="197:20" pos:end="197:20">*</operator><literal type="number" pos:start="197:21" pos:end="197:23">256</literal><operator pos:start="197:24" pos:end="197:24">*</operator><literal type="number" pos:start="197:25" pos:end="197:26">16</literal></expr>)</condition><block type="pseudo" pos:start="197:29" pos:end="197:61"><block_content pos:start="197:29" pos:end="197:61"> <expr_stmt pos:start="197:29" pos:end="197:61"><expr pos:start="197:29" pos:end="197:60"><name pos:start="197:29" pos:end="197:32">type</name><operator pos:start="197:33" pos:end="197:34">&amp;=</operator> <operator pos:start="197:36" pos:end="197:36">~</operator><name pos:start="197:37" pos:end="197:60">CANDIDATE_MB_TYPE_DIRECT</name></expr>;</expr_stmt></block_content></block></if></if_stmt> <comment type="line" pos:start="197:63" pos:end="197:115">//do not try direct mode if it is invalid for this MB</comment>

        <if_stmt pos:start="199:9" pos:end="201:46"><if pos:start="199:9" pos:end="201:46">if<condition pos:start="199:11" pos:end="199:144">(<expr pos:start="199:12" pos:end="199:143"><name pos:start="199:12" pos:end="199:22"><name pos:start="199:12" pos:end="199:12">s</name><operator pos:start="199:13" pos:end="199:14">-&gt;</operator><name pos:start="199:15" pos:end="199:22">codec_id</name></name> <operator pos:start="199:24" pos:end="199:25">==</operator> <name pos:start="199:27" pos:end="199:43">AV_CODEC_ID_MPEG4</name> <operator pos:start="199:45" pos:end="199:46">&amp;&amp;</operator> <name pos:start="199:48" pos:end="199:51">type</name><operator pos:start="199:52" pos:end="199:52">&amp;</operator><name pos:start="199:53" pos:end="199:76">CANDIDATE_MB_TYPE_DIRECT</name> <operator pos:start="199:78" pos:end="199:79">&amp;&amp;</operator> <name pos:start="199:81" pos:end="199:88"><name pos:start="199:81" pos:end="199:81">s</name><operator pos:start="199:82" pos:end="199:83">-&gt;</operator><name pos:start="199:84" pos:end="199:88">flags</name></name><operator pos:start="199:89" pos:end="199:89">&amp;</operator><name pos:start="199:90" pos:end="199:103">CODEC_FLAG_MV0</name> <operator pos:start="199:105" pos:end="199:106">&amp;&amp;</operator> <operator pos:start="199:108" pos:end="199:108">*</operator><operator pos:start="199:109" pos:end="199:109">(</operator><name pos:start="199:110" pos:end="199:117">uint32_t</name><operator pos:start="199:118" pos:end="199:118">*</operator><operator pos:start="199:119" pos:end="199:119">)</operator><name pos:start="199:120" pos:end="199:143"><name pos:start="199:120" pos:end="199:120">s</name><operator pos:start="199:121" pos:end="199:122">-&gt;</operator><name pos:start="199:123" pos:end="199:139">b_direct_mv_table</name><index pos:start="199:140" pos:end="199:143">[<expr pos:start="199:141" pos:end="199:142"><name pos:start="199:141" pos:end="199:142">xy</name></expr>]</index></name></expr>)</condition><block type="pseudo" pos:start="201:13" pos:end="201:46"><block_content pos:start="201:13" pos:end="201:46">

            <expr_stmt pos:start="201:13" pos:end="201:46"><expr pos:start="201:13" pos:end="201:45"><name pos:start="201:13" pos:end="201:16">type</name> <operator pos:start="201:18" pos:end="201:19">|=</operator> <name pos:start="201:21" pos:end="201:45">CANDIDATE_MB_TYPE_DIRECT0</name></expr>;</expr_stmt></block_content></block></if></if_stmt>

    </block_content>}</block></if></if_stmt>



    <expr_stmt pos:start="207:5" pos:end="207:47"><expr pos:start="207:5" pos:end="207:46"><name pos:start="207:5" pos:end="207:40"><name pos:start="207:5" pos:end="207:5">s</name><operator pos:start="207:6" pos:end="207:7">-&gt;</operator><name pos:start="207:8" pos:end="207:14">mb_type</name><index pos:start="207:15" pos:end="207:40">[<expr pos:start="207:16" pos:end="207:39"><name pos:start="207:16" pos:end="207:19">mb_y</name><operator pos:start="207:20" pos:end="207:20">*</operator><name pos:start="207:21" pos:end="207:32"><name pos:start="207:21" pos:end="207:21">s</name><operator pos:start="207:22" pos:end="207:23">-&gt;</operator><name pos:start="207:24" pos:end="207:32">mb_stride</name></name> <operator pos:start="207:34" pos:end="207:34">+</operator> <name pos:start="207:36" pos:end="207:39">mb_x</name></expr>]</index></name><operator pos:start="207:41" pos:end="207:41">=</operator> <name pos:start="207:43" pos:end="207:46">type</name></expr>;</expr_stmt>

</block_content>}</block></function>
</unit>
