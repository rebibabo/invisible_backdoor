<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<unit xmlns="http://www.srcML.org/srcML/src" xmlns:pos="http://www.srcML.org/srcML/position" revision="1.0.0" language="C" filename="dataset/ropgen/aug/1/17424.c" pos:tabs="8"><function pos:start="1:1" pos:end="11:41"><type pos:start="1:1" pos:end="1:4"><name pos:start="1:1" pos:end="1:4">void</name></type> <name pos:start="1:6" pos:end="1:20">virtqueue_flush</name><parameter_list pos:start="1:21" pos:end="1:55">(<parameter pos:start="1:22" pos:end="1:34"><decl pos:start="1:22" pos:end="1:34"><type pos:start="1:22" pos:end="1:34"><name pos:start="1:22" pos:end="1:30">VirtQueue</name> <modifier pos:start="1:32" pos:end="1:32">*</modifier></type><name pos:start="1:33" pos:end="1:34">vq</name></decl></parameter>, <parameter pos:start="1:37" pos:end="1:54"><decl pos:start="1:37" pos:end="1:54"><type pos:start="1:37" pos:end="1:54"><name pos:start="1:37" pos:end="1:44">unsigned</name> <name pos:start="1:46" pos:end="1:48">int</name></type> <name pos:start="1:50" pos:end="1:54">count</name></decl></parameter>)</parameter_list>
<block pos:start="2:1" pos:end="11:41">{<block_content pos:start="3:5" pos:end="11:41">
    <decl_stmt pos:start="3:5" pos:end="3:22"><decl pos:start="3:5" pos:end="3:16"><type pos:start="3:5" pos:end="3:12"><name pos:start="3:5" pos:end="3:12">uint16_t</name></type> <name pos:start="3:14" pos:end="3:16">old</name></decl>, <decl pos:start="3:19" pos:end="3:21"><type ref="prev" pos:start="3:5" pos:end="3:12"/><name pos:start="3:19" pos:end="3:21">new</name></decl>;</decl_stmt>
    <comment type="block" pos:start="4:5" pos:end="4:61">/* Make sure buffer is written before we update index. */</comment>
    <expr_stmt pos:start="5:5" pos:end="5:14"><expr pos:start="5:5" pos:end="5:13"><call pos:start="5:5" pos:end="5:13"><name pos:start="5:5" pos:end="5:11">smp_wmb</name><argument_list pos:start="5:12" pos:end="5:13">()</argument_list></call></expr>;</expr_stmt>
    <expr_stmt pos:start="6:5" pos:end="6:37"><expr pos:start="6:5" pos:end="6:36"><call pos:start="6:5" pos:end="6:36"><name pos:start="6:5" pos:end="6:25">trace_virtqueue_flush</name><argument_list pos:start="6:26" pos:end="6:36">(<argument pos:start="6:27" pos:end="6:28"><expr pos:start="6:27" pos:end="6:28"><name pos:start="6:27" pos:end="6:28">vq</name></expr></argument>, <argument pos:start="6:31" pos:end="6:35"><expr pos:start="6:31" pos:end="6:35"><name pos:start="6:31" pos:end="6:35">count</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
    <expr_stmt pos:start="7:5" pos:end="7:23"><expr pos:start="7:5" pos:end="7:22"><name pos:start="7:5" pos:end="7:7">old</name> <operator pos:start="7:9" pos:end="7:9">=</operator> <name pos:start="7:11" pos:end="7:22"><name pos:start="7:11" pos:end="7:12">vq</name><operator pos:start="7:13" pos:end="7:14">-&gt;</operator><name pos:start="7:15" pos:end="7:22">used_idx</name></name></expr>;</expr_stmt>
    <expr_stmt pos:start="8:5" pos:end="8:22"><expr pos:start="8:5" pos:end="8:21"><name pos:start="8:5" pos:end="8:7">new</name> <operator pos:start="8:9" pos:end="8:9">=</operator> <name pos:start="8:11" pos:end="8:13">old</name> <operator pos:start="8:15" pos:end="8:15">+</operator> <name pos:start="8:17" pos:end="8:21">count</name></expr>;</expr_stmt>
    <expr_stmt pos:start="9:5" pos:end="9:32"><expr pos:start="9:5" pos:end="9:31"><call pos:start="9:5" pos:end="9:31"><name pos:start="9:5" pos:end="9:22">vring_used_idx_set</name><argument_list pos:start="9:23" pos:end="9:31">(<argument pos:start="9:24" pos:end="9:25"><expr pos:start="9:24" pos:end="9:25"><name pos:start="9:24" pos:end="9:25">vq</name></expr></argument>, <argument pos:start="9:28" pos:end="9:30"><expr pos:start="9:28" pos:end="9:30"><name pos:start="9:28" pos:end="9:30">new</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
    <if_stmt pos:start="10:5" pos:end="11:41"><if pos:start="10:5" pos:end="11:41">if <condition pos:start="10:8" pos:end="10:78">(<expr pos:start="10:9" pos:end="10:77"><call pos:start="10:9" pos:end="10:77"><name pos:start="10:9" pos:end="10:16">unlikely</name><argument_list pos:start="10:17" pos:end="10:77">(<argument pos:start="10:18" pos:end="10:76"><expr pos:start="10:18" pos:end="10:76"><operator pos:start="10:18" pos:end="10:18">(</operator><name pos:start="10:19" pos:end="10:25">int16_t</name><operator pos:start="10:26" pos:end="10:26">)</operator><operator pos:start="10:27" pos:end="10:27">(</operator><name pos:start="10:28" pos:end="10:30">new</name> <operator pos:start="10:32" pos:end="10:32">-</operator> <name pos:start="10:34" pos:end="10:51"><name pos:start="10:34" pos:end="10:35">vq</name><operator pos:start="10:36" pos:end="10:37">-&gt;</operator><name pos:start="10:38" pos:end="10:51">signalled_used</name></name><operator pos:start="10:52" pos:end="10:52">)</operator> <operator pos:start="10:54" pos:end="10:54">&lt;</operator> <operator pos:start="10:56" pos:end="10:56">(</operator><name pos:start="10:57" pos:end="10:64">uint16_t</name><operator pos:start="10:65" pos:end="10:65">)</operator><operator pos:start="10:66" pos:end="10:66">(</operator><name pos:start="10:67" pos:end="10:69">new</name> <operator pos:start="10:71" pos:end="10:71">-</operator> <name pos:start="10:73" pos:end="10:75">old</name><operator pos:start="10:76" pos:end="10:76">)</operator></expr></argument>)</argument_list></call></expr>)</condition><block type="pseudo" pos:start="11:9" pos:end="11:41"><block_content pos:start="11:9" pos:end="11:41">
        <expr_stmt pos:start="11:9" pos:end="11:41"><expr pos:start="11:9" pos:end="11:40"><name pos:start="11:9" pos:end="11:32"><name pos:start="11:9" pos:end="11:10">vq</name><operator pos:start="11:11" pos:end="11:12">-&gt;</operator><name pos:start="11:13" pos:end="11:32">signalled_used_valid</name></name> <operator pos:start="11:34" pos:end="11:34">=</operator> <name pos:start="11:36" pos:end="11:40">false</name></expr>;</expr_stmt></block_content></block></if></if_stmt></block_content></block></function></unit>
