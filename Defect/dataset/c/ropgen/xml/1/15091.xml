<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<unit xmlns="http://www.srcML.org/srcML/src" xmlns:pos="http://www.srcML.org/srcML/position" revision="1.0.0" language="C" filename="dataset/ropgen/aug/1/15091.c" pos:tabs="8"><function pos:start="1:1" pos:end="41:1"><type pos:start="1:1" pos:end="1:3"><name pos:start="1:1" pos:end="1:3">int</name></type> <name pos:start="1:5" pos:end="1:12">add_exec</name><parameter_list pos:start="1:13" pos:end="3:43">(<parameter pos:start="1:14" pos:end="1:36"><decl pos:start="1:14" pos:end="1:36"><type pos:start="1:14" pos:end="1:36"><name pos:start="1:14" pos:end="1:27"><name pos:start="1:14" pos:end="1:19">struct</name> <name pos:start="1:21" pos:end="1:27">ex_list</name></name> <modifier pos:start="1:29" pos:end="1:29">*</modifier><modifier pos:start="1:30" pos:end="1:30">*</modifier></type><name pos:start="1:31" pos:end="1:36">ex_ptr</name></decl></parameter>, <parameter pos:start="1:39" pos:end="1:48"><decl pos:start="1:39" pos:end="1:48"><type pos:start="1:39" pos:end="1:48"><name pos:start="1:39" pos:end="1:41">int</name></type> <name pos:start="1:43" pos:end="1:48">do_pty</name></decl></parameter>, <parameter pos:start="1:51" pos:end="1:60"><decl pos:start="1:51" pos:end="1:60"><type pos:start="1:51" pos:end="1:60"><name pos:start="1:51" pos:end="1:54">char</name> <modifier pos:start="1:56" pos:end="1:56">*</modifier></type><name pos:start="1:57" pos:end="1:60">exec</name></decl></parameter>,

             <parameter pos:start="3:14" pos:end="3:32"><decl pos:start="3:14" pos:end="3:32"><type pos:start="3:14" pos:end="3:32"><name pos:start="3:14" pos:end="3:27"><name pos:start="3:14" pos:end="3:19">struct</name> <name pos:start="3:21" pos:end="3:27">in_addr</name></name></type> <name pos:start="3:29" pos:end="3:32">addr</name></decl></parameter>, <parameter pos:start="3:35" pos:end="3:42"><decl pos:start="3:35" pos:end="3:42"><type pos:start="3:35" pos:end="3:42"><name pos:start="3:35" pos:end="3:37">int</name></type> <name pos:start="3:39" pos:end="3:42">port</name></decl></parameter>)</parameter_list>

<block pos:start="5:1" pos:end="41:1">{<block_content pos:start="7:9" pos:end="39:17">

	<decl_stmt pos:start="7:9" pos:end="7:32"><decl pos:start="7:9" pos:end="7:31"><type pos:start="7:9" pos:end="7:24"><name pos:start="7:9" pos:end="7:22"><name pos:start="7:9" pos:end="7:14">struct</name> <name pos:start="7:16" pos:end="7:22">ex_list</name></name> <modifier pos:start="7:24" pos:end="7:24">*</modifier></type><name pos:start="7:25" pos:end="7:31">tmp_ptr</name></decl>;</decl_stmt>



	<comment type="block" pos:start="11:9" pos:end="11:49">/* First, check if the port is "bound" */</comment>

	<for pos:start="13:9" pos:end="21:9">for <control pos:start="13:13" pos:end="13:68">(<init pos:start="13:14" pos:end="13:31"><expr pos:start="13:14" pos:end="13:30"><name pos:start="13:14" pos:end="13:20">tmp_ptr</name> <operator pos:start="13:22" pos:end="13:22">=</operator> <operator pos:start="13:24" pos:end="13:24">*</operator><name pos:start="13:25" pos:end="13:30">ex_ptr</name></expr>;</init> <condition pos:start="13:33" pos:end="13:40"><expr pos:start="13:33" pos:end="13:39"><name pos:start="13:33" pos:end="13:39">tmp_ptr</name></expr>;</condition> <incr pos:start="13:42" pos:end="13:67"><expr pos:start="13:42" pos:end="13:67"><name pos:start="13:42" pos:end="13:48">tmp_ptr</name> <operator pos:start="13:50" pos:end="13:50">=</operator> <name pos:start="13:52" pos:end="13:67"><name pos:start="13:52" pos:end="13:58">tmp_ptr</name><operator pos:start="13:59" pos:end="13:60">-&gt;</operator><name pos:start="13:61" pos:end="13:67">ex_next</name></name></expr></incr>)</control> <block pos:start="13:70" pos:end="21:9">{<block_content pos:start="15:17" pos:end="19:34">

		<if_stmt pos:start="15:17" pos:end="19:34"><if pos:start="15:17" pos:end="19:34">if <condition pos:start="15:20" pos:end="17:59">(<expr pos:start="15:21" pos:end="17:58"><name pos:start="15:21" pos:end="15:24">port</name> <operator pos:start="15:26" pos:end="15:27">==</operator> <name pos:start="15:29" pos:end="15:45"><name pos:start="15:29" pos:end="15:35">tmp_ptr</name><operator pos:start="15:36" pos:end="15:37">-&gt;</operator><name pos:start="15:38" pos:end="15:45">ex_fport</name></name> <operator pos:start="15:47" pos:end="15:48">&amp;&amp;</operator>

		    <name pos:start="17:21" pos:end="17:31"><name pos:start="17:21" pos:end="17:24">addr</name><operator pos:start="17:25" pos:end="17:25">.</operator><name pos:start="17:26" pos:end="17:31">s_addr</name></name> <operator pos:start="17:33" pos:end="17:34">==</operator> <name pos:start="17:36" pos:end="17:58"><name pos:start="17:36" pos:end="17:42">tmp_ptr</name><operator pos:start="17:43" pos:end="17:44">-&gt;</operator><name pos:start="17:45" pos:end="17:51">ex_addr</name><operator pos:start="17:52" pos:end="17:52">.</operator><name pos:start="17:53" pos:end="17:58">s_addr</name></name></expr>)</condition><block type="pseudo" pos:start="19:25" pos:end="19:34"><block_content pos:start="19:25" pos:end="19:34">

			<return pos:start="19:25" pos:end="19:34">return <expr pos:start="19:32" pos:end="19:33"><operator pos:start="19:32" pos:end="19:32">-</operator><literal type="number" pos:start="19:33" pos:end="19:33">1</literal></expr>;</return></block_content></block></if></if_stmt>

	</block_content>}</block></for>



	<expr_stmt pos:start="25:9" pos:end="25:26"><expr pos:start="25:9" pos:end="25:25"><name pos:start="25:9" pos:end="25:15">tmp_ptr</name> <operator pos:start="25:17" pos:end="25:17">=</operator> <operator pos:start="25:19" pos:end="25:19">*</operator><name pos:start="25:20" pos:end="25:25">ex_ptr</name></expr>;</expr_stmt>

	<expr_stmt pos:start="27:9" pos:end="27:67"><expr pos:start="27:9" pos:end="27:66"><operator pos:start="27:9" pos:end="27:9">*</operator><name pos:start="27:10" pos:end="27:15">ex_ptr</name> <operator pos:start="27:17" pos:end="27:17">=</operator> <operator pos:start="27:19" pos:end="27:19">(</operator>struct <name pos:start="27:27" pos:end="27:33">ex_list</name> <operator pos:start="27:35" pos:end="27:35">*</operator><operator pos:start="27:36" pos:end="27:36">)</operator><call pos:start="27:37" pos:end="27:66"><name pos:start="27:37" pos:end="27:42">malloc</name><argument_list pos:start="27:43" pos:end="27:66">(<argument pos:start="27:44" pos:end="27:65"><expr pos:start="27:44" pos:end="27:65"><sizeof pos:start="27:44" pos:end="27:65">sizeof<argument_list pos:start="27:50" pos:end="27:65">(<argument pos:start="27:51" pos:end="27:64"><expr pos:start="27:51" pos:end="27:64">struct <name pos:start="27:58" pos:end="27:64">ex_list</name></expr></argument>)</argument_list></sizeof></expr></argument>)</argument_list></call></expr>;</expr_stmt>

	<expr_stmt pos:start="29:9" pos:end="29:35"><expr pos:start="29:9" pos:end="29:34"><name pos:start="29:9" pos:end="29:27"><operator pos:start="29:9" pos:end="29:9">(</operator><operator pos:start="29:10" pos:end="29:10">*</operator><name pos:start="29:11" pos:end="29:16">ex_ptr</name><operator pos:start="29:17" pos:end="29:17">)</operator><operator pos:start="29:18" pos:end="29:19">-&gt;</operator><name pos:start="29:20" pos:end="29:27">ex_fport</name></name> <operator pos:start="29:29" pos:end="29:29">=</operator> <name pos:start="29:31" pos:end="29:34">port</name></expr>;</expr_stmt>

	<expr_stmt pos:start="31:9" pos:end="31:34"><expr pos:start="31:9" pos:end="31:33"><name pos:start="31:9" pos:end="31:26"><operator pos:start="31:9" pos:end="31:9">(</operator><operator pos:start="31:10" pos:end="31:10">*</operator><name pos:start="31:11" pos:end="31:16">ex_ptr</name><operator pos:start="31:17" pos:end="31:17">)</operator><operator pos:start="31:18" pos:end="31:19">-&gt;</operator><name pos:start="31:20" pos:end="31:26">ex_addr</name></name> <operator pos:start="31:28" pos:end="31:28">=</operator> <name pos:start="31:30" pos:end="31:33">addr</name></expr>;</expr_stmt>

	<expr_stmt pos:start="33:9" pos:end="33:35"><expr pos:start="33:9" pos:end="33:34"><name pos:start="33:9" pos:end="33:25"><operator pos:start="33:9" pos:end="33:9">(</operator><operator pos:start="33:10" pos:end="33:10">*</operator><name pos:start="33:11" pos:end="33:16">ex_ptr</name><operator pos:start="33:17" pos:end="33:17">)</operator><operator pos:start="33:18" pos:end="33:19">-&gt;</operator><name pos:start="33:20" pos:end="33:25">ex_pty</name></name> <operator pos:start="33:27" pos:end="33:27">=</operator> <name pos:start="33:29" pos:end="33:34">do_pty</name></expr>;</expr_stmt>

	<expr_stmt pos:start="35:9" pos:end="35:65"><expr pos:start="35:9" pos:end="35:64"><name pos:start="35:9" pos:end="35:26"><operator pos:start="35:9" pos:end="35:9">(</operator><operator pos:start="35:10" pos:end="35:10">*</operator><name pos:start="35:11" pos:end="35:16">ex_ptr</name><operator pos:start="35:17" pos:end="35:17">)</operator><operator pos:start="35:18" pos:end="35:19">-&gt;</operator><name pos:start="35:20" pos:end="35:26">ex_exec</name></name> <operator pos:start="35:28" pos:end="35:28">=</operator> <ternary pos:start="35:30" pos:end="35:64"><condition pos:start="35:30" pos:end="35:44"><expr pos:start="35:30" pos:end="35:42"><operator pos:start="35:30" pos:end="35:30">(</operator><name pos:start="35:31" pos:end="35:36">do_pty</name> <operator pos:start="35:38" pos:end="35:39">==</operator> <literal type="number" pos:start="35:41" pos:end="35:41">3</literal><operator pos:start="35:42" pos:end="35:42">)</operator></expr> ?</condition><then pos:start="35:46" pos:end="35:49"> <expr pos:start="35:46" pos:end="35:49"><name pos:start="35:46" pos:end="35:49">exec</name></expr> </then><else pos:start="35:51" pos:end="35:64">: <expr pos:start="35:53" pos:end="35:64"><call pos:start="35:53" pos:end="35:64"><name pos:start="35:53" pos:end="35:58">strdup</name><argument_list pos:start="35:59" pos:end="35:64">(<argument pos:start="35:60" pos:end="35:63"><expr pos:start="35:60" pos:end="35:63"><name pos:start="35:60" pos:end="35:63">exec</name></expr></argument>)</argument_list></call></expr></else></ternary></expr>;</expr_stmt>

	<expr_stmt pos:start="37:9" pos:end="37:37"><expr pos:start="37:9" pos:end="37:36"><name pos:start="37:9" pos:end="37:26"><operator pos:start="37:9" pos:end="37:9">(</operator><operator pos:start="37:10" pos:end="37:10">*</operator><name pos:start="37:11" pos:end="37:16">ex_ptr</name><operator pos:start="37:17" pos:end="37:17">)</operator><operator pos:start="37:18" pos:end="37:19">-&gt;</operator><name pos:start="37:20" pos:end="37:26">ex_next</name></name> <operator pos:start="37:28" pos:end="37:28">=</operator> <name pos:start="37:30" pos:end="37:36">tmp_ptr</name></expr>;</expr_stmt>

	<return pos:start="39:9" pos:end="39:17">return <expr pos:start="39:16" pos:end="39:16"><literal type="number" pos:start="39:16" pos:end="39:16">0</literal></expr>;</return>

</block_content>}</block></function>
</unit>
