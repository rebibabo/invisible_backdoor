<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<unit xmlns="http://www.srcML.org/srcML/src" xmlns:pos="http://www.srcML.org/srcML/position" revision="1.0.0" language="C" filename="dataset/ropgen/aug/1/2011.c" pos:tabs="8"><function pos:start="1:1" pos:end="36:1"><type pos:start="1:1" pos:end="1:11"><specifier pos:start="1:1" pos:end="1:6">static</specifier> <name pos:start="1:8" pos:end="1:11">void</name></type> <name pos:start="1:13" pos:end="1:24">v9fs_getlock</name><parameter_list pos:start="1:25" pos:end="1:38">(<parameter pos:start="1:26" pos:end="1:37"><decl pos:start="1:26" pos:end="1:37"><type pos:start="1:26" pos:end="1:31"><name pos:start="1:26" pos:end="1:29">void</name> <modifier pos:start="1:31" pos:end="1:31">*</modifier></type><name pos:start="1:32" pos:end="1:37">opaque</name></decl></parameter>)</parameter_list>
<block pos:start="2:1" pos:end="36:1">{<block_content pos:start="3:5" pos:end="35:18">
    <decl_stmt pos:start="3:5" pos:end="3:22"><decl pos:start="3:5" pos:end="3:21"><type pos:start="3:5" pos:end="3:10"><name pos:start="3:5" pos:end="3:10">size_t</name></type> <name pos:start="3:12" pos:end="3:17">offset</name> <init pos:start="3:19" pos:end="3:21">= <expr pos:start="3:21" pos:end="3:21"><literal type="number" pos:start="3:21" pos:end="3:21">7</literal></expr></init></decl>;</decl_stmt>
    <decl_stmt pos:start="4:5" pos:end="4:22"><decl pos:start="4:5" pos:end="4:21"><type pos:start="4:5" pos:end="4:15"><name pos:start="4:5" pos:end="4:15"><name pos:start="4:5" pos:end="4:10">struct</name> <name pos:start="4:12" pos:end="4:15">stat</name></name></type> <name pos:start="4:17" pos:end="4:21">stbuf</name></decl>;</decl_stmt>
    <decl_stmt pos:start="5:5" pos:end="5:23"><decl pos:start="5:5" pos:end="5:22"><type pos:start="5:5" pos:end="5:18"><name pos:start="5:5" pos:end="5:16">V9fsFidState</name> <modifier pos:start="5:18" pos:end="5:18">*</modifier></type><name pos:start="5:19" pos:end="5:22">fidp</name></decl>;</decl_stmt>
    <decl_stmt pos:start="6:5" pos:end="6:23"><decl pos:start="6:5" pos:end="6:22"><type pos:start="6:5" pos:end="6:17"><name pos:start="6:5" pos:end="6:15">V9fsGetlock</name> <modifier pos:start="6:17" pos:end="6:17">*</modifier></type><name pos:start="6:18" pos:end="6:22">glock</name></decl>;</decl_stmt>
    <decl_stmt pos:start="7:5" pos:end="7:25"><decl pos:start="7:5" pos:end="7:15"><type pos:start="7:5" pos:end="7:11"><name pos:start="7:5" pos:end="7:11">int32_t</name></type> <name pos:start="7:13" pos:end="7:15">fid</name></decl>, <decl pos:start="7:18" pos:end="7:24"><type ref="prev" pos:start="7:5" pos:end="7:11"/><name pos:start="7:18" pos:end="7:20">err</name> <init pos:start="7:22" pos:end="7:24">= <expr pos:start="7:24" pos:end="7:24"><literal type="number" pos:start="7:24" pos:end="7:24">0</literal></expr></init></decl>;</decl_stmt>
    <decl_stmt pos:start="8:5" pos:end="8:26"><decl pos:start="8:5" pos:end="8:25"><type pos:start="8:5" pos:end="8:13"><name pos:start="8:5" pos:end="8:11">V9fsPDU</name> <modifier pos:start="8:13" pos:end="8:13">*</modifier></type><name pos:start="8:14" pos:end="8:16">pdu</name> <init pos:start="8:18" pos:end="8:25">= <expr pos:start="8:20" pos:end="8:25"><name pos:start="8:20" pos:end="8:25">opaque</name></expr></init></decl>;</decl_stmt>
    <decl_stmt pos:start="9:5" pos:end="9:26"><decl pos:start="9:5" pos:end="9:25"><type pos:start="9:5" pos:end="9:15"><name pos:start="9:5" pos:end="9:13">V9fsState</name> <modifier pos:start="9:15" pos:end="9:15">*</modifier></type><name pos:start="9:16" pos:end="9:16">s</name> <init pos:start="9:18" pos:end="9:25">= <expr pos:start="9:20" pos:end="9:25"><name pos:start="9:20" pos:end="9:25"><name pos:start="9:20" pos:end="9:22">pdu</name><operator pos:start="9:23" pos:end="9:24">-&gt;</operator><name pos:start="9:25" pos:end="9:25">s</name></name></expr></init></decl>;</decl_stmt>
    <expr_stmt pos:start="10:5" pos:end="10:37"><expr pos:start="10:5" pos:end="10:36"><name pos:start="10:5" pos:end="10:9">glock</name> <operator pos:start="10:11" pos:end="10:11">=</operator> <call pos:start="10:13" pos:end="10:36"><name pos:start="10:13" pos:end="10:20">g_malloc</name><argument_list pos:start="10:21" pos:end="10:36">(<argument pos:start="10:22" pos:end="10:35"><expr pos:start="10:22" pos:end="10:35"><sizeof pos:start="10:22" pos:end="10:35">sizeof<argument_list pos:start="10:28" pos:end="10:35">(<argument pos:start="10:29" pos:end="10:34"><expr pos:start="10:29" pos:end="10:34"><operator pos:start="10:29" pos:end="10:29">*</operator><name pos:start="10:30" pos:end="10:34">glock</name></expr></argument>)</argument_list></sizeof></expr></argument>)</argument_list></call></expr>;</expr_stmt>
    <expr_stmt pos:start="11:5" pos:end="13:37"><expr pos:start="11:5" pos:end="13:36"><call pos:start="11:5" pos:end="13:36"><name pos:start="11:5" pos:end="11:17">pdu_unmarshal</name><argument_list pos:start="11:18" pos:end="13:36">(<argument pos:start="11:19" pos:end="11:21"><expr pos:start="11:19" pos:end="11:21"><name pos:start="11:19" pos:end="11:21">pdu</name></expr></argument>, <argument pos:start="11:24" pos:end="11:29"><expr pos:start="11:24" pos:end="11:29"><name pos:start="11:24" pos:end="11:29">offset</name></expr></argument>, <argument pos:start="11:32" pos:end="11:39"><expr pos:start="11:32" pos:end="11:39"><literal type="string" pos:start="11:32" pos:end="11:39">"dbqqds"</literal></expr></argument>, <argument pos:start="11:42" pos:end="11:45"><expr pos:start="11:42" pos:end="11:45"><operator pos:start="11:42" pos:end="11:42">&amp;</operator><name pos:start="11:43" pos:end="11:45">fid</name></expr></argument>, <argument pos:start="11:48" pos:end="11:59"><expr pos:start="11:48" pos:end="11:59"><operator pos:start="11:48" pos:end="11:48">&amp;</operator><name pos:start="11:49" pos:end="11:59"><name pos:start="11:49" pos:end="11:53">glock</name><operator pos:start="11:54" pos:end="11:55">-&gt;</operator><name pos:start="11:56" pos:end="11:59">type</name></name></expr></argument>,
                  <argument pos:start="12:19" pos:end="12:31"><expr pos:start="12:19" pos:end="12:31"><operator pos:start="12:19" pos:end="12:19">&amp;</operator><name pos:start="12:20" pos:end="12:31"><name pos:start="12:20" pos:end="12:24">glock</name><operator pos:start="12:25" pos:end="12:26">-&gt;</operator><name pos:start="12:27" pos:end="12:31">start</name></name></expr></argument>, <argument pos:start="12:34" pos:end="12:47"><expr pos:start="12:34" pos:end="12:47"><operator pos:start="12:34" pos:end="12:34">&amp;</operator><name pos:start="12:35" pos:end="12:47"><name pos:start="12:35" pos:end="12:39">glock</name><operator pos:start="12:40" pos:end="12:41">-&gt;</operator><name pos:start="12:42" pos:end="12:47">length</name></name></expr></argument>, <argument pos:start="12:50" pos:end="12:64"><expr pos:start="12:50" pos:end="12:64"><operator pos:start="12:50" pos:end="12:50">&amp;</operator><name pos:start="12:51" pos:end="12:64"><name pos:start="12:51" pos:end="12:55">glock</name><operator pos:start="12:56" pos:end="12:57">-&gt;</operator><name pos:start="12:58" pos:end="12:64">proc_id</name></name></expr></argument>,
                  <argument pos:start="13:19" pos:end="13:35"><expr pos:start="13:19" pos:end="13:35"><operator pos:start="13:19" pos:end="13:19">&amp;</operator><name pos:start="13:20" pos:end="13:35"><name pos:start="13:20" pos:end="13:24">glock</name><operator pos:start="13:25" pos:end="13:26">-&gt;</operator><name pos:start="13:27" pos:end="13:35">client_id</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
    <expr_stmt pos:start="14:5" pos:end="15:65"><expr pos:start="14:5" pos:end="15:64"><call pos:start="14:5" pos:end="15:64"><name pos:start="14:5" pos:end="14:22">trace_v9fs_getlock</name><argument_list pos:start="14:23" pos:end="15:64">(<argument pos:start="14:24" pos:end="14:31"><expr pos:start="14:24" pos:end="14:31"><name pos:start="14:24" pos:end="14:31"><name pos:start="14:24" pos:end="14:26">pdu</name><operator pos:start="14:27" pos:end="14:28">-&gt;</operator><name pos:start="14:29" pos:end="14:31">tag</name></name></expr></argument>, <argument pos:start="14:34" pos:end="14:40"><expr pos:start="14:34" pos:end="14:40"><name pos:start="14:34" pos:end="14:40"><name pos:start="14:34" pos:end="14:36">pdu</name><operator pos:start="14:37" pos:end="14:38">-&gt;</operator><name pos:start="14:39" pos:end="14:40">id</name></name></expr></argument>, <argument pos:start="14:43" pos:end="14:45"><expr pos:start="14:43" pos:end="14:45"><name pos:start="14:43" pos:end="14:45">fid</name></expr></argument>,
                       <argument pos:start="15:24" pos:end="15:34"><expr pos:start="15:24" pos:end="15:34"><name pos:start="15:24" pos:end="15:34"><name pos:start="15:24" pos:end="15:28">glock</name><operator pos:start="15:29" pos:end="15:30">-&gt;</operator><name pos:start="15:31" pos:end="15:34">type</name></name></expr></argument>, <argument pos:start="15:37" pos:end="15:48"><expr pos:start="15:37" pos:end="15:48"><name pos:start="15:37" pos:end="15:48"><name pos:start="15:37" pos:end="15:41">glock</name><operator pos:start="15:42" pos:end="15:43">-&gt;</operator><name pos:start="15:44" pos:end="15:48">start</name></name></expr></argument>, <argument pos:start="15:51" pos:end="15:63"><expr pos:start="15:51" pos:end="15:63"><name pos:start="15:51" pos:end="15:63"><name pos:start="15:51" pos:end="15:55">glock</name><operator pos:start="15:56" pos:end="15:57">-&gt;</operator><name pos:start="15:58" pos:end="15:63">length</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
    <expr_stmt pos:start="16:5" pos:end="16:29"><expr pos:start="16:5" pos:end="16:28"><name pos:start="16:5" pos:end="16:8">fidp</name> <operator pos:start="16:10" pos:end="16:10">=</operator> <call pos:start="16:12" pos:end="16:28"><name pos:start="16:12" pos:end="16:18">get_fid</name><argument_list pos:start="16:19" pos:end="16:28">(<argument pos:start="16:20" pos:end="16:22"><expr pos:start="16:20" pos:end="16:22"><name pos:start="16:20" pos:end="16:22">pdu</name></expr></argument>, <argument pos:start="16:25" pos:end="16:27"><expr pos:start="16:25" pos:end="16:27"><name pos:start="16:25" pos:end="16:27">fid</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
    <if_stmt pos:start="17:5" pos:end="20:5"><if pos:start="17:5" pos:end="20:5">if <condition pos:start="17:8" pos:end="17:21">(<expr pos:start="17:9" pos:end="17:20"><name pos:start="17:9" pos:end="17:12">fidp</name> <operator pos:start="17:14" pos:end="17:15">==</operator> <name pos:start="17:17" pos:end="17:20">NULL</name></expr>)</condition> <block pos:start="17:23" pos:end="20:5">{<block_content pos:start="18:9" pos:end="19:23">
        <expr_stmt pos:start="18:9" pos:end="18:22"><expr pos:start="18:9" pos:end="18:21"><name pos:start="18:9" pos:end="18:11">err</name> <operator pos:start="18:13" pos:end="18:13">=</operator> <operator pos:start="18:15" pos:end="18:15">-</operator><name pos:start="18:16" pos:end="18:21">ENOENT</name></expr>;</expr_stmt>
        <goto pos:start="19:9" pos:end="19:23">goto <name pos:start="19:14" pos:end="19:22">out_nofid</name>;</goto>
    </block_content>}</block></if></if_stmt>
    <expr_stmt pos:start="21:5" pos:end="21:50"><expr pos:start="21:5" pos:end="21:49"><name pos:start="21:5" pos:end="21:7">err</name> <operator pos:start="21:9" pos:end="21:9">=</operator> <call pos:start="21:11" pos:end="21:49"><name pos:start="21:11" pos:end="21:23">v9fs_co_fstat</name><argument_list pos:start="21:24" pos:end="21:49">(<argument pos:start="21:25" pos:end="21:27"><expr pos:start="21:25" pos:end="21:27"><name pos:start="21:25" pos:end="21:27">pdu</name></expr></argument>, <argument pos:start="21:30" pos:end="21:40"><expr pos:start="21:30" pos:end="21:40"><name pos:start="21:30" pos:end="21:40"><name pos:start="21:30" pos:end="21:33">fidp</name><operator pos:start="21:34" pos:end="21:35">-&gt;</operator><name pos:start="21:36" pos:end="21:37">fs</name><operator pos:start="21:38" pos:end="21:38">.</operator><name pos:start="21:39" pos:end="21:40">fd</name></name></expr></argument>, <argument pos:start="21:43" pos:end="21:48"><expr pos:start="21:43" pos:end="21:48"><operator pos:start="21:43" pos:end="21:43">&amp;</operator><name pos:start="21:44" pos:end="21:48">stbuf</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
    <if_stmt pos:start="22:5" pos:end="24:5"><if pos:start="22:5" pos:end="24:5">if <condition pos:start="22:8" pos:end="22:16">(<expr pos:start="22:9" pos:end="22:15"><name pos:start="22:9" pos:end="22:11">err</name> <operator pos:start="22:13" pos:end="22:13">&lt;</operator> <literal type="number" pos:start="22:15" pos:end="22:15">0</literal></expr>)</condition> <block pos:start="22:18" pos:end="24:5">{<block_content pos:start="23:9" pos:end="23:17">
        <goto pos:start="23:9" pos:end="23:17">goto <name pos:start="23:14" pos:end="23:16">out</name>;</goto>
    </block_content>}</block></if></if_stmt>
    <expr_stmt pos:start="25:5" pos:end="25:37"><expr pos:start="25:5" pos:end="25:36"><name pos:start="25:5" pos:end="25:15"><name pos:start="25:5" pos:end="25:9">glock</name><operator pos:start="25:10" pos:end="25:11">-&gt;</operator><name pos:start="25:12" pos:end="25:15">type</name></name> <operator pos:start="25:17" pos:end="25:17">=</operator> <name pos:start="25:19" pos:end="25:36">P9_LOCK_TYPE_UNLCK</name></expr>;</expr_stmt>
    <expr_stmt pos:start="26:5" pos:end="28:45"><expr pos:start="26:5" pos:end="28:44"><name pos:start="26:5" pos:end="26:10">offset</name> <operator pos:start="26:12" pos:end="26:13">+=</operator> <call pos:start="26:15" pos:end="28:44"><name pos:start="26:15" pos:end="26:25">pdu_marshal</name><argument_list pos:start="26:26" pos:end="28:44">(<argument pos:start="26:27" pos:end="26:29"><expr pos:start="26:27" pos:end="26:29"><name pos:start="26:27" pos:end="26:29">pdu</name></expr></argument>, <argument pos:start="26:32" pos:end="26:37"><expr pos:start="26:32" pos:end="26:37"><name pos:start="26:32" pos:end="26:37">offset</name></expr></argument>, <argument pos:start="26:40" pos:end="26:46"><expr pos:start="26:40" pos:end="26:46"><literal type="string" pos:start="26:40" pos:end="26:46">"bqqds"</literal></expr></argument>, <argument pos:start="26:49" pos:end="26:59"><expr pos:start="26:49" pos:end="26:59"><name pos:start="26:49" pos:end="26:59"><name pos:start="26:49" pos:end="26:53">glock</name><operator pos:start="26:54" pos:end="26:55">-&gt;</operator><name pos:start="26:56" pos:end="26:59">type</name></name></expr></argument>,
                          <argument pos:start="27:27" pos:end="27:38"><expr pos:start="27:27" pos:end="27:38"><name pos:start="27:27" pos:end="27:38"><name pos:start="27:27" pos:end="27:31">glock</name><operator pos:start="27:32" pos:end="27:33">-&gt;</operator><name pos:start="27:34" pos:end="27:38">start</name></name></expr></argument>, <argument pos:start="27:41" pos:end="27:53"><expr pos:start="27:41" pos:end="27:53"><name pos:start="27:41" pos:end="27:53"><name pos:start="27:41" pos:end="27:45">glock</name><operator pos:start="27:46" pos:end="27:47">-&gt;</operator><name pos:start="27:48" pos:end="27:53">length</name></name></expr></argument>, <argument pos:start="27:56" pos:end="27:69"><expr pos:start="27:56" pos:end="27:69"><name pos:start="27:56" pos:end="27:69"><name pos:start="27:56" pos:end="27:60">glock</name><operator pos:start="27:61" pos:end="27:62">-&gt;</operator><name pos:start="27:63" pos:end="27:69">proc_id</name></name></expr></argument>,
                          <argument pos:start="28:27" pos:end="28:43"><expr pos:start="28:27" pos:end="28:43"><operator pos:start="28:27" pos:end="28:27">&amp;</operator><name pos:start="28:28" pos:end="28:43"><name pos:start="28:28" pos:end="28:32">glock</name><operator pos:start="28:33" pos:end="28:34">-&gt;</operator><name pos:start="28:35" pos:end="28:43">client_id</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
    <expr_stmt pos:start="29:5" pos:end="29:17"><expr pos:start="29:5" pos:end="29:16"><name pos:start="29:5" pos:end="29:7">err</name> <operator pos:start="29:9" pos:end="29:9">=</operator> <name pos:start="29:11" pos:end="29:16">offset</name></expr>;</expr_stmt>
<label pos:start="30:1" pos:end="30:4"><name pos:start="30:1" pos:end="30:3">out</name>:</label>
    <expr_stmt pos:start="31:5" pos:end="31:23"><expr pos:start="31:5" pos:end="31:22"><call pos:start="31:5" pos:end="31:22"><name pos:start="31:5" pos:end="31:11">put_fid</name><argument_list pos:start="31:12" pos:end="31:22">(<argument pos:start="31:13" pos:end="31:15"><expr pos:start="31:13" pos:end="31:15"><name pos:start="31:13" pos:end="31:15">pdu</name></expr></argument>, <argument pos:start="31:18" pos:end="31:21"><expr pos:start="31:18" pos:end="31:21"><name pos:start="31:18" pos:end="31:21">fidp</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
<label pos:start="32:1" pos:end="32:10"><name pos:start="32:1" pos:end="32:9">out_nofid</name>:</label>
    <expr_stmt pos:start="33:5" pos:end="33:30"><expr pos:start="33:5" pos:end="33:29"><call pos:start="33:5" pos:end="33:29"><name pos:start="33:5" pos:end="33:16">complete_pdu</name><argument_list pos:start="33:17" pos:end="33:29">(<argument pos:start="33:18" pos:end="33:18"><expr pos:start="33:18" pos:end="33:18"><name pos:start="33:18" pos:end="33:18">s</name></expr></argument>, <argument pos:start="33:21" pos:end="33:23"><expr pos:start="33:21" pos:end="33:23"><name pos:start="33:21" pos:end="33:23">pdu</name></expr></argument>, <argument pos:start="33:26" pos:end="33:28"><expr pos:start="33:26" pos:end="33:28"><name pos:start="33:26" pos:end="33:28">err</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
    <expr_stmt pos:start="34:5" pos:end="34:40"><expr pos:start="34:5" pos:end="34:39"><call pos:start="34:5" pos:end="34:39"><name pos:start="34:5" pos:end="34:20">v9fs_string_free</name><argument_list pos:start="34:21" pos:end="34:39">(<argument pos:start="34:22" pos:end="34:38"><expr pos:start="34:22" pos:end="34:38"><operator pos:start="34:22" pos:end="34:22">&amp;</operator><name pos:start="34:23" pos:end="34:38"><name pos:start="34:23" pos:end="34:27">glock</name><operator pos:start="34:28" pos:end="34:29">-&gt;</operator><name pos:start="34:30" pos:end="34:38">client_id</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
    <expr_stmt pos:start="35:5" pos:end="35:18"><expr pos:start="35:5" pos:end="35:17"><call pos:start="35:5" pos:end="35:17"><name pos:start="35:5" pos:end="35:10">g_free</name><argument_list pos:start="35:11" pos:end="35:17">(<argument pos:start="35:12" pos:end="35:16"><expr pos:start="35:12" pos:end="35:16"><name pos:start="35:12" pos:end="35:16">glock</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
</block_content>}</block></function></unit>
