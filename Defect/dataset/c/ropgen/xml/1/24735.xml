<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<unit xmlns="http://www.srcML.org/srcML/src" xmlns:pos="http://www.srcML.org/srcML/position" revision="1.0.0" language="C" filename="dataset/ropgen/aug/1/24735.c" pos:tabs="8"><function pos:start="1:1" pos:end="65:1"><type pos:start="1:1" pos:end="1:4"><name pos:start="1:1" pos:end="1:4">void</name></type> <name pos:start="1:6" pos:end="1:22">write_video_frame</name><parameter_list pos:start="1:23" pos:end="1:57">(<parameter pos:start="1:24" pos:end="1:42"><decl pos:start="1:24" pos:end="1:42"><type pos:start="1:24" pos:end="1:42"><name pos:start="1:24" pos:end="1:38">AVFormatContext</name> <modifier pos:start="1:40" pos:end="1:40">*</modifier></type><name pos:start="1:41" pos:end="1:42">oc</name></decl></parameter>, <parameter pos:start="1:45" pos:end="1:56"><decl pos:start="1:45" pos:end="1:56"><type pos:start="1:45" pos:end="1:56"><name pos:start="1:45" pos:end="1:52">AVStream</name> <modifier pos:start="1:54" pos:end="1:54">*</modifier></type><name pos:start="1:55" pos:end="1:56">st</name></decl></parameter>)</parameter_list>

<block pos:start="3:1" pos:end="65:1">{<block_content pos:start="5:5" pos:end="63:5">

    <decl_stmt pos:start="5:5" pos:end="5:26"><decl pos:start="5:5" pos:end="5:9"><type pos:start="5:5" pos:end="5:7"><name pos:start="5:5" pos:end="5:7">int</name></type> <name pos:start="5:9" pos:end="5:9">x</name></decl>, <decl pos:start="5:12" pos:end="5:12"><type ref="prev" pos:start="5:5" pos:end="5:7"/><name pos:start="5:12" pos:end="5:12">y</name></decl>, <decl pos:start="5:15" pos:end="5:15"><type ref="prev" pos:start="5:5" pos:end="5:7"/><name pos:start="5:15" pos:end="5:15">i</name></decl>, <decl pos:start="5:18" pos:end="5:25"><type ref="prev" pos:start="5:5" pos:end="5:7"/><name pos:start="5:18" pos:end="5:25">out_size</name></decl>;</decl_stmt>

    <decl_stmt pos:start="7:5" pos:end="7:22"><decl pos:start="7:5" pos:end="7:21"><type pos:start="7:5" pos:end="7:20"><name pos:start="7:5" pos:end="7:18">AVCodecContext</name> <modifier pos:start="7:20" pos:end="7:20">*</modifier></type><name pos:start="7:21" pos:end="7:21">c</name></decl>;</decl_stmt>



    <expr_stmt pos:start="11:5" pos:end="11:19"><expr pos:start="11:5" pos:end="11:18"><name pos:start="11:5" pos:end="11:5">c</name> <operator pos:start="11:7" pos:end="11:7">=</operator> <operator pos:start="11:9" pos:end="11:9">&amp;</operator><name pos:start="11:10" pos:end="11:18"><name pos:start="11:10" pos:end="11:11">st</name><operator pos:start="11:12" pos:end="11:13">-&gt;</operator><name pos:start="11:14" pos:end="11:18">codec</name></name></expr>;</expr_stmt>

    

    <comment type="block" pos:start="15:5" pos:end="15:31">/* prepare a dummy image */</comment>

    <comment type="block" pos:start="17:5" pos:end="17:11">/* Y */</comment>

    <expr_stmt pos:start="19:5" pos:end="19:22"><expr pos:start="19:5" pos:end="19:21"><name pos:start="19:5" pos:end="19:5">i</name> <operator pos:start="19:7" pos:end="19:7">=</operator> <name pos:start="19:9" pos:end="19:19">frame_count</name><operator pos:start="19:20" pos:end="19:21">++</operator></expr>;</expr_stmt>

    <for pos:start="21:5" pos:end="29:5">for<control pos:start="21:8" pos:end="21:28">(<init pos:start="21:9" pos:end="21:12"><expr pos:start="21:9" pos:end="21:11"><name pos:start="21:9" pos:end="21:9">y</name><operator pos:start="21:10" pos:end="21:10">=</operator><literal type="number" pos:start="21:11" pos:end="21:11">0</literal></expr>;</init><condition pos:start="21:13" pos:end="21:24"><expr pos:start="21:13" pos:end="21:23"><name pos:start="21:13" pos:end="21:13">y</name><operator pos:start="21:14" pos:end="21:14">&lt;</operator><name pos:start="21:15" pos:end="21:23"><name pos:start="21:15" pos:end="21:15">c</name><operator pos:start="21:16" pos:end="21:17">-&gt;</operator><name pos:start="21:18" pos:end="21:23">height</name></name></expr>;</condition><incr pos:start="21:25" pos:end="21:27"><expr pos:start="21:25" pos:end="21:27"><name pos:start="21:25" pos:end="21:25">y</name><operator pos:start="21:26" pos:end="21:27">++</operator></expr></incr>)</control> <block pos:start="21:30" pos:end="29:5">{<block_content pos:start="23:9" pos:end="27:9">

        <for pos:start="23:9" pos:end="27:9">for<control pos:start="23:12" pos:end="23:31">(<init pos:start="23:13" pos:end="23:16"><expr pos:start="23:13" pos:end="23:15"><name pos:start="23:13" pos:end="23:13">x</name><operator pos:start="23:14" pos:end="23:14">=</operator><literal type="number" pos:start="23:15" pos:end="23:15">0</literal></expr>;</init><condition pos:start="23:17" pos:end="23:27"><expr pos:start="23:17" pos:end="23:26"><name pos:start="23:17" pos:end="23:17">x</name><operator pos:start="23:18" pos:end="23:18">&lt;</operator><name pos:start="23:19" pos:end="23:26"><name pos:start="23:19" pos:end="23:19">c</name><operator pos:start="23:20" pos:end="23:21">-&gt;</operator><name pos:start="23:22" pos:end="23:26">width</name></name></expr>;</condition><incr pos:start="23:28" pos:end="23:30"><expr pos:start="23:28" pos:end="23:30"><name pos:start="23:28" pos:end="23:28">x</name><operator pos:start="23:29" pos:end="23:30">++</operator></expr></incr>)</control> <block pos:start="23:33" pos:end="27:9">{<block_content pos:start="25:13" pos:end="25:75">

            <expr_stmt pos:start="25:13" pos:end="25:75"><expr pos:start="25:13" pos:end="25:74"><name pos:start="25:13" pos:end="25:58"><name pos:start="25:13" pos:end="25:19">picture</name><operator pos:start="25:20" pos:end="25:21">-&gt;</operator><name pos:start="25:22" pos:end="25:25">data</name><index pos:start="25:26" pos:end="25:28">[<expr pos:start="25:27" pos:end="25:27"><literal type="number" pos:start="25:27" pos:end="25:27">0</literal></expr>]</index><index pos:start="25:29" pos:end="25:58">[<expr pos:start="25:30" pos:end="25:57"><name pos:start="25:30" pos:end="25:30">y</name> <operator pos:start="25:32" pos:end="25:32">*</operator> <name pos:start="25:34" pos:end="25:53"><name pos:start="25:34" pos:end="25:40">picture</name><operator pos:start="25:41" pos:end="25:42">-&gt;</operator><name pos:start="25:43" pos:end="25:50">linesize</name><index pos:start="25:51" pos:end="25:53">[<expr pos:start="25:52" pos:end="25:52"><literal type="number" pos:start="25:52" pos:end="25:52">0</literal></expr>]</index></name> <operator pos:start="25:55" pos:end="25:55">+</operator> <name pos:start="25:57" pos:end="25:57">x</name></expr>]</index></name> <operator pos:start="25:60" pos:end="25:60">=</operator> <name pos:start="25:62" pos:end="25:62">x</name> <operator pos:start="25:64" pos:end="25:64">+</operator> <name pos:start="25:66" pos:end="25:66">y</name> <operator pos:start="25:68" pos:end="25:68">+</operator> <name pos:start="25:70" pos:end="25:70">i</name> <operator pos:start="25:72" pos:end="25:72">*</operator> <literal type="number" pos:start="25:74" pos:end="25:74">3</literal></expr>;</expr_stmt>

        </block_content>}</block></for>

    </block_content>}</block></for>

    

    <comment type="block" pos:start="33:5" pos:end="33:19">/* Cb and Cr */</comment>

    <for pos:start="35:5" pos:end="45:5">for<control pos:start="35:8" pos:end="35:30">(<init pos:start="35:9" pos:end="35:12"><expr pos:start="35:9" pos:end="35:11"><name pos:start="35:9" pos:end="35:9">y</name><operator pos:start="35:10" pos:end="35:10">=</operator><literal type="number" pos:start="35:11" pos:end="35:11">0</literal></expr>;</init><condition pos:start="35:13" pos:end="35:26"><expr pos:start="35:13" pos:end="35:25"><name pos:start="35:13" pos:end="35:13">y</name><operator pos:start="35:14" pos:end="35:14">&lt;</operator><name pos:start="35:15" pos:end="35:23"><name pos:start="35:15" pos:end="35:15">c</name><operator pos:start="35:16" pos:end="35:17">-&gt;</operator><name pos:start="35:18" pos:end="35:23">height</name></name><operator pos:start="35:24" pos:end="35:24">/</operator><literal type="number" pos:start="35:25" pos:end="35:25">2</literal></expr>;</condition><incr pos:start="35:27" pos:end="35:29"><expr pos:start="35:27" pos:end="35:29"><name pos:start="35:27" pos:end="35:27">y</name><operator pos:start="35:28" pos:end="35:29">++</operator></expr></incr>)</control> <block pos:start="35:32" pos:end="45:5">{<block_content pos:start="37:9" pos:end="43:9">

        <for pos:start="37:9" pos:end="43:9">for<control pos:start="37:12" pos:end="37:33">(<init pos:start="37:13" pos:end="37:16"><expr pos:start="37:13" pos:end="37:15"><name pos:start="37:13" pos:end="37:13">x</name><operator pos:start="37:14" pos:end="37:14">=</operator><literal type="number" pos:start="37:15" pos:end="37:15">0</literal></expr>;</init><condition pos:start="37:17" pos:end="37:29"><expr pos:start="37:17" pos:end="37:28"><name pos:start="37:17" pos:end="37:17">x</name><operator pos:start="37:18" pos:end="37:18">&lt;</operator><name pos:start="37:19" pos:end="37:26"><name pos:start="37:19" pos:end="37:19">c</name><operator pos:start="37:20" pos:end="37:21">-&gt;</operator><name pos:start="37:22" pos:end="37:26">width</name></name><operator pos:start="37:27" pos:end="37:27">/</operator><literal type="number" pos:start="37:28" pos:end="37:28">2</literal></expr>;</condition><incr pos:start="37:30" pos:end="37:32"><expr pos:start="37:30" pos:end="37:32"><name pos:start="37:30" pos:end="37:30">x</name><operator pos:start="37:31" pos:end="37:32">++</operator></expr></incr>)</control> <block pos:start="37:35" pos:end="43:9">{<block_content pos:start="39:13" pos:end="41:76">

            <expr_stmt pos:start="39:13" pos:end="39:77"><expr pos:start="39:13" pos:end="39:76"><name pos:start="39:13" pos:end="39:58"><name pos:start="39:13" pos:end="39:19">picture</name><operator pos:start="39:20" pos:end="39:21">-&gt;</operator><name pos:start="39:22" pos:end="39:25">data</name><index pos:start="39:26" pos:end="39:28">[<expr pos:start="39:27" pos:end="39:27"><literal type="number" pos:start="39:27" pos:end="39:27">1</literal></expr>]</index><index pos:start="39:29" pos:end="39:58">[<expr pos:start="39:30" pos:end="39:57"><name pos:start="39:30" pos:end="39:30">y</name> <operator pos:start="39:32" pos:end="39:32">*</operator> <name pos:start="39:34" pos:end="39:53"><name pos:start="39:34" pos:end="39:40">picture</name><operator pos:start="39:41" pos:end="39:42">-&gt;</operator><name pos:start="39:43" pos:end="39:50">linesize</name><index pos:start="39:51" pos:end="39:53">[<expr pos:start="39:52" pos:end="39:52"><literal type="number" pos:start="39:52" pos:end="39:52">1</literal></expr>]</index></name> <operator pos:start="39:55" pos:end="39:55">+</operator> <name pos:start="39:57" pos:end="39:57">x</name></expr>]</index></name> <operator pos:start="39:60" pos:end="39:60">=</operator> <literal type="number" pos:start="39:62" pos:end="39:66">128</literal> <operator pos:start="39:66" pos:end="39:66">+</operator> <name pos:start="39:68" pos:end="39:68">y</name> <operator pos:start="39:70" pos:end="39:70">+</operator> <name pos:start="39:72" pos:end="39:72">i</name> <operator pos:start="39:74" pos:end="39:74">*</operator> <literal type="number" pos:start="39:76" pos:end="39:76">2</literal></expr>;</expr_stmt>

            <expr_stmt pos:start="41:13" pos:end="41:76"><expr pos:start="41:13" pos:end="41:75"><name pos:start="41:13" pos:end="41:58"><name pos:start="41:13" pos:end="41:19">picture</name><operator pos:start="41:20" pos:end="41:21">-&gt;</operator><name pos:start="41:22" pos:end="41:25">data</name><index pos:start="41:26" pos:end="41:28">[<expr pos:start="41:27" pos:end="41:27"><literal type="number" pos:start="41:27" pos:end="41:27">2</literal></expr>]</index><index pos:start="41:29" pos:end="41:58">[<expr pos:start="41:30" pos:end="41:57"><name pos:start="41:30" pos:end="41:30">y</name> <operator pos:start="41:32" pos:end="41:32">*</operator> <name pos:start="41:34" pos:end="41:53"><name pos:start="41:34" pos:end="41:40">picture</name><operator pos:start="41:41" pos:end="41:42">-&gt;</operator><name pos:start="41:43" pos:end="41:50">linesize</name><index pos:start="41:51" pos:end="41:53">[<expr pos:start="41:52" pos:end="41:52"><literal type="number" pos:start="41:52" pos:end="41:52">2</literal></expr>]</index></name> <operator pos:start="41:55" pos:end="41:55">+</operator> <name pos:start="41:57" pos:end="41:57">x</name></expr>]</index></name> <operator pos:start="41:60" pos:end="41:60">=</operator> <literal type="number" pos:start="41:62" pos:end="41:65">64</literal> <operator pos:start="41:65" pos:end="41:65">+</operator> <name pos:start="41:67" pos:end="41:67">x</name> <operator pos:start="41:69" pos:end="41:69">+</operator> <name pos:start="41:71" pos:end="41:71">i</name> <operator pos:start="41:73" pos:end="41:73">*</operator> <literal type="number" pos:start="41:75" pos:end="41:75">5</literal></expr>;</expr_stmt>

        </block_content>}</block></for>

    </block_content>}</block></for>



    <comment type="block" pos:start="49:5" pos:end="49:26">/* encode the image */</comment>

    <expr_stmt pos:start="51:5" pos:end="51:81"><expr pos:start="51:5" pos:end="51:80"><name pos:start="51:5" pos:end="51:12">out_size</name> <operator pos:start="51:14" pos:end="51:14">=</operator> <call pos:start="51:16" pos:end="51:80"><name pos:start="51:16" pos:end="51:35">avcodec_encode_video</name><argument_list pos:start="51:36" pos:end="51:80">(<argument pos:start="51:37" pos:end="51:37"><expr pos:start="51:37" pos:end="51:37"><name pos:start="51:37" pos:end="51:37">c</name></expr></argument>, <argument pos:start="51:40" pos:end="51:51"><expr pos:start="51:40" pos:end="51:51"><name pos:start="51:40" pos:end="51:51">video_outbuf</name></expr></argument>, <argument pos:start="51:54" pos:end="51:70"><expr pos:start="51:54" pos:end="51:70"><name pos:start="51:54" pos:end="51:70">video_outbuf_size</name></expr></argument>, <argument pos:start="51:73" pos:end="51:79"><expr pos:start="51:73" pos:end="51:79"><name pos:start="51:73" pos:end="51:79">picture</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>



    <comment type="block" pos:start="55:5" pos:end="55:54">/* write the compressed frame in the media file */</comment>

    <if_stmt pos:start="57:5" pos:end="63:5"><if pos:start="57:5" pos:end="63:5">if <condition pos:start="57:8" pos:end="57:67">(<expr pos:start="57:9" pos:end="57:66"><call pos:start="57:9" pos:end="57:61"><name pos:start="57:9" pos:end="57:22">av_write_frame</name><argument_list pos:start="57:23" pos:end="57:61">(<argument pos:start="57:24" pos:end="57:25"><expr pos:start="57:24" pos:end="57:25"><name pos:start="57:24" pos:end="57:25">oc</name></expr></argument>, <argument pos:start="57:28" pos:end="57:36"><expr pos:start="57:28" pos:end="57:36"><name pos:start="57:28" pos:end="57:36"><name pos:start="57:28" pos:end="57:29">st</name><operator pos:start="57:30" pos:end="57:31">-&gt;</operator><name pos:start="57:32" pos:end="57:36">index</name></name></expr></argument>, <argument pos:start="57:39" pos:end="57:50"><expr pos:start="57:39" pos:end="57:50"><name pos:start="57:39" pos:end="57:50">video_outbuf</name></expr></argument>, <argument pos:start="57:53" pos:end="57:60"><expr pos:start="57:53" pos:end="57:60"><name pos:start="57:53" pos:end="57:60">out_size</name></expr></argument>)</argument_list></call> <operator pos:start="57:63" pos:end="57:64">!=</operator> <literal type="number" pos:start="57:66" pos:end="57:66">0</literal></expr>)</condition> <block pos:start="57:69" pos:end="63:5">{<block_content pos:start="59:9" pos:end="61:16">

        <expr_stmt pos:start="59:9" pos:end="59:61"><expr pos:start="59:9" pos:end="59:60"><call pos:start="59:9" pos:end="59:60"><name pos:start="59:9" pos:end="59:15">fprintf</name><argument_list pos:start="59:16" pos:end="59:60">(<argument pos:start="59:17" pos:end="59:22"><expr pos:start="59:17" pos:end="59:22"><name pos:start="59:17" pos:end="59:22">stderr</name></expr></argument>, <argument pos:start="59:25" pos:end="59:59"><expr pos:start="59:25" pos:end="59:59"><literal type="string" pos:start="59:25" pos:end="59:59">"Error while writing video frame\n"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <expr_stmt pos:start="61:9" pos:end="61:16"><expr pos:start="61:9" pos:end="61:15"><call pos:start="61:9" pos:end="61:15"><name pos:start="61:9" pos:end="61:12">exit</name><argument_list pos:start="61:13" pos:end="61:15">(<argument pos:start="61:14" pos:end="61:14"><expr pos:start="61:14" pos:end="61:14"><literal type="number" pos:start="61:14" pos:end="61:14">1</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    </block_content>}</block></if></if_stmt>

</block_content>}</block></function>
</unit>
