<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<unit xmlns="http://www.srcML.org/srcML/src" xmlns:pos="http://www.srcML.org/srcML/position" revision="1.0.0" language="C" filename="dataset/ropgen/aug/1/22604.c" pos:tabs="8"><function pos:start="1:1" pos:end="231:1"><type pos:start="1:1" pos:end="1:11"><specifier pos:start="1:1" pos:end="1:6">static</specifier> <name pos:start="1:8" pos:end="1:11">void</name></type> <name pos:start="1:13" pos:end="1:20">pci_msix</name><parameter_list pos:start="1:21" pos:end="1:26">(<parameter pos:start="1:22" pos:end="1:25"><decl pos:start="1:22" pos:end="1:25"><type pos:start="1:22" pos:end="1:25"><name pos:start="1:22" pos:end="1:25">void</name></type></decl></parameter>)</parameter_list>

<block pos:start="3:1" pos:end="231:1">{<block_content pos:start="5:5" pos:end="229:15">

    <decl_stmt pos:start="5:5" pos:end="5:26"><decl pos:start="5:5" pos:end="5:25"><type pos:start="5:5" pos:end="5:22"><name pos:start="5:5" pos:end="5:20">QVirtioPCIDevice</name> <modifier pos:start="5:22" pos:end="5:22">*</modifier></type><name pos:start="5:23" pos:end="5:25">dev</name></decl>;</decl_stmt>

    <decl_stmt pos:start="7:5" pos:end="7:17"><decl pos:start="7:5" pos:end="7:16"><type pos:start="7:5" pos:end="7:13"><name pos:start="7:5" pos:end="7:11">QPCIBus</name> <modifier pos:start="7:13" pos:end="7:13">*</modifier></type><name pos:start="7:14" pos:end="7:16">bus</name></decl>;</decl_stmt>

    <decl_stmt pos:start="9:5" pos:end="9:25"><decl pos:start="9:5" pos:end="9:24"><type pos:start="9:5" pos:end="9:19"><name pos:start="9:5" pos:end="9:17">QVirtQueuePCI</name> <modifier pos:start="9:19" pos:end="9:19">*</modifier></type><name pos:start="9:20" pos:end="9:24">vqpci</name></decl>;</decl_stmt>

    <decl_stmt pos:start="11:5" pos:end="11:27"><decl pos:start="11:5" pos:end="11:26"><type pos:start="11:5" pos:end="11:21"><name pos:start="11:5" pos:end="11:19">QGuestAllocator</name> <modifier pos:start="11:21" pos:end="11:21">*</modifier></type><name pos:start="11:22" pos:end="11:26">alloc</name></decl>;</decl_stmt>

    <decl_stmt pos:start="13:5" pos:end="13:22"><decl pos:start="13:5" pos:end="13:21"><type pos:start="13:5" pos:end="13:17"><name pos:start="13:5" pos:end="13:17">QVirtioBlkReq</name></type> <name pos:start="13:19" pos:end="13:21">req</name></decl>;</decl_stmt>

    <decl_stmt pos:start="15:5" pos:end="15:37"><decl pos:start="15:5" pos:end="15:36"><type pos:start="15:5" pos:end="15:7"><name pos:start="15:5" pos:end="15:7">int</name></type> <name pos:start="15:9" pos:end="15:14">n_size</name> <init pos:start="15:16" pos:end="15:36">= <expr pos:start="15:18" pos:end="15:36"><name pos:start="15:18" pos:end="15:32">TEST_IMAGE_SIZE</name> <operator pos:start="15:34" pos:end="15:34">/</operator> <literal type="number" pos:start="15:36" pos:end="15:36">2</literal></expr></init></decl>;</decl_stmt>

    <decl_stmt pos:start="17:5" pos:end="17:15"><decl pos:start="17:5" pos:end="17:14"><type pos:start="17:5" pos:end="17:10"><name pos:start="17:5" pos:end="17:8">void</name> <modifier pos:start="17:10" pos:end="17:10">*</modifier></type><name pos:start="17:11" pos:end="17:14">addr</name></decl>;</decl_stmt>

    <decl_stmt pos:start="19:5" pos:end="19:22"><decl pos:start="19:5" pos:end="19:21"><type pos:start="19:5" pos:end="19:12"><name pos:start="19:5" pos:end="19:12">uint64_t</name></type> <name pos:start="19:14" pos:end="19:21">req_addr</name></decl>;</decl_stmt>

    <decl_stmt pos:start="21:5" pos:end="21:22"><decl pos:start="21:5" pos:end="21:21"><type pos:start="21:5" pos:end="21:12"><name pos:start="21:5" pos:end="21:12">uint64_t</name></type> <name pos:start="21:14" pos:end="21:21">capacity</name></decl>;</decl_stmt>

    <decl_stmt pos:start="23:5" pos:end="23:22"><decl pos:start="23:5" pos:end="23:21"><type pos:start="23:5" pos:end="23:12"><name pos:start="23:5" pos:end="23:12">uint32_t</name></type> <name pos:start="23:14" pos:end="23:21">features</name></decl>;</decl_stmt>

    <decl_stmt pos:start="25:5" pos:end="25:23"><decl pos:start="25:5" pos:end="25:22"><type pos:start="25:5" pos:end="25:12"><name pos:start="25:5" pos:end="25:12">uint32_t</name></type> <name pos:start="25:14" pos:end="25:22">free_head</name></decl>;</decl_stmt>

    <decl_stmt pos:start="27:5" pos:end="27:19"><decl pos:start="27:5" pos:end="27:18"><type pos:start="27:5" pos:end="27:11"><name pos:start="27:5" pos:end="27:11">uint8_t</name></type> <name pos:start="27:13" pos:end="27:18">status</name></decl>;</decl_stmt>

    <decl_stmt pos:start="29:5" pos:end="29:15"><decl pos:start="29:5" pos:end="29:14"><type pos:start="29:5" pos:end="29:10"><name pos:start="29:5" pos:end="29:8">char</name> <modifier pos:start="29:10" pos:end="29:10">*</modifier></type><name pos:start="29:11" pos:end="29:14">data</name></decl>;</decl_stmt>



    <expr_stmt pos:start="33:5" pos:end="33:27"><expr pos:start="33:5" pos:end="33:26"><name pos:start="33:5" pos:end="33:7">bus</name> <operator pos:start="33:9" pos:end="33:9">=</operator> <call pos:start="33:11" pos:end="33:26"><name pos:start="33:11" pos:end="33:24">pci_test_start</name><argument_list pos:start="33:25" pos:end="33:26">()</argument_list></call></expr>;</expr_stmt>

    <expr_stmt pos:start="35:5" pos:end="35:28"><expr pos:start="35:5" pos:end="35:27"><name pos:start="35:5" pos:end="35:9">alloc</name> <operator pos:start="35:11" pos:end="35:11">=</operator> <call pos:start="35:13" pos:end="35:27"><name pos:start="35:13" pos:end="35:25">pc_alloc_init</name><argument_list pos:start="35:26" pos:end="35:27">()</argument_list></call></expr>;</expr_stmt>



    <expr_stmt pos:start="39:5" pos:end="39:45"><expr pos:start="39:5" pos:end="39:44"><name pos:start="39:5" pos:end="39:7">dev</name> <operator pos:start="39:9" pos:end="39:9">=</operator> <call pos:start="39:11" pos:end="39:44"><name pos:start="39:11" pos:end="39:29">virtio_blk_pci_init</name><argument_list pos:start="39:30" pos:end="39:44">(<argument pos:start="39:31" pos:end="39:33"><expr pos:start="39:31" pos:end="39:33"><name pos:start="39:31" pos:end="39:33">bus</name></expr></argument>, <argument pos:start="39:36" pos:end="39:43"><expr pos:start="39:36" pos:end="39:43"><name pos:start="39:36" pos:end="39:43">PCI_SLOT</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    <expr_stmt pos:start="41:5" pos:end="41:32"><expr pos:start="41:5" pos:end="41:31"><call pos:start="41:5" pos:end="41:31"><name pos:start="41:5" pos:end="41:20">qpci_msix_enable</name><argument_list pos:start="41:21" pos:end="41:31">(<argument pos:start="41:22" pos:end="41:30"><expr pos:start="41:22" pos:end="41:30"><name pos:start="41:22" pos:end="41:30"><name pos:start="41:22" pos:end="41:24">dev</name><operator pos:start="41:25" pos:end="41:26">-&gt;</operator><name pos:start="41:27" pos:end="41:30">pdev</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>



    <expr_stmt pos:start="45:5" pos:end="45:61"><expr pos:start="45:5" pos:end="45:60"><call pos:start="45:5" pos:end="45:60"><name pos:start="45:5" pos:end="45:45">qvirtio_pci_set_msix_configuration_vector</name><argument_list pos:start="45:46" pos:end="45:60">(<argument pos:start="45:47" pos:end="45:49"><expr pos:start="45:47" pos:end="45:49"><name pos:start="45:47" pos:end="45:49">dev</name></expr></argument>, <argument pos:start="45:52" pos:end="45:56"><expr pos:start="45:52" pos:end="45:56"><name pos:start="45:52" pos:end="45:56">alloc</name></expr></argument>, <argument pos:start="45:59" pos:end="45:59"><expr pos:start="45:59" pos:end="45:59"><literal type="number" pos:start="45:59" pos:end="45:59">0</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>



    <comment type="block" pos:start="49:5" pos:end="49:26">/* MSI-X is enabled */</comment>

    <expr_stmt pos:start="51:5" pos:end="51:51"><expr pos:start="51:5" pos:end="51:50"><name pos:start="51:5" pos:end="51:8">addr</name> <operator pos:start="51:10" pos:end="51:10">=</operator> <name pos:start="51:12" pos:end="51:20"><name pos:start="51:12" pos:end="51:14">dev</name><operator pos:start="51:15" pos:end="51:16">-&gt;</operator><name pos:start="51:17" pos:end="51:20">addr</name></name> <operator pos:start="51:22" pos:end="51:22">+</operator> <call pos:start="51:24" pos:end="51:50"><name pos:start="51:24" pos:end="51:44">VIRTIO_PCI_CONFIG_OFF</name><argument_list pos:start="51:45" pos:end="51:50">(<argument pos:start="51:46" pos:end="51:49"><expr pos:start="51:46" pos:end="51:49"><name pos:start="51:46" pos:end="51:49">true</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>



    <expr_stmt pos:start="55:5" pos:end="57:79"><expr pos:start="55:5" pos:end="57:78"><name pos:start="55:5" pos:end="55:12">capacity</name> <operator pos:start="55:14" pos:end="55:14">=</operator> <call pos:start="55:16" pos:end="57:78"><name pos:start="55:16" pos:end="55:35">qvirtio_config_readq</name><argument_list pos:start="55:36" pos:end="57:78">(<argument pos:start="55:37" pos:end="55:48"><expr pos:start="55:37" pos:end="55:48"><operator pos:start="55:37" pos:end="55:37">&amp;</operator><name pos:start="55:38" pos:end="55:48">qvirtio_pci</name></expr></argument>, <argument pos:start="55:51" pos:end="55:60"><expr pos:start="55:51" pos:end="55:60"><operator pos:start="55:51" pos:end="55:51">&amp;</operator><name pos:start="55:52" pos:end="55:60"><name pos:start="55:52" pos:end="55:54">dev</name><operator pos:start="55:55" pos:end="55:56">-&gt;</operator><name pos:start="55:57" pos:end="55:60">vdev</name></name></expr></argument>,

                                                    <argument pos:start="57:53" pos:end="57:77"><expr pos:start="57:53" pos:end="57:77"><operator pos:start="57:53" pos:end="57:53">(</operator><name pos:start="57:54" pos:end="57:61">uint64_t</name><operator pos:start="57:62" pos:end="57:62">)</operator><operator pos:start="57:63" pos:end="57:63">(</operator><name pos:start="57:64" pos:end="57:72">uintptr_t</name><operator pos:start="57:73" pos:end="57:73">)</operator><name pos:start="57:74" pos:end="57:77">addr</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    <expr_stmt pos:start="59:5" pos:end="59:57"><expr pos:start="59:5" pos:end="59:56"><call pos:start="59:5" pos:end="59:56"><name pos:start="59:5" pos:end="59:19">g_assert_cmpint</name><argument_list pos:start="59:20" pos:end="59:56">(<argument pos:start="59:21" pos:end="59:28"><expr pos:start="59:21" pos:end="59:28"><name pos:start="59:21" pos:end="59:28">capacity</name></expr></argument>, <argument pos:start="59:31" pos:end="59:32"><expr pos:start="59:31" pos:end="59:32"><operator pos:start="59:31" pos:end="59:32">==</operator></expr></argument>, <argument pos:start="59:35" pos:end="59:55"><expr pos:start="59:35" pos:end="59:55"><name pos:start="59:35" pos:end="59:49">TEST_IMAGE_SIZE</name> <operator pos:start="59:51" pos:end="59:51">/</operator> <literal type="number" pos:start="59:53" pos:end="59:55">512</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>



    <expr_stmt pos:start="63:5" pos:end="63:62"><expr pos:start="63:5" pos:end="63:61"><name pos:start="63:5" pos:end="63:12">features</name> <operator pos:start="63:14" pos:end="63:14">=</operator> <call pos:start="63:16" pos:end="63:61"><name pos:start="63:16" pos:end="63:35">qvirtio_get_features</name><argument_list pos:start="63:36" pos:end="63:61">(<argument pos:start="63:37" pos:end="63:48"><expr pos:start="63:37" pos:end="63:48"><operator pos:start="63:37" pos:end="63:37">&amp;</operator><name pos:start="63:38" pos:end="63:48">qvirtio_pci</name></expr></argument>, <argument pos:start="63:51" pos:end="63:60"><expr pos:start="63:51" pos:end="63:60"><operator pos:start="63:51" pos:end="63:51">&amp;</operator><name pos:start="63:52" pos:end="63:60"><name pos:start="63:52" pos:end="63:54">dev</name><operator pos:start="63:55" pos:end="63:56">-&gt;</operator><name pos:start="63:57" pos:end="63:60">vdev</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    <expr_stmt pos:start="65:5" pos:end="71:55"><expr pos:start="65:5" pos:end="71:54"><name pos:start="65:5" pos:end="65:12">features</name> <operator pos:start="65:14" pos:end="65:14">=</operator> <name pos:start="65:16" pos:end="65:23">features</name> <operator pos:start="65:25" pos:end="65:25">&amp;</operator> <operator pos:start="65:27" pos:end="65:27">~</operator><operator pos:start="65:28" pos:end="65:28">(</operator><name pos:start="65:29" pos:end="65:49">QVIRTIO_F_BAD_FEATURE</name> <operator pos:start="65:51" pos:end="65:51">|</operator>

                            <operator pos:start="67:29" pos:end="67:29">(</operator><literal type="number" pos:start="67:30" pos:end="67:31">1u</literal> <operator pos:start="67:33" pos:end="67:34">&lt;&lt;</operator> <name pos:start="67:36" pos:end="67:62">VIRTIO_RING_F_INDIRECT_DESC</name><operator pos:start="67:63" pos:end="67:63">)</operator> <operator pos:start="67:65" pos:end="67:65">|</operator>

                            <operator pos:start="69:29" pos:end="69:29">(</operator><literal type="number" pos:start="69:30" pos:end="69:31">1u</literal> <operator pos:start="69:33" pos:end="69:34">&lt;&lt;</operator> <name pos:start="69:36" pos:end="69:58">VIRTIO_RING_F_EVENT_IDX</name><operator pos:start="69:59" pos:end="69:59">)</operator> <operator pos:start="69:61" pos:end="69:61">|</operator>

                            <operator pos:start="71:29" pos:end="71:29">(</operator><literal type="number" pos:start="71:30" pos:end="71:31">1u</literal> <operator pos:start="71:33" pos:end="71:34">&lt;&lt;</operator> <name pos:start="71:36" pos:end="71:52">VIRTIO_BLK_F_SCSI</name><operator pos:start="71:53" pos:end="71:53">)</operator><operator pos:start="71:54" pos:end="71:54">)</operator></expr>;</expr_stmt>

    <expr_stmt pos:start="73:5" pos:end="73:61"><expr pos:start="73:5" pos:end="73:60"><call pos:start="73:5" pos:end="73:60"><name pos:start="73:5" pos:end="73:24">qvirtio_set_features</name><argument_list pos:start="73:25" pos:end="73:60">(<argument pos:start="73:26" pos:end="73:37"><expr pos:start="73:26" pos:end="73:37"><operator pos:start="73:26" pos:end="73:26">&amp;</operator><name pos:start="73:27" pos:end="73:37">qvirtio_pci</name></expr></argument>, <argument pos:start="73:40" pos:end="73:49"><expr pos:start="73:40" pos:end="73:49"><operator pos:start="73:40" pos:end="73:40">&amp;</operator><name pos:start="73:41" pos:end="73:49"><name pos:start="73:41" pos:end="73:43">dev</name><operator pos:start="73:44" pos:end="73:45">-&gt;</operator><name pos:start="73:46" pos:end="73:49">vdev</name></name></expr></argument>, <argument pos:start="73:52" pos:end="73:59"><expr pos:start="73:52" pos:end="73:59"><name pos:start="73:52" pos:end="73:59">features</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>



    <expr_stmt pos:start="77:5" pos:end="79:78"><expr pos:start="77:5" pos:end="79:77"><name pos:start="77:5" pos:end="77:9">vqpci</name> <operator pos:start="77:11" pos:end="77:11">=</operator> <operator pos:start="77:13" pos:end="77:13">(</operator><name pos:start="77:14" pos:end="77:26">QVirtQueuePCI</name> <operator pos:start="77:28" pos:end="77:28">*</operator><operator pos:start="77:29" pos:end="77:29">)</operator><call pos:start="77:30" pos:end="79:77"><name pos:start="77:30" pos:end="77:45">qvirtqueue_setup</name><argument_list pos:start="77:46" pos:end="79:77">(<argument pos:start="77:47" pos:end="77:58"><expr pos:start="77:47" pos:end="77:58"><operator pos:start="77:47" pos:end="77:47">&amp;</operator><name pos:start="77:48" pos:end="77:58">qvirtio_pci</name></expr></argument>, <argument pos:start="77:61" pos:end="77:70"><expr pos:start="77:61" pos:end="77:70"><operator pos:start="77:61" pos:end="77:61">&amp;</operator><name pos:start="77:62" pos:end="77:70"><name pos:start="77:62" pos:end="77:64">dev</name><operator pos:start="77:65" pos:end="77:66">-&gt;</operator><name pos:start="77:67" pos:end="77:70">vdev</name></name></expr></argument>,

                                                                    <argument pos:start="79:69" pos:end="79:73"><expr pos:start="79:69" pos:end="79:73"><name pos:start="79:69" pos:end="79:73">alloc</name></expr></argument>, <argument pos:start="79:76" pos:end="79:76"><expr pos:start="79:76" pos:end="79:76"><literal type="number" pos:start="79:76" pos:end="79:76">0</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    <expr_stmt pos:start="81:5" pos:end="81:52"><expr pos:start="81:5" pos:end="81:51"><call pos:start="81:5" pos:end="81:51"><name pos:start="81:5" pos:end="81:29">qvirtqueue_pci_msix_setup</name><argument_list pos:start="81:30" pos:end="81:51">(<argument pos:start="81:31" pos:end="81:33"><expr pos:start="81:31" pos:end="81:33"><name pos:start="81:31" pos:end="81:33">dev</name></expr></argument>, <argument pos:start="81:36" pos:end="81:40"><expr pos:start="81:36" pos:end="81:40"><name pos:start="81:36" pos:end="81:40">vqpci</name></expr></argument>, <argument pos:start="81:43" pos:end="81:47"><expr pos:start="81:43" pos:end="81:47"><name pos:start="81:43" pos:end="81:47">alloc</name></expr></argument>, <argument pos:start="81:50" pos:end="81:50"><expr pos:start="81:50" pos:end="81:50"><literal type="number" pos:start="81:50" pos:end="81:50">1</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>



    <expr_stmt pos:start="85:5" pos:end="85:52"><expr pos:start="85:5" pos:end="85:51"><call pos:start="85:5" pos:end="85:51"><name pos:start="85:5" pos:end="85:25">qvirtio_set_driver_ok</name><argument_list pos:start="85:26" pos:end="85:51">(<argument pos:start="85:27" pos:end="85:38"><expr pos:start="85:27" pos:end="85:38"><operator pos:start="85:27" pos:end="85:27">&amp;</operator><name pos:start="85:28" pos:end="85:38">qvirtio_pci</name></expr></argument>, <argument pos:start="85:41" pos:end="85:50"><expr pos:start="85:41" pos:end="85:50"><operator pos:start="85:41" pos:end="85:41">&amp;</operator><name pos:start="85:42" pos:end="85:50"><name pos:start="85:42" pos:end="85:44">dev</name><operator pos:start="85:45" pos:end="85:46">-&gt;</operator><name pos:start="85:47" pos:end="85:50">vdev</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>



    <expr_stmt pos:start="89:5" pos:end="91:79"><expr pos:start="89:5" pos:end="91:78"><call pos:start="89:5" pos:end="91:78"><name pos:start="89:5" pos:end="89:7">qmp</name><argument_list pos:start="89:8" pos:end="91:78">(<argument pos:start="89:9" pos:end="91:69"><expr pos:start="89:9" pos:end="91:69"><literal type="string" pos:start="89:9" pos:end="89:74">"{ 'execute': 'block_resize', 'arguments': { 'device': 'drive0', "</literal>

                                                    <literal type="string" pos:start="91:53" pos:end="91:69">" 'size': %d } }"</literal></expr></argument>, <argument pos:start="91:72" pos:end="91:77"><expr pos:start="91:72" pos:end="91:77"><name pos:start="91:72" pos:end="91:77">n_size</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>



    <expr_stmt pos:start="95:5" pos:end="95:78"><expr pos:start="95:5" pos:end="95:77"><call pos:start="95:5" pos:end="95:77"><name pos:start="95:5" pos:end="95:27">qvirtio_wait_config_isr</name><argument_list pos:start="95:28" pos:end="95:77">(<argument pos:start="95:29" pos:end="95:40"><expr pos:start="95:29" pos:end="95:40"><operator pos:start="95:29" pos:end="95:29">&amp;</operator><name pos:start="95:30" pos:end="95:40">qvirtio_pci</name></expr></argument>, <argument pos:start="95:43" pos:end="95:52"><expr pos:start="95:43" pos:end="95:52"><operator pos:start="95:43" pos:end="95:43">&amp;</operator><name pos:start="95:44" pos:end="95:52"><name pos:start="95:44" pos:end="95:46">dev</name><operator pos:start="95:47" pos:end="95:48">-&gt;</operator><name pos:start="95:49" pos:end="95:52">vdev</name></name></expr></argument>, <argument pos:start="95:55" pos:end="95:76"><expr pos:start="95:55" pos:end="95:76"><name pos:start="95:55" pos:end="95:76">QVIRTIO_BLK_TIMEOUT_US</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>



    <expr_stmt pos:start="99:5" pos:end="101:79"><expr pos:start="99:5" pos:end="101:78"><name pos:start="99:5" pos:end="99:12">capacity</name> <operator pos:start="99:14" pos:end="99:14">=</operator> <call pos:start="99:16" pos:end="101:78"><name pos:start="99:16" pos:end="99:35">qvirtio_config_readq</name><argument_list pos:start="99:36" pos:end="101:78">(<argument pos:start="99:37" pos:end="99:48"><expr pos:start="99:37" pos:end="99:48"><operator pos:start="99:37" pos:end="99:37">&amp;</operator><name pos:start="99:38" pos:end="99:48">qvirtio_pci</name></expr></argument>, <argument pos:start="99:51" pos:end="99:60"><expr pos:start="99:51" pos:end="99:60"><operator pos:start="99:51" pos:end="99:51">&amp;</operator><name pos:start="99:52" pos:end="99:60"><name pos:start="99:52" pos:end="99:54">dev</name><operator pos:start="99:55" pos:end="99:56">-&gt;</operator><name pos:start="99:57" pos:end="99:60">vdev</name></name></expr></argument>,

                                                    <argument pos:start="101:53" pos:end="101:77"><expr pos:start="101:53" pos:end="101:77"><operator pos:start="101:53" pos:end="101:53">(</operator><name pos:start="101:54" pos:end="101:61">uint64_t</name><operator pos:start="101:62" pos:end="101:62">)</operator><operator pos:start="101:63" pos:end="101:63">(</operator><name pos:start="101:64" pos:end="101:72">uintptr_t</name><operator pos:start="101:73" pos:end="101:73">)</operator><name pos:start="101:74" pos:end="101:77">addr</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    <expr_stmt pos:start="103:5" pos:end="103:48"><expr pos:start="103:5" pos:end="103:47"><call pos:start="103:5" pos:end="103:47"><name pos:start="103:5" pos:end="103:19">g_assert_cmpint</name><argument_list pos:start="103:20" pos:end="103:47">(<argument pos:start="103:21" pos:end="103:28"><expr pos:start="103:21" pos:end="103:28"><name pos:start="103:21" pos:end="103:28">capacity</name></expr></argument>, <argument pos:start="103:31" pos:end="103:32"><expr pos:start="103:31" pos:end="103:32"><operator pos:start="103:31" pos:end="103:32">==</operator></expr></argument>, <argument pos:start="103:35" pos:end="103:46"><expr pos:start="103:35" pos:end="103:46"><name pos:start="103:35" pos:end="103:40">n_size</name> <operator pos:start="103:42" pos:end="103:42">/</operator> <literal type="number" pos:start="103:44" pos:end="103:46">512</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>



    <comment type="block" pos:start="107:5" pos:end="107:23">/* Write request */</comment>

    <expr_stmt pos:start="109:5" pos:end="109:32"><expr pos:start="109:5" pos:end="109:31"><name pos:start="109:5" pos:end="109:12"><name pos:start="109:5" pos:end="109:7">req</name><operator pos:start="109:8" pos:end="109:8">.</operator><name pos:start="109:9" pos:end="109:12">type</name></name> <operator pos:start="109:14" pos:end="109:14">=</operator> <name pos:start="109:16" pos:end="109:31">VIRTIO_BLK_T_OUT</name></expr>;</expr_stmt>

    <expr_stmt pos:start="111:5" pos:end="111:19"><expr pos:start="111:5" pos:end="111:18"><name pos:start="111:5" pos:end="111:14"><name pos:start="111:5" pos:end="111:7">req</name><operator pos:start="111:8" pos:end="111:8">.</operator><name pos:start="111:9" pos:end="111:14">ioprio</name></name> <operator pos:start="111:16" pos:end="111:16">=</operator> <literal type="number" pos:start="111:18" pos:end="111:18">1</literal></expr>;</expr_stmt>

    <expr_stmt pos:start="113:5" pos:end="113:19"><expr pos:start="113:5" pos:end="113:18"><name pos:start="113:5" pos:end="113:14"><name pos:start="113:5" pos:end="113:7">req</name><operator pos:start="113:8" pos:end="113:8">.</operator><name pos:start="113:9" pos:end="113:14">sector</name></name> <operator pos:start="113:16" pos:end="113:16">=</operator> <literal type="number" pos:start="113:18" pos:end="113:18">0</literal></expr>;</expr_stmt>

    <expr_stmt pos:start="115:5" pos:end="115:30"><expr pos:start="115:5" pos:end="115:29"><name pos:start="115:5" pos:end="115:12"><name pos:start="115:5" pos:end="115:7">req</name><operator pos:start="115:8" pos:end="115:8">.</operator><name pos:start="115:9" pos:end="115:12">data</name></name> <operator pos:start="115:14" pos:end="115:14">=</operator> <call pos:start="115:16" pos:end="115:29"><name pos:start="115:16" pos:end="115:24">g_malloc0</name><argument_list pos:start="115:25" pos:end="115:29">(<argument pos:start="115:26" pos:end="115:28"><expr pos:start="115:26" pos:end="115:28"><literal type="number" pos:start="115:26" pos:end="115:28">512</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    <expr_stmt pos:start="117:5" pos:end="117:29"><expr pos:start="117:5" pos:end="117:28"><call pos:start="117:5" pos:end="117:28"><name pos:start="117:5" pos:end="117:10">strcpy</name><argument_list pos:start="117:11" pos:end="117:28">(<argument pos:start="117:12" pos:end="117:19"><expr pos:start="117:12" pos:end="117:19"><name pos:start="117:12" pos:end="117:19"><name pos:start="117:12" pos:end="117:14">req</name><operator pos:start="117:15" pos:end="117:15">.</operator><name pos:start="117:16" pos:end="117:19">data</name></name></expr></argument>, <argument pos:start="117:22" pos:end="117:27"><expr pos:start="117:22" pos:end="117:27"><literal type="string" pos:start="117:22" pos:end="117:27">"TEST"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>



    <expr_stmt pos:start="121:5" pos:end="121:52"><expr pos:start="121:5" pos:end="121:51"><name pos:start="121:5" pos:end="121:12">req_addr</name> <operator pos:start="121:14" pos:end="121:14">=</operator> <call pos:start="121:16" pos:end="121:51"><name pos:start="121:16" pos:end="121:33">virtio_blk_request</name><argument_list pos:start="121:34" pos:end="121:51">(<argument pos:start="121:35" pos:end="121:39"><expr pos:start="121:35" pos:end="121:39"><name pos:start="121:35" pos:end="121:39">alloc</name></expr></argument>, <argument pos:start="121:42" pos:end="121:45"><expr pos:start="121:42" pos:end="121:45"><operator pos:start="121:42" pos:end="121:42">&amp;</operator><name pos:start="121:43" pos:end="121:45">req</name></expr></argument>, <argument pos:start="121:48" pos:end="121:50"><expr pos:start="121:48" pos:end="121:50"><literal type="number" pos:start="121:48" pos:end="121:50">512</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>



    <expr_stmt pos:start="125:5" pos:end="125:21"><expr pos:start="125:5" pos:end="125:20"><call pos:start="125:5" pos:end="125:20"><name pos:start="125:5" pos:end="125:10">g_free</name><argument_list pos:start="125:11" pos:end="125:20">(<argument pos:start="125:12" pos:end="125:19"><expr pos:start="125:12" pos:end="125:19"><name pos:start="125:12" pos:end="125:19"><name pos:start="125:12" pos:end="125:14">req</name><operator pos:start="125:15" pos:end="125:15">.</operator><name pos:start="125:16" pos:end="125:19">data</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>



    <expr_stmt pos:start="129:5" pos:end="129:70"><expr pos:start="129:5" pos:end="129:69"><name pos:start="129:5" pos:end="129:13">free_head</name> <operator pos:start="129:15" pos:end="129:15">=</operator> <call pos:start="129:17" pos:end="129:69"><name pos:start="129:17" pos:end="129:30">qvirtqueue_add</name><argument_list pos:start="129:31" pos:end="129:69">(<argument pos:start="129:32" pos:end="129:41"><expr pos:start="129:32" pos:end="129:41"><operator pos:start="129:32" pos:end="129:32">&amp;</operator><name pos:start="129:33" pos:end="129:41"><name pos:start="129:33" pos:end="129:37">vqpci</name><operator pos:start="129:38" pos:end="129:39">-&gt;</operator><name pos:start="129:40" pos:end="129:41">vq</name></name></expr></argument>, <argument pos:start="129:44" pos:end="129:51"><expr pos:start="129:44" pos:end="129:51"><name pos:start="129:44" pos:end="129:51">req_addr</name></expr></argument>, <argument pos:start="129:54" pos:end="129:55"><expr pos:start="129:54" pos:end="129:55"><literal type="number" pos:start="129:54" pos:end="129:55">16</literal></expr></argument>, <argument pos:start="129:58" pos:end="129:62"><expr pos:start="129:58" pos:end="129:62"><name pos:start="129:58" pos:end="129:62">false</name></expr></argument>, <argument pos:start="129:65" pos:end="129:68"><expr pos:start="129:65" pos:end="129:68"><name pos:start="129:65" pos:end="129:68">true</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    <expr_stmt pos:start="131:5" pos:end="131:64"><expr pos:start="131:5" pos:end="131:63"><call pos:start="131:5" pos:end="131:63"><name pos:start="131:5" pos:end="131:18">qvirtqueue_add</name><argument_list pos:start="131:19" pos:end="131:63">(<argument pos:start="131:20" pos:end="131:29"><expr pos:start="131:20" pos:end="131:29"><operator pos:start="131:20" pos:end="131:20">&amp;</operator><name pos:start="131:21" pos:end="131:29"><name pos:start="131:21" pos:end="131:25">vqpci</name><operator pos:start="131:26" pos:end="131:27">-&gt;</operator><name pos:start="131:28" pos:end="131:29">vq</name></name></expr></argument>, <argument pos:start="131:32" pos:end="131:44"><expr pos:start="131:32" pos:end="131:44"><name pos:start="131:32" pos:end="131:39">req_addr</name> <operator pos:start="131:41" pos:end="131:41">+</operator> <literal type="number" pos:start="131:43" pos:end="131:44">16</literal></expr></argument>, <argument pos:start="131:47" pos:end="131:49"><expr pos:start="131:47" pos:end="131:49"><literal type="number" pos:start="131:47" pos:end="131:49">512</literal></expr></argument>, <argument pos:start="131:52" pos:end="131:56"><expr pos:start="131:52" pos:end="131:56"><name pos:start="131:52" pos:end="131:56">false</name></expr></argument>, <argument pos:start="131:59" pos:end="131:62"><expr pos:start="131:59" pos:end="131:62"><name pos:start="131:59" pos:end="131:62">true</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    <expr_stmt pos:start="133:5" pos:end="133:63"><expr pos:start="133:5" pos:end="133:62"><call pos:start="133:5" pos:end="133:62"><name pos:start="133:5" pos:end="133:18">qvirtqueue_add</name><argument_list pos:start="133:19" pos:end="133:62">(<argument pos:start="133:20" pos:end="133:29"><expr pos:start="133:20" pos:end="133:29"><operator pos:start="133:20" pos:end="133:20">&amp;</operator><name pos:start="133:21" pos:end="133:29"><name pos:start="133:21" pos:end="133:25">vqpci</name><operator pos:start="133:26" pos:end="133:27">-&gt;</operator><name pos:start="133:28" pos:end="133:29">vq</name></name></expr></argument>, <argument pos:start="133:32" pos:end="133:45"><expr pos:start="133:32" pos:end="133:45"><name pos:start="133:32" pos:end="133:39">req_addr</name> <operator pos:start="133:41" pos:end="133:41">+</operator> <literal type="number" pos:start="133:43" pos:end="133:45">528</literal></expr></argument>, <argument pos:start="133:48" pos:end="133:48"><expr pos:start="133:48" pos:end="133:48"><literal type="number" pos:start="133:48" pos:end="133:48">1</literal></expr></argument>, <argument pos:start="133:51" pos:end="133:54"><expr pos:start="133:51" pos:end="133:54"><name pos:start="133:51" pos:end="133:54">true</name></expr></argument>, <argument pos:start="133:57" pos:end="133:61"><expr pos:start="133:57" pos:end="133:61"><name pos:start="133:57" pos:end="133:61">false</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    <expr_stmt pos:start="135:5" pos:end="135:69"><expr pos:start="135:5" pos:end="135:68"><call pos:start="135:5" pos:end="135:68"><name pos:start="135:5" pos:end="135:19">qvirtqueue_kick</name><argument_list pos:start="135:20" pos:end="135:68">(<argument pos:start="135:21" pos:end="135:32"><expr pos:start="135:21" pos:end="135:32"><operator pos:start="135:21" pos:end="135:21">&amp;</operator><name pos:start="135:22" pos:end="135:32">qvirtio_pci</name></expr></argument>, <argument pos:start="135:35" pos:end="135:44"><expr pos:start="135:35" pos:end="135:44"><operator pos:start="135:35" pos:end="135:35">&amp;</operator><name pos:start="135:36" pos:end="135:44"><name pos:start="135:36" pos:end="135:38">dev</name><operator pos:start="135:39" pos:end="135:40">-&gt;</operator><name pos:start="135:41" pos:end="135:44">vdev</name></name></expr></argument>, <argument pos:start="135:47" pos:end="135:56"><expr pos:start="135:47" pos:end="135:56"><operator pos:start="135:47" pos:end="135:47">&amp;</operator><name pos:start="135:48" pos:end="135:56"><name pos:start="135:48" pos:end="135:52">vqpci</name><operator pos:start="135:53" pos:end="135:54">-&gt;</operator><name pos:start="135:55" pos:end="135:56">vq</name></name></expr></argument>, <argument pos:start="135:59" pos:end="135:67"><expr pos:start="135:59" pos:end="135:67"><name pos:start="135:59" pos:end="135:67">free_head</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>



    <expr_stmt pos:start="139:5" pos:end="141:51"><expr pos:start="139:5" pos:end="141:50"><call pos:start="139:5" pos:end="141:50"><name pos:start="139:5" pos:end="139:26">qvirtio_wait_queue_isr</name><argument_list pos:start="139:27" pos:end="141:50">(<argument pos:start="139:28" pos:end="139:39"><expr pos:start="139:28" pos:end="139:39"><operator pos:start="139:28" pos:end="139:28">&amp;</operator><name pos:start="139:29" pos:end="139:39">qvirtio_pci</name></expr></argument>, <argument pos:start="139:42" pos:end="139:51"><expr pos:start="139:42" pos:end="139:51"><operator pos:start="139:42" pos:end="139:42">&amp;</operator><name pos:start="139:43" pos:end="139:51"><name pos:start="139:43" pos:end="139:45">dev</name><operator pos:start="139:46" pos:end="139:47">-&gt;</operator><name pos:start="139:48" pos:end="139:51">vdev</name></name></expr></argument>, <argument pos:start="139:54" pos:end="139:63"><expr pos:start="139:54" pos:end="139:63"><operator pos:start="139:54" pos:end="139:54">&amp;</operator><name pos:start="139:55" pos:end="139:63"><name pos:start="139:55" pos:end="139:59">vqpci</name><operator pos:start="139:60" pos:end="139:61">-&gt;</operator><name pos:start="139:62" pos:end="139:63">vq</name></name></expr></argument>,

                           <argument pos:start="141:28" pos:end="141:49"><expr pos:start="141:28" pos:end="141:49"><name pos:start="141:28" pos:end="141:49">QVIRTIO_BLK_TIMEOUT_US</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>



    <expr_stmt pos:start="145:5" pos:end="145:35"><expr pos:start="145:5" pos:end="145:34"><name pos:start="145:5" pos:end="145:10">status</name> <operator pos:start="145:12" pos:end="145:12">=</operator> <call pos:start="145:14" pos:end="145:34"><name pos:start="145:14" pos:end="145:18">readb</name><argument_list pos:start="145:19" pos:end="145:34">(<argument pos:start="145:20" pos:end="145:33"><expr pos:start="145:20" pos:end="145:33"><name pos:start="145:20" pos:end="145:27">req_addr</name> <operator pos:start="145:29" pos:end="145:29">+</operator> <literal type="number" pos:start="145:31" pos:end="145:33">528</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    <expr_stmt pos:start="147:5" pos:end="147:35"><expr pos:start="147:5" pos:end="147:34"><call pos:start="147:5" pos:end="147:34"><name pos:start="147:5" pos:end="147:19">g_assert_cmpint</name><argument_list pos:start="147:20" pos:end="147:34">(<argument pos:start="147:21" pos:end="147:26"><expr pos:start="147:21" pos:end="147:26"><name pos:start="147:21" pos:end="147:26">status</name></expr></argument>, <argument pos:start="147:29" pos:end="147:30"><expr pos:start="147:29" pos:end="147:30"><operator pos:start="147:29" pos:end="147:30">==</operator></expr></argument>, <argument pos:start="147:33" pos:end="147:33"><expr pos:start="147:33" pos:end="147:33"><literal type="number" pos:start="147:33" pos:end="147:33">0</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>



    <expr_stmt pos:start="151:5" pos:end="151:32"><expr pos:start="151:5" pos:end="151:31"><call pos:start="151:5" pos:end="151:31"><name pos:start="151:5" pos:end="151:14">guest_free</name><argument_list pos:start="151:15" pos:end="151:31">(<argument pos:start="151:16" pos:end="151:20"><expr pos:start="151:16" pos:end="151:20"><name pos:start="151:16" pos:end="151:20">alloc</name></expr></argument>, <argument pos:start="151:23" pos:end="151:30"><expr pos:start="151:23" pos:end="151:30"><name pos:start="151:23" pos:end="151:30">req_addr</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>



    <comment type="block" pos:start="155:5" pos:end="155:22">/* Read request */</comment>

    <expr_stmt pos:start="157:5" pos:end="157:31"><expr pos:start="157:5" pos:end="157:30"><name pos:start="157:5" pos:end="157:12"><name pos:start="157:5" pos:end="157:7">req</name><operator pos:start="157:8" pos:end="157:8">.</operator><name pos:start="157:9" pos:end="157:12">type</name></name> <operator pos:start="157:14" pos:end="157:14">=</operator> <name pos:start="157:16" pos:end="157:30">VIRTIO_BLK_T_IN</name></expr>;</expr_stmt>

    <expr_stmt pos:start="159:5" pos:end="159:19"><expr pos:start="159:5" pos:end="159:18"><name pos:start="159:5" pos:end="159:14"><name pos:start="159:5" pos:end="159:7">req</name><operator pos:start="159:8" pos:end="159:8">.</operator><name pos:start="159:9" pos:end="159:14">ioprio</name></name> <operator pos:start="159:16" pos:end="159:16">=</operator> <literal type="number" pos:start="159:18" pos:end="159:18">1</literal></expr>;</expr_stmt>

    <expr_stmt pos:start="161:5" pos:end="161:19"><expr pos:start="161:5" pos:end="161:18"><name pos:start="161:5" pos:end="161:14"><name pos:start="161:5" pos:end="161:7">req</name><operator pos:start="161:8" pos:end="161:8">.</operator><name pos:start="161:9" pos:end="161:14">sector</name></name> <operator pos:start="161:16" pos:end="161:16">=</operator> <literal type="number" pos:start="161:18" pos:end="161:18">0</literal></expr>;</expr_stmt>

    <expr_stmt pos:start="163:5" pos:end="163:30"><expr pos:start="163:5" pos:end="163:29"><name pos:start="163:5" pos:end="163:12"><name pos:start="163:5" pos:end="163:7">req</name><operator pos:start="163:8" pos:end="163:8">.</operator><name pos:start="163:9" pos:end="163:12">data</name></name> <operator pos:start="163:14" pos:end="163:14">=</operator> <call pos:start="163:16" pos:end="163:29"><name pos:start="163:16" pos:end="163:24">g_malloc0</name><argument_list pos:start="163:25" pos:end="163:29">(<argument pos:start="163:26" pos:end="163:28"><expr pos:start="163:26" pos:end="163:28"><literal type="number" pos:start="163:26" pos:end="163:28">512</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>



    <expr_stmt pos:start="167:5" pos:end="167:52"><expr pos:start="167:5" pos:end="167:51"><name pos:start="167:5" pos:end="167:12">req_addr</name> <operator pos:start="167:14" pos:end="167:14">=</operator> <call pos:start="167:16" pos:end="167:51"><name pos:start="167:16" pos:end="167:33">virtio_blk_request</name><argument_list pos:start="167:34" pos:end="167:51">(<argument pos:start="167:35" pos:end="167:39"><expr pos:start="167:35" pos:end="167:39"><name pos:start="167:35" pos:end="167:39">alloc</name></expr></argument>, <argument pos:start="167:42" pos:end="167:45"><expr pos:start="167:42" pos:end="167:45"><operator pos:start="167:42" pos:end="167:42">&amp;</operator><name pos:start="167:43" pos:end="167:45">req</name></expr></argument>, <argument pos:start="167:48" pos:end="167:50"><expr pos:start="167:48" pos:end="167:50"><literal type="number" pos:start="167:48" pos:end="167:50">512</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>



    <expr_stmt pos:start="171:5" pos:end="171:21"><expr pos:start="171:5" pos:end="171:20"><call pos:start="171:5" pos:end="171:20"><name pos:start="171:5" pos:end="171:10">g_free</name><argument_list pos:start="171:11" pos:end="171:20">(<argument pos:start="171:12" pos:end="171:19"><expr pos:start="171:12" pos:end="171:19"><name pos:start="171:12" pos:end="171:19"><name pos:start="171:12" pos:end="171:14">req</name><operator pos:start="171:15" pos:end="171:15">.</operator><name pos:start="171:16" pos:end="171:19">data</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>



    <expr_stmt pos:start="175:5" pos:end="175:70"><expr pos:start="175:5" pos:end="175:69"><name pos:start="175:5" pos:end="175:13">free_head</name> <operator pos:start="175:15" pos:end="175:15">=</operator> <call pos:start="175:17" pos:end="175:69"><name pos:start="175:17" pos:end="175:30">qvirtqueue_add</name><argument_list pos:start="175:31" pos:end="175:69">(<argument pos:start="175:32" pos:end="175:41"><expr pos:start="175:32" pos:end="175:41"><operator pos:start="175:32" pos:end="175:32">&amp;</operator><name pos:start="175:33" pos:end="175:41"><name pos:start="175:33" pos:end="175:37">vqpci</name><operator pos:start="175:38" pos:end="175:39">-&gt;</operator><name pos:start="175:40" pos:end="175:41">vq</name></name></expr></argument>, <argument pos:start="175:44" pos:end="175:51"><expr pos:start="175:44" pos:end="175:51"><name pos:start="175:44" pos:end="175:51">req_addr</name></expr></argument>, <argument pos:start="175:54" pos:end="175:55"><expr pos:start="175:54" pos:end="175:55"><literal type="number" pos:start="175:54" pos:end="175:55">16</literal></expr></argument>, <argument pos:start="175:58" pos:end="175:62"><expr pos:start="175:58" pos:end="175:62"><name pos:start="175:58" pos:end="175:62">false</name></expr></argument>, <argument pos:start="175:65" pos:end="175:68"><expr pos:start="175:65" pos:end="175:68"><name pos:start="175:65" pos:end="175:68">true</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    <expr_stmt pos:start="177:5" pos:end="177:63"><expr pos:start="177:5" pos:end="177:62"><call pos:start="177:5" pos:end="177:62"><name pos:start="177:5" pos:end="177:18">qvirtqueue_add</name><argument_list pos:start="177:19" pos:end="177:62">(<argument pos:start="177:20" pos:end="177:29"><expr pos:start="177:20" pos:end="177:29"><operator pos:start="177:20" pos:end="177:20">&amp;</operator><name pos:start="177:21" pos:end="177:29"><name pos:start="177:21" pos:end="177:25">vqpci</name><operator pos:start="177:26" pos:end="177:27">-&gt;</operator><name pos:start="177:28" pos:end="177:29">vq</name></name></expr></argument>, <argument pos:start="177:32" pos:end="177:44"><expr pos:start="177:32" pos:end="177:44"><name pos:start="177:32" pos:end="177:39">req_addr</name> <operator pos:start="177:41" pos:end="177:41">+</operator> <literal type="number" pos:start="177:43" pos:end="177:44">16</literal></expr></argument>, <argument pos:start="177:47" pos:end="177:49"><expr pos:start="177:47" pos:end="177:49"><literal type="number" pos:start="177:47" pos:end="177:49">512</literal></expr></argument>, <argument pos:start="177:52" pos:end="177:55"><expr pos:start="177:52" pos:end="177:55"><name pos:start="177:52" pos:end="177:55">true</name></expr></argument>, <argument pos:start="177:58" pos:end="177:61"><expr pos:start="177:58" pos:end="177:61"><name pos:start="177:58" pos:end="177:61">true</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    <expr_stmt pos:start="179:5" pos:end="179:63"><expr pos:start="179:5" pos:end="179:62"><call pos:start="179:5" pos:end="179:62"><name pos:start="179:5" pos:end="179:18">qvirtqueue_add</name><argument_list pos:start="179:19" pos:end="179:62">(<argument pos:start="179:20" pos:end="179:29"><expr pos:start="179:20" pos:end="179:29"><operator pos:start="179:20" pos:end="179:20">&amp;</operator><name pos:start="179:21" pos:end="179:29"><name pos:start="179:21" pos:end="179:25">vqpci</name><operator pos:start="179:26" pos:end="179:27">-&gt;</operator><name pos:start="179:28" pos:end="179:29">vq</name></name></expr></argument>, <argument pos:start="179:32" pos:end="179:45"><expr pos:start="179:32" pos:end="179:45"><name pos:start="179:32" pos:end="179:39">req_addr</name> <operator pos:start="179:41" pos:end="179:41">+</operator> <literal type="number" pos:start="179:43" pos:end="179:45">528</literal></expr></argument>, <argument pos:start="179:48" pos:end="179:48"><expr pos:start="179:48" pos:end="179:48"><literal type="number" pos:start="179:48" pos:end="179:48">1</literal></expr></argument>, <argument pos:start="179:51" pos:end="179:54"><expr pos:start="179:51" pos:end="179:54"><name pos:start="179:51" pos:end="179:54">true</name></expr></argument>, <argument pos:start="179:57" pos:end="179:61"><expr pos:start="179:57" pos:end="179:61"><name pos:start="179:57" pos:end="179:61">false</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>



    <expr_stmt pos:start="183:5" pos:end="183:69"><expr pos:start="183:5" pos:end="183:68"><call pos:start="183:5" pos:end="183:68"><name pos:start="183:5" pos:end="183:19">qvirtqueue_kick</name><argument_list pos:start="183:20" pos:end="183:68">(<argument pos:start="183:21" pos:end="183:32"><expr pos:start="183:21" pos:end="183:32"><operator pos:start="183:21" pos:end="183:21">&amp;</operator><name pos:start="183:22" pos:end="183:32">qvirtio_pci</name></expr></argument>, <argument pos:start="183:35" pos:end="183:44"><expr pos:start="183:35" pos:end="183:44"><operator pos:start="183:35" pos:end="183:35">&amp;</operator><name pos:start="183:36" pos:end="183:44"><name pos:start="183:36" pos:end="183:38">dev</name><operator pos:start="183:39" pos:end="183:40">-&gt;</operator><name pos:start="183:41" pos:end="183:44">vdev</name></name></expr></argument>, <argument pos:start="183:47" pos:end="183:56"><expr pos:start="183:47" pos:end="183:56"><operator pos:start="183:47" pos:end="183:47">&amp;</operator><name pos:start="183:48" pos:end="183:56"><name pos:start="183:48" pos:end="183:52">vqpci</name><operator pos:start="183:53" pos:end="183:54">-&gt;</operator><name pos:start="183:55" pos:end="183:56">vq</name></name></expr></argument>, <argument pos:start="183:59" pos:end="183:67"><expr pos:start="183:59" pos:end="183:67"><name pos:start="183:59" pos:end="183:67">free_head</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>





    <expr_stmt pos:start="189:5" pos:end="191:51"><expr pos:start="189:5" pos:end="191:50"><call pos:start="189:5" pos:end="191:50"><name pos:start="189:5" pos:end="189:26">qvirtio_wait_queue_isr</name><argument_list pos:start="189:27" pos:end="191:50">(<argument pos:start="189:28" pos:end="189:39"><expr pos:start="189:28" pos:end="189:39"><operator pos:start="189:28" pos:end="189:28">&amp;</operator><name pos:start="189:29" pos:end="189:39">qvirtio_pci</name></expr></argument>, <argument pos:start="189:42" pos:end="189:51"><expr pos:start="189:42" pos:end="189:51"><operator pos:start="189:42" pos:end="189:42">&amp;</operator><name pos:start="189:43" pos:end="189:51"><name pos:start="189:43" pos:end="189:45">dev</name><operator pos:start="189:46" pos:end="189:47">-&gt;</operator><name pos:start="189:48" pos:end="189:51">vdev</name></name></expr></argument>, <argument pos:start="189:54" pos:end="189:63"><expr pos:start="189:54" pos:end="189:63"><operator pos:start="189:54" pos:end="189:54">&amp;</operator><name pos:start="189:55" pos:end="189:63"><name pos:start="189:55" pos:end="189:59">vqpci</name><operator pos:start="189:60" pos:end="189:61">-&gt;</operator><name pos:start="189:62" pos:end="189:63">vq</name></name></expr></argument>,

                           <argument pos:start="191:28" pos:end="191:49"><expr pos:start="191:28" pos:end="191:49"><name pos:start="191:28" pos:end="191:49">QVIRTIO_BLK_TIMEOUT_US</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>



    <expr_stmt pos:start="195:5" pos:end="195:35"><expr pos:start="195:5" pos:end="195:34"><name pos:start="195:5" pos:end="195:10">status</name> <operator pos:start="195:12" pos:end="195:12">=</operator> <call pos:start="195:14" pos:end="195:34"><name pos:start="195:14" pos:end="195:18">readb</name><argument_list pos:start="195:19" pos:end="195:34">(<argument pos:start="195:20" pos:end="195:33"><expr pos:start="195:20" pos:end="195:33"><name pos:start="195:20" pos:end="195:27">req_addr</name> <operator pos:start="195:29" pos:end="195:29">+</operator> <literal type="number" pos:start="195:31" pos:end="195:33">528</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    <expr_stmt pos:start="197:5" pos:end="197:35"><expr pos:start="197:5" pos:end="197:34"><call pos:start="197:5" pos:end="197:34"><name pos:start="197:5" pos:end="197:19">g_assert_cmpint</name><argument_list pos:start="197:20" pos:end="197:34">(<argument pos:start="197:21" pos:end="197:26"><expr pos:start="197:21" pos:end="197:26"><name pos:start="197:21" pos:end="197:26">status</name></expr></argument>, <argument pos:start="197:29" pos:end="197:30"><expr pos:start="197:29" pos:end="197:30"><operator pos:start="197:29" pos:end="197:30">==</operator></expr></argument>, <argument pos:start="197:33" pos:end="197:33"><expr pos:start="197:33" pos:end="197:33"><literal type="number" pos:start="197:33" pos:end="197:33">0</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>



    <expr_stmt pos:start="201:5" pos:end="201:26"><expr pos:start="201:5" pos:end="201:25"><name pos:start="201:5" pos:end="201:8">data</name> <operator pos:start="201:10" pos:end="201:10">=</operator> <call pos:start="201:12" pos:end="201:25"><name pos:start="201:12" pos:end="201:20">g_malloc0</name><argument_list pos:start="201:21" pos:end="201:25">(<argument pos:start="201:22" pos:end="201:24"><expr pos:start="201:22" pos:end="201:24"><literal type="number" pos:start="201:22" pos:end="201:24">512</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    <expr_stmt pos:start="203:5" pos:end="203:38"><expr pos:start="203:5" pos:end="203:37"><call pos:start="203:5" pos:end="203:37"><name pos:start="203:5" pos:end="203:11">memread</name><argument_list pos:start="203:12" pos:end="203:37">(<argument pos:start="203:13" pos:end="203:25"><expr pos:start="203:13" pos:end="203:25"><name pos:start="203:13" pos:end="203:20">req_addr</name> <operator pos:start="203:22" pos:end="203:22">+</operator> <literal type="number" pos:start="203:24" pos:end="203:25">16</literal></expr></argument>, <argument pos:start="203:28" pos:end="203:31"><expr pos:start="203:28" pos:end="203:31"><name pos:start="203:28" pos:end="203:31">data</name></expr></argument>, <argument pos:start="203:34" pos:end="203:36"><expr pos:start="203:34" pos:end="203:36"><literal type="number" pos:start="203:34" pos:end="203:36">512</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    <expr_stmt pos:start="205:5" pos:end="205:38"><expr pos:start="205:5" pos:end="205:37"><call pos:start="205:5" pos:end="205:37"><name pos:start="205:5" pos:end="205:19">g_assert_cmpstr</name><argument_list pos:start="205:20" pos:end="205:37">(<argument pos:start="205:21" pos:end="205:24"><expr pos:start="205:21" pos:end="205:24"><name pos:start="205:21" pos:end="205:24">data</name></expr></argument>, <argument pos:start="205:27" pos:end="205:28"><expr pos:start="205:27" pos:end="205:28"><operator pos:start="205:27" pos:end="205:28">==</operator></expr></argument>, <argument pos:start="205:31" pos:end="205:36"><expr pos:start="205:31" pos:end="205:36"><literal type="string" pos:start="205:31" pos:end="205:36">"TEST"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    <expr_stmt pos:start="207:5" pos:end="207:17"><expr pos:start="207:5" pos:end="207:16"><call pos:start="207:5" pos:end="207:16"><name pos:start="207:5" pos:end="207:10">g_free</name><argument_list pos:start="207:11" pos:end="207:16">(<argument pos:start="207:12" pos:end="207:15"><expr pos:start="207:12" pos:end="207:15"><name pos:start="207:12" pos:end="207:15">data</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>



    <expr_stmt pos:start="211:5" pos:end="211:32"><expr pos:start="211:5" pos:end="211:31"><call pos:start="211:5" pos:end="211:31"><name pos:start="211:5" pos:end="211:14">guest_free</name><argument_list pos:start="211:15" pos:end="211:31">(<argument pos:start="211:16" pos:end="211:20"><expr pos:start="211:16" pos:end="211:20"><name pos:start="211:16" pos:end="211:20">alloc</name></expr></argument>, <argument pos:start="211:23" pos:end="211:30"><expr pos:start="211:23" pos:end="211:30"><name pos:start="211:23" pos:end="211:30">req_addr</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>



    <comment type="block" pos:start="215:5" pos:end="215:18">/* End test */</comment>

    <expr_stmt pos:start="217:5" pos:end="217:38"><expr pos:start="217:5" pos:end="217:37"><call pos:start="217:5" pos:end="217:37"><name pos:start="217:5" pos:end="217:14">guest_free</name><argument_list pos:start="217:15" pos:end="217:37">(<argument pos:start="217:16" pos:end="217:20"><expr pos:start="217:16" pos:end="217:20"><name pos:start="217:16" pos:end="217:20">alloc</name></expr></argument>, <argument pos:start="217:23" pos:end="217:36"><expr pos:start="217:23" pos:end="217:36"><name pos:start="217:23" pos:end="217:36"><name pos:start="217:23" pos:end="217:27">vqpci</name><operator pos:start="217:28" pos:end="217:29">-&gt;</operator><name pos:start="217:30" pos:end="217:31">vq</name><operator pos:start="217:32" pos:end="217:32">.</operator><name pos:start="217:33" pos:end="217:36">desc</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    <expr_stmt pos:start="219:5" pos:end="219:27"><expr pos:start="219:5" pos:end="219:26"><call pos:start="219:5" pos:end="219:26"><name pos:start="219:5" pos:end="219:19">pc_alloc_uninit</name><argument_list pos:start="219:20" pos:end="219:26">(<argument pos:start="219:21" pos:end="219:25"><expr pos:start="219:21" pos:end="219:25"><name pos:start="219:21" pos:end="219:25">alloc</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    <expr_stmt pos:start="221:5" pos:end="221:33"><expr pos:start="221:5" pos:end="221:32"><call pos:start="221:5" pos:end="221:32"><name pos:start="221:5" pos:end="221:21">qpci_msix_disable</name><argument_list pos:start="221:22" pos:end="221:32">(<argument pos:start="221:23" pos:end="221:31"><expr pos:start="221:23" pos:end="221:31"><name pos:start="221:23" pos:end="221:31"><name pos:start="221:23" pos:end="221:25">dev</name><operator pos:start="221:26" pos:end="221:27">-&gt;</operator><name pos:start="221:28" pos:end="221:31">pdev</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    <expr_stmt pos:start="223:5" pos:end="223:36"><expr pos:start="223:5" pos:end="223:35"><call pos:start="223:5" pos:end="223:35"><name pos:start="223:5" pos:end="223:30">qvirtio_pci_device_disable</name><argument_list pos:start="223:31" pos:end="223:35">(<argument pos:start="223:32" pos:end="223:34"><expr pos:start="223:32" pos:end="223:34"><name pos:start="223:32" pos:end="223:34">dev</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    <expr_stmt pos:start="225:5" pos:end="225:16"><expr pos:start="225:5" pos:end="225:15"><call pos:start="225:5" pos:end="225:15"><name pos:start="225:5" pos:end="225:10">g_free</name><argument_list pos:start="225:11" pos:end="225:15">(<argument pos:start="225:12" pos:end="225:14"><expr pos:start="225:12" pos:end="225:14"><name pos:start="225:12" pos:end="225:14">dev</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    <expr_stmt pos:start="227:5" pos:end="227:22"><expr pos:start="227:5" pos:end="227:21"><call pos:start="227:5" pos:end="227:21"><name pos:start="227:5" pos:end="227:16">qpci_free_pc</name><argument_list pos:start="227:17" pos:end="227:21">(<argument pos:start="227:18" pos:end="227:20"><expr pos:start="227:18" pos:end="227:20"><name pos:start="227:18" pos:end="227:20">bus</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    <expr_stmt pos:start="229:5" pos:end="229:15"><expr pos:start="229:5" pos:end="229:14"><call pos:start="229:5" pos:end="229:14"><name pos:start="229:5" pos:end="229:12">test_end</name><argument_list pos:start="229:13" pos:end="229:14">()</argument_list></call></expr>;</expr_stmt>

</block_content>}</block></function>
</unit>
