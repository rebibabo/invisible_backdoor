<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<unit xmlns="http://www.srcML.org/srcML/src" xmlns:cpp="http://www.srcML.org/srcML/cpp" xmlns:pos="http://www.srcML.org/srcML/position" revision="1.0.0" language="C" filename="dataset/ropgen/aug/1/22988.c" pos:tabs="8"><function pos:start="1:1" pos:end="319:1"><type pos:start="1:1" pos:end="1:11"><specifier pos:start="1:1" pos:end="1:6">static</specifier> <name pos:start="1:8" pos:end="1:11">void</name></type> <name pos:start="1:13" pos:end="1:25">vga_draw_text</name><parameter_list pos:start="1:26" pos:end="1:55">(<parameter pos:start="1:27" pos:end="1:37"><decl pos:start="1:27" pos:end="1:37"><type pos:start="1:27" pos:end="1:37"><name pos:start="1:27" pos:end="1:34">VGAState</name> <modifier pos:start="1:36" pos:end="1:36">*</modifier></type><name pos:start="1:37" pos:end="1:37">s</name></decl></parameter>, <parameter pos:start="1:40" pos:end="1:54"><decl pos:start="1:40" pos:end="1:54"><type pos:start="1:40" pos:end="1:54"><name pos:start="1:40" pos:end="1:42">int</name></type> <name pos:start="1:44" pos:end="1:54">full_update</name></decl></parameter>)</parameter_list>

<block pos:start="3:1" pos:end="319:1">{<block_content pos:start="5:5" pos:end="317:5">

    <decl_stmt pos:start="5:5" pos:end="5:63"><decl pos:start="5:5" pos:end="5:10"><type pos:start="5:5" pos:end="5:7"><name pos:start="5:5" pos:end="5:7">int</name></type> <name pos:start="5:9" pos:end="5:10">cx</name></decl>, <decl pos:start="5:13" pos:end="5:14"><type ref="prev" pos:start="5:5" pos:end="5:7"/><name pos:start="5:13" pos:end="5:14">cy</name></decl>, <decl pos:start="5:17" pos:end="5:23"><type ref="prev" pos:start="5:5" pos:end="5:7"/><name pos:start="5:17" pos:end="5:23">cheight</name></decl>, <decl pos:start="5:26" pos:end="5:27"><type ref="prev" pos:start="5:5" pos:end="5:7"/><name pos:start="5:26" pos:end="5:27">cw</name></decl>, <decl pos:start="5:30" pos:end="5:31"><type ref="prev" pos:start="5:5" pos:end="5:7"/><name pos:start="5:30" pos:end="5:31">ch</name></decl>, <decl pos:start="5:34" pos:end="5:38"><type ref="prev" pos:start="5:5" pos:end="5:7"/><name pos:start="5:34" pos:end="5:38">cattr</name></decl>, <decl pos:start="5:41" pos:end="5:46"><type ref="prev" pos:start="5:5" pos:end="5:7"/><name pos:start="5:41" pos:end="5:46">height</name></decl>, <decl pos:start="5:49" pos:end="5:53"><type ref="prev" pos:start="5:5" pos:end="5:7"/><name pos:start="5:49" pos:end="5:53">width</name></decl>, <decl pos:start="5:56" pos:end="5:62"><type ref="prev" pos:start="5:5" pos:end="5:7"/><name pos:start="5:56" pos:end="5:62">ch_attr</name></decl>;</decl_stmt>

    <decl_stmt pos:start="7:5" pos:end="7:41"><decl pos:start="7:5" pos:end="7:14"><type pos:start="7:5" pos:end="7:7"><name pos:start="7:5" pos:end="7:7">int</name></type> <name pos:start="7:9" pos:end="7:14">cx_min</name></decl>, <decl pos:start="7:17" pos:end="7:22"><type ref="prev" pos:start="7:5" pos:end="7:7"/><name pos:start="7:17" pos:end="7:22">cx_max</name></decl>, <decl pos:start="7:25" pos:end="7:32"><type ref="prev" pos:start="7:5" pos:end="7:7"/><name pos:start="7:25" pos:end="7:32">linesize</name></decl>, <decl pos:start="7:35" pos:end="7:40"><type ref="prev" pos:start="7:5" pos:end="7:7"/><name pos:start="7:35" pos:end="7:40">x_incr</name></decl>;</decl_stmt>

    <decl_stmt pos:start="9:5" pos:end="9:52"><decl pos:start="9:5" pos:end="9:19"><type pos:start="9:5" pos:end="9:12"><name pos:start="9:5" pos:end="9:12">uint32_t</name></type> <name pos:start="9:14" pos:end="9:19">offset</name></decl>, <decl pos:start="9:22" pos:end="9:26"><type ref="prev" pos:start="9:5" pos:end="9:12"/><name pos:start="9:22" pos:end="9:26">fgcol</name></decl>, <decl pos:start="9:29" pos:end="9:33"><type ref="prev" pos:start="9:5" pos:end="9:12"/><name pos:start="9:29" pos:end="9:33">bgcol</name></decl>, <decl pos:start="9:36" pos:end="9:36"><type ref="prev" pos:start="9:5" pos:end="9:12"/><name pos:start="9:36" pos:end="9:36">v</name></decl>, <decl pos:start="9:39" pos:end="9:51"><type ref="prev" pos:start="9:5" pos:end="9:12"/><name pos:start="9:39" pos:end="9:51">cursor_offset</name></decl>;</decl_stmt>

    <decl_stmt pos:start="11:5" pos:end="11:51"><decl pos:start="11:5" pos:end="11:15"><type pos:start="11:5" pos:end="11:13"><name pos:start="11:5" pos:end="11:11">uint8_t</name> <modifier pos:start="11:13" pos:end="11:13">*</modifier></type><name pos:start="11:14" pos:end="11:15">d1</name></decl>, <decl pos:start="11:18" pos:end="11:19"><type ref="prev" pos:start="11:5" pos:end="11:13"><modifier pos:start="11:18" pos:end="11:18">*</modifier></type><name pos:start="11:19" pos:end="11:19">d</name></decl>, <decl pos:start="11:22" pos:end="11:25"><type ref="prev" pos:start="11:5" pos:end="11:13"><modifier pos:start="11:22" pos:end="11:22">*</modifier></type><name pos:start="11:23" pos:end="11:25">src</name></decl>, <decl pos:start="11:28" pos:end="11:30"><type ref="prev" pos:start="11:5" pos:end="11:13"><modifier pos:start="11:28" pos:end="11:28">*</modifier></type><name pos:start="11:29" pos:end="11:30">s1</name></decl>, <decl pos:start="11:33" pos:end="11:37"><type ref="prev" pos:start="11:5" pos:end="11:13"><modifier pos:start="11:33" pos:end="11:33">*</modifier></type><name pos:start="11:34" pos:end="11:37">dest</name></decl>, <decl pos:start="11:40" pos:end="11:50"><type ref="prev" pos:start="11:5" pos:end="11:13"><modifier pos:start="11:40" pos:end="11:40">*</modifier></type><name pos:start="11:41" pos:end="11:50">cursor_ptr</name></decl>;</decl_stmt>

    <decl_stmt pos:start="13:5" pos:end="13:43"><decl pos:start="13:5" pos:end="13:27"><type pos:start="13:5" pos:end="13:19"><specifier pos:start="13:5" pos:end="13:9">const</specifier> <name pos:start="13:11" pos:end="13:17">uint8_t</name> <modifier pos:start="13:19" pos:end="13:19">*</modifier></type><name pos:start="13:20" pos:end="13:27">font_ptr</name></decl>, <decl pos:start="13:30" pos:end="13:42"><type ref="prev" pos:start="13:5" pos:end="13:19"><modifier pos:start="13:30" pos:end="13:30">*</modifier></type><name pos:start="13:31" pos:end="13:42"><name pos:start="13:31" pos:end="13:39">font_base</name><index pos:start="13:40" pos:end="13:42">[<expr pos:start="13:41" pos:end="13:41"><literal type="number" pos:start="13:41" pos:end="13:41">2</literal></expr>]</index></name></decl>;</decl_stmt>

    <decl_stmt pos:start="15:5" pos:end="15:39"><decl pos:start="15:5" pos:end="15:12"><type pos:start="15:5" pos:end="15:7"><name pos:start="15:5" pos:end="15:7">int</name></type> <name pos:start="15:9" pos:end="15:12">dup9</name></decl>, <decl pos:start="15:15" pos:end="15:25"><type ref="prev" pos:start="15:5" pos:end="15:7"/><name pos:start="15:15" pos:end="15:25">line_offset</name></decl>, <decl pos:start="15:28" pos:end="15:38"><type ref="prev" pos:start="15:5" pos:end="15:7"/><name pos:start="15:28" pos:end="15:38">depth_index</name></decl>;</decl_stmt>

    <decl_stmt pos:start="17:5" pos:end="17:22"><decl pos:start="17:5" pos:end="17:21"><type pos:start="17:5" pos:end="17:14"><name pos:start="17:5" pos:end="17:12">uint32_t</name> <modifier pos:start="17:14" pos:end="17:14">*</modifier></type><name pos:start="17:15" pos:end="17:21">palette</name></decl>;</decl_stmt>

    <decl_stmt pos:start="19:5" pos:end="19:26"><decl pos:start="19:5" pos:end="19:25"><type pos:start="19:5" pos:end="19:14"><name pos:start="19:5" pos:end="19:12">uint32_t</name> <modifier pos:start="19:14" pos:end="19:14">*</modifier></type><name pos:start="19:15" pos:end="19:25">ch_attr_ptr</name></decl>;</decl_stmt>

    <decl_stmt pos:start="21:5" pos:end="21:42"><decl pos:start="21:5" pos:end="21:41"><type pos:start="21:5" pos:end="21:26"><name pos:start="21:5" pos:end="21:24">vga_draw_glyph8_func</name> <modifier pos:start="21:26" pos:end="21:26">*</modifier></type><name pos:start="21:27" pos:end="21:41">vga_draw_glyph8</name></decl>;</decl_stmt>

    <decl_stmt pos:start="23:5" pos:end="23:42"><decl pos:start="23:5" pos:end="23:41"><type pos:start="23:5" pos:end="23:26"><name pos:start="23:5" pos:end="23:24">vga_draw_glyph9_func</name> <modifier pos:start="23:26" pos:end="23:26">*</modifier></type><name pos:start="23:27" pos:end="23:41">vga_draw_glyph9</name></decl>;</decl_stmt>



    <expr_stmt pos:start="27:5" pos:end="27:26"><expr pos:start="27:5" pos:end="27:25"><call pos:start="27:5" pos:end="27:25"><name pos:start="27:5" pos:end="27:22">vga_dirty_log_stop</name><argument_list pos:start="27:23" pos:end="27:25">(<argument pos:start="27:24" pos:end="27:24"><expr pos:start="27:24" pos:end="27:24"><name pos:start="27:24" pos:end="27:24">s</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>



    <comment type="block" pos:start="31:5" pos:end="31:48">/* compute font data address (in plane 2) */</comment>

    <expr_stmt pos:start="33:5" pos:end="33:17"><expr pos:start="33:5" pos:end="33:16"><name pos:start="33:5" pos:end="33:5">v</name> <operator pos:start="33:7" pos:end="33:7">=</operator> <name pos:start="33:9" pos:end="33:16"><name pos:start="33:9" pos:end="33:9">s</name><operator pos:start="33:10" pos:end="33:11">-&gt;</operator><name pos:start="33:12" pos:end="33:13">sr</name><index pos:start="33:14" pos:end="33:16">[<expr pos:start="33:15" pos:end="33:15"><literal type="number" pos:start="33:15" pos:end="33:15">3</literal></expr>]</index></name></expr>;</expr_stmt>

    <expr_stmt pos:start="35:5" pos:end="35:62"><expr pos:start="35:5" pos:end="35:61"><name pos:start="35:5" pos:end="35:10">offset</name> <operator pos:start="35:12" pos:end="35:12">=</operator> <operator pos:start="35:14" pos:end="35:14">(</operator><operator pos:start="35:15" pos:end="35:15">(</operator><operator pos:start="35:16" pos:end="35:16">(</operator><name pos:start="35:17" pos:end="35:17">v</name> <operator pos:start="35:19" pos:end="35:20">&gt;&gt;</operator> <literal type="number" pos:start="35:22" pos:end="35:22">4</literal><operator pos:start="35:23" pos:end="35:23">)</operator> <operator pos:start="35:25" pos:end="35:25">&amp;</operator> <literal type="number" pos:start="35:27" pos:end="35:27">1</literal><operator pos:start="35:28" pos:end="35:28">)</operator> <operator pos:start="35:30" pos:end="35:30">|</operator> <operator pos:start="35:32" pos:end="35:32">(</operator><operator pos:start="35:33" pos:end="35:33">(</operator><name pos:start="35:34" pos:end="35:34">v</name> <operator pos:start="35:36" pos:end="35:37">&lt;&lt;</operator> <literal type="number" pos:start="35:39" pos:end="35:39">1</literal><operator pos:start="35:40" pos:end="35:40">)</operator> <operator pos:start="35:42" pos:end="35:42">&amp;</operator> <literal type="number" pos:start="35:44" pos:end="35:44">6</literal><operator pos:start="35:45" pos:end="35:45">)</operator><operator pos:start="35:46" pos:end="35:46">)</operator> <operator pos:start="35:48" pos:end="35:48">*</operator> <literal type="number" pos:start="35:50" pos:end="35:53">8192</literal> <operator pos:start="35:55" pos:end="35:55">*</operator> <literal type="number" pos:start="35:57" pos:end="35:59">4</literal> <operator pos:start="35:59" pos:end="35:59">+</operator> <literal type="number" pos:start="35:61" pos:end="35:61">2</literal></expr>;</expr_stmt>

    <if_stmt pos:start="37:5" pos:end="43:5"><if pos:start="37:5" pos:end="43:5">if <condition pos:start="37:8" pos:end="37:37">(<expr pos:start="37:9" pos:end="37:36"><name pos:start="37:9" pos:end="37:14">offset</name> <operator pos:start="37:16" pos:end="37:17">!=</operator> <name pos:start="37:19" pos:end="37:36"><name pos:start="37:19" pos:end="37:19">s</name><operator pos:start="37:20" pos:end="37:21">-&gt;</operator><name pos:start="37:22" pos:end="37:33">font_offsets</name><index pos:start="37:34" pos:end="37:36">[<expr pos:start="37:35" pos:end="37:35"><literal type="number" pos:start="37:35" pos:end="37:35">0</literal></expr>]</index></name></expr>)</condition> <block pos:start="37:39" pos:end="43:5">{<block_content pos:start="39:9" pos:end="41:24">

        <expr_stmt pos:start="39:9" pos:end="39:36"><expr pos:start="39:9" pos:end="39:35"><name pos:start="39:9" pos:end="39:26"><name pos:start="39:9" pos:end="39:9">s</name><operator pos:start="39:10" pos:end="39:11">-&gt;</operator><name pos:start="39:12" pos:end="39:23">font_offsets</name><index pos:start="39:24" pos:end="39:26">[<expr pos:start="39:25" pos:end="39:25"><literal type="number" pos:start="39:25" pos:end="39:25">0</literal></expr>]</index></name> <operator pos:start="39:28" pos:end="39:28">=</operator> <name pos:start="39:30" pos:end="39:35">offset</name></expr>;</expr_stmt>

        <expr_stmt pos:start="41:9" pos:end="41:24"><expr pos:start="41:9" pos:end="41:23"><name pos:start="41:9" pos:end="41:19">full_update</name> <operator pos:start="41:21" pos:end="41:21">=</operator> <literal type="number" pos:start="41:23" pos:end="41:23">1</literal></expr>;</expr_stmt>

    </block_content>}</block></if></if_stmt>

    <expr_stmt pos:start="45:5" pos:end="45:40"><expr pos:start="45:5" pos:end="45:39"><name pos:start="45:5" pos:end="45:16"><name pos:start="45:5" pos:end="45:13">font_base</name><index pos:start="45:14" pos:end="45:16">[<expr pos:start="45:15" pos:end="45:15"><literal type="number" pos:start="45:15" pos:end="45:15">0</literal></expr>]</index></name> <operator pos:start="45:18" pos:end="45:18">=</operator> <name pos:start="45:20" pos:end="45:30"><name pos:start="45:20" pos:end="45:20">s</name><operator pos:start="45:21" pos:end="45:22">-&gt;</operator><name pos:start="45:23" pos:end="45:30">vram_ptr</name></name> <operator pos:start="45:32" pos:end="45:32">+</operator> <name pos:start="45:34" pos:end="45:39">offset</name></expr>;</expr_stmt>



    <expr_stmt pos:start="49:5" pos:end="49:62"><expr pos:start="49:5" pos:end="49:61"><name pos:start="49:5" pos:end="49:10">offset</name> <operator pos:start="49:12" pos:end="49:12">=</operator> <operator pos:start="49:14" pos:end="49:14">(</operator><operator pos:start="49:15" pos:end="49:15">(</operator><operator pos:start="49:16" pos:end="49:16">(</operator><name pos:start="49:17" pos:end="49:17">v</name> <operator pos:start="49:19" pos:end="49:20">&gt;&gt;</operator> <literal type="number" pos:start="49:22" pos:end="49:22">5</literal><operator pos:start="49:23" pos:end="49:23">)</operator> <operator pos:start="49:25" pos:end="49:25">&amp;</operator> <literal type="number" pos:start="49:27" pos:end="49:27">1</literal><operator pos:start="49:28" pos:end="49:28">)</operator> <operator pos:start="49:30" pos:end="49:30">|</operator> <operator pos:start="49:32" pos:end="49:32">(</operator><operator pos:start="49:33" pos:end="49:33">(</operator><name pos:start="49:34" pos:end="49:34">v</name> <operator pos:start="49:36" pos:end="49:37">&gt;&gt;</operator> <literal type="number" pos:start="49:39" pos:end="49:39">1</literal><operator pos:start="49:40" pos:end="49:40">)</operator> <operator pos:start="49:42" pos:end="49:42">&amp;</operator> <literal type="number" pos:start="49:44" pos:end="49:44">6</literal><operator pos:start="49:45" pos:end="49:45">)</operator><operator pos:start="49:46" pos:end="49:46">)</operator> <operator pos:start="49:48" pos:end="49:48">*</operator> <literal type="number" pos:start="49:50" pos:end="49:53">8192</literal> <operator pos:start="49:55" pos:end="49:55">*</operator> <literal type="number" pos:start="49:57" pos:end="49:59">4</literal> <operator pos:start="49:59" pos:end="49:59">+</operator> <literal type="number" pos:start="49:61" pos:end="49:61">2</literal></expr>;</expr_stmt>

    <expr_stmt pos:start="51:5" pos:end="51:40"><expr pos:start="51:5" pos:end="51:39"><name pos:start="51:5" pos:end="51:16"><name pos:start="51:5" pos:end="51:13">font_base</name><index pos:start="51:14" pos:end="51:16">[<expr pos:start="51:15" pos:end="51:15"><literal type="number" pos:start="51:15" pos:end="51:15">1</literal></expr>]</index></name> <operator pos:start="51:18" pos:end="51:18">=</operator> <name pos:start="51:20" pos:end="51:30"><name pos:start="51:20" pos:end="51:20">s</name><operator pos:start="51:21" pos:end="51:22">-&gt;</operator><name pos:start="51:23" pos:end="51:30">vram_ptr</name></name> <operator pos:start="51:32" pos:end="51:32">+</operator> <name pos:start="51:34" pos:end="51:39">offset</name></expr>;</expr_stmt>

    <if_stmt pos:start="53:5" pos:end="59:5"><if pos:start="53:5" pos:end="59:5">if <condition pos:start="53:8" pos:end="53:37">(<expr pos:start="53:9" pos:end="53:36"><name pos:start="53:9" pos:end="53:14">offset</name> <operator pos:start="53:16" pos:end="53:17">!=</operator> <name pos:start="53:19" pos:end="53:36"><name pos:start="53:19" pos:end="53:19">s</name><operator pos:start="53:20" pos:end="53:21">-&gt;</operator><name pos:start="53:22" pos:end="53:33">font_offsets</name><index pos:start="53:34" pos:end="53:36">[<expr pos:start="53:35" pos:end="53:35"><literal type="number" pos:start="53:35" pos:end="53:35">1</literal></expr>]</index></name></expr>)</condition> <block pos:start="53:39" pos:end="59:5">{<block_content pos:start="55:9" pos:end="57:24">

        <expr_stmt pos:start="55:9" pos:end="55:36"><expr pos:start="55:9" pos:end="55:35"><name pos:start="55:9" pos:end="55:26"><name pos:start="55:9" pos:end="55:9">s</name><operator pos:start="55:10" pos:end="55:11">-&gt;</operator><name pos:start="55:12" pos:end="55:23">font_offsets</name><index pos:start="55:24" pos:end="55:26">[<expr pos:start="55:25" pos:end="55:25"><literal type="number" pos:start="55:25" pos:end="55:25">1</literal></expr>]</index></name> <operator pos:start="55:28" pos:end="55:28">=</operator> <name pos:start="55:30" pos:end="55:35">offset</name></expr>;</expr_stmt>

        <expr_stmt pos:start="57:9" pos:end="57:24"><expr pos:start="57:9" pos:end="57:23"><name pos:start="57:9" pos:end="57:19">full_update</name> <operator pos:start="57:21" pos:end="57:21">=</operator> <literal type="number" pos:start="57:23" pos:end="57:23">1</literal></expr>;</expr_stmt>

    </block_content>}</block></if></if_stmt>

    <if_stmt pos:start="61:5" pos:end="71:5"><if pos:start="61:5" pos:end="71:5">if <condition pos:start="61:8" pos:end="61:36">(<expr pos:start="61:9" pos:end="61:35"><name pos:start="61:9" pos:end="61:24"><name pos:start="61:9" pos:end="61:9">s</name><operator pos:start="61:10" pos:end="61:11">-&gt;</operator><name pos:start="61:12" pos:end="61:24">plane_updated</name></name> <operator pos:start="61:26" pos:end="61:26">&amp;</operator> <operator pos:start="61:28" pos:end="61:28">(</operator><literal type="number" pos:start="61:29" pos:end="61:29">1</literal> <operator pos:start="61:31" pos:end="61:32">&lt;&lt;</operator> <literal type="number" pos:start="61:34" pos:end="61:34">2</literal><operator pos:start="61:35" pos:end="61:35">)</operator></expr>)</condition> <block pos:start="61:38" pos:end="71:5">{<block_content pos:start="67:9" pos:end="69:24">

        <comment type="block" pos:start="63:9" pos:end="65:55">/* if the plane 2 was modified since the last display, it

           indicates the font may have been modified */</comment>

        <expr_stmt pos:start="67:9" pos:end="67:29"><expr pos:start="67:9" pos:end="67:28"><name pos:start="67:9" pos:end="67:24"><name pos:start="67:9" pos:end="67:9">s</name><operator pos:start="67:10" pos:end="67:11">-&gt;</operator><name pos:start="67:12" pos:end="67:24">plane_updated</name></name> <operator pos:start="67:26" pos:end="67:26">=</operator> <literal type="number" pos:start="67:28" pos:end="67:28">0</literal></expr>;</expr_stmt>

        <expr_stmt pos:start="69:9" pos:end="69:24"><expr pos:start="69:9" pos:end="69:23"><name pos:start="69:9" pos:end="69:19">full_update</name> <operator pos:start="69:21" pos:end="69:21">=</operator> <literal type="number" pos:start="69:23" pos:end="69:23">1</literal></expr>;</expr_stmt>

    </block_content>}</block></if></if_stmt>

    <expr_stmt pos:start="73:5" pos:end="73:42"><expr pos:start="73:5" pos:end="73:41"><name pos:start="73:5" pos:end="73:15">full_update</name> <operator pos:start="73:17" pos:end="73:18">|=</operator> <call pos:start="73:20" pos:end="73:41"><name pos:start="73:20" pos:end="73:38">update_basic_params</name><argument_list pos:start="73:39" pos:end="73:41">(<argument pos:start="73:40" pos:end="73:40"><expr pos:start="73:40" pos:end="73:40"><name pos:start="73:40" pos:end="73:40">s</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>



    <expr_stmt pos:start="77:5" pos:end="77:33"><expr pos:start="77:5" pos:end="77:32"><name pos:start="77:5" pos:end="77:15">line_offset</name> <operator pos:start="77:17" pos:end="77:17">=</operator> <name pos:start="77:19" pos:end="77:32"><name pos:start="77:19" pos:end="77:19">s</name><operator pos:start="77:20" pos:end="77:21">-&gt;</operator><name pos:start="77:22" pos:end="77:32">line_offset</name></name></expr>;</expr_stmt>

    <expr_stmt pos:start="79:5" pos:end="79:43"><expr pos:start="79:5" pos:end="79:42"><name pos:start="79:5" pos:end="79:6">s1</name> <operator pos:start="79:8" pos:end="79:8">=</operator> <name pos:start="79:10" pos:end="79:20"><name pos:start="79:10" pos:end="79:10">s</name><operator pos:start="79:11" pos:end="79:12">-&gt;</operator><name pos:start="79:13" pos:end="79:20">vram_ptr</name></name> <operator pos:start="79:22" pos:end="79:22">+</operator> <operator pos:start="79:24" pos:end="79:24">(</operator><name pos:start="79:25" pos:end="79:37"><name pos:start="79:25" pos:end="79:25">s</name><operator pos:start="79:26" pos:end="79:27">-&gt;</operator><name pos:start="79:28" pos:end="79:37">start_addr</name></name> <operator pos:start="79:39" pos:end="79:39">*</operator> <literal type="number" pos:start="79:41" pos:end="79:41">4</literal><operator pos:start="79:42" pos:end="79:42">)</operator></expr>;</expr_stmt>



    <expr_stmt pos:start="83:5" pos:end="83:63"><expr pos:start="83:5" pos:end="83:62"><call pos:start="83:5" pos:end="83:62"><name pos:start="83:5" pos:end="83:27">vga_get_text_resolution</name><argument_list pos:start="83:28" pos:end="83:62">(<argument pos:start="83:29" pos:end="83:29"><expr pos:start="83:29" pos:end="83:29"><name pos:start="83:29" pos:end="83:29">s</name></expr></argument>, <argument pos:start="83:32" pos:end="83:37"><expr pos:start="83:32" pos:end="83:37"><operator pos:start="83:32" pos:end="83:32">&amp;</operator><name pos:start="83:33" pos:end="83:37">width</name></expr></argument>, <argument pos:start="83:40" pos:end="83:46"><expr pos:start="83:40" pos:end="83:46"><operator pos:start="83:40" pos:end="83:40">&amp;</operator><name pos:start="83:41" pos:end="83:46">height</name></expr></argument>, <argument pos:start="83:49" pos:end="83:51"><expr pos:start="83:49" pos:end="83:51"><operator pos:start="83:49" pos:end="83:49">&amp;</operator><name pos:start="83:50" pos:end="83:51">cw</name></expr></argument>, <argument pos:start="83:54" pos:end="83:61"><expr pos:start="83:54" pos:end="83:61"><operator pos:start="83:54" pos:end="83:54">&amp;</operator><name pos:start="83:55" pos:end="83:61">cheight</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    <expr_stmt pos:start="85:5" pos:end="85:60"><expr pos:start="85:5" pos:end="85:59"><name pos:start="85:5" pos:end="85:10">x_incr</name> <operator pos:start="85:12" pos:end="85:12">=</operator> <name pos:start="85:14" pos:end="85:15">cw</name> <operator pos:start="85:17" pos:end="85:17">*</operator> <operator pos:start="85:19" pos:end="85:19">(</operator><operator pos:start="85:20" pos:end="85:20">(</operator><call pos:start="85:21" pos:end="85:48"><name pos:start="85:21" pos:end="85:41">ds_get_bits_per_pixel</name><argument_list pos:start="85:42" pos:end="85:48">(<argument pos:start="85:43" pos:end="85:47"><expr pos:start="85:43" pos:end="85:47"><name pos:start="85:43" pos:end="85:47"><name pos:start="85:43" pos:end="85:43">s</name><operator pos:start="85:44" pos:end="85:45">-&gt;</operator><name pos:start="85:46" pos:end="85:47">ds</name></name></expr></argument>)</argument_list></call> <operator pos:start="85:50" pos:end="85:50">+</operator> <literal type="number" pos:start="85:52" pos:end="85:52">7</literal><operator pos:start="85:53" pos:end="85:53">)</operator> <operator pos:start="85:55" pos:end="85:56">&gt;&gt;</operator> <literal type="number" pos:start="85:58" pos:end="85:58">3</literal><operator pos:start="85:59" pos:end="85:59">)</operator></expr>;</expr_stmt>

    <if_stmt pos:start="87:5" pos:end="93:5"><if pos:start="87:5" pos:end="93:5">if <condition pos:start="87:8" pos:end="87:40">(<expr pos:start="87:9" pos:end="87:39"><operator pos:start="87:9" pos:end="87:9">(</operator><name pos:start="87:10" pos:end="87:15">height</name> <operator pos:start="87:17" pos:end="87:17">*</operator> <name pos:start="87:19" pos:end="87:23">width</name><operator pos:start="87:24" pos:end="87:24">)</operator> <operator pos:start="87:26" pos:end="87:26">&gt;</operator> <name pos:start="87:28" pos:end="87:39">CH_ATTR_SIZE</name></expr>)</condition> <block pos:start="87:42" pos:end="93:5">{<block_content pos:start="91:9" pos:end="91:15">

        <comment type="block" pos:start="89:9" pos:end="89:68">/* better than nothing: exit if transient size is too big */</comment>

        <return pos:start="91:9" pos:end="91:15">return;</return>

    </block_content>}</block></if></if_stmt>



    <if_stmt pos:start="97:5" pos:end="119:5"><if pos:start="97:5" pos:end="119:5">if <condition pos:start="97:8" pos:end="99:67">(<expr pos:start="97:9" pos:end="99:66"><name pos:start="97:9" pos:end="97:13">width</name> <operator pos:start="97:15" pos:end="97:16">!=</operator> <name pos:start="97:18" pos:end="97:30"><name pos:start="97:18" pos:end="97:18">s</name><operator pos:start="97:19" pos:end="97:20">-&gt;</operator><name pos:start="97:21" pos:end="97:30">last_width</name></name> <operator pos:start="97:32" pos:end="97:33">||</operator> <name pos:start="97:35" pos:end="97:40">height</name> <operator pos:start="97:42" pos:end="97:43">!=</operator> <name pos:start="97:45" pos:end="97:58"><name pos:start="97:45" pos:end="97:45">s</name><operator pos:start="97:46" pos:end="97:47">-&gt;</operator><name pos:start="97:48" pos:end="97:58">last_height</name></name> <operator pos:start="97:60" pos:end="97:61">||</operator>

        <name pos:start="99:9" pos:end="99:10">cw</name> <operator pos:start="99:12" pos:end="99:13">!=</operator> <name pos:start="99:15" pos:end="99:24"><name pos:start="99:15" pos:end="99:15">s</name><operator pos:start="99:16" pos:end="99:17">-&gt;</operator><name pos:start="99:18" pos:end="99:24">last_cw</name></name> <operator pos:start="99:26" pos:end="99:27">||</operator> <name pos:start="99:29" pos:end="99:35">cheight</name> <operator pos:start="99:37" pos:end="99:38">!=</operator> <name pos:start="99:40" pos:end="99:49"><name pos:start="99:40" pos:end="99:40">s</name><operator pos:start="99:41" pos:end="99:42">-&gt;</operator><name pos:start="99:43" pos:end="99:49">last_ch</name></name> <operator pos:start="99:51" pos:end="99:52">||</operator> <name pos:start="99:54" pos:end="99:66"><name pos:start="99:54" pos:end="99:54">s</name><operator pos:start="99:55" pos:end="99:56">-&gt;</operator><name pos:start="99:57" pos:end="99:66">last_depth</name></name></expr>)</condition> <block pos:start="99:69" pos:end="119:5">{<block_content pos:start="101:9" pos:end="117:24">

        <expr_stmt pos:start="101:9" pos:end="101:39"><expr pos:start="101:9" pos:end="101:38"><name pos:start="101:9" pos:end="101:25"><name pos:start="101:9" pos:end="101:9">s</name><operator pos:start="101:10" pos:end="101:11">-&gt;</operator><name pos:start="101:12" pos:end="101:25">last_scr_width</name></name> <operator pos:start="101:27" pos:end="101:27">=</operator> <name pos:start="101:29" pos:end="101:33">width</name> <operator pos:start="101:35" pos:end="101:35">*</operator> <name pos:start="101:37" pos:end="101:38">cw</name></expr>;</expr_stmt>

        <expr_stmt pos:start="103:9" pos:end="103:46"><expr pos:start="103:9" pos:end="103:45"><name pos:start="103:9" pos:end="103:26"><name pos:start="103:9" pos:end="103:9">s</name><operator pos:start="103:10" pos:end="103:11">-&gt;</operator><name pos:start="103:12" pos:end="103:26">last_scr_height</name></name> <operator pos:start="103:28" pos:end="103:28">=</operator> <name pos:start="103:30" pos:end="103:35">height</name> <operator pos:start="103:37" pos:end="103:37">*</operator> <name pos:start="103:39" pos:end="103:45">cheight</name></expr>;</expr_stmt>

        <expr_stmt pos:start="105:9" pos:end="105:74"><expr pos:start="105:9" pos:end="105:73"><call pos:start="105:9" pos:end="105:73"><name pos:start="105:9" pos:end="105:27">qemu_console_resize</name><argument_list pos:start="105:28" pos:end="105:73">(<argument pos:start="105:29" pos:end="105:33"><expr pos:start="105:29" pos:end="105:33"><name pos:start="105:29" pos:end="105:33"><name pos:start="105:29" pos:end="105:29">s</name><operator pos:start="105:30" pos:end="105:31">-&gt;</operator><name pos:start="105:32" pos:end="105:33">ds</name></name></expr></argument>, <argument pos:start="105:36" pos:end="105:52"><expr pos:start="105:36" pos:end="105:52"><name pos:start="105:36" pos:end="105:52"><name pos:start="105:36" pos:end="105:36">s</name><operator pos:start="105:37" pos:end="105:38">-&gt;</operator><name pos:start="105:39" pos:end="105:52">last_scr_width</name></name></expr></argument>, <argument pos:start="105:55" pos:end="105:72"><expr pos:start="105:55" pos:end="105:72"><name pos:start="105:55" pos:end="105:72"><name pos:start="105:55" pos:end="105:55">s</name><operator pos:start="105:56" pos:end="105:57">-&gt;</operator><name pos:start="105:58" pos:end="105:72">last_scr_height</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <expr_stmt pos:start="107:9" pos:end="107:26"><expr pos:start="107:9" pos:end="107:25"><name pos:start="107:9" pos:end="107:21"><name pos:start="107:9" pos:end="107:9">s</name><operator pos:start="107:10" pos:end="107:11">-&gt;</operator><name pos:start="107:12" pos:end="107:21">last_depth</name></name> <operator pos:start="107:23" pos:end="107:23">=</operator> <literal type="number" pos:start="107:25" pos:end="107:25">0</literal></expr>;</expr_stmt>

        <expr_stmt pos:start="109:9" pos:end="109:30"><expr pos:start="109:9" pos:end="109:29"><name pos:start="109:9" pos:end="109:21"><name pos:start="109:9" pos:end="109:9">s</name><operator pos:start="109:10" pos:end="109:11">-&gt;</operator><name pos:start="109:12" pos:end="109:21">last_width</name></name> <operator pos:start="109:23" pos:end="109:23">=</operator> <name pos:start="109:25" pos:end="109:29">width</name></expr>;</expr_stmt>

        <expr_stmt pos:start="111:9" pos:end="111:32"><expr pos:start="111:9" pos:end="111:31"><name pos:start="111:9" pos:end="111:22"><name pos:start="111:9" pos:end="111:9">s</name><operator pos:start="111:10" pos:end="111:11">-&gt;</operator><name pos:start="111:12" pos:end="111:22">last_height</name></name> <operator pos:start="111:24" pos:end="111:24">=</operator> <name pos:start="111:26" pos:end="111:31">height</name></expr>;</expr_stmt>

        <expr_stmt pos:start="113:9" pos:end="113:29"><expr pos:start="113:9" pos:end="113:28"><name pos:start="113:9" pos:end="113:18"><name pos:start="113:9" pos:end="113:9">s</name><operator pos:start="113:10" pos:end="113:11">-&gt;</operator><name pos:start="113:12" pos:end="113:18">last_ch</name></name> <operator pos:start="113:20" pos:end="113:20">=</operator> <name pos:start="113:22" pos:end="113:28">cheight</name></expr>;</expr_stmt>

        <expr_stmt pos:start="115:9" pos:end="115:24"><expr pos:start="115:9" pos:end="115:23"><name pos:start="115:9" pos:end="115:18"><name pos:start="115:9" pos:end="115:9">s</name><operator pos:start="115:10" pos:end="115:11">-&gt;</operator><name pos:start="115:12" pos:end="115:18">last_cw</name></name> <operator pos:start="115:20" pos:end="115:20">=</operator> <name pos:start="115:22" pos:end="115:23">cw</name></expr>;</expr_stmt>

        <expr_stmt pos:start="117:9" pos:end="117:24"><expr pos:start="117:9" pos:end="117:23"><name pos:start="117:9" pos:end="117:19">full_update</name> <operator pos:start="117:21" pos:end="117:21">=</operator> <literal type="number" pos:start="117:23" pos:end="117:23">1</literal></expr>;</expr_stmt>

    </block_content>}</block></if></if_stmt>

    <expr_stmt pos:start="121:5" pos:end="123:55"><expr pos:start="121:5" pos:end="123:54"><name pos:start="121:5" pos:end="121:19"><name pos:start="121:5" pos:end="121:5">s</name><operator pos:start="121:6" pos:end="121:7">-&gt;</operator><name pos:start="121:8" pos:end="121:19">rgb_to_pixel</name></name> <operator pos:start="121:21" pos:end="121:21">=</operator>

        <name pos:start="123:9" pos:end="123:54"><name pos:start="123:9" pos:end="123:30">rgb_to_pixel_dup_table</name><index pos:start="123:31" pos:end="123:54">[<expr pos:start="123:32" pos:end="123:53"><call pos:start="123:32" pos:end="123:53"><name pos:start="123:32" pos:end="123:46">get_depth_index</name><argument_list pos:start="123:47" pos:end="123:53">(<argument pos:start="123:48" pos:end="123:52"><expr pos:start="123:48" pos:end="123:52"><name pos:start="123:48" pos:end="123:52"><name pos:start="123:48" pos:end="123:48">s</name><operator pos:start="123:49" pos:end="123:50">-&gt;</operator><name pos:start="123:51" pos:end="123:52">ds</name></name></expr></argument>)</argument_list></call></expr>]</index></name></expr>;</expr_stmt>

    <expr_stmt pos:start="125:5" pos:end="125:39"><expr pos:start="125:5" pos:end="125:38"><name pos:start="125:5" pos:end="125:15">full_update</name> <operator pos:start="125:17" pos:end="125:18">|=</operator> <call pos:start="125:20" pos:end="125:38"><name pos:start="125:20" pos:end="125:35">update_palette16</name><argument_list pos:start="125:36" pos:end="125:38">(<argument pos:start="125:37" pos:end="125:37"><expr pos:start="125:37" pos:end="125:37"><name pos:start="125:37" pos:end="125:37">s</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    <expr_stmt pos:start="127:5" pos:end="127:30"><expr pos:start="127:5" pos:end="127:29"><name pos:start="127:5" pos:end="127:11">palette</name> <operator pos:start="127:13" pos:end="127:13">=</operator> <name pos:start="127:15" pos:end="127:29"><name pos:start="127:15" pos:end="127:15">s</name><operator pos:start="127:16" pos:end="127:17">-&gt;</operator><name pos:start="127:18" pos:end="127:29">last_palette</name></name></expr>;</expr_stmt>

    <expr_stmt pos:start="129:5" pos:end="129:60"><expr pos:start="129:5" pos:end="129:59"><name pos:start="129:5" pos:end="129:10">x_incr</name> <operator pos:start="129:12" pos:end="129:12">=</operator> <name pos:start="129:14" pos:end="129:15">cw</name> <operator pos:start="129:17" pos:end="129:17">*</operator> <operator pos:start="129:19" pos:end="129:19">(</operator><operator pos:start="129:20" pos:end="129:20">(</operator><call pos:start="129:21" pos:end="129:48"><name pos:start="129:21" pos:end="129:41">ds_get_bits_per_pixel</name><argument_list pos:start="129:42" pos:end="129:48">(<argument pos:start="129:43" pos:end="129:47"><expr pos:start="129:43" pos:end="129:47"><name pos:start="129:43" pos:end="129:47"><name pos:start="129:43" pos:end="129:43">s</name><operator pos:start="129:44" pos:end="129:45">-&gt;</operator><name pos:start="129:46" pos:end="129:47">ds</name></name></expr></argument>)</argument_list></call> <operator pos:start="129:50" pos:end="129:50">+</operator> <literal type="number" pos:start="129:52" pos:end="129:52">7</literal><operator pos:start="129:53" pos:end="129:53">)</operator> <operator pos:start="129:55" pos:end="129:56">&gt;&gt;</operator> <literal type="number" pos:start="129:58" pos:end="129:58">3</literal><operator pos:start="129:59" pos:end="129:59">)</operator></expr>;</expr_stmt>



    <expr_stmt pos:start="133:5" pos:end="133:71"><expr pos:start="133:5" pos:end="133:70"><name pos:start="133:5" pos:end="133:17">cursor_offset</name> <operator pos:start="133:19" pos:end="133:19">=</operator> <operator pos:start="133:21" pos:end="133:21">(</operator><operator pos:start="133:22" pos:end="133:22">(</operator><name pos:start="133:23" pos:end="133:33"><name pos:start="133:23" pos:end="133:23">s</name><operator pos:start="133:24" pos:end="133:25">-&gt;</operator><name pos:start="133:26" pos:end="133:27">cr</name><index pos:start="133:28" pos:end="133:33">[<expr pos:start="133:29" pos:end="133:32"><literal type="number" pos:start="133:29" pos:end="133:32">0x0e</literal></expr>]</index></name> <operator pos:start="133:35" pos:end="133:36">&lt;&lt;</operator> <literal type="number" pos:start="133:38" pos:end="133:38">8</literal><operator pos:start="133:39" pos:end="133:39">)</operator> <operator pos:start="133:41" pos:end="133:41">|</operator> <name pos:start="133:43" pos:end="133:53"><name pos:start="133:43" pos:end="133:43">s</name><operator pos:start="133:44" pos:end="133:45">-&gt;</operator><name pos:start="133:46" pos:end="133:47">cr</name><index pos:start="133:48" pos:end="133:53">[<expr pos:start="133:49" pos:end="133:52"><literal type="number" pos:start="133:49" pos:end="133:52">0x0f</literal></expr>]</index></name><operator pos:start="133:54" pos:end="133:54">)</operator> <operator pos:start="133:56" pos:end="133:56">-</operator> <name pos:start="133:58" pos:end="133:70"><name pos:start="133:58" pos:end="133:58">s</name><operator pos:start="133:59" pos:end="133:60">-&gt;</operator><name pos:start="133:61" pos:end="133:70">start_addr</name></name></expr>;</expr_stmt>

    <if_stmt pos:start="135:5" pos:end="159:5"><if pos:start="135:5" pos:end="159:5">if <condition pos:start="135:8" pos:end="139:36">(<expr pos:start="135:9" pos:end="139:35"><name pos:start="135:9" pos:end="135:21">cursor_offset</name> <operator pos:start="135:23" pos:end="135:24">!=</operator> <name pos:start="135:26" pos:end="135:41"><name pos:start="135:26" pos:end="135:26">s</name><operator pos:start="135:27" pos:end="135:28">-&gt;</operator><name pos:start="135:29" pos:end="135:41">cursor_offset</name></name> <operator pos:start="135:43" pos:end="135:44">||</operator>

        <name pos:start="137:9" pos:end="137:18"><name pos:start="137:9" pos:end="137:9">s</name><operator pos:start="137:10" pos:end="137:11">-&gt;</operator><name pos:start="137:12" pos:end="137:13">cr</name><index pos:start="137:14" pos:end="137:18">[<expr pos:start="137:15" pos:end="137:17"><literal type="number" pos:start="137:15" pos:end="137:17">0xa</literal></expr>]</index></name> <operator pos:start="137:20" pos:end="137:21">!=</operator> <name pos:start="137:23" pos:end="137:37"><name pos:start="137:23" pos:end="137:23">s</name><operator pos:start="137:24" pos:end="137:25">-&gt;</operator><name pos:start="137:26" pos:end="137:37">cursor_start</name></name> <operator pos:start="137:39" pos:end="137:40">||</operator>

        <name pos:start="139:9" pos:end="139:18"><name pos:start="139:9" pos:end="139:9">s</name><operator pos:start="139:10" pos:end="139:11">-&gt;</operator><name pos:start="139:12" pos:end="139:13">cr</name><index pos:start="139:14" pos:end="139:18">[<expr pos:start="139:15" pos:end="139:17"><literal type="number" pos:start="139:15" pos:end="139:17">0xb</literal></expr>]</index></name> <operator pos:start="139:20" pos:end="139:21">!=</operator> <name pos:start="139:23" pos:end="139:35"><name pos:start="139:23" pos:end="139:23">s</name><operator pos:start="139:24" pos:end="139:25">-&gt;</operator><name pos:start="139:26" pos:end="139:35">cursor_end</name></name></expr>)</condition> <block pos:start="139:38" pos:end="159:5">{<block_content pos:start="145:9" pos:end="157:35">

      <comment type="block" pos:start="141:7" pos:end="143:17">/* if the cursor position changed, we update the old and new

         chars */</comment>

        <if_stmt pos:start="145:9" pos:end="147:51"><if pos:start="145:9" pos:end="147:51">if <condition pos:start="145:12" pos:end="145:44">(<expr pos:start="145:13" pos:end="145:43"><name pos:start="145:13" pos:end="145:28"><name pos:start="145:13" pos:end="145:13">s</name><operator pos:start="145:14" pos:end="145:15">-&gt;</operator><name pos:start="145:16" pos:end="145:28">cursor_offset</name></name> <operator pos:start="145:30" pos:end="145:30">&lt;</operator> <name pos:start="145:32" pos:end="145:43">CH_ATTR_SIZE</name></expr>)</condition><block type="pseudo" pos:start="147:13" pos:end="147:51"><block_content pos:start="147:13" pos:end="147:51">

            <expr_stmt pos:start="147:13" pos:end="147:51"><expr pos:start="147:13" pos:end="147:50"><name pos:start="147:13" pos:end="147:45"><name pos:start="147:13" pos:end="147:13">s</name><operator pos:start="147:14" pos:end="147:15">-&gt;</operator><name pos:start="147:16" pos:end="147:27">last_ch_attr</name><index pos:start="147:28" pos:end="147:45">[<expr pos:start="147:29" pos:end="147:44"><name pos:start="147:29" pos:end="147:44"><name pos:start="147:29" pos:end="147:29">s</name><operator pos:start="147:30" pos:end="147:31">-&gt;</operator><name pos:start="147:32" pos:end="147:44">cursor_offset</name></name></expr>]</index></name> <operator pos:start="147:47" pos:end="147:47">=</operator> <operator pos:start="147:49" pos:end="147:49">-</operator><literal type="number" pos:start="147:50" pos:end="147:50">1</literal></expr>;</expr_stmt></block_content></block></if></if_stmt>

        <if_stmt pos:start="149:9" pos:end="151:48"><if pos:start="149:9" pos:end="151:48">if <condition pos:start="149:12" pos:end="149:41">(<expr pos:start="149:13" pos:end="149:40"><name pos:start="149:13" pos:end="149:25">cursor_offset</name> <operator pos:start="149:27" pos:end="149:27">&lt;</operator> <name pos:start="149:29" pos:end="149:40">CH_ATTR_SIZE</name></expr>)</condition><block type="pseudo" pos:start="151:13" pos:end="151:48"><block_content pos:start="151:13" pos:end="151:48">

            <expr_stmt pos:start="151:13" pos:end="151:48"><expr pos:start="151:13" pos:end="151:47"><name pos:start="151:13" pos:end="151:42"><name pos:start="151:13" pos:end="151:13">s</name><operator pos:start="151:14" pos:end="151:15">-&gt;</operator><name pos:start="151:16" pos:end="151:27">last_ch_attr</name><index pos:start="151:28" pos:end="151:42">[<expr pos:start="151:29" pos:end="151:41"><name pos:start="151:29" pos:end="151:41">cursor_offset</name></expr>]</index></name> <operator pos:start="151:44" pos:end="151:44">=</operator> <operator pos:start="151:46" pos:end="151:46">-</operator><literal type="number" pos:start="151:47" pos:end="151:47">1</literal></expr>;</expr_stmt></block_content></block></if></if_stmt>

        <expr_stmt pos:start="153:9" pos:end="153:41"><expr pos:start="153:9" pos:end="153:40"><name pos:start="153:9" pos:end="153:24"><name pos:start="153:9" pos:end="153:9">s</name><operator pos:start="153:10" pos:end="153:11">-&gt;</operator><name pos:start="153:12" pos:end="153:24">cursor_offset</name></name> <operator pos:start="153:26" pos:end="153:26">=</operator> <name pos:start="153:28" pos:end="153:40">cursor_offset</name></expr>;</expr_stmt>

        <expr_stmt pos:start="155:9" pos:end="155:37"><expr pos:start="155:9" pos:end="155:36"><name pos:start="155:9" pos:end="155:23"><name pos:start="155:9" pos:end="155:9">s</name><operator pos:start="155:10" pos:end="155:11">-&gt;</operator><name pos:start="155:12" pos:end="155:23">cursor_start</name></name> <operator pos:start="155:25" pos:end="155:25">=</operator> <name pos:start="155:27" pos:end="155:36"><name pos:start="155:27" pos:end="155:27">s</name><operator pos:start="155:28" pos:end="155:29">-&gt;</operator><name pos:start="155:30" pos:end="155:31">cr</name><index pos:start="155:32" pos:end="155:36">[<expr pos:start="155:33" pos:end="155:35"><literal type="number" pos:start="155:33" pos:end="155:35">0xa</literal></expr>]</index></name></expr>;</expr_stmt>

        <expr_stmt pos:start="157:9" pos:end="157:35"><expr pos:start="157:9" pos:end="157:34"><name pos:start="157:9" pos:end="157:21"><name pos:start="157:9" pos:end="157:9">s</name><operator pos:start="157:10" pos:end="157:11">-&gt;</operator><name pos:start="157:12" pos:end="157:21">cursor_end</name></name> <operator pos:start="157:23" pos:end="157:23">=</operator> <name pos:start="157:25" pos:end="157:34"><name pos:start="157:25" pos:end="157:25">s</name><operator pos:start="157:26" pos:end="157:27">-&gt;</operator><name pos:start="157:28" pos:end="157:29">cr</name><index pos:start="157:30" pos:end="157:34">[<expr pos:start="157:31" pos:end="157:33"><literal type="number" pos:start="157:31" pos:end="157:33">0xb</literal></expr>]</index></name></expr>;</expr_stmt>

    </block_content>}</block></if></if_stmt>

    <expr_stmt pos:start="161:5" pos:end="161:67"><expr pos:start="161:5" pos:end="161:66"><name pos:start="161:5" pos:end="161:14">cursor_ptr</name> <operator pos:start="161:16" pos:end="161:16">=</operator> <name pos:start="161:18" pos:end="161:28"><name pos:start="161:18" pos:end="161:18">s</name><operator pos:start="161:19" pos:end="161:20">-&gt;</operator><name pos:start="161:21" pos:end="161:28">vram_ptr</name></name> <operator pos:start="161:30" pos:end="161:30">+</operator> <operator pos:start="161:32" pos:end="161:32">(</operator><name pos:start="161:33" pos:end="161:45"><name pos:start="161:33" pos:end="161:33">s</name><operator pos:start="161:34" pos:end="161:35">-&gt;</operator><name pos:start="161:36" pos:end="161:45">start_addr</name></name> <operator pos:start="161:47" pos:end="161:47">+</operator> <name pos:start="161:49" pos:end="161:61">cursor_offset</name><operator pos:start="161:62" pos:end="161:62">)</operator> <operator pos:start="161:64" pos:end="161:64">*</operator> <literal type="number" pos:start="161:66" pos:end="161:66">4</literal></expr>;</expr_stmt>



    <expr_stmt pos:start="165:5" pos:end="165:41"><expr pos:start="165:5" pos:end="165:40"><name pos:start="165:5" pos:end="165:15">depth_index</name> <operator pos:start="165:17" pos:end="165:17">=</operator> <call pos:start="165:19" pos:end="165:40"><name pos:start="165:19" pos:end="165:33">get_depth_index</name><argument_list pos:start="165:34" pos:end="165:40">(<argument pos:start="165:35" pos:end="165:39"><expr pos:start="165:35" pos:end="165:39"><name pos:start="165:35" pos:end="165:39"><name pos:start="165:35" pos:end="165:35">s</name><operator pos:start="165:36" pos:end="165:37">-&gt;</operator><name pos:start="165:38" pos:end="165:39">ds</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    <if_stmt pos:start="167:5" pos:end="173:61"><if pos:start="167:5" pos:end="169:62">if <condition pos:start="167:8" pos:end="167:17">(<expr pos:start="167:9" pos:end="167:16"><name pos:start="167:9" pos:end="167:10">cw</name> <operator pos:start="167:12" pos:end="167:13">==</operator> <literal type="number" pos:start="167:15" pos:end="167:16">16</literal></expr>)</condition><block type="pseudo" pos:start="169:9" pos:end="169:62"><block_content pos:start="169:9" pos:end="169:62">

        <expr_stmt pos:start="169:9" pos:end="169:62"><expr pos:start="169:9" pos:end="169:61"><name pos:start="169:9" pos:end="169:23">vga_draw_glyph8</name> <operator pos:start="169:25" pos:end="169:25">=</operator> <name pos:start="169:27" pos:end="169:61"><name pos:start="169:27" pos:end="169:48">vga_draw_glyph16_table</name><index pos:start="169:49" pos:end="169:61">[<expr pos:start="169:50" pos:end="169:60"><name pos:start="169:50" pos:end="169:60">depth_index</name></expr>]</index></name></expr>;</expr_stmt></block_content></block></if>

    <else pos:start="171:5" pos:end="173:61">else<block type="pseudo" pos:start="173:9" pos:end="173:61"><block_content pos:start="173:9" pos:end="173:61">

        <expr_stmt pos:start="173:9" pos:end="173:61"><expr pos:start="173:9" pos:end="173:60"><name pos:start="173:9" pos:end="173:23">vga_draw_glyph8</name> <operator pos:start="173:25" pos:end="173:25">=</operator> <name pos:start="173:27" pos:end="173:60"><name pos:start="173:27" pos:end="173:47">vga_draw_glyph8_table</name><index pos:start="173:48" pos:end="173:60">[<expr pos:start="173:49" pos:end="173:59"><name pos:start="173:49" pos:end="173:59">depth_index</name></expr>]</index></name></expr>;</expr_stmt></block_content></block></else></if_stmt>

    <expr_stmt pos:start="175:5" pos:end="175:57"><expr pos:start="175:5" pos:end="175:56"><name pos:start="175:5" pos:end="175:19">vga_draw_glyph9</name> <operator pos:start="175:21" pos:end="175:21">=</operator> <name pos:start="175:23" pos:end="175:56"><name pos:start="175:23" pos:end="175:43">vga_draw_glyph9_table</name><index pos:start="175:44" pos:end="175:56">[<expr pos:start="175:45" pos:end="175:55"><name pos:start="175:45" pos:end="175:55">depth_index</name></expr>]</index></name></expr>;</expr_stmt>



    <expr_stmt pos:start="179:5" pos:end="179:30"><expr pos:start="179:5" pos:end="179:29"><name pos:start="179:5" pos:end="179:8">dest</name> <operator pos:start="179:10" pos:end="179:10">=</operator> <call pos:start="179:12" pos:end="179:29"><name pos:start="179:12" pos:end="179:22">ds_get_data</name><argument_list pos:start="179:23" pos:end="179:29">(<argument pos:start="179:24" pos:end="179:28"><expr pos:start="179:24" pos:end="179:28"><name pos:start="179:24" pos:end="179:28"><name pos:start="179:24" pos:end="179:24">s</name><operator pos:start="179:25" pos:end="179:26">-&gt;</operator><name pos:start="179:27" pos:end="179:28">ds</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    <expr_stmt pos:start="181:5" pos:end="181:38"><expr pos:start="181:5" pos:end="181:37"><name pos:start="181:5" pos:end="181:12">linesize</name> <operator pos:start="181:14" pos:end="181:14">=</operator> <call pos:start="181:16" pos:end="181:37"><name pos:start="181:16" pos:end="181:30">ds_get_linesize</name><argument_list pos:start="181:31" pos:end="181:37">(<argument pos:start="181:32" pos:end="181:36"><expr pos:start="181:32" pos:end="181:36"><name pos:start="181:32" pos:end="181:36"><name pos:start="181:32" pos:end="181:32">s</name><operator pos:start="181:33" pos:end="181:34">-&gt;</operator><name pos:start="181:35" pos:end="181:36">ds</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    <expr_stmt pos:start="183:5" pos:end="183:34"><expr pos:start="183:5" pos:end="183:33"><name pos:start="183:5" pos:end="183:15">ch_attr_ptr</name> <operator pos:start="183:17" pos:end="183:17">=</operator> <name pos:start="183:19" pos:end="183:33"><name pos:start="183:19" pos:end="183:19">s</name><operator pos:start="183:20" pos:end="183:21">-&gt;</operator><name pos:start="183:22" pos:end="183:33">last_ch_attr</name></name></expr>;</expr_stmt>

    <for pos:start="185:5" pos:end="317:5">for<control pos:start="185:8" pos:end="185:34">(<init pos:start="185:9" pos:end="185:15"><expr pos:start="185:9" pos:end="185:14"><name pos:start="185:9" pos:end="185:10">cy</name> <operator pos:start="185:12" pos:end="185:12">=</operator> <literal type="number" pos:start="185:14" pos:end="185:14">0</literal></expr>;</init> <condition pos:start="185:17" pos:end="185:28"><expr pos:start="185:17" pos:end="185:27"><name pos:start="185:17" pos:end="185:18">cy</name> <operator pos:start="185:20" pos:end="185:20">&lt;</operator> <name pos:start="185:22" pos:end="185:27">height</name></expr>;</condition> <incr pos:start="185:30" pos:end="185:33"><expr pos:start="185:30" pos:end="185:33"><name pos:start="185:30" pos:end="185:31">cy</name><operator pos:start="185:32" pos:end="185:33">++</operator></expr></incr>)</control> <block pos:start="185:36" pos:end="317:5">{<block_content pos:start="187:9" pos:end="315:26">

        <expr_stmt pos:start="187:9" pos:end="187:18"><expr pos:start="187:9" pos:end="187:17"><name pos:start="187:9" pos:end="187:10">d1</name> <operator pos:start="187:12" pos:end="187:12">=</operator> <name pos:start="187:14" pos:end="187:17">dest</name></expr>;</expr_stmt>

        <expr_stmt pos:start="189:9" pos:end="189:17"><expr pos:start="189:9" pos:end="189:16"><name pos:start="189:9" pos:end="189:11">src</name> <operator pos:start="189:13" pos:end="189:13">=</operator> <name pos:start="189:15" pos:end="189:16">s1</name></expr>;</expr_stmt>

        <expr_stmt pos:start="191:9" pos:end="191:23"><expr pos:start="191:9" pos:end="191:22"><name pos:start="191:9" pos:end="191:14">cx_min</name> <operator pos:start="191:16" pos:end="191:16">=</operator> <name pos:start="191:18" pos:end="191:22">width</name></expr>;</expr_stmt>

        <expr_stmt pos:start="193:9" pos:end="193:20"><expr pos:start="193:9" pos:end="193:19"><name pos:start="193:9" pos:end="193:14">cx_max</name> <operator pos:start="193:16" pos:end="193:16">=</operator> <operator pos:start="193:18" pos:end="193:18">-</operator><literal type="number" pos:start="193:19" pos:end="193:19">1</literal></expr>;</expr_stmt>

        <for pos:start="195:9" pos:end="303:9">for<control pos:start="195:12" pos:end="195:37">(<init pos:start="195:13" pos:end="195:19"><expr pos:start="195:13" pos:end="195:18"><name pos:start="195:13" pos:end="195:14">cx</name> <operator pos:start="195:16" pos:end="195:16">=</operator> <literal type="number" pos:start="195:18" pos:end="195:18">0</literal></expr>;</init> <condition pos:start="195:21" pos:end="195:31"><expr pos:start="195:21" pos:end="195:30"><name pos:start="195:21" pos:end="195:22">cx</name> <operator pos:start="195:24" pos:end="195:24">&lt;</operator> <name pos:start="195:26" pos:end="195:30">width</name></expr>;</condition> <incr pos:start="195:33" pos:end="195:36"><expr pos:start="195:33" pos:end="195:36"><name pos:start="195:33" pos:end="195:34">cx</name><operator pos:start="195:35" pos:end="195:36">++</operator></expr></incr>)</control> <block pos:start="195:39" pos:end="303:9">{<block_content pos:start="197:13" pos:end="301:26">

            <expr_stmt pos:start="197:13" pos:end="197:39"><expr pos:start="197:13" pos:end="197:38"><name pos:start="197:13" pos:end="197:19">ch_attr</name> <operator pos:start="197:21" pos:end="197:21">=</operator> <operator pos:start="197:23" pos:end="197:23">*</operator><operator pos:start="197:24" pos:end="197:24">(</operator><name pos:start="197:25" pos:end="197:32">uint16_t</name> <operator pos:start="197:34" pos:end="197:34">*</operator><operator pos:start="197:35" pos:end="197:35">)</operator><name pos:start="197:36" pos:end="197:38">src</name></expr>;</expr_stmt>

            <if_stmt pos:start="199:13" pos:end="295:13"><if pos:start="199:13" pos:end="295:13">if <condition pos:start="199:16" pos:end="199:55">(<expr pos:start="199:17" pos:end="199:54"><name pos:start="199:17" pos:end="199:27">full_update</name> <operator pos:start="199:29" pos:end="199:30">||</operator> <name pos:start="199:32" pos:end="199:38">ch_attr</name> <operator pos:start="199:40" pos:end="199:41">!=</operator> <operator pos:start="199:43" pos:end="199:43">*</operator><name pos:start="199:44" pos:end="199:54">ch_attr_ptr</name></expr>)</condition> <block pos:start="199:57" pos:end="295:13">{<block_content pos:start="201:17" pos:end="293:17">

                <if_stmt pos:start="201:17" pos:end="203:32"><if pos:start="201:17" pos:end="203:32">if <condition pos:start="201:20" pos:end="201:32">(<expr pos:start="201:21" pos:end="201:31"><name pos:start="201:21" pos:end="201:22">cx</name> <operator pos:start="201:24" pos:end="201:24">&lt;</operator> <name pos:start="201:26" pos:end="201:31">cx_min</name></expr>)</condition><block type="pseudo" pos:start="203:21" pos:end="203:32"><block_content pos:start="203:21" pos:end="203:32">

                    <expr_stmt pos:start="203:21" pos:end="203:32"><expr pos:start="203:21" pos:end="203:31"><name pos:start="203:21" pos:end="203:26">cx_min</name> <operator pos:start="203:28" pos:end="203:28">=</operator> <name pos:start="203:30" pos:end="203:31">cx</name></expr>;</expr_stmt></block_content></block></if></if_stmt>

                <if_stmt pos:start="205:17" pos:end="207:32"><if pos:start="205:17" pos:end="207:32">if <condition pos:start="205:20" pos:end="205:32">(<expr pos:start="205:21" pos:end="205:31"><name pos:start="205:21" pos:end="205:22">cx</name> <operator pos:start="205:24" pos:end="205:24">&gt;</operator> <name pos:start="205:26" pos:end="205:31">cx_max</name></expr>)</condition><block type="pseudo" pos:start="207:21" pos:end="207:32"><block_content pos:start="207:21" pos:end="207:32">

                    <expr_stmt pos:start="207:21" pos:end="207:32"><expr pos:start="207:21" pos:end="207:31"><name pos:start="207:21" pos:end="207:26">cx_max</name> <operator pos:start="207:28" pos:end="207:28">=</operator> <name pos:start="207:30" pos:end="207:31">cx</name></expr>;</expr_stmt></block_content></block></if></if_stmt>

                <expr_stmt pos:start="209:17" pos:end="212:0"><expr pos:start="209:17" pos:end="209:38"><operator pos:start="209:17" pos:end="209:17">*</operator><name pos:start="209:18" pos:end="209:28">ch_attr_ptr</name> <operator pos:start="209:30" pos:end="209:30">=</operator> <name pos:start="209:32" pos:end="209:38">ch_attr</name></expr>;</expr_stmt>

<cpp:ifdef pos:start="211:1" pos:end="211:22">#<cpp:directive pos:start="211:2" pos:end="211:6">ifdef</cpp:directive> <name pos:start="211:8" pos:end="211:22">WORDS_BIGENDIAN</name></cpp:ifdef>

                <expr_stmt pos:start="213:17" pos:end="213:34"><expr pos:start="213:17" pos:end="213:33"><name pos:start="213:17" pos:end="213:18">ch</name> <operator pos:start="213:20" pos:end="213:20">=</operator> <name pos:start="213:22" pos:end="213:28">ch_attr</name> <operator pos:start="213:30" pos:end="213:31">&gt;&gt;</operator> <literal type="number" pos:start="213:33" pos:end="213:33">8</literal></expr>;</expr_stmt>

                <expr_stmt pos:start="215:17" pos:end="218:0"><expr pos:start="215:17" pos:end="215:38"><name pos:start="215:17" pos:end="215:21">cattr</name> <operator pos:start="215:23" pos:end="215:23">=</operator> <name pos:start="215:25" pos:end="215:31">ch_attr</name> <operator pos:start="215:33" pos:end="215:33">&amp;</operator> <literal type="number" pos:start="215:35" pos:end="215:38">0xff</literal></expr>;</expr_stmt>

<cpp:else pos:start="217:1" pos:end="217:5">#<cpp:directive pos:start="217:2" pos:end="217:5">else</cpp:directive></cpp:else>

                <expr_stmt pos:start="219:17" pos:end="219:36"><expr pos:start="219:17" pos:end="219:35"><name pos:start="219:17" pos:end="219:18">ch</name> <operator pos:start="219:20" pos:end="219:20">=</operator> <name pos:start="219:22" pos:end="219:28">ch_attr</name> <operator pos:start="219:30" pos:end="219:30">&amp;</operator> <literal type="number" pos:start="219:32" pos:end="219:35">0xff</literal></expr>;</expr_stmt>

                <expr_stmt pos:start="221:17" pos:end="224:0"><expr pos:start="221:17" pos:end="221:36"><name pos:start="221:17" pos:end="221:21">cattr</name> <operator pos:start="221:23" pos:end="221:23">=</operator> <name pos:start="221:25" pos:end="221:31">ch_attr</name> <operator pos:start="221:33" pos:end="221:34">&gt;&gt;</operator> <literal type="number" pos:start="221:36" pos:end="221:36">8</literal></expr>;</expr_stmt>

<cpp:endif pos:start="223:1" pos:end="223:6">#<cpp:directive pos:start="223:2" pos:end="223:6">endif</cpp:directive></cpp:endif>

                <expr_stmt pos:start="225:17" pos:end="225:55"><expr pos:start="225:17" pos:end="225:54"><name pos:start="225:17" pos:end="225:24">font_ptr</name> <operator pos:start="225:26" pos:end="225:26">=</operator> <name pos:start="225:28" pos:end="225:54"><name pos:start="225:28" pos:end="225:36">font_base</name><index pos:start="225:37" pos:end="225:54">[<expr pos:start="225:38" pos:end="225:53"><operator pos:start="225:38" pos:end="225:38">(</operator><name pos:start="225:39" pos:end="225:43">cattr</name> <operator pos:start="225:45" pos:end="225:46">&gt;&gt;</operator> <literal type="number" pos:start="225:48" pos:end="225:48">3</literal><operator pos:start="225:49" pos:end="225:49">)</operator> <operator pos:start="225:51" pos:end="225:51">&amp;</operator> <literal type="number" pos:start="225:53" pos:end="225:53">1</literal></expr>]</index></name></expr>;</expr_stmt>

                <expr_stmt pos:start="227:17" pos:end="227:40"><expr pos:start="227:17" pos:end="227:39"><name pos:start="227:17" pos:end="227:24">font_ptr</name> <operator pos:start="227:26" pos:end="227:27">+=</operator> <literal type="number" pos:start="227:29" pos:end="227:30">32</literal> <operator pos:start="227:32" pos:end="227:32">*</operator> <literal type="number" pos:start="227:34" pos:end="227:34">4</literal> <operator pos:start="227:36" pos:end="227:36">*</operator> <name pos:start="227:38" pos:end="227:39">ch</name></expr>;</expr_stmt>

                <expr_stmt pos:start="229:17" pos:end="229:44"><expr pos:start="229:17" pos:end="229:43"><name pos:start="229:17" pos:end="229:21">bgcol</name> <operator pos:start="229:23" pos:end="229:23">=</operator> <name pos:start="229:25" pos:end="229:43"><name pos:start="229:25" pos:end="229:31">palette</name><index pos:start="229:32" pos:end="229:43">[<expr pos:start="229:33" pos:end="229:42"><name pos:start="229:33" pos:end="229:37">cattr</name> <operator pos:start="229:39" pos:end="229:40">&gt;&gt;</operator> <literal type="number" pos:start="229:42" pos:end="229:42">4</literal></expr>]</index></name></expr>;</expr_stmt>

                <expr_stmt pos:start="231:17" pos:end="231:46"><expr pos:start="231:17" pos:end="231:45"><name pos:start="231:17" pos:end="231:21">fgcol</name> <operator pos:start="231:23" pos:end="231:23">=</operator> <name pos:start="231:25" pos:end="231:45"><name pos:start="231:25" pos:end="231:31">palette</name><index pos:start="231:32" pos:end="231:45">[<expr pos:start="231:33" pos:end="231:44"><name pos:start="231:33" pos:end="231:37">cattr</name> <operator pos:start="231:39" pos:end="231:39">&amp;</operator> <literal type="number" pos:start="231:41" pos:end="231:44">0x0f</literal></expr>]</index></name></expr>;</expr_stmt>

                <if_stmt pos:start="233:17" pos:end="251:17"><if pos:start="233:17" pos:end="239:17">if <condition pos:start="233:20" pos:end="233:28">(<expr pos:start="233:21" pos:end="233:27"><name pos:start="233:21" pos:end="233:22">cw</name> <operator pos:start="233:24" pos:end="233:25">!=</operator> <literal type="number" pos:start="233:27" pos:end="233:27">9</literal></expr>)</condition> <block pos:start="233:30" pos:end="239:17">{<block_content pos:start="235:21" pos:end="237:69">

                    <expr_stmt pos:start="235:21" pos:end="237:69"><expr pos:start="235:21" pos:end="237:68"><call pos:start="235:21" pos:end="237:68"><name pos:start="235:21" pos:end="235:35">vga_draw_glyph8</name><argument_list pos:start="235:36" pos:end="237:68">(<argument pos:start="235:37" pos:end="235:38"><expr pos:start="235:37" pos:end="235:38"><name pos:start="235:37" pos:end="235:38">d1</name></expr></argument>, <argument pos:start="235:41" pos:end="235:48"><expr pos:start="235:41" pos:end="235:48"><name pos:start="235:41" pos:end="235:48">linesize</name></expr></argument>,

                                    <argument pos:start="237:37" pos:end="237:44"><expr pos:start="237:37" pos:end="237:44"><name pos:start="237:37" pos:end="237:44">font_ptr</name></expr></argument>, <argument pos:start="237:47" pos:end="237:53"><expr pos:start="237:47" pos:end="237:53"><name pos:start="237:47" pos:end="237:53">cheight</name></expr></argument>, <argument pos:start="237:56" pos:end="237:60"><expr pos:start="237:56" pos:end="237:60"><name pos:start="237:56" pos:end="237:60">fgcol</name></expr></argument>, <argument pos:start="237:63" pos:end="237:67"><expr pos:start="237:63" pos:end="237:67"><name pos:start="237:63" pos:end="237:67">bgcol</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

                </block_content>}</block></if> <else pos:start="239:19" pos:end="251:17">else <block pos:start="239:24" pos:end="251:17">{<block_content pos:start="241:21" pos:end="249:75">

                    <expr_stmt pos:start="241:21" pos:end="241:29"><expr pos:start="241:21" pos:end="241:28"><name pos:start="241:21" pos:end="241:24">dup9</name> <operator pos:start="241:26" pos:end="241:26">=</operator> <literal type="number" pos:start="241:28" pos:end="241:28">0</literal></expr>;</expr_stmt>

                    <if_stmt pos:start="243:21" pos:end="245:33"><if pos:start="243:21" pos:end="245:33">if <condition pos:start="243:24" pos:end="243:73">(<expr pos:start="243:25" pos:end="243:72"><name pos:start="243:25" pos:end="243:26">ch</name> <operator pos:start="243:28" pos:end="243:29">&gt;=</operator> <literal type="number" pos:start="243:31" pos:end="243:34">0xb0</literal> <operator pos:start="243:36" pos:end="243:37">&amp;&amp;</operator> <name pos:start="243:39" pos:end="243:40">ch</name> <operator pos:start="243:42" pos:end="243:43">&lt;=</operator> <literal type="number" pos:start="243:45" pos:end="243:48">0xdf</literal> <operator pos:start="243:50" pos:end="243:51">&amp;&amp;</operator> <operator pos:start="243:53" pos:end="243:53">(</operator><name pos:start="243:54" pos:end="243:64"><name pos:start="243:54" pos:end="243:54">s</name><operator pos:start="243:55" pos:end="243:56">-&gt;</operator><name pos:start="243:57" pos:end="243:58">ar</name><index pos:start="243:59" pos:end="243:64">[<expr pos:start="243:60" pos:end="243:63"><literal type="number" pos:start="243:60" pos:end="243:63">0x10</literal></expr>]</index></name> <operator pos:start="243:66" pos:end="243:66">&amp;</operator> <literal type="number" pos:start="243:68" pos:end="243:71">0x04</literal><operator pos:start="243:72" pos:end="243:72">)</operator></expr>)</condition><block type="pseudo" pos:start="245:25" pos:end="245:33"><block_content pos:start="245:25" pos:end="245:33">

                        <expr_stmt pos:start="245:25" pos:end="245:33"><expr pos:start="245:25" pos:end="245:32"><name pos:start="245:25" pos:end="245:28">dup9</name> <operator pos:start="245:30" pos:end="245:30">=</operator> <literal type="number" pos:start="245:32" pos:end="245:32">1</literal></expr>;</expr_stmt></block_content></block></if></if_stmt>

                    <expr_stmt pos:start="247:21" pos:end="249:75"><expr pos:start="247:21" pos:end="249:74"><call pos:start="247:21" pos:end="249:74"><name pos:start="247:21" pos:end="247:35">vga_draw_glyph9</name><argument_list pos:start="247:36" pos:end="249:74">(<argument pos:start="247:37" pos:end="247:38"><expr pos:start="247:37" pos:end="247:38"><name pos:start="247:37" pos:end="247:38">d1</name></expr></argument>, <argument pos:start="247:41" pos:end="247:48"><expr pos:start="247:41" pos:end="247:48"><name pos:start="247:41" pos:end="247:48">linesize</name></expr></argument>,

                                    <argument pos:start="249:37" pos:end="249:44"><expr pos:start="249:37" pos:end="249:44"><name pos:start="249:37" pos:end="249:44">font_ptr</name></expr></argument>, <argument pos:start="249:47" pos:end="249:53"><expr pos:start="249:47" pos:end="249:53"><name pos:start="249:47" pos:end="249:53">cheight</name></expr></argument>, <argument pos:start="249:56" pos:end="249:60"><expr pos:start="249:56" pos:end="249:60"><name pos:start="249:56" pos:end="249:60">fgcol</name></expr></argument>, <argument pos:start="249:63" pos:end="249:67"><expr pos:start="249:63" pos:end="249:67"><name pos:start="249:63" pos:end="249:67">bgcol</name></expr></argument>, <argument pos:start="249:70" pos:end="249:73"><expr pos:start="249:70" pos:end="249:73"><name pos:start="249:70" pos:end="249:73">dup9</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

                </block_content>}</block></else></if_stmt>

                <if_stmt pos:start="253:17" pos:end="293:17"><if pos:start="253:17" pos:end="293:17">if <condition pos:start="253:20" pos:end="255:42">(<expr pos:start="253:21" pos:end="255:41"><name pos:start="253:21" pos:end="253:23">src</name> <operator pos:start="253:25" pos:end="253:26">==</operator> <name pos:start="253:28" pos:end="253:37">cursor_ptr</name> <operator pos:start="253:39" pos:end="253:40">&amp;&amp;</operator>

                    <operator pos:start="255:21" pos:end="255:21">!</operator><operator pos:start="255:22" pos:end="255:22">(</operator><name pos:start="255:23" pos:end="255:33"><name pos:start="255:23" pos:end="255:23">s</name><operator pos:start="255:24" pos:end="255:25">-&gt;</operator><name pos:start="255:26" pos:end="255:27">cr</name><index pos:start="255:28" pos:end="255:33">[<expr pos:start="255:29" pos:end="255:32"><literal type="number" pos:start="255:29" pos:end="255:32">0x0a</literal></expr>]</index></name> <operator pos:start="255:35" pos:end="255:35">&amp;</operator> <literal type="number" pos:start="255:37" pos:end="255:40">0x20</literal><operator pos:start="255:41" pos:end="255:41">)</operator></expr>)</condition> <block pos:start="255:44" pos:end="293:17">{<block_content pos:start="257:21" pos:end="291:21">

                    <decl_stmt pos:start="257:21" pos:end="257:49"><decl pos:start="257:21" pos:end="257:34"><type pos:start="257:21" pos:end="257:23"><name pos:start="257:21" pos:end="257:23">int</name></type> <name pos:start="257:25" pos:end="257:34">line_start</name></decl>, <decl pos:start="257:37" pos:end="257:45"><type ref="prev" pos:start="257:21" pos:end="257:23"/><name pos:start="257:37" pos:end="257:45">line_last</name></decl>, <decl pos:start="257:48" pos:end="257:48"><type ref="prev" pos:start="257:21" pos:end="257:23"/><name pos:start="257:48" pos:end="257:48">h</name></decl>;</decl_stmt>

                    <comment type="block" pos:start="259:21" pos:end="259:41">/* draw the cursor */</comment>

                    <expr_stmt pos:start="261:21" pos:end="261:52"><expr pos:start="261:21" pos:end="261:51"><name pos:start="261:21" pos:end="261:30">line_start</name> <operator pos:start="261:32" pos:end="261:32">=</operator> <name pos:start="261:34" pos:end="261:44"><name pos:start="261:34" pos:end="261:34">s</name><operator pos:start="261:35" pos:end="261:36">-&gt;</operator><name pos:start="261:37" pos:end="261:38">cr</name><index pos:start="261:39" pos:end="261:44">[<expr pos:start="261:40" pos:end="261:43"><literal type="number" pos:start="261:40" pos:end="261:43">0x0a</literal></expr>]</index></name> <operator pos:start="261:46" pos:end="261:46">&amp;</operator> <literal type="number" pos:start="261:48" pos:end="261:51">0x1f</literal></expr>;</expr_stmt>

                    <expr_stmt pos:start="263:21" pos:end="263:51"><expr pos:start="263:21" pos:end="263:50"><name pos:start="263:21" pos:end="263:29">line_last</name> <operator pos:start="263:31" pos:end="263:31">=</operator> <name pos:start="263:33" pos:end="263:43"><name pos:start="263:33" pos:end="263:33">s</name><operator pos:start="263:34" pos:end="263:35">-&gt;</operator><name pos:start="263:36" pos:end="263:37">cr</name><index pos:start="263:38" pos:end="263:43">[<expr pos:start="263:39" pos:end="263:42"><literal type="number" pos:start="263:39" pos:end="263:42">0x0b</literal></expr>]</index></name> <operator pos:start="263:45" pos:end="263:45">&amp;</operator> <literal type="number" pos:start="263:47" pos:end="263:50">0x1f</literal></expr>;</expr_stmt>

                    <comment type="block" pos:start="265:21" pos:end="265:41">/* XXX: check that */</comment>

                    <if_stmt pos:start="267:21" pos:end="269:48"><if pos:start="267:21" pos:end="269:48">if <condition pos:start="267:24" pos:end="267:48">(<expr pos:start="267:25" pos:end="267:47"><name pos:start="267:25" pos:end="267:33">line_last</name> <operator pos:start="267:35" pos:end="267:35">&gt;</operator> <name pos:start="267:37" pos:end="267:43">cheight</name> <operator pos:start="267:45" pos:end="267:45">-</operator> <literal type="number" pos:start="267:47" pos:end="267:47">1</literal></expr>)</condition><block type="pseudo" pos:start="269:25" pos:end="269:48"><block_content pos:start="269:25" pos:end="269:48">

                        <expr_stmt pos:start="269:25" pos:end="269:48"><expr pos:start="269:25" pos:end="269:47"><name pos:start="269:25" pos:end="269:33">line_last</name> <operator pos:start="269:35" pos:end="269:35">=</operator> <name pos:start="269:37" pos:end="269:43">cheight</name> <operator pos:start="269:45" pos:end="269:45">-</operator> <literal type="number" pos:start="269:47" pos:end="269:47">1</literal></expr>;</expr_stmt></block_content></block></if></if_stmt>

                    <if_stmt pos:start="271:21" pos:end="291:21"><if pos:start="271:21" pos:end="291:21">if <condition pos:start="271:24" pos:end="271:72">(<expr pos:start="271:25" pos:end="271:71"><name pos:start="271:25" pos:end="271:33">line_last</name> <operator pos:start="271:35" pos:end="271:36">&gt;=</operator> <name pos:start="271:38" pos:end="271:47">line_start</name> <operator pos:start="271:49" pos:end="271:50">&amp;&amp;</operator> <name pos:start="271:52" pos:end="271:61">line_start</name> <operator pos:start="271:63" pos:end="271:63">&lt;</operator> <name pos:start="271:65" pos:end="271:71">cheight</name></expr>)</condition> <block pos:start="271:74" pos:end="291:21">{<block_content pos:start="273:25" pos:end="289:25">

                        <expr_stmt pos:start="273:25" pos:end="273:55"><expr pos:start="273:25" pos:end="273:54"><name pos:start="273:25" pos:end="273:25">h</name> <operator pos:start="273:27" pos:end="273:27">=</operator> <name pos:start="273:29" pos:end="273:37">line_last</name> <operator pos:start="273:39" pos:end="273:39">-</operator> <name pos:start="273:41" pos:end="273:50">line_start</name> <operator pos:start="273:52" pos:end="273:52">+</operator> <literal type="number" pos:start="273:54" pos:end="273:54">1</literal></expr>;</expr_stmt>

                        <expr_stmt pos:start="275:25" pos:end="275:55"><expr pos:start="275:25" pos:end="275:54"><name pos:start="275:25" pos:end="275:25">d</name> <operator pos:start="275:27" pos:end="275:27">=</operator> <name pos:start="275:29" pos:end="275:30">d1</name> <operator pos:start="275:32" pos:end="275:32">+</operator> <name pos:start="275:34" pos:end="275:41">linesize</name> <operator pos:start="275:43" pos:end="275:43">*</operator> <name pos:start="275:45" pos:end="275:54">line_start</name></expr>;</expr_stmt>

                        <if_stmt pos:start="277:25" pos:end="289:25"><if pos:start="277:25" pos:end="283:25">if <condition pos:start="277:28" pos:end="277:36">(<expr pos:start="277:29" pos:end="277:35"><name pos:start="277:29" pos:end="277:30">cw</name> <operator pos:start="277:32" pos:end="277:33">!=</operator> <literal type="number" pos:start="277:35" pos:end="277:35">9</literal></expr>)</condition> <block pos:start="277:38" pos:end="283:25">{<block_content pos:start="279:29" pos:end="281:75">

                            <expr_stmt pos:start="279:29" pos:end="281:75"><expr pos:start="279:29" pos:end="281:74"><call pos:start="279:29" pos:end="281:74"><name pos:start="279:29" pos:end="279:43">vga_draw_glyph8</name><argument_list pos:start="279:44" pos:end="281:74">(<argument pos:start="279:45" pos:end="279:45"><expr pos:start="279:45" pos:end="279:45"><name pos:start="279:45" pos:end="279:45">d</name></expr></argument>, <argument pos:start="279:48" pos:end="279:55"><expr pos:start="279:48" pos:end="279:55"><name pos:start="279:48" pos:end="279:55">linesize</name></expr></argument>,

                                            <argument pos:start="281:45" pos:end="281:56"><expr pos:start="281:45" pos:end="281:56"><name pos:start="281:45" pos:end="281:56">cursor_glyph</name></expr></argument>, <argument pos:start="281:59" pos:end="281:59"><expr pos:start="281:59" pos:end="281:59"><name pos:start="281:59" pos:end="281:59">h</name></expr></argument>, <argument pos:start="281:62" pos:end="281:66"><expr pos:start="281:62" pos:end="281:66"><name pos:start="281:62" pos:end="281:66">fgcol</name></expr></argument>, <argument pos:start="281:69" pos:end="281:73"><expr pos:start="281:69" pos:end="281:73"><name pos:start="281:69" pos:end="281:73">bgcol</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

                        </block_content>}</block></if> <else pos:start="283:27" pos:end="289:25">else <block pos:start="283:32" pos:end="289:25">{<block_content pos:start="285:29" pos:end="287:78">

                            <expr_stmt pos:start="285:29" pos:end="287:78"><expr pos:start="285:29" pos:end="287:77"><call pos:start="285:29" pos:end="287:77"><name pos:start="285:29" pos:end="285:43">vga_draw_glyph9</name><argument_list pos:start="285:44" pos:end="287:77">(<argument pos:start="285:45" pos:end="285:45"><expr pos:start="285:45" pos:end="285:45"><name pos:start="285:45" pos:end="285:45">d</name></expr></argument>, <argument pos:start="285:48" pos:end="285:55"><expr pos:start="285:48" pos:end="285:55"><name pos:start="285:48" pos:end="285:55">linesize</name></expr></argument>,

                                            <argument pos:start="287:45" pos:end="287:56"><expr pos:start="287:45" pos:end="287:56"><name pos:start="287:45" pos:end="287:56">cursor_glyph</name></expr></argument>, <argument pos:start="287:59" pos:end="287:59"><expr pos:start="287:59" pos:end="287:59"><name pos:start="287:59" pos:end="287:59">h</name></expr></argument>, <argument pos:start="287:62" pos:end="287:66"><expr pos:start="287:62" pos:end="287:66"><name pos:start="287:62" pos:end="287:66">fgcol</name></expr></argument>, <argument pos:start="287:69" pos:end="287:73"><expr pos:start="287:69" pos:end="287:73"><name pos:start="287:69" pos:end="287:73">bgcol</name></expr></argument>, <argument pos:start="287:76" pos:end="287:76"><expr pos:start="287:76" pos:end="287:76"><literal type="number" pos:start="287:76" pos:end="287:76">1</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

                        </block_content>}</block></else></if_stmt>

                    </block_content>}</block></if></if_stmt>

                </block_content>}</block></if></if_stmt>

            </block_content>}</block></if></if_stmt>

            <expr_stmt pos:start="297:13" pos:end="297:25"><expr pos:start="297:13" pos:end="297:24"><name pos:start="297:13" pos:end="297:14">d1</name> <operator pos:start="297:16" pos:end="297:17">+=</operator> <name pos:start="297:19" pos:end="297:24">x_incr</name></expr>;</expr_stmt>

            <expr_stmt pos:start="299:13" pos:end="299:21"><expr pos:start="299:13" pos:end="299:20"><name pos:start="299:13" pos:end="299:15">src</name> <operator pos:start="299:17" pos:end="299:18">+=</operator> <literal type="number" pos:start="299:20" pos:end="299:20">4</literal></expr>;</expr_stmt>

            <expr_stmt pos:start="301:13" pos:end="301:26"><expr pos:start="301:13" pos:end="301:25"><name pos:start="301:13" pos:end="301:23">ch_attr_ptr</name><operator pos:start="301:24" pos:end="301:25">++</operator></expr>;</expr_stmt>

        </block_content>}</block></for>

        <if_stmt pos:start="305:9" pos:end="311:9"><if pos:start="305:9" pos:end="311:9">if <condition pos:start="305:12" pos:end="305:25">(<expr pos:start="305:13" pos:end="305:24"><name pos:start="305:13" pos:end="305:18">cx_max</name> <operator pos:start="305:20" pos:end="305:21">!=</operator> <operator pos:start="305:23" pos:end="305:23">-</operator><literal type="number" pos:start="305:24" pos:end="305:24">1</literal></expr>)</condition> <block pos:start="305:27" pos:end="311:9">{<block_content pos:start="307:13" pos:end="309:60">

            <expr_stmt pos:start="307:13" pos:end="309:60"><expr pos:start="307:13" pos:end="309:59"><call pos:start="307:13" pos:end="309:59"><name pos:start="307:13" pos:end="307:22">dpy_update</name><argument_list pos:start="307:23" pos:end="309:59">(<argument pos:start="307:24" pos:end="307:28"><expr pos:start="307:24" pos:end="307:28"><name pos:start="307:24" pos:end="307:28"><name pos:start="307:24" pos:end="307:24">s</name><operator pos:start="307:25" pos:end="307:26">-&gt;</operator><name pos:start="307:27" pos:end="307:28">ds</name></name></expr></argument>, <argument pos:start="307:31" pos:end="307:41"><expr pos:start="307:31" pos:end="307:41"><name pos:start="307:31" pos:end="307:36">cx_min</name> <operator pos:start="307:38" pos:end="307:38">*</operator> <name pos:start="307:40" pos:end="307:41">cw</name></expr></argument>, <argument pos:start="307:44" pos:end="307:55"><expr pos:start="307:44" pos:end="307:55"><name pos:start="307:44" pos:end="307:45">cy</name> <operator pos:start="307:47" pos:end="307:47">*</operator> <name pos:start="307:49" pos:end="307:55">cheight</name></expr></argument>,

                       <argument pos:start="309:24" pos:end="309:49"><expr pos:start="309:24" pos:end="309:49"><operator pos:start="309:24" pos:end="309:24">(</operator><name pos:start="309:25" pos:end="309:30">cx_max</name> <operator pos:start="309:32" pos:end="309:32">-</operator> <name pos:start="309:34" pos:end="309:39">cx_min</name> <operator pos:start="309:41" pos:end="309:41">+</operator> <literal type="number" pos:start="309:43" pos:end="309:43">1</literal><operator pos:start="309:44" pos:end="309:44">)</operator> <operator pos:start="309:46" pos:end="309:46">*</operator> <name pos:start="309:48" pos:end="309:49">cw</name></expr></argument>, <argument pos:start="309:52" pos:end="309:58"><expr pos:start="309:52" pos:end="309:58"><name pos:start="309:52" pos:end="309:58">cheight</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        </block_content>}</block></if></if_stmt>

        <expr_stmt pos:start="313:9" pos:end="313:35"><expr pos:start="313:9" pos:end="313:34"><name pos:start="313:9" pos:end="313:12">dest</name> <operator pos:start="313:14" pos:end="313:15">+=</operator> <name pos:start="313:17" pos:end="313:24">linesize</name> <operator pos:start="313:26" pos:end="313:26">*</operator> <name pos:start="313:28" pos:end="313:34">cheight</name></expr>;</expr_stmt>

        <expr_stmt pos:start="315:9" pos:end="315:26"><expr pos:start="315:9" pos:end="315:25"><name pos:start="315:9" pos:end="315:10">s1</name> <operator pos:start="315:12" pos:end="315:13">+=</operator> <name pos:start="315:15" pos:end="315:25">line_offset</name></expr>;</expr_stmt>

    </block_content>}</block></for>

</block_content>}</block></function>
</unit>
