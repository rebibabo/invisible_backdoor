<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<unit xmlns="http://www.srcML.org/srcML/src" xmlns:pos="http://www.srcML.org/srcML/position" revision="1.0.0" language="C" filename="dataset/ropgen/aug/1/9617.c" pos:tabs="8"><function pos:start="1:1" pos:end="63:1"><type pos:start="1:1" pos:end="1:8"><name pos:start="1:1" pos:end="1:6">FpPort</name> <modifier pos:start="1:8" pos:end="1:8">*</modifier></type><name pos:start="1:9" pos:end="1:21">fp_port_alloc</name><parameter_list pos:start="1:22" pos:end="5:38">(<parameter pos:start="1:23" pos:end="1:31"><decl pos:start="1:23" pos:end="1:31"><type pos:start="1:23" pos:end="1:31"><name pos:start="1:23" pos:end="1:28">Rocker</name> <modifier pos:start="1:30" pos:end="1:30">*</modifier></type><name pos:start="1:31" pos:end="1:31">r</name></decl></parameter>, <parameter pos:start="1:34" pos:end="1:46"><decl pos:start="1:34" pos:end="1:46"><type pos:start="1:34" pos:end="1:46"><name pos:start="1:34" pos:end="1:37">char</name> <modifier pos:start="1:39" pos:end="1:39">*</modifier></type><name pos:start="1:40" pos:end="1:46">sw_name</name></decl></parameter>,

                      <parameter pos:start="3:23" pos:end="3:40"><decl pos:start="3:23" pos:end="3:40"><type pos:start="3:23" pos:end="3:40"><name pos:start="3:23" pos:end="3:29">MACAddr</name> <modifier pos:start="3:31" pos:end="3:31">*</modifier></type><name pos:start="3:32" pos:end="3:40">start_mac</name></decl></parameter>, <parameter pos:start="3:43" pos:end="3:60"><decl pos:start="3:43" pos:end="3:60"><type pos:start="3:43" pos:end="3:60"><name pos:start="3:43" pos:end="3:50">unsigned</name> <name pos:start="3:52" pos:end="3:54">int</name></type> <name pos:start="3:56" pos:end="3:60">index</name></decl></parameter>,

                      <parameter pos:start="5:23" pos:end="5:37"><decl pos:start="5:23" pos:end="5:37"><type pos:start="5:23" pos:end="5:37"><name pos:start="5:23" pos:end="5:30">NICPeers</name> <modifier pos:start="5:32" pos:end="5:32">*</modifier></type><name pos:start="5:33" pos:end="5:37">peers</name></decl></parameter>)</parameter_list>

<block pos:start="7:1" pos:end="63:1">{<block_content pos:start="9:5" pos:end="61:16">

    <decl_stmt pos:start="9:5" pos:end="9:45"><decl pos:start="9:5" pos:end="9:44"><type pos:start="9:5" pos:end="9:12"><name pos:start="9:5" pos:end="9:10">FpPort</name> <modifier pos:start="9:12" pos:end="9:12">*</modifier></type><name pos:start="9:13" pos:end="9:16">port</name> <init pos:start="9:18" pos:end="9:44">= <expr pos:start="9:20" pos:end="9:44"><call pos:start="9:20" pos:end="9:44"><name pos:start="9:20" pos:end="9:28">g_malloc0</name><argument_list pos:start="9:29" pos:end="9:44">(<argument pos:start="9:30" pos:end="9:43"><expr pos:start="9:30" pos:end="9:43"><sizeof pos:start="9:30" pos:end="9:43">sizeof<argument_list pos:start="9:36" pos:end="9:43">(<argument pos:start="9:37" pos:end="9:42"><expr pos:start="9:37" pos:end="9:42"><name pos:start="9:37" pos:end="9:42">FpPort</name></expr></argument>)</argument_list></sizeof></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>



    <if_stmt pos:start="13:5" pos:end="17:5"><if pos:start="13:5" pos:end="17:5">if <condition pos:start="13:8" pos:end="13:14">(<expr pos:start="13:9" pos:end="13:13"><operator pos:start="13:9" pos:end="13:9">!</operator><name pos:start="13:10" pos:end="13:13">port</name></expr>)</condition> <block pos:start="13:16" pos:end="17:5">{<block_content pos:start="15:9" pos:end="15:20">

        <return pos:start="15:9" pos:end="15:20">return <expr pos:start="15:16" pos:end="15:19"><name pos:start="15:16" pos:end="15:19">NULL</name></expr>;</return>

    </block_content>}</block></if></if_stmt>



    <expr_stmt pos:start="21:5" pos:end="21:16"><expr pos:start="21:5" pos:end="21:15"><name pos:start="21:5" pos:end="21:11"><name pos:start="21:5" pos:end="21:8">port</name><operator pos:start="21:9" pos:end="21:10">-&gt;</operator><name pos:start="21:11" pos:end="21:11">r</name></name> <operator pos:start="21:13" pos:end="21:13">=</operator> <name pos:start="21:15" pos:end="21:15">r</name></expr>;</expr_stmt>

    <expr_stmt pos:start="23:5" pos:end="23:24"><expr pos:start="23:5" pos:end="23:23"><name pos:start="23:5" pos:end="23:15"><name pos:start="23:5" pos:end="23:8">port</name><operator pos:start="23:9" pos:end="23:10">-&gt;</operator><name pos:start="23:11" pos:end="23:15">index</name></name> <operator pos:start="23:17" pos:end="23:17">=</operator> <name pos:start="23:19" pos:end="23:23">index</name></expr>;</expr_stmt>

    <expr_stmt pos:start="25:5" pos:end="25:28"><expr pos:start="25:5" pos:end="25:27"><name pos:start="25:5" pos:end="25:15"><name pos:start="25:5" pos:end="25:8">port</name><operator pos:start="25:9" pos:end="25:10">-&gt;</operator><name pos:start="25:11" pos:end="25:15">pport</name></name> <operator pos:start="25:17" pos:end="25:17">=</operator> <name pos:start="25:19" pos:end="25:23">index</name> <operator pos:start="25:25" pos:end="25:25">+</operator> <literal type="number" pos:start="25:27" pos:end="25:27">1</literal></expr>;</expr_stmt>



    <comment type="block" pos:start="29:5" pos:end="29:51">/* front-panel switch port names are 1-based */</comment>



    <expr_stmt pos:start="33:5" pos:end="33:64"><expr pos:start="33:5" pos:end="33:63"><name pos:start="33:5" pos:end="33:14"><name pos:start="33:5" pos:end="33:8">port</name><operator pos:start="33:9" pos:end="33:10">-&gt;</operator><name pos:start="33:11" pos:end="33:14">name</name></name> <operator pos:start="33:16" pos:end="33:16">=</operator> <call pos:start="33:18" pos:end="33:63"><name pos:start="33:18" pos:end="33:32">g_strdup_printf</name><argument_list pos:start="33:33" pos:end="33:63">(<argument pos:start="33:34" pos:end="33:40"><expr pos:start="33:34" pos:end="33:40"><literal type="string" pos:start="33:34" pos:end="33:40">"%sp%d"</literal></expr></argument>, <argument pos:start="33:43" pos:end="33:49"><expr pos:start="33:43" pos:end="33:49"><name pos:start="33:43" pos:end="33:49">sw_name</name></expr></argument>, <argument pos:start="33:52" pos:end="33:62"><expr pos:start="33:52" pos:end="33:62"><name pos:start="33:52" pos:end="33:62"><name pos:start="33:52" pos:end="33:55">port</name><operator pos:start="33:56" pos:end="33:57">-&gt;</operator><name pos:start="33:58" pos:end="33:62">pport</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>



    <expr_stmt pos:start="37:5" pos:end="37:74"><expr pos:start="37:5" pos:end="37:73"><call pos:start="37:5" pos:end="37:73"><name pos:start="37:5" pos:end="37:10">memcpy</name><argument_list pos:start="37:11" pos:end="37:73">(<argument pos:start="37:12" pos:end="37:31"><expr pos:start="37:12" pos:end="37:31"><name pos:start="37:12" pos:end="37:31"><name pos:start="37:12" pos:end="37:15">port</name><operator pos:start="37:16" pos:end="37:17">-&gt;</operator><name pos:start="37:18" pos:end="37:21">conf</name><operator pos:start="37:22" pos:end="37:22">.</operator><name pos:start="37:23" pos:end="37:29">macaddr</name><operator pos:start="37:30" pos:end="37:30">.</operator><name pos:start="37:31" pos:end="37:31">a</name></name></expr></argument>, <argument pos:start="37:34" pos:end="37:42"><expr pos:start="37:34" pos:end="37:42"><name pos:start="37:34" pos:end="37:42">start_mac</name></expr></argument>, <argument pos:start="37:45" pos:end="37:72"><expr pos:start="37:45" pos:end="37:72"><sizeof pos:start="37:45" pos:end="37:72">sizeof<argument_list pos:start="37:51" pos:end="37:72">(<argument pos:start="37:52" pos:end="37:71"><expr pos:start="37:52" pos:end="37:71"><name pos:start="37:52" pos:end="37:71"><name pos:start="37:52" pos:end="37:55">port</name><operator pos:start="37:56" pos:end="37:57">-&gt;</operator><name pos:start="37:58" pos:end="37:61">conf</name><operator pos:start="37:62" pos:end="37:62">.</operator><name pos:start="37:63" pos:end="37:69">macaddr</name><operator pos:start="37:70" pos:end="37:70">.</operator><name pos:start="37:71" pos:end="37:71">a</name></name></expr></argument>)</argument_list></sizeof></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    <expr_stmt pos:start="39:5" pos:end="39:37"><expr pos:start="39:5" pos:end="39:36"><name pos:start="39:5" pos:end="39:27"><name pos:start="39:5" pos:end="39:8">port</name><operator pos:start="39:9" pos:end="39:10">-&gt;</operator><name pos:start="39:11" pos:end="39:14">conf</name><operator pos:start="39:15" pos:end="39:15">.</operator><name pos:start="39:16" pos:end="39:22">macaddr</name><operator pos:start="39:23" pos:end="39:23">.</operator><name pos:start="39:24" pos:end="39:24">a</name><index pos:start="39:25" pos:end="39:27">[<expr pos:start="39:26" pos:end="39:26"><literal type="number" pos:start="39:26" pos:end="39:26">5</literal></expr>]</index></name> <operator pos:start="39:29" pos:end="39:30">+=</operator> <name pos:start="39:32" pos:end="39:36">index</name></expr>;</expr_stmt>

    <expr_stmt pos:start="41:5" pos:end="41:30"><expr pos:start="41:5" pos:end="41:29"><name pos:start="41:5" pos:end="41:24"><name pos:start="41:5" pos:end="41:8">port</name><operator pos:start="41:9" pos:end="41:10">-&gt;</operator><name pos:start="41:11" pos:end="41:14">conf</name><operator pos:start="41:15" pos:end="41:15">.</operator><name pos:start="41:16" pos:end="41:24">bootindex</name></name> <operator pos:start="41:26" pos:end="41:26">=</operator> <operator pos:start="41:28" pos:end="41:28">-</operator><literal type="number" pos:start="41:29" pos:end="41:29">1</literal></expr>;</expr_stmt>

    <expr_stmt pos:start="43:5" pos:end="43:30"><expr pos:start="43:5" pos:end="43:29"><name pos:start="43:5" pos:end="43:20"><name pos:start="43:5" pos:end="43:8">port</name><operator pos:start="43:9" pos:end="43:10">-&gt;</operator><name pos:start="43:11" pos:end="43:14">conf</name><operator pos:start="43:15" pos:end="43:15">.</operator><name pos:start="43:16" pos:end="43:20">peers</name></name> <operator pos:start="43:22" pos:end="43:22">=</operator> <operator pos:start="43:24" pos:end="43:24">*</operator><name pos:start="43:25" pos:end="43:29">peers</name></expr>;</expr_stmt>



    <expr_stmt pos:start="47:5" pos:end="49:50"><expr pos:start="47:5" pos:end="49:49"><name pos:start="47:5" pos:end="47:13"><name pos:start="47:5" pos:end="47:8">port</name><operator pos:start="47:9" pos:end="47:10">-&gt;</operator><name pos:start="47:11" pos:end="47:13">nic</name></name> <operator pos:start="47:15" pos:end="47:15">=</operator> <call pos:start="47:17" pos:end="49:49"><name pos:start="47:17" pos:end="47:28">qemu_new_nic</name><argument_list pos:start="47:29" pos:end="49:49">(<argument pos:start="47:30" pos:end="47:42"><expr pos:start="47:30" pos:end="47:42"><operator pos:start="47:30" pos:end="47:30">&amp;</operator><name pos:start="47:31" pos:end="47:42">fp_port_info</name></expr></argument>, <argument pos:start="47:45" pos:end="47:55"><expr pos:start="47:45" pos:end="47:55"><operator pos:start="47:45" pos:end="47:45">&amp;</operator><name pos:start="47:46" pos:end="47:55"><name pos:start="47:46" pos:end="47:49">port</name><operator pos:start="47:50" pos:end="47:51">-&gt;</operator><name pos:start="47:52" pos:end="47:55">conf</name></name></expr></argument>,

                             <argument pos:start="49:30" pos:end="49:36"><expr pos:start="49:30" pos:end="49:36"><name pos:start="49:30" pos:end="49:36">sw_name</name></expr></argument>, <argument pos:start="49:39" pos:end="49:42"><expr pos:start="49:39" pos:end="49:42"><name pos:start="49:39" pos:end="49:42">NULL</name></expr></argument>, <argument pos:start="49:45" pos:end="49:48"><expr pos:start="49:45" pos:end="49:48"><name pos:start="49:45" pos:end="49:48">port</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    <expr_stmt pos:start="51:5" pos:end="53:51"><expr pos:start="51:5" pos:end="53:50"><call pos:start="51:5" pos:end="53:50"><name pos:start="51:5" pos:end="51:28">qemu_format_nic_info_str</name><argument_list pos:start="51:29" pos:end="53:50">(<argument pos:start="51:30" pos:end="51:54"><expr pos:start="51:30" pos:end="51:54"><call pos:start="51:30" pos:end="51:54"><name pos:start="51:30" pos:end="51:43">qemu_get_queue</name><argument_list pos:start="51:44" pos:end="51:54">(<argument pos:start="51:45" pos:end="51:53"><expr pos:start="51:45" pos:end="51:53"><name pos:start="51:45" pos:end="51:53"><name pos:start="51:45" pos:end="51:48">port</name><operator pos:start="51:49" pos:end="51:50">-&gt;</operator><name pos:start="51:51" pos:end="51:53">nic</name></name></expr></argument>)</argument_list></call></expr></argument>,

                             <argument pos:start="53:30" pos:end="53:49"><expr pos:start="53:30" pos:end="53:49"><name pos:start="53:30" pos:end="53:49"><name pos:start="53:30" pos:end="53:33">port</name><operator pos:start="53:34" pos:end="53:35">-&gt;</operator><name pos:start="53:36" pos:end="53:39">conf</name><operator pos:start="53:40" pos:end="53:40">.</operator><name pos:start="53:41" pos:end="53:47">macaddr</name><operator pos:start="53:48" pos:end="53:48">.</operator><name pos:start="53:49" pos:end="53:49">a</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>



    <expr_stmt pos:start="57:5" pos:end="57:24"><expr pos:start="57:5" pos:end="57:23"><call pos:start="57:5" pos:end="57:23"><name pos:start="57:5" pos:end="57:17">fp_port_reset</name><argument_list pos:start="57:18" pos:end="57:23">(<argument pos:start="57:19" pos:end="57:22"><expr pos:start="57:19" pos:end="57:22"><name pos:start="57:19" pos:end="57:22">port</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>



    <return pos:start="61:5" pos:end="61:16">return <expr pos:start="61:12" pos:end="61:15"><name pos:start="61:12" pos:end="61:15">port</name></expr>;</return>

</block_content>}</block></function>
</unit>
