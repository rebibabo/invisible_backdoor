<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<unit xmlns="http://www.srcML.org/srcML/src" xmlns:pos="http://www.srcML.org/srcML/position" revision="1.0.0" language="C" filename="dataset/ropgen/aug/1/20648.c" pos:tabs="8"><function pos:start="1:1" pos:end="251:1"><type pos:start="1:1" pos:end="1:11"><specifier pos:start="1:1" pos:end="1:6">static</specifier> <name pos:start="1:8" pos:end="1:11">void</name></type> <name pos:start="1:13" pos:end="1:19">pci_idx</name><parameter_list pos:start="1:20" pos:end="1:25">(<parameter pos:start="1:21" pos:end="1:24"><decl pos:start="1:21" pos:end="1:24"><type pos:start="1:21" pos:end="1:24"><name pos:start="1:21" pos:end="1:24">void</name></type></decl></parameter>)</parameter_list>

<block pos:start="3:1" pos:end="251:1">{<block_content pos:start="5:5" pos:end="249:15">

    <decl_stmt pos:start="5:5" pos:end="5:26"><decl pos:start="5:5" pos:end="5:25"><type pos:start="5:5" pos:end="5:22"><name pos:start="5:5" pos:end="5:20">QVirtioPCIDevice</name> <modifier pos:start="5:22" pos:end="5:22">*</modifier></type><name pos:start="5:23" pos:end="5:25">dev</name></decl>;</decl_stmt>

    <decl_stmt pos:start="7:5" pos:end="7:17"><decl pos:start="7:5" pos:end="7:16"><type pos:start="7:5" pos:end="7:13"><name pos:start="7:5" pos:end="7:11">QPCIBus</name> <modifier pos:start="7:13" pos:end="7:13">*</modifier></type><name pos:start="7:14" pos:end="7:16">bus</name></decl>;</decl_stmt>

    <decl_stmt pos:start="9:5" pos:end="9:25"><decl pos:start="9:5" pos:end="9:24"><type pos:start="9:5" pos:end="9:19"><name pos:start="9:5" pos:end="9:17">QVirtQueuePCI</name> <modifier pos:start="9:19" pos:end="9:19">*</modifier></type><name pos:start="9:20" pos:end="9:24">vqpci</name></decl>;</decl_stmt>

    <decl_stmt pos:start="11:5" pos:end="11:27"><decl pos:start="11:5" pos:end="11:26"><type pos:start="11:5" pos:end="11:21"><name pos:start="11:5" pos:end="11:19">QGuestAllocator</name> <modifier pos:start="11:21" pos:end="11:21">*</modifier></type><name pos:start="11:22" pos:end="11:26">alloc</name></decl>;</decl_stmt>

    <decl_stmt pos:start="13:5" pos:end="13:22"><decl pos:start="13:5" pos:end="13:21"><type pos:start="13:5" pos:end="13:17"><name pos:start="13:5" pos:end="13:17">QVirtioBlkReq</name></type> <name pos:start="13:19" pos:end="13:21">req</name></decl>;</decl_stmt>

    <decl_stmt pos:start="15:5" pos:end="15:15"><decl pos:start="15:5" pos:end="15:14"><type pos:start="15:5" pos:end="15:10"><name pos:start="15:5" pos:end="15:8">void</name> <modifier pos:start="15:10" pos:end="15:10">*</modifier></type><name pos:start="15:11" pos:end="15:14">addr</name></decl>;</decl_stmt>

    <decl_stmt pos:start="17:5" pos:end="17:22"><decl pos:start="17:5" pos:end="17:21"><type pos:start="17:5" pos:end="17:12"><name pos:start="17:5" pos:end="17:12">uint64_t</name></type> <name pos:start="17:14" pos:end="17:21">req_addr</name></decl>;</decl_stmt>

    <decl_stmt pos:start="19:5" pos:end="19:22"><decl pos:start="19:5" pos:end="19:21"><type pos:start="19:5" pos:end="19:12"><name pos:start="19:5" pos:end="19:12">uint64_t</name></type> <name pos:start="19:14" pos:end="19:21">capacity</name></decl>;</decl_stmt>

    <decl_stmt pos:start="21:5" pos:end="21:22"><decl pos:start="21:5" pos:end="21:21"><type pos:start="21:5" pos:end="21:12"><name pos:start="21:5" pos:end="21:12">uint32_t</name></type> <name pos:start="21:14" pos:end="21:21">features</name></decl>;</decl_stmt>

    <decl_stmt pos:start="23:5" pos:end="23:23"><decl pos:start="23:5" pos:end="23:22"><type pos:start="23:5" pos:end="23:12"><name pos:start="23:5" pos:end="23:12">uint32_t</name></type> <name pos:start="23:14" pos:end="23:22">free_head</name></decl>;</decl_stmt>

    <decl_stmt pos:start="25:5" pos:end="25:19"><decl pos:start="25:5" pos:end="25:18"><type pos:start="25:5" pos:end="25:11"><name pos:start="25:5" pos:end="25:11">uint8_t</name></type> <name pos:start="25:13" pos:end="25:18">status</name></decl>;</decl_stmt>

    <decl_stmt pos:start="27:5" pos:end="27:15"><decl pos:start="27:5" pos:end="27:14"><type pos:start="27:5" pos:end="27:10"><name pos:start="27:5" pos:end="27:8">char</name> <modifier pos:start="27:10" pos:end="27:10">*</modifier></type><name pos:start="27:11" pos:end="27:14">data</name></decl>;</decl_stmt>



    <expr_stmt pos:start="31:5" pos:end="31:27"><expr pos:start="31:5" pos:end="31:26"><name pos:start="31:5" pos:end="31:7">bus</name> <operator pos:start="31:9" pos:end="31:9">=</operator> <call pos:start="31:11" pos:end="31:26"><name pos:start="31:11" pos:end="31:24">pci_test_start</name><argument_list pos:start="31:25" pos:end="31:26">()</argument_list></call></expr>;</expr_stmt>

    <expr_stmt pos:start="33:5" pos:end="33:28"><expr pos:start="33:5" pos:end="33:27"><name pos:start="33:5" pos:end="33:9">alloc</name> <operator pos:start="33:11" pos:end="33:11">=</operator> <call pos:start="33:13" pos:end="33:27"><name pos:start="33:13" pos:end="33:25">pc_alloc_init</name><argument_list pos:start="33:26" pos:end="33:27">()</argument_list></call></expr>;</expr_stmt>



    <expr_stmt pos:start="37:5" pos:end="37:45"><expr pos:start="37:5" pos:end="37:44"><name pos:start="37:5" pos:end="37:7">dev</name> <operator pos:start="37:9" pos:end="37:9">=</operator> <call pos:start="37:11" pos:end="37:44"><name pos:start="37:11" pos:end="37:29">virtio_blk_pci_init</name><argument_list pos:start="37:30" pos:end="37:44">(<argument pos:start="37:31" pos:end="37:33"><expr pos:start="37:31" pos:end="37:33"><name pos:start="37:31" pos:end="37:33">bus</name></expr></argument>, <argument pos:start="37:36" pos:end="37:43"><expr pos:start="37:36" pos:end="37:43"><name pos:start="37:36" pos:end="37:43">PCI_SLOT</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    <expr_stmt pos:start="39:5" pos:end="39:32"><expr pos:start="39:5" pos:end="39:31"><call pos:start="39:5" pos:end="39:31"><name pos:start="39:5" pos:end="39:20">qpci_msix_enable</name><argument_list pos:start="39:21" pos:end="39:31">(<argument pos:start="39:22" pos:end="39:30"><expr pos:start="39:22" pos:end="39:30"><name pos:start="39:22" pos:end="39:30"><name pos:start="39:22" pos:end="39:24">dev</name><operator pos:start="39:25" pos:end="39:26">-&gt;</operator><name pos:start="39:27" pos:end="39:30">pdev</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>



    <expr_stmt pos:start="43:5" pos:end="43:61"><expr pos:start="43:5" pos:end="43:60"><call pos:start="43:5" pos:end="43:60"><name pos:start="43:5" pos:end="43:45">qvirtio_pci_set_msix_configuration_vector</name><argument_list pos:start="43:46" pos:end="43:60">(<argument pos:start="43:47" pos:end="43:49"><expr pos:start="43:47" pos:end="43:49"><name pos:start="43:47" pos:end="43:49">dev</name></expr></argument>, <argument pos:start="43:52" pos:end="43:56"><expr pos:start="43:52" pos:end="43:56"><name pos:start="43:52" pos:end="43:56">alloc</name></expr></argument>, <argument pos:start="43:59" pos:end="43:59"><expr pos:start="43:59" pos:end="43:59"><literal type="number" pos:start="43:59" pos:end="43:59">0</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>



    <comment type="block" pos:start="47:5" pos:end="47:26">/* MSI-X is enabled */</comment>

    <expr_stmt pos:start="49:5" pos:end="49:51"><expr pos:start="49:5" pos:end="49:50"><name pos:start="49:5" pos:end="49:8">addr</name> <operator pos:start="49:10" pos:end="49:10">=</operator> <name pos:start="49:12" pos:end="49:20"><name pos:start="49:12" pos:end="49:14">dev</name><operator pos:start="49:15" pos:end="49:16">-&gt;</operator><name pos:start="49:17" pos:end="49:20">addr</name></name> <operator pos:start="49:22" pos:end="49:22">+</operator> <call pos:start="49:24" pos:end="49:50"><name pos:start="49:24" pos:end="49:44">VIRTIO_PCI_CONFIG_OFF</name><argument_list pos:start="49:45" pos:end="49:50">(<argument pos:start="49:46" pos:end="49:49"><expr pos:start="49:46" pos:end="49:49"><name pos:start="49:46" pos:end="49:49">true</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>



    <expr_stmt pos:start="53:5" pos:end="55:79"><expr pos:start="53:5" pos:end="55:78"><name pos:start="53:5" pos:end="53:12">capacity</name> <operator pos:start="53:14" pos:end="53:14">=</operator> <call pos:start="53:16" pos:end="55:78"><name pos:start="53:16" pos:end="53:35">qvirtio_config_readq</name><argument_list pos:start="53:36" pos:end="55:78">(<argument pos:start="53:37" pos:end="53:48"><expr pos:start="53:37" pos:end="53:48"><operator pos:start="53:37" pos:end="53:37">&amp;</operator><name pos:start="53:38" pos:end="53:48">qvirtio_pci</name></expr></argument>, <argument pos:start="53:51" pos:end="53:60"><expr pos:start="53:51" pos:end="53:60"><operator pos:start="53:51" pos:end="53:51">&amp;</operator><name pos:start="53:52" pos:end="53:60"><name pos:start="53:52" pos:end="53:54">dev</name><operator pos:start="53:55" pos:end="53:56">-&gt;</operator><name pos:start="53:57" pos:end="53:60">vdev</name></name></expr></argument>,

                                                    <argument pos:start="55:53" pos:end="55:77"><expr pos:start="55:53" pos:end="55:77"><operator pos:start="55:53" pos:end="55:53">(</operator><name pos:start="55:54" pos:end="55:61">uint64_t</name><operator pos:start="55:62" pos:end="55:62">)</operator><operator pos:start="55:63" pos:end="55:63">(</operator><name pos:start="55:64" pos:end="55:72">uintptr_t</name><operator pos:start="55:73" pos:end="55:73">)</operator><name pos:start="55:74" pos:end="55:77">addr</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    <expr_stmt pos:start="57:5" pos:end="57:57"><expr pos:start="57:5" pos:end="57:56"><call pos:start="57:5" pos:end="57:56"><name pos:start="57:5" pos:end="57:19">g_assert_cmpint</name><argument_list pos:start="57:20" pos:end="57:56">(<argument pos:start="57:21" pos:end="57:28"><expr pos:start="57:21" pos:end="57:28"><name pos:start="57:21" pos:end="57:28">capacity</name></expr></argument>, <argument pos:start="57:31" pos:end="57:32"><expr pos:start="57:31" pos:end="57:32"><operator pos:start="57:31" pos:end="57:32">==</operator></expr></argument>, <argument pos:start="57:35" pos:end="57:55"><expr pos:start="57:35" pos:end="57:55"><name pos:start="57:35" pos:end="57:49">TEST_IMAGE_SIZE</name> <operator pos:start="57:51" pos:end="57:51">/</operator> <literal type="number" pos:start="57:53" pos:end="57:55">512</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>



    <expr_stmt pos:start="61:5" pos:end="61:62"><expr pos:start="61:5" pos:end="61:61"><name pos:start="61:5" pos:end="61:12">features</name> <operator pos:start="61:14" pos:end="61:14">=</operator> <call pos:start="61:16" pos:end="61:61"><name pos:start="61:16" pos:end="61:35">qvirtio_get_features</name><argument_list pos:start="61:36" pos:end="61:61">(<argument pos:start="61:37" pos:end="61:48"><expr pos:start="61:37" pos:end="61:48"><operator pos:start="61:37" pos:end="61:37">&amp;</operator><name pos:start="61:38" pos:end="61:48">qvirtio_pci</name></expr></argument>, <argument pos:start="61:51" pos:end="61:60"><expr pos:start="61:51" pos:end="61:60"><operator pos:start="61:51" pos:end="61:51">&amp;</operator><name pos:start="61:52" pos:end="61:60"><name pos:start="61:52" pos:end="61:54">dev</name><operator pos:start="61:55" pos:end="61:56">-&gt;</operator><name pos:start="61:57" pos:end="61:60">vdev</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    <expr_stmt pos:start="63:5" pos:end="69:55"><expr pos:start="63:5" pos:end="69:54"><name pos:start="63:5" pos:end="63:12">features</name> <operator pos:start="63:14" pos:end="63:14">=</operator> <name pos:start="63:16" pos:end="63:23">features</name> <operator pos:start="63:25" pos:end="63:25">&amp;</operator> <operator pos:start="63:27" pos:end="63:27">~</operator><operator pos:start="63:28" pos:end="63:28">(</operator><name pos:start="63:29" pos:end="63:49">QVIRTIO_F_BAD_FEATURE</name> <operator pos:start="63:51" pos:end="63:51">|</operator>

                            <operator pos:start="65:29" pos:end="65:29">(</operator><literal type="number" pos:start="65:30" pos:end="65:31">1u</literal> <operator pos:start="65:33" pos:end="65:34">&lt;&lt;</operator> <name pos:start="65:36" pos:end="65:62">VIRTIO_RING_F_INDIRECT_DESC</name><operator pos:start="65:63" pos:end="65:63">)</operator> <operator pos:start="65:65" pos:end="65:65">|</operator>

                            <operator pos:start="67:29" pos:end="67:29">(</operator><literal type="number" pos:start="67:30" pos:end="67:31">1u</literal> <operator pos:start="67:33" pos:end="67:34">&lt;&lt;</operator> <name pos:start="67:36" pos:end="67:59">VIRTIO_F_NOTIFY_ON_EMPTY</name><operator pos:start="67:60" pos:end="67:60">)</operator> <operator pos:start="67:62" pos:end="67:62">|</operator>

                            <operator pos:start="69:29" pos:end="69:29">(</operator><literal type="number" pos:start="69:30" pos:end="69:31">1u</literal> <operator pos:start="69:33" pos:end="69:34">&lt;&lt;</operator> <name pos:start="69:36" pos:end="69:52">VIRTIO_BLK_F_SCSI</name><operator pos:start="69:53" pos:end="69:53">)</operator><operator pos:start="69:54" pos:end="69:54">)</operator></expr>;</expr_stmt>

    <expr_stmt pos:start="71:5" pos:end="71:61"><expr pos:start="71:5" pos:end="71:60"><call pos:start="71:5" pos:end="71:60"><name pos:start="71:5" pos:end="71:24">qvirtio_set_features</name><argument_list pos:start="71:25" pos:end="71:60">(<argument pos:start="71:26" pos:end="71:37"><expr pos:start="71:26" pos:end="71:37"><operator pos:start="71:26" pos:end="71:26">&amp;</operator><name pos:start="71:27" pos:end="71:37">qvirtio_pci</name></expr></argument>, <argument pos:start="71:40" pos:end="71:49"><expr pos:start="71:40" pos:end="71:49"><operator pos:start="71:40" pos:end="71:40">&amp;</operator><name pos:start="71:41" pos:end="71:49"><name pos:start="71:41" pos:end="71:43">dev</name><operator pos:start="71:44" pos:end="71:45">-&gt;</operator><name pos:start="71:46" pos:end="71:49">vdev</name></name></expr></argument>, <argument pos:start="71:52" pos:end="71:59"><expr pos:start="71:52" pos:end="71:59"><name pos:start="71:52" pos:end="71:59">features</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>



    <expr_stmt pos:start="75:5" pos:end="77:78"><expr pos:start="75:5" pos:end="77:77"><name pos:start="75:5" pos:end="75:9">vqpci</name> <operator pos:start="75:11" pos:end="75:11">=</operator> <operator pos:start="75:13" pos:end="75:13">(</operator><name pos:start="75:14" pos:end="75:26">QVirtQueuePCI</name> <operator pos:start="75:28" pos:end="75:28">*</operator><operator pos:start="75:29" pos:end="75:29">)</operator><call pos:start="75:30" pos:end="77:77"><name pos:start="75:30" pos:end="75:45">qvirtqueue_setup</name><argument_list pos:start="75:46" pos:end="77:77">(<argument pos:start="75:47" pos:end="75:58"><expr pos:start="75:47" pos:end="75:58"><operator pos:start="75:47" pos:end="75:47">&amp;</operator><name pos:start="75:48" pos:end="75:58">qvirtio_pci</name></expr></argument>, <argument pos:start="75:61" pos:end="75:70"><expr pos:start="75:61" pos:end="75:70"><operator pos:start="75:61" pos:end="75:61">&amp;</operator><name pos:start="75:62" pos:end="75:70"><name pos:start="75:62" pos:end="75:64">dev</name><operator pos:start="75:65" pos:end="75:66">-&gt;</operator><name pos:start="75:67" pos:end="75:70">vdev</name></name></expr></argument>,

                                                                    <argument pos:start="77:69" pos:end="77:73"><expr pos:start="77:69" pos:end="77:73"><name pos:start="77:69" pos:end="77:73">alloc</name></expr></argument>, <argument pos:start="77:76" pos:end="77:76"><expr pos:start="77:76" pos:end="77:76"><literal type="number" pos:start="77:76" pos:end="77:76">0</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    <expr_stmt pos:start="79:5" pos:end="79:52"><expr pos:start="79:5" pos:end="79:51"><call pos:start="79:5" pos:end="79:51"><name pos:start="79:5" pos:end="79:29">qvirtqueue_pci_msix_setup</name><argument_list pos:start="79:30" pos:end="79:51">(<argument pos:start="79:31" pos:end="79:33"><expr pos:start="79:31" pos:end="79:33"><name pos:start="79:31" pos:end="79:33">dev</name></expr></argument>, <argument pos:start="79:36" pos:end="79:40"><expr pos:start="79:36" pos:end="79:40"><name pos:start="79:36" pos:end="79:40">vqpci</name></expr></argument>, <argument pos:start="79:43" pos:end="79:47"><expr pos:start="79:43" pos:end="79:47"><name pos:start="79:43" pos:end="79:47">alloc</name></expr></argument>, <argument pos:start="79:50" pos:end="79:50"><expr pos:start="79:50" pos:end="79:50"><literal type="number" pos:start="79:50" pos:end="79:50">1</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>



    <expr_stmt pos:start="83:5" pos:end="83:52"><expr pos:start="83:5" pos:end="83:51"><call pos:start="83:5" pos:end="83:51"><name pos:start="83:5" pos:end="83:25">qvirtio_set_driver_ok</name><argument_list pos:start="83:26" pos:end="83:51">(<argument pos:start="83:27" pos:end="83:38"><expr pos:start="83:27" pos:end="83:38"><operator pos:start="83:27" pos:end="83:27">&amp;</operator><name pos:start="83:28" pos:end="83:38">qvirtio_pci</name></expr></argument>, <argument pos:start="83:41" pos:end="83:50"><expr pos:start="83:41" pos:end="83:50"><operator pos:start="83:41" pos:end="83:41">&amp;</operator><name pos:start="83:42" pos:end="83:50"><name pos:start="83:42" pos:end="83:44">dev</name><operator pos:start="83:45" pos:end="83:46">-&gt;</operator><name pos:start="83:47" pos:end="83:50">vdev</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>



    <comment type="block" pos:start="87:5" pos:end="87:23">/* Write request */</comment>

    <expr_stmt pos:start="89:5" pos:end="89:32"><expr pos:start="89:5" pos:end="89:31"><name pos:start="89:5" pos:end="89:12"><name pos:start="89:5" pos:end="89:7">req</name><operator pos:start="89:8" pos:end="89:8">.</operator><name pos:start="89:9" pos:end="89:12">type</name></name> <operator pos:start="89:14" pos:end="89:14">=</operator> <name pos:start="89:16" pos:end="89:31">VIRTIO_BLK_T_OUT</name></expr>;</expr_stmt>

    <expr_stmt pos:start="91:5" pos:end="91:19"><expr pos:start="91:5" pos:end="91:18"><name pos:start="91:5" pos:end="91:14"><name pos:start="91:5" pos:end="91:7">req</name><operator pos:start="91:8" pos:end="91:8">.</operator><name pos:start="91:9" pos:end="91:14">ioprio</name></name> <operator pos:start="91:16" pos:end="91:16">=</operator> <literal type="number" pos:start="91:18" pos:end="91:18">1</literal></expr>;</expr_stmt>

    <expr_stmt pos:start="93:5" pos:end="93:19"><expr pos:start="93:5" pos:end="93:18"><name pos:start="93:5" pos:end="93:14"><name pos:start="93:5" pos:end="93:7">req</name><operator pos:start="93:8" pos:end="93:8">.</operator><name pos:start="93:9" pos:end="93:14">sector</name></name> <operator pos:start="93:16" pos:end="93:16">=</operator> <literal type="number" pos:start="93:18" pos:end="93:18">0</literal></expr>;</expr_stmt>

    <expr_stmt pos:start="95:5" pos:end="95:30"><expr pos:start="95:5" pos:end="95:29"><name pos:start="95:5" pos:end="95:12"><name pos:start="95:5" pos:end="95:7">req</name><operator pos:start="95:8" pos:end="95:8">.</operator><name pos:start="95:9" pos:end="95:12">data</name></name> <operator pos:start="95:14" pos:end="95:14">=</operator> <call pos:start="95:16" pos:end="95:29"><name pos:start="95:16" pos:end="95:24">g_malloc0</name><argument_list pos:start="95:25" pos:end="95:29">(<argument pos:start="95:26" pos:end="95:28"><expr pos:start="95:26" pos:end="95:28"><literal type="number" pos:start="95:26" pos:end="95:28">512</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    <expr_stmt pos:start="97:5" pos:end="97:29"><expr pos:start="97:5" pos:end="97:28"><call pos:start="97:5" pos:end="97:28"><name pos:start="97:5" pos:end="97:10">strcpy</name><argument_list pos:start="97:11" pos:end="97:28">(<argument pos:start="97:12" pos:end="97:19"><expr pos:start="97:12" pos:end="97:19"><name pos:start="97:12" pos:end="97:19"><name pos:start="97:12" pos:end="97:14">req</name><operator pos:start="97:15" pos:end="97:15">.</operator><name pos:start="97:16" pos:end="97:19">data</name></name></expr></argument>, <argument pos:start="97:22" pos:end="97:27"><expr pos:start="97:22" pos:end="97:27"><literal type="string" pos:start="97:22" pos:end="97:27">"TEST"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>



    <expr_stmt pos:start="101:5" pos:end="101:52"><expr pos:start="101:5" pos:end="101:51"><name pos:start="101:5" pos:end="101:12">req_addr</name> <operator pos:start="101:14" pos:end="101:14">=</operator> <call pos:start="101:16" pos:end="101:51"><name pos:start="101:16" pos:end="101:33">virtio_blk_request</name><argument_list pos:start="101:34" pos:end="101:51">(<argument pos:start="101:35" pos:end="101:39"><expr pos:start="101:35" pos:end="101:39"><name pos:start="101:35" pos:end="101:39">alloc</name></expr></argument>, <argument pos:start="101:42" pos:end="101:45"><expr pos:start="101:42" pos:end="101:45"><operator pos:start="101:42" pos:end="101:42">&amp;</operator><name pos:start="101:43" pos:end="101:45">req</name></expr></argument>, <argument pos:start="101:48" pos:end="101:50"><expr pos:start="101:48" pos:end="101:50"><literal type="number" pos:start="101:48" pos:end="101:50">512</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>



    <expr_stmt pos:start="105:5" pos:end="105:21"><expr pos:start="105:5" pos:end="105:20"><call pos:start="105:5" pos:end="105:20"><name pos:start="105:5" pos:end="105:10">g_free</name><argument_list pos:start="105:11" pos:end="105:20">(<argument pos:start="105:12" pos:end="105:19"><expr pos:start="105:12" pos:end="105:19"><name pos:start="105:12" pos:end="105:19"><name pos:start="105:12" pos:end="105:14">req</name><operator pos:start="105:15" pos:end="105:15">.</operator><name pos:start="105:16" pos:end="105:19">data</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>



    <expr_stmt pos:start="109:5" pos:end="109:70"><expr pos:start="109:5" pos:end="109:69"><name pos:start="109:5" pos:end="109:13">free_head</name> <operator pos:start="109:15" pos:end="109:15">=</operator> <call pos:start="109:17" pos:end="109:69"><name pos:start="109:17" pos:end="109:30">qvirtqueue_add</name><argument_list pos:start="109:31" pos:end="109:69">(<argument pos:start="109:32" pos:end="109:41"><expr pos:start="109:32" pos:end="109:41"><operator pos:start="109:32" pos:end="109:32">&amp;</operator><name pos:start="109:33" pos:end="109:41"><name pos:start="109:33" pos:end="109:37">vqpci</name><operator pos:start="109:38" pos:end="109:39">-&gt;</operator><name pos:start="109:40" pos:end="109:41">vq</name></name></expr></argument>, <argument pos:start="109:44" pos:end="109:51"><expr pos:start="109:44" pos:end="109:51"><name pos:start="109:44" pos:end="109:51">req_addr</name></expr></argument>, <argument pos:start="109:54" pos:end="109:55"><expr pos:start="109:54" pos:end="109:55"><literal type="number" pos:start="109:54" pos:end="109:55">16</literal></expr></argument>, <argument pos:start="109:58" pos:end="109:62"><expr pos:start="109:58" pos:end="109:62"><name pos:start="109:58" pos:end="109:62">false</name></expr></argument>, <argument pos:start="109:65" pos:end="109:68"><expr pos:start="109:65" pos:end="109:68"><name pos:start="109:65" pos:end="109:68">true</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    <expr_stmt pos:start="111:5" pos:end="111:64"><expr pos:start="111:5" pos:end="111:63"><call pos:start="111:5" pos:end="111:63"><name pos:start="111:5" pos:end="111:18">qvirtqueue_add</name><argument_list pos:start="111:19" pos:end="111:63">(<argument pos:start="111:20" pos:end="111:29"><expr pos:start="111:20" pos:end="111:29"><operator pos:start="111:20" pos:end="111:20">&amp;</operator><name pos:start="111:21" pos:end="111:29"><name pos:start="111:21" pos:end="111:25">vqpci</name><operator pos:start="111:26" pos:end="111:27">-&gt;</operator><name pos:start="111:28" pos:end="111:29">vq</name></name></expr></argument>, <argument pos:start="111:32" pos:end="111:44"><expr pos:start="111:32" pos:end="111:44"><name pos:start="111:32" pos:end="111:39">req_addr</name> <operator pos:start="111:41" pos:end="111:41">+</operator> <literal type="number" pos:start="111:43" pos:end="111:44">16</literal></expr></argument>, <argument pos:start="111:47" pos:end="111:49"><expr pos:start="111:47" pos:end="111:49"><literal type="number" pos:start="111:47" pos:end="111:49">512</literal></expr></argument>, <argument pos:start="111:52" pos:end="111:56"><expr pos:start="111:52" pos:end="111:56"><name pos:start="111:52" pos:end="111:56">false</name></expr></argument>, <argument pos:start="111:59" pos:end="111:62"><expr pos:start="111:59" pos:end="111:62"><name pos:start="111:59" pos:end="111:62">true</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    <expr_stmt pos:start="113:5" pos:end="113:63"><expr pos:start="113:5" pos:end="113:62"><call pos:start="113:5" pos:end="113:62"><name pos:start="113:5" pos:end="113:18">qvirtqueue_add</name><argument_list pos:start="113:19" pos:end="113:62">(<argument pos:start="113:20" pos:end="113:29"><expr pos:start="113:20" pos:end="113:29"><operator pos:start="113:20" pos:end="113:20">&amp;</operator><name pos:start="113:21" pos:end="113:29"><name pos:start="113:21" pos:end="113:25">vqpci</name><operator pos:start="113:26" pos:end="113:27">-&gt;</operator><name pos:start="113:28" pos:end="113:29">vq</name></name></expr></argument>, <argument pos:start="113:32" pos:end="113:45"><expr pos:start="113:32" pos:end="113:45"><name pos:start="113:32" pos:end="113:39">req_addr</name> <operator pos:start="113:41" pos:end="113:41">+</operator> <literal type="number" pos:start="113:43" pos:end="113:45">528</literal></expr></argument>, <argument pos:start="113:48" pos:end="113:48"><expr pos:start="113:48" pos:end="113:48"><literal type="number" pos:start="113:48" pos:end="113:48">1</literal></expr></argument>, <argument pos:start="113:51" pos:end="113:54"><expr pos:start="113:51" pos:end="113:54"><name pos:start="113:51" pos:end="113:54">true</name></expr></argument>, <argument pos:start="113:57" pos:end="113:61"><expr pos:start="113:57" pos:end="113:61"><name pos:start="113:57" pos:end="113:61">false</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    <expr_stmt pos:start="115:5" pos:end="115:69"><expr pos:start="115:5" pos:end="115:68"><call pos:start="115:5" pos:end="115:68"><name pos:start="115:5" pos:end="115:19">qvirtqueue_kick</name><argument_list pos:start="115:20" pos:end="115:68">(<argument pos:start="115:21" pos:end="115:32"><expr pos:start="115:21" pos:end="115:32"><operator pos:start="115:21" pos:end="115:21">&amp;</operator><name pos:start="115:22" pos:end="115:32">qvirtio_pci</name></expr></argument>, <argument pos:start="115:35" pos:end="115:44"><expr pos:start="115:35" pos:end="115:44"><operator pos:start="115:35" pos:end="115:35">&amp;</operator><name pos:start="115:36" pos:end="115:44"><name pos:start="115:36" pos:end="115:38">dev</name><operator pos:start="115:39" pos:end="115:40">-&gt;</operator><name pos:start="115:41" pos:end="115:44">vdev</name></name></expr></argument>, <argument pos:start="115:47" pos:end="115:56"><expr pos:start="115:47" pos:end="115:56"><operator pos:start="115:47" pos:end="115:47">&amp;</operator><name pos:start="115:48" pos:end="115:56"><name pos:start="115:48" pos:end="115:52">vqpci</name><operator pos:start="115:53" pos:end="115:54">-&gt;</operator><name pos:start="115:55" pos:end="115:56">vq</name></name></expr></argument>, <argument pos:start="115:59" pos:end="115:67"><expr pos:start="115:59" pos:end="115:67"><name pos:start="115:59" pos:end="115:67">free_head</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>



    <expr_stmt pos:start="119:5" pos:end="121:51"><expr pos:start="119:5" pos:end="121:50"><call pos:start="119:5" pos:end="121:50"><name pos:start="119:5" pos:end="119:26">qvirtio_wait_queue_isr</name><argument_list pos:start="119:27" pos:end="121:50">(<argument pos:start="119:28" pos:end="119:39"><expr pos:start="119:28" pos:end="119:39"><operator pos:start="119:28" pos:end="119:28">&amp;</operator><name pos:start="119:29" pos:end="119:39">qvirtio_pci</name></expr></argument>, <argument pos:start="119:42" pos:end="119:51"><expr pos:start="119:42" pos:end="119:51"><operator pos:start="119:42" pos:end="119:42">&amp;</operator><name pos:start="119:43" pos:end="119:51"><name pos:start="119:43" pos:end="119:45">dev</name><operator pos:start="119:46" pos:end="119:47">-&gt;</operator><name pos:start="119:48" pos:end="119:51">vdev</name></name></expr></argument>, <argument pos:start="119:54" pos:end="119:63"><expr pos:start="119:54" pos:end="119:63"><operator pos:start="119:54" pos:end="119:54">&amp;</operator><name pos:start="119:55" pos:end="119:63"><name pos:start="119:55" pos:end="119:59">vqpci</name><operator pos:start="119:60" pos:end="119:61">-&gt;</operator><name pos:start="119:62" pos:end="119:63">vq</name></name></expr></argument>,

                           <argument pos:start="121:28" pos:end="121:49"><expr pos:start="121:28" pos:end="121:49"><name pos:start="121:28" pos:end="121:49">QVIRTIO_BLK_TIMEOUT_US</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>



    <comment type="block" pos:start="125:5" pos:end="125:23">/* Write request */</comment>

    <expr_stmt pos:start="127:5" pos:end="127:32"><expr pos:start="127:5" pos:end="127:31"><name pos:start="127:5" pos:end="127:12"><name pos:start="127:5" pos:end="127:7">req</name><operator pos:start="127:8" pos:end="127:8">.</operator><name pos:start="127:9" pos:end="127:12">type</name></name> <operator pos:start="127:14" pos:end="127:14">=</operator> <name pos:start="127:16" pos:end="127:31">VIRTIO_BLK_T_OUT</name></expr>;</expr_stmt>

    <expr_stmt pos:start="129:5" pos:end="129:19"><expr pos:start="129:5" pos:end="129:18"><name pos:start="129:5" pos:end="129:14"><name pos:start="129:5" pos:end="129:7">req</name><operator pos:start="129:8" pos:end="129:8">.</operator><name pos:start="129:9" pos:end="129:14">ioprio</name></name> <operator pos:start="129:16" pos:end="129:16">=</operator> <literal type="number" pos:start="129:18" pos:end="129:18">1</literal></expr>;</expr_stmt>

    <expr_stmt pos:start="131:5" pos:end="131:19"><expr pos:start="131:5" pos:end="131:18"><name pos:start="131:5" pos:end="131:14"><name pos:start="131:5" pos:end="131:7">req</name><operator pos:start="131:8" pos:end="131:8">.</operator><name pos:start="131:9" pos:end="131:14">sector</name></name> <operator pos:start="131:16" pos:end="131:16">=</operator> <literal type="number" pos:start="131:18" pos:end="131:18">1</literal></expr>;</expr_stmt>

    <expr_stmt pos:start="133:5" pos:end="133:30"><expr pos:start="133:5" pos:end="133:29"><name pos:start="133:5" pos:end="133:12"><name pos:start="133:5" pos:end="133:7">req</name><operator pos:start="133:8" pos:end="133:8">.</operator><name pos:start="133:9" pos:end="133:12">data</name></name> <operator pos:start="133:14" pos:end="133:14">=</operator> <call pos:start="133:16" pos:end="133:29"><name pos:start="133:16" pos:end="133:24">g_malloc0</name><argument_list pos:start="133:25" pos:end="133:29">(<argument pos:start="133:26" pos:end="133:28"><expr pos:start="133:26" pos:end="133:28"><literal type="number" pos:start="133:26" pos:end="133:28">512</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    <expr_stmt pos:start="135:5" pos:end="135:29"><expr pos:start="135:5" pos:end="135:28"><call pos:start="135:5" pos:end="135:28"><name pos:start="135:5" pos:end="135:10">strcpy</name><argument_list pos:start="135:11" pos:end="135:28">(<argument pos:start="135:12" pos:end="135:19"><expr pos:start="135:12" pos:end="135:19"><name pos:start="135:12" pos:end="135:19"><name pos:start="135:12" pos:end="135:14">req</name><operator pos:start="135:15" pos:end="135:15">.</operator><name pos:start="135:16" pos:end="135:19">data</name></name></expr></argument>, <argument pos:start="135:22" pos:end="135:27"><expr pos:start="135:22" pos:end="135:27"><literal type="string" pos:start="135:22" pos:end="135:27">"TEST"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>



    <expr_stmt pos:start="139:5" pos:end="139:52"><expr pos:start="139:5" pos:end="139:51"><name pos:start="139:5" pos:end="139:12">req_addr</name> <operator pos:start="139:14" pos:end="139:14">=</operator> <call pos:start="139:16" pos:end="139:51"><name pos:start="139:16" pos:end="139:33">virtio_blk_request</name><argument_list pos:start="139:34" pos:end="139:51">(<argument pos:start="139:35" pos:end="139:39"><expr pos:start="139:35" pos:end="139:39"><name pos:start="139:35" pos:end="139:39">alloc</name></expr></argument>, <argument pos:start="139:42" pos:end="139:45"><expr pos:start="139:42" pos:end="139:45"><operator pos:start="139:42" pos:end="139:42">&amp;</operator><name pos:start="139:43" pos:end="139:45">req</name></expr></argument>, <argument pos:start="139:48" pos:end="139:50"><expr pos:start="139:48" pos:end="139:50"><literal type="number" pos:start="139:48" pos:end="139:50">512</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>



    <expr_stmt pos:start="143:5" pos:end="143:21"><expr pos:start="143:5" pos:end="143:20"><call pos:start="143:5" pos:end="143:20"><name pos:start="143:5" pos:end="143:10">g_free</name><argument_list pos:start="143:11" pos:end="143:20">(<argument pos:start="143:12" pos:end="143:19"><expr pos:start="143:12" pos:end="143:19"><name pos:start="143:12" pos:end="143:19"><name pos:start="143:12" pos:end="143:14">req</name><operator pos:start="143:15" pos:end="143:15">.</operator><name pos:start="143:16" pos:end="143:19">data</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>



    <comment type="block" pos:start="147:5" pos:end="147:51">/* Notify after processing the third request */</comment>

    <expr_stmt pos:start="149:5" pos:end="149:45"><expr pos:start="149:5" pos:end="149:44"><call pos:start="149:5" pos:end="149:44"><name pos:start="149:5" pos:end="149:29">qvirtqueue_set_used_event</name><argument_list pos:start="149:30" pos:end="149:44">(<argument pos:start="149:31" pos:end="149:40"><expr pos:start="149:31" pos:end="149:40"><operator pos:start="149:31" pos:end="149:31">&amp;</operator><name pos:start="149:32" pos:end="149:40"><name pos:start="149:32" pos:end="149:36">vqpci</name><operator pos:start="149:37" pos:end="149:38">-&gt;</operator><name pos:start="149:39" pos:end="149:40">vq</name></name></expr></argument>, <argument pos:start="149:43" pos:end="149:43"><expr pos:start="149:43" pos:end="149:43"><literal type="number" pos:start="149:43" pos:end="149:43">2</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    <expr_stmt pos:start="151:5" pos:end="151:70"><expr pos:start="151:5" pos:end="151:69"><name pos:start="151:5" pos:end="151:13">free_head</name> <operator pos:start="151:15" pos:end="151:15">=</operator> <call pos:start="151:17" pos:end="151:69"><name pos:start="151:17" pos:end="151:30">qvirtqueue_add</name><argument_list pos:start="151:31" pos:end="151:69">(<argument pos:start="151:32" pos:end="151:41"><expr pos:start="151:32" pos:end="151:41"><operator pos:start="151:32" pos:end="151:32">&amp;</operator><name pos:start="151:33" pos:end="151:41"><name pos:start="151:33" pos:end="151:37">vqpci</name><operator pos:start="151:38" pos:end="151:39">-&gt;</operator><name pos:start="151:40" pos:end="151:41">vq</name></name></expr></argument>, <argument pos:start="151:44" pos:end="151:51"><expr pos:start="151:44" pos:end="151:51"><name pos:start="151:44" pos:end="151:51">req_addr</name></expr></argument>, <argument pos:start="151:54" pos:end="151:55"><expr pos:start="151:54" pos:end="151:55"><literal type="number" pos:start="151:54" pos:end="151:55">16</literal></expr></argument>, <argument pos:start="151:58" pos:end="151:62"><expr pos:start="151:58" pos:end="151:62"><name pos:start="151:58" pos:end="151:62">false</name></expr></argument>, <argument pos:start="151:65" pos:end="151:68"><expr pos:start="151:65" pos:end="151:68"><name pos:start="151:65" pos:end="151:68">true</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    <expr_stmt pos:start="153:5" pos:end="153:64"><expr pos:start="153:5" pos:end="153:63"><call pos:start="153:5" pos:end="153:63"><name pos:start="153:5" pos:end="153:18">qvirtqueue_add</name><argument_list pos:start="153:19" pos:end="153:63">(<argument pos:start="153:20" pos:end="153:29"><expr pos:start="153:20" pos:end="153:29"><operator pos:start="153:20" pos:end="153:20">&amp;</operator><name pos:start="153:21" pos:end="153:29"><name pos:start="153:21" pos:end="153:25">vqpci</name><operator pos:start="153:26" pos:end="153:27">-&gt;</operator><name pos:start="153:28" pos:end="153:29">vq</name></name></expr></argument>, <argument pos:start="153:32" pos:end="153:44"><expr pos:start="153:32" pos:end="153:44"><name pos:start="153:32" pos:end="153:39">req_addr</name> <operator pos:start="153:41" pos:end="153:41">+</operator> <literal type="number" pos:start="153:43" pos:end="153:44">16</literal></expr></argument>, <argument pos:start="153:47" pos:end="153:49"><expr pos:start="153:47" pos:end="153:49"><literal type="number" pos:start="153:47" pos:end="153:49">512</literal></expr></argument>, <argument pos:start="153:52" pos:end="153:56"><expr pos:start="153:52" pos:end="153:56"><name pos:start="153:52" pos:end="153:56">false</name></expr></argument>, <argument pos:start="153:59" pos:end="153:62"><expr pos:start="153:59" pos:end="153:62"><name pos:start="153:59" pos:end="153:62">true</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    <expr_stmt pos:start="155:5" pos:end="155:63"><expr pos:start="155:5" pos:end="155:62"><call pos:start="155:5" pos:end="155:62"><name pos:start="155:5" pos:end="155:18">qvirtqueue_add</name><argument_list pos:start="155:19" pos:end="155:62">(<argument pos:start="155:20" pos:end="155:29"><expr pos:start="155:20" pos:end="155:29"><operator pos:start="155:20" pos:end="155:20">&amp;</operator><name pos:start="155:21" pos:end="155:29"><name pos:start="155:21" pos:end="155:25">vqpci</name><operator pos:start="155:26" pos:end="155:27">-&gt;</operator><name pos:start="155:28" pos:end="155:29">vq</name></name></expr></argument>, <argument pos:start="155:32" pos:end="155:45"><expr pos:start="155:32" pos:end="155:45"><name pos:start="155:32" pos:end="155:39">req_addr</name> <operator pos:start="155:41" pos:end="155:41">+</operator> <literal type="number" pos:start="155:43" pos:end="155:45">528</literal></expr></argument>, <argument pos:start="155:48" pos:end="155:48"><expr pos:start="155:48" pos:end="155:48"><literal type="number" pos:start="155:48" pos:end="155:48">1</literal></expr></argument>, <argument pos:start="155:51" pos:end="155:54"><expr pos:start="155:51" pos:end="155:54"><name pos:start="155:51" pos:end="155:54">true</name></expr></argument>, <argument pos:start="155:57" pos:end="155:61"><expr pos:start="155:57" pos:end="155:61"><name pos:start="155:57" pos:end="155:61">false</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    <expr_stmt pos:start="157:5" pos:end="157:69"><expr pos:start="157:5" pos:end="157:68"><call pos:start="157:5" pos:end="157:68"><name pos:start="157:5" pos:end="157:19">qvirtqueue_kick</name><argument_list pos:start="157:20" pos:end="157:68">(<argument pos:start="157:21" pos:end="157:32"><expr pos:start="157:21" pos:end="157:32"><operator pos:start="157:21" pos:end="157:21">&amp;</operator><name pos:start="157:22" pos:end="157:32">qvirtio_pci</name></expr></argument>, <argument pos:start="157:35" pos:end="157:44"><expr pos:start="157:35" pos:end="157:44"><operator pos:start="157:35" pos:end="157:35">&amp;</operator><name pos:start="157:36" pos:end="157:44"><name pos:start="157:36" pos:end="157:38">dev</name><operator pos:start="157:39" pos:end="157:40">-&gt;</operator><name pos:start="157:41" pos:end="157:44">vdev</name></name></expr></argument>, <argument pos:start="157:47" pos:end="157:56"><expr pos:start="157:47" pos:end="157:56"><operator pos:start="157:47" pos:end="157:47">&amp;</operator><name pos:start="157:48" pos:end="157:56"><name pos:start="157:48" pos:end="157:52">vqpci</name><operator pos:start="157:53" pos:end="157:54">-&gt;</operator><name pos:start="157:55" pos:end="157:56">vq</name></name></expr></argument>, <argument pos:start="157:59" pos:end="157:67"><expr pos:start="157:59" pos:end="157:67"><name pos:start="157:59" pos:end="157:67">free_head</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>



    <comment type="block" pos:start="161:5" pos:end="161:34">/* No notification expected */</comment>

    <expr_stmt pos:start="163:5" pos:end="167:69"><expr pos:start="163:5" pos:end="167:68"><name pos:start="163:5" pos:end="163:10">status</name> <operator pos:start="163:12" pos:end="163:12">=</operator> <call pos:start="163:14" pos:end="167:68"><name pos:start="163:14" pos:end="163:44">qvirtio_wait_status_byte_no_isr</name><argument_list pos:start="163:45" pos:end="167:68">(<argument pos:start="163:46" pos:end="163:57"><expr pos:start="163:46" pos:end="163:57"><operator pos:start="163:46" pos:end="163:46">&amp;</operator><name pos:start="163:47" pos:end="163:57">qvirtio_pci</name></expr></argument>, <argument pos:start="163:60" pos:end="163:69"><expr pos:start="163:60" pos:end="163:69"><operator pos:start="163:60" pos:end="163:60">&amp;</operator><name pos:start="163:61" pos:end="163:69"><name pos:start="163:61" pos:end="163:63">dev</name><operator pos:start="163:64" pos:end="163:65">-&gt;</operator><name pos:start="163:66" pos:end="163:69">vdev</name></name></expr></argument>,

                                             <argument pos:start="165:46" pos:end="165:55"><expr pos:start="165:46" pos:end="165:55"><operator pos:start="165:46" pos:end="165:46">&amp;</operator><name pos:start="165:47" pos:end="165:55"><name pos:start="165:47" pos:end="165:51">vqpci</name><operator pos:start="165:52" pos:end="165:53">-&gt;</operator><name pos:start="165:54" pos:end="165:55">vq</name></name></expr></argument>, <argument pos:start="165:58" pos:end="165:71"><expr pos:start="165:58" pos:end="165:71"><name pos:start="165:58" pos:end="165:65">req_addr</name> <operator pos:start="165:67" pos:end="165:67">+</operator> <literal type="number" pos:start="165:69" pos:end="165:71">528</literal></expr></argument>,

                                             <argument pos:start="167:46" pos:end="167:67"><expr pos:start="167:46" pos:end="167:67"><name pos:start="167:46" pos:end="167:67">QVIRTIO_BLK_TIMEOUT_US</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    <expr_stmt pos:start="169:5" pos:end="169:35"><expr pos:start="169:5" pos:end="169:34"><call pos:start="169:5" pos:end="169:34"><name pos:start="169:5" pos:end="169:19">g_assert_cmpint</name><argument_list pos:start="169:20" pos:end="169:34">(<argument pos:start="169:21" pos:end="169:26"><expr pos:start="169:21" pos:end="169:26"><name pos:start="169:21" pos:end="169:26">status</name></expr></argument>, <argument pos:start="169:29" pos:end="169:30"><expr pos:start="169:29" pos:end="169:30"><operator pos:start="169:29" pos:end="169:30">==</operator></expr></argument>, <argument pos:start="169:33" pos:end="169:33"><expr pos:start="169:33" pos:end="169:33"><literal type="number" pos:start="169:33" pos:end="169:33">0</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>



    <expr_stmt pos:start="173:5" pos:end="173:32"><expr pos:start="173:5" pos:end="173:31"><call pos:start="173:5" pos:end="173:31"><name pos:start="173:5" pos:end="173:14">guest_free</name><argument_list pos:start="173:15" pos:end="173:31">(<argument pos:start="173:16" pos:end="173:20"><expr pos:start="173:16" pos:end="173:20"><name pos:start="173:16" pos:end="173:20">alloc</name></expr></argument>, <argument pos:start="173:23" pos:end="173:30"><expr pos:start="173:23" pos:end="173:30"><name pos:start="173:23" pos:end="173:30">req_addr</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>



    <comment type="block" pos:start="177:5" pos:end="177:22">/* Read request */</comment>

    <expr_stmt pos:start="179:5" pos:end="179:31"><expr pos:start="179:5" pos:end="179:30"><name pos:start="179:5" pos:end="179:12"><name pos:start="179:5" pos:end="179:7">req</name><operator pos:start="179:8" pos:end="179:8">.</operator><name pos:start="179:9" pos:end="179:12">type</name></name> <operator pos:start="179:14" pos:end="179:14">=</operator> <name pos:start="179:16" pos:end="179:30">VIRTIO_BLK_T_IN</name></expr>;</expr_stmt>

    <expr_stmt pos:start="181:5" pos:end="181:19"><expr pos:start="181:5" pos:end="181:18"><name pos:start="181:5" pos:end="181:14"><name pos:start="181:5" pos:end="181:7">req</name><operator pos:start="181:8" pos:end="181:8">.</operator><name pos:start="181:9" pos:end="181:14">ioprio</name></name> <operator pos:start="181:16" pos:end="181:16">=</operator> <literal type="number" pos:start="181:18" pos:end="181:18">1</literal></expr>;</expr_stmt>

    <expr_stmt pos:start="183:5" pos:end="183:19"><expr pos:start="183:5" pos:end="183:18"><name pos:start="183:5" pos:end="183:14"><name pos:start="183:5" pos:end="183:7">req</name><operator pos:start="183:8" pos:end="183:8">.</operator><name pos:start="183:9" pos:end="183:14">sector</name></name> <operator pos:start="183:16" pos:end="183:16">=</operator> <literal type="number" pos:start="183:18" pos:end="183:18">1</literal></expr>;</expr_stmt>

    <expr_stmt pos:start="185:5" pos:end="185:30"><expr pos:start="185:5" pos:end="185:29"><name pos:start="185:5" pos:end="185:12"><name pos:start="185:5" pos:end="185:7">req</name><operator pos:start="185:8" pos:end="185:8">.</operator><name pos:start="185:9" pos:end="185:12">data</name></name> <operator pos:start="185:14" pos:end="185:14">=</operator> <call pos:start="185:16" pos:end="185:29"><name pos:start="185:16" pos:end="185:24">g_malloc0</name><argument_list pos:start="185:25" pos:end="185:29">(<argument pos:start="185:26" pos:end="185:28"><expr pos:start="185:26" pos:end="185:28"><literal type="number" pos:start="185:26" pos:end="185:28">512</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>



    <expr_stmt pos:start="189:5" pos:end="189:52"><expr pos:start="189:5" pos:end="189:51"><name pos:start="189:5" pos:end="189:12">req_addr</name> <operator pos:start="189:14" pos:end="189:14">=</operator> <call pos:start="189:16" pos:end="189:51"><name pos:start="189:16" pos:end="189:33">virtio_blk_request</name><argument_list pos:start="189:34" pos:end="189:51">(<argument pos:start="189:35" pos:end="189:39"><expr pos:start="189:35" pos:end="189:39"><name pos:start="189:35" pos:end="189:39">alloc</name></expr></argument>, <argument pos:start="189:42" pos:end="189:45"><expr pos:start="189:42" pos:end="189:45"><operator pos:start="189:42" pos:end="189:42">&amp;</operator><name pos:start="189:43" pos:end="189:45">req</name></expr></argument>, <argument pos:start="189:48" pos:end="189:50"><expr pos:start="189:48" pos:end="189:50"><literal type="number" pos:start="189:48" pos:end="189:50">512</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>



    <expr_stmt pos:start="193:5" pos:end="193:21"><expr pos:start="193:5" pos:end="193:20"><call pos:start="193:5" pos:end="193:20"><name pos:start="193:5" pos:end="193:10">g_free</name><argument_list pos:start="193:11" pos:end="193:20">(<argument pos:start="193:12" pos:end="193:19"><expr pos:start="193:12" pos:end="193:19"><name pos:start="193:12" pos:end="193:19"><name pos:start="193:12" pos:end="193:14">req</name><operator pos:start="193:15" pos:end="193:15">.</operator><name pos:start="193:16" pos:end="193:19">data</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>



    <expr_stmt pos:start="197:5" pos:end="197:70"><expr pos:start="197:5" pos:end="197:69"><name pos:start="197:5" pos:end="197:13">free_head</name> <operator pos:start="197:15" pos:end="197:15">=</operator> <call pos:start="197:17" pos:end="197:69"><name pos:start="197:17" pos:end="197:30">qvirtqueue_add</name><argument_list pos:start="197:31" pos:end="197:69">(<argument pos:start="197:32" pos:end="197:41"><expr pos:start="197:32" pos:end="197:41"><operator pos:start="197:32" pos:end="197:32">&amp;</operator><name pos:start="197:33" pos:end="197:41"><name pos:start="197:33" pos:end="197:37">vqpci</name><operator pos:start="197:38" pos:end="197:39">-&gt;</operator><name pos:start="197:40" pos:end="197:41">vq</name></name></expr></argument>, <argument pos:start="197:44" pos:end="197:51"><expr pos:start="197:44" pos:end="197:51"><name pos:start="197:44" pos:end="197:51">req_addr</name></expr></argument>, <argument pos:start="197:54" pos:end="197:55"><expr pos:start="197:54" pos:end="197:55"><literal type="number" pos:start="197:54" pos:end="197:55">16</literal></expr></argument>, <argument pos:start="197:58" pos:end="197:62"><expr pos:start="197:58" pos:end="197:62"><name pos:start="197:58" pos:end="197:62">false</name></expr></argument>, <argument pos:start="197:65" pos:end="197:68"><expr pos:start="197:65" pos:end="197:68"><name pos:start="197:65" pos:end="197:68">true</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    <expr_stmt pos:start="199:5" pos:end="199:63"><expr pos:start="199:5" pos:end="199:62"><call pos:start="199:5" pos:end="199:62"><name pos:start="199:5" pos:end="199:18">qvirtqueue_add</name><argument_list pos:start="199:19" pos:end="199:62">(<argument pos:start="199:20" pos:end="199:29"><expr pos:start="199:20" pos:end="199:29"><operator pos:start="199:20" pos:end="199:20">&amp;</operator><name pos:start="199:21" pos:end="199:29"><name pos:start="199:21" pos:end="199:25">vqpci</name><operator pos:start="199:26" pos:end="199:27">-&gt;</operator><name pos:start="199:28" pos:end="199:29">vq</name></name></expr></argument>, <argument pos:start="199:32" pos:end="199:44"><expr pos:start="199:32" pos:end="199:44"><name pos:start="199:32" pos:end="199:39">req_addr</name> <operator pos:start="199:41" pos:end="199:41">+</operator> <literal type="number" pos:start="199:43" pos:end="199:44">16</literal></expr></argument>, <argument pos:start="199:47" pos:end="199:49"><expr pos:start="199:47" pos:end="199:49"><literal type="number" pos:start="199:47" pos:end="199:49">512</literal></expr></argument>, <argument pos:start="199:52" pos:end="199:55"><expr pos:start="199:52" pos:end="199:55"><name pos:start="199:52" pos:end="199:55">true</name></expr></argument>, <argument pos:start="199:58" pos:end="199:61"><expr pos:start="199:58" pos:end="199:61"><name pos:start="199:58" pos:end="199:61">true</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    <expr_stmt pos:start="201:5" pos:end="201:63"><expr pos:start="201:5" pos:end="201:62"><call pos:start="201:5" pos:end="201:62"><name pos:start="201:5" pos:end="201:18">qvirtqueue_add</name><argument_list pos:start="201:19" pos:end="201:62">(<argument pos:start="201:20" pos:end="201:29"><expr pos:start="201:20" pos:end="201:29"><operator pos:start="201:20" pos:end="201:20">&amp;</operator><name pos:start="201:21" pos:end="201:29"><name pos:start="201:21" pos:end="201:25">vqpci</name><operator pos:start="201:26" pos:end="201:27">-&gt;</operator><name pos:start="201:28" pos:end="201:29">vq</name></name></expr></argument>, <argument pos:start="201:32" pos:end="201:45"><expr pos:start="201:32" pos:end="201:45"><name pos:start="201:32" pos:end="201:39">req_addr</name> <operator pos:start="201:41" pos:end="201:41">+</operator> <literal type="number" pos:start="201:43" pos:end="201:45">528</literal></expr></argument>, <argument pos:start="201:48" pos:end="201:48"><expr pos:start="201:48" pos:end="201:48"><literal type="number" pos:start="201:48" pos:end="201:48">1</literal></expr></argument>, <argument pos:start="201:51" pos:end="201:54"><expr pos:start="201:51" pos:end="201:54"><name pos:start="201:51" pos:end="201:54">true</name></expr></argument>, <argument pos:start="201:57" pos:end="201:61"><expr pos:start="201:57" pos:end="201:61"><name pos:start="201:57" pos:end="201:61">false</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>



    <expr_stmt pos:start="205:5" pos:end="205:69"><expr pos:start="205:5" pos:end="205:68"><call pos:start="205:5" pos:end="205:68"><name pos:start="205:5" pos:end="205:19">qvirtqueue_kick</name><argument_list pos:start="205:20" pos:end="205:68">(<argument pos:start="205:21" pos:end="205:32"><expr pos:start="205:21" pos:end="205:32"><operator pos:start="205:21" pos:end="205:21">&amp;</operator><name pos:start="205:22" pos:end="205:32">qvirtio_pci</name></expr></argument>, <argument pos:start="205:35" pos:end="205:44"><expr pos:start="205:35" pos:end="205:44"><operator pos:start="205:35" pos:end="205:35">&amp;</operator><name pos:start="205:36" pos:end="205:44"><name pos:start="205:36" pos:end="205:38">dev</name><operator pos:start="205:39" pos:end="205:40">-&gt;</operator><name pos:start="205:41" pos:end="205:44">vdev</name></name></expr></argument>, <argument pos:start="205:47" pos:end="205:56"><expr pos:start="205:47" pos:end="205:56"><operator pos:start="205:47" pos:end="205:47">&amp;</operator><name pos:start="205:48" pos:end="205:56"><name pos:start="205:48" pos:end="205:52">vqpci</name><operator pos:start="205:53" pos:end="205:54">-&gt;</operator><name pos:start="205:55" pos:end="205:56">vq</name></name></expr></argument>, <argument pos:start="205:59" pos:end="205:67"><expr pos:start="205:59" pos:end="205:67"><name pos:start="205:59" pos:end="205:67">free_head</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>



    <expr_stmt pos:start="209:5" pos:end="211:51"><expr pos:start="209:5" pos:end="211:50"><call pos:start="209:5" pos:end="211:50"><name pos:start="209:5" pos:end="209:26">qvirtio_wait_queue_isr</name><argument_list pos:start="209:27" pos:end="211:50">(<argument pos:start="209:28" pos:end="209:39"><expr pos:start="209:28" pos:end="209:39"><operator pos:start="209:28" pos:end="209:28">&amp;</operator><name pos:start="209:29" pos:end="209:39">qvirtio_pci</name></expr></argument>, <argument pos:start="209:42" pos:end="209:51"><expr pos:start="209:42" pos:end="209:51"><operator pos:start="209:42" pos:end="209:42">&amp;</operator><name pos:start="209:43" pos:end="209:51"><name pos:start="209:43" pos:end="209:45">dev</name><operator pos:start="209:46" pos:end="209:47">-&gt;</operator><name pos:start="209:48" pos:end="209:51">vdev</name></name></expr></argument>, <argument pos:start="209:54" pos:end="209:63"><expr pos:start="209:54" pos:end="209:63"><operator pos:start="209:54" pos:end="209:54">&amp;</operator><name pos:start="209:55" pos:end="209:63"><name pos:start="209:55" pos:end="209:59">vqpci</name><operator pos:start="209:60" pos:end="209:61">-&gt;</operator><name pos:start="209:62" pos:end="209:63">vq</name></name></expr></argument>,

                           <argument pos:start="211:28" pos:end="211:49"><expr pos:start="211:28" pos:end="211:49"><name pos:start="211:28" pos:end="211:49">QVIRTIO_BLK_TIMEOUT_US</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>



    <expr_stmt pos:start="215:5" pos:end="215:35"><expr pos:start="215:5" pos:end="215:34"><name pos:start="215:5" pos:end="215:10">status</name> <operator pos:start="215:12" pos:end="215:12">=</operator> <call pos:start="215:14" pos:end="215:34"><name pos:start="215:14" pos:end="215:18">readb</name><argument_list pos:start="215:19" pos:end="215:34">(<argument pos:start="215:20" pos:end="215:33"><expr pos:start="215:20" pos:end="215:33"><name pos:start="215:20" pos:end="215:27">req_addr</name> <operator pos:start="215:29" pos:end="215:29">+</operator> <literal type="number" pos:start="215:31" pos:end="215:33">528</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    <expr_stmt pos:start="217:5" pos:end="217:35"><expr pos:start="217:5" pos:end="217:34"><call pos:start="217:5" pos:end="217:34"><name pos:start="217:5" pos:end="217:19">g_assert_cmpint</name><argument_list pos:start="217:20" pos:end="217:34">(<argument pos:start="217:21" pos:end="217:26"><expr pos:start="217:21" pos:end="217:26"><name pos:start="217:21" pos:end="217:26">status</name></expr></argument>, <argument pos:start="217:29" pos:end="217:30"><expr pos:start="217:29" pos:end="217:30"><operator pos:start="217:29" pos:end="217:30">==</operator></expr></argument>, <argument pos:start="217:33" pos:end="217:33"><expr pos:start="217:33" pos:end="217:33"><literal type="number" pos:start="217:33" pos:end="217:33">0</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>



    <expr_stmt pos:start="221:5" pos:end="221:26"><expr pos:start="221:5" pos:end="221:25"><name pos:start="221:5" pos:end="221:8">data</name> <operator pos:start="221:10" pos:end="221:10">=</operator> <call pos:start="221:12" pos:end="221:25"><name pos:start="221:12" pos:end="221:20">g_malloc0</name><argument_list pos:start="221:21" pos:end="221:25">(<argument pos:start="221:22" pos:end="221:24"><expr pos:start="221:22" pos:end="221:24"><literal type="number" pos:start="221:22" pos:end="221:24">512</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    <expr_stmt pos:start="223:5" pos:end="223:38"><expr pos:start="223:5" pos:end="223:37"><call pos:start="223:5" pos:end="223:37"><name pos:start="223:5" pos:end="223:11">memread</name><argument_list pos:start="223:12" pos:end="223:37">(<argument pos:start="223:13" pos:end="223:25"><expr pos:start="223:13" pos:end="223:25"><name pos:start="223:13" pos:end="223:20">req_addr</name> <operator pos:start="223:22" pos:end="223:22">+</operator> <literal type="number" pos:start="223:24" pos:end="223:25">16</literal></expr></argument>, <argument pos:start="223:28" pos:end="223:31"><expr pos:start="223:28" pos:end="223:31"><name pos:start="223:28" pos:end="223:31">data</name></expr></argument>, <argument pos:start="223:34" pos:end="223:36"><expr pos:start="223:34" pos:end="223:36"><literal type="number" pos:start="223:34" pos:end="223:36">512</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    <expr_stmt pos:start="225:5" pos:end="225:38"><expr pos:start="225:5" pos:end="225:37"><call pos:start="225:5" pos:end="225:37"><name pos:start="225:5" pos:end="225:19">g_assert_cmpstr</name><argument_list pos:start="225:20" pos:end="225:37">(<argument pos:start="225:21" pos:end="225:24"><expr pos:start="225:21" pos:end="225:24"><name pos:start="225:21" pos:end="225:24">data</name></expr></argument>, <argument pos:start="225:27" pos:end="225:28"><expr pos:start="225:27" pos:end="225:28"><operator pos:start="225:27" pos:end="225:28">==</operator></expr></argument>, <argument pos:start="225:31" pos:end="225:36"><expr pos:start="225:31" pos:end="225:36"><literal type="string" pos:start="225:31" pos:end="225:36">"TEST"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    <expr_stmt pos:start="227:5" pos:end="227:17"><expr pos:start="227:5" pos:end="227:16"><call pos:start="227:5" pos:end="227:16"><name pos:start="227:5" pos:end="227:10">g_free</name><argument_list pos:start="227:11" pos:end="227:16">(<argument pos:start="227:12" pos:end="227:15"><expr pos:start="227:12" pos:end="227:15"><name pos:start="227:12" pos:end="227:15">data</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>



    <expr_stmt pos:start="231:5" pos:end="231:32"><expr pos:start="231:5" pos:end="231:31"><call pos:start="231:5" pos:end="231:31"><name pos:start="231:5" pos:end="231:14">guest_free</name><argument_list pos:start="231:15" pos:end="231:31">(<argument pos:start="231:16" pos:end="231:20"><expr pos:start="231:16" pos:end="231:20"><name pos:start="231:16" pos:end="231:20">alloc</name></expr></argument>, <argument pos:start="231:23" pos:end="231:30"><expr pos:start="231:23" pos:end="231:30"><name pos:start="231:23" pos:end="231:30">req_addr</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>



    <comment type="block" pos:start="235:5" pos:end="235:18">/* End test */</comment>

    <expr_stmt pos:start="237:5" pos:end="237:38"><expr pos:start="237:5" pos:end="237:37"><call pos:start="237:5" pos:end="237:37"><name pos:start="237:5" pos:end="237:14">guest_free</name><argument_list pos:start="237:15" pos:end="237:37">(<argument pos:start="237:16" pos:end="237:20"><expr pos:start="237:16" pos:end="237:20"><name pos:start="237:16" pos:end="237:20">alloc</name></expr></argument>, <argument pos:start="237:23" pos:end="237:36"><expr pos:start="237:23" pos:end="237:36"><name pos:start="237:23" pos:end="237:36"><name pos:start="237:23" pos:end="237:27">vqpci</name><operator pos:start="237:28" pos:end="237:29">-&gt;</operator><name pos:start="237:30" pos:end="237:31">vq</name><operator pos:start="237:32" pos:end="237:32">.</operator><name pos:start="237:33" pos:end="237:36">desc</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    <expr_stmt pos:start="239:5" pos:end="239:27"><expr pos:start="239:5" pos:end="239:26"><call pos:start="239:5" pos:end="239:26"><name pos:start="239:5" pos:end="239:19">pc_alloc_uninit</name><argument_list pos:start="239:20" pos:end="239:26">(<argument pos:start="239:21" pos:end="239:25"><expr pos:start="239:21" pos:end="239:25"><name pos:start="239:21" pos:end="239:25">alloc</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    <expr_stmt pos:start="241:5" pos:end="241:33"><expr pos:start="241:5" pos:end="241:32"><call pos:start="241:5" pos:end="241:32"><name pos:start="241:5" pos:end="241:21">qpci_msix_disable</name><argument_list pos:start="241:22" pos:end="241:32">(<argument pos:start="241:23" pos:end="241:31"><expr pos:start="241:23" pos:end="241:31"><name pos:start="241:23" pos:end="241:31"><name pos:start="241:23" pos:end="241:25">dev</name><operator pos:start="241:26" pos:end="241:27">-&gt;</operator><name pos:start="241:28" pos:end="241:31">pdev</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    <expr_stmt pos:start="243:5" pos:end="243:36"><expr pos:start="243:5" pos:end="243:35"><call pos:start="243:5" pos:end="243:35"><name pos:start="243:5" pos:end="243:30">qvirtio_pci_device_disable</name><argument_list pos:start="243:31" pos:end="243:35">(<argument pos:start="243:32" pos:end="243:34"><expr pos:start="243:32" pos:end="243:34"><name pos:start="243:32" pos:end="243:34">dev</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    <expr_stmt pos:start="245:5" pos:end="245:16"><expr pos:start="245:5" pos:end="245:15"><call pos:start="245:5" pos:end="245:15"><name pos:start="245:5" pos:end="245:10">g_free</name><argument_list pos:start="245:11" pos:end="245:15">(<argument pos:start="245:12" pos:end="245:14"><expr pos:start="245:12" pos:end="245:14"><name pos:start="245:12" pos:end="245:14">dev</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    <expr_stmt pos:start="247:5" pos:end="247:22"><expr pos:start="247:5" pos:end="247:21"><call pos:start="247:5" pos:end="247:21"><name pos:start="247:5" pos:end="247:16">qpci_free_pc</name><argument_list pos:start="247:17" pos:end="247:21">(<argument pos:start="247:18" pos:end="247:20"><expr pos:start="247:18" pos:end="247:20"><name pos:start="247:18" pos:end="247:20">bus</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    <expr_stmt pos:start="249:5" pos:end="249:15"><expr pos:start="249:5" pos:end="249:14"><call pos:start="249:5" pos:end="249:14"><name pos:start="249:5" pos:end="249:12">test_end</name><argument_list pos:start="249:13" pos:end="249:14">()</argument_list></call></expr>;</expr_stmt>

</block_content>}</block></function>
</unit>
