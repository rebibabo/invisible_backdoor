<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<unit xmlns="http://www.srcML.org/srcML/src" xmlns:pos="http://www.srcML.org/srcML/position" revision="1.0.0" language="C" filename="dataset/ropgen/aug/1/13246.c" pos:tabs="8"><function pos:start="1:1" pos:end="87:13"><type pos:start="1:1" pos:end="1:10"><specifier pos:start="1:1" pos:end="1:6">static</specifier> <name pos:start="1:8" pos:end="1:10">int</name></type> <name pos:start="1:12" pos:end="1:28">qxl_track_command</name><parameter_list pos:start="1:29" pos:end="1:74">(<parameter pos:start="1:30" pos:end="1:46"><decl pos:start="1:30" pos:end="1:46"><type pos:start="1:30" pos:end="1:46"><name pos:start="1:30" pos:end="1:41">PCIQXLDevice</name> <modifier pos:start="1:43" pos:end="1:43">*</modifier></type><name pos:start="1:44" pos:end="1:46">qxl</name></decl></parameter>, <parameter pos:start="1:49" pos:end="1:73"><decl pos:start="1:49" pos:end="1:73"><type pos:start="1:49" pos:end="1:73"><name pos:start="1:49" pos:end="1:68"><name pos:start="1:49" pos:end="1:54">struct</name> <name pos:start="1:56" pos:end="1:68">QXLCommandExt</name></name> <modifier pos:start="1:70" pos:end="1:70">*</modifier></type><name pos:start="1:71" pos:end="1:73">ext</name></decl></parameter>)</parameter_list>

<block pos:start="3:1" pos:end="87:13">{<block_content pos:start="5:5" pos:end="87:13">

    <switch pos:start="5:5" pos:end="87:13">switch <condition pos:start="5:12" pos:end="5:39">(<expr pos:start="5:13" pos:end="5:38"><call pos:start="5:13" pos:end="5:38"><name pos:start="5:13" pos:end="5:23">le32_to_cpu</name><argument_list pos:start="5:24" pos:end="5:38">(<argument pos:start="5:25" pos:end="5:37"><expr pos:start="5:25" pos:end="5:37"><name pos:start="5:25" pos:end="5:37"><name pos:start="5:25" pos:end="5:27">ext</name><operator pos:start="5:28" pos:end="5:29">-&gt;</operator><name pos:start="5:30" pos:end="5:32">cmd</name><operator pos:start="5:33" pos:end="5:33">.</operator><name pos:start="5:34" pos:end="5:37">type</name></name></expr></argument>)</argument_list></call></expr>)</condition> <block pos:start="5:41" pos:end="87:13">{<block_content pos:start="7:5" pos:end="87:13">

    <case pos:start="7:5" pos:end="7:25">case <expr pos:start="7:10" pos:end="7:24"><name pos:start="7:10" pos:end="7:24">QXL_CMD_SURFACE</name></expr>:</case>

    <block pos:start="9:5" pos:end="87:13">{<block_content pos:start="11:9" pos:end="87:13">

        <decl_stmt pos:start="11:9" pos:end="11:78"><decl pos:start="11:9" pos:end="11:77"><type pos:start="11:9" pos:end="11:23"><name pos:start="11:9" pos:end="11:21">QXLSurfaceCmd</name> <modifier pos:start="11:23" pos:end="11:23">*</modifier></type><name pos:start="11:24" pos:end="11:26">cmd</name> <init pos:start="11:28" pos:end="11:77">= <expr pos:start="11:30" pos:end="11:77"><call pos:start="11:30" pos:end="11:77"><name pos:start="11:30" pos:end="11:42">qxl_phys2virt</name><argument_list pos:start="11:43" pos:end="11:77">(<argument pos:start="11:44" pos:end="11:46"><expr pos:start="11:44" pos:end="11:46"><name pos:start="11:44" pos:end="11:46">qxl</name></expr></argument>, <argument pos:start="11:49" pos:end="11:61"><expr pos:start="11:49" pos:end="11:61"><name pos:start="11:49" pos:end="11:61"><name pos:start="11:49" pos:end="11:51">ext</name><operator pos:start="11:52" pos:end="11:53">-&gt;</operator><name pos:start="11:54" pos:end="11:56">cmd</name><operator pos:start="11:57" pos:end="11:57">.</operator><name pos:start="11:58" pos:end="11:61">data</name></name></expr></argument>, <argument pos:start="11:64" pos:end="11:76"><expr pos:start="11:64" pos:end="11:76"><name pos:start="11:64" pos:end="11:76"><name pos:start="11:64" pos:end="11:66">ext</name><operator pos:start="11:67" pos:end="11:68">-&gt;</operator><name pos:start="11:69" pos:end="11:76">group_id</name></name></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>



        <if_stmt pos:start="15:9" pos:end="87:13"><if pos:start="15:9" pos:end="87:13">if <condition pos:start="15:12" pos:end="15:17">(<expr pos:start="15:13" pos:end="15:16"><operator pos:start="15:13" pos:end="15:13">!</operator><name pos:start="15:14" pos:end="15:16">cmd</name></expr>)</condition> <block pos:start="15:19" pos:end="87:13">{<block_content pos:start="19:9" pos:end="87:13">



        <decl_stmt pos:start="19:9" pos:end="19:51"><decl pos:start="19:9" pos:end="19:50"><type pos:start="19:9" pos:end="19:16"><name pos:start="19:9" pos:end="19:16">uint32_t</name></type> <name pos:start="19:18" pos:end="19:19">id</name> <init pos:start="19:21" pos:end="19:50">= <expr pos:start="19:23" pos:end="19:50"><call pos:start="19:23" pos:end="19:50"><name pos:start="19:23" pos:end="19:33">le32_to_cpu</name><argument_list pos:start="19:34" pos:end="19:50">(<argument pos:start="19:35" pos:end="19:49"><expr pos:start="19:35" pos:end="19:49"><name pos:start="19:35" pos:end="19:49"><name pos:start="19:35" pos:end="19:37">cmd</name><operator pos:start="19:38" pos:end="19:39">-&gt;</operator><name pos:start="19:40" pos:end="19:49">surface_id</name></name></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>



        <if_stmt pos:start="23:9" pos:end="87:13"><if pos:start="23:9" pos:end="87:13">if <condition pos:start="23:12" pos:end="23:40">(<expr pos:start="23:13" pos:end="23:39"><name pos:start="23:13" pos:end="23:14">id</name> <operator pos:start="23:16" pos:end="23:17">&gt;=</operator> <name pos:start="23:19" pos:end="23:39"><name pos:start="23:19" pos:end="23:21">qxl</name><operator pos:start="23:22" pos:end="23:23">-&gt;</operator><name pos:start="23:24" pos:end="23:26">ssd</name><operator pos:start="23:27" pos:end="23:27">.</operator><name pos:start="23:28" pos:end="23:39">num_surfaces</name></name></expr>)</condition> <block pos:start="23:42" pos:end="87:13">{<block_content pos:start="25:13" pos:end="87:13">

            <expr_stmt pos:start="25:13" pos:end="27:53"><expr pos:start="25:13" pos:end="27:52"><call pos:start="25:13" pos:end="27:52"><name pos:start="25:13" pos:end="25:29">qxl_set_guest_bug</name><argument_list pos:start="25:30" pos:end="27:52">(<argument pos:start="25:31" pos:end="25:33"><expr pos:start="25:31" pos:end="25:33"><name pos:start="25:31" pos:end="25:33">qxl</name></expr></argument>, <argument pos:start="25:36" pos:end="25:64"><expr pos:start="25:36" pos:end="25:64"><literal type="string" pos:start="25:36" pos:end="25:64">"QXL_CMD_SURFACE id %d &gt;= %d"</literal></expr></argument>, <argument pos:start="25:67" pos:end="25:68"><expr pos:start="25:67" pos:end="25:68"><name pos:start="25:67" pos:end="25:68">id</name></expr></argument>,

                              <argument pos:start="27:31" pos:end="27:51"><expr pos:start="27:31" pos:end="27:51"><name pos:start="27:31" pos:end="27:51"><name pos:start="27:31" pos:end="27:33">qxl</name><operator pos:start="27:34" pos:end="27:35">-&gt;</operator><name pos:start="27:36" pos:end="27:38">ssd</name><operator pos:start="27:39" pos:end="27:39">.</operator><name pos:start="27:40" pos:end="27:51">num_surfaces</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>









        <expr_stmt pos:start="37:9" pos:end="37:42"><expr pos:start="37:9" pos:end="37:41"><call pos:start="37:9" pos:end="37:41"><name pos:start="37:9" pos:end="37:23">qemu_mutex_lock</name><argument_list pos:start="37:24" pos:end="37:41">(<argument pos:start="37:25" pos:end="37:40"><expr pos:start="37:25" pos:end="37:40"><operator pos:start="37:25" pos:end="37:25">&amp;</operator><name pos:start="37:26" pos:end="37:40"><name pos:start="37:26" pos:end="37:28">qxl</name><operator pos:start="37:29" pos:end="37:30">-&gt;</operator><name pos:start="37:31" pos:end="37:40">track_lock</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <if_stmt pos:start="39:9" pos:end="87:13"><if pos:start="39:9" pos:end="87:13">if <condition pos:start="39:12" pos:end="39:48">(<expr pos:start="39:13" pos:end="39:47"><name pos:start="39:13" pos:end="39:21"><name pos:start="39:13" pos:end="39:15">cmd</name><operator pos:start="39:16" pos:end="39:17">-&gt;</operator><name pos:start="39:18" pos:end="39:21">type</name></name> <operator pos:start="39:23" pos:end="39:24">==</operator> <name pos:start="39:26" pos:end="39:47">QXL_SURFACE_CMD_CREATE</name></expr>)</condition> <block pos:start="39:50" pos:end="87:13">{<block_content pos:start="41:13" pos:end="87:13">

            <expr_stmt pos:start="41:13" pos:end="41:57"><expr pos:start="41:13" pos:end="41:56"><name pos:start="41:13" pos:end="41:40"><name pos:start="41:13" pos:end="41:15">qxl</name><operator pos:start="41:16" pos:end="41:17">-&gt;</operator><name pos:start="41:18" pos:end="41:31">guest_surfaces</name><operator pos:start="41:32" pos:end="41:32">.</operator><name pos:start="41:33" pos:end="41:36">cmds</name><index pos:start="41:37" pos:end="41:40">[<expr pos:start="41:38" pos:end="41:39"><name pos:start="41:38" pos:end="41:39">id</name></expr>]</index></name> <operator pos:start="41:42" pos:end="41:42">=</operator> <name pos:start="41:44" pos:end="41:56"><name pos:start="41:44" pos:end="41:46">ext</name><operator pos:start="41:47" pos:end="41:48">-&gt;</operator><name pos:start="41:49" pos:end="41:51">cmd</name><operator pos:start="41:52" pos:end="41:52">.</operator><name pos:start="41:53" pos:end="41:56">data</name></name></expr>;</expr_stmt>

            <expr_stmt pos:start="43:13" pos:end="43:40"><expr pos:start="43:13" pos:end="43:39"><name pos:start="43:13" pos:end="43:37"><name pos:start="43:13" pos:end="43:15">qxl</name><operator pos:start="43:16" pos:end="43:17">-&gt;</operator><name pos:start="43:18" pos:end="43:31">guest_surfaces</name><operator pos:start="43:32" pos:end="43:32">.</operator><name pos:start="43:33" pos:end="43:37">count</name></name><operator pos:start="43:38" pos:end="43:39">++</operator></expr>;</expr_stmt>

            <if_stmt pos:start="45:13" pos:end="47:68"><if pos:start="45:13" pos:end="47:68">if <condition pos:start="45:16" pos:end="45:68">(<expr pos:start="45:17" pos:end="45:67"><name pos:start="45:17" pos:end="45:39"><name pos:start="45:17" pos:end="45:19">qxl</name><operator pos:start="45:20" pos:end="45:21">-&gt;</operator><name pos:start="45:22" pos:end="45:35">guest_surfaces</name><operator pos:start="45:36" pos:end="45:36">.</operator><name pos:start="45:37" pos:end="45:39">max</name></name> <operator pos:start="45:41" pos:end="45:41">&lt;</operator> <name pos:start="45:43" pos:end="45:67"><name pos:start="45:43" pos:end="45:45">qxl</name><operator pos:start="45:46" pos:end="45:47">-&gt;</operator><name pos:start="45:48" pos:end="45:61">guest_surfaces</name><operator pos:start="45:62" pos:end="45:62">.</operator><name pos:start="45:63" pos:end="45:67">count</name></name></expr>)</condition><block type="pseudo" pos:start="47:17" pos:end="47:68"><block_content pos:start="47:17" pos:end="47:68">

                <expr_stmt pos:start="47:17" pos:end="47:68"><expr pos:start="47:17" pos:end="47:67"><name pos:start="47:17" pos:end="47:39"><name pos:start="47:17" pos:end="47:19">qxl</name><operator pos:start="47:20" pos:end="47:21">-&gt;</operator><name pos:start="47:22" pos:end="47:35">guest_surfaces</name><operator pos:start="47:36" pos:end="47:36">.</operator><name pos:start="47:37" pos:end="47:39">max</name></name> <operator pos:start="47:41" pos:end="47:41">=</operator> <name pos:start="47:43" pos:end="47:67"><name pos:start="47:43" pos:end="47:45">qxl</name><operator pos:start="47:46" pos:end="47:47">-&gt;</operator><name pos:start="47:48" pos:end="47:61">guest_surfaces</name><operator pos:start="47:62" pos:end="47:62">.</operator><name pos:start="47:63" pos:end="47:67">count</name></name></expr>;</expr_stmt></block_content></block></if></if_stmt>


        <if_stmt pos:start="50:9" pos:end="87:13"><if pos:start="50:9" pos:end="87:13">if <condition pos:start="50:12" pos:end="50:49">(<expr pos:start="50:13" pos:end="50:48"><name pos:start="50:13" pos:end="50:21"><name pos:start="50:13" pos:end="50:15">cmd</name><operator pos:start="50:16" pos:end="50:17">-&gt;</operator><name pos:start="50:18" pos:end="50:21">type</name></name> <operator pos:start="50:23" pos:end="50:24">==</operator> <name pos:start="50:26" pos:end="50:48">QXL_SURFACE_CMD_DESTROY</name></expr>)</condition> <block pos:start="50:51" pos:end="87:13">{<block_content pos:start="52:13" pos:end="87:13">

            <expr_stmt pos:start="52:13" pos:end="52:45"><expr pos:start="52:13" pos:end="52:44"><name pos:start="52:13" pos:end="52:40"><name pos:start="52:13" pos:end="52:15">qxl</name><operator pos:start="52:16" pos:end="52:17">-&gt;</operator><name pos:start="52:18" pos:end="52:31">guest_surfaces</name><operator pos:start="52:32" pos:end="52:32">.</operator><name pos:start="52:33" pos:end="52:36">cmds</name><index pos:start="52:37" pos:end="52:40">[<expr pos:start="52:38" pos:end="52:39"><name pos:start="52:38" pos:end="52:39">id</name></expr>]</index></name> <operator pos:start="52:42" pos:end="52:42">=</operator> <literal type="number" pos:start="52:44" pos:end="52:44">0</literal></expr>;</expr_stmt>

            <expr_stmt pos:start="54:13" pos:end="54:40"><expr pos:start="54:13" pos:end="54:39"><name pos:start="54:13" pos:end="54:37"><name pos:start="54:13" pos:end="54:15">qxl</name><operator pos:start="54:16" pos:end="54:17">-&gt;</operator><name pos:start="54:18" pos:end="54:31">guest_surfaces</name><operator pos:start="54:32" pos:end="54:32">.</operator><name pos:start="54:33" pos:end="54:37">count</name></name><operator pos:start="54:38" pos:end="54:39">--</operator></expr>;</expr_stmt>


        <expr_stmt pos:start="57:9" pos:end="57:44"><expr pos:start="57:9" pos:end="57:43"><call pos:start="57:9" pos:end="57:43"><name pos:start="57:9" pos:end="57:25">qemu_mutex_unlock</name><argument_list pos:start="57:26" pos:end="57:43">(<argument pos:start="57:27" pos:end="57:42"><expr pos:start="57:27" pos:end="57:42"><operator pos:start="57:27" pos:end="57:27">&amp;</operator><name pos:start="57:28" pos:end="57:42"><name pos:start="57:28" pos:end="57:30">qxl</name><operator pos:start="57:31" pos:end="57:32">-&gt;</operator><name pos:start="57:33" pos:end="57:42">track_lock</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <break pos:start="59:9" pos:end="59:14">break;</break>


    <case pos:start="62:5" pos:end="62:24">case <expr pos:start="62:10" pos:end="62:23"><name pos:start="62:10" pos:end="62:23">QXL_CMD_CURSOR</name></expr>:</case>

    <block pos:start="64:5" pos:end="87:13">{<block_content pos:start="66:9" pos:end="87:13">

        <decl_stmt pos:start="66:9" pos:end="66:77"><decl pos:start="66:9" pos:end="66:76"><type pos:start="66:9" pos:end="66:22"><name pos:start="66:9" pos:end="66:20">QXLCursorCmd</name> <modifier pos:start="66:22" pos:end="66:22">*</modifier></type><name pos:start="66:23" pos:end="66:25">cmd</name> <init pos:start="66:27" pos:end="66:76">= <expr pos:start="66:29" pos:end="66:76"><call pos:start="66:29" pos:end="66:76"><name pos:start="66:29" pos:end="66:41">qxl_phys2virt</name><argument_list pos:start="66:42" pos:end="66:76">(<argument pos:start="66:43" pos:end="66:45"><expr pos:start="66:43" pos:end="66:45"><name pos:start="66:43" pos:end="66:45">qxl</name></expr></argument>, <argument pos:start="66:48" pos:end="66:60"><expr pos:start="66:48" pos:end="66:60"><name pos:start="66:48" pos:end="66:60"><name pos:start="66:48" pos:end="66:50">ext</name><operator pos:start="66:51" pos:end="66:52">-&gt;</operator><name pos:start="66:53" pos:end="66:55">cmd</name><operator pos:start="66:56" pos:end="66:56">.</operator><name pos:start="66:57" pos:end="66:60">data</name></name></expr></argument>, <argument pos:start="66:63" pos:end="66:75"><expr pos:start="66:63" pos:end="66:75"><name pos:start="66:63" pos:end="66:75"><name pos:start="66:63" pos:end="66:65">ext</name><operator pos:start="66:66" pos:end="66:67">-&gt;</operator><name pos:start="66:68" pos:end="66:75">group_id</name></name></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>



        <if_stmt pos:start="70:9" pos:end="87:13"><if pos:start="70:9" pos:end="87:13">if <condition pos:start="70:12" pos:end="70:17">(<expr pos:start="70:13" pos:end="70:16"><operator pos:start="70:13" pos:end="70:13">!</operator><name pos:start="70:14" pos:end="70:16">cmd</name></expr>)</condition> <block pos:start="70:19" pos:end="87:13">{<block_content pos:start="74:9" pos:end="87:13">



        <if_stmt pos:start="74:9" pos:end="87:13"><if pos:start="74:9" pos:end="87:13">if <condition pos:start="74:12" pos:end="74:40">(<expr pos:start="74:13" pos:end="74:39"><name pos:start="74:13" pos:end="74:21"><name pos:start="74:13" pos:end="74:15">cmd</name><operator pos:start="74:16" pos:end="74:17">-&gt;</operator><name pos:start="74:18" pos:end="74:21">type</name></name> <operator pos:start="74:23" pos:end="74:24">==</operator> <name pos:start="74:26" pos:end="74:39">QXL_CURSOR_SET</name></expr>)</condition> <block pos:start="74:42" pos:end="87:13">{<block_content pos:start="76:13" pos:end="87:13">

            <expr_stmt pos:start="76:13" pos:end="76:46"><expr pos:start="76:13" pos:end="76:45"><call pos:start="76:13" pos:end="76:45"><name pos:start="76:13" pos:end="76:27">qemu_mutex_lock</name><argument_list pos:start="76:28" pos:end="76:45">(<argument pos:start="76:29" pos:end="76:44"><expr pos:start="76:29" pos:end="76:44"><operator pos:start="76:29" pos:end="76:29">&amp;</operator><name pos:start="76:30" pos:end="76:44"><name pos:start="76:30" pos:end="76:32">qxl</name><operator pos:start="76:33" pos:end="76:34">-&gt;</operator><name pos:start="76:35" pos:end="76:44">track_lock</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

            <expr_stmt pos:start="78:13" pos:end="78:46"><expr pos:start="78:13" pos:end="78:45"><name pos:start="78:13" pos:end="78:29"><name pos:start="78:13" pos:end="78:15">qxl</name><operator pos:start="78:16" pos:end="78:17">-&gt;</operator><name pos:start="78:18" pos:end="78:29">guest_cursor</name></name> <operator pos:start="78:31" pos:end="78:31">=</operator> <name pos:start="78:33" pos:end="78:45"><name pos:start="78:33" pos:end="78:35">ext</name><operator pos:start="78:36" pos:end="78:37">-&gt;</operator><name pos:start="78:38" pos:end="78:40">cmd</name><operator pos:start="78:41" pos:end="78:41">.</operator><name pos:start="78:42" pos:end="78:45">data</name></name></expr>;</expr_stmt>

            <expr_stmt pos:start="80:13" pos:end="80:48"><expr pos:start="80:13" pos:end="80:47"><call pos:start="80:13" pos:end="80:47"><name pos:start="80:13" pos:end="80:29">qemu_mutex_unlock</name><argument_list pos:start="80:30" pos:end="80:47">(<argument pos:start="80:31" pos:end="80:46"><expr pos:start="80:31" pos:end="80:46"><operator pos:start="80:31" pos:end="80:31">&amp;</operator><name pos:start="80:32" pos:end="80:46"><name pos:start="80:32" pos:end="80:34">qxl</name><operator pos:start="80:35" pos:end="80:36">-&gt;</operator><name pos:start="80:37" pos:end="80:46">track_lock</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>


        <break pos:start="83:9" pos:end="83:14">break;</break>



    <return pos:start="87:5" pos:end="87:13">return <expr pos:start="87:12" pos:end="87:12"><literal type="number" pos:start="87:12" pos:end="87:12">0</literal></expr>;</return></block_content></block></if></if_stmt></block_content></block></if></if_stmt></block_content></block></block_content></block></if></if_stmt></block_content></block></if></if_stmt></block_content></block></if></if_stmt></block_content></block></if></if_stmt></block_content></block></block_content></block></switch></block_content></block></function>
</unit>
