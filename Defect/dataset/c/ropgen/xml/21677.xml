<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<unit xmlns="http://www.srcML.org/srcML/src" xmlns:pos="http://www.srcML.org/srcML/position" revision="1.0.0" language="C" filename="dataset/ropgen/aug/1/21677.c" pos:tabs="8"><function pos:start="1:1" pos:end="55:1"><type pos:start="1:1" pos:end="1:24"><specifier pos:start="1:1" pos:end="1:6">static</specifier> <name pos:start="1:8" pos:end="1:11">void</name> <name pos:start="1:13" pos:end="1:24">coroutine_fn</name></type> <name pos:start="1:26" pos:end="1:43">v9fs_fix_fid_paths</name><parameter_list pos:start="1:44" pos:end="7:65">(<parameter pos:start="1:45" pos:end="1:56"><decl pos:start="1:45" pos:end="1:56"><type pos:start="1:45" pos:end="1:56"><name pos:start="1:45" pos:end="1:51">V9fsPDU</name> <modifier pos:start="1:53" pos:end="1:53">*</modifier></type><name pos:start="1:54" pos:end="1:56">pdu</name></decl></parameter>, <parameter pos:start="1:59" pos:end="1:74"><decl pos:start="1:59" pos:end="1:74"><type pos:start="1:59" pos:end="1:74"><name pos:start="1:59" pos:end="1:66">V9fsPath</name> <modifier pos:start="1:68" pos:end="1:68">*</modifier></type><name pos:start="1:69" pos:end="1:74">olddir</name></decl></parameter>,

                                            <parameter pos:start="3:45" pos:end="3:64"><decl pos:start="3:45" pos:end="3:64"><type pos:start="3:45" pos:end="3:64"><name pos:start="3:45" pos:end="3:54">V9fsString</name> <modifier pos:start="3:56" pos:end="3:56">*</modifier></type><name pos:start="3:57" pos:end="3:64">old_name</name></decl></parameter>,

                                            <parameter pos:start="5:45" pos:end="5:60"><decl pos:start="5:45" pos:end="5:60"><type pos:start="5:45" pos:end="5:60"><name pos:start="5:45" pos:end="5:52">V9fsPath</name> <modifier pos:start="5:54" pos:end="5:54">*</modifier></type><name pos:start="5:55" pos:end="5:60">newdir</name></decl></parameter>,

                                            <parameter pos:start="7:45" pos:end="7:64"><decl pos:start="7:45" pos:end="7:64"><type pos:start="7:45" pos:end="7:64"><name pos:start="7:45" pos:end="7:54">V9fsString</name> <modifier pos:start="7:56" pos:end="7:56">*</modifier></type><name pos:start="7:57" pos:end="7:64">new_name</name></decl></parameter>)</parameter_list>

<block pos:start="9:1" pos:end="55:1">{<block_content pos:start="11:5" pos:end="53:29">

    <decl_stmt pos:start="11:5" pos:end="11:24"><decl pos:start="11:5" pos:end="11:23"><type pos:start="11:5" pos:end="11:18"><name pos:start="11:5" pos:end="11:16">V9fsFidState</name> <modifier pos:start="11:18" pos:end="11:18">*</modifier></type><name pos:start="11:19" pos:end="11:23">tfidp</name></decl>;</decl_stmt>

    <decl_stmt pos:start="13:5" pos:end="13:30"><decl pos:start="13:5" pos:end="13:20"><type pos:start="13:5" pos:end="13:12"><name pos:start="13:5" pos:end="13:12">V9fsPath</name></type> <name pos:start="13:14" pos:end="13:20">oldpath</name></decl>, <decl pos:start="13:23" pos:end="13:29"><type ref="prev" pos:start="13:5" pos:end="13:12"/><name pos:start="13:23" pos:end="13:29">newpath</name></decl>;</decl_stmt>

    <decl_stmt pos:start="15:5" pos:end="15:26"><decl pos:start="15:5" pos:end="15:25"><type pos:start="15:5" pos:end="15:15"><name pos:start="15:5" pos:end="15:13">V9fsState</name> <modifier pos:start="15:15" pos:end="15:15">*</modifier></type><name pos:start="15:16" pos:end="15:16">s</name> <init pos:start="15:18" pos:end="15:25">= <expr pos:start="15:20" pos:end="15:25"><name pos:start="15:20" pos:end="15:25"><name pos:start="15:20" pos:end="15:22">pdu</name><operator pos:start="15:23" pos:end="15:24">-&gt;</operator><name pos:start="15:25" pos:end="15:25">s</name></name></expr></init></decl>;</decl_stmt>





    <expr_stmt pos:start="21:5" pos:end="21:29"><expr pos:start="21:5" pos:end="21:28"><call pos:start="21:5" pos:end="21:28"><name pos:start="21:5" pos:end="21:18">v9fs_path_init</name><argument_list pos:start="21:19" pos:end="21:28">(<argument pos:start="21:20" pos:end="21:27"><expr pos:start="21:20" pos:end="21:27"><operator pos:start="21:20" pos:end="21:20">&amp;</operator><name pos:start="21:21" pos:end="21:27">oldpath</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    <expr_stmt pos:start="23:5" pos:end="23:29"><expr pos:start="23:5" pos:end="23:28"><call pos:start="23:5" pos:end="23:28"><name pos:start="23:5" pos:end="23:18">v9fs_path_init</name><argument_list pos:start="23:19" pos:end="23:28">(<argument pos:start="23:20" pos:end="23:27"><expr pos:start="23:20" pos:end="23:27"><operator pos:start="23:20" pos:end="23:20">&amp;</operator><name pos:start="23:21" pos:end="23:27">newpath</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    <expr_stmt pos:start="25:5" pos:end="25:64"><expr pos:start="25:5" pos:end="25:63"><call pos:start="25:5" pos:end="25:63"><name pos:start="25:5" pos:end="25:24">v9fs_co_name_to_path</name><argument_list pos:start="25:25" pos:end="25:63">(<argument pos:start="25:26" pos:end="25:28"><expr pos:start="25:26" pos:end="25:28"><name pos:start="25:26" pos:end="25:28">pdu</name></expr></argument>, <argument pos:start="25:31" pos:end="25:36"><expr pos:start="25:31" pos:end="25:36"><name pos:start="25:31" pos:end="25:36">olddir</name></expr></argument>, <argument pos:start="25:39" pos:end="25:52"><expr pos:start="25:39" pos:end="25:52"><name pos:start="25:39" pos:end="25:52"><name pos:start="25:39" pos:end="25:46">old_name</name><operator pos:start="25:47" pos:end="25:48">-&gt;</operator><name pos:start="25:49" pos:end="25:52">data</name></name></expr></argument>, <argument pos:start="25:55" pos:end="25:62"><expr pos:start="25:55" pos:end="25:62"><operator pos:start="25:55" pos:end="25:55">&amp;</operator><name pos:start="25:56" pos:end="25:62">oldpath</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    <expr_stmt pos:start="27:5" pos:end="27:64"><expr pos:start="27:5" pos:end="27:63"><call pos:start="27:5" pos:end="27:63"><name pos:start="27:5" pos:end="27:24">v9fs_co_name_to_path</name><argument_list pos:start="27:25" pos:end="27:63">(<argument pos:start="27:26" pos:end="27:28"><expr pos:start="27:26" pos:end="27:28"><name pos:start="27:26" pos:end="27:28">pdu</name></expr></argument>, <argument pos:start="27:31" pos:end="27:36"><expr pos:start="27:31" pos:end="27:36"><name pos:start="27:31" pos:end="27:36">newdir</name></expr></argument>, <argument pos:start="27:39" pos:end="27:52"><expr pos:start="27:39" pos:end="27:52"><name pos:start="27:39" pos:end="27:52"><name pos:start="27:39" pos:end="27:46">new_name</name><operator pos:start="27:47" pos:end="27:48">-&gt;</operator><name pos:start="27:49" pos:end="27:52">data</name></name></expr></argument>, <argument pos:start="27:55" pos:end="27:62"><expr pos:start="27:55" pos:end="27:62"><operator pos:start="27:55" pos:end="27:55">&amp;</operator><name pos:start="27:56" pos:end="27:62">newpath</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>



    <comment type="block" pos:start="31:5" pos:end="37:7">/*

     * Fixup fid's pointing to the old name to

     * start pointing to the new name

     */</comment>

    <for pos:start="39:5" pos:end="49:5">for <control pos:start="39:9" pos:end="39:57">(<init pos:start="39:10" pos:end="39:29"><expr pos:start="39:10" pos:end="39:28"><name pos:start="39:10" pos:end="39:14">tfidp</name> <operator pos:start="39:16" pos:end="39:16">=</operator> <name pos:start="39:18" pos:end="39:28"><name pos:start="39:18" pos:end="39:18">s</name><operator pos:start="39:19" pos:end="39:20">-&gt;</operator><name pos:start="39:21" pos:end="39:28">fid_list</name></name></expr>;</init> <condition pos:start="39:31" pos:end="39:36"><expr pos:start="39:31" pos:end="39:35"><name pos:start="39:31" pos:end="39:35">tfidp</name></expr>;</condition> <incr pos:start="39:38" pos:end="39:56"><expr pos:start="39:38" pos:end="39:56"><name pos:start="39:38" pos:end="39:42">tfidp</name> <operator pos:start="39:44" pos:end="39:44">=</operator> <name pos:start="39:46" pos:end="39:56"><name pos:start="39:46" pos:end="39:50">tfidp</name><operator pos:start="39:51" pos:end="39:52">-&gt;</operator><name pos:start="39:53" pos:end="39:56">next</name></name></expr></incr>)</control> <block pos:start="39:59" pos:end="49:5">{<block_content pos:start="41:9" pos:end="47:9">

        <if_stmt pos:start="41:9" pos:end="47:9"><if pos:start="41:9" pos:end="47:9">if <condition pos:start="41:12" pos:end="41:58">(<expr pos:start="41:13" pos:end="41:57"><call pos:start="41:13" pos:end="41:57"><name pos:start="41:13" pos:end="41:33">v9fs_path_is_ancestor</name><argument_list pos:start="41:34" pos:end="41:57">(<argument pos:start="41:35" pos:end="41:42"><expr pos:start="41:35" pos:end="41:42"><operator pos:start="41:35" pos:end="41:35">&amp;</operator><name pos:start="41:36" pos:end="41:42">oldpath</name></expr></argument>, <argument pos:start="41:45" pos:end="41:56"><expr pos:start="41:45" pos:end="41:56"><operator pos:start="41:45" pos:end="41:45">&amp;</operator><name pos:start="41:46" pos:end="41:56"><name pos:start="41:46" pos:end="41:50">tfidp</name><operator pos:start="41:51" pos:end="41:52">-&gt;</operator><name pos:start="41:53" pos:end="41:56">path</name></name></expr></argument>)</argument_list></call></expr>)</condition> <block pos:start="41:60" pos:end="47:9">{<block_content pos:start="45:13" pos:end="45:72">

            <comment type="block" pos:start="43:13" pos:end="43:34">/* replace the name */</comment>

            <expr_stmt pos:start="45:13" pos:end="45:72"><expr pos:start="45:13" pos:end="45:71"><call pos:start="45:13" pos:end="45:71"><name pos:start="45:13" pos:end="45:25">v9fs_fix_path</name><argument_list pos:start="45:26" pos:end="45:71">(<argument pos:start="45:27" pos:end="45:38"><expr pos:start="45:27" pos:end="45:38"><operator pos:start="45:27" pos:end="45:27">&amp;</operator><name pos:start="45:28" pos:end="45:38"><name pos:start="45:28" pos:end="45:32">tfidp</name><operator pos:start="45:33" pos:end="45:34">-&gt;</operator><name pos:start="45:35" pos:end="45:38">path</name></name></expr></argument>, <argument pos:start="45:41" pos:end="45:48"><expr pos:start="45:41" pos:end="45:48"><operator pos:start="45:41" pos:end="45:41">&amp;</operator><name pos:start="45:42" pos:end="45:48">newpath</name></expr></argument>, <argument pos:start="45:51" pos:end="45:70"><expr pos:start="45:51" pos:end="45:70"><call pos:start="45:51" pos:end="45:70"><name pos:start="45:51" pos:end="45:56">strlen</name><argument_list pos:start="45:57" pos:end="45:70">(<argument pos:start="45:58" pos:end="45:69"><expr pos:start="45:58" pos:end="45:69"><name pos:start="45:58" pos:end="45:69"><name pos:start="45:58" pos:end="45:64">oldpath</name><operator pos:start="45:65" pos:end="45:65">.</operator><name pos:start="45:66" pos:end="45:69">data</name></name></expr></argument>)</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        </block_content>}</block></if></if_stmt>

    </block_content>}</block></for>

    <expr_stmt pos:start="51:5" pos:end="51:29"><expr pos:start="51:5" pos:end="51:28"><call pos:start="51:5" pos:end="51:28"><name pos:start="51:5" pos:end="51:18">v9fs_path_free</name><argument_list pos:start="51:19" pos:end="51:28">(<argument pos:start="51:20" pos:end="51:27"><expr pos:start="51:20" pos:end="51:27"><operator pos:start="51:20" pos:end="51:20">&amp;</operator><name pos:start="51:21" pos:end="51:27">oldpath</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    <expr_stmt pos:start="53:5" pos:end="53:29"><expr pos:start="53:5" pos:end="53:28"><call pos:start="53:5" pos:end="53:28"><name pos:start="53:5" pos:end="53:18">v9fs_path_free</name><argument_list pos:start="53:19" pos:end="53:28">(<argument pos:start="53:20" pos:end="53:27"><expr pos:start="53:20" pos:end="53:27"><operator pos:start="53:20" pos:end="53:20">&amp;</operator><name pos:start="53:21" pos:end="53:27">newpath</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

</block_content>}</block></function>
</unit>
