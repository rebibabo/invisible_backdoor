<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<unit xmlns="http://www.srcML.org/srcML/src" xmlns:pos="http://www.srcML.org/srcML/position" revision="1.0.0" language="C" filename="dataset/ropgen/aug/0/12682.c" pos:tabs="8"><function pos:start="1:1" pos:end="183:1"><type pos:start="1:1" pos:end="1:10"><specifier pos:start="1:1" pos:end="1:6">static</specifier> <name pos:start="1:8" pos:end="1:10">int</name></type> <name pos:start="1:12" pos:end="1:19">blk_init</name><parameter_list pos:start="1:20" pos:end="1:45">(<parameter pos:start="1:21" pos:end="1:44"><decl pos:start="1:21" pos:end="1:44"><type pos:start="1:21" pos:end="1:44"><name pos:start="1:21" pos:end="1:36"><name pos:start="1:21" pos:end="1:26">struct</name> <name pos:start="1:28" pos:end="1:36">XenDevice</name></name> <modifier pos:start="1:38" pos:end="1:38">*</modifier></type><name pos:start="1:39" pos:end="1:44">xendev</name></decl></parameter>)</parameter_list>

<block pos:start="3:1" pos:end="183:1">{<block_content pos:start="5:5" pos:end="181:13">

    <decl_stmt pos:start="5:5" pos:end="5:78"><decl pos:start="5:5" pos:end="5:77"><type pos:start="5:5" pos:end="5:22"><name pos:start="5:5" pos:end="5:20"><name pos:start="5:5" pos:end="5:10">struct</name> <name pos:start="5:12" pos:end="5:20">XenBlkDev</name></name> <modifier pos:start="5:22" pos:end="5:22">*</modifier></type><name pos:start="5:23" pos:end="5:28">blkdev</name> <init pos:start="5:30" pos:end="5:77">= <expr pos:start="5:32" pos:end="5:77"><call pos:start="5:32" pos:end="5:77"><name pos:start="5:32" pos:end="5:43">container_of</name><argument_list pos:start="5:44" pos:end="5:77">(<argument pos:start="5:45" pos:end="5:50"><expr pos:start="5:45" pos:end="5:50"><name pos:start="5:45" pos:end="5:50">xendev</name></expr></argument>, <argument pos:start="5:53" pos:end="5:68"><expr pos:start="5:53" pos:end="5:68">struct <name pos:start="5:60" pos:end="5:68">XenBlkDev</name></expr></argument>, <argument pos:start="5:71" pos:end="5:76"><expr pos:start="5:71" pos:end="5:76"><name pos:start="5:71" pos:end="5:76">xendev</name></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>

    <decl_stmt pos:start="7:5" pos:end="7:47"><decl pos:start="7:5" pos:end="7:13"><type pos:start="7:5" pos:end="7:7"><name pos:start="7:5" pos:end="7:7">int</name></type> <name pos:start="7:9" pos:end="7:13">index</name></decl>, <decl pos:start="7:16" pos:end="7:21"><type ref="prev" pos:start="7:5" pos:end="7:7"/><name pos:start="7:16" pos:end="7:21">qflags</name></decl>, <decl pos:start="7:24" pos:end="7:36"><type ref="prev" pos:start="7:5" pos:end="7:7"/><name pos:start="7:24" pos:end="7:36">have_barriers</name></decl>, <decl pos:start="7:39" pos:end="7:46"><type ref="prev" pos:start="7:5" pos:end="7:7"/><name pos:start="7:39" pos:end="7:42">info</name> <init pos:start="7:44" pos:end="7:46">= <expr pos:start="7:46" pos:end="7:46"><literal type="number" pos:start="7:46" pos:end="7:46">0</literal></expr></init></decl>;</decl_stmt>

    <decl_stmt pos:start="9:5" pos:end="9:12"><decl pos:start="9:5" pos:end="9:11"><type pos:start="9:5" pos:end="9:10"><name pos:start="9:5" pos:end="9:8">char</name> <modifier pos:start="9:10" pos:end="9:10">*</modifier></type><name pos:start="9:11" pos:end="9:11">h</name></decl>;</decl_stmt>



    <comment type="block" pos:start="13:5" pos:end="13:31">/* read xenstore entries */</comment>

    <if_stmt pos:start="15:5" pos:end="37:5"><if pos:start="15:5" pos:end="37:5">if <condition pos:start="15:8" pos:end="15:31">(<expr pos:start="15:9" pos:end="15:30"><name pos:start="15:9" pos:end="15:22"><name pos:start="15:9" pos:end="15:14">blkdev</name><operator pos:start="15:15" pos:end="15:16">-&gt;</operator><name pos:start="15:17" pos:end="15:22">params</name></name> <operator pos:start="15:24" pos:end="15:25">==</operator> <name pos:start="15:27" pos:end="15:30">NULL</name></expr>)</condition> <block pos:start="15:33" pos:end="37:5">{<block_content pos:start="17:9" pos:end="35:9">

	<expr_stmt pos:start="17:9" pos:end="17:73"><expr pos:start="17:9" pos:end="17:72"><name pos:start="17:9" pos:end="17:22"><name pos:start="17:9" pos:end="17:14">blkdev</name><operator pos:start="17:15" pos:end="17:16">-&gt;</operator><name pos:start="17:17" pos:end="17:22">params</name></name> <operator pos:start="17:24" pos:end="17:24">=</operator> <call pos:start="17:26" pos:end="17:72"><name pos:start="17:26" pos:end="17:45">xenstore_read_be_str</name><argument_list pos:start="17:46" pos:end="17:72">(<argument pos:start="17:47" pos:end="17:61"><expr pos:start="17:47" pos:end="17:61"><operator pos:start="17:47" pos:end="17:47">&amp;</operator><name pos:start="17:48" pos:end="17:61"><name pos:start="17:48" pos:end="17:53">blkdev</name><operator pos:start="17:54" pos:end="17:55">-&gt;</operator><name pos:start="17:56" pos:end="17:61">xendev</name></name></expr></argument>, <argument pos:start="17:64" pos:end="17:71"><expr pos:start="17:64" pos:end="17:71"><literal type="string" pos:start="17:64" pos:end="17:71">"params"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <expr_stmt pos:start="19:9" pos:end="19:40"><expr pos:start="19:9" pos:end="19:39"><name pos:start="19:9" pos:end="19:9">h</name> <operator pos:start="19:11" pos:end="19:11">=</operator> <call pos:start="19:13" pos:end="19:39"><name pos:start="19:13" pos:end="19:18">strchr</name><argument_list pos:start="19:19" pos:end="19:39">(<argument pos:start="19:20" pos:end="19:33"><expr pos:start="19:20" pos:end="19:33"><name pos:start="19:20" pos:end="19:33"><name pos:start="19:20" pos:end="19:25">blkdev</name><operator pos:start="19:26" pos:end="19:27">-&gt;</operator><name pos:start="19:28" pos:end="19:33">params</name></name></expr></argument>, <argument pos:start="19:36" pos:end="19:38"><expr pos:start="19:36" pos:end="19:38"><literal type="char" pos:start="19:36" pos:end="19:38">':'</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

	<if_stmt pos:start="21:9" pos:end="35:9"><if pos:start="21:9" pos:end="29:9">if <condition pos:start="21:12" pos:end="21:22">(<expr pos:start="21:13" pos:end="21:21"><name pos:start="21:13" pos:end="21:13">h</name> <operator pos:start="21:15" pos:end="21:16">!=</operator> <name pos:start="21:18" pos:end="21:21">NULL</name></expr>)</condition> <block pos:start="21:24" pos:end="29:9">{<block_content pos:start="23:13" pos:end="27:19">

	    <expr_stmt pos:start="23:13" pos:end="23:47"><expr pos:start="23:13" pos:end="23:46"><name pos:start="23:13" pos:end="23:29"><name pos:start="23:13" pos:end="23:18">blkdev</name><operator pos:start="23:19" pos:end="23:20">-&gt;</operator><name pos:start="23:21" pos:end="23:29">fileproto</name></name> <operator pos:start="23:31" pos:end="23:31">=</operator> <name pos:start="23:33" pos:end="23:46"><name pos:start="23:33" pos:end="23:38">blkdev</name><operator pos:start="23:39" pos:end="23:40">-&gt;</operator><name pos:start="23:41" pos:end="23:46">params</name></name></expr>;</expr_stmt>

	    <expr_stmt pos:start="25:13" pos:end="25:36"><expr pos:start="25:13" pos:end="25:35"><name pos:start="25:13" pos:end="25:28"><name pos:start="25:13" pos:end="25:18">blkdev</name><operator pos:start="25:19" pos:end="25:20">-&gt;</operator><name pos:start="25:21" pos:end="25:28">filename</name></name>  <operator pos:start="25:31" pos:end="25:31">=</operator> <name pos:start="25:33" pos:end="25:33">h</name><operator pos:start="25:34" pos:end="25:34">+</operator><literal type="number" pos:start="25:35" pos:end="25:35">1</literal></expr>;</expr_stmt>

	    <expr_stmt pos:start="27:13" pos:end="27:19"><expr pos:start="27:13" pos:end="27:18"><operator pos:start="27:13" pos:end="27:13">*</operator><name pos:start="27:14" pos:end="27:14">h</name> <operator pos:start="27:16" pos:end="27:16">=</operator> <literal type="number" pos:start="27:18" pos:end="27:18">0</literal></expr>;</expr_stmt>

	</block_content>}</block></if> <else pos:start="29:11" pos:end="35:9">else <block pos:start="29:16" pos:end="35:9">{<block_content pos:start="31:13" pos:end="33:47">

	    <expr_stmt pos:start="31:13" pos:end="31:42"><expr pos:start="31:13" pos:end="31:41"><name pos:start="31:13" pos:end="31:29"><name pos:start="31:13" pos:end="31:18">blkdev</name><operator pos:start="31:19" pos:end="31:20">-&gt;</operator><name pos:start="31:21" pos:end="31:29">fileproto</name></name> <operator pos:start="31:31" pos:end="31:31">=</operator> <literal type="string" pos:start="31:33" pos:end="31:41">"&lt;unset&gt;"</literal></expr>;</expr_stmt>

	    <expr_stmt pos:start="33:13" pos:end="33:47"><expr pos:start="33:13" pos:end="33:46"><name pos:start="33:13" pos:end="33:28"><name pos:start="33:13" pos:end="33:18">blkdev</name><operator pos:start="33:19" pos:end="33:20">-&gt;</operator><name pos:start="33:21" pos:end="33:28">filename</name></name>  <operator pos:start="33:31" pos:end="33:31">=</operator> <name pos:start="33:33" pos:end="33:46"><name pos:start="33:33" pos:end="33:38">blkdev</name><operator pos:start="33:39" pos:end="33:40">-&gt;</operator><name pos:start="33:41" pos:end="33:46">params</name></name></expr>;</expr_stmt>

	</block_content>}</block></else></if_stmt>

    </block_content>}</block></if></if_stmt>

    <if_stmt pos:start="39:5" pos:end="41:69"><if pos:start="39:5" pos:end="41:69">if <condition pos:start="39:8" pos:end="39:29">(<expr pos:start="39:9" pos:end="39:28"><name pos:start="39:9" pos:end="39:20"><name pos:start="39:9" pos:end="39:14">blkdev</name><operator pos:start="39:15" pos:end="39:16">-&gt;</operator><name pos:start="39:17" pos:end="39:20">mode</name></name> <operator pos:start="39:22" pos:end="39:23">==</operator> <name pos:start="39:25" pos:end="39:28">NULL</name></expr>)</condition><block type="pseudo" pos:start="41:9" pos:end="41:69"><block_content pos:start="41:9" pos:end="41:69">

	<expr_stmt pos:start="41:9" pos:end="41:69"><expr pos:start="41:9" pos:end="41:68"><name pos:start="41:9" pos:end="41:20"><name pos:start="41:9" pos:end="41:14">blkdev</name><operator pos:start="41:15" pos:end="41:16">-&gt;</operator><name pos:start="41:17" pos:end="41:20">mode</name></name> <operator pos:start="41:22" pos:end="41:22">=</operator> <call pos:start="41:24" pos:end="41:68"><name pos:start="41:24" pos:end="41:43">xenstore_read_be_str</name><argument_list pos:start="41:44" pos:end="41:68">(<argument pos:start="41:45" pos:end="41:59"><expr pos:start="41:45" pos:end="41:59"><operator pos:start="41:45" pos:end="41:45">&amp;</operator><name pos:start="41:46" pos:end="41:59"><name pos:start="41:46" pos:end="41:51">blkdev</name><operator pos:start="41:52" pos:end="41:53">-&gt;</operator><name pos:start="41:54" pos:end="41:59">xendev</name></name></expr></argument>, <argument pos:start="41:62" pos:end="41:67"><expr pos:start="41:62" pos:end="41:67"><literal type="string" pos:start="41:62" pos:end="41:67">"mode"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt></block_content></block></if></if_stmt>

    <if_stmt pos:start="43:5" pos:end="45:69"><if pos:start="43:5" pos:end="45:69">if <condition pos:start="43:8" pos:end="43:29">(<expr pos:start="43:9" pos:end="43:28"><name pos:start="43:9" pos:end="43:20"><name pos:start="43:9" pos:end="43:14">blkdev</name><operator pos:start="43:15" pos:end="43:16">-&gt;</operator><name pos:start="43:17" pos:end="43:20">type</name></name> <operator pos:start="43:22" pos:end="43:23">==</operator> <name pos:start="43:25" pos:end="43:28">NULL</name></expr>)</condition><block type="pseudo" pos:start="45:9" pos:end="45:69"><block_content pos:start="45:9" pos:end="45:69">

	<expr_stmt pos:start="45:9" pos:end="45:69"><expr pos:start="45:9" pos:end="45:68"><name pos:start="45:9" pos:end="45:20"><name pos:start="45:9" pos:end="45:14">blkdev</name><operator pos:start="45:15" pos:end="45:16">-&gt;</operator><name pos:start="45:17" pos:end="45:20">type</name></name> <operator pos:start="45:22" pos:end="45:22">=</operator> <call pos:start="45:24" pos:end="45:68"><name pos:start="45:24" pos:end="45:43">xenstore_read_be_str</name><argument_list pos:start="45:44" pos:end="45:68">(<argument pos:start="45:45" pos:end="45:59"><expr pos:start="45:45" pos:end="45:59"><operator pos:start="45:45" pos:end="45:45">&amp;</operator><name pos:start="45:46" pos:end="45:59"><name pos:start="45:46" pos:end="45:51">blkdev</name><operator pos:start="45:52" pos:end="45:53">-&gt;</operator><name pos:start="45:54" pos:end="45:59">xendev</name></name></expr></argument>, <argument pos:start="45:62" pos:end="45:67"><expr pos:start="45:62" pos:end="45:67"><literal type="string" pos:start="45:62" pos:end="45:67">"type"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt></block_content></block></if></if_stmt>

    <if_stmt pos:start="47:5" pos:end="49:67"><if pos:start="47:5" pos:end="49:67">if <condition pos:start="47:8" pos:end="47:28">(<expr pos:start="47:9" pos:end="47:27"><name pos:start="47:9" pos:end="47:19"><name pos:start="47:9" pos:end="47:14">blkdev</name><operator pos:start="47:15" pos:end="47:16">-&gt;</operator><name pos:start="47:17" pos:end="47:19">dev</name></name> <operator pos:start="47:21" pos:end="47:22">==</operator> <name pos:start="47:24" pos:end="47:27">NULL</name></expr>)</condition><block type="pseudo" pos:start="49:9" pos:end="49:67"><block_content pos:start="49:9" pos:end="49:67">

	<expr_stmt pos:start="49:9" pos:end="49:67"><expr pos:start="49:9" pos:end="49:66"><name pos:start="49:9" pos:end="49:19"><name pos:start="49:9" pos:end="49:14">blkdev</name><operator pos:start="49:15" pos:end="49:16">-&gt;</operator><name pos:start="49:17" pos:end="49:19">dev</name></name> <operator pos:start="49:21" pos:end="49:21">=</operator> <call pos:start="49:23" pos:end="49:66"><name pos:start="49:23" pos:end="49:42">xenstore_read_be_str</name><argument_list pos:start="49:43" pos:end="49:66">(<argument pos:start="49:44" pos:end="49:58"><expr pos:start="49:44" pos:end="49:58"><operator pos:start="49:44" pos:end="49:44">&amp;</operator><name pos:start="49:45" pos:end="49:58"><name pos:start="49:45" pos:end="49:50">blkdev</name><operator pos:start="49:51" pos:end="49:52">-&gt;</operator><name pos:start="49:53" pos:end="49:58">xendev</name></name></expr></argument>, <argument pos:start="49:61" pos:end="49:65"><expr pos:start="49:61" pos:end="49:65"><literal type="string" pos:start="49:61" pos:end="49:65">"dev"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt></block_content></block></if></if_stmt>

    <if_stmt pos:start="51:5" pos:end="53:79"><if pos:start="51:5" pos:end="53:79">if <condition pos:start="51:8" pos:end="51:32">(<expr pos:start="51:9" pos:end="51:31"><name pos:start="51:9" pos:end="51:23"><name pos:start="51:9" pos:end="51:14">blkdev</name><operator pos:start="51:15" pos:end="51:16">-&gt;</operator><name pos:start="51:17" pos:end="51:23">devtype</name></name> <operator pos:start="51:25" pos:end="51:26">==</operator> <name pos:start="51:28" pos:end="51:31">NULL</name></expr>)</condition><block type="pseudo" pos:start="53:9" pos:end="53:79"><block_content pos:start="53:9" pos:end="53:79">

	<expr_stmt pos:start="53:9" pos:end="53:79"><expr pos:start="53:9" pos:end="53:78"><name pos:start="53:9" pos:end="53:23"><name pos:start="53:9" pos:end="53:14">blkdev</name><operator pos:start="53:15" pos:end="53:16">-&gt;</operator><name pos:start="53:17" pos:end="53:23">devtype</name></name> <operator pos:start="53:25" pos:end="53:25">=</operator> <call pos:start="53:27" pos:end="53:78"><name pos:start="53:27" pos:end="53:46">xenstore_read_be_str</name><argument_list pos:start="53:47" pos:end="53:78">(<argument pos:start="53:48" pos:end="53:62"><expr pos:start="53:48" pos:end="53:62"><operator pos:start="53:48" pos:end="53:48">&amp;</operator><name pos:start="53:49" pos:end="53:62"><name pos:start="53:49" pos:end="53:54">blkdev</name><operator pos:start="53:55" pos:end="53:56">-&gt;</operator><name pos:start="53:57" pos:end="53:62">xendev</name></name></expr></argument>, <argument pos:start="53:65" pos:end="53:77"><expr pos:start="53:65" pos:end="53:77"><literal type="string" pos:start="53:65" pos:end="53:77">"device-type"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt></block_content></block></if></if_stmt>



    <comment type="block" pos:start="57:5" pos:end="57:33">/* do we have all we need? */</comment>

    <if_stmt pos:start="59:5" pos:end="67:18"><if pos:start="59:5" pos:end="67:18">if <condition pos:start="59:8" pos:end="65:28">(<expr pos:start="59:9" pos:end="65:27"><name pos:start="59:9" pos:end="59:22"><name pos:start="59:9" pos:end="59:14">blkdev</name><operator pos:start="59:15" pos:end="59:16">-&gt;</operator><name pos:start="59:17" pos:end="59:22">params</name></name> <operator pos:start="59:24" pos:end="59:25">==</operator> <name pos:start="59:27" pos:end="59:30">NULL</name> <operator pos:start="59:32" pos:end="59:33">||</operator>

	<name pos:start="61:9" pos:end="61:20"><name pos:start="61:9" pos:end="61:14">blkdev</name><operator pos:start="61:15" pos:end="61:16">-&gt;</operator><name pos:start="61:17" pos:end="61:20">mode</name></name> <operator pos:start="61:22" pos:end="61:23">==</operator> <name pos:start="61:25" pos:end="61:28">NULL</name>   <operator pos:start="61:32" pos:end="61:33">||</operator>

	<name pos:start="63:9" pos:end="63:20"><name pos:start="63:9" pos:end="63:14">blkdev</name><operator pos:start="63:15" pos:end="63:16">-&gt;</operator><name pos:start="63:17" pos:end="63:20">type</name></name> <operator pos:start="63:22" pos:end="63:23">==</operator> <name pos:start="63:25" pos:end="63:28">NULL</name>   <operator pos:start="63:32" pos:end="63:33">||</operator>

	<name pos:start="65:9" pos:end="65:19"><name pos:start="65:9" pos:end="65:14">blkdev</name><operator pos:start="65:15" pos:end="65:16">-&gt;</operator><name pos:start="65:17" pos:end="65:19">dev</name></name> <operator pos:start="65:21" pos:end="65:22">==</operator> <name pos:start="65:24" pos:end="65:27">NULL</name></expr>)</condition><block type="pseudo" pos:start="67:9" pos:end="67:18"><block_content pos:start="67:9" pos:end="67:18">

	<return pos:start="67:9" pos:end="67:18">return <expr pos:start="67:16" pos:end="67:17"><operator pos:start="67:16" pos:end="67:16">-</operator><literal type="number" pos:start="67:17" pos:end="67:17">1</literal></expr>;</return></block_content></block></if></if_stmt>



    <comment type="block" pos:start="71:5" pos:end="71:21">/* read-only ? */</comment>

    <if_stmt pos:start="73:5" pos:end="83:5"><if pos:start="73:5" pos:end="77:5">if <condition pos:start="73:8" pos:end="73:39">(<expr pos:start="73:9" pos:end="73:38"><call pos:start="73:9" pos:end="73:33"><name pos:start="73:9" pos:end="73:14">strcmp</name><argument_list pos:start="73:15" pos:end="73:33">(<argument pos:start="73:16" pos:end="73:27"><expr pos:start="73:16" pos:end="73:27"><name pos:start="73:16" pos:end="73:27"><name pos:start="73:16" pos:end="73:21">blkdev</name><operator pos:start="73:22" pos:end="73:23">-&gt;</operator><name pos:start="73:24" pos:end="73:27">mode</name></name></expr></argument>, <argument pos:start="73:30" pos:end="73:32"><expr pos:start="73:30" pos:end="73:32"><literal type="string" pos:start="73:30" pos:end="73:32">"w"</literal></expr></argument>)</argument_list></call> <operator pos:start="73:35" pos:end="73:36">==</operator> <literal type="number" pos:start="73:38" pos:end="73:38">0</literal></expr>)</condition> <block pos:start="73:41" pos:end="77:5">{<block_content pos:start="75:9" pos:end="75:29">

	<expr_stmt pos:start="75:9" pos:end="75:29"><expr pos:start="75:9" pos:end="75:28"><name pos:start="75:9" pos:end="75:14">qflags</name> <operator pos:start="75:16" pos:end="75:16">=</operator> <name pos:start="75:18" pos:end="75:28">BDRV_O_RDWR</name></expr>;</expr_stmt>

    </block_content>}</block></if> <else pos:start="77:7" pos:end="83:5">else <block pos:start="77:12" pos:end="83:5">{<block_content pos:start="79:9" pos:end="81:32">

	<expr_stmt pos:start="79:9" pos:end="79:19"><expr pos:start="79:9" pos:end="79:18"><name pos:start="79:9" pos:end="79:14">qflags</name> <operator pos:start="79:16" pos:end="79:16">=</operator> <literal type="number" pos:start="79:18" pos:end="79:18">0</literal></expr>;</expr_stmt>

	<expr_stmt pos:start="81:9" pos:end="81:32"><expr pos:start="81:9" pos:end="81:31"><name pos:start="81:9" pos:end="81:12">info</name>  <operator pos:start="81:15" pos:end="81:16">|=</operator> <name pos:start="81:18" pos:end="81:31">VDISK_READONLY</name></expr>;</expr_stmt>

    </block_content>}</block></else></if_stmt>



    <comment type="block" pos:start="87:5" pos:end="87:17">/* cdrom ? */</comment>

    <if_stmt pos:start="89:5" pos:end="91:29"><if pos:start="89:5" pos:end="91:29">if <condition pos:start="89:8" pos:end="89:61">(<expr pos:start="89:9" pos:end="89:60"><name pos:start="89:9" pos:end="89:23"><name pos:start="89:9" pos:end="89:14">blkdev</name><operator pos:start="89:15" pos:end="89:16">-&gt;</operator><name pos:start="89:17" pos:end="89:23">devtype</name></name> <operator pos:start="89:25" pos:end="89:26">&amp;&amp;</operator> <operator pos:start="89:28" pos:end="89:28">!</operator><call pos:start="89:29" pos:end="89:60"><name pos:start="89:29" pos:end="89:34">strcmp</name><argument_list pos:start="89:35" pos:end="89:60">(<argument pos:start="89:36" pos:end="89:50"><expr pos:start="89:36" pos:end="89:50"><name pos:start="89:36" pos:end="89:50"><name pos:start="89:36" pos:end="89:41">blkdev</name><operator pos:start="89:42" pos:end="89:43">-&gt;</operator><name pos:start="89:44" pos:end="89:50">devtype</name></name></expr></argument>, <argument pos:start="89:53" pos:end="89:59"><expr pos:start="89:53" pos:end="89:59"><literal type="string" pos:start="89:53" pos:end="89:59">"cdrom"</literal></expr></argument>)</argument_list></call></expr>)</condition><block type="pseudo" pos:start="91:9" pos:end="91:29"><block_content pos:start="91:9" pos:end="91:29">

	<expr_stmt pos:start="91:9" pos:end="91:29"><expr pos:start="91:9" pos:end="91:28"><name pos:start="91:9" pos:end="91:12">info</name>  <operator pos:start="91:15" pos:end="91:16">|=</operator> <name pos:start="91:18" pos:end="91:28">VDISK_CDROM</name></expr>;</expr_stmt></block_content></block></if></if_stmt>



    <comment type="block" pos:start="95:5" pos:end="95:32">/* init qemu block driver */</comment>

    <expr_stmt pos:start="97:5" pos:end="97:50"><expr pos:start="97:5" pos:end="97:49"><name pos:start="97:5" pos:end="97:9">index</name> <operator pos:start="97:11" pos:end="97:11">=</operator> <operator pos:start="97:13" pos:end="97:13">(</operator><name pos:start="97:14" pos:end="97:31"><name pos:start="97:14" pos:end="97:19">blkdev</name><operator pos:start="97:20" pos:end="97:21">-&gt;</operator><name pos:start="97:22" pos:end="97:27">xendev</name><operator pos:start="97:28" pos:end="97:28">.</operator><name pos:start="97:29" pos:end="97:31">dev</name></name> <operator pos:start="97:33" pos:end="97:33">-</operator> <literal type="number" pos:start="97:35" pos:end="97:37">202</literal> <operator pos:start="97:39" pos:end="97:39">*</operator> <literal type="number" pos:start="97:41" pos:end="97:43">256</literal><operator pos:start="97:44" pos:end="97:44">)</operator> <operator pos:start="97:46" pos:end="97:46">/</operator> <literal type="number" pos:start="97:48" pos:end="97:49">16</literal></expr>;</expr_stmt>

    <expr_stmt pos:start="99:5" pos:end="99:48"><expr pos:start="99:5" pos:end="99:47"><name pos:start="99:5" pos:end="99:17"><name pos:start="99:5" pos:end="99:10">blkdev</name><operator pos:start="99:11" pos:end="99:12">-&gt;</operator><name pos:start="99:13" pos:end="99:17">dinfo</name></name> <operator pos:start="99:19" pos:end="99:19">=</operator> <call pos:start="99:21" pos:end="99:47"><name pos:start="99:21" pos:end="99:29">drive_get</name><argument_list pos:start="99:30" pos:end="99:47">(<argument pos:start="99:31" pos:end="99:36"><expr pos:start="99:31" pos:end="99:36"><name pos:start="99:31" pos:end="99:36">IF_XEN</name></expr></argument>, <argument pos:start="99:39" pos:end="99:39"><expr pos:start="99:39" pos:end="99:39"><literal type="number" pos:start="99:39" pos:end="99:39">0</literal></expr></argument>, <argument pos:start="99:42" pos:end="99:46"><expr pos:start="99:42" pos:end="99:46"><name pos:start="99:42" pos:end="99:46">index</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    <if_stmt pos:start="101:5" pos:end="137:5"><if pos:start="101:5" pos:end="129:5">if <condition pos:start="101:8" pos:end="101:23">(<expr pos:start="101:9" pos:end="101:22"><operator pos:start="101:9" pos:end="101:9">!</operator><name pos:start="101:10" pos:end="101:22"><name pos:start="101:10" pos:end="101:15">blkdev</name><operator pos:start="101:16" pos:end="101:17">-&gt;</operator><name pos:start="101:18" pos:end="101:22">dinfo</name></name></expr>)</condition> <block pos:start="101:25" pos:end="129:5">{<block_content pos:start="105:9" pos:end="127:22">

        <comment type="block" pos:start="103:9" pos:end="103:66">/* setup via xenbus -&gt; create new block driver instance */</comment>

        <expr_stmt pos:start="105:9" pos:end="105:78"><expr pos:start="105:9" pos:end="105:77"><call pos:start="105:9" pos:end="105:77"><name pos:start="105:9" pos:end="105:21">xen_be_printf</name><argument_list pos:start="105:22" pos:end="105:77">(<argument pos:start="105:23" pos:end="105:37"><expr pos:start="105:23" pos:end="105:37"><operator pos:start="105:23" pos:end="105:23">&amp;</operator><name pos:start="105:24" pos:end="105:37"><name pos:start="105:24" pos:end="105:29">blkdev</name><operator pos:start="105:30" pos:end="105:31">-&gt;</operator><name pos:start="105:32" pos:end="105:37">xendev</name></name></expr></argument>, <argument pos:start="105:40" pos:end="105:40"><expr pos:start="105:40" pos:end="105:40"><literal type="number" pos:start="105:40" pos:end="105:40">2</literal></expr></argument>, <argument pos:start="105:43" pos:end="105:76"><expr pos:start="105:43" pos:end="105:76"><literal type="string" pos:start="105:43" pos:end="105:76">"create new bdrv (xenbus setup)\n"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

	<expr_stmt pos:start="107:9" pos:end="107:43"><expr pos:start="107:9" pos:end="107:42"><name pos:start="107:9" pos:end="107:18"><name pos:start="107:9" pos:end="107:14">blkdev</name><operator pos:start="107:15" pos:end="107:16">-&gt;</operator><name pos:start="107:17" pos:end="107:18">bs</name></name> <operator pos:start="107:20" pos:end="107:20">=</operator> <call pos:start="107:22" pos:end="107:42"><name pos:start="107:22" pos:end="107:29">bdrv_new</name><argument_list pos:start="107:30" pos:end="107:42">(<argument pos:start="107:31" pos:end="107:41"><expr pos:start="107:31" pos:end="107:41"><name pos:start="107:31" pos:end="107:41"><name pos:start="107:31" pos:end="107:36">blkdev</name><operator pos:start="107:37" pos:end="107:38">-&gt;</operator><name pos:start="107:39" pos:end="107:41">dev</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

	<if_stmt pos:start="109:9" pos:end="123:9"><if pos:start="109:9" pos:end="123:9">if <condition pos:start="109:12" pos:end="109:23">(<expr pos:start="109:13" pos:end="109:22"><name pos:start="109:13" pos:end="109:22"><name pos:start="109:13" pos:end="109:18">blkdev</name><operator pos:start="109:19" pos:end="109:20">-&gt;</operator><name pos:start="109:21" pos:end="109:22">bs</name></name></expr>)</condition> <block pos:start="109:25" pos:end="123:9">{<block_content pos:start="111:13" pos:end="121:13">

	    <if_stmt pos:start="111:13" pos:end="121:13"><if pos:start="111:13" pos:end="121:13">if <condition pos:start="111:16" pos:end="115:21">(<expr pos:start="111:17" pos:end="115:20"><call pos:start="111:17" pos:end="113:75"><name pos:start="111:17" pos:end="111:25">bdrv_open</name><argument_list pos:start="111:26" pos:end="113:75">(<argument pos:start="111:27" pos:end="111:36"><expr pos:start="111:27" pos:end="111:36"><name pos:start="111:27" pos:end="111:36"><name pos:start="111:27" pos:end="111:32">blkdev</name><operator pos:start="111:33" pos:end="111:34">-&gt;</operator><name pos:start="111:35" pos:end="111:36">bs</name></name></expr></argument>, <argument pos:start="111:39" pos:end="111:54"><expr pos:start="111:39" pos:end="111:54"><name pos:start="111:39" pos:end="111:54"><name pos:start="111:39" pos:end="111:44">blkdev</name><operator pos:start="111:45" pos:end="111:46">-&gt;</operator><name pos:start="111:47" pos:end="111:54">filename</name></name></expr></argument>, <argument pos:start="111:57" pos:end="111:62"><expr pos:start="111:57" pos:end="111:62"><name pos:start="111:57" pos:end="111:62">qflags</name></expr></argument>,

                           <argument pos:start="113:28" pos:end="113:74"><expr pos:start="113:28" pos:end="113:74"><call pos:start="113:28" pos:end="113:74"><name pos:start="113:28" pos:end="113:55">bdrv_find_whitelisted_format</name><argument_list pos:start="113:56" pos:end="113:74">(<argument pos:start="113:57" pos:end="113:73"><expr pos:start="113:57" pos:end="113:73"><name pos:start="113:57" pos:end="113:73"><name pos:start="113:57" pos:end="113:62">blkdev</name><operator pos:start="113:63" pos:end="113:64">-&gt;</operator><name pos:start="113:65" pos:end="113:73">fileproto</name></name></expr></argument>)</argument_list></call></expr></argument>)</argument_list></call>

                <operator pos:start="115:17" pos:end="115:18">!=</operator> <literal type="number" pos:start="115:20" pos:end="115:20">0</literal></expr>)</condition> <block pos:start="115:23" pos:end="121:13">{<block_content pos:start="117:17" pos:end="119:34">

		<expr_stmt pos:start="117:17" pos:end="117:40"><expr pos:start="117:17" pos:end="117:39"><call pos:start="117:17" pos:end="117:39"><name pos:start="117:17" pos:end="117:27">bdrv_delete</name><argument_list pos:start="117:28" pos:end="117:39">(<argument pos:start="117:29" pos:end="117:38"><expr pos:start="117:29" pos:end="117:38"><name pos:start="117:29" pos:end="117:38"><name pos:start="117:29" pos:end="117:34">blkdev</name><operator pos:start="117:35" pos:end="117:36">-&gt;</operator><name pos:start="117:37" pos:end="117:38">bs</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

		<expr_stmt pos:start="119:17" pos:end="119:34"><expr pos:start="119:17" pos:end="119:33"><name pos:start="119:17" pos:end="119:26"><name pos:start="119:17" pos:end="119:22">blkdev</name><operator pos:start="119:23" pos:end="119:24">-&gt;</operator><name pos:start="119:25" pos:end="119:26">bs</name></name> <operator pos:start="119:28" pos:end="119:28">=</operator> <name pos:start="119:30" pos:end="119:33">NULL</name></expr>;</expr_stmt>

	    </block_content>}</block></if></if_stmt>

	</block_content>}</block></if></if_stmt>

	<if_stmt pos:start="125:9" pos:end="127:22"><if pos:start="125:9" pos:end="127:22">if <condition pos:start="125:12" pos:end="125:24">(<expr pos:start="125:13" pos:end="125:23"><operator pos:start="125:13" pos:end="125:13">!</operator><name pos:start="125:14" pos:end="125:23"><name pos:start="125:14" pos:end="125:19">blkdev</name><operator pos:start="125:20" pos:end="125:21">-&gt;</operator><name pos:start="125:22" pos:end="125:23">bs</name></name></expr>)</condition><block type="pseudo" pos:start="127:13" pos:end="127:22"><block_content pos:start="127:13" pos:end="127:22">

	    <return pos:start="127:13" pos:end="127:22">return <expr pos:start="127:20" pos:end="127:21"><operator pos:start="127:20" pos:end="127:20">-</operator><literal type="number" pos:start="127:21" pos:end="127:21">1</literal></expr>;</return></block_content></block></if></if_stmt>

    </block_content>}</block></if> <else pos:start="129:7" pos:end="137:5">else <block pos:start="129:12" pos:end="137:5">{<block_content pos:start="133:9" pos:end="135:41">

        <comment type="block" pos:start="131:9" pos:end="131:60">/* setup via qemu cmdline -&gt; already setup for us */</comment>

        <expr_stmt pos:start="133:9" pos:end="133:83"><expr pos:start="133:9" pos:end="133:82"><call pos:start="133:9" pos:end="133:82"><name pos:start="133:9" pos:end="133:21">xen_be_printf</name><argument_list pos:start="133:22" pos:end="133:82">(<argument pos:start="133:23" pos:end="133:37"><expr pos:start="133:23" pos:end="133:37"><operator pos:start="133:23" pos:end="133:23">&amp;</operator><name pos:start="133:24" pos:end="133:37"><name pos:start="133:24" pos:end="133:29">blkdev</name><operator pos:start="133:30" pos:end="133:31">-&gt;</operator><name pos:start="133:32" pos:end="133:37">xendev</name></name></expr></argument>, <argument pos:start="133:40" pos:end="133:40"><expr pos:start="133:40" pos:end="133:40"><literal type="number" pos:start="133:40" pos:end="133:40">2</literal></expr></argument>, <argument pos:start="133:43" pos:end="133:81"><expr pos:start="133:43" pos:end="133:81"><literal type="string" pos:start="133:43" pos:end="133:81">"get configured bdrv (cmdline setup)\n"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

	<expr_stmt pos:start="135:9" pos:end="135:41"><expr pos:start="135:9" pos:end="135:40"><name pos:start="135:9" pos:end="135:18"><name pos:start="135:9" pos:end="135:14">blkdev</name><operator pos:start="135:15" pos:end="135:16">-&gt;</operator><name pos:start="135:17" pos:end="135:18">bs</name></name> <operator pos:start="135:20" pos:end="135:20">=</operator> <name pos:start="135:22" pos:end="135:40"><name pos:start="135:22" pos:end="135:27">blkdev</name><operator pos:start="135:28" pos:end="135:29">-&gt;</operator><name pos:start="135:30" pos:end="135:34">dinfo</name><operator pos:start="135:35" pos:end="135:36">-&gt;</operator><name pos:start="135:37" pos:end="135:40">bdrv</name></name></expr>;</expr_stmt>

    </block_content>}</block></else></if_stmt>

    <expr_stmt pos:start="139:5" pos:end="139:35"><expr pos:start="139:5" pos:end="139:34"><name pos:start="139:5" pos:end="139:20"><name pos:start="139:5" pos:end="139:10">blkdev</name><operator pos:start="139:11" pos:end="139:12">-&gt;</operator><name pos:start="139:13" pos:end="139:20">file_blk</name></name>  <operator pos:start="139:23" pos:end="139:23">=</operator> <name pos:start="139:25" pos:end="139:34">BLOCK_SIZE</name></expr>;</expr_stmt>

    <expr_stmt pos:start="141:5" pos:end="141:51"><expr pos:start="141:5" pos:end="141:50"><name pos:start="141:5" pos:end="141:21"><name pos:start="141:5" pos:end="141:10">blkdev</name><operator pos:start="141:11" pos:end="141:12">-&gt;</operator><name pos:start="141:13" pos:end="141:21">file_size</name></name> <operator pos:start="141:23" pos:end="141:23">=</operator> <call pos:start="141:25" pos:end="141:50"><name pos:start="141:25" pos:end="141:38">bdrv_getlength</name><argument_list pos:start="141:39" pos:end="141:50">(<argument pos:start="141:40" pos:end="141:49"><expr pos:start="141:40" pos:end="141:49"><name pos:start="141:40" pos:end="141:49"><name pos:start="141:40" pos:end="141:45">blkdev</name><operator pos:start="141:46" pos:end="141:47">-&gt;</operator><name pos:start="141:48" pos:end="141:49">bs</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    <if_stmt pos:start="143:5" pos:end="153:5"><if pos:start="143:5" pos:end="153:5">if <condition pos:start="143:8" pos:end="143:30">(<expr pos:start="143:9" pos:end="143:29"><name pos:start="143:9" pos:end="143:25"><name pos:start="143:9" pos:end="143:14">blkdev</name><operator pos:start="143:15" pos:end="143:16">-&gt;</operator><name pos:start="143:17" pos:end="143:25">file_size</name></name> <operator pos:start="143:27" pos:end="143:27">&lt;</operator> <literal type="number" pos:start="143:29" pos:end="143:29">0</literal></expr>)</condition> <block pos:start="143:32" pos:end="153:5">{<block_content pos:start="145:9" pos:end="151:30">

        <expr_stmt pos:start="145:9" pos:end="149:76"><expr pos:start="145:9" pos:end="149:75"><call pos:start="145:9" pos:end="149:75"><name pos:start="145:9" pos:end="145:21">xen_be_printf</name><argument_list pos:start="145:22" pos:end="149:75">(<argument pos:start="145:23" pos:end="145:37"><expr pos:start="145:23" pos:end="145:37"><operator pos:start="145:23" pos:end="145:23">&amp;</operator><name pos:start="145:24" pos:end="145:37"><name pos:start="145:24" pos:end="145:29">blkdev</name><operator pos:start="145:30" pos:end="145:31">-&gt;</operator><name pos:start="145:32" pos:end="145:37">xendev</name></name></expr></argument>, <argument pos:start="145:40" pos:end="145:40"><expr pos:start="145:40" pos:end="145:40"><literal type="number" pos:start="145:40" pos:end="145:40">1</literal></expr></argument>, <argument pos:start="145:43" pos:end="145:78"><expr pos:start="145:43" pos:end="145:78"><literal type="string" pos:start="145:43" pos:end="145:78">"bdrv_getlength: %d (%s) | drv %s\n"</literal></expr></argument>,

                      <argument pos:start="147:23" pos:end="147:44"><expr pos:start="147:23" pos:end="147:44"><operator pos:start="147:23" pos:end="147:23">(</operator><name pos:start="147:24" pos:end="147:26">int</name><operator pos:start="147:27" pos:end="147:27">)</operator><name pos:start="147:28" pos:end="147:44"><name pos:start="147:28" pos:end="147:33">blkdev</name><operator pos:start="147:34" pos:end="147:35">-&gt;</operator><name pos:start="147:36" pos:end="147:44">file_size</name></name></expr></argument>, <argument pos:start="147:47" pos:end="147:74"><expr pos:start="147:47" pos:end="147:74"><call pos:start="147:47" pos:end="147:74"><name pos:start="147:47" pos:end="147:54">strerror</name><argument_list pos:start="147:55" pos:end="147:74">(<argument pos:start="147:56" pos:end="147:73"><expr pos:start="147:56" pos:end="147:73"><operator pos:start="147:56" pos:end="147:56">-</operator><name pos:start="147:57" pos:end="147:73"><name pos:start="147:57" pos:end="147:62">blkdev</name><operator pos:start="147:63" pos:end="147:64">-&gt;</operator><name pos:start="147:65" pos:end="147:73">file_size</name></name></expr></argument>)</argument_list></call></expr></argument>,

                      <argument pos:start="149:23" pos:end="149:74"><expr pos:start="149:23" pos:end="149:74"><ternary pos:start="149:23" pos:end="149:74"><condition pos:start="149:23" pos:end="149:39"><expr pos:start="149:23" pos:end="149:37"><name pos:start="149:23" pos:end="149:37"><name pos:start="149:23" pos:end="149:28">blkdev</name><operator pos:start="149:29" pos:end="149:30">-&gt;</operator><name pos:start="149:31" pos:end="149:32">bs</name><operator pos:start="149:33" pos:end="149:34">-&gt;</operator><name pos:start="149:35" pos:end="149:37">drv</name></name></expr> ?</condition><then pos:start="149:41" pos:end="149:68"> <expr pos:start="149:41" pos:end="149:68"><name pos:start="149:41" pos:end="149:68"><name pos:start="149:41" pos:end="149:46">blkdev</name><operator pos:start="149:47" pos:end="149:48">-&gt;</operator><name pos:start="149:49" pos:end="149:50">bs</name><operator pos:start="149:51" pos:end="149:52">-&gt;</operator><name pos:start="149:53" pos:end="149:55">drv</name><operator pos:start="149:56" pos:end="149:57">-&gt;</operator><name pos:start="149:58" pos:end="149:68">format_name</name></name></expr> </then><else pos:start="149:70" pos:end="149:74">: <expr pos:start="149:72" pos:end="149:74"><literal type="string" pos:start="149:72" pos:end="149:74">"-"</literal></expr></else></ternary></expr></argument>)</argument_list></call></expr>;</expr_stmt>

	<expr_stmt pos:start="151:9" pos:end="151:30"><expr pos:start="151:9" pos:end="151:29"><name pos:start="151:9" pos:end="151:25"><name pos:start="151:9" pos:end="151:14">blkdev</name><operator pos:start="151:15" pos:end="151:16">-&gt;</operator><name pos:start="151:17" pos:end="151:25">file_size</name></name> <operator pos:start="151:27" pos:end="151:27">=</operator> <literal type="number" pos:start="151:29" pos:end="151:29">0</literal></expr>;</expr_stmt>

    </block_content>}</block></if></if_stmt>

    <expr_stmt pos:start="155:5" pos:end="155:75"><expr pos:start="155:5" pos:end="155:74"><name pos:start="155:5" pos:end="155:17">have_barriers</name> <operator pos:start="155:19" pos:end="155:19">=</operator> <ternary pos:start="155:21" pos:end="155:74"><condition pos:start="155:21" pos:end="155:68"><expr pos:start="155:21" pos:end="155:66"><name pos:start="155:21" pos:end="155:35"><name pos:start="155:21" pos:end="155:26">blkdev</name><operator pos:start="155:27" pos:end="155:28">-&gt;</operator><name pos:start="155:29" pos:end="155:30">bs</name><operator pos:start="155:31" pos:end="155:32">-&gt;</operator><name pos:start="155:33" pos:end="155:35">drv</name></name> <operator pos:start="155:37" pos:end="155:38">&amp;&amp;</operator> <name pos:start="155:40" pos:end="155:66"><name pos:start="155:40" pos:end="155:45">blkdev</name><operator pos:start="155:46" pos:end="155:47">-&gt;</operator><name pos:start="155:48" pos:end="155:49">bs</name><operator pos:start="155:50" pos:end="155:51">-&gt;</operator><name pos:start="155:52" pos:end="155:54">drv</name><operator pos:start="155:55" pos:end="155:56">-&gt;</operator><name pos:start="155:57" pos:end="155:66">bdrv_flush</name></name></expr> ?</condition><then pos:start="155:70" pos:end="155:70"> <expr pos:start="155:70" pos:end="155:70"><literal type="number" pos:start="155:70" pos:end="155:70">1</literal></expr> </then><else pos:start="155:72" pos:end="155:74">: <expr pos:start="155:74" pos:end="155:74"><literal type="number" pos:start="155:74" pos:end="155:74">0</literal></expr></else></ternary></expr>;</expr_stmt>



    <expr_stmt pos:start="159:5" pos:end="165:62"><expr pos:start="159:5" pos:end="165:61"><call pos:start="159:5" pos:end="165:61"><name pos:start="159:5" pos:end="159:17">xen_be_printf</name><argument_list pos:start="159:18" pos:end="165:61">(<argument pos:start="159:19" pos:end="159:24"><expr pos:start="159:19" pos:end="159:24"><name pos:start="159:19" pos:end="159:24">xendev</name></expr></argument>, <argument pos:start="159:27" pos:end="159:27"><expr pos:start="159:27" pos:end="159:27"><literal type="number" pos:start="159:27" pos:end="159:27">1</literal></expr></argument>, <argument pos:start="159:30" pos:end="161:56"><expr pos:start="159:30" pos:end="161:56"><literal type="string" pos:start="159:30" pos:end="159:78">"type \"%s\", fileproto \"%s\", filename \"%s\","</literal>

		  <literal type="string" pos:start="161:19" pos:end="161:27">" size %"</literal> <name pos:start="161:29" pos:end="161:34">PRId64</name> <literal type="string" pos:start="161:36" pos:end="161:40">" (%"</literal> <name pos:start="161:42" pos:end="161:47">PRId64</name> <literal type="string" pos:start="161:49" pos:end="161:56">" MB)\n"</literal></expr></argument>,

		  <argument pos:start="163:19" pos:end="163:30"><expr pos:start="163:19" pos:end="163:30"><name pos:start="163:19" pos:end="163:30"><name pos:start="163:19" pos:end="163:24">blkdev</name><operator pos:start="163:25" pos:end="163:26">-&gt;</operator><name pos:start="163:27" pos:end="163:30">type</name></name></expr></argument>, <argument pos:start="163:33" pos:end="163:49"><expr pos:start="163:33" pos:end="163:49"><name pos:start="163:33" pos:end="163:49"><name pos:start="163:33" pos:end="163:38">blkdev</name><operator pos:start="163:39" pos:end="163:40">-&gt;</operator><name pos:start="163:41" pos:end="163:49">fileproto</name></name></expr></argument>, <argument pos:start="163:52" pos:end="163:67"><expr pos:start="163:52" pos:end="163:67"><name pos:start="163:52" pos:end="163:67"><name pos:start="163:52" pos:end="163:57">blkdev</name><operator pos:start="163:58" pos:end="163:59">-&gt;</operator><name pos:start="163:60" pos:end="163:67">filename</name></name></expr></argument>,

		  <argument pos:start="165:19" pos:end="165:35"><expr pos:start="165:19" pos:end="165:35"><name pos:start="165:19" pos:end="165:35"><name pos:start="165:19" pos:end="165:24">blkdev</name><operator pos:start="165:25" pos:end="165:26">-&gt;</operator><name pos:start="165:27" pos:end="165:35">file_size</name></name></expr></argument>, <argument pos:start="165:38" pos:end="165:60"><expr pos:start="165:38" pos:end="165:60"><name pos:start="165:38" pos:end="165:54"><name pos:start="165:38" pos:end="165:43">blkdev</name><operator pos:start="165:44" pos:end="165:45">-&gt;</operator><name pos:start="165:46" pos:end="165:54">file_size</name></name> <operator pos:start="165:56" pos:end="165:57">&gt;&gt;</operator> <literal type="number" pos:start="165:59" pos:end="165:60">20</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>



    <comment type="block" pos:start="169:5" pos:end="169:19">/* fill info */</comment>

    <expr_stmt pos:start="171:5" pos:end="171:77"><expr pos:start="171:5" pos:end="171:76"><call pos:start="171:5" pos:end="171:76"><name pos:start="171:5" pos:end="171:25">xenstore_write_be_int</name><argument_list pos:start="171:26" pos:end="171:76">(<argument pos:start="171:27" pos:end="171:41"><expr pos:start="171:27" pos:end="171:41"><operator pos:start="171:27" pos:end="171:27">&amp;</operator><name pos:start="171:28" pos:end="171:41"><name pos:start="171:28" pos:end="171:33">blkdev</name><operator pos:start="171:34" pos:end="171:35">-&gt;</operator><name pos:start="171:36" pos:end="171:41">xendev</name></name></expr></argument>, <argument pos:start="171:44" pos:end="171:60"><expr pos:start="171:44" pos:end="171:60"><literal type="string" pos:start="171:44" pos:end="171:60">"feature-barrier"</literal></expr></argument>, <argument pos:start="171:63" pos:end="171:75"><expr pos:start="171:63" pos:end="171:75"><name pos:start="171:63" pos:end="171:75">have_barriers</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    <expr_stmt pos:start="173:5" pos:end="173:68"><expr pos:start="173:5" pos:end="173:67"><call pos:start="173:5" pos:end="173:67"><name pos:start="173:5" pos:end="173:25">xenstore_write_be_int</name><argument_list pos:start="173:26" pos:end="173:67">(<argument pos:start="173:27" pos:end="173:41"><expr pos:start="173:27" pos:end="173:41"><operator pos:start="173:27" pos:end="173:27">&amp;</operator><name pos:start="173:28" pos:end="173:41"><name pos:start="173:28" pos:end="173:33">blkdev</name><operator pos:start="173:34" pos:end="173:35">-&gt;</operator><name pos:start="173:36" pos:end="173:41">xendev</name></name></expr></argument>, <argument pos:start="173:44" pos:end="173:49"><expr pos:start="173:44" pos:end="173:49"><literal type="string" pos:start="173:44" pos:end="173:49">"info"</literal></expr></argument>,            <argument pos:start="173:63" pos:end="173:66"><expr pos:start="173:63" pos:end="173:66"><name pos:start="173:63" pos:end="173:66">info</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    <expr_stmt pos:start="175:5" pos:end="175:80"><expr pos:start="175:5" pos:end="175:79"><call pos:start="175:5" pos:end="175:79"><name pos:start="175:5" pos:end="175:25">xenstore_write_be_int</name><argument_list pos:start="175:26" pos:end="175:79">(<argument pos:start="175:27" pos:end="175:41"><expr pos:start="175:27" pos:end="175:41"><operator pos:start="175:27" pos:end="175:27">&amp;</operator><name pos:start="175:28" pos:end="175:41"><name pos:start="175:28" pos:end="175:33">blkdev</name><operator pos:start="175:34" pos:end="175:35">-&gt;</operator><name pos:start="175:36" pos:end="175:41">xendev</name></name></expr></argument>, <argument pos:start="175:44" pos:end="175:56"><expr pos:start="175:44" pos:end="175:56"><literal type="string" pos:start="175:44" pos:end="175:56">"sector-size"</literal></expr></argument>,     <argument pos:start="175:63" pos:end="175:78"><expr pos:start="175:63" pos:end="175:78"><name pos:start="175:63" pos:end="175:78"><name pos:start="175:63" pos:end="175:68">blkdev</name><operator pos:start="175:69" pos:end="175:70">-&gt;</operator><name pos:start="175:71" pos:end="175:78">file_blk</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    <expr_stmt pos:start="177:5" pos:end="179:64"><expr pos:start="177:5" pos:end="179:63"><call pos:start="177:5" pos:end="179:63"><name pos:start="177:5" pos:end="177:25">xenstore_write_be_int</name><argument_list pos:start="177:26" pos:end="179:63">(<argument pos:start="177:27" pos:end="177:41"><expr pos:start="177:27" pos:end="177:41"><operator pos:start="177:27" pos:end="177:27">&amp;</operator><name pos:start="177:28" pos:end="177:41"><name pos:start="177:28" pos:end="177:33">blkdev</name><operator pos:start="177:34" pos:end="177:35">-&gt;</operator><name pos:start="177:36" pos:end="177:41">xendev</name></name></expr></argument>, <argument pos:start="177:44" pos:end="177:52"><expr pos:start="177:44" pos:end="177:52"><literal type="string" pos:start="177:44" pos:end="177:52">"sectors"</literal></expr></argument>,

			  <argument pos:start="179:27" pos:end="179:62"><expr pos:start="179:27" pos:end="179:62"><name pos:start="179:27" pos:end="179:43"><name pos:start="179:27" pos:end="179:32">blkdev</name><operator pos:start="179:33" pos:end="179:34">-&gt;</operator><name pos:start="179:35" pos:end="179:43">file_size</name></name> <operator pos:start="179:45" pos:end="179:45">/</operator> <name pos:start="179:47" pos:end="179:62"><name pos:start="179:47" pos:end="179:52">blkdev</name><operator pos:start="179:53" pos:end="179:54">-&gt;</operator><name pos:start="179:55" pos:end="179:62">file_blk</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    <return pos:start="181:5" pos:end="181:13">return <expr pos:start="181:12" pos:end="181:12"><literal type="number" pos:start="181:12" pos:end="181:12">0</literal></expr>;</return>

</block_content>}</block></function>
</unit>
