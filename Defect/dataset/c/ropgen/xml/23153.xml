<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<unit xmlns="http://www.srcML.org/srcML/src" xmlns:pos="http://www.srcML.org/srcML/position" revision="1.0.0" language="C" filename="dataset/ropgen/aug/0/23153.c" pos:tabs="8"><function pos:start="1:1" pos:end="63:1"><type pos:start="1:1" pos:end="1:11"><specifier pos:start="1:1" pos:end="1:6">static</specifier> <name pos:start="1:8" pos:end="1:11">void</name></type> <name pos:start="1:13" pos:end="1:36">virtio_init_region_cache</name><parameter_list pos:start="1:37" pos:end="1:63">(<parameter pos:start="1:38" pos:end="1:55"><decl pos:start="1:38" pos:end="1:55"><type pos:start="1:38" pos:end="1:55"><name pos:start="1:38" pos:end="1:49">VirtIODevice</name> <modifier pos:start="1:51" pos:end="1:51">*</modifier></type><name pos:start="1:52" pos:end="1:55">vdev</name></decl></parameter>, <parameter pos:start="1:58" pos:end="1:62"><decl pos:start="1:58" pos:end="1:62"><type pos:start="1:58" pos:end="1:62"><name pos:start="1:58" pos:end="1:60">int</name></type> <name pos:start="1:62" pos:end="1:62">n</name></decl></parameter>)</parameter_list>

<block pos:start="3:1" pos:end="63:1">{<block_content pos:start="5:5" pos:end="61:5">

    <decl_stmt pos:start="5:5" pos:end="5:33"><decl pos:start="5:5" pos:end="5:32"><type pos:start="5:5" pos:end="5:15"><name pos:start="5:5" pos:end="5:13">VirtQueue</name> <modifier pos:start="5:15" pos:end="5:15">*</modifier></type><name pos:start="5:16" pos:end="5:17">vq</name> <init pos:start="5:19" pos:end="5:32">= <expr pos:start="5:21" pos:end="5:32"><operator pos:start="5:21" pos:end="5:21">&amp;</operator><name pos:start="5:22" pos:end="5:32"><name pos:start="5:22" pos:end="5:25">vdev</name><operator pos:start="5:26" pos:end="5:27">-&gt;</operator><name pos:start="5:28" pos:end="5:29">vq</name><index pos:start="5:30" pos:end="5:32">[<expr pos:start="5:31" pos:end="5:31"><name pos:start="5:31" pos:end="5:31">n</name></expr>]</index></name></expr></init></decl>;</decl_stmt>

    <decl_stmt pos:start="7:5" pos:end="7:52"><decl pos:start="7:5" pos:end="7:51"><type pos:start="7:5" pos:end="7:29"><name pos:start="7:5" pos:end="7:27">VRingMemoryRegionCaches</name> <modifier pos:start="7:29" pos:end="7:29">*</modifier></type><name pos:start="7:30" pos:end="7:32">old</name> <init pos:start="7:34" pos:end="7:51">= <expr pos:start="7:36" pos:end="7:51"><name pos:start="7:36" pos:end="7:51"><name pos:start="7:36" pos:end="7:37">vq</name><operator pos:start="7:38" pos:end="7:39">-&gt;</operator><name pos:start="7:40" pos:end="7:44">vring</name><operator pos:start="7:45" pos:end="7:45">.</operator><name pos:start="7:46" pos:end="7:51">caches</name></name></expr></init></decl>;</decl_stmt>

    <decl_stmt pos:start="9:5" pos:end="9:33"><decl pos:start="9:5" pos:end="9:32"><type pos:start="9:5" pos:end="9:29"><name pos:start="9:5" pos:end="9:27">VRingMemoryRegionCaches</name> <modifier pos:start="9:29" pos:end="9:29">*</modifier></type><name pos:start="9:30" pos:end="9:32">new</name></decl>;</decl_stmt>

    <decl_stmt pos:start="11:5" pos:end="11:22"><decl pos:start="11:5" pos:end="11:15"><type pos:start="11:5" pos:end="11:10"><name pos:start="11:5" pos:end="11:10">hwaddr</name></type> <name pos:start="11:12" pos:end="11:15">addr</name></decl>, <decl pos:start="11:18" pos:end="11:21"><type ref="prev" pos:start="11:5" pos:end="11:10"/><name pos:start="11:18" pos:end="11:21">size</name></decl>;</decl_stmt>

    <decl_stmt pos:start="13:5" pos:end="13:19"><decl pos:start="13:5" pos:end="13:18"><type pos:start="13:5" pos:end="13:7"><name pos:start="13:5" pos:end="13:7">int</name></type> <name pos:start="13:9" pos:end="13:18">event_size</name></decl>;</decl_stmt>



    <expr_stmt pos:start="17:5" pos:end="17:84"><expr pos:start="17:5" pos:end="17:83"><name pos:start="17:5" pos:end="17:14">event_size</name> <operator pos:start="17:16" pos:end="17:16">=</operator> <ternary pos:start="17:18" pos:end="17:83"><condition pos:start="17:18" pos:end="17:77"><expr pos:start="17:18" pos:end="17:75"><call pos:start="17:18" pos:end="17:75"><name pos:start="17:18" pos:end="17:40">virtio_vdev_has_feature</name><argument_list pos:start="17:41" pos:end="17:75">(<argument pos:start="17:42" pos:end="17:49"><expr pos:start="17:42" pos:end="17:49"><name pos:start="17:42" pos:end="17:49"><name pos:start="17:42" pos:end="17:43">vq</name><operator pos:start="17:44" pos:end="17:45">-&gt;</operator><name pos:start="17:46" pos:end="17:49">vdev</name></name></expr></argument>, <argument pos:start="17:52" pos:end="17:74"><expr pos:start="17:52" pos:end="17:74"><name pos:start="17:52" pos:end="17:74">VIRTIO_RING_F_EVENT_IDX</name></expr></argument>)</argument_list></call></expr> ?</condition><then pos:start="17:79" pos:end="17:79"> <expr pos:start="17:79" pos:end="17:79"><literal type="number" pos:start="17:79" pos:end="17:79">2</literal></expr> </then><else pos:start="17:81" pos:end="17:83">: <expr pos:start="17:83" pos:end="17:83"><literal type="number" pos:start="17:83" pos:end="17:83">0</literal></expr></else></ternary></expr>;</expr_stmt>



    <expr_stmt pos:start="21:5" pos:end="21:26"><expr pos:start="21:5" pos:end="21:25"><name pos:start="21:5" pos:end="21:8">addr</name> <operator pos:start="21:10" pos:end="21:10">=</operator> <name pos:start="21:12" pos:end="21:25"><name pos:start="21:12" pos:end="21:13">vq</name><operator pos:start="21:14" pos:end="21:15">-&gt;</operator><name pos:start="21:16" pos:end="21:20">vring</name><operator pos:start="21:21" pos:end="21:21">.</operator><name pos:start="21:22" pos:end="21:25">desc</name></name></expr>;</expr_stmt>

    <if_stmt pos:start="23:5" pos:end="27:5"><if pos:start="23:5" pos:end="27:5">if <condition pos:start="23:8" pos:end="23:14">(<expr pos:start="23:9" pos:end="23:13"><operator pos:start="23:9" pos:end="23:9">!</operator><name pos:start="23:10" pos:end="23:13">addr</name></expr>)</condition> <block pos:start="23:16" pos:end="27:5">{<block_content pos:start="25:9" pos:end="25:15">

        <return pos:start="25:9" pos:end="25:15">return;</return>

    </block_content>}</block></if></if_stmt>

    <expr_stmt pos:start="29:5" pos:end="29:45"><expr pos:start="29:5" pos:end="29:44"><name pos:start="29:5" pos:end="29:7">new</name> <operator pos:start="29:9" pos:end="29:9">=</operator> <call pos:start="29:11" pos:end="29:44"><name pos:start="29:11" pos:end="29:16">g_new0</name><argument_list pos:start="29:17" pos:end="29:44">(<argument pos:start="29:18" pos:end="29:40"><expr pos:start="29:18" pos:end="29:40"><name pos:start="29:18" pos:end="29:40">VRingMemoryRegionCaches</name></expr></argument>, <argument pos:start="29:43" pos:end="29:43"><expr pos:start="29:43" pos:end="29:43"><literal type="number" pos:start="29:43" pos:end="29:43">1</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    <expr_stmt pos:start="31:5" pos:end="31:47"><expr pos:start="31:5" pos:end="31:46"><name pos:start="31:5" pos:end="31:8">size</name> <operator pos:start="31:10" pos:end="31:10">=</operator> <call pos:start="31:12" pos:end="31:46"><name pos:start="31:12" pos:end="31:37">virtio_queue_get_desc_size</name><argument_list pos:start="31:38" pos:end="31:46">(<argument pos:start="31:39" pos:end="31:42"><expr pos:start="31:39" pos:end="31:42"><name pos:start="31:39" pos:end="31:42">vdev</name></expr></argument>, <argument pos:start="31:45" pos:end="31:45"><expr pos:start="31:45" pos:end="31:45"><name pos:start="31:45" pos:end="31:45">n</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    <expr_stmt pos:start="33:5" pos:end="35:48"><expr pos:start="33:5" pos:end="35:47"><call pos:start="33:5" pos:end="35:47"><name pos:start="33:5" pos:end="33:28">address_space_cache_init</name><argument_list pos:start="33:29" pos:end="35:47">(<argument pos:start="33:30" pos:end="33:39"><expr pos:start="33:30" pos:end="33:39"><operator pos:start="33:30" pos:end="33:30">&amp;</operator><name pos:start="33:31" pos:end="33:39"><name pos:start="33:31" pos:end="33:33">new</name><operator pos:start="33:34" pos:end="33:35">-&gt;</operator><name pos:start="33:36" pos:end="33:39">desc</name></name></expr></argument>, <argument pos:start="33:42" pos:end="33:53"><expr pos:start="33:42" pos:end="33:53"><name pos:start="33:42" pos:end="33:53"><name pos:start="33:42" pos:end="33:45">vdev</name><operator pos:start="33:46" pos:end="33:47">-&gt;</operator><name pos:start="33:48" pos:end="33:53">dma_as</name></name></expr></argument>,

                             <argument pos:start="35:30" pos:end="35:33"><expr pos:start="35:30" pos:end="35:33"><name pos:start="35:30" pos:end="35:33">addr</name></expr></argument>, <argument pos:start="35:36" pos:end="35:39"><expr pos:start="35:36" pos:end="35:39"><name pos:start="35:36" pos:end="35:39">size</name></expr></argument>, <argument pos:start="35:42" pos:end="35:46"><expr pos:start="35:42" pos:end="35:46"><name pos:start="35:42" pos:end="35:46">false</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>



    <expr_stmt pos:start="39:5" pos:end="39:60"><expr pos:start="39:5" pos:end="39:59"><name pos:start="39:5" pos:end="39:8">size</name> <operator pos:start="39:10" pos:end="39:10">=</operator> <call pos:start="39:12" pos:end="39:46"><name pos:start="39:12" pos:end="39:37">virtio_queue_get_used_size</name><argument_list pos:start="39:38" pos:end="39:46">(<argument pos:start="39:39" pos:end="39:42"><expr pos:start="39:39" pos:end="39:42"><name pos:start="39:39" pos:end="39:42">vdev</name></expr></argument>, <argument pos:start="39:45" pos:end="39:45"><expr pos:start="39:45" pos:end="39:45"><name pos:start="39:45" pos:end="39:45">n</name></expr></argument>)</argument_list></call> <operator pos:start="39:48" pos:end="39:48">+</operator> <name pos:start="39:50" pos:end="39:59">event_size</name></expr>;</expr_stmt>

    <expr_stmt pos:start="41:5" pos:end="43:57"><expr pos:start="41:5" pos:end="43:56"><call pos:start="41:5" pos:end="43:56"><name pos:start="41:5" pos:end="41:28">address_space_cache_init</name><argument_list pos:start="41:29" pos:end="43:56">(<argument pos:start="41:30" pos:end="41:39"><expr pos:start="41:30" pos:end="41:39"><operator pos:start="41:30" pos:end="41:30">&amp;</operator><name pos:start="41:31" pos:end="41:39"><name pos:start="41:31" pos:end="41:33">new</name><operator pos:start="41:34" pos:end="41:35">-&gt;</operator><name pos:start="41:36" pos:end="41:39">used</name></name></expr></argument>, <argument pos:start="41:42" pos:end="41:53"><expr pos:start="41:42" pos:end="41:53"><name pos:start="41:42" pos:end="41:53"><name pos:start="41:42" pos:end="41:45">vdev</name><operator pos:start="41:46" pos:end="41:47">-&gt;</operator><name pos:start="41:48" pos:end="41:53">dma_as</name></name></expr></argument>,

                             <argument pos:start="43:30" pos:end="43:43"><expr pos:start="43:30" pos:end="43:43"><name pos:start="43:30" pos:end="43:43"><name pos:start="43:30" pos:end="43:31">vq</name><operator pos:start="43:32" pos:end="43:33">-&gt;</operator><name pos:start="43:34" pos:end="43:38">vring</name><operator pos:start="43:39" pos:end="43:39">.</operator><name pos:start="43:40" pos:end="43:43">used</name></name></expr></argument>, <argument pos:start="43:46" pos:end="43:49"><expr pos:start="43:46" pos:end="43:49"><name pos:start="43:46" pos:end="43:49">size</name></expr></argument>, <argument pos:start="43:52" pos:end="43:55"><expr pos:start="43:52" pos:end="43:55"><name pos:start="43:52" pos:end="43:55">true</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>



    <expr_stmt pos:start="47:5" pos:end="47:61"><expr pos:start="47:5" pos:end="47:60"><name pos:start="47:5" pos:end="47:8">size</name> <operator pos:start="47:10" pos:end="47:10">=</operator> <call pos:start="47:12" pos:end="47:47"><name pos:start="47:12" pos:end="47:38">virtio_queue_get_avail_size</name><argument_list pos:start="47:39" pos:end="47:47">(<argument pos:start="47:40" pos:end="47:43"><expr pos:start="47:40" pos:end="47:43"><name pos:start="47:40" pos:end="47:43">vdev</name></expr></argument>, <argument pos:start="47:46" pos:end="47:46"><expr pos:start="47:46" pos:end="47:46"><name pos:start="47:46" pos:end="47:46">n</name></expr></argument>)</argument_list></call> <operator pos:start="47:49" pos:end="47:49">+</operator> <name pos:start="47:51" pos:end="47:60">event_size</name></expr>;</expr_stmt>

    <expr_stmt pos:start="49:5" pos:end="51:59"><expr pos:start="49:5" pos:end="51:58"><call pos:start="49:5" pos:end="51:58"><name pos:start="49:5" pos:end="49:28">address_space_cache_init</name><argument_list pos:start="49:29" pos:end="51:58">(<argument pos:start="49:30" pos:end="49:40"><expr pos:start="49:30" pos:end="49:40"><operator pos:start="49:30" pos:end="49:30">&amp;</operator><name pos:start="49:31" pos:end="49:40"><name pos:start="49:31" pos:end="49:33">new</name><operator pos:start="49:34" pos:end="49:35">-&gt;</operator><name pos:start="49:36" pos:end="49:40">avail</name></name></expr></argument>, <argument pos:start="49:43" pos:end="49:54"><expr pos:start="49:43" pos:end="49:54"><name pos:start="49:43" pos:end="49:54"><name pos:start="49:43" pos:end="49:46">vdev</name><operator pos:start="49:47" pos:end="49:48">-&gt;</operator><name pos:start="49:49" pos:end="49:54">dma_as</name></name></expr></argument>,

                             <argument pos:start="51:30" pos:end="51:44"><expr pos:start="51:30" pos:end="51:44"><name pos:start="51:30" pos:end="51:44"><name pos:start="51:30" pos:end="51:31">vq</name><operator pos:start="51:32" pos:end="51:33">-&gt;</operator><name pos:start="51:34" pos:end="51:38">vring</name><operator pos:start="51:39" pos:end="51:39">.</operator><name pos:start="51:40" pos:end="51:44">avail</name></name></expr></argument>, <argument pos:start="51:47" pos:end="51:50"><expr pos:start="51:47" pos:end="51:50"><name pos:start="51:47" pos:end="51:50">size</name></expr></argument>, <argument pos:start="51:53" pos:end="51:57"><expr pos:start="51:53" pos:end="51:57"><name pos:start="51:53" pos:end="51:57">false</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>



    <expr_stmt pos:start="55:5" pos:end="55:43"><expr pos:start="55:5" pos:end="55:42"><call pos:start="55:5" pos:end="55:42"><name pos:start="55:5" pos:end="55:18">atomic_rcu_set</name><argument_list pos:start="55:19" pos:end="55:42">(<argument pos:start="55:20" pos:end="55:36"><expr pos:start="55:20" pos:end="55:36"><operator pos:start="55:20" pos:end="55:20">&amp;</operator><name pos:start="55:21" pos:end="55:36"><name pos:start="55:21" pos:end="55:22">vq</name><operator pos:start="55:23" pos:end="55:24">-&gt;</operator><name pos:start="55:25" pos:end="55:29">vring</name><operator pos:start="55:30" pos:end="55:30">.</operator><name pos:start="55:31" pos:end="55:36">caches</name></name></expr></argument>, <argument pos:start="55:39" pos:end="55:41"><expr pos:start="55:39" pos:end="55:41"><name pos:start="55:39" pos:end="55:41">new</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    <if_stmt pos:start="57:5" pos:end="61:5"><if pos:start="57:5" pos:end="61:5">if <condition pos:start="57:8" pos:end="57:12">(<expr pos:start="57:9" pos:end="57:11"><name pos:start="57:9" pos:end="57:11">old</name></expr>)</condition> <block pos:start="57:14" pos:end="61:5">{<block_content pos:start="59:9" pos:end="59:53">

        <expr_stmt pos:start="59:9" pos:end="59:53"><expr pos:start="59:9" pos:end="59:52"><call pos:start="59:9" pos:end="59:52"><name pos:start="59:9" pos:end="59:16">call_rcu</name><argument_list pos:start="59:17" pos:end="59:52">(<argument pos:start="59:18" pos:end="59:20"><expr pos:start="59:18" pos:end="59:20"><name pos:start="59:18" pos:end="59:20">old</name></expr></argument>, <argument pos:start="59:23" pos:end="59:46"><expr pos:start="59:23" pos:end="59:46"><name pos:start="59:23" pos:end="59:46">virtio_free_region_cache</name></expr></argument>, <argument pos:start="59:49" pos:end="59:51"><expr pos:start="59:49" pos:end="59:51"><name pos:start="59:49" pos:end="59:51">rcu</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    </block_content>}</block></if></if_stmt>

</block_content>}</block></function>
</unit>
