<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<unit xmlns="http://www.srcML.org/srcML/src" xmlns:cpp="http://www.srcML.org/srcML/cpp" xmlns:pos="http://www.srcML.org/srcML/position" revision="1.0.0" language="C" filename="dataset/ropgen/aug/0/8328.c" pos:tabs="8"><function pos:start="1:1" pos:end="405:1"><type pos:start="1:1" pos:end="1:11"><specifier pos:start="1:1" pos:end="1:6">static</specifier> <name pos:start="1:8" pos:end="1:11">void</name></type> <name pos:start="1:13" pos:end="1:34">apply_channel_coupling</name><parameter_list pos:start="1:35" pos:end="1:55">(<parameter pos:start="1:36" pos:end="1:54"><decl pos:start="1:36" pos:end="1:54"><type pos:start="1:36" pos:end="1:53"><name pos:start="1:36" pos:end="1:51">AC3EncodeContext</name> <modifier pos:start="1:53" pos:end="1:53">*</modifier></type><name pos:start="1:54" pos:end="1:54">s</name></decl></parameter>)</parameter_list>

<block pos:start="3:1" pos:end="405:1">{<block_content pos:start="5:5" pos:end="403:34">

    <expr_stmt pos:start="5:5" pos:end="8:0"><expr pos:start="5:5" pos:end="5:89"><call pos:start="5:5" pos:end="5:89"><name pos:start="5:5" pos:end="5:20">LOCAL_ALIGNED_16</name><argument_list pos:start="5:21" pos:end="5:89">(<argument pos:start="5:22" pos:end="5:29"><expr pos:start="5:22" pos:end="5:29"><name pos:start="5:22" pos:end="5:29">CoefType</name></expr></argument>, <argument pos:start="5:32" pos:end="5:41"><expr pos:start="5:32" pos:end="5:41"><name pos:start="5:32" pos:end="5:41">cpl_coords</name></expr></argument>,      <argument pos:start="5:49" pos:end="5:64"><expr pos:start="5:49" pos:end="5:64"><index pos:start="5:49" pos:end="5:64">[<expr pos:start="5:50" pos:end="5:63"><name pos:start="5:50" pos:end="5:63">AC3_MAX_BLOCKS</name></expr>]</index></expr></argument>, <argument pos:start="5:67" pos:end="5:88"><expr pos:start="5:67" pos:end="5:88"><index pos:start="5:67" pos:end="5:84">[<expr pos:start="5:68" pos:end="5:83"><name pos:start="5:68" pos:end="5:83">AC3_MAX_CHANNELS</name></expr>]</index><index pos:start="5:85" pos:end="5:88">[<expr pos:start="5:86" pos:end="5:87"><literal type="number" pos:start="5:86" pos:end="5:87">16</literal></expr>]</index></expr></argument>)</argument_list></call></expr>;</expr_stmt>

<cpp:if pos:start="7:1" pos:end="7:23">#<cpp:directive pos:start="7:2" pos:end="7:3">if</cpp:directive> <expr pos:start="7:5" pos:end="7:23"><name pos:start="7:5" pos:end="7:23">CONFIG_AC3ENC_FLOAT</name></expr></cpp:if>

    <expr_stmt pos:start="9:5" pos:end="12:0"><expr pos:start="9:5" pos:end="9:89"><call pos:start="9:5" pos:end="9:89"><name pos:start="9:5" pos:end="9:20">LOCAL_ALIGNED_16</name><argument_list pos:start="9:21" pos:end="9:89">(<argument pos:start="9:22" pos:end="9:28"><expr pos:start="9:22" pos:end="9:28"><name pos:start="9:22" pos:end="9:28">int32_t</name></expr></argument>, <argument pos:start="9:31" pos:end="9:46"><expr pos:start="9:31" pos:end="9:46"><name pos:start="9:31" pos:end="9:46">fixed_cpl_coords</name></expr></argument>, <argument pos:start="9:49" pos:end="9:64"><expr pos:start="9:49" pos:end="9:64"><index pos:start="9:49" pos:end="9:64">[<expr pos:start="9:50" pos:end="9:63"><name pos:start="9:50" pos:end="9:63">AC3_MAX_BLOCKS</name></expr>]</index></expr></argument>, <argument pos:start="9:67" pos:end="9:88"><expr pos:start="9:67" pos:end="9:88"><index pos:start="9:67" pos:end="9:84">[<expr pos:start="9:68" pos:end="9:83"><name pos:start="9:68" pos:end="9:83">AC3_MAX_CHANNELS</name></expr>]</index><index pos:start="9:85" pos:end="9:88">[<expr pos:start="9:86" pos:end="9:87"><literal type="number" pos:start="9:86" pos:end="9:87">16</literal></expr>]</index></expr></argument>)</argument_list></call></expr>;</expr_stmt>

<cpp:else pos:start="11:1" pos:end="11:5">#<cpp:directive pos:start="11:2" pos:end="11:5">else</cpp:directive></cpp:else>

    <expr_stmt pos:start="13:5" pos:end="16:0"><expr pos:start="13:5" pos:end="13:66"><call pos:start="13:5" pos:end="13:31"><name pos:start="13:5" pos:end="13:11">int32_t</name> <argument_list pos:start="13:13" pos:end="13:31">(<argument pos:start="13:14" pos:end="13:30"><expr pos:start="13:14" pos:end="13:30"><operator pos:start="13:14" pos:end="13:14">*</operator><name pos:start="13:15" pos:end="13:30">fixed_cpl_coords</name></expr></argument>)</argument_list></call><index pos:start="13:32" pos:end="13:49">[<expr pos:start="13:33" pos:end="13:48"><name pos:start="13:33" pos:end="13:48">AC3_MAX_CHANNELS</name></expr>]</index><index pos:start="13:50" pos:end="13:53">[<expr pos:start="13:51" pos:end="13:52"><literal type="number" pos:start="13:51" pos:end="13:52">16</literal></expr>]</index> <operator pos:start="13:55" pos:end="13:55">=</operator> <name pos:start="13:57" pos:end="13:66">cpl_coords</name></expr>;</expr_stmt>

<cpp:endif pos:start="15:1" pos:end="15:6">#<cpp:directive pos:start="15:2" pos:end="15:6">endif</cpp:directive></cpp:endif>

    <decl_stmt pos:start="17:5" pos:end="17:38"><decl pos:start="17:5" pos:end="17:22"><type pos:start="17:5" pos:end="17:7"><name pos:start="17:5" pos:end="17:7">int</name></type> <name pos:start="17:9" pos:end="17:17">av_uninit</name><argument_list pos:start="17:18" pos:end="17:22">(<argument pos:start="17:19" pos:end="17:21"><expr pos:start="17:19" pos:end="17:21"><name pos:start="17:19" pos:end="17:21">blk</name></expr></argument>)</argument_list></decl>, <decl pos:start="17:25" pos:end="17:26"><type ref="prev" pos:start="17:5" pos:end="17:7"/><name pos:start="17:25" pos:end="17:26">ch</name></decl>, <decl pos:start="17:29" pos:end="17:31"><type ref="prev" pos:start="17:5" pos:end="17:7"/><name pos:start="17:29" pos:end="17:31">bnd</name></decl>, <decl pos:start="17:34" pos:end="17:34"><type ref="prev" pos:start="17:5" pos:end="17:7"/><name pos:start="17:34" pos:end="17:34">i</name></decl>, <decl pos:start="17:37" pos:end="17:37"><type ref="prev" pos:start="17:5" pos:end="17:7"/><name pos:start="17:37" pos:end="17:37">j</name></decl>;</decl_stmt>

    <decl_stmt pos:start="19:5" pos:end="19:71"><decl pos:start="19:5" pos:end="19:70"><type pos:start="19:5" pos:end="19:15"><name pos:start="19:5" pos:end="19:15">CoefSumType</name></type> <name pos:start="19:17" pos:end="19:60"><name pos:start="19:17" pos:end="19:22">energy</name><index pos:start="19:23" pos:end="19:38">[<expr pos:start="19:24" pos:end="19:37"><name pos:start="19:24" pos:end="19:37">AC3_MAX_BLOCKS</name></expr>]</index><index pos:start="19:39" pos:end="19:56">[<expr pos:start="19:40" pos:end="19:55"><name pos:start="19:40" pos:end="19:55">AC3_MAX_CHANNELS</name></expr>]</index><index pos:start="19:57" pos:end="19:60">[<expr pos:start="19:58" pos:end="19:59"><literal type="number" pos:start="19:58" pos:end="19:59">16</literal></expr>]</index></name> <init pos:start="19:62" pos:end="19:70">= <expr pos:start="19:64" pos:end="19:70"><block pos:start="19:64" pos:end="19:70">{<expr pos:start="19:65" pos:end="19:69"><block pos:start="19:65" pos:end="19:69">{<expr pos:start="19:66" pos:end="19:68"><block pos:start="19:66" pos:end="19:68">{<expr pos:start="19:67" pos:end="19:67"><literal type="number" pos:start="19:67" pos:end="19:67">0</literal></expr>}</block></expr>}</block></expr>}</block></expr></init></decl>;</decl_stmt>

    <decl_stmt pos:start="21:5" pos:end="21:33"><decl pos:start="21:5" pos:end="21:17"><type pos:start="21:5" pos:end="21:7"><name pos:start="21:5" pos:end="21:7">int</name></type> <name pos:start="21:9" pos:end="21:17">cpl_start</name></decl>, <decl pos:start="21:20" pos:end="21:32"><type ref="prev" pos:start="21:5" pos:end="21:7"/><name pos:start="21:20" pos:end="21:32">num_cpl_coefs</name></decl>;</decl_stmt>



    <expr_stmt pos:start="25:5" pos:end="28:0"><expr pos:start="25:5" pos:end="25:69"><call pos:start="25:5" pos:end="25:69"><name pos:start="25:5" pos:end="25:10">memset</name><argument_list pos:start="25:11" pos:end="25:69">(<argument pos:start="25:12" pos:end="25:21"><expr pos:start="25:12" pos:end="25:21"><name pos:start="25:12" pos:end="25:21">cpl_coords</name></expr></argument>,       <argument pos:start="25:30" pos:end="25:30"><expr pos:start="25:30" pos:end="25:30"><literal type="number" pos:start="25:30" pos:end="25:30">0</literal></expr></argument>, <argument pos:start="25:33" pos:end="25:68"><expr pos:start="25:33" pos:end="25:68"><name pos:start="25:33" pos:end="25:46">AC3_MAX_BLOCKS</name> <operator pos:start="25:48" pos:end="25:48">*</operator> <sizeof pos:start="25:50" pos:end="25:68">sizeof<argument_list pos:start="25:56" pos:end="25:68">(<argument pos:start="25:57" pos:end="25:67"><expr pos:start="25:57" pos:end="25:67"><operator pos:start="25:57" pos:end="25:57">*</operator><name pos:start="25:58" pos:end="25:67">cpl_coords</name></expr></argument>)</argument_list></sizeof></expr></argument>)</argument_list></call></expr>;</expr_stmt>

<cpp:if pos:start="27:1" pos:end="27:23">#<cpp:directive pos:start="27:2" pos:end="27:3">if</cpp:directive> <expr pos:start="27:5" pos:end="27:23"><name pos:start="27:5" pos:end="27:23">CONFIG_AC3ENC_FLOAT</name></expr></cpp:if>

    <expr_stmt pos:start="29:5" pos:end="32:0"><expr pos:start="29:5" pos:end="29:69"><call pos:start="29:5" pos:end="29:69"><name pos:start="29:5" pos:end="29:10">memset</name><argument_list pos:start="29:11" pos:end="29:69">(<argument pos:start="29:12" pos:end="29:27"><expr pos:start="29:12" pos:end="29:27"><name pos:start="29:12" pos:end="29:27">fixed_cpl_coords</name></expr></argument>, <argument pos:start="29:30" pos:end="29:30"><expr pos:start="29:30" pos:end="29:30"><literal type="number" pos:start="29:30" pos:end="29:30">0</literal></expr></argument>, <argument pos:start="29:33" pos:end="29:68"><expr pos:start="29:33" pos:end="29:68"><name pos:start="29:33" pos:end="29:46">AC3_MAX_BLOCKS</name> <operator pos:start="29:48" pos:end="29:48">*</operator> <sizeof pos:start="29:50" pos:end="29:68">sizeof<argument_list pos:start="29:56" pos:end="29:68">(<argument pos:start="29:57" pos:end="29:67"><expr pos:start="29:57" pos:end="29:67"><operator pos:start="29:57" pos:end="29:57">*</operator><name pos:start="29:58" pos:end="29:67">cpl_coords</name></expr></argument>)</argument_list></sizeof></expr></argument>)</argument_list></call></expr>;</expr_stmt>

<cpp:endif pos:start="31:1" pos:end="31:6">#<cpp:directive pos:start="31:2" pos:end="31:6">endif</cpp:directive></cpp:endif>



    <comment type="block" pos:start="35:5" pos:end="37:56">/* align start to 16-byte boundary. align length to multiple of 32.

        note: coupling start bin % 4 will always be 1 */</comment>

    <expr_stmt pos:start="39:5" pos:end="39:46"><expr pos:start="39:5" pos:end="39:45"><name pos:start="39:5" pos:end="39:13">cpl_start</name>     <operator pos:start="39:19" pos:end="39:19">=</operator> <name pos:start="39:21" pos:end="39:41"><name pos:start="39:21" pos:end="39:21">s</name><operator pos:start="39:22" pos:end="39:23">-&gt;</operator><name pos:start="39:24" pos:end="39:33">start_freq</name><index pos:start="39:34" pos:end="39:41">[<expr pos:start="39:35" pos:end="39:40"><name pos:start="39:35" pos:end="39:40">CPL_CH</name></expr>]</index></name> <operator pos:start="39:43" pos:end="39:43">-</operator> <literal type="number" pos:start="39:45" pos:end="39:45">1</literal></expr>;</expr_stmt>

    <expr_stmt pos:start="41:5" pos:end="41:62"><expr pos:start="41:5" pos:end="41:61"><name pos:start="41:5" pos:end="41:17">num_cpl_coefs</name> <operator pos:start="41:19" pos:end="41:19">=</operator> <call pos:start="41:21" pos:end="41:61"><name pos:start="41:21" pos:end="41:27">FFALIGN</name><argument_list pos:start="41:28" pos:end="41:61">(<argument pos:start="41:29" pos:end="41:56"><expr pos:start="41:29" pos:end="41:56"><name pos:start="41:29" pos:end="41:47"><name pos:start="41:29" pos:end="41:29">s</name><operator pos:start="41:30" pos:end="41:31">-&gt;</operator><name pos:start="41:32" pos:end="41:47">num_cpl_subbands</name></name> <operator pos:start="41:49" pos:end="41:49">*</operator> <literal type="number" pos:start="41:51" pos:end="41:54">12</literal> <operator pos:start="41:54" pos:end="41:54">+</operator> <literal type="number" pos:start="41:56" pos:end="41:56">1</literal></expr></argument>, <argument pos:start="41:59" pos:end="41:60"><expr pos:start="41:59" pos:end="41:60"><literal type="number" pos:start="41:59" pos:end="41:60">32</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    <expr_stmt pos:start="43:5" pos:end="43:74"><expr pos:start="43:5" pos:end="43:73"><name pos:start="43:5" pos:end="43:13">cpl_start</name>     <operator pos:start="43:19" pos:end="43:19">=</operator> <call pos:start="43:21" pos:end="43:57"><name pos:start="43:21" pos:end="43:25">FFMIN</name><argument_list pos:start="43:26" pos:end="43:57">(<argument pos:start="43:27" pos:end="43:29"><expr pos:start="43:27" pos:end="43:29"><literal type="number" pos:start="43:27" pos:end="43:29">256</literal></expr></argument>, <argument pos:start="43:32" pos:end="43:56"><expr pos:start="43:32" pos:end="43:56"><name pos:start="43:32" pos:end="43:40">cpl_start</name> <operator pos:start="43:42" pos:end="43:42">+</operator> <name pos:start="43:44" pos:end="43:56">num_cpl_coefs</name></expr></argument>)</argument_list></call> <operator pos:start="43:59" pos:end="43:59">-</operator> <name pos:start="43:61" pos:end="43:73">num_cpl_coefs</name></expr>;</expr_stmt>



    <comment type="block" pos:start="47:5" pos:end="47:54">/* calculate coupling channel from fbw channels */</comment>

    <for pos:start="49:5" pos:end="81:5">for <control pos:start="49:9" pos:end="49:45">(<init pos:start="49:10" pos:end="49:17"><expr pos:start="49:10" pos:end="49:16"><name pos:start="49:10" pos:end="49:12">blk</name> <operator pos:start="49:14" pos:end="49:14">=</operator> <literal type="number" pos:start="49:16" pos:end="49:16">0</literal></expr>;</init> <condition pos:start="49:19" pos:end="49:38"><expr pos:start="49:19" pos:end="49:37"><name pos:start="49:19" pos:end="49:21">blk</name> <operator pos:start="49:23" pos:end="49:23">&lt;</operator> <name pos:start="49:25" pos:end="49:37"><name pos:start="49:25" pos:end="49:25">s</name><operator pos:start="49:26" pos:end="49:27">-&gt;</operator><name pos:start="49:28" pos:end="49:37">num_blocks</name></name></expr>;</condition> <incr pos:start="49:40" pos:end="49:44"><expr pos:start="49:40" pos:end="49:44"><name pos:start="49:40" pos:end="49:42">blk</name><operator pos:start="49:43" pos:end="49:44">++</operator></expr></incr>)</control> <block pos:start="49:47" pos:end="81:5">{<block_content pos:start="51:9" pos:end="79:61">

        <decl_stmt pos:start="51:9" pos:end="51:42"><decl pos:start="51:9" pos:end="51:41"><type pos:start="51:9" pos:end="51:18"><name pos:start="51:9" pos:end="51:16">AC3Block</name> <modifier pos:start="51:18" pos:end="51:18">*</modifier></type><name pos:start="51:19" pos:end="51:23">block</name> <init pos:start="51:25" pos:end="51:41">= <expr pos:start="51:27" pos:end="51:41"><operator pos:start="51:27" pos:end="51:27">&amp;</operator><name pos:start="51:28" pos:end="51:41"><name pos:start="51:28" pos:end="51:28">s</name><operator pos:start="51:29" pos:end="51:30">-&gt;</operator><name pos:start="51:31" pos:end="51:36">blocks</name><index pos:start="51:37" pos:end="51:41">[<expr pos:start="51:38" pos:end="51:40"><name pos:start="51:38" pos:end="51:40">blk</name></expr>]</index></name></expr></init></decl>;</decl_stmt>

        <decl_stmt pos:start="53:9" pos:end="53:66"><decl pos:start="53:9" pos:end="53:65"><type pos:start="53:9" pos:end="53:18"><name pos:start="53:9" pos:end="53:16">CoefType</name> <modifier pos:start="53:18" pos:end="53:18">*</modifier></type><name pos:start="53:19" pos:end="53:26">cpl_coef</name> <init pos:start="53:28" pos:end="53:65">= <expr pos:start="53:30" pos:end="53:65"><operator pos:start="53:30" pos:end="53:30">&amp;</operator><name pos:start="53:31" pos:end="53:65"><name pos:start="53:31" pos:end="53:35">block</name><operator pos:start="53:36" pos:end="53:37">-&gt;</operator><name pos:start="53:38" pos:end="53:46">mdct_coef</name><index pos:start="53:47" pos:end="53:54">[<expr pos:start="53:48" pos:end="53:53"><name pos:start="53:48" pos:end="53:53">CPL_CH</name></expr>]</index><index pos:start="53:55" pos:end="53:65">[<expr pos:start="53:56" pos:end="53:64"><name pos:start="53:56" pos:end="53:64">cpl_start</name></expr>]</index></name></expr></init></decl>;</decl_stmt>

        <if_stmt pos:start="55:9" pos:end="57:21"><if pos:start="55:9" pos:end="57:21">if <condition pos:start="55:12" pos:end="55:31">(<expr pos:start="55:13" pos:end="55:30"><operator pos:start="55:13" pos:end="55:13">!</operator><name pos:start="55:14" pos:end="55:30"><name pos:start="55:14" pos:end="55:18">block</name><operator pos:start="55:19" pos:end="55:20">-&gt;</operator><name pos:start="55:21" pos:end="55:30">cpl_in_use</name></name></expr>)</condition><block type="pseudo" pos:start="57:13" pos:end="57:21"><block_content pos:start="57:13" pos:end="57:21">

            <continue pos:start="57:13" pos:end="57:21">continue;</continue></block_content></block></if></if_stmt>

        <expr_stmt pos:start="59:9" pos:end="59:63"><expr pos:start="59:9" pos:end="59:62"><call pos:start="59:9" pos:end="59:62"><name pos:start="59:9" pos:end="59:14">memset</name><argument_list pos:start="59:15" pos:end="59:62">(<argument pos:start="59:16" pos:end="59:23"><expr pos:start="59:16" pos:end="59:23"><name pos:start="59:16" pos:end="59:23">cpl_coef</name></expr></argument>, <argument pos:start="59:26" pos:end="59:26"><expr pos:start="59:26" pos:end="59:26"><literal type="number" pos:start="59:26" pos:end="59:26">0</literal></expr></argument>, <argument pos:start="59:29" pos:end="59:61"><expr pos:start="59:29" pos:end="59:61"><name pos:start="59:29" pos:end="59:41">num_cpl_coefs</name> <operator pos:start="59:43" pos:end="59:43">*</operator> <sizeof pos:start="59:45" pos:end="59:61">sizeof<argument_list pos:start="59:51" pos:end="59:61">(<argument pos:start="59:52" pos:end="59:60"><expr pos:start="59:52" pos:end="59:60"><operator pos:start="59:52" pos:end="59:52">*</operator><name pos:start="59:53" pos:end="59:60">cpl_coef</name></expr></argument>)</argument_list></sizeof></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <for pos:start="61:9" pos:end="73:9">for <control pos:start="61:13" pos:end="61:49">(<init pos:start="61:14" pos:end="61:20"><expr pos:start="61:14" pos:end="61:19"><name pos:start="61:14" pos:end="61:15">ch</name> <operator pos:start="61:17" pos:end="61:17">=</operator> <literal type="number" pos:start="61:19" pos:end="61:19">1</literal></expr>;</init> <condition pos:start="61:22" pos:end="61:43"><expr pos:start="61:22" pos:end="61:42"><name pos:start="61:22" pos:end="61:23">ch</name> <operator pos:start="61:25" pos:end="61:26">&lt;=</operator> <name pos:start="61:28" pos:end="61:42"><name pos:start="61:28" pos:end="61:28">s</name><operator pos:start="61:29" pos:end="61:30">-&gt;</operator><name pos:start="61:31" pos:end="61:42">fbw_channels</name></name></expr>;</condition> <incr pos:start="61:45" pos:end="61:48"><expr pos:start="61:45" pos:end="61:48"><name pos:start="61:45" pos:end="61:46">ch</name><operator pos:start="61:47" pos:end="61:48">++</operator></expr></incr>)</control> <block pos:start="61:51" pos:end="73:9">{<block_content pos:start="63:13" pos:end="71:42">

            <decl_stmt pos:start="63:13" pos:end="63:65"><decl pos:start="63:13" pos:end="63:64"><type pos:start="63:13" pos:end="63:22"><name pos:start="63:13" pos:end="63:20">CoefType</name> <modifier pos:start="63:22" pos:end="63:22">*</modifier></type><name pos:start="63:23" pos:end="63:29">ch_coef</name> <init pos:start="63:31" pos:end="63:64">= <expr pos:start="63:33" pos:end="63:64"><operator pos:start="63:33" pos:end="63:33">&amp;</operator><name pos:start="63:34" pos:end="63:64"><name pos:start="63:34" pos:end="63:38">block</name><operator pos:start="63:39" pos:end="63:40">-&gt;</operator><name pos:start="63:41" pos:end="63:49">mdct_coef</name><index pos:start="63:50" pos:end="63:53">[<expr pos:start="63:51" pos:end="63:52"><name pos:start="63:51" pos:end="63:52">ch</name></expr>]</index><index pos:start="63:54" pos:end="63:64">[<expr pos:start="63:55" pos:end="63:63"><name pos:start="63:55" pos:end="63:63">cpl_start</name></expr>]</index></name></expr></init></decl>;</decl_stmt>

            <if_stmt pos:start="65:13" pos:end="67:25"><if pos:start="65:13" pos:end="67:25">if <condition pos:start="65:16" pos:end="65:43">(<expr pos:start="65:17" pos:end="65:42"><operator pos:start="65:17" pos:end="65:17">!</operator><name pos:start="65:18" pos:end="65:42"><name pos:start="65:18" pos:end="65:22">block</name><operator pos:start="65:23" pos:end="65:24">-&gt;</operator><name pos:start="65:25" pos:end="65:38">channel_in_cpl</name><index pos:start="65:39" pos:end="65:42">[<expr pos:start="65:40" pos:end="65:41"><name pos:start="65:40" pos:end="65:41">ch</name></expr>]</index></name></expr>)</condition><block type="pseudo" pos:start="67:17" pos:end="67:25"><block_content pos:start="67:17" pos:end="67:25">

                <continue pos:start="67:17" pos:end="67:25">continue;</continue></block_content></block></if></if_stmt>

            <for pos:start="69:13" pos:end="71:42">for <control pos:start="69:17" pos:end="69:47">(<init pos:start="69:18" pos:end="69:23"><expr pos:start="69:18" pos:end="69:22"><name pos:start="69:18" pos:end="69:18">i</name> <operator pos:start="69:20" pos:end="69:20">=</operator> <literal type="number" pos:start="69:22" pos:end="69:22">0</literal></expr>;</init> <condition pos:start="69:25" pos:end="69:42"><expr pos:start="69:25" pos:end="69:41"><name pos:start="69:25" pos:end="69:25">i</name> <operator pos:start="69:27" pos:end="69:27">&lt;</operator> <name pos:start="69:29" pos:end="69:41">num_cpl_coefs</name></expr>;</condition> <incr pos:start="69:44" pos:end="69:46"><expr pos:start="69:44" pos:end="69:46"><name pos:start="69:44" pos:end="69:44">i</name><operator pos:start="69:45" pos:end="69:46">++</operator></expr></incr>)</control><block type="pseudo" pos:start="71:17" pos:end="71:42"><block_content pos:start="71:17" pos:end="71:42">

                <expr_stmt pos:start="71:17" pos:end="71:42"><expr pos:start="71:17" pos:end="71:41"><name pos:start="71:17" pos:end="71:27"><name pos:start="71:17" pos:end="71:24">cpl_coef</name><index pos:start="71:25" pos:end="71:27">[<expr pos:start="71:26" pos:end="71:26"><name pos:start="71:26" pos:end="71:26">i</name></expr>]</index></name> <operator pos:start="71:29" pos:end="71:30">+=</operator> <name pos:start="71:32" pos:end="71:41"><name pos:start="71:32" pos:end="71:38">ch_coef</name><index pos:start="71:39" pos:end="71:41">[<expr pos:start="71:40" pos:end="71:40"><name pos:start="71:40" pos:end="71:40">i</name></expr>]</index></name></expr>;</expr_stmt></block_content></block></for>

        </block_content>}</block></for>



        <comment type="block" pos:start="77:9" pos:end="77:65">/* coefficients must be clipped in order to be encoded */</comment>

        <expr_stmt pos:start="79:9" pos:end="79:61"><expr pos:start="79:9" pos:end="79:60"><call pos:start="79:9" pos:end="79:60"><name pos:start="79:9" pos:end="79:25">clip_coefficients</name><argument_list pos:start="79:26" pos:end="79:60">(<argument pos:start="79:27" pos:end="79:34"><expr pos:start="79:27" pos:end="79:34"><operator pos:start="79:27" pos:end="79:27">&amp;</operator><name pos:start="79:28" pos:end="79:34"><name pos:start="79:28" pos:end="79:28">s</name><operator pos:start="79:29" pos:end="79:30">-&gt;</operator><name pos:start="79:31" pos:end="79:34">adsp</name></name></expr></argument>, <argument pos:start="79:37" pos:end="79:44"><expr pos:start="79:37" pos:end="79:44"><name pos:start="79:37" pos:end="79:44">cpl_coef</name></expr></argument>, <argument pos:start="79:47" pos:end="79:59"><expr pos:start="79:47" pos:end="79:59"><name pos:start="79:47" pos:end="79:59">num_cpl_coefs</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    </block_content>}</block></for>



    <comment type="block" pos:start="85:5" pos:end="85:80">/* calculate energy in each band in coupling channel and each fbw channel */</comment>

    <comment type="block" pos:start="87:5" pos:end="87:64">/* TODO: possibly use SIMD to speed up energy calculation */</comment>

    <expr_stmt pos:start="89:5" pos:end="89:12"><expr pos:start="89:5" pos:end="89:11"><name pos:start="89:5" pos:end="89:7">bnd</name> <operator pos:start="89:9" pos:end="89:9">=</operator> <literal type="number" pos:start="89:11" pos:end="89:11">0</literal></expr>;</expr_stmt>

    <expr_stmt pos:start="91:5" pos:end="91:30"><expr pos:start="91:5" pos:end="91:29"><name pos:start="91:5" pos:end="91:5">i</name> <operator pos:start="91:7" pos:end="91:7">=</operator> <name pos:start="91:9" pos:end="91:29"><name pos:start="91:9" pos:end="91:9">s</name><operator pos:start="91:10" pos:end="91:11">-&gt;</operator><name pos:start="91:12" pos:end="91:21">start_freq</name><index pos:start="91:22" pos:end="91:29">[<expr pos:start="91:23" pos:end="91:28"><name pos:start="91:23" pos:end="91:28">CPL_CH</name></expr>]</index></name></expr>;</expr_stmt>

    <while pos:start="93:5" pos:end="123:5">while <condition pos:start="93:11" pos:end="93:31">(<expr pos:start="93:12" pos:end="93:30"><name pos:start="93:12" pos:end="93:12">i</name> <operator pos:start="93:14" pos:end="93:14">&lt;</operator> <name pos:start="93:16" pos:end="93:30"><name pos:start="93:16" pos:end="93:16">s</name><operator pos:start="93:17" pos:end="93:18">-&gt;</operator><name pos:start="93:19" pos:end="93:30">cpl_end_freq</name></name></expr>)</condition> <block pos:start="93:33" pos:end="123:5">{<block_content pos:start="95:9" pos:end="121:14">

        <decl_stmt pos:start="95:9" pos:end="95:47"><decl pos:start="95:9" pos:end="95:46"><type pos:start="95:9" pos:end="95:11"><name pos:start="95:9" pos:end="95:11">int</name></type> <name pos:start="95:13" pos:end="95:21">band_size</name> <init pos:start="95:23" pos:end="95:46">= <expr pos:start="95:25" pos:end="95:46"><name pos:start="95:25" pos:end="95:46"><name pos:start="95:25" pos:end="95:25">s</name><operator pos:start="95:26" pos:end="95:27">-&gt;</operator><name pos:start="95:28" pos:end="95:41">cpl_band_sizes</name><index pos:start="95:42" pos:end="95:46">[<expr pos:start="95:43" pos:end="95:45"><name pos:start="95:43" pos:end="95:45">bnd</name></expr>]</index></name></expr></init></decl>;</decl_stmt>

        <for pos:start="97:9" pos:end="117:9">for <control pos:start="97:13" pos:end="97:54">(<init pos:start="97:14" pos:end="97:25"><expr pos:start="97:14" pos:end="97:24"><name pos:start="97:14" pos:end="97:15">ch</name> <operator pos:start="97:17" pos:end="97:17">=</operator> <name pos:start="97:19" pos:end="97:24">CPL_CH</name></expr>;</init> <condition pos:start="97:27" pos:end="97:48"><expr pos:start="97:27" pos:end="97:47"><name pos:start="97:27" pos:end="97:28">ch</name> <operator pos:start="97:30" pos:end="97:31">&lt;=</operator> <name pos:start="97:33" pos:end="97:47"><name pos:start="97:33" pos:end="97:33">s</name><operator pos:start="97:34" pos:end="97:35">-&gt;</operator><name pos:start="97:36" pos:end="97:47">fbw_channels</name></name></expr>;</condition> <incr pos:start="97:50" pos:end="97:53"><expr pos:start="97:50" pos:end="97:53"><name pos:start="97:50" pos:end="97:51">ch</name><operator pos:start="97:52" pos:end="97:53">++</operator></expr></incr>)</control> <block pos:start="97:56" pos:end="117:9">{<block_content pos:start="99:13" pos:end="115:13">

            <for pos:start="99:13" pos:end="115:13">for <control pos:start="99:17" pos:end="99:53">(<init pos:start="99:18" pos:end="99:25"><expr pos:start="99:18" pos:end="99:24"><name pos:start="99:18" pos:end="99:20">blk</name> <operator pos:start="99:22" pos:end="99:22">=</operator> <literal type="number" pos:start="99:24" pos:end="99:24">0</literal></expr>;</init> <condition pos:start="99:27" pos:end="99:46"><expr pos:start="99:27" pos:end="99:45"><name pos:start="99:27" pos:end="99:29">blk</name> <operator pos:start="99:31" pos:end="99:31">&lt;</operator> <name pos:start="99:33" pos:end="99:45"><name pos:start="99:33" pos:end="99:33">s</name><operator pos:start="99:34" pos:end="99:35">-&gt;</operator><name pos:start="99:36" pos:end="99:45">num_blocks</name></name></expr>;</condition> <incr pos:start="99:48" pos:end="99:52"><expr pos:start="99:48" pos:end="99:52"><name pos:start="99:48" pos:end="99:50">blk</name><operator pos:start="99:51" pos:end="99:52">++</operator></expr></incr>)</control> <block pos:start="99:55" pos:end="115:13">{<block_content pos:start="101:17" pos:end="113:17">

                <decl_stmt pos:start="101:17" pos:end="101:50"><decl pos:start="101:17" pos:end="101:49"><type pos:start="101:17" pos:end="101:26"><name pos:start="101:17" pos:end="101:24">AC3Block</name> <modifier pos:start="101:26" pos:end="101:26">*</modifier></type><name pos:start="101:27" pos:end="101:31">block</name> <init pos:start="101:33" pos:end="101:49">= <expr pos:start="101:35" pos:end="101:49"><operator pos:start="101:35" pos:end="101:35">&amp;</operator><name pos:start="101:36" pos:end="101:49"><name pos:start="101:36" pos:end="101:36">s</name><operator pos:start="101:37" pos:end="101:38">-&gt;</operator><name pos:start="101:39" pos:end="101:44">blocks</name><index pos:start="101:45" pos:end="101:49">[<expr pos:start="101:46" pos:end="101:48"><name pos:start="101:46" pos:end="101:48">blk</name></expr>]</index></name></expr></init></decl>;</decl_stmt>

                <if_stmt pos:start="103:17" pos:end="105:29"><if pos:start="103:17" pos:end="105:29">if <condition pos:start="103:20" pos:end="103:86">(<expr pos:start="103:21" pos:end="103:85"><operator pos:start="103:21" pos:end="103:21">!</operator><name pos:start="103:22" pos:end="103:38"><name pos:start="103:22" pos:end="103:26">block</name><operator pos:start="103:27" pos:end="103:28">-&gt;</operator><name pos:start="103:29" pos:end="103:38">cpl_in_use</name></name> <operator pos:start="103:40" pos:end="103:41">||</operator> <operator pos:start="103:43" pos:end="103:43">(</operator><name pos:start="103:44" pos:end="103:45">ch</name> <operator pos:start="103:47" pos:end="103:47">&gt;</operator> <name pos:start="103:49" pos:end="103:54">CPL_CH</name> <operator pos:start="103:56" pos:end="103:57">&amp;&amp;</operator> <operator pos:start="103:59" pos:end="103:59">!</operator><name pos:start="103:60" pos:end="103:84"><name pos:start="103:60" pos:end="103:64">block</name><operator pos:start="103:65" pos:end="103:66">-&gt;</operator><name pos:start="103:67" pos:end="103:80">channel_in_cpl</name><index pos:start="103:81" pos:end="103:84">[<expr pos:start="103:82" pos:end="103:83"><name pos:start="103:82" pos:end="103:83">ch</name></expr>]</index></name><operator pos:start="103:85" pos:end="103:85">)</operator></expr>)</condition><block type="pseudo" pos:start="105:21" pos:end="105:29"><block_content pos:start="105:21" pos:end="105:29">

                    <continue pos:start="105:21" pos:end="105:29">continue;</continue></block_content></block></if></if_stmt>

                <for pos:start="107:17" pos:end="113:17">for <control pos:start="107:21" pos:end="107:47">(<init pos:start="107:22" pos:end="107:27"><expr pos:start="107:22" pos:end="107:26"><name pos:start="107:22" pos:end="107:22">j</name> <operator pos:start="107:24" pos:end="107:24">=</operator> <literal type="number" pos:start="107:26" pos:end="107:26">0</literal></expr>;</init> <condition pos:start="107:29" pos:end="107:42"><expr pos:start="107:29" pos:end="107:41"><name pos:start="107:29" pos:end="107:29">j</name> <operator pos:start="107:31" pos:end="107:31">&lt;</operator> <name pos:start="107:33" pos:end="107:41">band_size</name></expr>;</condition> <incr pos:start="107:44" pos:end="107:46"><expr pos:start="107:44" pos:end="107:46"><name pos:start="107:44" pos:end="107:44">j</name><operator pos:start="107:45" pos:end="107:46">++</operator></expr></incr>)</control> <block pos:start="107:49" pos:end="113:17">{<block_content pos:start="109:21" pos:end="111:57">

                    <decl_stmt pos:start="109:21" pos:end="109:59"><decl pos:start="109:21" pos:end="109:58"><type pos:start="109:21" pos:end="109:28"><name pos:start="109:21" pos:end="109:28">CoefType</name></type> <name pos:start="109:30" pos:end="109:30">v</name> <init pos:start="109:32" pos:end="109:58">= <expr pos:start="109:34" pos:end="109:58"><name pos:start="109:34" pos:end="109:58"><name pos:start="109:34" pos:end="109:38">block</name><operator pos:start="109:39" pos:end="109:40">-&gt;</operator><name pos:start="109:41" pos:end="109:49">mdct_coef</name><index pos:start="109:50" pos:end="109:53">[<expr pos:start="109:51" pos:end="109:52"><name pos:start="109:51" pos:end="109:52">ch</name></expr>]</index><index pos:start="109:54" pos:end="109:58">[<expr pos:start="109:55" pos:end="109:57"><name pos:start="109:55" pos:end="109:55">i</name><operator pos:start="109:56" pos:end="109:56">+</operator><name pos:start="109:57" pos:end="109:57">j</name></expr>]</index></name></expr></init></decl>;</decl_stmt>

                    <expr_stmt pos:start="111:21" pos:end="111:57"><expr pos:start="111:21" pos:end="111:56"><call pos:start="111:21" pos:end="111:56"><name pos:start="111:21" pos:end="111:28">MAC_COEF</name><argument_list pos:start="111:29" pos:end="111:56">(<argument pos:start="111:30" pos:end="111:49"><expr pos:start="111:30" pos:end="111:49"><name pos:start="111:30" pos:end="111:49"><name pos:start="111:30" pos:end="111:35">energy</name><index pos:start="111:36" pos:end="111:40">[<expr pos:start="111:37" pos:end="111:39"><name pos:start="111:37" pos:end="111:39">blk</name></expr>]</index><index pos:start="111:41" pos:end="111:44">[<expr pos:start="111:42" pos:end="111:43"><name pos:start="111:42" pos:end="111:43">ch</name></expr>]</index><index pos:start="111:45" pos:end="111:49">[<expr pos:start="111:46" pos:end="111:48"><name pos:start="111:46" pos:end="111:48">bnd</name></expr>]</index></name></expr></argument>, <argument pos:start="111:52" pos:end="111:52"><expr pos:start="111:52" pos:end="111:52"><name pos:start="111:52" pos:end="111:52">v</name></expr></argument>, <argument pos:start="111:55" pos:end="111:55"><expr pos:start="111:55" pos:end="111:55"><name pos:start="111:55" pos:end="111:55">v</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

                </block_content>}</block></for>

            </block_content>}</block></for>

        </block_content>}</block></for>

        <expr_stmt pos:start="119:9" pos:end="119:23"><expr pos:start="119:9" pos:end="119:22"><name pos:start="119:9" pos:end="119:9">i</name> <operator pos:start="119:11" pos:end="119:12">+=</operator> <name pos:start="119:14" pos:end="119:22">band_size</name></expr>;</expr_stmt>

        <expr_stmt pos:start="121:9" pos:end="121:14"><expr pos:start="121:9" pos:end="121:13"><name pos:start="121:9" pos:end="121:11">bnd</name><operator pos:start="121:12" pos:end="121:13">++</operator></expr>;</expr_stmt>

    </block_content>}</block></while>



    <comment type="block" pos:start="127:5" pos:end="127:72">/* calculate coupling coordinates for all blocks for all channels */</comment>

    <for pos:start="129:5" pos:end="153:5">for <control pos:start="129:9" pos:end="129:45">(<init pos:start="129:10" pos:end="129:17"><expr pos:start="129:10" pos:end="129:16"><name pos:start="129:10" pos:end="129:12">blk</name> <operator pos:start="129:14" pos:end="129:14">=</operator> <literal type="number" pos:start="129:16" pos:end="129:16">0</literal></expr>;</init> <condition pos:start="129:19" pos:end="129:38"><expr pos:start="129:19" pos:end="129:37"><name pos:start="129:19" pos:end="129:21">blk</name> <operator pos:start="129:23" pos:end="129:23">&lt;</operator> <name pos:start="129:25" pos:end="129:37"><name pos:start="129:25" pos:end="129:25">s</name><operator pos:start="129:26" pos:end="129:27">-&gt;</operator><name pos:start="129:28" pos:end="129:37">num_blocks</name></name></expr>;</condition> <incr pos:start="129:40" pos:end="129:44"><expr pos:start="129:40" pos:end="129:44"><name pos:start="129:40" pos:end="129:42">blk</name><operator pos:start="129:43" pos:end="129:44">++</operator></expr></incr>)</control> <block pos:start="129:47" pos:end="153:5">{<block_content pos:start="131:9" pos:end="151:9">

        <decl_stmt pos:start="131:9" pos:end="131:43"><decl pos:start="131:9" pos:end="131:42"><type pos:start="131:9" pos:end="131:18"><name pos:start="131:9" pos:end="131:16">AC3Block</name> <modifier pos:start="131:18" pos:end="131:18">*</modifier></type><name pos:start="131:19" pos:end="131:23">block</name>  <init pos:start="131:26" pos:end="131:42">= <expr pos:start="131:28" pos:end="131:42"><operator pos:start="131:28" pos:end="131:28">&amp;</operator><name pos:start="131:29" pos:end="131:42"><name pos:start="131:29" pos:end="131:29">s</name><operator pos:start="131:30" pos:end="131:31">-&gt;</operator><name pos:start="131:32" pos:end="131:37">blocks</name><index pos:start="131:38" pos:end="131:42">[<expr pos:start="131:39" pos:end="131:41"><name pos:start="131:39" pos:end="131:41">blk</name></expr>]</index></name></expr></init></decl>;</decl_stmt>

        <if_stmt pos:start="133:9" pos:end="135:21"><if pos:start="133:9" pos:end="135:21">if <condition pos:start="133:12" pos:end="133:31">(<expr pos:start="133:13" pos:end="133:30"><operator pos:start="133:13" pos:end="133:13">!</operator><name pos:start="133:14" pos:end="133:30"><name pos:start="133:14" pos:end="133:18">block</name><operator pos:start="133:19" pos:end="133:20">-&gt;</operator><name pos:start="133:21" pos:end="133:30">cpl_in_use</name></name></expr>)</condition><block type="pseudo" pos:start="135:13" pos:end="135:21"><block_content pos:start="135:13" pos:end="135:21">

            <continue pos:start="135:13" pos:end="135:21">continue;</continue></block_content></block></if></if_stmt>

        <for pos:start="137:9" pos:end="151:9">for <control pos:start="137:13" pos:end="137:49">(<init pos:start="137:14" pos:end="137:20"><expr pos:start="137:14" pos:end="137:19"><name pos:start="137:14" pos:end="137:15">ch</name> <operator pos:start="137:17" pos:end="137:17">=</operator> <literal type="number" pos:start="137:19" pos:end="137:19">1</literal></expr>;</init> <condition pos:start="137:22" pos:end="137:43"><expr pos:start="137:22" pos:end="137:42"><name pos:start="137:22" pos:end="137:23">ch</name> <operator pos:start="137:25" pos:end="137:26">&lt;=</operator> <name pos:start="137:28" pos:end="137:42"><name pos:start="137:28" pos:end="137:28">s</name><operator pos:start="137:29" pos:end="137:30">-&gt;</operator><name pos:start="137:31" pos:end="137:42">fbw_channels</name></name></expr>;</condition> <incr pos:start="137:45" pos:end="137:48"><expr pos:start="137:45" pos:end="137:48"><name pos:start="137:45" pos:end="137:46">ch</name><operator pos:start="137:47" pos:end="137:48">++</operator></expr></incr>)</control> <block pos:start="137:51" pos:end="151:9">{<block_content pos:start="139:13" pos:end="149:13">

            <if_stmt pos:start="139:13" pos:end="141:25"><if pos:start="139:13" pos:end="141:25">if <condition pos:start="139:16" pos:end="139:43">(<expr pos:start="139:17" pos:end="139:42"><operator pos:start="139:17" pos:end="139:17">!</operator><name pos:start="139:18" pos:end="139:42"><name pos:start="139:18" pos:end="139:22">block</name><operator pos:start="139:23" pos:end="139:24">-&gt;</operator><name pos:start="139:25" pos:end="139:38">channel_in_cpl</name><index pos:start="139:39" pos:end="139:42">[<expr pos:start="139:40" pos:end="139:41"><name pos:start="139:40" pos:end="139:41">ch</name></expr>]</index></name></expr>)</condition><block type="pseudo" pos:start="141:17" pos:end="141:25"><block_content pos:start="141:17" pos:end="141:25">

                <continue pos:start="141:17" pos:end="141:25">continue;</continue></block_content></block></if></if_stmt>

            <for pos:start="143:13" pos:end="149:13">for <control pos:start="143:17" pos:end="143:56">(<init pos:start="143:18" pos:end="143:25"><expr pos:start="143:18" pos:end="143:24"><name pos:start="143:18" pos:end="143:20">bnd</name> <operator pos:start="143:22" pos:end="143:22">=</operator> <literal type="number" pos:start="143:24" pos:end="143:24">0</literal></expr>;</init> <condition pos:start="143:27" pos:end="143:49"><expr pos:start="143:27" pos:end="143:48"><name pos:start="143:27" pos:end="143:29">bnd</name> <operator pos:start="143:31" pos:end="143:31">&lt;</operator> <name pos:start="143:33" pos:end="143:48"><name pos:start="143:33" pos:end="143:33">s</name><operator pos:start="143:34" pos:end="143:35">-&gt;</operator><name pos:start="143:36" pos:end="143:48">num_cpl_bands</name></name></expr>;</condition> <incr pos:start="143:51" pos:end="143:55"><expr pos:start="143:51" pos:end="143:55"><name pos:start="143:51" pos:end="143:53">bnd</name><operator pos:start="143:54" pos:end="143:55">++</operator></expr></incr>)</control> <block pos:start="143:58" pos:end="149:13">{<block_content pos:start="145:17" pos:end="147:84">

                <expr_stmt pos:start="145:17" pos:end="147:84"><expr pos:start="145:17" pos:end="147:83"><name pos:start="145:17" pos:end="145:40"><name pos:start="145:17" pos:end="145:26">cpl_coords</name><index pos:start="145:27" pos:end="145:31">[<expr pos:start="145:28" pos:end="145:30"><name pos:start="145:28" pos:end="145:30">blk</name></expr>]</index><index pos:start="145:32" pos:end="145:35">[<expr pos:start="145:33" pos:end="145:34"><name pos:start="145:33" pos:end="145:34">ch</name></expr>]</index><index pos:start="145:36" pos:end="145:40">[<expr pos:start="145:37" pos:end="145:39"><name pos:start="145:37" pos:end="145:39">bnd</name></expr>]</index></name> <operator pos:start="145:42" pos:end="145:42">=</operator> <call pos:start="145:44" pos:end="147:83"><name pos:start="145:44" pos:end="145:57">calc_cpl_coord</name><argument_list pos:start="145:58" pos:end="147:83">(<argument pos:start="145:59" pos:end="145:78"><expr pos:start="145:59" pos:end="145:78"><name pos:start="145:59" pos:end="145:78"><name pos:start="145:59" pos:end="145:64">energy</name><index pos:start="145:65" pos:end="145:69">[<expr pos:start="145:66" pos:end="145:68"><name pos:start="145:66" pos:end="145:68">blk</name></expr>]</index><index pos:start="145:70" pos:end="145:73">[<expr pos:start="145:71" pos:end="145:72"><name pos:start="145:71" pos:end="145:72">ch</name></expr>]</index><index pos:start="145:74" pos:end="145:78">[<expr pos:start="145:75" pos:end="145:77"><name pos:start="145:75" pos:end="145:77">bnd</name></expr>]</index></name></expr></argument>,

                                                          <argument pos:start="147:59" pos:end="147:82"><expr pos:start="147:59" pos:end="147:82"><name pos:start="147:59" pos:end="147:82"><name pos:start="147:59" pos:end="147:64">energy</name><index pos:start="147:65" pos:end="147:69">[<expr pos:start="147:66" pos:end="147:68"><name pos:start="147:66" pos:end="147:68">blk</name></expr>]</index><index pos:start="147:70" pos:end="147:77">[<expr pos:start="147:71" pos:end="147:76"><name pos:start="147:71" pos:end="147:76">CPL_CH</name></expr>]</index><index pos:start="147:78" pos:end="147:82">[<expr pos:start="147:79" pos:end="147:81"><name pos:start="147:79" pos:end="147:81">bnd</name></expr>]</index></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

            </block_content>}</block></for>

        </block_content>}</block></for>

    </block_content>}</block></for>



    <comment type="block" pos:start="157:5" pos:end="157:69">/* determine which blocks to send new coupling coordinates for */</comment>

    <for pos:start="159:5" pos:end="227:5">for <control pos:start="159:9" pos:end="159:45">(<init pos:start="159:10" pos:end="159:17"><expr pos:start="159:10" pos:end="159:16"><name pos:start="159:10" pos:end="159:12">blk</name> <operator pos:start="159:14" pos:end="159:14">=</operator> <literal type="number" pos:start="159:16" pos:end="159:16">0</literal></expr>;</init> <condition pos:start="159:19" pos:end="159:38"><expr pos:start="159:19" pos:end="159:37"><name pos:start="159:19" pos:end="159:21">blk</name> <operator pos:start="159:23" pos:end="159:23">&lt;</operator> <name pos:start="159:25" pos:end="159:37"><name pos:start="159:25" pos:end="159:25">s</name><operator pos:start="159:26" pos:end="159:27">-&gt;</operator><name pos:start="159:28" pos:end="159:37">num_blocks</name></name></expr>;</condition> <incr pos:start="159:40" pos:end="159:44"><expr pos:start="159:40" pos:end="159:44"><name pos:start="159:40" pos:end="159:42">blk</name><operator pos:start="159:43" pos:end="159:44">++</operator></expr></incr>)</control> <block pos:start="159:47" pos:end="227:5">{<block_content pos:start="161:9" pos:end="225:9">

        <decl_stmt pos:start="161:9" pos:end="161:43"><decl pos:start="161:9" pos:end="161:42"><type pos:start="161:9" pos:end="161:18"><name pos:start="161:9" pos:end="161:16">AC3Block</name> <modifier pos:start="161:18" pos:end="161:18">*</modifier></type><name pos:start="161:19" pos:end="161:23">block</name>  <init pos:start="161:26" pos:end="161:42">= <expr pos:start="161:28" pos:end="161:42"><operator pos:start="161:28" pos:end="161:28">&amp;</operator><name pos:start="161:29" pos:end="161:42"><name pos:start="161:29" pos:end="161:29">s</name><operator pos:start="161:30" pos:end="161:31">-&gt;</operator><name pos:start="161:32" pos:end="161:37">blocks</name><index pos:start="161:38" pos:end="161:42">[<expr pos:start="161:39" pos:end="161:41"><name pos:start="161:39" pos:end="161:41">blk</name></expr>]</index></name></expr></init></decl>;</decl_stmt>

        <decl_stmt pos:start="163:9" pos:end="163:58"><decl pos:start="163:9" pos:end="163:57"><type pos:start="163:9" pos:end="163:18"><name pos:start="163:9" pos:end="163:16">AC3Block</name> <modifier pos:start="163:18" pos:end="163:18">*</modifier></type><name pos:start="163:19" pos:end="163:24">block0</name> <init pos:start="163:26" pos:end="163:57">= <expr pos:start="163:28" pos:end="163:57"><ternary pos:start="163:28" pos:end="163:57"><condition pos:start="163:28" pos:end="163:32"><expr pos:start="163:28" pos:end="163:30"><name pos:start="163:28" pos:end="163:30">blk</name></expr> ?</condition><then pos:start="163:34" pos:end="163:50"> <expr pos:start="163:34" pos:end="163:50"><operator pos:start="163:34" pos:end="163:34">&amp;</operator><name pos:start="163:35" pos:end="163:50"><name pos:start="163:35" pos:end="163:35">s</name><operator pos:start="163:36" pos:end="163:37">-&gt;</operator><name pos:start="163:38" pos:end="163:43">blocks</name><index pos:start="163:44" pos:end="163:50">[<expr pos:start="163:45" pos:end="163:49"><name pos:start="163:45" pos:end="163:47">blk</name><operator pos:start="163:48" pos:end="163:48">-</operator><literal type="number" pos:start="163:49" pos:end="163:49">1</literal></expr>]</index></name></expr> </then><else pos:start="163:52" pos:end="163:57">: <expr pos:start="163:54" pos:end="163:57"><name pos:start="163:54" pos:end="163:57">NULL</name></expr></else></ternary></expr></init></decl>;</decl_stmt>



        <expr_stmt pos:start="167:9" pos:end="167:72"><expr pos:start="167:9" pos:end="167:71"><call pos:start="167:9" pos:end="167:71"><name pos:start="167:9" pos:end="167:14">memset</name><argument_list pos:start="167:15" pos:end="167:71">(<argument pos:start="167:16" pos:end="167:36"><expr pos:start="167:16" pos:end="167:36"><name pos:start="167:16" pos:end="167:36"><name pos:start="167:16" pos:end="167:20">block</name><operator pos:start="167:21" pos:end="167:22">-&gt;</operator><name pos:start="167:23" pos:end="167:36">new_cpl_coords</name></name></expr></argument>, <argument pos:start="167:39" pos:end="167:39"><expr pos:start="167:39" pos:end="167:39"><literal type="number" pos:start="167:39" pos:end="167:39">0</literal></expr></argument>, <argument pos:start="167:42" pos:end="167:70"><expr pos:start="167:42" pos:end="167:70"><sizeof pos:start="167:42" pos:end="167:70">sizeof<argument_list pos:start="167:48" pos:end="167:70">(<argument pos:start="167:49" pos:end="167:69"><expr pos:start="167:49" pos:end="167:69"><name pos:start="167:49" pos:end="167:69"><name pos:start="167:49" pos:end="167:53">block</name><operator pos:start="167:54" pos:end="167:55">-&gt;</operator><name pos:start="167:56" pos:end="167:69">new_cpl_coords</name></name></expr></argument>)</argument_list></sizeof></expr></argument>)</argument_list></call></expr>;</expr_stmt>



        <if_stmt pos:start="171:9" pos:end="225:9"><if pos:start="171:9" pos:end="225:9">if <condition pos:start="171:12" pos:end="171:30">(<expr pos:start="171:13" pos:end="171:29"><name pos:start="171:13" pos:end="171:29"><name pos:start="171:13" pos:end="171:17">block</name><operator pos:start="171:18" pos:end="171:19">-&gt;</operator><name pos:start="171:20" pos:end="171:29">cpl_in_use</name></name></expr>)</condition> <block pos:start="171:32" pos:end="225:9">{<block_content pos:start="183:13" pos:end="223:13">

            <comment type="block" pos:start="173:13" pos:end="181:49">/* send new coordinates if this is the first block, if previous

             * block did not use coupling but this block does, the channels

             * using coupling has changed from the previous block, or the

             * coordinate difference from the last block for any channel is

             * greater than a threshold value. */</comment>

            <if_stmt pos:start="183:13" pos:end="223:13"><if pos:start="183:13" pos:end="189:13">if <condition pos:start="183:16" pos:end="183:48">(<expr pos:start="183:17" pos:end="183:47"><name pos:start="183:17" pos:end="183:19">blk</name> <operator pos:start="183:21" pos:end="183:22">==</operator> <literal type="number" pos:start="183:24" pos:end="183:24">0</literal> <operator pos:start="183:26" pos:end="183:27">||</operator> <operator pos:start="183:29" pos:end="183:29">!</operator><name pos:start="183:30" pos:end="183:47"><name pos:start="183:30" pos:end="183:35">block0</name><operator pos:start="183:36" pos:end="183:37">-&gt;</operator><name pos:start="183:38" pos:end="183:47">cpl_in_use</name></name></expr>)</condition> <block pos:start="183:50" pos:end="189:13">{<block_content pos:start="185:17" pos:end="187:50">

                <for pos:start="185:17" pos:end="187:50">for <control pos:start="185:21" pos:end="185:57">(<init pos:start="185:22" pos:end="185:28"><expr pos:start="185:22" pos:end="185:27"><name pos:start="185:22" pos:end="185:23">ch</name> <operator pos:start="185:25" pos:end="185:25">=</operator> <literal type="number" pos:start="185:27" pos:end="185:27">1</literal></expr>;</init> <condition pos:start="185:30" pos:end="185:51"><expr pos:start="185:30" pos:end="185:50"><name pos:start="185:30" pos:end="185:31">ch</name> <operator pos:start="185:33" pos:end="185:34">&lt;=</operator> <name pos:start="185:36" pos:end="185:50"><name pos:start="185:36" pos:end="185:36">s</name><operator pos:start="185:37" pos:end="185:38">-&gt;</operator><name pos:start="185:39" pos:end="185:50">fbw_channels</name></name></expr>;</condition> <incr pos:start="185:53" pos:end="185:56"><expr pos:start="185:53" pos:end="185:56"><name pos:start="185:53" pos:end="185:54">ch</name><operator pos:start="185:55" pos:end="185:56">++</operator></expr></incr>)</control><block type="pseudo" pos:start="187:21" pos:end="187:50"><block_content pos:start="187:21" pos:end="187:50">

                    <expr_stmt pos:start="187:21" pos:end="187:50"><expr pos:start="187:21" pos:end="187:49"><name pos:start="187:21" pos:end="187:45"><name pos:start="187:21" pos:end="187:25">block</name><operator pos:start="187:26" pos:end="187:27">-&gt;</operator><name pos:start="187:28" pos:end="187:41">new_cpl_coords</name><index pos:start="187:42" pos:end="187:45">[<expr pos:start="187:43" pos:end="187:44"><name pos:start="187:43" pos:end="187:44">ch</name></expr>]</index></name> <operator pos:start="187:47" pos:end="187:47">=</operator> <literal type="number" pos:start="187:49" pos:end="187:49">1</literal></expr>;</expr_stmt></block_content></block></for>

            </block_content>}</block></if> <else pos:start="189:15" pos:end="223:13">else <block pos:start="189:20" pos:end="223:13">{<block_content pos:start="191:17" pos:end="221:17">

                <for pos:start="191:17" pos:end="221:17">for <control pos:start="191:21" pos:end="191:57">(<init pos:start="191:22" pos:end="191:28"><expr pos:start="191:22" pos:end="191:27"><name pos:start="191:22" pos:end="191:23">ch</name> <operator pos:start="191:25" pos:end="191:25">=</operator> <literal type="number" pos:start="191:27" pos:end="191:27">1</literal></expr>;</init> <condition pos:start="191:30" pos:end="191:51"><expr pos:start="191:30" pos:end="191:50"><name pos:start="191:30" pos:end="191:31">ch</name> <operator pos:start="191:33" pos:end="191:34">&lt;=</operator> <name pos:start="191:36" pos:end="191:50"><name pos:start="191:36" pos:end="191:36">s</name><operator pos:start="191:37" pos:end="191:38">-&gt;</operator><name pos:start="191:39" pos:end="191:50">fbw_channels</name></name></expr>;</condition> <incr pos:start="191:53" pos:end="191:56"><expr pos:start="191:53" pos:end="191:56"><name pos:start="191:53" pos:end="191:54">ch</name><operator pos:start="191:55" pos:end="191:56">++</operator></expr></incr>)</control> <block pos:start="191:59" pos:end="221:17">{<block_content pos:start="193:21" pos:end="219:21">

                    <if_stmt pos:start="193:21" pos:end="195:33"><if pos:start="193:21" pos:end="195:33">if <condition pos:start="193:24" pos:end="193:51">(<expr pos:start="193:25" pos:end="193:50"><operator pos:start="193:25" pos:end="193:25">!</operator><name pos:start="193:26" pos:end="193:50"><name pos:start="193:26" pos:end="193:30">block</name><operator pos:start="193:31" pos:end="193:32">-&gt;</operator><name pos:start="193:33" pos:end="193:46">channel_in_cpl</name><index pos:start="193:47" pos:end="193:50">[<expr pos:start="193:48" pos:end="193:49"><name pos:start="193:48" pos:end="193:49">ch</name></expr>]</index></name></expr>)</condition><block type="pseudo" pos:start="195:25" pos:end="195:33"><block_content pos:start="195:25" pos:end="195:33">

                        <continue pos:start="195:25" pos:end="195:33">continue;</continue></block_content></block></if></if_stmt>

                    <if_stmt pos:start="197:21" pos:end="219:21"><if pos:start="197:21" pos:end="201:21">if <condition pos:start="197:24" pos:end="197:52">(<expr pos:start="197:25" pos:end="197:51"><operator pos:start="197:25" pos:end="197:25">!</operator><name pos:start="197:26" pos:end="197:51"><name pos:start="197:26" pos:end="197:31">block0</name><operator pos:start="197:32" pos:end="197:33">-&gt;</operator><name pos:start="197:34" pos:end="197:47">channel_in_cpl</name><index pos:start="197:48" pos:end="197:51">[<expr pos:start="197:49" pos:end="197:50"><name pos:start="197:49" pos:end="197:50">ch</name></expr>]</index></name></expr>)</condition> <block pos:start="197:54" pos:end="201:21">{<block_content pos:start="199:25" pos:end="199:54">

                        <expr_stmt pos:start="199:25" pos:end="199:54"><expr pos:start="199:25" pos:end="199:53"><name pos:start="199:25" pos:end="199:49"><name pos:start="199:25" pos:end="199:29">block</name><operator pos:start="199:30" pos:end="199:31">-&gt;</operator><name pos:start="199:32" pos:end="199:45">new_cpl_coords</name><index pos:start="199:46" pos:end="199:49">[<expr pos:start="199:47" pos:end="199:48"><name pos:start="199:47" pos:end="199:48">ch</name></expr>]</index></name> <operator pos:start="199:51" pos:end="199:51">=</operator> <literal type="number" pos:start="199:53" pos:end="199:53">1</literal></expr>;</expr_stmt>

                    </block_content>}</block></if> <else pos:start="201:23" pos:end="219:21">else <block pos:start="201:28" pos:end="219:21">{<block_content pos:start="203:25" pos:end="217:58">

                        <decl_stmt pos:start="203:25" pos:end="203:51"><decl pos:start="203:25" pos:end="203:50"><type pos:start="203:25" pos:end="203:35"><name pos:start="203:25" pos:end="203:35">CoefSumType</name></type> <name pos:start="203:37" pos:end="203:46">coord_diff</name> <init pos:start="203:48" pos:end="203:50">= <expr pos:start="203:50" pos:end="203:50"><literal type="number" pos:start="203:50" pos:end="203:50">0</literal></expr></init></decl>;</decl_stmt>

                        <for pos:start="205:25" pos:end="211:25">for <control pos:start="205:29" pos:end="205:68">(<init pos:start="205:30" pos:end="205:37"><expr pos:start="205:30" pos:end="205:36"><name pos:start="205:30" pos:end="205:32">bnd</name> <operator pos:start="205:34" pos:end="205:34">=</operator> <literal type="number" pos:start="205:36" pos:end="205:36">0</literal></expr>;</init> <condition pos:start="205:39" pos:end="205:61"><expr pos:start="205:39" pos:end="205:60"><name pos:start="205:39" pos:end="205:41">bnd</name> <operator pos:start="205:43" pos:end="205:43">&lt;</operator> <name pos:start="205:45" pos:end="205:60"><name pos:start="205:45" pos:end="205:45">s</name><operator pos:start="205:46" pos:end="205:47">-&gt;</operator><name pos:start="205:48" pos:end="205:60">num_cpl_bands</name></name></expr>;</condition> <incr pos:start="205:63" pos:end="205:67"><expr pos:start="205:63" pos:end="205:67"><name pos:start="205:63" pos:end="205:65">bnd</name><operator pos:start="205:66" pos:end="205:67">++</operator></expr></incr>)</control> <block pos:start="205:70" pos:end="211:25">{<block_content pos:start="207:29" pos:end="209:76">

                            <expr_stmt pos:start="207:29" pos:end="209:76"><expr pos:start="207:29" pos:end="209:75"><name pos:start="207:29" pos:end="207:38">coord_diff</name> <operator pos:start="207:40" pos:end="207:41">+=</operator> <call pos:start="207:43" pos:end="209:75"><name pos:start="207:43" pos:end="207:47">FFABS</name><argument_list pos:start="207:48" pos:end="209:75">(<argument pos:start="207:49" pos:end="209:74"><expr pos:start="207:49" pos:end="209:74"><name pos:start="207:49" pos:end="207:74"><name pos:start="207:49" pos:end="207:58">cpl_coords</name><index pos:start="207:59" pos:end="207:65">[<expr pos:start="207:60" pos:end="207:64"><name pos:start="207:60" pos:end="207:62">blk</name><operator pos:start="207:63" pos:end="207:63">-</operator><literal type="number" pos:start="207:64" pos:end="207:64">1</literal></expr>]</index><index pos:start="207:66" pos:end="207:69">[<expr pos:start="207:67" pos:end="207:68"><name pos:start="207:67" pos:end="207:68">ch</name></expr>]</index><index pos:start="207:70" pos:end="207:74">[<expr pos:start="207:71" pos:end="207:73"><name pos:start="207:71" pos:end="207:73">bnd</name></expr>]</index></name> <operator pos:start="207:76" pos:end="207:76">-</operator>

                                                <name pos:start="209:49" pos:end="209:74"><name pos:start="209:49" pos:end="209:58">cpl_coords</name><index pos:start="209:59" pos:end="209:65">[<expr pos:start="209:60" pos:end="209:62"><name pos:start="209:60" pos:end="209:62">blk</name></expr>  ]</index><index pos:start="209:66" pos:end="209:69">[<expr pos:start="209:67" pos:end="209:68"><name pos:start="209:67" pos:end="209:68">ch</name></expr>]</index><index pos:start="209:70" pos:end="209:74">[<expr pos:start="209:71" pos:end="209:73"><name pos:start="209:71" pos:end="209:73">bnd</name></expr>]</index></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

                        </block_content>}</block></for>

                        <expr_stmt pos:start="213:25" pos:end="213:55"><expr pos:start="213:25" pos:end="213:54"><name pos:start="213:25" pos:end="213:34">coord_diff</name> <operator pos:start="213:36" pos:end="213:37">/=</operator> <name pos:start="213:39" pos:end="213:54"><name pos:start="213:39" pos:end="213:39">s</name><operator pos:start="213:40" pos:end="213:41">-&gt;</operator><name pos:start="213:42" pos:end="213:54">num_cpl_bands</name></name></expr>;</expr_stmt>

                        <if_stmt pos:start="215:25" pos:end="217:58"><if pos:start="215:25" pos:end="217:58">if <condition pos:start="215:28" pos:end="215:65">(<expr pos:start="215:29" pos:end="215:64"><name pos:start="215:29" pos:end="215:38">coord_diff</name> <operator pos:start="215:40" pos:end="215:40">&gt;</operator> <name pos:start="215:42" pos:end="215:64">NEW_CPL_COORD_THRESHOLD</name></expr>)</condition><block type="pseudo" pos:start="217:29" pos:end="217:58"><block_content pos:start="217:29" pos:end="217:58">

                            <expr_stmt pos:start="217:29" pos:end="217:58"><expr pos:start="217:29" pos:end="217:57"><name pos:start="217:29" pos:end="217:53"><name pos:start="217:29" pos:end="217:33">block</name><operator pos:start="217:34" pos:end="217:35">-&gt;</operator><name pos:start="217:36" pos:end="217:49">new_cpl_coords</name><index pos:start="217:50" pos:end="217:53">[<expr pos:start="217:51" pos:end="217:52"><name pos:start="217:51" pos:end="217:52">ch</name></expr>]</index></name> <operator pos:start="217:55" pos:end="217:55">=</operator> <literal type="number" pos:start="217:57" pos:end="217:57">1</literal></expr>;</expr_stmt></block_content></block></if></if_stmt>

                    </block_content>}</block></else></if_stmt>

                </block_content>}</block></for>

            </block_content>}</block></else></if_stmt>

        </block_content>}</block></if></if_stmt>

    </block_content>}</block></for>



    <comment type="block" pos:start="231:5" pos:end="233:42">/* calculate final coupling coordinates, taking into account reusing of

       coordinates in successive blocks */</comment>

    <for pos:start="235:5" pos:end="293:5">for <control pos:start="235:9" pos:end="235:48">(<init pos:start="235:10" pos:end="235:17"><expr pos:start="235:10" pos:end="235:16"><name pos:start="235:10" pos:end="235:12">bnd</name> <operator pos:start="235:14" pos:end="235:14">=</operator> <literal type="number" pos:start="235:16" pos:end="235:16">0</literal></expr>;</init> <condition pos:start="235:19" pos:end="235:41"><expr pos:start="235:19" pos:end="235:40"><name pos:start="235:19" pos:end="235:21">bnd</name> <operator pos:start="235:23" pos:end="235:23">&lt;</operator> <name pos:start="235:25" pos:end="235:40"><name pos:start="235:25" pos:end="235:25">s</name><operator pos:start="235:26" pos:end="235:27">-&gt;</operator><name pos:start="235:28" pos:end="235:40">num_cpl_bands</name></name></expr>;</condition> <incr pos:start="235:43" pos:end="235:47"><expr pos:start="235:43" pos:end="235:47"><name pos:start="235:43" pos:end="235:45">bnd</name><operator pos:start="235:46" pos:end="235:47">++</operator></expr></incr>)</control> <block pos:start="235:50" pos:end="293:5">{<block_content pos:start="237:9" pos:end="291:9">

        <expr_stmt pos:start="237:9" pos:end="237:16"><expr pos:start="237:9" pos:end="237:15"><name pos:start="237:9" pos:end="237:11">blk</name> <operator pos:start="237:13" pos:end="237:13">=</operator> <literal type="number" pos:start="237:15" pos:end="237:15">0</literal></expr>;</expr_stmt>

        <while pos:start="239:9" pos:end="291:9">while <condition pos:start="239:15" pos:end="239:35">(<expr pos:start="239:16" pos:end="239:34"><name pos:start="239:16" pos:end="239:18">blk</name> <operator pos:start="239:20" pos:end="239:20">&lt;</operator> <name pos:start="239:22" pos:end="239:34"><name pos:start="239:22" pos:end="239:22">s</name><operator pos:start="239:23" pos:end="239:24">-&gt;</operator><name pos:start="239:25" pos:end="239:34">num_blocks</name></name></expr>)</condition> <block pos:start="239:37" pos:end="291:9">{<block_content pos:start="241:13" pos:end="289:23">

            <decl_stmt pos:start="241:13" pos:end="241:32"><decl pos:start="241:13" pos:end="241:31"><type pos:start="241:13" pos:end="241:15"><name pos:start="241:13" pos:end="241:15">int</name></type> <name pos:start="241:17" pos:end="241:25">av_uninit</name><argument_list pos:start="241:26" pos:end="241:31">(<argument pos:start="241:27" pos:end="241:30"><expr pos:start="241:27" pos:end="241:30"><name pos:start="241:27" pos:end="241:30">blk1</name></expr></argument>)</argument_list></decl>;</decl_stmt>

            <decl_stmt pos:start="243:13" pos:end="243:47"><decl pos:start="243:13" pos:end="243:46"><type pos:start="243:13" pos:end="243:22"><name pos:start="243:13" pos:end="243:20">AC3Block</name> <modifier pos:start="243:22" pos:end="243:22">*</modifier></type><name pos:start="243:23" pos:end="243:27">block</name>  <init pos:start="243:30" pos:end="243:46">= <expr pos:start="243:32" pos:end="243:46"><operator pos:start="243:32" pos:end="243:32">&amp;</operator><name pos:start="243:33" pos:end="243:46"><name pos:start="243:33" pos:end="243:33">s</name><operator pos:start="243:34" pos:end="243:35">-&gt;</operator><name pos:start="243:36" pos:end="243:41">blocks</name><index pos:start="243:42" pos:end="243:46">[<expr pos:start="243:43" pos:end="243:45"><name pos:start="243:43" pos:end="243:45">blk</name></expr>]</index></name></expr></init></decl>;</decl_stmt>



            <if_stmt pos:start="247:13" pos:end="253:13"><if pos:start="247:13" pos:end="253:13">if <condition pos:start="247:16" pos:end="247:35">(<expr pos:start="247:17" pos:end="247:34"><operator pos:start="247:17" pos:end="247:17">!</operator><name pos:start="247:18" pos:end="247:34"><name pos:start="247:18" pos:end="247:22">block</name><operator pos:start="247:23" pos:end="247:24">-&gt;</operator><name pos:start="247:25" pos:end="247:34">cpl_in_use</name></name></expr>)</condition> <block pos:start="247:37" pos:end="253:13">{<block_content pos:start="249:17" pos:end="251:25">

                <expr_stmt pos:start="249:17" pos:end="249:22"><expr pos:start="249:17" pos:end="249:21"><name pos:start="249:17" pos:end="249:19">blk</name><operator pos:start="249:20" pos:end="249:21">++</operator></expr>;</expr_stmt>

                <continue pos:start="251:17" pos:end="251:25">continue;</continue>

            </block_content>}</block></if></if_stmt>



            <for pos:start="257:13" pos:end="287:13">for <control pos:start="257:17" pos:end="257:53">(<init pos:start="257:18" pos:end="257:24"><expr pos:start="257:18" pos:end="257:23"><name pos:start="257:18" pos:end="257:19">ch</name> <operator pos:start="257:21" pos:end="257:21">=</operator> <literal type="number" pos:start="257:23" pos:end="257:23">1</literal></expr>;</init> <condition pos:start="257:26" pos:end="257:47"><expr pos:start="257:26" pos:end="257:46"><name pos:start="257:26" pos:end="257:27">ch</name> <operator pos:start="257:29" pos:end="257:30">&lt;=</operator> <name pos:start="257:32" pos:end="257:46"><name pos:start="257:32" pos:end="257:32">s</name><operator pos:start="257:33" pos:end="257:34">-&gt;</operator><name pos:start="257:35" pos:end="257:46">fbw_channels</name></name></expr>;</condition> <incr pos:start="257:49" pos:end="257:52"><expr pos:start="257:49" pos:end="257:52"><name pos:start="257:49" pos:end="257:50">ch</name><operator pos:start="257:51" pos:end="257:52">++</operator></expr></incr>)</control> <block pos:start="257:55" pos:end="287:13">{<block_content pos:start="259:17" pos:end="285:81">

                <decl_stmt pos:start="259:17" pos:end="259:50"><decl pos:start="259:17" pos:end="259:37"><type pos:start="259:17" pos:end="259:27"><name pos:start="259:17" pos:end="259:27">CoefSumType</name></type> <name pos:start="259:29" pos:end="259:37">energy_ch</name></decl>, <decl pos:start="259:40" pos:end="259:49"><type ref="prev" pos:start="259:17" pos:end="259:27"/><name pos:start="259:40" pos:end="259:49">energy_cpl</name></decl>;</decl_stmt>

                <if_stmt pos:start="261:17" pos:end="263:29"><if pos:start="261:17" pos:end="263:29">if <condition pos:start="261:20" pos:end="261:47">(<expr pos:start="261:21" pos:end="261:46"><operator pos:start="261:21" pos:end="261:21">!</operator><name pos:start="261:22" pos:end="261:46"><name pos:start="261:22" pos:end="261:26">block</name><operator pos:start="261:27" pos:end="261:28">-&gt;</operator><name pos:start="261:29" pos:end="261:42">channel_in_cpl</name><index pos:start="261:43" pos:end="261:46">[<expr pos:start="261:44" pos:end="261:45"><name pos:start="261:44" pos:end="261:45">ch</name></expr>]</index></name></expr>)</condition><block type="pseudo" pos:start="263:21" pos:end="263:29"><block_content pos:start="263:21" pos:end="263:29">

                    <continue pos:start="263:21" pos:end="263:29">continue;</continue></block_content></block></if></if_stmt>

                <expr_stmt pos:start="265:17" pos:end="265:54"><expr pos:start="265:17" pos:end="265:53"><name pos:start="265:17" pos:end="265:26">energy_cpl</name> <operator pos:start="265:28" pos:end="265:28">=</operator> <name pos:start="265:30" pos:end="265:53"><name pos:start="265:30" pos:end="265:35">energy</name><index pos:start="265:36" pos:end="265:40">[<expr pos:start="265:37" pos:end="265:39"><name pos:start="265:37" pos:end="265:39">blk</name></expr>]</index><index pos:start="265:41" pos:end="265:48">[<expr pos:start="265:42" pos:end="265:47"><name pos:start="265:42" pos:end="265:47">CPL_CH</name></expr>]</index><index pos:start="265:49" pos:end="265:53">[<expr pos:start="265:50" pos:end="265:52"><name pos:start="265:50" pos:end="265:52">bnd</name></expr>]</index></name></expr>;</expr_stmt>

                <expr_stmt pos:start="267:17" pos:end="267:49"><expr pos:start="267:17" pos:end="267:48"><name pos:start="267:17" pos:end="267:25">energy_ch</name> <operator pos:start="267:27" pos:end="267:27">=</operator> <name pos:start="267:29" pos:end="267:48"><name pos:start="267:29" pos:end="267:34">energy</name><index pos:start="267:35" pos:end="267:39">[<expr pos:start="267:36" pos:end="267:38"><name pos:start="267:36" pos:end="267:38">blk</name></expr>]</index><index pos:start="267:40" pos:end="267:43">[<expr pos:start="267:41" pos:end="267:42"><name pos:start="267:41" pos:end="267:42">ch</name></expr>]</index><index pos:start="267:44" pos:end="267:48">[<expr pos:start="267:45" pos:end="267:47"><name pos:start="267:45" pos:end="267:47">bnd</name></expr>]</index></name></expr>;</expr_stmt>

                <expr_stmt pos:start="269:17" pos:end="269:29"><expr pos:start="269:17" pos:end="269:28"><name pos:start="269:17" pos:end="269:20">blk1</name> <operator pos:start="269:22" pos:end="269:22">=</operator> <name pos:start="269:24" pos:end="269:26">blk</name><operator pos:start="269:27" pos:end="269:27">+</operator><literal type="number" pos:start="269:28" pos:end="269:28">1</literal></expr>;</expr_stmt>

                <while pos:start="271:17" pos:end="283:17">while <condition pos:start="271:23" pos:end="271:83">(<expr pos:start="271:24" pos:end="271:82"><operator pos:start="271:24" pos:end="271:24">!</operator><name pos:start="271:25" pos:end="271:39"><name pos:start="271:25" pos:end="271:25">s</name><operator pos:start="271:26" pos:end="271:27">-&gt;</operator><name pos:start="271:28" pos:end="271:33">blocks</name><index pos:start="271:34" pos:end="271:39">[<expr pos:start="271:35" pos:end="271:38"><name pos:start="271:35" pos:end="271:38">blk1</name></expr>]</index></name><operator pos:start="271:40" pos:end="271:40">.</operator><name pos:start="271:41" pos:end="271:58"><name pos:start="271:41" pos:end="271:54">new_cpl_coords</name><index pos:start="271:55" pos:end="271:58">[<expr pos:start="271:56" pos:end="271:57"><name pos:start="271:56" pos:end="271:57">ch</name></expr>]</index></name> <operator pos:start="271:60" pos:end="271:61">&amp;&amp;</operator> <name pos:start="271:63" pos:end="271:66">blk1</name> <operator pos:start="271:68" pos:end="271:68">&lt;</operator> <name pos:start="271:70" pos:end="271:82"><name pos:start="271:70" pos:end="271:70">s</name><operator pos:start="271:71" pos:end="271:72">-&gt;</operator><name pos:start="271:73" pos:end="271:82">num_blocks</name></name></expr>)</condition> <block pos:start="271:85" pos:end="283:17">{<block_content pos:start="273:21" pos:end="281:27">

                    <if_stmt pos:start="273:21" pos:end="279:21"><if pos:start="273:21" pos:end="279:21">if <condition pos:start="273:24" pos:end="273:51">(<expr pos:start="273:25" pos:end="273:50"><name pos:start="273:25" pos:end="273:39"><name pos:start="273:25" pos:end="273:25">s</name><operator pos:start="273:26" pos:end="273:27">-&gt;</operator><name pos:start="273:28" pos:end="273:33">blocks</name><index pos:start="273:34" pos:end="273:39">[<expr pos:start="273:35" pos:end="273:38"><name pos:start="273:35" pos:end="273:38">blk1</name></expr>]</index></name><operator pos:start="273:40" pos:end="273:40">.</operator><name pos:start="273:41" pos:end="273:50">cpl_in_use</name></expr>)</condition> <block pos:start="273:53" pos:end="279:21">{<block_content pos:start="275:25" pos:end="277:59">

                        <expr_stmt pos:start="275:25" pos:end="275:64"><expr pos:start="275:25" pos:end="275:63"><name pos:start="275:25" pos:end="275:34">energy_cpl</name> <operator pos:start="275:36" pos:end="275:37">+=</operator> <name pos:start="275:39" pos:end="275:63"><name pos:start="275:39" pos:end="275:44">energy</name><index pos:start="275:45" pos:end="275:50">[<expr pos:start="275:46" pos:end="275:49"><name pos:start="275:46" pos:end="275:49">blk1</name></expr>]</index><index pos:start="275:51" pos:end="275:58">[<expr pos:start="275:52" pos:end="275:57"><name pos:start="275:52" pos:end="275:57">CPL_CH</name></expr>]</index><index pos:start="275:59" pos:end="275:63">[<expr pos:start="275:60" pos:end="275:62"><name pos:start="275:60" pos:end="275:62">bnd</name></expr>]</index></name></expr>;</expr_stmt>

                        <expr_stmt pos:start="277:25" pos:end="277:59"><expr pos:start="277:25" pos:end="277:58"><name pos:start="277:25" pos:end="277:33">energy_ch</name> <operator pos:start="277:35" pos:end="277:36">+=</operator> <name pos:start="277:38" pos:end="277:58"><name pos:start="277:38" pos:end="277:43">energy</name><index pos:start="277:44" pos:end="277:49">[<expr pos:start="277:45" pos:end="277:48"><name pos:start="277:45" pos:end="277:48">blk1</name></expr>]</index><index pos:start="277:50" pos:end="277:53">[<expr pos:start="277:51" pos:end="277:52"><name pos:start="277:51" pos:end="277:52">ch</name></expr>]</index><index pos:start="277:54" pos:end="277:58">[<expr pos:start="277:55" pos:end="277:57"><name pos:start="277:55" pos:end="277:57">bnd</name></expr>]</index></name></expr>;</expr_stmt>

                    </block_content>}</block></if></if_stmt>

                    <expr_stmt pos:start="281:21" pos:end="281:27"><expr pos:start="281:21" pos:end="281:26"><name pos:start="281:21" pos:end="281:24">blk1</name><operator pos:start="281:25" pos:end="281:26">++</operator></expr>;</expr_stmt>

                </block_content>}</block></while>

                <expr_stmt pos:start="285:17" pos:end="285:81"><expr pos:start="285:17" pos:end="285:80"><name pos:start="285:17" pos:end="285:40"><name pos:start="285:17" pos:end="285:26">cpl_coords</name><index pos:start="285:27" pos:end="285:31">[<expr pos:start="285:28" pos:end="285:30"><name pos:start="285:28" pos:end="285:30">blk</name></expr>]</index><index pos:start="285:32" pos:end="285:35">[<expr pos:start="285:33" pos:end="285:34"><name pos:start="285:33" pos:end="285:34">ch</name></expr>]</index><index pos:start="285:36" pos:end="285:40">[<expr pos:start="285:37" pos:end="285:39"><name pos:start="285:37" pos:end="285:39">bnd</name></expr>]</index></name> <operator pos:start="285:42" pos:end="285:42">=</operator> <call pos:start="285:44" pos:end="285:80"><name pos:start="285:44" pos:end="285:57">calc_cpl_coord</name><argument_list pos:start="285:58" pos:end="285:80">(<argument pos:start="285:59" pos:end="285:67"><expr pos:start="285:59" pos:end="285:67"><name pos:start="285:59" pos:end="285:67">energy_ch</name></expr></argument>, <argument pos:start="285:70" pos:end="285:79"><expr pos:start="285:70" pos:end="285:79"><name pos:start="285:70" pos:end="285:79">energy_cpl</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

            </block_content>}</block></for>

            <expr_stmt pos:start="289:13" pos:end="289:23"><expr pos:start="289:13" pos:end="289:22"><name pos:start="289:13" pos:end="289:15">blk</name> <operator pos:start="289:17" pos:end="289:17">=</operator> <name pos:start="289:19" pos:end="289:22">blk1</name></expr>;</expr_stmt>

        </block_content>}</block></while>

    </block_content>}</block></for>



    <comment type="block" pos:start="297:5" pos:end="297:64">/* calculate exponents/mantissas for coupling coordinates */</comment>

    <for pos:start="299:5" pos:end="397:5">for <control pos:start="299:9" pos:end="299:45">(<init pos:start="299:10" pos:end="299:17"><expr pos:start="299:10" pos:end="299:16"><name pos:start="299:10" pos:end="299:12">blk</name> <operator pos:start="299:14" pos:end="299:14">=</operator> <literal type="number" pos:start="299:16" pos:end="299:16">0</literal></expr>;</init> <condition pos:start="299:19" pos:end="299:38"><expr pos:start="299:19" pos:end="299:37"><name pos:start="299:19" pos:end="299:21">blk</name> <operator pos:start="299:23" pos:end="299:23">&lt;</operator> <name pos:start="299:25" pos:end="299:37"><name pos:start="299:25" pos:end="299:25">s</name><operator pos:start="299:26" pos:end="299:27">-&gt;</operator><name pos:start="299:28" pos:end="299:37">num_blocks</name></name></expr>;</condition> <incr pos:start="299:40" pos:end="299:44"><expr pos:start="299:40" pos:end="299:44"><name pos:start="299:40" pos:end="299:42">blk</name><operator pos:start="299:43" pos:end="299:44">++</operator></expr></incr>)</control> <block pos:start="299:47" pos:end="397:5">{<block_content pos:start="301:9" pos:end="395:9">

        <decl_stmt pos:start="301:9" pos:end="301:42"><decl pos:start="301:9" pos:end="301:41"><type pos:start="301:9" pos:end="301:18"><name pos:start="301:9" pos:end="301:16">AC3Block</name> <modifier pos:start="301:18" pos:end="301:18">*</modifier></type><name pos:start="301:19" pos:end="301:23">block</name> <init pos:start="301:25" pos:end="301:41">= <expr pos:start="301:27" pos:end="301:41"><operator pos:start="301:27" pos:end="301:27">&amp;</operator><name pos:start="301:28" pos:end="301:41"><name pos:start="301:28" pos:end="301:28">s</name><operator pos:start="301:29" pos:end="301:30">-&gt;</operator><name pos:start="301:31" pos:end="301:36">blocks</name><index pos:start="301:37" pos:end="301:41">[<expr pos:start="301:38" pos:end="301:40"><name pos:start="301:38" pos:end="301:40">blk</name></expr>]</index></name></expr></init></decl>;</decl_stmt>

        <if_stmt pos:start="303:9" pos:end="310:0"><if pos:start="303:9" pos:end="310:0">if <condition pos:start="303:12" pos:end="303:31">(<expr pos:start="303:13" pos:end="303:30"><operator pos:start="303:13" pos:end="303:13">!</operator><name pos:start="303:14" pos:end="303:30"><name pos:start="303:14" pos:end="303:18">block</name><operator pos:start="303:19" pos:end="303:20">-&gt;</operator><name pos:start="303:21" pos:end="303:30">cpl_in_use</name></name></expr>)</condition><block type="pseudo" pos:start="305:13" pos:end="310:0"><block_content pos:start="305:13" pos:end="310:0">

            <continue pos:start="305:13" pos:end="310:0">continue;</continue></block_content></block></if></if_stmt>



<cpp:if pos:start="309:1" pos:end="309:23">#<cpp:directive pos:start="309:2" pos:end="309:3">if</cpp:directive> <expr pos:start="309:5" pos:end="309:23"><name pos:start="309:5" pos:end="309:23">CONFIG_AC3ENC_FLOAT</name></expr></cpp:if>

        <expr_stmt pos:start="311:9" pos:end="318:0"><expr pos:start="311:9" pos:end="315:56"><call pos:start="311:9" pos:end="315:56"><name pos:start="311:9" pos:end="311:34"><name pos:start="311:9" pos:end="311:9">s</name><operator pos:start="311:10" pos:end="311:11">-&gt;</operator><name pos:start="311:12" pos:end="311:17">ac3dsp</name><operator pos:start="311:18" pos:end="311:18">.</operator><name pos:start="311:19" pos:end="311:34">float_to_fixed24</name></name><argument_list pos:start="311:35" pos:end="315:56">(<argument pos:start="311:36" pos:end="311:59"><expr pos:start="311:36" pos:end="311:59"><name pos:start="311:36" pos:end="311:59"><name pos:start="311:36" pos:end="311:51">fixed_cpl_coords</name><index pos:start="311:52" pos:end="311:56">[<expr pos:start="311:53" pos:end="311:55"><name pos:start="311:53" pos:end="311:55">blk</name></expr>]</index><index pos:start="311:57" pos:end="311:59">[<expr pos:start="311:58" pos:end="311:58"><literal type="number" pos:start="311:58" pos:end="311:58">1</literal></expr>]</index></name></expr></argument>,

                                   <argument pos:start="313:36" pos:end="313:53"><expr pos:start="313:36" pos:end="313:53"><name pos:start="313:36" pos:end="313:53"><name pos:start="313:36" pos:end="313:45">cpl_coords</name><index pos:start="313:46" pos:end="313:50">[<expr pos:start="313:47" pos:end="313:49"><name pos:start="313:47" pos:end="313:49">blk</name></expr>]</index><index pos:start="313:51" pos:end="313:53">[<expr pos:start="313:52" pos:end="313:52"><literal type="number" pos:start="313:52" pos:end="313:52">1</literal></expr>]</index></name></expr></argument>,

                                   <argument pos:start="315:36" pos:end="315:55"><expr pos:start="315:36" pos:end="315:55"><name pos:start="315:36" pos:end="315:50"><name pos:start="315:36" pos:end="315:36">s</name><operator pos:start="315:37" pos:end="315:38">-&gt;</operator><name pos:start="315:39" pos:end="315:50">fbw_channels</name></name> <operator pos:start="315:52" pos:end="315:52">*</operator> <literal type="number" pos:start="315:54" pos:end="315:55">16</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

<cpp:endif pos:start="317:1" pos:end="317:6">#<cpp:directive pos:start="317:2" pos:end="317:6">endif</cpp:directive></cpp:endif>

        <expr_stmt pos:start="319:9" pos:end="323:58"><expr pos:start="319:9" pos:end="323:57"><call pos:start="319:9" pos:end="323:57"><name pos:start="319:9" pos:end="319:35"><name pos:start="319:9" pos:end="319:9">s</name><operator pos:start="319:10" pos:end="319:11">-&gt;</operator><name pos:start="319:12" pos:end="319:17">ac3dsp</name><operator pos:start="319:18" pos:end="319:18">.</operator><name pos:start="319:19" pos:end="319:35">extract_exponents</name></name><argument_list pos:start="319:36" pos:end="323:57">(<argument pos:start="319:37" pos:end="319:59"><expr pos:start="319:37" pos:end="319:59"><name pos:start="319:37" pos:end="319:59"><name pos:start="319:37" pos:end="319:41">block</name><operator pos:start="319:42" pos:end="319:43">-&gt;</operator><name pos:start="319:44" pos:end="319:56">cpl_coord_exp</name><index pos:start="319:57" pos:end="319:59">[<expr pos:start="319:58" pos:end="319:58"><literal type="number" pos:start="319:58" pos:end="319:58">1</literal></expr>]</index></name></expr></argument>,

                                    <argument pos:start="321:37" pos:end="321:60"><expr pos:start="321:37" pos:end="321:60"><name pos:start="321:37" pos:end="321:60"><name pos:start="321:37" pos:end="321:52">fixed_cpl_coords</name><index pos:start="321:53" pos:end="321:57">[<expr pos:start="321:54" pos:end="321:56"><name pos:start="321:54" pos:end="321:56">blk</name></expr>]</index><index pos:start="321:58" pos:end="321:60">[<expr pos:start="321:59" pos:end="321:59"><literal type="number" pos:start="321:59" pos:end="321:59">1</literal></expr>]</index></name></expr></argument>,

                                    <argument pos:start="323:37" pos:end="323:56"><expr pos:start="323:37" pos:end="323:56"><name pos:start="323:37" pos:end="323:51"><name pos:start="323:37" pos:end="323:37">s</name><operator pos:start="323:38" pos:end="323:39">-&gt;</operator><name pos:start="323:40" pos:end="323:51">fbw_channels</name></name> <operator pos:start="323:53" pos:end="323:53">*</operator> <literal type="number" pos:start="323:55" pos:end="323:56">16</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>



        <for pos:start="327:9" pos:end="395:9">for <control pos:start="327:13" pos:end="327:49">(<init pos:start="327:14" pos:end="327:20"><expr pos:start="327:14" pos:end="327:19"><name pos:start="327:14" pos:end="327:15">ch</name> <operator pos:start="327:17" pos:end="327:17">=</operator> <literal type="number" pos:start="327:19" pos:end="327:19">1</literal></expr>;</init> <condition pos:start="327:22" pos:end="327:43"><expr pos:start="327:22" pos:end="327:42"><name pos:start="327:22" pos:end="327:23">ch</name> <operator pos:start="327:25" pos:end="327:26">&lt;=</operator> <name pos:start="327:28" pos:end="327:42"><name pos:start="327:28" pos:end="327:28">s</name><operator pos:start="327:29" pos:end="327:30">-&gt;</operator><name pos:start="327:31" pos:end="327:42">fbw_channels</name></name></expr>;</condition> <incr pos:start="327:45" pos:end="327:48"><expr pos:start="327:45" pos:end="327:48"><name pos:start="327:45" pos:end="327:46">ch</name><operator pos:start="327:47" pos:end="327:48">++</operator></expr></incr>)</control> <block pos:start="327:51" pos:end="395:9">{<block_content pos:start="329:13" pos:end="393:13">

            <decl_stmt pos:start="329:13" pos:end="329:50"><decl pos:start="329:13" pos:end="329:19"><type pos:start="329:13" pos:end="329:15"><name pos:start="329:13" pos:end="329:15">int</name></type> <name pos:start="329:17" pos:end="329:19">bnd</name></decl>, <decl pos:start="329:22" pos:end="329:28"><type ref="prev" pos:start="329:13" pos:end="329:15"/><name pos:start="329:22" pos:end="329:28">min_exp</name></decl>, <decl pos:start="329:31" pos:end="329:37"><type ref="prev" pos:start="329:13" pos:end="329:15"/><name pos:start="329:31" pos:end="329:37">max_exp</name></decl>, <decl pos:start="329:40" pos:end="329:49"><type ref="prev" pos:start="329:13" pos:end="329:15"/><name pos:start="329:40" pos:end="329:49">master_exp</name></decl>;</decl_stmt>



            <if_stmt pos:start="333:13" pos:end="335:25"><if pos:start="333:13" pos:end="335:25">if <condition pos:start="333:16" pos:end="333:43">(<expr pos:start="333:17" pos:end="333:42"><operator pos:start="333:17" pos:end="333:17">!</operator><name pos:start="333:18" pos:end="333:42"><name pos:start="333:18" pos:end="333:22">block</name><operator pos:start="333:23" pos:end="333:24">-&gt;</operator><name pos:start="333:25" pos:end="333:38">new_cpl_coords</name><index pos:start="333:39" pos:end="333:42">[<expr pos:start="333:40" pos:end="333:41"><name pos:start="333:40" pos:end="333:41">ch</name></expr>]</index></name></expr>)</condition><block type="pseudo" pos:start="335:17" pos:end="335:25"><block_content pos:start="335:17" pos:end="335:25">

                <continue pos:start="335:17" pos:end="335:25">continue;</continue></block_content></block></if></if_stmt>



            <comment type="block" pos:start="339:13" pos:end="339:43">/* determine master exponent */</comment>

            <expr_stmt pos:start="341:13" pos:end="341:60"><expr pos:start="341:13" pos:end="341:59"><name pos:start="341:13" pos:end="341:19">min_exp</name> <operator pos:start="341:21" pos:end="341:21">=</operator> <name pos:start="341:23" pos:end="341:29">max_exp</name> <operator pos:start="341:31" pos:end="341:31">=</operator> <name pos:start="341:33" pos:end="341:59"><name pos:start="341:33" pos:end="341:37">block</name><operator pos:start="341:38" pos:end="341:39">-&gt;</operator><name pos:start="341:40" pos:end="341:52">cpl_coord_exp</name><index pos:start="341:53" pos:end="341:56">[<expr pos:start="341:54" pos:end="341:55"><name pos:start="341:54" pos:end="341:55">ch</name></expr>]</index><index pos:start="341:57" pos:end="341:59">[<expr pos:start="341:58" pos:end="341:58"><literal type="number" pos:start="341:58" pos:end="341:58">0</literal></expr>]</index></name></expr>;</expr_stmt>

            <for pos:start="343:13" pos:end="351:13">for <control pos:start="343:17" pos:end="343:56">(<init pos:start="343:18" pos:end="343:25"><expr pos:start="343:18" pos:end="343:24"><name pos:start="343:18" pos:end="343:20">bnd</name> <operator pos:start="343:22" pos:end="343:22">=</operator> <literal type="number" pos:start="343:24" pos:end="343:24">1</literal></expr>;</init> <condition pos:start="343:27" pos:end="343:49"><expr pos:start="343:27" pos:end="343:48"><name pos:start="343:27" pos:end="343:29">bnd</name> <operator pos:start="343:31" pos:end="343:31">&lt;</operator> <name pos:start="343:33" pos:end="343:48"><name pos:start="343:33" pos:end="343:33">s</name><operator pos:start="343:34" pos:end="343:35">-&gt;</operator><name pos:start="343:36" pos:end="343:48">num_cpl_bands</name></name></expr>;</condition> <incr pos:start="343:51" pos:end="343:55"><expr pos:start="343:51" pos:end="343:55"><name pos:start="343:51" pos:end="343:53">bnd</name><operator pos:start="343:54" pos:end="343:55">++</operator></expr></incr>)</control> <block pos:start="343:58" pos:end="351:13">{<block_content pos:start="345:17" pos:end="349:46">

                <decl_stmt pos:start="345:17" pos:end="345:56"><decl pos:start="345:17" pos:end="345:55"><type pos:start="345:17" pos:end="345:19"><name pos:start="345:17" pos:end="345:19">int</name></type> <name pos:start="345:21" pos:end="345:23">exp</name> <init pos:start="345:25" pos:end="345:55">= <expr pos:start="345:27" pos:end="345:55"><name pos:start="345:27" pos:end="345:55"><name pos:start="345:27" pos:end="345:31">block</name><operator pos:start="345:32" pos:end="345:33">-&gt;</operator><name pos:start="345:34" pos:end="345:46">cpl_coord_exp</name><index pos:start="345:47" pos:end="345:50">[<expr pos:start="345:48" pos:end="345:49"><name pos:start="345:48" pos:end="345:49">ch</name></expr>]</index><index pos:start="345:51" pos:end="345:55">[<expr pos:start="345:52" pos:end="345:54"><name pos:start="345:52" pos:end="345:54">bnd</name></expr>]</index></name></expr></init></decl>;</decl_stmt>

                <expr_stmt pos:start="347:17" pos:end="347:46"><expr pos:start="347:17" pos:end="347:45"><name pos:start="347:17" pos:end="347:23">min_exp</name> <operator pos:start="347:25" pos:end="347:25">=</operator> <call pos:start="347:27" pos:end="347:45"><name pos:start="347:27" pos:end="347:31">FFMIN</name><argument_list pos:start="347:32" pos:end="347:45">(<argument pos:start="347:33" pos:end="347:35"><expr pos:start="347:33" pos:end="347:35"><name pos:start="347:33" pos:end="347:35">exp</name></expr></argument>, <argument pos:start="347:38" pos:end="347:44"><expr pos:start="347:38" pos:end="347:44"><name pos:start="347:38" pos:end="347:44">min_exp</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

                <expr_stmt pos:start="349:17" pos:end="349:46"><expr pos:start="349:17" pos:end="349:45"><name pos:start="349:17" pos:end="349:23">max_exp</name> <operator pos:start="349:25" pos:end="349:25">=</operator> <call pos:start="349:27" pos:end="349:45"><name pos:start="349:27" pos:end="349:31">FFMAX</name><argument_list pos:start="349:32" pos:end="349:45">(<argument pos:start="349:33" pos:end="349:35"><expr pos:start="349:33" pos:end="349:35"><name pos:start="349:33" pos:end="349:35">exp</name></expr></argument>, <argument pos:start="349:38" pos:end="349:44"><expr pos:start="349:38" pos:end="349:44"><name pos:start="349:38" pos:end="349:44">max_exp</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

            </block_content>}</block></for>

            <expr_stmt pos:start="353:13" pos:end="353:50"><expr pos:start="353:13" pos:end="353:49"><name pos:start="353:13" pos:end="353:22">master_exp</name> <operator pos:start="353:24" pos:end="353:24">=</operator> <operator pos:start="353:26" pos:end="353:26">(</operator><operator pos:start="353:27" pos:end="353:27">(</operator><name pos:start="353:28" pos:end="353:34">max_exp</name> <operator pos:start="353:36" pos:end="353:36">-</operator> <literal type="number" pos:start="353:38" pos:end="353:39">15</literal><operator pos:start="353:40" pos:end="353:40">)</operator> <operator pos:start="353:42" pos:end="353:42">+</operator> <literal type="number" pos:start="353:44" pos:end="353:44">2</literal><operator pos:start="353:45" pos:end="353:45">)</operator> <operator pos:start="353:47" pos:end="353:47">/</operator> <literal type="number" pos:start="353:49" pos:end="353:49">3</literal></expr>;</expr_stmt>

            <expr_stmt pos:start="355:13" pos:end="355:46"><expr pos:start="355:13" pos:end="355:45"><name pos:start="355:13" pos:end="355:22">master_exp</name> <operator pos:start="355:24" pos:end="355:24">=</operator> <call pos:start="355:26" pos:end="355:45"><name pos:start="355:26" pos:end="355:30">FFMAX</name><argument_list pos:start="355:31" pos:end="355:45">(<argument pos:start="355:32" pos:end="355:41"><expr pos:start="355:32" pos:end="355:41"><name pos:start="355:32" pos:end="355:41">master_exp</name></expr></argument>, <argument pos:start="355:44" pos:end="355:44"><expr pos:start="355:44" pos:end="355:44"><literal type="number" pos:start="355:44" pos:end="355:44">0</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

            <while pos:start="357:13" pos:end="359:29">while <condition pos:start="357:19" pos:end="357:44">(<expr pos:start="357:20" pos:end="357:43"><name pos:start="357:20" pos:end="357:26">min_exp</name> <operator pos:start="357:28" pos:end="357:28">&lt;</operator> <name pos:start="357:30" pos:end="357:39">master_exp</name> <operator pos:start="357:41" pos:end="357:41">*</operator> <literal type="number" pos:start="357:43" pos:end="357:43">3</literal></expr>)</condition><block type="pseudo" pos:start="359:17" pos:end="359:29"><block_content pos:start="359:17" pos:end="359:29">

                <expr_stmt pos:start="359:17" pos:end="359:29"><expr pos:start="359:17" pos:end="359:28"><name pos:start="359:17" pos:end="359:26">master_exp</name><operator pos:start="359:27" pos:end="359:28">--</operator></expr>;</expr_stmt></block_content></block></while>

            <for pos:start="361:13" pos:end="367:13">for <control pos:start="361:17" pos:end="361:56">(<init pos:start="361:18" pos:end="361:25"><expr pos:start="361:18" pos:end="361:24"><name pos:start="361:18" pos:end="361:20">bnd</name> <operator pos:start="361:22" pos:end="361:22">=</operator> <literal type="number" pos:start="361:24" pos:end="361:24">0</literal></expr>;</init> <condition pos:start="361:27" pos:end="361:49"><expr pos:start="361:27" pos:end="361:48"><name pos:start="361:27" pos:end="361:29">bnd</name> <operator pos:start="361:31" pos:end="361:31">&lt;</operator> <name pos:start="361:33" pos:end="361:48"><name pos:start="361:33" pos:end="361:33">s</name><operator pos:start="361:34" pos:end="361:35">-&gt;</operator><name pos:start="361:36" pos:end="361:48">num_cpl_bands</name></name></expr>;</condition> <incr pos:start="361:51" pos:end="361:55"><expr pos:start="361:51" pos:end="361:55"><name pos:start="361:51" pos:end="361:53">bnd</name><operator pos:start="361:54" pos:end="361:55">++</operator></expr></incr>)</control> <block pos:start="361:58" pos:end="367:13">{<block_content pos:start="363:17" pos:end="365:79">

                <expr_stmt pos:start="363:17" pos:end="365:79"><expr pos:start="363:17" pos:end="365:78"><name pos:start="363:17" pos:end="363:45"><name pos:start="363:17" pos:end="363:21">block</name><operator pos:start="363:22" pos:end="363:23">-&gt;</operator><name pos:start="363:24" pos:end="363:36">cpl_coord_exp</name><index pos:start="363:37" pos:end="363:40">[<expr pos:start="363:38" pos:end="363:39"><name pos:start="363:38" pos:end="363:39">ch</name></expr>]</index><index pos:start="363:41" pos:end="363:45">[<expr pos:start="363:42" pos:end="363:44"><name pos:start="363:42" pos:end="363:44">bnd</name></expr>]</index></name> <operator pos:start="363:47" pos:end="363:47">=</operator> <call pos:start="363:49" pos:end="365:78"><name pos:start="363:49" pos:end="363:55">av_clip</name><argument_list pos:start="363:56" pos:end="365:78">(<argument pos:start="363:57" pos:end="365:70"><expr pos:start="363:57" pos:end="365:70"><name pos:start="363:57" pos:end="363:85"><name pos:start="363:57" pos:end="363:61">block</name><operator pos:start="363:62" pos:end="363:63">-&gt;</operator><name pos:start="363:64" pos:end="363:76">cpl_coord_exp</name><index pos:start="363:77" pos:end="363:80">[<expr pos:start="363:78" pos:end="363:79"><name pos:start="363:78" pos:end="363:79">ch</name></expr>]</index><index pos:start="363:81" pos:end="363:85">[<expr pos:start="363:82" pos:end="363:84"><name pos:start="363:82" pos:end="363:84">bnd</name></expr>]</index></name> <operator pos:start="363:87" pos:end="363:87">-</operator>

                                                        <name pos:start="365:57" pos:end="365:66">master_exp</name> <operator pos:start="365:68" pos:end="365:68">*</operator> <literal type="number" pos:start="365:70" pos:end="365:70">3</literal></expr></argument>, <argument pos:start="365:73" pos:end="365:73"><expr pos:start="365:73" pos:end="365:73"><literal type="number" pos:start="365:73" pos:end="365:73">0</literal></expr></argument>, <argument pos:start="365:76" pos:end="365:77"><expr pos:start="365:76" pos:end="365:77"><literal type="number" pos:start="365:76" pos:end="365:77">15</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

            </block_content>}</block></for>

            <expr_stmt pos:start="369:13" pos:end="369:51"><expr pos:start="369:13" pos:end="369:50"><name pos:start="369:13" pos:end="369:37"><name pos:start="369:13" pos:end="369:17">block</name><operator pos:start="369:18" pos:end="369:19">-&gt;</operator><name pos:start="369:20" pos:end="369:33">cpl_master_exp</name><index pos:start="369:34" pos:end="369:37">[<expr pos:start="369:35" pos:end="369:36"><name pos:start="369:35" pos:end="369:36">ch</name></expr>]</index></name> <operator pos:start="369:39" pos:end="369:39">=</operator> <name pos:start="369:41" pos:end="369:50">master_exp</name></expr>;</expr_stmt>



            <comment type="block" pos:start="373:13" pos:end="373:36">/* quantize mantissas */</comment>

            <for pos:start="375:13" pos:end="393:13">for <control pos:start="375:17" pos:end="375:56">(<init pos:start="375:18" pos:end="375:25"><expr pos:start="375:18" pos:end="375:24"><name pos:start="375:18" pos:end="375:20">bnd</name> <operator pos:start="375:22" pos:end="375:22">=</operator> <literal type="number" pos:start="375:24" pos:end="375:24">0</literal></expr>;</init> <condition pos:start="375:27" pos:end="375:49"><expr pos:start="375:27" pos:end="375:48"><name pos:start="375:27" pos:end="375:29">bnd</name> <operator pos:start="375:31" pos:end="375:31">&lt;</operator> <name pos:start="375:33" pos:end="375:48"><name pos:start="375:33" pos:end="375:33">s</name><operator pos:start="375:34" pos:end="375:35">-&gt;</operator><name pos:start="375:36" pos:end="375:48">num_cpl_bands</name></name></expr>;</condition> <incr pos:start="375:51" pos:end="375:55"><expr pos:start="375:51" pos:end="375:55"><name pos:start="375:51" pos:end="375:53">bnd</name><operator pos:start="375:54" pos:end="375:55">++</operator></expr></incr>)</control> <block pos:start="375:58" pos:end="393:13">{<block_content pos:start="377:17" pos:end="391:58">

                <decl_stmt pos:start="377:17" pos:end="377:61"><decl pos:start="377:17" pos:end="377:60"><type pos:start="377:17" pos:end="377:19"><name pos:start="377:17" pos:end="377:19">int</name></type> <name pos:start="377:21" pos:end="377:27">cpl_exp</name>  <init pos:start="377:30" pos:end="377:60">= <expr pos:start="377:32" pos:end="377:60"><name pos:start="377:32" pos:end="377:60"><name pos:start="377:32" pos:end="377:36">block</name><operator pos:start="377:37" pos:end="377:38">-&gt;</operator><name pos:start="377:39" pos:end="377:51">cpl_coord_exp</name><index pos:start="377:52" pos:end="377:55">[<expr pos:start="377:53" pos:end="377:54"><name pos:start="377:53" pos:end="377:54">ch</name></expr>]</index><index pos:start="377:56" pos:end="377:60">[<expr pos:start="377:57" pos:end="377:59"><name pos:start="377:57" pos:end="377:59">bnd</name></expr>]</index></name></expr></init></decl>;</decl_stmt>

                <decl_stmt pos:start="379:17" pos:end="379:104"><decl pos:start="379:17" pos:end="379:103"><type pos:start="379:17" pos:end="379:19"><name pos:start="379:17" pos:end="379:19">int</name></type> <name pos:start="379:21" pos:end="379:28">cpl_mant</name> <init pos:start="379:30" pos:end="379:103">= <expr pos:start="379:32" pos:end="379:103"><operator pos:start="379:32" pos:end="379:32">(</operator><name pos:start="379:33" pos:end="379:62"><name pos:start="379:33" pos:end="379:48">fixed_cpl_coords</name><index pos:start="379:49" pos:end="379:53">[<expr pos:start="379:50" pos:end="379:52"><name pos:start="379:50" pos:end="379:52">blk</name></expr>]</index><index pos:start="379:54" pos:end="379:57">[<expr pos:start="379:55" pos:end="379:56"><name pos:start="379:55" pos:end="379:56">ch</name></expr>]</index><index pos:start="379:58" pos:end="379:62">[<expr pos:start="379:59" pos:end="379:61"><name pos:start="379:59" pos:end="379:61">bnd</name></expr>]</index></name> <operator pos:start="379:64" pos:end="379:65">&lt;&lt;</operator> <operator pos:start="379:67" pos:end="379:67">(</operator><literal type="number" pos:start="379:68" pos:end="379:70">5</literal> <operator pos:start="379:70" pos:end="379:70">+</operator> <name pos:start="379:72" pos:end="379:78">cpl_exp</name> <operator pos:start="379:80" pos:end="379:80">+</operator> <name pos:start="379:82" pos:end="379:91">master_exp</name> <operator pos:start="379:93" pos:end="379:93">*</operator> <literal type="number" pos:start="379:95" pos:end="379:95">3</literal><operator pos:start="379:96" pos:end="379:96">)</operator><operator pos:start="379:97" pos:end="379:97">)</operator> <operator pos:start="379:99" pos:end="379:100">&gt;&gt;</operator> <literal type="number" pos:start="379:102" pos:end="379:103">24</literal></expr></init></decl>;</decl_stmt>

                <if_stmt pos:start="381:17" pos:end="387:35"><if pos:start="381:17" pos:end="383:35">if <condition pos:start="381:20" pos:end="381:34">(<expr pos:start="381:21" pos:end="381:33"><name pos:start="381:21" pos:end="381:27">cpl_exp</name> <operator pos:start="381:29" pos:end="381:30">==</operator> <literal type="number" pos:start="381:32" pos:end="381:33">15</literal></expr>)</condition><block type="pseudo" pos:start="383:21" pos:end="383:35"><block_content pos:start="383:21" pos:end="383:35">

                    <expr_stmt pos:start="383:21" pos:end="383:35"><expr pos:start="383:21" pos:end="383:34"><name pos:start="383:21" pos:end="383:28">cpl_mant</name> <operator pos:start="383:30" pos:end="383:32">&gt;&gt;=</operator> <literal type="number" pos:start="383:34" pos:end="383:34">1</literal></expr>;</expr_stmt></block_content></block></if>

                <else pos:start="385:17" pos:end="387:35">else<block type="pseudo" pos:start="387:21" pos:end="387:35"><block_content pos:start="387:21" pos:end="387:35">

                    <expr_stmt pos:start="387:21" pos:end="387:35"><expr pos:start="387:21" pos:end="387:34"><name pos:start="387:21" pos:end="387:28">cpl_mant</name> <operator pos:start="387:30" pos:end="387:31">-=</operator> <literal type="number" pos:start="387:33" pos:end="387:34">16</literal></expr>;</expr_stmt></block_content></block></else></if_stmt>



                <expr_stmt pos:start="391:17" pos:end="391:58"><expr pos:start="391:17" pos:end="391:57"><name pos:start="391:17" pos:end="391:46"><name pos:start="391:17" pos:end="391:21">block</name><operator pos:start="391:22" pos:end="391:23">-&gt;</operator><name pos:start="391:24" pos:end="391:37">cpl_coord_mant</name><index pos:start="391:38" pos:end="391:41">[<expr pos:start="391:39" pos:end="391:40"><name pos:start="391:39" pos:end="391:40">ch</name></expr>]</index><index pos:start="391:42" pos:end="391:46">[<expr pos:start="391:43" pos:end="391:45"><name pos:start="391:43" pos:end="391:45">bnd</name></expr>]</index></name> <operator pos:start="391:48" pos:end="391:48">=</operator> <name pos:start="391:50" pos:end="391:57">cpl_mant</name></expr>;</expr_stmt>

            </block_content>}</block></for>

        </block_content>}</block></for>

    </block_content>}</block></for>



    <if_stmt pos:start="401:5" pos:end="403:34"><if pos:start="401:5" pos:end="403:34">if <condition pos:start="401:8" pos:end="401:39">(<expr pos:start="401:9" pos:end="401:38"><name pos:start="401:9" pos:end="401:27">CONFIG_EAC3_ENCODER</name> <operator pos:start="401:29" pos:end="401:30">&amp;&amp;</operator> <name pos:start="401:32" pos:end="401:38"><name pos:start="401:32" pos:end="401:32">s</name><operator pos:start="401:33" pos:end="401:34">-&gt;</operator><name pos:start="401:35" pos:end="401:38">eac3</name></name></expr>)</condition><block type="pseudo" pos:start="403:9" pos:end="403:34"><block_content pos:start="403:9" pos:end="403:34">

        <expr_stmt pos:start="403:9" pos:end="403:34"><expr pos:start="403:9" pos:end="403:33"><call pos:start="403:9" pos:end="403:33"><name pos:start="403:9" pos:end="403:30">ff_eac3_set_cpl_states</name><argument_list pos:start="403:31" pos:end="403:33">(<argument pos:start="403:32" pos:end="403:32"><expr pos:start="403:32" pos:end="403:32"><name pos:start="403:32" pos:end="403:32">s</name></expr></argument>)</argument_list></call></expr>;</expr_stmt></block_content></block></if></if_stmt>

</block_content>}</block></function>
</unit>
