<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<unit xmlns="http://www.srcML.org/srcML/src" xmlns:pos="http://www.srcML.org/srcML/position" revision="1.0.0" language="C" filename="dataset/ropgen/aug/0/24187.c" pos:tabs="8"><function pos:start="1:1" pos:end="93:1"><type pos:start="1:1" pos:end="1:11"><specifier pos:start="1:1" pos:end="1:6">static</specifier> <name pos:start="1:8" pos:end="1:11">void</name></type> <name pos:start="1:13" pos:end="1:28">qxl_init_ramsize</name><parameter_list pos:start="1:29" pos:end="1:47">(<parameter pos:start="1:30" pos:end="1:46"><decl pos:start="1:30" pos:end="1:46"><type pos:start="1:30" pos:end="1:43"><name pos:start="1:30" pos:end="1:41">PCIQXLDevice</name> <modifier pos:start="1:43" pos:end="1:43">*</modifier></type><name pos:start="1:44" pos:end="1:46">qxl</name></decl></parameter>)</parameter_list>

<block pos:start="3:1" pos:end="93:1">{<block_content pos:start="7:5" pos:end="91:46">

    <comment type="block" pos:start="5:5" pos:end="5:68">/* vga mode framebuffer / primary surface (bar 0, first part) */</comment>

    <if_stmt pos:start="7:5" pos:end="11:5"><if pos:start="7:5" pos:end="11:5">if <condition pos:start="7:8" pos:end="7:32">(<expr pos:start="7:9" pos:end="7:31"><name pos:start="7:9" pos:end="7:27"><name pos:start="7:9" pos:end="7:11">qxl</name><operator pos:start="7:12" pos:end="7:13">-&gt;</operator><name pos:start="7:14" pos:end="7:27">vgamem_size_mb</name></name> <operator pos:start="7:29" pos:end="7:29">&lt;</operator> <literal type="number" pos:start="7:31" pos:end="7:31">8</literal></expr>)</condition> <block pos:start="7:34" pos:end="11:5">{<block_content pos:start="9:9" pos:end="9:32">

        <expr_stmt pos:start="9:9" pos:end="9:32"><expr pos:start="9:9" pos:end="9:31"><name pos:start="9:9" pos:end="9:27"><name pos:start="9:9" pos:end="9:11">qxl</name><operator pos:start="9:12" pos:end="9:13">-&gt;</operator><name pos:start="9:14" pos:end="9:27">vgamem_size_mb</name></name> <operator pos:start="9:29" pos:end="9:29">=</operator> <literal type="number" pos:start="9:31" pos:end="9:31">8</literal></expr>;</expr_stmt>

    </block_content>}</block></if></if_stmt>

    <comment type="block" pos:start="13:5" pos:end="17:7">/* XXX: we round vgamem_size_mb up to a nearest power of two and it must be

     * less than vga_common_init()'s maximum on qxl-&gt;vga.vram_size (512 now).

     */</comment>

    <if_stmt pos:start="19:5" pos:end="23:5"><if pos:start="19:5" pos:end="23:5">if <condition pos:start="19:8" pos:end="19:34">(<expr pos:start="19:9" pos:end="19:33"><name pos:start="19:9" pos:end="19:27"><name pos:start="19:9" pos:end="19:11">qxl</name><operator pos:start="19:12" pos:end="19:13">-&gt;</operator><name pos:start="19:14" pos:end="19:27">vgamem_size_mb</name></name> <operator pos:start="19:29" pos:end="19:29">&gt;</operator> <literal type="number" pos:start="19:31" pos:end="19:33">256</literal></expr>)</condition> <block pos:start="19:36" pos:end="23:5">{<block_content pos:start="21:9" pos:end="21:34">

        <expr_stmt pos:start="21:9" pos:end="21:34"><expr pos:start="21:9" pos:end="21:33"><name pos:start="21:9" pos:end="21:27"><name pos:start="21:9" pos:end="21:11">qxl</name><operator pos:start="21:12" pos:end="21:13">-&gt;</operator><name pos:start="21:14" pos:end="21:27">vgamem_size_mb</name></name> <operator pos:start="21:29" pos:end="21:29">=</operator> <literal type="number" pos:start="21:31" pos:end="21:33">256</literal></expr>;</expr_stmt>

    </block_content>}</block></if></if_stmt>

    <expr_stmt pos:start="25:5" pos:end="25:57"><expr pos:start="25:5" pos:end="25:56"><name pos:start="25:5" pos:end="25:20"><name pos:start="25:5" pos:end="25:7">qxl</name><operator pos:start="25:8" pos:end="25:9">-&gt;</operator><name pos:start="25:10" pos:end="25:20">vgamem_size</name></name> <operator pos:start="25:22" pos:end="25:22">=</operator> <name pos:start="25:24" pos:end="25:42"><name pos:start="25:24" pos:end="25:26">qxl</name><operator pos:start="25:27" pos:end="25:28">-&gt;</operator><name pos:start="25:29" pos:end="25:42">vgamem_size_mb</name></name> <operator pos:start="25:44" pos:end="25:44">*</operator> <literal type="number" pos:start="25:46" pos:end="25:49">1024</literal> <operator pos:start="25:51" pos:end="25:51">*</operator> <literal type="number" pos:start="25:53" pos:end="25:56">1024</literal></expr>;</expr_stmt>



    <comment type="block" pos:start="29:5" pos:end="29:32">/* vga ram (bar 0, total) */</comment>

    <if_stmt pos:start="31:5" pos:end="35:5"><if pos:start="31:5" pos:end="35:5">if <condition pos:start="31:8" pos:end="31:31">(<expr pos:start="31:9" pos:end="31:30"><name pos:start="31:9" pos:end="31:24"><name pos:start="31:9" pos:end="31:11">qxl</name><operator pos:start="31:12" pos:end="31:13">-&gt;</operator><name pos:start="31:14" pos:end="31:24">ram_size_mb</name></name> <operator pos:start="31:26" pos:end="31:27">!=</operator> <operator pos:start="31:29" pos:end="31:29">-</operator><literal type="number" pos:start="31:30" pos:end="31:30">1</literal></expr>)</condition> <block pos:start="31:33" pos:end="35:5">{<block_content pos:start="33:9" pos:end="33:60">

        <expr_stmt pos:start="33:9" pos:end="33:60"><expr pos:start="33:9" pos:end="33:59"><name pos:start="33:9" pos:end="33:26"><name pos:start="33:9" pos:end="33:11">qxl</name><operator pos:start="33:12" pos:end="33:13">-&gt;</operator><name pos:start="33:14" pos:end="33:16">vga</name><operator pos:start="33:17" pos:end="33:17">.</operator><name pos:start="33:18" pos:end="33:26">vram_size</name></name> <operator pos:start="33:28" pos:end="33:28">=</operator> <name pos:start="33:30" pos:end="33:45"><name pos:start="33:30" pos:end="33:32">qxl</name><operator pos:start="33:33" pos:end="33:34">-&gt;</operator><name pos:start="33:35" pos:end="33:45">ram_size_mb</name></name> <operator pos:start="33:47" pos:end="33:47">*</operator> <literal type="number" pos:start="33:49" pos:end="33:52">1024</literal> <operator pos:start="33:54" pos:end="33:54">*</operator> <literal type="number" pos:start="33:56" pos:end="33:59">1024</literal></expr>;</expr_stmt>

    </block_content>}</block></if></if_stmt>

    <if_stmt pos:start="37:5" pos:end="41:5"><if pos:start="37:5" pos:end="41:5">if <condition pos:start="37:8" pos:end="37:50">(<expr pos:start="37:9" pos:end="37:49"><name pos:start="37:9" pos:end="37:26"><name pos:start="37:9" pos:end="37:11">qxl</name><operator pos:start="37:12" pos:end="37:13">-&gt;</operator><name pos:start="37:14" pos:end="37:16">vga</name><operator pos:start="37:17" pos:end="37:17">.</operator><name pos:start="37:18" pos:end="37:26">vram_size</name></name> <operator pos:start="37:28" pos:end="37:28">&lt;</operator> <name pos:start="37:30" pos:end="37:45"><name pos:start="37:30" pos:end="37:32">qxl</name><operator pos:start="37:33" pos:end="37:34">-&gt;</operator><name pos:start="37:35" pos:end="37:45">vgamem_size</name></name> <operator pos:start="37:47" pos:end="37:47">*</operator> <literal type="number" pos:start="37:49" pos:end="37:49">2</literal></expr>)</condition> <block pos:start="37:52" pos:end="41:5">{<block_content pos:start="39:9" pos:end="39:50">

        <expr_stmt pos:start="39:9" pos:end="39:50"><expr pos:start="39:9" pos:end="39:49"><name pos:start="39:9" pos:end="39:26"><name pos:start="39:9" pos:end="39:11">qxl</name><operator pos:start="39:12" pos:end="39:13">-&gt;</operator><name pos:start="39:14" pos:end="39:16">vga</name><operator pos:start="39:17" pos:end="39:17">.</operator><name pos:start="39:18" pos:end="39:26">vram_size</name></name> <operator pos:start="39:28" pos:end="39:28">=</operator> <name pos:start="39:30" pos:end="39:45"><name pos:start="39:30" pos:end="39:32">qxl</name><operator pos:start="39:33" pos:end="39:34">-&gt;</operator><name pos:start="39:35" pos:end="39:45">vgamem_size</name></name> <operator pos:start="39:47" pos:end="39:47">*</operator> <literal type="number" pos:start="39:49" pos:end="39:49">2</literal></expr>;</expr_stmt>

    </block_content>}</block></if></if_stmt>



    <comment type="block" pos:start="45:5" pos:end="45:41">/* vram32 (surfaces, 32bit, bar 1) */</comment>

    <if_stmt pos:start="47:5" pos:end="51:5"><if pos:start="47:5" pos:end="51:5">if <condition pos:start="47:8" pos:end="47:34">(<expr pos:start="47:9" pos:end="47:33"><name pos:start="47:9" pos:end="47:27"><name pos:start="47:9" pos:end="47:11">qxl</name><operator pos:start="47:12" pos:end="47:13">-&gt;</operator><name pos:start="47:14" pos:end="47:27">vram32_size_mb</name></name> <operator pos:start="47:29" pos:end="47:30">!=</operator> <operator pos:start="47:32" pos:end="47:32">-</operator><literal type="number" pos:start="47:33" pos:end="47:33">1</literal></expr>)</condition> <block pos:start="47:36" pos:end="51:5">{<block_content pos:start="49:9" pos:end="49:61">

        <expr_stmt pos:start="49:9" pos:end="49:61"><expr pos:start="49:9" pos:end="49:60"><name pos:start="49:9" pos:end="49:24"><name pos:start="49:9" pos:end="49:11">qxl</name><operator pos:start="49:12" pos:end="49:13">-&gt;</operator><name pos:start="49:14" pos:end="49:24">vram32_size</name></name> <operator pos:start="49:26" pos:end="49:26">=</operator> <name pos:start="49:28" pos:end="49:46"><name pos:start="49:28" pos:end="49:30">qxl</name><operator pos:start="49:31" pos:end="49:32">-&gt;</operator><name pos:start="49:33" pos:end="49:46">vram32_size_mb</name></name> <operator pos:start="49:48" pos:end="49:48">*</operator> <literal type="number" pos:start="49:50" pos:end="49:53">1024</literal> <operator pos:start="49:55" pos:end="49:55">*</operator> <literal type="number" pos:start="49:57" pos:end="49:60">1024</literal></expr>;</expr_stmt>

    </block_content>}</block></if></if_stmt>

    <if_stmt pos:start="53:5" pos:end="57:5"><if pos:start="53:5" pos:end="57:5">if <condition pos:start="53:8" pos:end="53:32">(<expr pos:start="53:9" pos:end="53:31"><name pos:start="53:9" pos:end="53:24"><name pos:start="53:9" pos:end="53:11">qxl</name><operator pos:start="53:12" pos:end="53:13">-&gt;</operator><name pos:start="53:14" pos:end="53:24">vram32_size</name></name> <operator pos:start="53:26" pos:end="53:26">&lt;</operator> <literal type="number" pos:start="53:28" pos:end="53:31">4096</literal></expr>)</condition> <block pos:start="53:34" pos:end="57:5">{<block_content pos:start="55:9" pos:end="55:32">

        <expr_stmt pos:start="55:9" pos:end="55:32"><expr pos:start="55:9" pos:end="55:31"><name pos:start="55:9" pos:end="55:24"><name pos:start="55:9" pos:end="55:11">qxl</name><operator pos:start="55:12" pos:end="55:13">-&gt;</operator><name pos:start="55:14" pos:end="55:24">vram32_size</name></name> <operator pos:start="55:26" pos:end="55:26">=</operator> <literal type="number" pos:start="55:28" pos:end="55:31">4096</literal></expr>;</expr_stmt>

    </block_content>}</block></if></if_stmt>



    <comment type="block" pos:start="61:5" pos:end="61:41">/* vram (surfaces, 64bit, bar 4+5) */</comment>

    <if_stmt pos:start="63:5" pos:end="67:5"><if pos:start="63:5" pos:end="67:5">if <condition pos:start="63:8" pos:end="63:32">(<expr pos:start="63:9" pos:end="63:31"><name pos:start="63:9" pos:end="63:25"><name pos:start="63:9" pos:end="63:11">qxl</name><operator pos:start="63:12" pos:end="63:13">-&gt;</operator><name pos:start="63:14" pos:end="63:25">vram_size_mb</name></name> <operator pos:start="63:27" pos:end="63:28">!=</operator> <operator pos:start="63:30" pos:end="63:30">-</operator><literal type="number" pos:start="63:31" pos:end="63:31">1</literal></expr>)</condition> <block pos:start="63:34" pos:end="67:5">{<block_content pos:start="65:9" pos:end="65:57">

        <expr_stmt pos:start="65:9" pos:end="65:57"><expr pos:start="65:9" pos:end="65:56"><name pos:start="65:9" pos:end="65:22"><name pos:start="65:9" pos:end="65:11">qxl</name><operator pos:start="65:12" pos:end="65:13">-&gt;</operator><name pos:start="65:14" pos:end="65:22">vram_size</name></name> <operator pos:start="65:24" pos:end="65:24">=</operator> <name pos:start="65:26" pos:end="65:42"><name pos:start="65:26" pos:end="65:28">qxl</name><operator pos:start="65:29" pos:end="65:30">-&gt;</operator><name pos:start="65:31" pos:end="65:42">vram_size_mb</name></name> <operator pos:start="65:44" pos:end="65:44">*</operator> <literal type="number" pos:start="65:46" pos:end="65:49">1024</literal> <operator pos:start="65:51" pos:end="65:51">*</operator> <literal type="number" pos:start="65:53" pos:end="65:56">1024</literal></expr>;</expr_stmt>

    </block_content>}</block></if></if_stmt>

    <if_stmt pos:start="69:5" pos:end="73:5"><if pos:start="69:5" pos:end="73:5">if <condition pos:start="69:8" pos:end="69:42">(<expr pos:start="69:9" pos:end="69:41"><name pos:start="69:9" pos:end="69:22"><name pos:start="69:9" pos:end="69:11">qxl</name><operator pos:start="69:12" pos:end="69:13">-&gt;</operator><name pos:start="69:14" pos:end="69:22">vram_size</name></name> <operator pos:start="69:24" pos:end="69:24">&lt;</operator> <name pos:start="69:26" pos:end="69:41"><name pos:start="69:26" pos:end="69:28">qxl</name><operator pos:start="69:29" pos:end="69:30">-&gt;</operator><name pos:start="69:31" pos:end="69:41">vram32_size</name></name></expr>)</condition> <block pos:start="69:44" pos:end="73:5">{<block_content pos:start="71:9" pos:end="71:42">

        <expr_stmt pos:start="71:9" pos:end="71:42"><expr pos:start="71:9" pos:end="71:41"><name pos:start="71:9" pos:end="71:22"><name pos:start="71:9" pos:end="71:11">qxl</name><operator pos:start="71:12" pos:end="71:13">-&gt;</operator><name pos:start="71:14" pos:end="71:22">vram_size</name></name> <operator pos:start="71:24" pos:end="71:24">=</operator> <name pos:start="71:26" pos:end="71:41"><name pos:start="71:26" pos:end="71:28">qxl</name><operator pos:start="71:29" pos:end="71:30">-&gt;</operator><name pos:start="71:31" pos:end="71:41">vram32_size</name></name></expr>;</expr_stmt>

    </block_content>}</block></if></if_stmt>



    <if_stmt pos:start="77:5" pos:end="83:5"><if pos:start="77:5" pos:end="83:5">if <condition pos:start="77:8" pos:end="77:27">(<expr pos:start="77:9" pos:end="77:26"><name pos:start="77:9" pos:end="77:21"><name pos:start="77:9" pos:end="77:11">qxl</name><operator pos:start="77:12" pos:end="77:13">-&gt;</operator><name pos:start="77:14" pos:end="77:21">revision</name></name> <operator pos:start="77:23" pos:end="77:24">==</operator> <literal type="number" pos:start="77:26" pos:end="77:26">1</literal></expr>)</condition> <block pos:start="77:29" pos:end="83:5">{<block_content pos:start="79:9" pos:end="81:30">

        <expr_stmt pos:start="79:9" pos:end="79:32"><expr pos:start="79:9" pos:end="79:31"><name pos:start="79:9" pos:end="79:24"><name pos:start="79:9" pos:end="79:11">qxl</name><operator pos:start="79:12" pos:end="79:13">-&gt;</operator><name pos:start="79:14" pos:end="79:24">vram32_size</name></name> <operator pos:start="79:26" pos:end="79:26">=</operator> <literal type="number" pos:start="79:28" pos:end="79:31">4096</literal></expr>;</expr_stmt>

        <expr_stmt pos:start="81:9" pos:end="81:30"><expr pos:start="81:9" pos:end="81:29"><name pos:start="81:9" pos:end="81:22"><name pos:start="81:9" pos:end="81:11">qxl</name><operator pos:start="81:12" pos:end="81:13">-&gt;</operator><name pos:start="81:14" pos:end="81:22">vram_size</name></name> <operator pos:start="81:24" pos:end="81:24">=</operator> <literal type="number" pos:start="81:26" pos:end="81:29">4096</literal></expr>;</expr_stmt>

    </block_content>}</block></if></if_stmt>

    <expr_stmt pos:start="85:5" pos:end="85:50"><expr pos:start="85:5" pos:end="85:49"><name pos:start="85:5" pos:end="85:20"><name pos:start="85:5" pos:end="85:7">qxl</name><operator pos:start="85:8" pos:end="85:9">-&gt;</operator><name pos:start="85:10" pos:end="85:20">vgamem_size</name></name> <operator pos:start="85:22" pos:end="85:22">=</operator> <call pos:start="85:24" pos:end="85:49"><name pos:start="85:24" pos:end="85:31">pow2ceil</name><argument_list pos:start="85:32" pos:end="85:49">(<argument pos:start="85:33" pos:end="85:48"><expr pos:start="85:33" pos:end="85:48"><name pos:start="85:33" pos:end="85:48"><name pos:start="85:33" pos:end="85:35">qxl</name><operator pos:start="85:36" pos:end="85:37">-&gt;</operator><name pos:start="85:38" pos:end="85:48">vgamem_size</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    <expr_stmt pos:start="87:5" pos:end="87:54"><expr pos:start="87:5" pos:end="87:53"><name pos:start="87:5" pos:end="87:22"><name pos:start="87:5" pos:end="87:7">qxl</name><operator pos:start="87:8" pos:end="87:9">-&gt;</operator><name pos:start="87:10" pos:end="87:12">vga</name><operator pos:start="87:13" pos:end="87:13">.</operator><name pos:start="87:14" pos:end="87:22">vram_size</name></name> <operator pos:start="87:24" pos:end="87:24">=</operator> <call pos:start="87:26" pos:end="87:53"><name pos:start="87:26" pos:end="87:33">pow2ceil</name><argument_list pos:start="87:34" pos:end="87:53">(<argument pos:start="87:35" pos:end="87:52"><expr pos:start="87:35" pos:end="87:52"><name pos:start="87:35" pos:end="87:52"><name pos:start="87:35" pos:end="87:37">qxl</name><operator pos:start="87:38" pos:end="87:39">-&gt;</operator><name pos:start="87:40" pos:end="87:42">vga</name><operator pos:start="87:43" pos:end="87:43">.</operator><name pos:start="87:44" pos:end="87:52">vram_size</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    <expr_stmt pos:start="89:5" pos:end="89:50"><expr pos:start="89:5" pos:end="89:49"><name pos:start="89:5" pos:end="89:20"><name pos:start="89:5" pos:end="89:7">qxl</name><operator pos:start="89:8" pos:end="89:9">-&gt;</operator><name pos:start="89:10" pos:end="89:20">vram32_size</name></name> <operator pos:start="89:22" pos:end="89:22">=</operator> <call pos:start="89:24" pos:end="89:49"><name pos:start="89:24" pos:end="89:31">pow2ceil</name><argument_list pos:start="89:32" pos:end="89:49">(<argument pos:start="89:33" pos:end="89:48"><expr pos:start="89:33" pos:end="89:48"><name pos:start="89:33" pos:end="89:48"><name pos:start="89:33" pos:end="89:35">qxl</name><operator pos:start="89:36" pos:end="89:37">-&gt;</operator><name pos:start="89:38" pos:end="89:48">vram32_size</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    <expr_stmt pos:start="91:5" pos:end="91:46"><expr pos:start="91:5" pos:end="91:45"><name pos:start="91:5" pos:end="91:18"><name pos:start="91:5" pos:end="91:7">qxl</name><operator pos:start="91:8" pos:end="91:9">-&gt;</operator><name pos:start="91:10" pos:end="91:18">vram_size</name></name> <operator pos:start="91:20" pos:end="91:20">=</operator> <call pos:start="91:22" pos:end="91:45"><name pos:start="91:22" pos:end="91:29">pow2ceil</name><argument_list pos:start="91:30" pos:end="91:45">(<argument pos:start="91:31" pos:end="91:44"><expr pos:start="91:31" pos:end="91:44"><name pos:start="91:31" pos:end="91:44"><name pos:start="91:31" pos:end="91:33">qxl</name><operator pos:start="91:34" pos:end="91:35">-&gt;</operator><name pos:start="91:36" pos:end="91:44">vram_size</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

</block_content>}</block></function>
</unit>
