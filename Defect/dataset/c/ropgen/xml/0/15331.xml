<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<unit xmlns="http://www.srcML.org/srcML/src" xmlns:pos="http://www.srcML.org/srcML/position" revision="1.0.0" language="C" filename="dataset/ropgen/aug/0/15331.c" pos:tabs="8"><function pos:start="1:1" pos:end="79:1"><type pos:start="1:1" pos:end="1:19"><specifier pos:start="1:1" pos:end="1:6">static</specifier> <name pos:start="1:8" pos:end="1:17">VideoState</name> <modifier pos:start="1:19" pos:end="1:19">*</modifier></type><name pos:start="1:20" pos:end="1:30">stream_open</name><parameter_list pos:start="1:31" pos:end="1:76">(<parameter pos:start="1:32" pos:end="1:51"><decl pos:start="1:32" pos:end="1:51"><type pos:start="1:32" pos:end="1:51"><specifier pos:start="1:32" pos:end="1:36">const</specifier> <name pos:start="1:38" pos:end="1:41">char</name> <modifier pos:start="1:43" pos:end="1:43">*</modifier></type><name pos:start="1:44" pos:end="1:51">filename</name></decl></parameter>, <parameter pos:start="1:54" pos:end="1:75"><decl pos:start="1:54" pos:end="1:75"><type pos:start="1:54" pos:end="1:75"><name pos:start="1:54" pos:end="1:66">AVInputFormat</name> <modifier pos:start="1:68" pos:end="1:68">*</modifier></type><name pos:start="1:69" pos:end="1:75">iformat</name></decl></parameter>)</parameter_list>

<block pos:start="3:1" pos:end="79:1">{<block_content pos:start="5:5" pos:end="77:14">

    <decl_stmt pos:start="5:5" pos:end="5:19"><decl pos:start="5:5" pos:end="5:18"><type pos:start="5:5" pos:end="5:16"><name pos:start="5:5" pos:end="5:14">VideoState</name> <modifier pos:start="5:16" pos:end="5:16">*</modifier></type><name pos:start="5:17" pos:end="5:18">is</name></decl>;</decl_stmt>



    <expr_stmt pos:start="9:5" pos:end="9:40"><expr pos:start="9:5" pos:end="9:39"><name pos:start="9:5" pos:end="9:6">is</name> <operator pos:start="9:8" pos:end="9:8">=</operator> <call pos:start="9:10" pos:end="9:39"><name pos:start="9:10" pos:end="9:19">av_mallocz</name><argument_list pos:start="9:20" pos:end="9:39">(<argument pos:start="9:21" pos:end="9:38"><expr pos:start="9:21" pos:end="9:38"><sizeof pos:start="9:21" pos:end="9:38">sizeof<argument_list pos:start="9:27" pos:end="9:38">(<argument pos:start="9:28" pos:end="9:37"><expr pos:start="9:28" pos:end="9:37"><name pos:start="9:28" pos:end="9:37">VideoState</name></expr></argument>)</argument_list></sizeof></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    <if_stmt pos:start="11:5" pos:end="13:20"><if pos:start="11:5" pos:end="13:20">if <condition pos:start="11:8" pos:end="11:12">(<expr pos:start="11:9" pos:end="11:11"><operator pos:start="11:9" pos:end="11:9">!</operator><name pos:start="11:10" pos:end="11:11">is</name></expr>)</condition><block type="pseudo" pos:start="13:9" pos:end="13:20"><block_content pos:start="13:9" pos:end="13:20">

        <return pos:start="13:9" pos:end="13:20">return <expr pos:start="13:16" pos:end="13:19"><name pos:start="13:16" pos:end="13:19">NULL</name></expr>;</return></block_content></block></if></if_stmt>

    <expr_stmt pos:start="15:5" pos:end="15:61"><expr pos:start="15:5" pos:end="15:60"><call pos:start="15:5" pos:end="15:60"><name pos:start="15:5" pos:end="15:14">av_strlcpy</name><argument_list pos:start="15:15" pos:end="15:60">(<argument pos:start="15:16" pos:end="15:27"><expr pos:start="15:16" pos:end="15:27"><name pos:start="15:16" pos:end="15:27"><name pos:start="15:16" pos:end="15:17">is</name><operator pos:start="15:18" pos:end="15:19">-&gt;</operator><name pos:start="15:20" pos:end="15:27">filename</name></name></expr></argument>, <argument pos:start="15:30" pos:end="15:37"><expr pos:start="15:30" pos:end="15:37"><name pos:start="15:30" pos:end="15:37">filename</name></expr></argument>, <argument pos:start="15:40" pos:end="15:59"><expr pos:start="15:40" pos:end="15:59"><sizeof pos:start="15:40" pos:end="15:59">sizeof<argument_list pos:start="15:46" pos:end="15:59">(<argument pos:start="15:47" pos:end="15:58"><expr pos:start="15:47" pos:end="15:58"><name pos:start="15:47" pos:end="15:58"><name pos:start="15:47" pos:end="15:48">is</name><operator pos:start="15:49" pos:end="15:50">-&gt;</operator><name pos:start="15:51" pos:end="15:58">filename</name></name></expr></argument>)</argument_list></sizeof></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    <expr_stmt pos:start="17:5" pos:end="17:26"><expr pos:start="17:5" pos:end="17:25"><name pos:start="17:5" pos:end="17:15"><name pos:start="17:5" pos:end="17:6">is</name><operator pos:start="17:7" pos:end="17:8">-&gt;</operator><name pos:start="17:9" pos:end="17:15">iformat</name></name> <operator pos:start="17:17" pos:end="17:17">=</operator> <name pos:start="17:19" pos:end="17:25">iformat</name></expr>;</expr_stmt>

    <expr_stmt pos:start="19:5" pos:end="19:20"><expr pos:start="19:5" pos:end="19:19"><name pos:start="19:5" pos:end="19:12"><name pos:start="19:5" pos:end="19:6">is</name><operator pos:start="19:7" pos:end="19:8">-&gt;</operator><name pos:start="19:9" pos:end="19:12">ytop</name></name>    <operator pos:start="19:17" pos:end="19:17">=</operator> <literal type="number" pos:start="19:19" pos:end="19:19">0</literal></expr>;</expr_stmt>

    <expr_stmt pos:start="21:5" pos:end="21:20"><expr pos:start="21:5" pos:end="21:19"><name pos:start="21:5" pos:end="21:13"><name pos:start="21:5" pos:end="21:6">is</name><operator pos:start="21:7" pos:end="21:8">-&gt;</operator><name pos:start="21:9" pos:end="21:13">xleft</name></name>   <operator pos:start="21:17" pos:end="21:17">=</operator> <literal type="number" pos:start="21:19" pos:end="21:19">0</literal></expr>;</expr_stmt>



    <comment type="block" pos:start="25:5" pos:end="25:29">/* start video display */</comment>

    <expr_stmt pos:start="27:5" pos:end="27:40"><expr pos:start="27:5" pos:end="27:39"><name pos:start="27:5" pos:end="27:19"><name pos:start="27:5" pos:end="27:6">is</name><operator pos:start="27:7" pos:end="27:8">-&gt;</operator><name pos:start="27:9" pos:end="27:19">pictq_mutex</name></name> <operator pos:start="27:21" pos:end="27:21">=</operator> <call pos:start="27:23" pos:end="27:39"><name pos:start="27:23" pos:end="27:37">SDL_CreateMutex</name><argument_list pos:start="27:38" pos:end="27:39">()</argument_list></call></expr>;</expr_stmt>

    <expr_stmt pos:start="29:5" pos:end="29:39"><expr pos:start="29:5" pos:end="29:38"><name pos:start="29:5" pos:end="29:18"><name pos:start="29:5" pos:end="29:6">is</name><operator pos:start="29:7" pos:end="29:8">-&gt;</operator><name pos:start="29:9" pos:end="29:18">pictq_cond</name></name>  <operator pos:start="29:21" pos:end="29:21">=</operator> <call pos:start="29:23" pos:end="29:38"><name pos:start="29:23" pos:end="29:36">SDL_CreateCond</name><argument_list pos:start="29:37" pos:end="29:38">()</argument_list></call></expr>;</expr_stmt>



    <expr_stmt pos:start="33:5" pos:end="33:40"><expr pos:start="33:5" pos:end="33:39"><name pos:start="33:5" pos:end="33:19"><name pos:start="33:5" pos:end="33:6">is</name><operator pos:start="33:7" pos:end="33:8">-&gt;</operator><name pos:start="33:9" pos:end="33:19">subpq_mutex</name></name> <operator pos:start="33:21" pos:end="33:21">=</operator> <call pos:start="33:23" pos:end="33:39"><name pos:start="33:23" pos:end="33:37">SDL_CreateMutex</name><argument_list pos:start="33:38" pos:end="33:39">()</argument_list></call></expr>;</expr_stmt>

    <expr_stmt pos:start="35:5" pos:end="35:39"><expr pos:start="35:5" pos:end="35:38"><name pos:start="35:5" pos:end="35:18"><name pos:start="35:5" pos:end="35:6">is</name><operator pos:start="35:7" pos:end="35:8">-&gt;</operator><name pos:start="35:9" pos:end="35:18">subpq_cond</name></name>  <operator pos:start="35:21" pos:end="35:21">=</operator> <call pos:start="35:23" pos:end="35:38"><name pos:start="35:23" pos:end="35:36">SDL_CreateCond</name><argument_list pos:start="35:37" pos:end="35:38">()</argument_list></call></expr>;</expr_stmt>



    <expr_stmt pos:start="39:5" pos:end="39:35"><expr pos:start="39:5" pos:end="39:34"><call pos:start="39:5" pos:end="39:34"><name pos:start="39:5" pos:end="39:21">packet_queue_init</name><argument_list pos:start="39:22" pos:end="39:34">(<argument pos:start="39:23" pos:end="39:33"><expr pos:start="39:23" pos:end="39:33"><operator pos:start="39:23" pos:end="39:23">&amp;</operator><name pos:start="39:24" pos:end="39:33"><name pos:start="39:24" pos:end="39:25">is</name><operator pos:start="39:26" pos:end="39:27">-&gt;</operator><name pos:start="39:28" pos:end="39:33">videoq</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    <expr_stmt pos:start="41:5" pos:end="41:35"><expr pos:start="41:5" pos:end="41:34"><call pos:start="41:5" pos:end="41:34"><name pos:start="41:5" pos:end="41:21">packet_queue_init</name><argument_list pos:start="41:22" pos:end="41:34">(<argument pos:start="41:23" pos:end="41:33"><expr pos:start="41:23" pos:end="41:33"><operator pos:start="41:23" pos:end="41:23">&amp;</operator><name pos:start="41:24" pos:end="41:33"><name pos:start="41:24" pos:end="41:25">is</name><operator pos:start="41:26" pos:end="41:27">-&gt;</operator><name pos:start="41:28" pos:end="41:33">audioq</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    <expr_stmt pos:start="43:5" pos:end="43:38"><expr pos:start="43:5" pos:end="43:37"><call pos:start="43:5" pos:end="43:37"><name pos:start="43:5" pos:end="43:21">packet_queue_init</name><argument_list pos:start="43:22" pos:end="43:37">(<argument pos:start="43:23" pos:end="43:36"><expr pos:start="43:23" pos:end="43:36"><operator pos:start="43:23" pos:end="43:23">&amp;</operator><name pos:start="43:24" pos:end="43:36"><name pos:start="43:24" pos:end="43:25">is</name><operator pos:start="43:26" pos:end="43:27">-&gt;</operator><name pos:start="43:28" pos:end="43:36">subtitleq</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>



    <expr_stmt pos:start="47:5" pos:end="47:48"><expr pos:start="47:5" pos:end="47:47"><name pos:start="47:5" pos:end="47:28"><name pos:start="47:5" pos:end="47:6">is</name><operator pos:start="47:7" pos:end="47:8">-&gt;</operator><name pos:start="47:9" pos:end="47:28">continue_read_thread</name></name> <operator pos:start="47:30" pos:end="47:30">=</operator> <call pos:start="47:32" pos:end="47:47"><name pos:start="47:32" pos:end="47:45">SDL_CreateCond</name><argument_list pos:start="47:46" pos:end="47:47">()</argument_list></call></expr>;</expr_stmt>



    <comment type="line" pos:start="51:5" pos:end="51:67">//FIXME: use a cleaner way to signal obsolete external clock...</comment>

    <expr_stmt pos:start="53:5" pos:end="53:58"><expr pos:start="53:5" pos:end="53:57"><call pos:start="53:5" pos:end="53:57"><name pos:start="53:5" pos:end="53:29">update_external_clock_pts</name><argument_list pos:start="53:30" pos:end="53:57">(<argument pos:start="53:31" pos:end="53:32"><expr pos:start="53:31" pos:end="53:32"><name pos:start="53:31" pos:end="53:32">is</name></expr></argument>, <argument pos:start="53:35" pos:end="53:56"><expr pos:start="53:35" pos:end="53:56"><operator pos:start="53:35" pos:end="53:35">(</operator><name pos:start="53:36" pos:end="53:41">double</name><operator pos:start="53:42" pos:end="53:42">)</operator><name pos:start="53:43" pos:end="53:56">AV_NOPTS_VALUE</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    <expr_stmt pos:start="55:5" pos:end="55:41"><expr pos:start="55:5" pos:end="55:40"><call pos:start="55:5" pos:end="55:40"><name pos:start="55:5" pos:end="55:31">update_external_clock_speed</name><argument_list pos:start="55:32" pos:end="55:40">(<argument pos:start="55:33" pos:end="55:34"><expr pos:start="55:33" pos:end="55:34"><name pos:start="55:33" pos:end="55:34">is</name></expr></argument>, <argument pos:start="55:37" pos:end="55:39"><expr pos:start="55:37" pos:end="55:39"><literal type="number" pos:start="55:37" pos:end="55:39">1.0</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    <expr_stmt pos:start="57:5" pos:end="57:60"><expr pos:start="57:5" pos:end="57:59"><name pos:start="57:5" pos:end="57:31"><name pos:start="57:5" pos:end="57:6">is</name><operator pos:start="57:7" pos:end="57:8">-&gt;</operator><name pos:start="57:9" pos:end="57:31">audio_current_pts_drift</name></name> <operator pos:start="57:33" pos:end="57:33">=</operator> <operator pos:start="57:35" pos:end="57:35">-</operator><call pos:start="57:36" pos:end="57:47"><name pos:start="57:36" pos:end="57:45">av_gettime</name><argument_list pos:start="57:46" pos:end="57:47">()</argument_list></call> <operator pos:start="57:49" pos:end="57:49">/</operator> <literal type="number" pos:start="57:51" pos:end="57:59">1000000.0</literal></expr>;</expr_stmt>

    <expr_stmt pos:start="59:5" pos:end="59:62"><expr pos:start="59:5" pos:end="59:61"><name pos:start="59:5" pos:end="59:31"><name pos:start="59:5" pos:end="59:6">is</name><operator pos:start="59:7" pos:end="59:8">-&gt;</operator><name pos:start="59:9" pos:end="59:31">video_current_pts_drift</name></name> <operator pos:start="59:33" pos:end="59:33">=</operator> <name pos:start="59:35" pos:end="59:61"><name pos:start="59:35" pos:end="59:36">is</name><operator pos:start="59:37" pos:end="59:38">-&gt;</operator><name pos:start="59:39" pos:end="59:61">audio_current_pts_drift</name></name></expr>;</expr_stmt>

    <expr_stmt pos:start="61:5" pos:end="61:32"><expr pos:start="61:5" pos:end="61:31"><name pos:start="61:5" pos:end="61:26"><name pos:start="61:5" pos:end="61:6">is</name><operator pos:start="61:7" pos:end="61:8">-&gt;</operator><name pos:start="61:9" pos:end="61:26">audio_clock_serial</name></name> <operator pos:start="61:28" pos:end="61:28">=</operator> <operator pos:start="61:30" pos:end="61:30">-</operator><literal type="number" pos:start="61:31" pos:end="61:31">1</literal></expr>;</expr_stmt>

    <expr_stmt pos:start="63:5" pos:end="63:32"><expr pos:start="63:5" pos:end="63:31"><name pos:start="63:5" pos:end="63:26"><name pos:start="63:5" pos:end="63:6">is</name><operator pos:start="63:7" pos:end="63:8">-&gt;</operator><name pos:start="63:9" pos:end="63:26">video_clock_serial</name></name> <operator pos:start="63:28" pos:end="63:28">=</operator> <operator pos:start="63:30" pos:end="63:30">-</operator><literal type="number" pos:start="63:31" pos:end="63:31">1</literal></expr>;</expr_stmt>

    <expr_stmt pos:start="65:5" pos:end="65:36"><expr pos:start="65:5" pos:end="65:35"><name pos:start="65:5" pos:end="65:20"><name pos:start="65:5" pos:end="65:6">is</name><operator pos:start="65:7" pos:end="65:8">-&gt;</operator><name pos:start="65:9" pos:end="65:20">av_sync_type</name></name> <operator pos:start="65:22" pos:end="65:22">=</operator> <name pos:start="65:24" pos:end="65:35">av_sync_type</name></expr>;</expr_stmt>

    <expr_stmt pos:start="67:5" pos:end="67:57"><expr pos:start="67:5" pos:end="67:56"><name pos:start="67:5" pos:end="67:16"><name pos:start="67:5" pos:end="67:6">is</name><operator pos:start="67:7" pos:end="67:8">-&gt;</operator><name pos:start="67:9" pos:end="67:16">read_tid</name></name>     <operator pos:start="67:22" pos:end="67:22">=</operator> <call pos:start="67:24" pos:end="67:56"><name pos:start="67:24" pos:end="67:39">SDL_CreateThread</name><argument_list pos:start="67:40" pos:end="67:56">(<argument pos:start="67:41" pos:end="67:51"><expr pos:start="67:41" pos:end="67:51"><name pos:start="67:41" pos:end="67:51">read_thread</name></expr></argument>, <argument pos:start="67:54" pos:end="67:55"><expr pos:start="67:54" pos:end="67:55"><name pos:start="67:54" pos:end="67:55">is</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    <if_stmt pos:start="69:5" pos:end="75:5"><if pos:start="69:5" pos:end="75:5">if <condition pos:start="69:8" pos:end="69:22">(<expr pos:start="69:9" pos:end="69:21"><operator pos:start="69:9" pos:end="69:9">!</operator><name pos:start="69:10" pos:end="69:21"><name pos:start="69:10" pos:end="69:11">is</name><operator pos:start="69:12" pos:end="69:13">-&gt;</operator><name pos:start="69:14" pos:end="69:21">read_tid</name></name></expr>)</condition> <block pos:start="69:24" pos:end="75:5">{<block_content pos:start="71:9" pos:end="73:20">

        <expr_stmt pos:start="71:9" pos:end="71:20"><expr pos:start="71:9" pos:end="71:19"><call pos:start="71:9" pos:end="71:19"><name pos:start="71:9" pos:end="71:15">av_free</name><argument_list pos:start="71:16" pos:end="71:19">(<argument pos:start="71:17" pos:end="71:18"><expr pos:start="71:17" pos:end="71:18"><name pos:start="71:17" pos:end="71:18">is</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <return pos:start="73:9" pos:end="73:20">return <expr pos:start="73:16" pos:end="73:19"><name pos:start="73:16" pos:end="73:19">NULL</name></expr>;</return>

    </block_content>}</block></if></if_stmt>

    <return pos:start="77:5" pos:end="77:14">return <expr pos:start="77:12" pos:end="77:13"><name pos:start="77:12" pos:end="77:13">is</name></expr>;</return>

</block_content>}</block></function>
</unit>
