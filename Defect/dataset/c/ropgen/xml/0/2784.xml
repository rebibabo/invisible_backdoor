<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<unit xmlns="http://www.srcML.org/srcML/src" xmlns:cpp="http://www.srcML.org/srcML/cpp" xmlns:pos="http://www.srcML.org/srcML/position" revision="1.0.0" language="C" filename="dataset/ropgen/aug/0/2784.c" pos:tabs="8"><function pos:start="1:1" pos:end="341:1"><type pos:start="1:1" pos:end="1:25"><specifier pos:start="1:1" pos:end="1:6">static</specifier> <specifier pos:start="1:8" pos:end="1:13">inline</specifier> <name pos:start="1:15" pos:end="1:18">void</name> <name pos:start="1:20" pos:end="1:25">RENAME</name></type>(<name pos:start="1:27" pos:end="1:33">hyscale</name>)<parameter_list pos:start="1:35" pos:end="9:58">(<parameter pos:start="1:36" pos:end="1:48"><decl pos:start="1:36" pos:end="1:48"><type pos:start="1:36" pos:end="1:48"><name pos:start="1:36" pos:end="1:43">uint16_t</name> <modifier pos:start="1:45" pos:end="1:45">*</modifier></type><name pos:start="1:46" pos:end="1:48">dst</name></decl></parameter>, <parameter pos:start="1:51" pos:end="1:63"><decl pos:start="1:51" pos:end="1:63"><type pos:start="1:51" pos:end="1:63"><name pos:start="1:51" pos:end="1:54">long</name></type> <name pos:start="1:56" pos:end="1:63">dstWidth</name></decl></parameter>, <parameter pos:start="1:66" pos:end="1:77"><decl pos:start="1:66" pos:end="1:77"><type pos:start="1:66" pos:end="1:77"><name pos:start="1:66" pos:end="1:72">uint8_t</name> <modifier pos:start="1:74" pos:end="1:74">*</modifier></type><name pos:start="1:75" pos:end="1:77">src</name></decl></parameter>, <parameter pos:start="1:80" pos:end="1:87"><decl pos:start="1:80" pos:end="1:87"><type pos:start="1:80" pos:end="1:87"><name pos:start="1:80" pos:end="1:82">int</name></type> <name pos:start="1:84" pos:end="1:87">srcW</name></decl></parameter>, <parameter pos:start="1:90" pos:end="1:97"><decl pos:start="1:90" pos:end="1:97"><type pos:start="1:90" pos:end="1:97"><name pos:start="1:90" pos:end="1:92">int</name></type> <name pos:start="1:94" pos:end="1:97">xInc</name></decl></parameter>,

				   <parameter pos:start="3:36" pos:end="3:44"><decl pos:start="3:36" pos:end="3:44"><type pos:start="3:36" pos:end="3:44"><name pos:start="3:36" pos:end="3:38">int</name></type> <name pos:start="3:40" pos:end="3:44">flags</name></decl></parameter>, <parameter pos:start="3:47" pos:end="3:63"><decl pos:start="3:47" pos:end="3:63"><type pos:start="3:47" pos:end="3:63"><name pos:start="3:47" pos:end="3:49">int</name></type> <name pos:start="3:51" pos:end="3:63">canMMX2BeUsed</name></decl></parameter>, <parameter pos:start="3:66" pos:end="3:84"><decl pos:start="3:66" pos:end="3:84"><type pos:start="3:66" pos:end="3:84"><name pos:start="3:66" pos:end="3:72">int16_t</name> <modifier pos:start="3:74" pos:end="3:74">*</modifier></type><name pos:start="3:75" pos:end="3:84">hLumFilter</name></decl></parameter>,

				   <parameter pos:start="5:36" pos:end="5:57"><decl pos:start="5:36" pos:end="5:57"><type pos:start="5:36" pos:end="5:57"><name pos:start="5:36" pos:end="5:42">int16_t</name> <modifier pos:start="5:44" pos:end="5:44">*</modifier></type><name pos:start="5:45" pos:end="5:57">hLumFilterPos</name></decl></parameter>, <parameter pos:start="5:60" pos:end="5:77"><decl pos:start="5:60" pos:end="5:77"><type pos:start="5:60" pos:end="5:77"><name pos:start="5:60" pos:end="5:62">int</name></type> <name pos:start="5:64" pos:end="5:77">hLumFilterSize</name></decl></parameter>, <parameter pos:start="5:80" pos:end="5:95"><decl pos:start="5:80" pos:end="5:95"><type pos:start="5:80" pos:end="5:95"><name pos:start="5:80" pos:end="5:83">void</name> <modifier pos:start="5:85" pos:end="5:85">*</modifier></type><name pos:start="5:86" pos:end="5:95">funnyYCode</name></decl></parameter>, 

				   <parameter pos:start="7:36" pos:end="7:48"><decl pos:start="7:36" pos:end="7:48"><type pos:start="7:36" pos:end="7:48"><name pos:start="7:36" pos:end="7:38">int</name></type> <name pos:start="7:40" pos:end="7:48">srcFormat</name></decl></parameter>, <parameter pos:start="7:51" pos:end="7:75"><decl pos:start="7:51" pos:end="7:75"><type pos:start="7:51" pos:end="7:75"><name pos:start="7:51" pos:end="7:57">uint8_t</name> <modifier pos:start="7:59" pos:end="7:59">*</modifier></type><name pos:start="7:60" pos:end="7:75">formatConvBuffer</name></decl></parameter>, <parameter pos:start="7:78" pos:end="7:96"><decl pos:start="7:78" pos:end="7:96"><type pos:start="7:78" pos:end="7:96"><name pos:start="7:78" pos:end="7:84">int16_t</name> <modifier pos:start="7:86" pos:end="7:86">*</modifier></type><name pos:start="7:87" pos:end="7:96">mmx2Filter</name></decl></parameter>,

				   <parameter pos:start="9:36" pos:end="9:57"><decl pos:start="9:36" pos:end="9:57"><type pos:start="9:36" pos:end="9:57"><name pos:start="9:36" pos:end="9:42">int32_t</name> <modifier pos:start="9:44" pos:end="9:44">*</modifier></type><name pos:start="9:45" pos:end="9:57">mmx2FilterPos</name></decl></parameter>)</parameter_list>

<block pos:start="11:1" pos:end="341:1">{<block_content pos:start="13:5" pos:end="339:5">

    <if_stmt pos:start="13:5" pos:end="96:0"><if pos:start="13:5" pos:end="21:5">if<condition pos:start="13:7" pos:end="13:30">(<expr pos:start="13:8" pos:end="13:29"><name pos:start="13:8" pos:end="13:16">srcFormat</name><operator pos:start="13:17" pos:end="13:18">==</operator><name pos:start="13:19" pos:end="13:29">IMGFMT_YUY2</name></expr>)</condition>

    <block pos:start="15:5" pos:end="21:5">{<block_content pos:start="17:9" pos:end="19:30">

	<function_decl pos:start="17:9" pos:end="17:53"><type pos:start="17:9" pos:end="17:14"><name pos:start="17:9" pos:end="17:14">RENAME</name></type>(<name pos:start="17:16" pos:end="17:22">yuy2ToY</name>)<parameter_list pos:start="17:24" pos:end="17:52">(<parameter pos:start="17:25" pos:end="17:40"><decl pos:start="17:25" pos:end="17:40"><type pos:start="17:25" pos:end="17:40"><name pos:start="17:25" pos:end="17:40">formatConvBuffer</name></type></decl></parameter>, <parameter pos:start="17:43" pos:end="17:45"><decl pos:start="17:43" pos:end="17:45"><type pos:start="17:43" pos:end="17:45"><name pos:start="17:43" pos:end="17:45">src</name></type></decl></parameter>, <parameter pos:start="17:48" pos:end="17:51"><decl pos:start="17:48" pos:end="17:51"><type pos:start="17:48" pos:end="17:51"><name pos:start="17:48" pos:end="17:51">srcW</name></type></decl></parameter>)</parameter_list>;</function_decl>

	<expr_stmt pos:start="19:9" pos:end="19:30"><expr pos:start="19:9" pos:end="19:29"><name pos:start="19:9" pos:end="19:11">src</name><operator pos:start="19:12" pos:end="19:12">=</operator> <name pos:start="19:14" pos:end="19:29">formatConvBuffer</name></expr>;</expr_stmt>

    </block_content>}</block></if>

    <if type="elseif" pos:start="23:5" pos:end="31:5">else if<condition pos:start="23:12" pos:end="23:35">(<expr pos:start="23:13" pos:end="23:34"><name pos:start="23:13" pos:end="23:21">srcFormat</name><operator pos:start="23:22" pos:end="23:23">==</operator><name pos:start="23:24" pos:end="23:34">IMGFMT_UYVY</name></expr>)</condition>

    <block pos:start="25:5" pos:end="31:5">{<block_content pos:start="27:9" pos:end="29:30">

	<function_decl pos:start="27:9" pos:end="27:53"><type pos:start="27:9" pos:end="27:14"><name pos:start="27:9" pos:end="27:14">RENAME</name></type>(<name pos:start="27:16" pos:end="27:22">uyvyToY</name>)<parameter_list pos:start="27:24" pos:end="27:52">(<parameter pos:start="27:25" pos:end="27:40"><decl pos:start="27:25" pos:end="27:40"><type pos:start="27:25" pos:end="27:40"><name pos:start="27:25" pos:end="27:40">formatConvBuffer</name></type></decl></parameter>, <parameter pos:start="27:43" pos:end="27:45"><decl pos:start="27:43" pos:end="27:45"><type pos:start="27:43" pos:end="27:45"><name pos:start="27:43" pos:end="27:45">src</name></type></decl></parameter>, <parameter pos:start="27:48" pos:end="27:51"><decl pos:start="27:48" pos:end="27:51"><type pos:start="27:48" pos:end="27:51"><name pos:start="27:48" pos:end="27:51">srcW</name></type></decl></parameter>)</parameter_list>;</function_decl>

	<expr_stmt pos:start="29:9" pos:end="29:30"><expr pos:start="29:9" pos:end="29:29"><name pos:start="29:9" pos:end="29:11">src</name><operator pos:start="29:12" pos:end="29:12">=</operator> <name pos:start="29:14" pos:end="29:29">formatConvBuffer</name></expr>;</expr_stmt>

    </block_content>}</block></if>

    <if type="elseif" pos:start="33:5" pos:end="41:5">else if<condition pos:start="33:12" pos:end="33:36">(<expr pos:start="33:13" pos:end="33:35"><name pos:start="33:13" pos:end="33:21">srcFormat</name><operator pos:start="33:22" pos:end="33:23">==</operator><name pos:start="33:24" pos:end="33:35">IMGFMT_BGR32</name></expr>)</condition>

    <block pos:start="35:5" pos:end="41:5">{<block_content pos:start="37:9" pos:end="39:30">

	<function_decl pos:start="37:9" pos:end="37:54"><type pos:start="37:9" pos:end="37:14"><name pos:start="37:9" pos:end="37:14">RENAME</name></type>(<name pos:start="37:16" pos:end="37:23">bgr32ToY</name>)<parameter_list pos:start="37:25" pos:end="37:53">(<parameter pos:start="37:26" pos:end="37:41"><decl pos:start="37:26" pos:end="37:41"><type pos:start="37:26" pos:end="37:41"><name pos:start="37:26" pos:end="37:41">formatConvBuffer</name></type></decl></parameter>, <parameter pos:start="37:44" pos:end="37:46"><decl pos:start="37:44" pos:end="37:46"><type pos:start="37:44" pos:end="37:46"><name pos:start="37:44" pos:end="37:46">src</name></type></decl></parameter>, <parameter pos:start="37:49" pos:end="37:52"><decl pos:start="37:49" pos:end="37:52"><type pos:start="37:49" pos:end="37:52"><name pos:start="37:49" pos:end="37:52">srcW</name></type></decl></parameter>)</parameter_list>;</function_decl>

	<expr_stmt pos:start="39:9" pos:end="39:30"><expr pos:start="39:9" pos:end="39:29"><name pos:start="39:9" pos:end="39:11">src</name><operator pos:start="39:12" pos:end="39:12">=</operator> <name pos:start="39:14" pos:end="39:29">formatConvBuffer</name></expr>;</expr_stmt>

    </block_content>}</block></if>

    <if type="elseif" pos:start="43:5" pos:end="51:5">else if<condition pos:start="43:12" pos:end="43:36">(<expr pos:start="43:13" pos:end="43:35"><name pos:start="43:13" pos:end="43:21">srcFormat</name><operator pos:start="43:22" pos:end="43:23">==</operator><name pos:start="43:24" pos:end="43:35">IMGFMT_BGR24</name></expr>)</condition>

    <block pos:start="45:5" pos:end="51:5">{<block_content pos:start="47:9" pos:end="49:30">

	<function_decl pos:start="47:9" pos:end="47:54"><type pos:start="47:9" pos:end="47:14"><name pos:start="47:9" pos:end="47:14">RENAME</name></type>(<name pos:start="47:16" pos:end="47:23">bgr24ToY</name>)<parameter_list pos:start="47:25" pos:end="47:53">(<parameter pos:start="47:26" pos:end="47:41"><decl pos:start="47:26" pos:end="47:41"><type pos:start="47:26" pos:end="47:41"><name pos:start="47:26" pos:end="47:41">formatConvBuffer</name></type></decl></parameter>, <parameter pos:start="47:44" pos:end="47:46"><decl pos:start="47:44" pos:end="47:46"><type pos:start="47:44" pos:end="47:46"><name pos:start="47:44" pos:end="47:46">src</name></type></decl></parameter>, <parameter pos:start="47:49" pos:end="47:52"><decl pos:start="47:49" pos:end="47:52"><type pos:start="47:49" pos:end="47:52"><name pos:start="47:49" pos:end="47:52">srcW</name></type></decl></parameter>)</parameter_list>;</function_decl>

	<expr_stmt pos:start="49:9" pos:end="49:30"><expr pos:start="49:9" pos:end="49:29"><name pos:start="49:9" pos:end="49:11">src</name><operator pos:start="49:12" pos:end="49:12">=</operator> <name pos:start="49:14" pos:end="49:29">formatConvBuffer</name></expr>;</expr_stmt>

    </block_content>}</block></if>

    <if type="elseif" pos:start="53:5" pos:end="61:5">else if<condition pos:start="53:12" pos:end="53:36">(<expr pos:start="53:13" pos:end="53:35"><name pos:start="53:13" pos:end="53:21">srcFormat</name><operator pos:start="53:22" pos:end="53:23">==</operator><name pos:start="53:24" pos:end="53:35">IMGFMT_BGR16</name></expr>)</condition>

    <block pos:start="55:5" pos:end="61:5">{<block_content pos:start="57:9" pos:end="59:30">

	<function_decl pos:start="57:9" pos:end="57:54"><type pos:start="57:9" pos:end="57:14"><name pos:start="57:9" pos:end="57:14">RENAME</name></type>(<name pos:start="57:16" pos:end="57:23">bgr16ToY</name>)<parameter_list pos:start="57:25" pos:end="57:53">(<parameter pos:start="57:26" pos:end="57:41"><decl pos:start="57:26" pos:end="57:41"><type pos:start="57:26" pos:end="57:41"><name pos:start="57:26" pos:end="57:41">formatConvBuffer</name></type></decl></parameter>, <parameter pos:start="57:44" pos:end="57:46"><decl pos:start="57:44" pos:end="57:46"><type pos:start="57:44" pos:end="57:46"><name pos:start="57:44" pos:end="57:46">src</name></type></decl></parameter>, <parameter pos:start="57:49" pos:end="57:52"><decl pos:start="57:49" pos:end="57:52"><type pos:start="57:49" pos:end="57:52"><name pos:start="57:49" pos:end="57:52">srcW</name></type></decl></parameter>)</parameter_list>;</function_decl>

	<expr_stmt pos:start="59:9" pos:end="59:30"><expr pos:start="59:9" pos:end="59:29"><name pos:start="59:9" pos:end="59:11">src</name><operator pos:start="59:12" pos:end="59:12">=</operator> <name pos:start="59:14" pos:end="59:29">formatConvBuffer</name></expr>;</expr_stmt>

    </block_content>}</block></if>

    <if type="elseif" pos:start="63:5" pos:end="71:5">else if<condition pos:start="63:12" pos:end="63:36">(<expr pos:start="63:13" pos:end="63:35"><name pos:start="63:13" pos:end="63:21">srcFormat</name><operator pos:start="63:22" pos:end="63:23">==</operator><name pos:start="63:24" pos:end="63:35">IMGFMT_BGR15</name></expr>)</condition>

    <block pos:start="65:5" pos:end="71:5">{<block_content pos:start="67:9" pos:end="69:30">

	<function_decl pos:start="67:9" pos:end="67:54"><type pos:start="67:9" pos:end="67:14"><name pos:start="67:9" pos:end="67:14">RENAME</name></type>(<name pos:start="67:16" pos:end="67:23">bgr15ToY</name>)<parameter_list pos:start="67:25" pos:end="67:53">(<parameter pos:start="67:26" pos:end="67:41"><decl pos:start="67:26" pos:end="67:41"><type pos:start="67:26" pos:end="67:41"><name pos:start="67:26" pos:end="67:41">formatConvBuffer</name></type></decl></parameter>, <parameter pos:start="67:44" pos:end="67:46"><decl pos:start="67:44" pos:end="67:46"><type pos:start="67:44" pos:end="67:46"><name pos:start="67:44" pos:end="67:46">src</name></type></decl></parameter>, <parameter pos:start="67:49" pos:end="67:52"><decl pos:start="67:49" pos:end="67:52"><type pos:start="67:49" pos:end="67:52"><name pos:start="67:49" pos:end="67:52">srcW</name></type></decl></parameter>)</parameter_list>;</function_decl>

	<expr_stmt pos:start="69:9" pos:end="69:30"><expr pos:start="69:9" pos:end="69:29"><name pos:start="69:9" pos:end="69:11">src</name><operator pos:start="69:12" pos:end="69:12">=</operator> <name pos:start="69:14" pos:end="69:29">formatConvBuffer</name></expr>;</expr_stmt>

    </block_content>}</block></if>

    <if type="elseif" pos:start="73:5" pos:end="81:5">else if<condition pos:start="73:12" pos:end="73:36">(<expr pos:start="73:13" pos:end="73:35"><name pos:start="73:13" pos:end="73:21">srcFormat</name><operator pos:start="73:22" pos:end="73:23">==</operator><name pos:start="73:24" pos:end="73:35">IMGFMT_RGB32</name></expr>)</condition>

    <block pos:start="75:5" pos:end="81:5">{<block_content pos:start="77:9" pos:end="79:30">

	<function_decl pos:start="77:9" pos:end="77:54"><type pos:start="77:9" pos:end="77:14"><name pos:start="77:9" pos:end="77:14">RENAME</name></type>(<name pos:start="77:16" pos:end="77:23">rgb32ToY</name>)<parameter_list pos:start="77:25" pos:end="77:53">(<parameter pos:start="77:26" pos:end="77:41"><decl pos:start="77:26" pos:end="77:41"><type pos:start="77:26" pos:end="77:41"><name pos:start="77:26" pos:end="77:41">formatConvBuffer</name></type></decl></parameter>, <parameter pos:start="77:44" pos:end="77:46"><decl pos:start="77:44" pos:end="77:46"><type pos:start="77:44" pos:end="77:46"><name pos:start="77:44" pos:end="77:46">src</name></type></decl></parameter>, <parameter pos:start="77:49" pos:end="77:52"><decl pos:start="77:49" pos:end="77:52"><type pos:start="77:49" pos:end="77:52"><name pos:start="77:49" pos:end="77:52">srcW</name></type></decl></parameter>)</parameter_list>;</function_decl>

	<expr_stmt pos:start="79:9" pos:end="79:30"><expr pos:start="79:9" pos:end="79:29"><name pos:start="79:9" pos:end="79:11">src</name><operator pos:start="79:12" pos:end="79:12">=</operator> <name pos:start="79:14" pos:end="79:29">formatConvBuffer</name></expr>;</expr_stmt>

    </block_content>}</block></if>

    <if type="elseif" pos:start="83:5" pos:end="96:0">else if<condition pos:start="83:12" pos:end="83:36">(<expr pos:start="83:13" pos:end="83:35"><name pos:start="83:13" pos:end="83:21">srcFormat</name><operator pos:start="83:22" pos:end="83:23">==</operator><name pos:start="83:24" pos:end="83:35">IMGFMT_RGB24</name></expr>)</condition>

    <block pos:start="85:5" pos:end="96:0">{<block_content pos:start="87:9" pos:end="89:30">

	<function_decl pos:start="87:9" pos:end="87:54"><type pos:start="87:9" pos:end="87:14"><name pos:start="87:9" pos:end="87:14">RENAME</name></type>(<name pos:start="87:16" pos:end="87:23">rgb24ToY</name>)<parameter_list pos:start="87:25" pos:end="87:53">(<parameter pos:start="87:26" pos:end="87:41"><decl pos:start="87:26" pos:end="87:41"><type pos:start="87:26" pos:end="87:41"><name pos:start="87:26" pos:end="87:41">formatConvBuffer</name></type></decl></parameter>, <parameter pos:start="87:44" pos:end="87:46"><decl pos:start="87:44" pos:end="87:46"><type pos:start="87:44" pos:end="87:46"><name pos:start="87:44" pos:end="87:46">src</name></type></decl></parameter>, <parameter pos:start="87:49" pos:end="87:52"><decl pos:start="87:49" pos:end="87:52"><type pos:start="87:49" pos:end="87:52"><name pos:start="87:49" pos:end="87:52">srcW</name></type></decl></parameter>)</parameter_list>;</function_decl>

	<expr_stmt pos:start="89:9" pos:end="89:30"><expr pos:start="89:9" pos:end="89:29"><name pos:start="89:9" pos:end="89:11">src</name><operator pos:start="89:12" pos:end="89:12">=</operator> <name pos:start="89:14" pos:end="89:29">formatConvBuffer</name></expr>;</expr_stmt>

    </block_content>}</block></if></if_stmt>



<cpp:ifdef pos:start="95:1" pos:end="95:15">#<cpp:directive pos:start="95:2" pos:end="95:6">ifdef</cpp:directive> <name pos:start="95:8" pos:end="95:15">HAVE_MMX</name></cpp:ifdef>

	<comment type="line" pos:start="97:9" pos:end="97:92">// use the new MMX scaler if the mmx2 can't be used (its faster than the x86asm one)</comment>

    <if_stmt pos:start="99:5" pos:end="339:5"><if pos:start="99:5" pos:end="339:5">if<condition pos:start="99:7" pos:end="102:0">(<expr pos:start="99:8" pos:end="99:53"><operator pos:start="99:8" pos:end="99:8">!</operator><operator pos:start="99:9" pos:end="99:9">(</operator><name pos:start="99:10" pos:end="99:14">flags</name><operator pos:start="99:15" pos:end="99:15">&amp;</operator><name pos:start="99:16" pos:end="99:32">SWS_FAST_BILINEAR</name><operator pos:start="99:33" pos:end="99:33">)</operator> <operator pos:start="99:35" pos:end="99:36">||</operator> <operator pos:start="99:38" pos:end="99:38">(</operator><operator pos:start="99:39" pos:end="99:39">!</operator><name pos:start="99:40" pos:end="99:52">canMMX2BeUsed</name><operator pos:start="99:53" pos:end="99:53">)</operator></expr>)</condition><block type="pseudo" pos:start="103:5" pos:end="339:5"><block_content pos:start="103:5" pos:end="339:5">

<cpp:else pos:start="101:1" pos:end="101:5">#<cpp:directive pos:start="101:2" pos:end="101:5">else</cpp:directive></cpp:else>

    <if_stmt pos:start="103:5" pos:end="339:5"><if pos:start="103:5" pos:end="111:5">if<condition pos:start="103:7" pos:end="106:0">(<expr pos:start="103:8" pos:end="103:33"><operator pos:start="103:8" pos:end="103:8">!</operator><operator pos:start="103:9" pos:end="103:9">(</operator><name pos:start="103:10" pos:end="103:14">flags</name><operator pos:start="103:15" pos:end="103:15">&amp;</operator><name pos:start="103:16" pos:end="103:32">SWS_FAST_BILINEAR</name><operator pos:start="103:33" pos:end="103:33">)</operator></expr>)</condition>

<cpp:endif pos:start="105:1" pos:end="105:6">#<cpp:directive pos:start="105:2" pos:end="105:6">endif</cpp:directive></cpp:endif>

    <block pos:start="107:5" pos:end="111:5">{<block_content pos:start="109:9" pos:end="109:98">

    	<function_decl pos:start="109:9" pos:end="109:98"><type pos:start="109:9" pos:end="109:14"><name pos:start="109:9" pos:end="109:14">RENAME</name></type>(<name pos:start="109:16" pos:end="109:21">hScale</name>)<parameter_list pos:start="109:23" pos:end="109:97">(<parameter pos:start="109:24" pos:end="109:26"><decl pos:start="109:24" pos:end="109:26"><type pos:start="109:24" pos:end="109:26"><name pos:start="109:24" pos:end="109:26">dst</name></type></decl></parameter>, <parameter pos:start="109:29" pos:end="109:36"><decl pos:start="109:29" pos:end="109:36"><type pos:start="109:29" pos:end="109:36"><name pos:start="109:29" pos:end="109:36">dstWidth</name></type></decl></parameter>, <parameter pos:start="109:39" pos:end="109:41"><decl pos:start="109:39" pos:end="109:41"><type pos:start="109:39" pos:end="109:41"><name pos:start="109:39" pos:end="109:41">src</name></type></decl></parameter>, <parameter pos:start="109:44" pos:end="109:47"><decl pos:start="109:44" pos:end="109:47"><type pos:start="109:44" pos:end="109:47"><name pos:start="109:44" pos:end="109:47">srcW</name></type></decl></parameter>, <parameter pos:start="109:50" pos:end="109:53"><decl pos:start="109:50" pos:end="109:53"><type pos:start="109:50" pos:end="109:53"><name pos:start="109:50" pos:end="109:53">xInc</name></type></decl></parameter>, <parameter pos:start="109:56" pos:end="109:65"><decl pos:start="109:56" pos:end="109:65"><type pos:start="109:56" pos:end="109:65"><name pos:start="109:56" pos:end="109:65">hLumFilter</name></type></decl></parameter>, <parameter pos:start="109:68" pos:end="109:80"><decl pos:start="109:68" pos:end="109:80"><type pos:start="109:68" pos:end="109:80"><name pos:start="109:68" pos:end="109:80">hLumFilterPos</name></type></decl></parameter>, <parameter pos:start="109:83" pos:end="109:96"><decl pos:start="109:83" pos:end="109:96"><type pos:start="109:83" pos:end="109:96"><name pos:start="109:83" pos:end="109:96">hLumFilterSize</name></type></decl></parameter>)</parameter_list>;</function_decl>

    </block_content>}</block></if>

    <else pos:start="113:5" pos:end="339:5">else <comment type="line" pos:start="113:10" pos:end="113:50">// Fast Bilinear upscale / crap downscale</comment>

    <block pos:start="115:5" pos:end="339:5">{<block_content pos:start="121:9" pos:end="338:0">

<cpp:if pos:start="117:1" pos:end="117:45">#<cpp:directive pos:start="117:2" pos:end="117:3">if</cpp:directive> <expr pos:start="117:5" pos:end="117:45"><call pos:start="117:5" pos:end="117:21"><name pos:start="117:5" pos:end="117:11">defined</name><argument_list pos:start="117:12" pos:end="117:21">(<argument pos:start="117:13" pos:end="117:20"><expr pos:start="117:13" pos:end="117:20"><name pos:start="117:13" pos:end="117:20">ARCH_X86</name></expr></argument>)</argument_list></call> <operator pos:start="117:23" pos:end="117:24">||</operator> <call pos:start="117:26" pos:end="117:45"><name pos:start="117:26" pos:end="117:32">defined</name><argument_list pos:start="117:33" pos:end="117:45">(<argument pos:start="117:34" pos:end="117:44"><expr pos:start="117:34" pos:end="117:44"><name pos:start="117:34" pos:end="117:44">ARCH_X86_64</name></expr></argument>)</argument_list></call></expr></cpp:if>

<cpp:ifdef pos:start="119:1" pos:end="119:16">#<cpp:directive pos:start="119:2" pos:end="119:6">ifdef</cpp:directive> <name pos:start="119:8" pos:end="119:16">HAVE_MMX2</name></cpp:ifdef>

	<decl_stmt pos:start="121:9" pos:end="121:14"><decl pos:start="121:9" pos:end="121:13"><type pos:start="121:9" pos:end="121:11"><name pos:start="121:9" pos:end="121:11">int</name></type> <name pos:start="121:13" pos:end="121:13">i</name></decl>;</decl_stmt>

	<if_stmt pos:start="123:9" pos:end="318:0"><if pos:start="123:9" pos:end="219:9">if<condition pos:start="123:11" pos:end="123:25">(<expr pos:start="123:12" pos:end="123:24"><name pos:start="123:12" pos:end="123:24">canMMX2BeUsed</name></expr>)</condition>

	<block pos:start="125:9" pos:end="219:9">{<block_content pos:start="127:17" pos:end="217:87">

		<asm pos:start="127:17" pos:end="215:18">asm <specifier pos:start="127:21" pos:end="127:28">volatile</specifier>(

			"pxor %%mm7, %%mm7		\n\t"

			"mov %0, %%"REG_c"		\n\t"

			"mov %1, %%"REG_D"		\n\t"

			"mov %2, %%"REG_d"		\n\t"

			"mov %3, %%"REG_b"		\n\t"

			"xor %%"REG_a", %%"REG_a"	\n\t" <comment type="line" pos:start="139:63" pos:end="139:66">// i</comment>

			PREFETCH" (%%"REG_c")		\n\t"

			PREFETCH" 32(%%"REG_c")		\n\t"

			PREFETCH" 64(%%"REG_c")		\n\t"



<cpp:ifdef pos:start="149:1" pos:end="149:18">#<cpp:directive pos:start="149:2" pos:end="149:6">ifdef</cpp:directive> <name pos:start="149:8" pos:end="149:18">ARCH_X86_64</name></cpp:ifdef>



<cpp:define pos:start="153:1" pos:end="169:5">#<cpp:directive pos:start="153:2" pos:end="153:7">define</cpp:directive> <cpp:macro pos:start="153:9" pos:end="153:20"><name pos:start="153:9" pos:end="153:20">FUNNY_Y_CODE</name></cpp:macro> \

			<cpp:value pos:start="155:25" pos:end="169:5">"movl (%%"REG_b"), %%esi	\n\t"\

			"call *%4			\n\t"\

			"movl (%%"REG_b", %%"REG_a"), %%esi\n\t"\

			"add %%"REG_S", %%"REG_c"	\n\t"\

			"add %%"REG_a", %%"REG_D"	\n\t"\

			"xor %%"REG_a", %%"REG_a"	\n\t"\



#else</cpp:value></cpp:define>



<cpp:define pos:start="173:1" pos:end="187:6">#<cpp:directive pos:start="173:2" pos:end="173:7">define</cpp:directive> <cpp:macro pos:start="173:9" pos:end="173:20"><name pos:start="173:9" pos:end="173:20">FUNNY_Y_CODE</name></cpp:macro> \

			<cpp:value pos:start="175:25" pos:end="187:6">"movl (%%"REG_b"), %%esi	\n\t"\

			"call *%4			\n\t"\

			"addl (%%"REG_b", %%"REG_a"), %%"REG_c"\n\t"\

			"add %%"REG_a", %%"REG_D"	\n\t"\

			"xor %%"REG_a", %%"REG_a"	\n\t"\



#endif</cpp:value></cpp:define>



FUNNY_Y_CODE

FUNNY_Y_CODE

FUNNY_Y_CODE

FUNNY_Y_CODE

FUNNY_Y_CODE

FUNNY_Y_CODE

FUNNY_Y_CODE

FUNNY_Y_CODE



			:: "m" (src), "m" (dst), "m" (mmx2Filter), "m" (mmx2FilterPos),

			"m" (funnyYCode)

			: "%"REG_a, "%"REG_b, "%"REG_c, "%"REG_d, "%"REG_S, "%"REG_D

		);</asm>

		<for pos:start="217:17" pos:end="217:87">for<control pos:start="217:20" pos:end="217:61">(<init pos:start="217:21" pos:end="217:33"><expr pos:start="217:21" pos:end="217:32"><name pos:start="217:21" pos:end="217:21">i</name><operator pos:start="217:22" pos:end="217:22">=</operator><name pos:start="217:23" pos:end="217:30">dstWidth</name><operator pos:start="217:31" pos:end="217:31">-</operator><literal type="number" pos:start="217:32" pos:end="217:32">1</literal></expr>;</init> <condition pos:start="217:35" pos:end="217:56"><expr pos:start="217:35" pos:end="217:55"><operator pos:start="217:35" pos:end="217:35">(</operator><name pos:start="217:36" pos:end="217:36">i</name><operator pos:start="217:37" pos:end="217:37">*</operator><name pos:start="217:38" pos:end="217:41">xInc</name><operator pos:start="217:42" pos:end="217:42">)</operator><operator pos:start="217:43" pos:end="217:44">&gt;&gt;</operator><literal type="number" pos:start="217:45" pos:end="217:46">16</literal> <operator pos:start="217:48" pos:end="217:49">&gt;=</operator><name pos:start="217:50" pos:end="217:53">srcW</name><operator pos:start="217:54" pos:end="217:54">-</operator><literal type="number" pos:start="217:55" pos:end="217:55">1</literal></expr>;</condition> <incr pos:start="217:58" pos:end="217:60"><expr pos:start="217:58" pos:end="217:60"><name pos:start="217:58" pos:end="217:58">i</name><operator pos:start="217:59" pos:end="217:60">--</operator></expr></incr>)</control><block type="pseudo" pos:start="217:63" pos:end="217:87"><block_content pos:start="217:63" pos:end="217:87"> <expr_stmt pos:start="217:63" pos:end="217:87"><expr pos:start="217:63" pos:end="217:86"><name pos:start="217:63" pos:end="217:68"><name pos:start="217:63" pos:end="217:65">dst</name><index pos:start="217:66" pos:end="217:68">[<expr pos:start="217:67" pos:end="217:67"><name pos:start="217:67" pos:end="217:67">i</name></expr>]</index></name> <operator pos:start="217:70" pos:end="217:70">=</operator> <name pos:start="217:72" pos:end="217:82"><name pos:start="217:72" pos:end="217:74">src</name><index pos:start="217:75" pos:end="217:82">[<expr pos:start="217:76" pos:end="217:81"><name pos:start="217:76" pos:end="217:79">srcW</name><operator pos:start="217:80" pos:end="217:80">-</operator><literal type="number" pos:start="217:81" pos:end="217:81">1</literal></expr>]</index></name><operator pos:start="217:83" pos:end="217:83">*</operator><literal type="number" pos:start="217:84" pos:end="217:86">128</literal></expr>;</expr_stmt></block_content></block></for>

	</block_content>}</block></if>

	<else pos:start="221:9" pos:end="318:0">else

	<block pos:start="223:9" pos:end="318:0">{<block_content pos:start="227:9" pos:end="312:0">

<cpp:endif pos:start="225:1" pos:end="225:6">#<cpp:directive pos:start="225:2" pos:end="225:6">endif</cpp:directive></cpp:endif>

	<decl_stmt pos:start="227:9" pos:end="227:37"><decl pos:start="227:9" pos:end="227:36"><type pos:start="227:9" pos:end="227:12"><name pos:start="227:9" pos:end="227:12">long</name></type> <name pos:start="227:14" pos:end="227:23">xInc_shr16</name> <init pos:start="227:25" pos:end="227:36">= <expr pos:start="227:27" pos:end="227:36"><name pos:start="227:27" pos:end="227:30">xInc</name> <operator pos:start="227:32" pos:end="227:33">&gt;&gt;</operator> <literal type="number" pos:start="227:35" pos:end="227:36">16</literal></expr></init></decl>;</decl_stmt>

	<decl_stmt pos:start="229:9" pos:end="229:43"><decl pos:start="229:9" pos:end="229:42"><type pos:start="229:9" pos:end="229:16"><name pos:start="229:9" pos:end="229:16">uint16_t</name></type> <name pos:start="229:18" pos:end="229:26">xInc_mask</name> <init pos:start="229:28" pos:end="229:42">= <expr pos:start="229:30" pos:end="229:42"><name pos:start="229:30" pos:end="229:33">xInc</name> <operator pos:start="229:35" pos:end="229:35">&amp;</operator> <literal type="number" pos:start="229:37" pos:end="229:42">0xffff</literal></expr></init></decl>;</decl_stmt>

	<comment type="line" pos:start="231:9" pos:end="231:36">//NO MMX just normal asm ...</comment>

	<asm pos:start="233:9" pos:end="312:0">asm <specifier pos:start="233:13" pos:end="233:20">volatile</specifier>(

		"xor %%"REG_a", %%"REG_a"	\n\t" <comment type="line" pos:start="235:55" pos:end="235:58">// i</comment>

		"xor %%"REG_b", %%"REG_b"	\n\t" <comment type="line" pos:start="237:55" pos:end="237:59">// xx</comment>

		"xorl %%ecx, %%ecx		\n\t" <comment type="line" pos:start="239:55" pos:end="239:65">// 2*xalpha</comment>

		ASMALIGN16

		"1:				\n\t"

		"movzbl  (%0, %%"REG_b"), %%edi	\n\t" <comment type="line" pos:start="245:55" pos:end="245:63">//src[xx]</comment>

		"movzbl 1(%0, %%"REG_b"), %%esi	\n\t" <comment type="line" pos:start="247:55" pos:end="247:65">//src[xx+1]</comment>

		"subl %%edi, %%esi		\n\t" <comment type="line" pos:start="249:55" pos:end="249:75">//src[xx+1] - src[xx]</comment>

		"imull %%ecx, %%esi		\n\t" <comment type="line" pos:start="251:55" pos:end="251:86">//(src[xx+1] - src[xx])*2*xalpha</comment>

		"shll $16, %%edi		\n\t"

		"addl %%edi, %%esi		\n\t" <comment type="line" pos:start="255:55" pos:end="255:97">//src[xx+1]*2*xalpha + src[xx]*(1-2*xalpha)</comment>

		"mov %1, %%"REG_D"		\n\t"

		"shrl $9, %%esi			\n\t"

		"movw %%si, (%%"REG_D", %%"REG_a", 2)\n\t"

		"addw %4, %%cx			\n\t" <comment type="line" pos:start="263:55" pos:end="263:77">//2*xalpha += xInc&amp;0xFF</comment>

		"adc %3, %%"REG_b"		\n\t" <comment type="line" pos:start="265:55" pos:end="265:76">//xx+= xInc&gt;&gt;8 + carry</comment>



		"movzbl (%0, %%"REG_b"), %%edi	\n\t" <comment type="line" pos:start="269:55" pos:end="269:63">//src[xx]</comment>

		"movzbl 1(%0, %%"REG_b"), %%esi	\n\t" <comment type="line" pos:start="271:55" pos:end="271:65">//src[xx+1]</comment>

		"subl %%edi, %%esi		\n\t" <comment type="line" pos:start="273:55" pos:end="273:75">//src[xx+1] - src[xx]</comment>

		"imull %%ecx, %%esi		\n\t" <comment type="line" pos:start="275:55" pos:end="275:86">//(src[xx+1] - src[xx])*2*xalpha</comment>

		"shll $16, %%edi		\n\t"

		"addl %%edi, %%esi		\n\t" <comment type="line" pos:start="279:55" pos:end="279:97">//src[xx+1]*2*xalpha + src[xx]*(1-2*xalpha)</comment>

		"mov %1, %%"REG_D"		\n\t"

		"shrl $9, %%esi			\n\t"

		"movw %%si, 2(%%"REG_D", %%"REG_a", 2)\n\t"

		"addw %4, %%cx			\n\t" <comment type="line" pos:start="287:55" pos:end="287:77">//2*xalpha += xInc&amp;0xFF</comment>

		"adc %3, %%"REG_b"		\n\t" <comment type="line" pos:start="289:55" pos:end="289:76">//xx+= xInc&gt;&gt;8 + carry</comment>





		"add $2, %%"REG_a"		\n\t"

		"cmp %2, %%"REG_a"		\n\t"

		" jb 1b				\n\t"





		:: "r" (src), "m" (dst), "m" (dstWidth), "m" (xInc_shr16), "m" (xInc_mask)

		: "%"REG_a, "%"REG_b, "%ecx", "%"REG_D, "%esi"

		);</asm>

<cpp:ifdef pos:start="311:1" pos:end="311:16">#<cpp:directive pos:start="311:2" pos:end="311:6">ifdef</cpp:directive> <name pos:start="311:8" pos:end="311:16">HAVE_MMX2</name></cpp:ifdef>

	</block_content>}</block></else></if_stmt> <comment type="line" pos:start="313:11" pos:end="313:33">//if MMX2 can't be used</comment>

<cpp:endif pos:start="315:1" pos:end="315:6">#<cpp:directive pos:start="315:2" pos:end="315:6">endif</cpp:directive></cpp:endif>

<cpp:else pos:start="317:1" pos:end="317:5">#<cpp:directive pos:start="317:2" pos:end="317:5">else</cpp:directive></cpp:else>

	<decl_stmt pos:start="319:9" pos:end="319:14"><decl pos:start="319:9" pos:end="319:13"><type pos:start="319:9" pos:end="319:11"><name pos:start="319:9" pos:end="319:11">int</name></type> <name pos:start="319:13" pos:end="319:13">i</name></decl>;</decl_stmt>

	<decl_stmt pos:start="321:9" pos:end="321:28"><decl pos:start="321:9" pos:end="321:27"><type pos:start="321:9" pos:end="321:20"><name pos:start="321:9" pos:end="321:16">unsigned</name> <name pos:start="321:18" pos:end="321:20">int</name></type> <name pos:start="321:22" pos:end="321:25">xpos</name><init pos:start="321:26" pos:end="321:27">=<expr pos:start="321:27" pos:end="321:27"><literal type="number" pos:start="321:27" pos:end="321:27">0</literal></expr></init></decl>;</decl_stmt>

	<for pos:start="323:9" pos:end="338:0">for<control pos:start="323:12" pos:end="323:31">(<init pos:start="323:13" pos:end="323:16"><expr pos:start="323:13" pos:end="323:15"><name pos:start="323:13" pos:end="323:13">i</name><operator pos:start="323:14" pos:end="323:14">=</operator><literal type="number" pos:start="323:15" pos:end="323:15">0</literal></expr>;</init><condition pos:start="323:17" pos:end="323:27"><expr pos:start="323:17" pos:end="323:26"><name pos:start="323:17" pos:end="323:17">i</name><operator pos:start="323:18" pos:end="323:18">&lt;</operator><name pos:start="323:19" pos:end="323:26">dstWidth</name></expr>;</condition><incr pos:start="323:28" pos:end="323:30"><expr pos:start="323:28" pos:end="323:30"><name pos:start="323:28" pos:end="323:28">i</name><operator pos:start="323:29" pos:end="323:30">++</operator></expr></incr>)</control>

	<block pos:start="325:9" pos:end="338:0">{<block_content pos:start="327:17" pos:end="333:27">

		<decl_stmt pos:start="327:17" pos:end="327:50"><decl pos:start="327:17" pos:end="327:49"><type pos:start="327:17" pos:end="327:37"><specifier pos:start="327:17" pos:end="327:24">register</specifier> <name pos:start="327:26" pos:end="327:33">unsigned</name> <name pos:start="327:35" pos:end="327:37">int</name></type> <name pos:start="327:39" pos:end="327:40">xx</name><init pos:start="327:41" pos:end="327:49">=<expr pos:start="327:42" pos:end="327:49"><name pos:start="327:42" pos:end="327:45">xpos</name><operator pos:start="327:46" pos:end="327:47">&gt;&gt;</operator><literal type="number" pos:start="327:48" pos:end="327:49">16</literal></expr></init></decl>;</decl_stmt>

		<decl_stmt pos:start="329:17" pos:end="329:62"><decl pos:start="329:17" pos:end="329:61"><type pos:start="329:17" pos:end="329:37"><specifier pos:start="329:17" pos:end="329:24">register</specifier> <name pos:start="329:26" pos:end="329:33">unsigned</name> <name pos:start="329:35" pos:end="329:37">int</name></type> <name pos:start="329:39" pos:end="329:44">xalpha</name><init pos:start="329:45" pos:end="329:61">=<expr pos:start="329:46" pos:end="329:61"><operator pos:start="329:46" pos:end="329:46">(</operator><name pos:start="329:47" pos:end="329:50">xpos</name><operator pos:start="329:51" pos:end="329:51">&amp;</operator><literal type="number" pos:start="329:52" pos:end="329:57">0xFFFF</literal><operator pos:start="329:58" pos:end="329:58">)</operator><operator pos:start="329:59" pos:end="329:60">&gt;&gt;</operator><literal type="number" pos:start="329:61" pos:end="329:61">9</literal></expr></init></decl>;</decl_stmt>

		<expr_stmt pos:start="331:17" pos:end="331:68"><expr pos:start="331:17" pos:end="331:67"><name pos:start="331:17" pos:end="331:22"><name pos:start="331:17" pos:end="331:19">dst</name><index pos:start="331:20" pos:end="331:22">[<expr pos:start="331:21" pos:end="331:21"><name pos:start="331:21" pos:end="331:21">i</name></expr>]</index></name><operator pos:start="331:23" pos:end="331:23">=</operator> <operator pos:start="331:25" pos:end="331:25">(</operator><name pos:start="331:26" pos:end="331:32"><name pos:start="331:26" pos:end="331:28">src</name><index pos:start="331:29" pos:end="331:32">[<expr pos:start="331:30" pos:end="331:31"><name pos:start="331:30" pos:end="331:31">xx</name></expr>]</index></name><operator pos:start="331:33" pos:end="331:34">&lt;&lt;</operator><literal type="number" pos:start="331:35" pos:end="331:35">7</literal><operator pos:start="331:36" pos:end="331:36">)</operator> <operator pos:start="331:38" pos:end="331:38">+</operator> <operator pos:start="331:40" pos:end="331:40">(</operator><name pos:start="331:41" pos:end="331:49"><name pos:start="331:41" pos:end="331:43">src</name><index pos:start="331:44" pos:end="331:49">[<expr pos:start="331:45" pos:end="331:48"><name pos:start="331:45" pos:end="331:46">xx</name><operator pos:start="331:47" pos:end="331:47">+</operator><literal type="number" pos:start="331:48" pos:end="331:48">1</literal></expr>]</index></name> <operator pos:start="331:51" pos:end="331:51">-</operator> <name pos:start="331:53" pos:end="331:59"><name pos:start="331:53" pos:end="331:55">src</name><index pos:start="331:56" pos:end="331:59">[<expr pos:start="331:57" pos:end="331:58"><name pos:start="331:57" pos:end="331:58">xx</name></expr>]</index></name><operator pos:start="331:60" pos:end="331:60">)</operator><operator pos:start="331:61" pos:end="331:61">*</operator><name pos:start="331:62" pos:end="331:67">xalpha</name></expr>;</expr_stmt>

		<expr_stmt pos:start="333:17" pos:end="333:27"><expr pos:start="333:17" pos:end="333:26"><name pos:start="333:17" pos:end="333:20">xpos</name><operator pos:start="333:21" pos:end="333:22">+=</operator><name pos:start="333:23" pos:end="333:26">xInc</name></expr>;</expr_stmt>

	</block_content>}</block></for>

<cpp:endif pos:start="337:1" pos:end="337:6">#<cpp:directive pos:start="337:2" pos:end="337:6">endif</cpp:directive></cpp:endif>

    </block_content>}</block></else></if_stmt></block_content></block></if></if_stmt>

</block_content>}</block></function>
</unit>
