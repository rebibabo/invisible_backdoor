<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<unit xmlns="http://www.srcML.org/srcML/src" xmlns:cpp="http://www.srcML.org/srcML/cpp" xmlns:pos="http://www.srcML.org/srcML/position" revision="1.0.0" language="C" filename="dataset/ropgen/aug/0/25973.c" pos:tabs="8"><function pos:start="1:1" pos:end="299:1"><type pos:start="1:1" pos:end="1:11"><specifier pos:start="1:1" pos:end="1:6">static</specifier> <name pos:start="1:8" pos:end="1:11">void</name></type> <name pos:start="1:13" pos:end="1:32">pflash_cfi01_realize</name><parameter_list pos:start="1:33" pos:end="1:64">(<parameter pos:start="1:34" pos:end="1:49"><decl pos:start="1:34" pos:end="1:49"><type pos:start="1:34" pos:end="1:49"><name pos:start="1:34" pos:end="1:44">DeviceState</name> <modifier pos:start="1:46" pos:end="1:46">*</modifier></type><name pos:start="1:47" pos:end="1:49">dev</name></decl></parameter>, <parameter pos:start="1:52" pos:end="1:63"><decl pos:start="1:52" pos:end="1:63"><type pos:start="1:52" pos:end="1:63"><name pos:start="1:52" pos:end="1:56">Error</name> <modifier pos:start="1:58" pos:end="1:58">*</modifier><modifier pos:start="1:59" pos:end="1:59">*</modifier></type><name pos:start="1:60" pos:end="1:63">errp</name></decl></parameter>)</parameter_list>

<block pos:start="3:1" pos:end="299:1">{<block_content pos:start="5:5" pos:end="297:32">

    <decl_stmt pos:start="5:5" pos:end="5:38"><decl pos:start="5:5" pos:end="5:37"><type pos:start="5:5" pos:end="5:14"><name pos:start="5:5" pos:end="5:12">pflash_t</name> <modifier pos:start="5:14" pos:end="5:14">*</modifier></type><name pos:start="5:15" pos:end="5:17">pfl</name> <init pos:start="5:19" pos:end="5:37">= <expr pos:start="5:21" pos:end="5:37"><call pos:start="5:21" pos:end="5:37"><name pos:start="5:21" pos:end="5:32">CFI_PFLASH01</name><argument_list pos:start="5:33" pos:end="5:37">(<argument pos:start="5:34" pos:end="5:36"><expr pos:start="5:34" pos:end="5:36"><name pos:start="5:34" pos:end="5:36">dev</name></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>

    <decl_stmt pos:start="7:5" pos:end="7:23"><decl pos:start="7:5" pos:end="7:22"><type pos:start="7:5" pos:end="7:12"><name pos:start="7:5" pos:end="7:12">uint64_t</name></type> <name pos:start="7:14" pos:end="7:22">total_len</name></decl>;</decl_stmt>

    <decl_stmt pos:start="9:5" pos:end="9:12"><decl pos:start="9:5" pos:end="9:11"><type pos:start="9:5" pos:end="9:7"><name pos:start="9:5" pos:end="9:7">int</name></type> <name pos:start="9:9" pos:end="9:11">ret</name></decl>;</decl_stmt>

    <decl_stmt pos:start="11:5" pos:end="11:43"><decl pos:start="11:5" pos:end="11:30"><type pos:start="11:5" pos:end="11:12"><name pos:start="11:5" pos:end="11:12">uint64_t</name></type> <name pos:start="11:14" pos:end="11:30">blocks_per_device</name></decl>, <decl pos:start="11:33" pos:end="11:42"><type ref="prev" pos:start="11:5" pos:end="11:12"/><name pos:start="11:33" pos:end="11:42">device_len</name></decl>;</decl_stmt>

    <decl_stmt pos:start="13:5" pos:end="13:20"><decl pos:start="13:5" pos:end="13:19"><type pos:start="13:5" pos:end="13:7"><name pos:start="13:5" pos:end="13:7">int</name></type> <name pos:start="13:9" pos:end="13:19">num_devices</name></decl>;</decl_stmt>

    <decl_stmt pos:start="15:5" pos:end="15:28"><decl pos:start="15:5" pos:end="15:27"><type pos:start="15:5" pos:end="15:11"><name pos:start="15:5" pos:end="15:9">Error</name> <modifier pos:start="15:11" pos:end="15:11">*</modifier></type><name pos:start="15:12" pos:end="15:20">local_err</name> <init pos:start="15:22" pos:end="15:27">= <expr pos:start="15:24" pos:end="15:27"><name pos:start="15:24" pos:end="15:27">NULL</name></expr></init></decl>;</decl_stmt>



    <expr_stmt pos:start="19:5" pos:end="19:48"><expr pos:start="19:5" pos:end="19:47"><name pos:start="19:5" pos:end="19:13">total_len</name> <operator pos:start="19:15" pos:end="19:15">=</operator> <name pos:start="19:17" pos:end="19:31"><name pos:start="19:17" pos:end="19:19">pfl</name><operator pos:start="19:20" pos:end="19:21">-&gt;</operator><name pos:start="19:22" pos:end="19:31">sector_len</name></name> <operator pos:start="19:33" pos:end="19:33">*</operator> <name pos:start="19:35" pos:end="19:47"><name pos:start="19:35" pos:end="19:37">pfl</name><operator pos:start="19:38" pos:end="19:39">-&gt;</operator><name pos:start="19:40" pos:end="19:47">nb_blocs</name></name></expr>;</expr_stmt>



    <comment type="block" pos:start="23:5" pos:end="27:7">/* These are only used to expose the parameters of each device

     * in the cfi_table[].

     */</comment>

    <expr_stmt pos:start="29:5" pos:end="29:80"><expr pos:start="29:5" pos:end="29:79"><name pos:start="29:5" pos:end="29:15">num_devices</name> <operator pos:start="29:17" pos:end="29:17">=</operator> <ternary pos:start="29:19" pos:end="29:79"><condition pos:start="29:19" pos:end="29:37"><expr pos:start="29:19" pos:end="29:35"><name pos:start="29:19" pos:end="29:35"><name pos:start="29:19" pos:end="29:21">pfl</name><operator pos:start="29:22" pos:end="29:23">-&gt;</operator><name pos:start="29:24" pos:end="29:35">device_width</name></name></expr> ?</condition><then pos:start="29:39" pos:end="29:75"> <expr pos:start="29:39" pos:end="29:75"><operator pos:start="29:39" pos:end="29:39">(</operator><name pos:start="29:40" pos:end="29:54"><name pos:start="29:40" pos:end="29:42">pfl</name><operator pos:start="29:43" pos:end="29:44">-&gt;</operator><name pos:start="29:45" pos:end="29:54">bank_width</name></name> <operator pos:start="29:56" pos:end="29:56">/</operator> <name pos:start="29:58" pos:end="29:74"><name pos:start="29:58" pos:end="29:60">pfl</name><operator pos:start="29:61" pos:end="29:62">-&gt;</operator><name pos:start="29:63" pos:end="29:74">device_width</name></name><operator pos:start="29:75" pos:end="29:75">)</operator></expr> </then><else pos:start="29:77" pos:end="29:79">: <expr pos:start="29:79" pos:end="29:79"><literal type="number" pos:start="29:79" pos:end="29:79">1</literal></expr></else></ternary></expr>;</expr_stmt>

    <expr_stmt pos:start="31:5" pos:end="31:52"><expr pos:start="31:5" pos:end="31:51"><name pos:start="31:5" pos:end="31:21">blocks_per_device</name> <operator pos:start="31:23" pos:end="31:23">=</operator> <name pos:start="31:25" pos:end="31:37"><name pos:start="31:25" pos:end="31:27">pfl</name><operator pos:start="31:28" pos:end="31:29">-&gt;</operator><name pos:start="31:30" pos:end="31:37">nb_blocs</name></name> <operator pos:start="31:39" pos:end="31:39">/</operator> <name pos:start="31:41" pos:end="31:51">num_devices</name></expr>;</expr_stmt>

    <expr_stmt pos:start="33:5" pos:end="48:0"><expr pos:start="33:5" pos:end="33:52"><name pos:start="33:5" pos:end="33:14">device_len</name> <operator pos:start="33:16" pos:end="33:16">=</operator> <name pos:start="33:18" pos:end="33:32"><name pos:start="33:18" pos:end="33:20">pfl</name><operator pos:start="33:21" pos:end="33:22">-&gt;</operator><name pos:start="33:23" pos:end="33:32">sector_len</name></name> <operator pos:start="33:34" pos:end="33:34">*</operator> <name pos:start="33:36" pos:end="33:52">blocks_per_device</name></expr>;</expr_stmt>



    <comment type="block" pos:start="37:5" pos:end="37:26">/* XXX: to be fixed */</comment>

<cpp:if pos:start="39:1" pos:end="39:5">#<cpp:directive pos:start="39:2" pos:end="39:3">if</cpp:directive> <expr pos:start="39:5" pos:end="39:5"><literal type="number" pos:start="39:5" pos:end="39:5">0</literal></expr></cpp:if>

    if (total_len != (8 * 1024 * 1024) &amp;&amp; total_len != (16 * 1024 * 1024) &amp;&amp;

        total_len != (32 * 1024 * 1024) &amp;&amp; total_len != (64 * 1024 * 1024))

        return NULL;

<cpp:endif pos:start="47:1" pos:end="47:6">#<cpp:directive pos:start="47:2" pos:end="47:6">endif</cpp:directive></cpp:endif>



    <expr_stmt pos:start="51:5" pos:end="57:42"><expr pos:start="51:5" pos:end="57:41"><call pos:start="51:5" pos:end="57:41"><name pos:start="51:5" pos:end="51:33">memory_region_init_rom_device</name><argument_list pos:start="51:34" pos:end="57:41">(

        <argument pos:start="53:9" pos:end="53:17"><expr pos:start="53:9" pos:end="53:17"><operator pos:start="53:9" pos:end="53:9">&amp;</operator><name pos:start="53:10" pos:end="53:17"><name pos:start="53:10" pos:end="53:12">pfl</name><operator pos:start="53:13" pos:end="53:14">-&gt;</operator><name pos:start="53:15" pos:end="53:17">mem</name></name></expr></argument>, <argument pos:start="53:20" pos:end="53:30"><expr pos:start="53:20" pos:end="53:30"><call pos:start="53:20" pos:end="53:30"><name pos:start="53:20" pos:end="53:25">OBJECT</name><argument_list pos:start="53:26" pos:end="53:30">(<argument pos:start="53:27" pos:end="53:29"><expr pos:start="53:27" pos:end="53:29"><name pos:start="53:27" pos:end="53:29">dev</name></expr></argument>)</argument_list></call></expr></argument>,

        <argument pos:start="55:9" pos:end="55:61"><expr pos:start="55:9" pos:end="55:61"><ternary pos:start="55:9" pos:end="55:61"><condition pos:start="55:9" pos:end="55:17"><expr pos:start="55:9" pos:end="55:15"><name pos:start="55:9" pos:end="55:15"><name pos:start="55:9" pos:end="55:11">pfl</name><operator pos:start="55:12" pos:end="55:13">-&gt;</operator><name pos:start="55:14" pos:end="55:15">be</name></name></expr> ?</condition><then pos:start="55:19" pos:end="55:38"> <expr pos:start="55:19" pos:end="55:38"><operator pos:start="55:19" pos:end="55:19">&amp;</operator><name pos:start="55:20" pos:end="55:38">pflash_cfi01_ops_be</name></expr> </then><else pos:start="55:40" pos:end="55:61">: <expr pos:start="55:42" pos:end="55:61"><operator pos:start="55:42" pos:end="55:42">&amp;</operator><name pos:start="55:43" pos:end="55:61">pflash_cfi01_ops_le</name></expr></else></ternary></expr></argument>, <argument pos:start="55:64" pos:end="55:66"><expr pos:start="55:64" pos:end="55:66"><name pos:start="55:64" pos:end="55:66">pfl</name></expr></argument>,

        <argument pos:start="57:9" pos:end="57:17"><expr pos:start="57:9" pos:end="57:17"><name pos:start="57:9" pos:end="57:17"><name pos:start="57:9" pos:end="57:11">pfl</name><operator pos:start="57:12" pos:end="57:13">-&gt;</operator><name pos:start="57:14" pos:end="57:17">name</name></name></expr></argument>, <argument pos:start="57:20" pos:end="57:28"><expr pos:start="57:20" pos:end="57:28"><name pos:start="57:20" pos:end="57:28">total_len</name></expr></argument>, <argument pos:start="57:31" pos:end="57:40"><expr pos:start="57:31" pos:end="57:40"><operator pos:start="57:31" pos:end="57:31">&amp;</operator><name pos:start="57:32" pos:end="57:40">local_err</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    <if_stmt pos:start="59:5" pos:end="65:5"><if pos:start="59:5" pos:end="65:5">if <condition pos:start="59:8" pos:end="59:18">(<expr pos:start="59:9" pos:end="59:17"><name pos:start="59:9" pos:end="59:17">local_err</name></expr>)</condition> <block pos:start="59:20" pos:end="65:5">{<block_content pos:start="61:9" pos:end="63:15">

        <expr_stmt pos:start="61:9" pos:end="61:41"><expr pos:start="61:9" pos:end="61:40"><call pos:start="61:9" pos:end="61:40"><name pos:start="61:9" pos:end="61:23">error_propagate</name><argument_list pos:start="61:24" pos:end="61:40">(<argument pos:start="61:25" pos:end="61:28"><expr pos:start="61:25" pos:end="61:28"><name pos:start="61:25" pos:end="61:28">errp</name></expr></argument>, <argument pos:start="61:31" pos:end="61:39"><expr pos:start="61:31" pos:end="61:39"><name pos:start="61:31" pos:end="61:39">local_err</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <return pos:start="63:9" pos:end="63:15">return;</return>

    </block_content>}</block></if></if_stmt>



    <expr_stmt pos:start="69:5" pos:end="69:49"><expr pos:start="69:5" pos:end="69:48"><call pos:start="69:5" pos:end="69:48"><name pos:start="69:5" pos:end="69:24">vmstate_register_ram</name><argument_list pos:start="69:25" pos:end="69:48">(<argument pos:start="69:26" pos:end="69:34"><expr pos:start="69:26" pos:end="69:34"><operator pos:start="69:26" pos:end="69:26">&amp;</operator><name pos:start="69:27" pos:end="69:34"><name pos:start="69:27" pos:end="69:29">pfl</name><operator pos:start="69:30" pos:end="69:31">-&gt;</operator><name pos:start="69:32" pos:end="69:34">mem</name></name></expr></argument>, <argument pos:start="69:37" pos:end="69:47"><expr pos:start="69:37" pos:end="69:47"><call pos:start="69:37" pos:end="69:47"><name pos:start="69:37" pos:end="69:42">DEVICE</name><argument_list pos:start="69:43" pos:end="69:47">(<argument pos:start="69:44" pos:end="69:46"><expr pos:start="69:44" pos:end="69:46"><name pos:start="69:44" pos:end="69:46">pfl</name></expr></argument>)</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    <expr_stmt pos:start="71:5" pos:end="71:56"><expr pos:start="71:5" pos:end="71:55"><name pos:start="71:5" pos:end="71:16"><name pos:start="71:5" pos:end="71:7">pfl</name><operator pos:start="71:8" pos:end="71:9">-&gt;</operator><name pos:start="71:10" pos:end="71:16">storage</name></name> <operator pos:start="71:18" pos:end="71:18">=</operator> <call pos:start="71:20" pos:end="71:55"><name pos:start="71:20" pos:end="71:44">memory_region_get_ram_ptr</name><argument_list pos:start="71:45" pos:end="71:55">(<argument pos:start="71:46" pos:end="71:54"><expr pos:start="71:46" pos:end="71:54"><operator pos:start="71:46" pos:end="71:46">&amp;</operator><name pos:start="71:47" pos:end="71:54"><name pos:start="71:47" pos:end="71:49">pfl</name><operator pos:start="71:50" pos:end="71:51">-&gt;</operator><name pos:start="71:52" pos:end="71:54">mem</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    <expr_stmt pos:start="73:5" pos:end="73:53"><expr pos:start="73:5" pos:end="73:52"><call pos:start="73:5" pos:end="73:52"><name pos:start="73:5" pos:end="73:20">sysbus_init_mmio</name><argument_list pos:start="73:21" pos:end="73:52">(<argument pos:start="73:22" pos:end="73:40"><expr pos:start="73:22" pos:end="73:40"><call pos:start="73:22" pos:end="73:40"><name pos:start="73:22" pos:end="73:35">SYS_BUS_DEVICE</name><argument_list pos:start="73:36" pos:end="73:40">(<argument pos:start="73:37" pos:end="73:39"><expr pos:start="73:37" pos:end="73:39"><name pos:start="73:37" pos:end="73:39">dev</name></expr></argument>)</argument_list></call></expr></argument>, <argument pos:start="73:43" pos:end="73:51"><expr pos:start="73:43" pos:end="73:51"><operator pos:start="73:43" pos:end="73:43">&amp;</operator><name pos:start="73:44" pos:end="73:51"><name pos:start="73:44" pos:end="73:46">pfl</name><operator pos:start="73:47" pos:end="73:48">-&gt;</operator><name pos:start="73:49" pos:end="73:51">mem</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>



    <if_stmt pos:start="77:5" pos:end="95:5"><if pos:start="77:5" pos:end="95:5">if <condition pos:start="77:8" pos:end="77:16">(<expr pos:start="77:9" pos:end="77:15"><name pos:start="77:9" pos:end="77:15"><name pos:start="77:9" pos:end="77:11">pfl</name><operator pos:start="77:12" pos:end="77:13">-&gt;</operator><name pos:start="77:14" pos:end="77:15">bs</name></name></expr>)</condition> <block pos:start="77:18" pos:end="95:5">{<block_content pos:start="81:9" pos:end="93:9">

        <comment type="block" pos:start="79:9" pos:end="79:44">/* read the initial flash content */</comment>

        <expr_stmt pos:start="81:9" pos:end="81:66"><expr pos:start="81:9" pos:end="81:65"><name pos:start="81:9" pos:end="81:11">ret</name> <operator pos:start="81:13" pos:end="81:13">=</operator> <call pos:start="81:15" pos:end="81:65"><name pos:start="81:15" pos:end="81:23">bdrv_read</name><argument_list pos:start="81:24" pos:end="81:65">(<argument pos:start="81:25" pos:end="81:31"><expr pos:start="81:25" pos:end="81:31"><name pos:start="81:25" pos:end="81:31"><name pos:start="81:25" pos:end="81:27">pfl</name><operator pos:start="81:28" pos:end="81:29">-&gt;</operator><name pos:start="81:30" pos:end="81:31">bs</name></name></expr></argument>, <argument pos:start="81:34" pos:end="81:34"><expr pos:start="81:34" pos:end="81:34"><literal type="number" pos:start="81:34" pos:end="81:34">0</literal></expr></argument>, <argument pos:start="81:37" pos:end="81:48"><expr pos:start="81:37" pos:end="81:48"><name pos:start="81:37" pos:end="81:48"><name pos:start="81:37" pos:end="81:39">pfl</name><operator pos:start="81:40" pos:end="81:41">-&gt;</operator><name pos:start="81:42" pos:end="81:48">storage</name></name></expr></argument>, <argument pos:start="81:51" pos:end="81:64"><expr pos:start="81:51" pos:end="81:64"><name pos:start="81:51" pos:end="81:59">total_len</name> <operator pos:start="81:61" pos:end="81:62">&gt;&gt;</operator> <literal type="number" pos:start="81:64" pos:end="81:64">9</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>



        <if_stmt pos:start="85:9" pos:end="93:9"><if pos:start="85:9" pos:end="93:9">if <condition pos:start="85:12" pos:end="85:20">(<expr pos:start="85:13" pos:end="85:19"><name pos:start="85:13" pos:end="85:15">ret</name> <operator pos:start="85:17" pos:end="85:17">&lt;</operator> <literal type="number" pos:start="85:19" pos:end="85:19">0</literal></expr>)</condition> <block pos:start="85:22" pos:end="93:9">{<block_content pos:start="87:13" pos:end="91:19">

            <expr_stmt pos:start="87:13" pos:end="87:59"><expr pos:start="87:13" pos:end="87:58"><call pos:start="87:13" pos:end="87:58"><name pos:start="87:13" pos:end="87:34">vmstate_unregister_ram</name><argument_list pos:start="87:35" pos:end="87:58">(<argument pos:start="87:36" pos:end="87:44"><expr pos:start="87:36" pos:end="87:44"><operator pos:start="87:36" pos:end="87:36">&amp;</operator><name pos:start="87:37" pos:end="87:44"><name pos:start="87:37" pos:end="87:39">pfl</name><operator pos:start="87:40" pos:end="87:41">-&gt;</operator><name pos:start="87:42" pos:end="87:44">mem</name></name></expr></argument>, <argument pos:start="87:47" pos:end="87:57"><expr pos:start="87:47" pos:end="87:57"><call pos:start="87:47" pos:end="87:57"><name pos:start="87:47" pos:end="87:52">DEVICE</name><argument_list pos:start="87:53" pos:end="87:57">(<argument pos:start="87:54" pos:end="87:56"><expr pos:start="87:54" pos:end="87:56"><name pos:start="87:54" pos:end="87:56">pfl</name></expr></argument>)</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>

            <expr_stmt pos:start="89:13" pos:end="89:73"><expr pos:start="89:13" pos:end="89:72"><call pos:start="89:13" pos:end="89:72"><name pos:start="89:13" pos:end="89:22">error_setg</name><argument_list pos:start="89:23" pos:end="89:72">(<argument pos:start="89:24" pos:end="89:27"><expr pos:start="89:24" pos:end="89:27"><name pos:start="89:24" pos:end="89:27">errp</name></expr></argument>, <argument pos:start="89:30" pos:end="89:71"><expr pos:start="89:30" pos:end="89:71"><literal type="string" pos:start="89:30" pos:end="89:71">"failed to read the initial flash content"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

            <return pos:start="91:13" pos:end="91:19">return;</return>

        </block_content>}</block></if></if_stmt>

    </block_content>}</block></if></if_stmt>



    <if_stmt pos:start="99:5" pos:end="107:5"><if pos:start="99:5" pos:end="103:5">if <condition pos:start="99:8" pos:end="99:16">(<expr pos:start="99:9" pos:end="99:15"><name pos:start="99:9" pos:end="99:15"><name pos:start="99:9" pos:end="99:11">pfl</name><operator pos:start="99:12" pos:end="99:13">-&gt;</operator><name pos:start="99:14" pos:end="99:15">bs</name></name></expr>)</condition> <block pos:start="99:18" pos:end="103:5">{<block_content pos:start="101:9" pos:end="101:45">

        <expr_stmt pos:start="101:9" pos:end="101:45"><expr pos:start="101:9" pos:end="101:44"><name pos:start="101:9" pos:end="101:15"><name pos:start="101:9" pos:end="101:11">pfl</name><operator pos:start="101:12" pos:end="101:13">-&gt;</operator><name pos:start="101:14" pos:end="101:15">ro</name></name> <operator pos:start="101:17" pos:end="101:17">=</operator> <call pos:start="101:19" pos:end="101:44"><name pos:start="101:19" pos:end="101:35">bdrv_is_read_only</name><argument_list pos:start="101:36" pos:end="101:44">(<argument pos:start="101:37" pos:end="101:43"><expr pos:start="101:37" pos:end="101:43"><name pos:start="101:37" pos:end="101:43"><name pos:start="101:37" pos:end="101:39">pfl</name><operator pos:start="101:40" pos:end="101:41">-&gt;</operator><name pos:start="101:42" pos:end="101:43">bs</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    </block_content>}</block></if> <else pos:start="103:7" pos:end="107:5">else <block pos:start="103:12" pos:end="107:5">{<block_content pos:start="105:9" pos:end="105:20">

        <expr_stmt pos:start="105:9" pos:end="105:20"><expr pos:start="105:9" pos:end="105:19"><name pos:start="105:9" pos:end="105:15"><name pos:start="105:9" pos:end="105:11">pfl</name><operator pos:start="105:12" pos:end="105:13">-&gt;</operator><name pos:start="105:14" pos:end="105:15">ro</name></name> <operator pos:start="105:17" pos:end="105:17">=</operator> <literal type="number" pos:start="105:19" pos:end="105:19">0</literal></expr>;</expr_stmt>

    </block_content>}</block></else></if_stmt>



    <comment type="block" pos:start="111:5" pos:end="115:7">/* Default to devices being used at their maximum device width. This was

     * assumed before the device_width support was added.

     */</comment>

    <if_stmt pos:start="117:5" pos:end="121:5"><if pos:start="117:5" pos:end="121:5">if <condition pos:start="117:8" pos:end="117:31">(<expr pos:start="117:9" pos:end="117:30"><operator pos:start="117:9" pos:end="117:9">!</operator><name pos:start="117:10" pos:end="117:30"><name pos:start="117:10" pos:end="117:12">pfl</name><operator pos:start="117:13" pos:end="117:14">-&gt;</operator><name pos:start="117:15" pos:end="117:30">max_device_width</name></name></expr>)</condition> <block pos:start="117:33" pos:end="121:5">{<block_content pos:start="119:9" pos:end="119:50">

        <expr_stmt pos:start="119:9" pos:end="119:50"><expr pos:start="119:9" pos:end="119:49"><name pos:start="119:9" pos:end="119:29"><name pos:start="119:9" pos:end="119:11">pfl</name><operator pos:start="119:12" pos:end="119:13">-&gt;</operator><name pos:start="119:14" pos:end="119:29">max_device_width</name></name> <operator pos:start="119:31" pos:end="119:31">=</operator> <name pos:start="119:33" pos:end="119:49"><name pos:start="119:33" pos:end="119:35">pfl</name><operator pos:start="119:36" pos:end="119:37">-&gt;</operator><name pos:start="119:38" pos:end="119:49">device_width</name></name></expr>;</expr_stmt>

    </block_content>}</block></if></if_stmt>



    <expr_stmt pos:start="125:5" pos:end="125:69"><expr pos:start="125:5" pos:end="125:68"><name pos:start="125:5" pos:end="125:14"><name pos:start="125:5" pos:end="125:7">pfl</name><operator pos:start="125:8" pos:end="125:9">-&gt;</operator><name pos:start="125:10" pos:end="125:14">timer</name></name> <operator pos:start="125:16" pos:end="125:16">=</operator> <call pos:start="125:18" pos:end="125:68"><name pos:start="125:18" pos:end="125:29">timer_new_ns</name><argument_list pos:start="125:30" pos:end="125:68">(<argument pos:start="125:31" pos:end="125:48"><expr pos:start="125:31" pos:end="125:48"><name pos:start="125:31" pos:end="125:48">QEMU_CLOCK_VIRTUAL</name></expr></argument>, <argument pos:start="125:51" pos:end="125:62"><expr pos:start="125:51" pos:end="125:62"><name pos:start="125:51" pos:end="125:62">pflash_timer</name></expr></argument>, <argument pos:start="125:65" pos:end="125:67"><expr pos:start="125:65" pos:end="125:67"><name pos:start="125:65" pos:end="125:67">pfl</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    <expr_stmt pos:start="127:5" pos:end="127:20"><expr pos:start="127:5" pos:end="127:19"><name pos:start="127:5" pos:end="127:15"><name pos:start="127:5" pos:end="127:7">pfl</name><operator pos:start="127:8" pos:end="127:9">-&gt;</operator><name pos:start="127:10" pos:end="127:15">wcycle</name></name> <operator pos:start="127:17" pos:end="127:17">=</operator> <literal type="number" pos:start="127:19" pos:end="127:19">0</literal></expr>;</expr_stmt>

    <expr_stmt pos:start="129:5" pos:end="129:17"><expr pos:start="129:5" pos:end="129:16"><name pos:start="129:5" pos:end="129:12"><name pos:start="129:5" pos:end="129:7">pfl</name><operator pos:start="129:8" pos:end="129:9">-&gt;</operator><name pos:start="129:10" pos:end="129:12">cmd</name></name> <operator pos:start="129:14" pos:end="129:14">=</operator> <literal type="number" pos:start="129:16" pos:end="129:16">0</literal></expr>;</expr_stmt>

    <expr_stmt pos:start="131:5" pos:end="131:20"><expr pos:start="131:5" pos:end="131:19"><name pos:start="131:5" pos:end="131:15"><name pos:start="131:5" pos:end="131:7">pfl</name><operator pos:start="131:8" pos:end="131:9">-&gt;</operator><name pos:start="131:10" pos:end="131:15">status</name></name> <operator pos:start="131:17" pos:end="131:17">=</operator> <literal type="number" pos:start="131:19" pos:end="131:19">0</literal></expr>;</expr_stmt>

    <comment type="block" pos:start="133:5" pos:end="133:29">/* Hardcoded CFI table */</comment>

    <expr_stmt pos:start="135:5" pos:end="135:24"><expr pos:start="135:5" pos:end="135:23"><name pos:start="135:5" pos:end="135:16"><name pos:start="135:5" pos:end="135:7">pfl</name><operator pos:start="135:8" pos:end="135:9">-&gt;</operator><name pos:start="135:10" pos:end="135:16">cfi_len</name></name> <operator pos:start="135:18" pos:end="135:18">=</operator> <literal type="number" pos:start="135:20" pos:end="135:23">0x52</literal></expr>;</expr_stmt>

    <comment type="block" pos:start="137:5" pos:end="137:31">/* Standard "QRY" string */</comment>

    <expr_stmt pos:start="139:5" pos:end="139:31"><expr pos:start="139:5" pos:end="139:30"><name pos:start="139:5" pos:end="139:24"><name pos:start="139:5" pos:end="139:7">pfl</name><operator pos:start="139:8" pos:end="139:9">-&gt;</operator><name pos:start="139:10" pos:end="139:18">cfi_table</name><index pos:start="139:19" pos:end="139:24">[<expr pos:start="139:20" pos:end="139:23"><literal type="number" pos:start="139:20" pos:end="139:23">0x10</literal></expr>]</index></name> <operator pos:start="139:26" pos:end="139:26">=</operator> <literal type="char" pos:start="139:28" pos:end="139:30">'Q'</literal></expr>;</expr_stmt>

    <expr_stmt pos:start="141:5" pos:end="141:31"><expr pos:start="141:5" pos:end="141:30"><name pos:start="141:5" pos:end="141:24"><name pos:start="141:5" pos:end="141:7">pfl</name><operator pos:start="141:8" pos:end="141:9">-&gt;</operator><name pos:start="141:10" pos:end="141:18">cfi_table</name><index pos:start="141:19" pos:end="141:24">[<expr pos:start="141:20" pos:end="141:23"><literal type="number" pos:start="141:20" pos:end="141:23">0x11</literal></expr>]</index></name> <operator pos:start="141:26" pos:end="141:26">=</operator> <literal type="char" pos:start="141:28" pos:end="141:30">'R'</literal></expr>;</expr_stmt>

    <expr_stmt pos:start="143:5" pos:end="143:31"><expr pos:start="143:5" pos:end="143:30"><name pos:start="143:5" pos:end="143:24"><name pos:start="143:5" pos:end="143:7">pfl</name><operator pos:start="143:8" pos:end="143:9">-&gt;</operator><name pos:start="143:10" pos:end="143:18">cfi_table</name><index pos:start="143:19" pos:end="143:24">[<expr pos:start="143:20" pos:end="143:23"><literal type="number" pos:start="143:20" pos:end="143:23">0x12</literal></expr>]</index></name> <operator pos:start="143:26" pos:end="143:26">=</operator> <literal type="char" pos:start="143:28" pos:end="143:30">'Y'</literal></expr>;</expr_stmt>

    <comment type="block" pos:start="145:5" pos:end="145:29">/* Command set (Intel) */</comment>

    <expr_stmt pos:start="147:5" pos:end="147:32"><expr pos:start="147:5" pos:end="147:31"><name pos:start="147:5" pos:end="147:24"><name pos:start="147:5" pos:end="147:7">pfl</name><operator pos:start="147:8" pos:end="147:9">-&gt;</operator><name pos:start="147:10" pos:end="147:18">cfi_table</name><index pos:start="147:19" pos:end="147:24">[<expr pos:start="147:20" pos:end="147:23"><literal type="number" pos:start="147:20" pos:end="147:23">0x13</literal></expr>]</index></name> <operator pos:start="147:26" pos:end="147:26">=</operator> <literal type="number" pos:start="147:28" pos:end="147:31">0x01</literal></expr>;</expr_stmt>

    <expr_stmt pos:start="149:5" pos:end="149:32"><expr pos:start="149:5" pos:end="149:31"><name pos:start="149:5" pos:end="149:24"><name pos:start="149:5" pos:end="149:7">pfl</name><operator pos:start="149:8" pos:end="149:9">-&gt;</operator><name pos:start="149:10" pos:end="149:18">cfi_table</name><index pos:start="149:19" pos:end="149:24">[<expr pos:start="149:20" pos:end="149:23"><literal type="number" pos:start="149:20" pos:end="149:23">0x14</literal></expr>]</index></name> <operator pos:start="149:26" pos:end="149:26">=</operator> <literal type="number" pos:start="149:28" pos:end="149:31">0x00</literal></expr>;</expr_stmt>

    <comment type="block" pos:start="151:5" pos:end="151:47">/* Primary extended table address (none) */</comment>

    <expr_stmt pos:start="153:5" pos:end="153:32"><expr pos:start="153:5" pos:end="153:31"><name pos:start="153:5" pos:end="153:24"><name pos:start="153:5" pos:end="153:7">pfl</name><operator pos:start="153:8" pos:end="153:9">-&gt;</operator><name pos:start="153:10" pos:end="153:18">cfi_table</name><index pos:start="153:19" pos:end="153:24">[<expr pos:start="153:20" pos:end="153:23"><literal type="number" pos:start="153:20" pos:end="153:23">0x15</literal></expr>]</index></name> <operator pos:start="153:26" pos:end="153:26">=</operator> <literal type="number" pos:start="153:28" pos:end="153:31">0x31</literal></expr>;</expr_stmt>

    <expr_stmt pos:start="155:5" pos:end="155:32"><expr pos:start="155:5" pos:end="155:31"><name pos:start="155:5" pos:end="155:24"><name pos:start="155:5" pos:end="155:7">pfl</name><operator pos:start="155:8" pos:end="155:9">-&gt;</operator><name pos:start="155:10" pos:end="155:18">cfi_table</name><index pos:start="155:19" pos:end="155:24">[<expr pos:start="155:20" pos:end="155:23"><literal type="number" pos:start="155:20" pos:end="155:23">0x16</literal></expr>]</index></name> <operator pos:start="155:26" pos:end="155:26">=</operator> <literal type="number" pos:start="155:28" pos:end="155:31">0x00</literal></expr>;</expr_stmt>

    <comment type="block" pos:start="157:5" pos:end="157:38">/* Alternate command set (none) */</comment>

    <expr_stmt pos:start="159:5" pos:end="159:32"><expr pos:start="159:5" pos:end="159:31"><name pos:start="159:5" pos:end="159:24"><name pos:start="159:5" pos:end="159:7">pfl</name><operator pos:start="159:8" pos:end="159:9">-&gt;</operator><name pos:start="159:10" pos:end="159:18">cfi_table</name><index pos:start="159:19" pos:end="159:24">[<expr pos:start="159:20" pos:end="159:23"><literal type="number" pos:start="159:20" pos:end="159:23">0x17</literal></expr>]</index></name> <operator pos:start="159:26" pos:end="159:26">=</operator> <literal type="number" pos:start="159:28" pos:end="159:31">0x00</literal></expr>;</expr_stmt>

    <expr_stmt pos:start="161:5" pos:end="161:32"><expr pos:start="161:5" pos:end="161:31"><name pos:start="161:5" pos:end="161:24"><name pos:start="161:5" pos:end="161:7">pfl</name><operator pos:start="161:8" pos:end="161:9">-&gt;</operator><name pos:start="161:10" pos:end="161:18">cfi_table</name><index pos:start="161:19" pos:end="161:24">[<expr pos:start="161:20" pos:end="161:23"><literal type="number" pos:start="161:20" pos:end="161:23">0x18</literal></expr>]</index></name> <operator pos:start="161:26" pos:end="161:26">=</operator> <literal type="number" pos:start="161:28" pos:end="161:31">0x00</literal></expr>;</expr_stmt>

    <comment type="block" pos:start="163:5" pos:end="163:41">/* Alternate extended table (none) */</comment>

    <expr_stmt pos:start="165:5" pos:end="165:32"><expr pos:start="165:5" pos:end="165:31"><name pos:start="165:5" pos:end="165:24"><name pos:start="165:5" pos:end="165:7">pfl</name><operator pos:start="165:8" pos:end="165:9">-&gt;</operator><name pos:start="165:10" pos:end="165:18">cfi_table</name><index pos:start="165:19" pos:end="165:24">[<expr pos:start="165:20" pos:end="165:23"><literal type="number" pos:start="165:20" pos:end="165:23">0x19</literal></expr>]</index></name> <operator pos:start="165:26" pos:end="165:26">=</operator> <literal type="number" pos:start="165:28" pos:end="165:31">0x00</literal></expr>;</expr_stmt>

    <expr_stmt pos:start="167:5" pos:end="167:32"><expr pos:start="167:5" pos:end="167:31"><name pos:start="167:5" pos:end="167:24"><name pos:start="167:5" pos:end="167:7">pfl</name><operator pos:start="167:8" pos:end="167:9">-&gt;</operator><name pos:start="167:10" pos:end="167:18">cfi_table</name><index pos:start="167:19" pos:end="167:24">[<expr pos:start="167:20" pos:end="167:23"><literal type="number" pos:start="167:20" pos:end="167:23">0x1A</literal></expr>]</index></name> <operator pos:start="167:26" pos:end="167:26">=</operator> <literal type="number" pos:start="167:28" pos:end="167:31">0x00</literal></expr>;</expr_stmt>

    <comment type="block" pos:start="169:5" pos:end="169:17">/* Vcc min */</comment>

    <expr_stmt pos:start="171:5" pos:end="171:32"><expr pos:start="171:5" pos:end="171:31"><name pos:start="171:5" pos:end="171:24"><name pos:start="171:5" pos:end="171:7">pfl</name><operator pos:start="171:8" pos:end="171:9">-&gt;</operator><name pos:start="171:10" pos:end="171:18">cfi_table</name><index pos:start="171:19" pos:end="171:24">[<expr pos:start="171:20" pos:end="171:23"><literal type="number" pos:start="171:20" pos:end="171:23">0x1B</literal></expr>]</index></name> <operator pos:start="171:26" pos:end="171:26">=</operator> <literal type="number" pos:start="171:28" pos:end="171:31">0x45</literal></expr>;</expr_stmt>

    <comment type="block" pos:start="173:5" pos:end="173:17">/* Vcc max */</comment>

    <expr_stmt pos:start="175:5" pos:end="175:32"><expr pos:start="175:5" pos:end="175:31"><name pos:start="175:5" pos:end="175:24"><name pos:start="175:5" pos:end="175:7">pfl</name><operator pos:start="175:8" pos:end="175:9">-&gt;</operator><name pos:start="175:10" pos:end="175:18">cfi_table</name><index pos:start="175:19" pos:end="175:24">[<expr pos:start="175:20" pos:end="175:23"><literal type="number" pos:start="175:20" pos:end="175:23">0x1C</literal></expr>]</index></name> <operator pos:start="175:26" pos:end="175:26">=</operator> <literal type="number" pos:start="175:28" pos:end="175:31">0x55</literal></expr>;</expr_stmt>

    <comment type="block" pos:start="177:5" pos:end="177:30">/* Vpp min (no Vpp pin) */</comment>

    <expr_stmt pos:start="179:5" pos:end="179:32"><expr pos:start="179:5" pos:end="179:31"><name pos:start="179:5" pos:end="179:24"><name pos:start="179:5" pos:end="179:7">pfl</name><operator pos:start="179:8" pos:end="179:9">-&gt;</operator><name pos:start="179:10" pos:end="179:18">cfi_table</name><index pos:start="179:19" pos:end="179:24">[<expr pos:start="179:20" pos:end="179:23"><literal type="number" pos:start="179:20" pos:end="179:23">0x1D</literal></expr>]</index></name> <operator pos:start="179:26" pos:end="179:26">=</operator> <literal type="number" pos:start="179:28" pos:end="179:31">0x00</literal></expr>;</expr_stmt>

    <comment type="block" pos:start="181:5" pos:end="181:30">/* Vpp max (no Vpp pin) */</comment>

    <expr_stmt pos:start="183:5" pos:end="183:32"><expr pos:start="183:5" pos:end="183:31"><name pos:start="183:5" pos:end="183:24"><name pos:start="183:5" pos:end="183:7">pfl</name><operator pos:start="183:8" pos:end="183:9">-&gt;</operator><name pos:start="183:10" pos:end="183:18">cfi_table</name><index pos:start="183:19" pos:end="183:24">[<expr pos:start="183:20" pos:end="183:23"><literal type="number" pos:start="183:20" pos:end="183:23">0x1E</literal></expr>]</index></name> <operator pos:start="183:26" pos:end="183:26">=</operator> <literal type="number" pos:start="183:28" pos:end="183:31">0x00</literal></expr>;</expr_stmt>

    <comment type="block" pos:start="185:5" pos:end="185:18">/* Reserved */</comment>

    <expr_stmt pos:start="187:5" pos:end="187:32"><expr pos:start="187:5" pos:end="187:31"><name pos:start="187:5" pos:end="187:24"><name pos:start="187:5" pos:end="187:7">pfl</name><operator pos:start="187:8" pos:end="187:9">-&gt;</operator><name pos:start="187:10" pos:end="187:18">cfi_table</name><index pos:start="187:19" pos:end="187:24">[<expr pos:start="187:20" pos:end="187:23"><literal type="number" pos:start="187:20" pos:end="187:23">0x1F</literal></expr>]</index></name> <operator pos:start="187:26" pos:end="187:26">=</operator> <literal type="number" pos:start="187:28" pos:end="187:31">0x07</literal></expr>;</expr_stmt>

    <comment type="block" pos:start="189:5" pos:end="189:43">/* Timeout for min size buffer write */</comment>

    <expr_stmt pos:start="191:5" pos:end="191:32"><expr pos:start="191:5" pos:end="191:31"><name pos:start="191:5" pos:end="191:24"><name pos:start="191:5" pos:end="191:7">pfl</name><operator pos:start="191:8" pos:end="191:9">-&gt;</operator><name pos:start="191:10" pos:end="191:18">cfi_table</name><index pos:start="191:19" pos:end="191:24">[<expr pos:start="191:20" pos:end="191:23"><literal type="number" pos:start="191:20" pos:end="191:23">0x20</literal></expr>]</index></name> <operator pos:start="191:26" pos:end="191:26">=</operator> <literal type="number" pos:start="191:28" pos:end="191:31">0x07</literal></expr>;</expr_stmt>

    <comment type="block" pos:start="193:5" pos:end="193:41">/* Typical timeout for block erase */</comment>

    <expr_stmt pos:start="195:5" pos:end="195:32"><expr pos:start="195:5" pos:end="195:31"><name pos:start="195:5" pos:end="195:24"><name pos:start="195:5" pos:end="195:7">pfl</name><operator pos:start="195:8" pos:end="195:9">-&gt;</operator><name pos:start="195:10" pos:end="195:18">cfi_table</name><index pos:start="195:19" pos:end="195:24">[<expr pos:start="195:20" pos:end="195:23"><literal type="number" pos:start="195:20" pos:end="195:23">0x21</literal></expr>]</index></name> <operator pos:start="195:26" pos:end="195:26">=</operator> <literal type="number" pos:start="195:28" pos:end="195:31">0x0a</literal></expr>;</expr_stmt>

    <comment type="block" pos:start="197:5" pos:end="197:55">/* Typical timeout for full chip erase (4096 ms) */</comment>

    <expr_stmt pos:start="199:5" pos:end="199:32"><expr pos:start="199:5" pos:end="199:31"><name pos:start="199:5" pos:end="199:24"><name pos:start="199:5" pos:end="199:7">pfl</name><operator pos:start="199:8" pos:end="199:9">-&gt;</operator><name pos:start="199:10" pos:end="199:18">cfi_table</name><index pos:start="199:19" pos:end="199:24">[<expr pos:start="199:20" pos:end="199:23"><literal type="number" pos:start="199:20" pos:end="199:23">0x22</literal></expr>]</index></name> <operator pos:start="199:26" pos:end="199:26">=</operator> <literal type="number" pos:start="199:28" pos:end="199:31">0x00</literal></expr>;</expr_stmt>

    <comment type="block" pos:start="201:5" pos:end="201:18">/* Reserved */</comment>

    <expr_stmt pos:start="203:5" pos:end="203:32"><expr pos:start="203:5" pos:end="203:31"><name pos:start="203:5" pos:end="203:24"><name pos:start="203:5" pos:end="203:7">pfl</name><operator pos:start="203:8" pos:end="203:9">-&gt;</operator><name pos:start="203:10" pos:end="203:18">cfi_table</name><index pos:start="203:19" pos:end="203:24">[<expr pos:start="203:20" pos:end="203:23"><literal type="number" pos:start="203:20" pos:end="203:23">0x23</literal></expr>]</index></name> <operator pos:start="203:26" pos:end="203:26">=</operator> <literal type="number" pos:start="203:28" pos:end="203:31">0x04</literal></expr>;</expr_stmt>

    <comment type="block" pos:start="205:5" pos:end="205:38">/* Max timeout for buffer write */</comment>

    <expr_stmt pos:start="207:5" pos:end="207:32"><expr pos:start="207:5" pos:end="207:31"><name pos:start="207:5" pos:end="207:24"><name pos:start="207:5" pos:end="207:7">pfl</name><operator pos:start="207:8" pos:end="207:9">-&gt;</operator><name pos:start="207:10" pos:end="207:18">cfi_table</name><index pos:start="207:19" pos:end="207:24">[<expr pos:start="207:20" pos:end="207:23"><literal type="number" pos:start="207:20" pos:end="207:23">0x24</literal></expr>]</index></name> <operator pos:start="207:26" pos:end="207:26">=</operator> <literal type="number" pos:start="207:28" pos:end="207:31">0x04</literal></expr>;</expr_stmt>

    <comment type="block" pos:start="209:5" pos:end="209:37">/* Max timeout for block erase */</comment>

    <expr_stmt pos:start="211:5" pos:end="211:32"><expr pos:start="211:5" pos:end="211:31"><name pos:start="211:5" pos:end="211:24"><name pos:start="211:5" pos:end="211:7">pfl</name><operator pos:start="211:8" pos:end="211:9">-&gt;</operator><name pos:start="211:10" pos:end="211:18">cfi_table</name><index pos:start="211:19" pos:end="211:24">[<expr pos:start="211:20" pos:end="211:23"><literal type="number" pos:start="211:20" pos:end="211:23">0x25</literal></expr>]</index></name> <operator pos:start="211:26" pos:end="211:26">=</operator> <literal type="number" pos:start="211:28" pos:end="211:31">0x04</literal></expr>;</expr_stmt>

    <comment type="block" pos:start="213:5" pos:end="213:36">/* Max timeout for chip erase */</comment>

    <expr_stmt pos:start="215:5" pos:end="215:32"><expr pos:start="215:5" pos:end="215:31"><name pos:start="215:5" pos:end="215:24"><name pos:start="215:5" pos:end="215:7">pfl</name><operator pos:start="215:8" pos:end="215:9">-&gt;</operator><name pos:start="215:10" pos:end="215:18">cfi_table</name><index pos:start="215:19" pos:end="215:24">[<expr pos:start="215:20" pos:end="215:23"><literal type="number" pos:start="215:20" pos:end="215:23">0x26</literal></expr>]</index></name> <operator pos:start="215:26" pos:end="215:26">=</operator> <literal type="number" pos:start="215:28" pos:end="215:31">0x00</literal></expr>;</expr_stmt>

    <comment type="block" pos:start="217:5" pos:end="217:21">/* Device size */</comment>

    <expr_stmt pos:start="219:5" pos:end="219:45"><expr pos:start="219:5" pos:end="219:44"><name pos:start="219:5" pos:end="219:24"><name pos:start="219:5" pos:end="219:7">pfl</name><operator pos:start="219:8" pos:end="219:9">-&gt;</operator><name pos:start="219:10" pos:end="219:18">cfi_table</name><index pos:start="219:19" pos:end="219:24">[<expr pos:start="219:20" pos:end="219:23"><literal type="number" pos:start="219:20" pos:end="219:23">0x27</literal></expr>]</index></name> <operator pos:start="219:26" pos:end="219:26">=</operator> <call pos:start="219:28" pos:end="219:44"><name pos:start="219:28" pos:end="219:32">ctz32</name><argument_list pos:start="219:33" pos:end="219:44">(<argument pos:start="219:34" pos:end="219:43"><expr pos:start="219:34" pos:end="219:43"><name pos:start="219:34" pos:end="219:43">device_len</name></expr></argument>)</argument_list></call></expr>;</expr_stmt> <comment type="block" pos:start="219:47" pos:end="219:56">/* + 1; */</comment>

    <comment type="block" pos:start="221:5" pos:end="221:46">/* Flash device interface (8 &amp; 16 bits) */</comment>

    <expr_stmt pos:start="223:5" pos:end="223:32"><expr pos:start="223:5" pos:end="223:31"><name pos:start="223:5" pos:end="223:24"><name pos:start="223:5" pos:end="223:7">pfl</name><operator pos:start="223:8" pos:end="223:9">-&gt;</operator><name pos:start="223:10" pos:end="223:18">cfi_table</name><index pos:start="223:19" pos:end="223:24">[<expr pos:start="223:20" pos:end="223:23"><literal type="number" pos:start="223:20" pos:end="223:23">0x28</literal></expr>]</index></name> <operator pos:start="223:26" pos:end="223:26">=</operator> <literal type="number" pos:start="223:28" pos:end="223:31">0x02</literal></expr>;</expr_stmt>

    <expr_stmt pos:start="225:5" pos:end="225:32"><expr pos:start="225:5" pos:end="225:31"><name pos:start="225:5" pos:end="225:24"><name pos:start="225:5" pos:end="225:7">pfl</name><operator pos:start="225:8" pos:end="225:9">-&gt;</operator><name pos:start="225:10" pos:end="225:18">cfi_table</name><index pos:start="225:19" pos:end="225:24">[<expr pos:start="225:20" pos:end="225:23"><literal type="number" pos:start="225:20" pos:end="225:23">0x29</literal></expr>]</index></name> <operator pos:start="225:26" pos:end="225:26">=</operator> <literal type="number" pos:start="225:28" pos:end="225:31">0x00</literal></expr>;</expr_stmt>

    <comment type="block" pos:start="227:5" pos:end="227:50">/* Max number of bytes in multi-bytes write */</comment>

    <if_stmt pos:start="229:5" pos:end="237:5"><if pos:start="229:5" pos:end="233:5">if <condition pos:start="229:8" pos:end="229:29">(<expr pos:start="229:9" pos:end="229:28"><name pos:start="229:9" pos:end="229:23"><name pos:start="229:9" pos:end="229:11">pfl</name><operator pos:start="229:12" pos:end="229:13">-&gt;</operator><name pos:start="229:14" pos:end="229:23">bank_width</name></name> <operator pos:start="229:25" pos:end="229:26">==</operator> <literal type="number" pos:start="229:28" pos:end="229:28">1</literal></expr>)</condition> <block pos:start="229:31" pos:end="233:5">{<block_content pos:start="231:9" pos:end="231:36">

        <expr_stmt pos:start="231:9" pos:end="231:36"><expr pos:start="231:9" pos:end="231:35"><name pos:start="231:9" pos:end="231:28"><name pos:start="231:9" pos:end="231:11">pfl</name><operator pos:start="231:12" pos:end="231:13">-&gt;</operator><name pos:start="231:14" pos:end="231:22">cfi_table</name><index pos:start="231:23" pos:end="231:28">[<expr pos:start="231:24" pos:end="231:27"><literal type="number" pos:start="231:24" pos:end="231:27">0x2A</literal></expr>]</index></name> <operator pos:start="231:30" pos:end="231:30">=</operator> <literal type="number" pos:start="231:32" pos:end="231:35">0x08</literal></expr>;</expr_stmt>

    </block_content>}</block></if> <else pos:start="233:7" pos:end="237:5">else <block pos:start="233:12" pos:end="237:5">{<block_content pos:start="235:9" pos:end="235:36">

        <expr_stmt pos:start="235:9" pos:end="235:36"><expr pos:start="235:9" pos:end="235:35"><name pos:start="235:9" pos:end="235:28"><name pos:start="235:9" pos:end="235:11">pfl</name><operator pos:start="235:12" pos:end="235:13">-&gt;</operator><name pos:start="235:14" pos:end="235:22">cfi_table</name><index pos:start="235:23" pos:end="235:28">[<expr pos:start="235:24" pos:end="235:27"><literal type="number" pos:start="235:24" pos:end="235:27">0x2A</literal></expr>]</index></name> <operator pos:start="235:30" pos:end="235:30">=</operator> <literal type="number" pos:start="235:32" pos:end="235:35">0x0B</literal></expr>;</expr_stmt>

    </block_content>}</block></else></if_stmt>

    <expr_stmt pos:start="239:5" pos:end="239:53"><expr pos:start="239:5" pos:end="239:52"><name pos:start="239:5" pos:end="239:24"><name pos:start="239:5" pos:end="239:7">pfl</name><operator pos:start="239:8" pos:end="239:9">-&gt;</operator><name pos:start="239:10" pos:end="239:24">writeblock_size</name></name> <operator pos:start="239:26" pos:end="239:26">=</operator> <literal type="number" pos:start="239:28" pos:end="239:28">1</literal> <operator pos:start="239:30" pos:end="239:31">&lt;&lt;</operator> <name pos:start="239:33" pos:end="239:52"><name pos:start="239:33" pos:end="239:35">pfl</name><operator pos:start="239:36" pos:end="239:37">-&gt;</operator><name pos:start="239:38" pos:end="239:46">cfi_table</name><index pos:start="239:47" pos:end="239:52">[<expr pos:start="239:48" pos:end="239:51"><literal type="number" pos:start="239:48" pos:end="239:51">0x2A</literal></expr>]</index></name></expr>;</expr_stmt>



    <expr_stmt pos:start="243:5" pos:end="243:32"><expr pos:start="243:5" pos:end="243:31"><name pos:start="243:5" pos:end="243:24"><name pos:start="243:5" pos:end="243:7">pfl</name><operator pos:start="243:8" pos:end="243:9">-&gt;</operator><name pos:start="243:10" pos:end="243:18">cfi_table</name><index pos:start="243:19" pos:end="243:24">[<expr pos:start="243:20" pos:end="243:23"><literal type="number" pos:start="243:20" pos:end="243:23">0x2B</literal></expr>]</index></name> <operator pos:start="243:26" pos:end="243:26">=</operator> <literal type="number" pos:start="243:28" pos:end="243:31">0x00</literal></expr>;</expr_stmt>

    <comment type="block" pos:start="245:5" pos:end="245:49">/* Number of erase block regions (uniform) */</comment>

    <expr_stmt pos:start="247:5" pos:end="247:32"><expr pos:start="247:5" pos:end="247:31"><name pos:start="247:5" pos:end="247:24"><name pos:start="247:5" pos:end="247:7">pfl</name><operator pos:start="247:8" pos:end="247:9">-&gt;</operator><name pos:start="247:10" pos:end="247:18">cfi_table</name><index pos:start="247:19" pos:end="247:24">[<expr pos:start="247:20" pos:end="247:23"><literal type="number" pos:start="247:20" pos:end="247:23">0x2C</literal></expr>]</index></name> <operator pos:start="247:26" pos:end="247:26">=</operator> <literal type="number" pos:start="247:28" pos:end="247:31">0x01</literal></expr>;</expr_stmt>

    <comment type="block" pos:start="249:5" pos:end="249:30">/* Erase block region 1 */</comment>

    <expr_stmt pos:start="251:5" pos:end="251:49"><expr pos:start="251:5" pos:end="251:48"><name pos:start="251:5" pos:end="251:24"><name pos:start="251:5" pos:end="251:7">pfl</name><operator pos:start="251:8" pos:end="251:9">-&gt;</operator><name pos:start="251:10" pos:end="251:18">cfi_table</name><index pos:start="251:19" pos:end="251:24">[<expr pos:start="251:20" pos:end="251:23"><literal type="number" pos:start="251:20" pos:end="251:23">0x2D</literal></expr>]</index></name> <operator pos:start="251:26" pos:end="251:26">=</operator> <name pos:start="251:28" pos:end="251:44">blocks_per_device</name> <operator pos:start="251:46" pos:end="251:46">-</operator> <literal type="number" pos:start="251:48" pos:end="251:48">1</literal></expr>;</expr_stmt>

    <expr_stmt pos:start="253:5" pos:end="253:56"><expr pos:start="253:5" pos:end="253:55"><name pos:start="253:5" pos:end="253:24"><name pos:start="253:5" pos:end="253:7">pfl</name><operator pos:start="253:8" pos:end="253:9">-&gt;</operator><name pos:start="253:10" pos:end="253:18">cfi_table</name><index pos:start="253:19" pos:end="253:24">[<expr pos:start="253:20" pos:end="253:23"><literal type="number" pos:start="253:20" pos:end="253:23">0x2E</literal></expr>]</index></name> <operator pos:start="253:26" pos:end="253:26">=</operator> <operator pos:start="253:28" pos:end="253:28">(</operator><name pos:start="253:29" pos:end="253:45">blocks_per_device</name> <operator pos:start="253:47" pos:end="253:47">-</operator> <literal type="number" pos:start="253:49" pos:end="253:49">1</literal><operator pos:start="253:50" pos:end="253:50">)</operator> <operator pos:start="253:52" pos:end="253:53">&gt;&gt;</operator> <literal type="number" pos:start="253:55" pos:end="253:55">8</literal></expr>;</expr_stmt>

    <expr_stmt pos:start="255:5" pos:end="255:48"><expr pos:start="255:5" pos:end="255:47"><name pos:start="255:5" pos:end="255:24"><name pos:start="255:5" pos:end="255:7">pfl</name><operator pos:start="255:8" pos:end="255:9">-&gt;</operator><name pos:start="255:10" pos:end="255:18">cfi_table</name><index pos:start="255:19" pos:end="255:24">[<expr pos:start="255:20" pos:end="255:23"><literal type="number" pos:start="255:20" pos:end="255:23">0x2F</literal></expr>]</index></name> <operator pos:start="255:26" pos:end="255:26">=</operator> <name pos:start="255:28" pos:end="255:42"><name pos:start="255:28" pos:end="255:30">pfl</name><operator pos:start="255:31" pos:end="255:32">-&gt;</operator><name pos:start="255:33" pos:end="255:42">sector_len</name></name> <operator pos:start="255:44" pos:end="255:45">&gt;&gt;</operator> <literal type="number" pos:start="255:47" pos:end="255:47">8</literal></expr>;</expr_stmt>

    <expr_stmt pos:start="257:5" pos:end="257:49"><expr pos:start="257:5" pos:end="257:48"><name pos:start="257:5" pos:end="257:24"><name pos:start="257:5" pos:end="257:7">pfl</name><operator pos:start="257:8" pos:end="257:9">-&gt;</operator><name pos:start="257:10" pos:end="257:18">cfi_table</name><index pos:start="257:19" pos:end="257:24">[<expr pos:start="257:20" pos:end="257:23"><literal type="number" pos:start="257:20" pos:end="257:23">0x30</literal></expr>]</index></name> <operator pos:start="257:26" pos:end="257:26">=</operator> <name pos:start="257:28" pos:end="257:42"><name pos:start="257:28" pos:end="257:30">pfl</name><operator pos:start="257:31" pos:end="257:32">-&gt;</operator><name pos:start="257:33" pos:end="257:42">sector_len</name></name> <operator pos:start="257:44" pos:end="257:45">&gt;&gt;</operator> <literal type="number" pos:start="257:47" pos:end="257:48">16</literal></expr>;</expr_stmt>



    <comment type="block" pos:start="261:5" pos:end="261:18">/* Extended */</comment>

    <expr_stmt pos:start="263:5" pos:end="263:31"><expr pos:start="263:5" pos:end="263:30"><name pos:start="263:5" pos:end="263:24"><name pos:start="263:5" pos:end="263:7">pfl</name><operator pos:start="263:8" pos:end="263:9">-&gt;</operator><name pos:start="263:10" pos:end="263:18">cfi_table</name><index pos:start="263:19" pos:end="263:24">[<expr pos:start="263:20" pos:end="263:23"><literal type="number" pos:start="263:20" pos:end="263:23">0x31</literal></expr>]</index></name> <operator pos:start="263:26" pos:end="263:26">=</operator> <literal type="char" pos:start="263:28" pos:end="263:30">'P'</literal></expr>;</expr_stmt>

    <expr_stmt pos:start="265:5" pos:end="265:31"><expr pos:start="265:5" pos:end="265:30"><name pos:start="265:5" pos:end="265:24"><name pos:start="265:5" pos:end="265:7">pfl</name><operator pos:start="265:8" pos:end="265:9">-&gt;</operator><name pos:start="265:10" pos:end="265:18">cfi_table</name><index pos:start="265:19" pos:end="265:24">[<expr pos:start="265:20" pos:end="265:23"><literal type="number" pos:start="265:20" pos:end="265:23">0x32</literal></expr>]</index></name> <operator pos:start="265:26" pos:end="265:26">=</operator> <literal type="char" pos:start="265:28" pos:end="265:30">'R'</literal></expr>;</expr_stmt>

    <expr_stmt pos:start="267:5" pos:end="267:31"><expr pos:start="267:5" pos:end="267:30"><name pos:start="267:5" pos:end="267:24"><name pos:start="267:5" pos:end="267:7">pfl</name><operator pos:start="267:8" pos:end="267:9">-&gt;</operator><name pos:start="267:10" pos:end="267:18">cfi_table</name><index pos:start="267:19" pos:end="267:24">[<expr pos:start="267:20" pos:end="267:23"><literal type="number" pos:start="267:20" pos:end="267:23">0x33</literal></expr>]</index></name> <operator pos:start="267:26" pos:end="267:26">=</operator> <literal type="char" pos:start="267:28" pos:end="267:30">'I'</literal></expr>;</expr_stmt>



    <expr_stmt pos:start="271:5" pos:end="271:31"><expr pos:start="271:5" pos:end="271:30"><name pos:start="271:5" pos:end="271:24"><name pos:start="271:5" pos:end="271:7">pfl</name><operator pos:start="271:8" pos:end="271:9">-&gt;</operator><name pos:start="271:10" pos:end="271:18">cfi_table</name><index pos:start="271:19" pos:end="271:24">[<expr pos:start="271:20" pos:end="271:23"><literal type="number" pos:start="271:20" pos:end="271:23">0x34</literal></expr>]</index></name> <operator pos:start="271:26" pos:end="271:26">=</operator> <literal type="char" pos:start="271:28" pos:end="271:30">'1'</literal></expr>;</expr_stmt>

    <expr_stmt pos:start="273:5" pos:end="273:31"><expr pos:start="273:5" pos:end="273:30"><name pos:start="273:5" pos:end="273:24"><name pos:start="273:5" pos:end="273:7">pfl</name><operator pos:start="273:8" pos:end="273:9">-&gt;</operator><name pos:start="273:10" pos:end="273:18">cfi_table</name><index pos:start="273:19" pos:end="273:24">[<expr pos:start="273:20" pos:end="273:23"><literal type="number" pos:start="273:20" pos:end="273:23">0x35</literal></expr>]</index></name> <operator pos:start="273:26" pos:end="273:26">=</operator> <literal type="char" pos:start="273:28" pos:end="273:30">'0'</literal></expr>;</expr_stmt>



    <expr_stmt pos:start="277:5" pos:end="277:32"><expr pos:start="277:5" pos:end="277:31"><name pos:start="277:5" pos:end="277:24"><name pos:start="277:5" pos:end="277:7">pfl</name><operator pos:start="277:8" pos:end="277:9">-&gt;</operator><name pos:start="277:10" pos:end="277:18">cfi_table</name><index pos:start="277:19" pos:end="277:24">[<expr pos:start="277:20" pos:end="277:23"><literal type="number" pos:start="277:20" pos:end="277:23">0x36</literal></expr>]</index></name> <operator pos:start="277:26" pos:end="277:26">=</operator> <literal type="number" pos:start="277:28" pos:end="277:31">0x00</literal></expr>;</expr_stmt>

    <expr_stmt pos:start="279:5" pos:end="279:32"><expr pos:start="279:5" pos:end="279:31"><name pos:start="279:5" pos:end="279:24"><name pos:start="279:5" pos:end="279:7">pfl</name><operator pos:start="279:8" pos:end="279:9">-&gt;</operator><name pos:start="279:10" pos:end="279:18">cfi_table</name><index pos:start="279:19" pos:end="279:24">[<expr pos:start="279:20" pos:end="279:23"><literal type="number" pos:start="279:20" pos:end="279:23">0x37</literal></expr>]</index></name> <operator pos:start="279:26" pos:end="279:26">=</operator> <literal type="number" pos:start="279:28" pos:end="279:31">0x00</literal></expr>;</expr_stmt>

    <expr_stmt pos:start="281:5" pos:end="281:32"><expr pos:start="281:5" pos:end="281:31"><name pos:start="281:5" pos:end="281:24"><name pos:start="281:5" pos:end="281:7">pfl</name><operator pos:start="281:8" pos:end="281:9">-&gt;</operator><name pos:start="281:10" pos:end="281:18">cfi_table</name><index pos:start="281:19" pos:end="281:24">[<expr pos:start="281:20" pos:end="281:23"><literal type="number" pos:start="281:20" pos:end="281:23">0x38</literal></expr>]</index></name> <operator pos:start="281:26" pos:end="281:26">=</operator> <literal type="number" pos:start="281:28" pos:end="281:31">0x00</literal></expr>;</expr_stmt>

    <expr_stmt pos:start="283:5" pos:end="283:32"><expr pos:start="283:5" pos:end="283:31"><name pos:start="283:5" pos:end="283:24"><name pos:start="283:5" pos:end="283:7">pfl</name><operator pos:start="283:8" pos:end="283:9">-&gt;</operator><name pos:start="283:10" pos:end="283:18">cfi_table</name><index pos:start="283:19" pos:end="283:24">[<expr pos:start="283:20" pos:end="283:23"><literal type="number" pos:start="283:20" pos:end="283:23">0x39</literal></expr>]</index></name> <operator pos:start="283:26" pos:end="283:26">=</operator> <literal type="number" pos:start="283:28" pos:end="283:31">0x00</literal></expr>;</expr_stmt>



    <expr_stmt pos:start="287:5" pos:end="287:32"><expr pos:start="287:5" pos:end="287:31"><name pos:start="287:5" pos:end="287:24"><name pos:start="287:5" pos:end="287:7">pfl</name><operator pos:start="287:8" pos:end="287:9">-&gt;</operator><name pos:start="287:10" pos:end="287:18">cfi_table</name><index pos:start="287:19" pos:end="287:24">[<expr pos:start="287:20" pos:end="287:23"><literal type="number" pos:start="287:20" pos:end="287:23">0x3a</literal></expr>]</index></name> <operator pos:start="287:26" pos:end="287:26">=</operator> <literal type="number" pos:start="287:28" pos:end="287:31">0x00</literal></expr>;</expr_stmt>



    <expr_stmt pos:start="291:5" pos:end="291:32"><expr pos:start="291:5" pos:end="291:31"><name pos:start="291:5" pos:end="291:24"><name pos:start="291:5" pos:end="291:7">pfl</name><operator pos:start="291:8" pos:end="291:9">-&gt;</operator><name pos:start="291:10" pos:end="291:18">cfi_table</name><index pos:start="291:19" pos:end="291:24">[<expr pos:start="291:20" pos:end="291:23"><literal type="number" pos:start="291:20" pos:end="291:23">0x3b</literal></expr>]</index></name> <operator pos:start="291:26" pos:end="291:26">=</operator> <literal type="number" pos:start="291:28" pos:end="291:31">0x00</literal></expr>;</expr_stmt>

    <expr_stmt pos:start="293:5" pos:end="293:32"><expr pos:start="293:5" pos:end="293:31"><name pos:start="293:5" pos:end="293:24"><name pos:start="293:5" pos:end="293:7">pfl</name><operator pos:start="293:8" pos:end="293:9">-&gt;</operator><name pos:start="293:10" pos:end="293:18">cfi_table</name><index pos:start="293:19" pos:end="293:24">[<expr pos:start="293:20" pos:end="293:23"><literal type="number" pos:start="293:20" pos:end="293:23">0x3c</literal></expr>]</index></name> <operator pos:start="293:26" pos:end="293:26">=</operator> <literal type="number" pos:start="293:28" pos:end="293:31">0x00</literal></expr>;</expr_stmt>



    <expr_stmt pos:start="297:5" pos:end="297:32"><expr pos:start="297:5" pos:end="297:31"><name pos:start="297:5" pos:end="297:24"><name pos:start="297:5" pos:end="297:7">pfl</name><operator pos:start="297:8" pos:end="297:9">-&gt;</operator><name pos:start="297:10" pos:end="297:18">cfi_table</name><index pos:start="297:19" pos:end="297:24">[<expr pos:start="297:20" pos:end="297:23"><literal type="number" pos:start="297:20" pos:end="297:23">0x3f</literal></expr>]</index></name> <operator pos:start="297:26" pos:end="297:26">=</operator> <literal type="number" pos:start="297:28" pos:end="297:31">0x01</literal></expr>;</expr_stmt> <comment type="block" pos:start="297:34" pos:end="297:66">/* Number of protection fields */</comment>

</block_content>}</block></function>
</unit>
