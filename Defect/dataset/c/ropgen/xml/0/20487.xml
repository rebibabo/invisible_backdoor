<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<unit xmlns="http://www.srcML.org/srcML/src" xmlns:pos="http://www.srcML.org/srcML/position" revision="1.0.0" language="C" filename="dataset/ropgen/aug/0/20487.c" pos:tabs="8"><function pos:start="1:1" pos:end="47:1"><type pos:start="1:1" pos:end="1:4"><name pos:start="1:1" pos:end="1:4">void</name></type> <name pos:start="1:6" pos:end="1:33">css_conditional_io_interrupt</name><parameter_list pos:start="1:34" pos:end="1:48">(<parameter pos:start="1:35" pos:end="1:47"><decl pos:start="1:35" pos:end="1:47"><type pos:start="1:35" pos:end="1:44"><name pos:start="1:35" pos:end="1:42">SubchDev</name> <modifier pos:start="1:44" pos:end="1:44">*</modifier></type><name pos:start="1:45" pos:end="1:47">sch</name></decl></parameter>)</parameter_list>

<block pos:start="3:1" pos:end="47:1">{<block_content pos:start="13:5" pos:end="45:5">

    <comment type="block" pos:start="5:5" pos:end="11:7">/*

     * If the subchannel is not currently status pending, make it pending

     * with alert status.

     */</comment>

    <if_stmt pos:start="13:5" pos:end="45:5"><if pos:start="13:5" pos:end="45:5">if <condition pos:start="13:8" pos:end="13:63">(<expr pos:start="13:9" pos:end="13:62"><operator pos:start="13:9" pos:end="13:9">!</operator><operator pos:start="13:10" pos:end="13:10">(</operator><name pos:start="13:11" pos:end="13:36"><name pos:start="13:11" pos:end="13:13">sch</name><operator pos:start="13:14" pos:end="13:15">-&gt;</operator><name pos:start="13:16" pos:end="13:26">curr_status</name><operator pos:start="13:27" pos:end="13:27">.</operator><name pos:start="13:28" pos:end="13:31">scsw</name><operator pos:start="13:32" pos:end="13:32">.</operator><name pos:start="13:33" pos:end="13:36">ctrl</name></name> <operator pos:start="13:38" pos:end="13:38">&amp;</operator> <name pos:start="13:40" pos:end="13:61">SCSW_STCTL_STATUS_PEND</name><operator pos:start="13:62" pos:end="13:62">)</operator></expr>)</condition> <block pos:start="13:65" pos:end="45:5">{<block_content pos:start="15:9" pos:end="43:47">

        <decl_stmt pos:start="15:9" pos:end="15:46"><decl pos:start="15:9" pos:end="15:45"><type pos:start="15:9" pos:end="15:17"><name pos:start="15:9" pos:end="15:15">S390CPU</name> <modifier pos:start="15:17" pos:end="15:17">*</modifier></type><name pos:start="15:18" pos:end="15:20">cpu</name> <init pos:start="15:22" pos:end="15:45">= <expr pos:start="15:24" pos:end="15:45"><call pos:start="15:24" pos:end="15:45"><name pos:start="15:24" pos:end="15:42">s390_cpu_addr2state</name><argument_list pos:start="15:43" pos:end="15:45">(<argument pos:start="15:44" pos:end="15:44"><expr pos:start="15:44" pos:end="15:44"><literal type="number" pos:start="15:44" pos:end="15:44">0</literal></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>

        <decl_stmt pos:start="17:9" pos:end="17:80"><decl pos:start="17:9" pos:end="17:79"><type pos:start="17:9" pos:end="17:15"><name pos:start="17:9" pos:end="17:15">uint8_t</name></type> <name pos:start="17:17" pos:end="17:19">isc</name> <init pos:start="17:21" pos:end="17:79">= <expr pos:start="17:23" pos:end="17:79"><operator pos:start="17:23" pos:end="17:23">(</operator><name pos:start="17:24" pos:end="17:50"><name pos:start="17:24" pos:end="17:26">sch</name><operator pos:start="17:27" pos:end="17:28">-&gt;</operator><name pos:start="17:29" pos:end="17:39">curr_status</name><operator pos:start="17:40" pos:end="17:40">.</operator><name pos:start="17:41" pos:end="17:44">pmcw</name><operator pos:start="17:45" pos:end="17:45">.</operator><name pos:start="17:46" pos:end="17:50">flags</name></name> <operator pos:start="17:52" pos:end="17:52">&amp;</operator> <name pos:start="17:54" pos:end="17:72">PMCW_FLAGS_MASK_ISC</name><operator pos:start="17:73" pos:end="17:73">)</operator> <operator pos:start="17:75" pos:end="17:76">&gt;&gt;</operator> <literal type="number" pos:start="17:78" pos:end="17:79">11</literal></expr></init></decl>;</decl_stmt>



        <expr_stmt pos:start="21:9" pos:end="25:48"><expr pos:start="21:9" pos:end="25:47"><call pos:start="21:9" pos:end="25:47"><name pos:start="21:9" pos:end="21:30">trace_css_io_interrupt</name><argument_list pos:start="21:31" pos:end="25:47">(<argument pos:start="21:32" pos:end="21:41"><expr pos:start="21:32" pos:end="21:41"><name pos:start="21:32" pos:end="21:41"><name pos:start="21:32" pos:end="21:34">sch</name><operator pos:start="21:35" pos:end="21:36">-&gt;</operator><name pos:start="21:37" pos:end="21:41">cssid</name></name></expr></argument>, <argument pos:start="21:44" pos:end="21:52"><expr pos:start="21:44" pos:end="21:52"><name pos:start="21:44" pos:end="21:52"><name pos:start="21:44" pos:end="21:46">sch</name><operator pos:start="21:47" pos:end="21:48">-&gt;</operator><name pos:start="21:49" pos:end="21:52">ssid</name></name></expr></argument>, <argument pos:start="21:55" pos:end="21:64"><expr pos:start="21:55" pos:end="21:64"><name pos:start="21:55" pos:end="21:64"><name pos:start="21:55" pos:end="21:57">sch</name><operator pos:start="21:58" pos:end="21:59">-&gt;</operator><name pos:start="21:60" pos:end="21:64">schid</name></name></expr></argument>,

                               <argument pos:start="23:32" pos:end="23:60"><expr pos:start="23:32" pos:end="23:60"><name pos:start="23:32" pos:end="23:60"><name pos:start="23:32" pos:end="23:34">sch</name><operator pos:start="23:35" pos:end="23:36">-&gt;</operator><name pos:start="23:37" pos:end="23:47">curr_status</name><operator pos:start="23:48" pos:end="23:48">.</operator><name pos:start="23:49" pos:end="23:52">pmcw</name><operator pos:start="23:53" pos:end="23:53">.</operator><name pos:start="23:54" pos:end="23:60">intparm</name></name></expr></argument>, <argument pos:start="23:63" pos:end="23:65"><expr pos:start="23:63" pos:end="23:65"><name pos:start="23:63" pos:end="23:65">isc</name></expr></argument>,

                               <argument pos:start="25:32" pos:end="25:46"><expr pos:start="25:32" pos:end="25:46"><literal type="string" pos:start="25:32" pos:end="25:46">"(unsolicited)"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <expr_stmt pos:start="27:9" pos:end="27:60"><expr pos:start="27:9" pos:end="27:59"><name pos:start="27:9" pos:end="27:34"><name pos:start="27:9" pos:end="27:11">sch</name><operator pos:start="27:12" pos:end="27:13">-&gt;</operator><name pos:start="27:14" pos:end="27:24">curr_status</name><operator pos:start="27:25" pos:end="27:25">.</operator><name pos:start="27:26" pos:end="27:29">scsw</name><operator pos:start="27:30" pos:end="27:30">.</operator><name pos:start="27:31" pos:end="27:34">ctrl</name></name> <operator pos:start="27:36" pos:end="27:37">&amp;=</operator> <operator pos:start="27:39" pos:end="27:39">~</operator><name pos:start="27:40" pos:end="27:59">SCSW_CTRL_MASK_STCTL</name></expr>;</expr_stmt>

        <expr_stmt pos:start="29:9" pos:end="31:54"><expr pos:start="29:9" pos:end="31:53"><name pos:start="29:9" pos:end="29:34"><name pos:start="29:9" pos:end="29:11">sch</name><operator pos:start="29:12" pos:end="29:13">-&gt;</operator><name pos:start="29:14" pos:end="29:24">curr_status</name><operator pos:start="29:25" pos:end="29:25">.</operator><name pos:start="29:26" pos:end="29:29">scsw</name><operator pos:start="29:30" pos:end="29:30">.</operator><name pos:start="29:31" pos:end="29:34">ctrl</name></name> <operator pos:start="29:36" pos:end="29:37">|=</operator>

            <name pos:start="31:13" pos:end="31:28">SCSW_STCTL_ALERT</name> <operator pos:start="31:30" pos:end="31:30">|</operator> <name pos:start="31:32" pos:end="31:53">SCSW_STCTL_STATUS_PEND</name></expr>;</expr_stmt>

        <comment type="block" pos:start="33:9" pos:end="33:38">/* Inject an I/O interrupt. */</comment>

        <expr_stmt pos:start="35:9" pos:end="43:47"><expr pos:start="35:9" pos:end="43:46"><call pos:start="35:9" pos:end="43:46"><name pos:start="35:9" pos:end="35:25">s390_io_interrupt</name><argument_list pos:start="35:26" pos:end="43:46">(<argument pos:start="35:27" pos:end="35:29"><expr pos:start="35:27" pos:end="35:29"><name pos:start="35:27" pos:end="35:29">cpu</name></expr></argument>,

                          <argument pos:start="37:27" pos:end="37:54"><expr pos:start="37:27" pos:end="37:54"><call pos:start="37:27" pos:end="37:54"><name pos:start="37:27" pos:end="37:49">css_build_subchannel_id</name><argument_list pos:start="37:50" pos:end="37:54">(<argument pos:start="37:51" pos:end="37:53"><expr pos:start="37:51" pos:end="37:53"><name pos:start="37:51" pos:end="37:53">sch</name></expr></argument>)</argument_list></call></expr></argument>,

                          <argument pos:start="39:27" pos:end="39:36"><expr pos:start="39:27" pos:end="39:36"><name pos:start="39:27" pos:end="39:36"><name pos:start="39:27" pos:end="39:29">sch</name><operator pos:start="39:30" pos:end="39:31">-&gt;</operator><name pos:start="39:32" pos:end="39:36">schid</name></name></expr></argument>,

                          <argument pos:start="41:27" pos:end="41:55"><expr pos:start="41:27" pos:end="41:55"><name pos:start="41:27" pos:end="41:55"><name pos:start="41:27" pos:end="41:29">sch</name><operator pos:start="41:30" pos:end="41:31">-&gt;</operator><name pos:start="41:32" pos:end="41:42">curr_status</name><operator pos:start="41:43" pos:end="41:43">.</operator><name pos:start="41:44" pos:end="41:47">pmcw</name><operator pos:start="41:48" pos:end="41:48">.</operator><name pos:start="41:49" pos:end="41:55">intparm</name></name></expr></argument>,

                          <argument pos:start="43:27" pos:end="43:45"><expr pos:start="43:27" pos:end="43:45"><operator pos:start="43:27" pos:end="43:27">(</operator><literal type="number" pos:start="43:28" pos:end="43:31">0x80</literal> <operator pos:start="43:33" pos:end="43:34">&gt;&gt;</operator> <name pos:start="43:36" pos:end="43:38">isc</name><operator pos:start="43:39" pos:end="43:39">)</operator> <operator pos:start="43:41" pos:end="43:42">&lt;&lt;</operator> <literal type="number" pos:start="43:44" pos:end="43:45">24</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    </block_content>}</block></if></if_stmt>

</block_content>}</block></function>
</unit>
