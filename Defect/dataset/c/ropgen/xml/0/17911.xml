<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<unit xmlns="http://www.srcML.org/srcML/src" xmlns:pos="http://www.srcML.org/srcML/position" revision="1.0.0" language="C" filename="dataset/ropgen/aug/0/17911.c" pos:tabs="8"><function pos:start="1:1" pos:end="45:1"><type pos:start="1:1" pos:end="1:4"><name pos:start="1:1" pos:end="1:4">void</name></type> <name pos:start="1:6" pos:end="1:30">ff_ac3_bit_alloc_calc_bap</name><parameter_list pos:start="1:31" pos:end="5:68">(<parameter pos:start="1:32" pos:end="1:44"><decl pos:start="1:32" pos:end="1:44"><type pos:start="1:32" pos:end="1:44"><name pos:start="1:32" pos:end="1:38">int16_t</name> <modifier pos:start="1:40" pos:end="1:40">*</modifier></type><name pos:start="1:41" pos:end="1:44">mask</name></decl></parameter>, <parameter pos:start="1:47" pos:end="1:58"><decl pos:start="1:47" pos:end="1:58"><type pos:start="1:47" pos:end="1:58"><name pos:start="1:47" pos:end="1:53">int16_t</name> <modifier pos:start="1:55" pos:end="1:55">*</modifier></type><name pos:start="1:56" pos:end="1:58">psd</name></decl></parameter>, <parameter pos:start="1:61" pos:end="1:69"><decl pos:start="1:61" pos:end="1:69"><type pos:start="1:61" pos:end="1:69"><name pos:start="1:61" pos:end="1:63">int</name></type> <name pos:start="1:65" pos:end="1:69">start</name></decl></parameter>, <parameter pos:start="1:72" pos:end="1:78"><decl pos:start="1:72" pos:end="1:78"><type pos:start="1:72" pos:end="1:78"><name pos:start="1:72" pos:end="1:74">int</name></type> <name pos:start="1:76" pos:end="1:78">end</name></decl></parameter>,

                               <parameter pos:start="3:32" pos:end="3:45"><decl pos:start="3:32" pos:end="3:45"><type pos:start="3:32" pos:end="3:45"><name pos:start="3:32" pos:end="3:34">int</name></type> <name pos:start="3:36" pos:end="3:45">snr_offset</name></decl></parameter>, <parameter pos:start="3:48" pos:end="3:56"><decl pos:start="3:48" pos:end="3:56"><type pos:start="3:48" pos:end="3:56"><name pos:start="3:48" pos:end="3:50">int</name></type> <name pos:start="3:52" pos:end="3:56">floor</name></decl></parameter>,

                               <parameter pos:start="5:32" pos:end="5:53"><decl pos:start="5:32" pos:end="5:53"><type pos:start="5:32" pos:end="5:53"><specifier pos:start="5:32" pos:end="5:36">const</specifier> <name pos:start="5:38" pos:end="5:44">uint8_t</name> <modifier pos:start="5:46" pos:end="5:46">*</modifier></type><name pos:start="5:47" pos:end="5:53">bap_tab</name></decl></parameter>, <parameter pos:start="5:56" pos:end="5:67"><decl pos:start="5:56" pos:end="5:67"><type pos:start="5:56" pos:end="5:67"><name pos:start="5:56" pos:end="5:62">uint8_t</name> <modifier pos:start="5:64" pos:end="5:64">*</modifier></type><name pos:start="5:65" pos:end="5:67">bap</name></decl></parameter>)</parameter_list>

<block pos:start="7:1" pos:end="45:1">{<block_content pos:start="9:5" pos:end="43:40">

    <decl_stmt pos:start="9:5" pos:end="9:31"><decl pos:start="9:5" pos:end="9:9"><type pos:start="9:5" pos:end="9:7"><name pos:start="9:5" pos:end="9:7">int</name></type> <name pos:start="9:9" pos:end="9:9">i</name></decl>, <decl pos:start="9:12" pos:end="9:12"><type ref="prev" pos:start="9:5" pos:end="9:7"/><name pos:start="9:12" pos:end="9:12">j</name></decl>, <decl pos:start="9:15" pos:end="9:18"><type ref="prev" pos:start="9:5" pos:end="9:7"/><name pos:start="9:15" pos:end="9:18">end1</name></decl>, <decl pos:start="9:21" pos:end="9:21"><type ref="prev" pos:start="9:5" pos:end="9:7"/><name pos:start="9:21" pos:end="9:21">v</name></decl>, <decl pos:start="9:24" pos:end="9:30"><type ref="prev" pos:start="9:5" pos:end="9:7"/><name pos:start="9:24" pos:end="9:30">address</name></decl>;</decl_stmt>



    <comment type="block" pos:start="13:5" pos:end="13:68">/* special case, if snr offset is -960, set all bap's to zero */</comment>

    <if_stmt pos:start="15:5" pos:end="21:5"><if pos:start="15:5" pos:end="21:5">if <condition pos:start="15:8" pos:end="15:27">(<expr pos:start="15:9" pos:end="15:26"><name pos:start="15:9" pos:end="15:18">snr_offset</name> <operator pos:start="15:20" pos:end="15:21">==</operator> <operator pos:start="15:23" pos:end="15:23">-</operator><literal type="number" pos:start="15:24" pos:end="15:26">960</literal></expr>)</condition> <block pos:start="15:29" pos:end="21:5">{<block_content pos:start="17:9" pos:end="19:15">

        <expr_stmt pos:start="17:9" pos:end="17:28"><expr pos:start="17:9" pos:end="17:27"><call pos:start="17:9" pos:end="17:27"><name pos:start="17:9" pos:end="17:14">memset</name><argument_list pos:start="17:15" pos:end="17:27">(<argument pos:start="17:16" pos:end="17:18"><expr pos:start="17:16" pos:end="17:18"><name pos:start="17:16" pos:end="17:18">bap</name></expr></argument>, <argument pos:start="17:21" pos:end="17:21"><expr pos:start="17:21" pos:end="17:21"><literal type="number" pos:start="17:21" pos:end="17:21">0</literal></expr></argument>, <argument pos:start="17:24" pos:end="17:26"><expr pos:start="17:24" pos:end="17:26"><literal type="number" pos:start="17:24" pos:end="17:26">256</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <return pos:start="19:9" pos:end="19:15">return;</return>

    </block_content>}</block></if></if_stmt>



    <expr_stmt pos:start="25:5" pos:end="25:14"><expr pos:start="25:5" pos:end="25:13"><name pos:start="25:5" pos:end="25:5">i</name> <operator pos:start="25:7" pos:end="25:7">=</operator> <name pos:start="25:9" pos:end="25:13">start</name></expr>;</expr_stmt>

    <expr_stmt pos:start="27:5" pos:end="27:31"><expr pos:start="27:5" pos:end="27:30"><name pos:start="27:5" pos:end="27:5">j</name> <operator pos:start="27:7" pos:end="27:7">=</operator> <name pos:start="27:9" pos:end="27:30"><name pos:start="27:9" pos:end="27:23">bin_to_band_tab</name><index pos:start="27:24" pos:end="27:30">[<expr pos:start="27:25" pos:end="27:29"><name pos:start="27:25" pos:end="27:29">start</name></expr>]</index></name></expr>;</expr_stmt>

    <do pos:start="29:5" pos:end="43:40">do <block pos:start="29:8" pos:end="43:5">{<block_content pos:start="31:9" pos:end="41:9">

        <expr_stmt pos:start="31:9" pos:end="31:70"><expr pos:start="31:9" pos:end="31:69"><name pos:start="31:9" pos:end="31:9">v</name> <operator pos:start="31:11" pos:end="31:11">=</operator> <operator pos:start="31:13" pos:end="31:13">(</operator><call pos:start="31:14" pos:end="31:51"><name pos:start="31:14" pos:end="31:18">FFMAX</name><argument_list pos:start="31:19" pos:end="31:51">(<argument pos:start="31:20" pos:end="31:47"><expr pos:start="31:20" pos:end="31:47"><name pos:start="31:20" pos:end="31:26"><name pos:start="31:20" pos:end="31:23">mask</name><index pos:start="31:24" pos:end="31:26">[<expr pos:start="31:25" pos:end="31:25"><name pos:start="31:25" pos:end="31:25">j</name></expr>]</index></name> <operator pos:start="31:28" pos:end="31:28">-</operator> <name pos:start="31:30" pos:end="31:39">snr_offset</name> <operator pos:start="31:41" pos:end="31:41">-</operator> <name pos:start="31:43" pos:end="31:47">floor</name></expr></argument>, <argument pos:start="31:50" pos:end="31:50"><expr pos:start="31:50" pos:end="31:50"><literal type="number" pos:start="31:50" pos:end="31:50">0</literal></expr></argument>)</argument_list></call> <operator pos:start="31:53" pos:end="31:53">&amp;</operator> <literal type="number" pos:start="31:55" pos:end="31:60">0x1FE0</literal><operator pos:start="31:61" pos:end="31:61">)</operator> <operator pos:start="31:63" pos:end="31:63">+</operator> <name pos:start="31:65" pos:end="31:69">floor</name></expr>;</expr_stmt>

        <expr_stmt pos:start="33:9" pos:end="33:80"><expr pos:start="33:9" pos:end="33:79"><name pos:start="33:9" pos:end="33:12">end1</name> <operator pos:start="33:14" pos:end="33:14">=</operator> <call pos:start="33:16" pos:end="33:79"><name pos:start="33:16" pos:end="33:20">FFMIN</name><argument_list pos:start="33:21" pos:end="33:79">(<argument pos:start="33:22" pos:end="33:73"><expr pos:start="33:22" pos:end="33:73"><name pos:start="33:22" pos:end="33:38"><name pos:start="33:22" pos:end="33:35">band_start_tab</name><index pos:start="33:36" pos:end="33:38">[<expr pos:start="33:37" pos:end="33:37"><name pos:start="33:37" pos:end="33:37">j</name></expr>]</index></name> <operator pos:start="33:40" pos:end="33:40">+</operator> <name pos:start="33:42" pos:end="33:73"><name pos:start="33:42" pos:end="33:70">ff_ac3_critical_band_size_tab</name><index pos:start="33:71" pos:end="33:73">[<expr pos:start="33:72" pos:end="33:72"><name pos:start="33:72" pos:end="33:72">j</name></expr>]</index></name></expr></argument>, <argument pos:start="33:76" pos:end="33:78"><expr pos:start="33:76" pos:end="33:78"><name pos:start="33:76" pos:end="33:78">end</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <for pos:start="35:9" pos:end="41:9">for <control pos:start="35:13" pos:end="35:29">(<init pos:start="35:14" pos:end="35:14">;</init> <condition pos:start="35:16" pos:end="35:24"><expr pos:start="35:16" pos:end="35:23"><name pos:start="35:16" pos:end="35:16">i</name> <operator pos:start="35:18" pos:end="35:18">&lt;</operator> <name pos:start="35:20" pos:end="35:23">end1</name></expr>;</condition> <incr pos:start="35:26" pos:end="35:28"><expr pos:start="35:26" pos:end="35:28"><name pos:start="35:26" pos:end="35:26">i</name><operator pos:start="35:27" pos:end="35:28">++</operator></expr></incr>)</control> <block pos:start="35:31" pos:end="41:9">{<block_content pos:start="37:13" pos:end="39:38">

            <expr_stmt pos:start="37:13" pos:end="37:56"><expr pos:start="37:13" pos:end="37:55"><name pos:start="37:13" pos:end="37:19">address</name> <operator pos:start="37:21" pos:end="37:21">=</operator> <call pos:start="37:23" pos:end="37:55"><name pos:start="37:23" pos:end="37:29">av_clip</name><argument_list pos:start="37:30" pos:end="37:55">(<argument pos:start="37:31" pos:end="37:47"><expr pos:start="37:31" pos:end="37:47"><operator pos:start="37:31" pos:end="37:31">(</operator><name pos:start="37:32" pos:end="37:37"><name pos:start="37:32" pos:end="37:34">psd</name><index pos:start="37:35" pos:end="37:37">[<expr pos:start="37:36" pos:end="37:36"><name pos:start="37:36" pos:end="37:36">i</name></expr>]</index></name> <operator pos:start="37:39" pos:end="37:39">-</operator> <name pos:start="37:41" pos:end="37:41">v</name><operator pos:start="37:42" pos:end="37:42">)</operator> <operator pos:start="37:44" pos:end="37:45">&gt;&gt;</operator> <literal type="number" pos:start="37:47" pos:end="37:47">5</literal></expr></argument>, <argument pos:start="37:50" pos:end="37:50"><expr pos:start="37:50" pos:end="37:50"><literal type="number" pos:start="37:50" pos:end="37:50">0</literal></expr></argument>, <argument pos:start="37:53" pos:end="37:54"><expr pos:start="37:53" pos:end="37:54"><literal type="number" pos:start="37:53" pos:end="37:54">63</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

            <expr_stmt pos:start="39:13" pos:end="39:38"><expr pos:start="39:13" pos:end="39:37"><name pos:start="39:13" pos:end="39:18"><name pos:start="39:13" pos:end="39:15">bap</name><index pos:start="39:16" pos:end="39:18">[<expr pos:start="39:17" pos:end="39:17"><name pos:start="39:17" pos:end="39:17">i</name></expr>]</index></name> <operator pos:start="39:20" pos:end="39:20">=</operator> <name pos:start="39:22" pos:end="39:37"><name pos:start="39:22" pos:end="39:28">bap_tab</name><index pos:start="39:29" pos:end="39:37">[<expr pos:start="39:30" pos:end="39:36"><name pos:start="39:30" pos:end="39:36">address</name></expr>]</index></name></expr>;</expr_stmt>

        </block_content>}</block></for>

    </block_content>}</block> while <condition pos:start="43:13" pos:end="43:39">(<expr pos:start="43:14" pos:end="43:38"><name pos:start="43:14" pos:end="43:16">end</name> <operator pos:start="43:18" pos:end="43:18">&gt;</operator> <name pos:start="43:20" pos:end="43:38"><name pos:start="43:20" pos:end="43:33">band_start_tab</name><index pos:start="43:34" pos:end="43:38">[<expr pos:start="43:35" pos:end="43:37"><name pos:start="43:35" pos:end="43:35">j</name><operator pos:start="43:36" pos:end="43:37">++</operator></expr>]</index></name></expr>)</condition>;</do>

</block_content>}</block></function>
</unit>
