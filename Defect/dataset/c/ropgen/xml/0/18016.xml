<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<unit xmlns="http://www.srcML.org/srcML/src" xmlns:pos="http://www.srcML.org/srcML/position" revision="1.0.0" language="C" filename="dataset/ropgen/aug/0/18016.c" pos:tabs="8"><function pos:start="1:1" pos:end="65:1"><type pos:start="1:1" pos:end="1:20"><specifier pos:start="1:1" pos:end="1:6">static</specifier> <name pos:start="1:8" pos:end="1:18">QVirtIOSCSI</name> <modifier pos:start="1:20" pos:end="1:20">*</modifier></type><name pos:start="1:21" pos:end="1:41">qvirtio_scsi_pci_init</name><parameter_list pos:start="1:42" pos:end="1:51">(<parameter pos:start="1:43" pos:end="1:50"><decl pos:start="1:43" pos:end="1:50"><type pos:start="1:43" pos:end="1:45"><name pos:start="1:43" pos:end="1:45">int</name></type> <name pos:start="1:47" pos:end="1:50">slot</name></decl></parameter>)</parameter_list>

<block pos:start="3:1" pos:end="65:1">{<block_content pos:start="5:5" pos:end="63:14">

    <decl_stmt pos:start="5:5" pos:end="5:20"><decl pos:start="5:5" pos:end="5:19"><type pos:start="5:5" pos:end="5:17"><name pos:start="5:5" pos:end="5:15">QVirtIOSCSI</name> <modifier pos:start="5:17" pos:end="5:17">*</modifier></type><name pos:start="5:18" pos:end="5:19">vs</name></decl>;</decl_stmt>

    <decl_stmt pos:start="7:5" pos:end="7:26"><decl pos:start="7:5" pos:end="7:25"><type pos:start="7:5" pos:end="7:22"><name pos:start="7:5" pos:end="7:20">QVirtioPCIDevice</name> <modifier pos:start="7:22" pos:end="7:22">*</modifier></type><name pos:start="7:23" pos:end="7:25">dev</name></decl>;</decl_stmt>

    <decl_stmt pos:start="9:5" pos:end="9:15"><decl pos:start="9:5" pos:end="9:14"><type pos:start="9:5" pos:end="9:10"><name pos:start="9:5" pos:end="9:8">void</name> <modifier pos:start="9:10" pos:end="9:10">*</modifier></type><name pos:start="9:11" pos:end="9:14">addr</name></decl>;</decl_stmt>

    <decl_stmt pos:start="11:5" pos:end="11:10"><decl pos:start="11:5" pos:end="11:9"><type pos:start="11:5" pos:end="11:7"><name pos:start="11:5" pos:end="11:7">int</name></type> <name pos:start="11:9" pos:end="11:9">i</name></decl>;</decl_stmt>



    <expr_stmt pos:start="15:5" pos:end="15:32"><expr pos:start="15:5" pos:end="15:31"><name pos:start="15:5" pos:end="15:6">vs</name> <operator pos:start="15:8" pos:end="15:8">=</operator> <call pos:start="15:10" pos:end="15:31"><name pos:start="15:10" pos:end="15:15">g_new0</name><argument_list pos:start="15:16" pos:end="15:31">(<argument pos:start="15:17" pos:end="15:27"><expr pos:start="15:17" pos:end="15:27"><name pos:start="15:17" pos:end="15:27">QVirtIOSCSI</name></expr></argument>, <argument pos:start="15:30" pos:end="15:30"><expr pos:start="15:30" pos:end="15:30"><literal type="number" pos:start="15:30" pos:end="15:30">1</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    <expr_stmt pos:start="17:5" pos:end="17:32"><expr pos:start="17:5" pos:end="17:31"><name pos:start="17:5" pos:end="17:13"><name pos:start="17:5" pos:end="17:6">vs</name><operator pos:start="17:7" pos:end="17:8">-&gt;</operator><name pos:start="17:9" pos:end="17:13">alloc</name></name> <operator pos:start="17:15" pos:end="17:15">=</operator> <call pos:start="17:17" pos:end="17:31"><name pos:start="17:17" pos:end="17:29">pc_alloc_init</name><argument_list pos:start="17:30" pos:end="17:31">()</argument_list></call></expr>;</expr_stmt>

    <expr_stmt pos:start="19:5" pos:end="19:29"><expr pos:start="19:5" pos:end="19:28"><name pos:start="19:5" pos:end="19:11"><name pos:start="19:5" pos:end="19:6">vs</name><operator pos:start="19:7" pos:end="19:8">-&gt;</operator><name pos:start="19:9" pos:end="19:11">bus</name></name> <operator pos:start="19:13" pos:end="19:13">=</operator> <call pos:start="19:15" pos:end="19:28"><name pos:start="19:15" pos:end="19:26">qpci_init_pc</name><argument_list pos:start="19:27" pos:end="19:28">()</argument_list></call></expr>;</expr_stmt>



    <expr_stmt pos:start="23:5" pos:end="23:67"><expr pos:start="23:5" pos:end="23:66"><name pos:start="23:5" pos:end="23:7">dev</name> <operator pos:start="23:9" pos:end="23:9">=</operator> <call pos:start="23:11" pos:end="23:66"><name pos:start="23:11" pos:end="23:33">qvirtio_pci_device_find</name><argument_list pos:start="23:34" pos:end="23:66">(<argument pos:start="23:35" pos:end="23:41"><expr pos:start="23:35" pos:end="23:41"><name pos:start="23:35" pos:end="23:41"><name pos:start="23:35" pos:end="23:36">vs</name><operator pos:start="23:37" pos:end="23:38">-&gt;</operator><name pos:start="23:39" pos:end="23:41">bus</name></name></expr></argument>, <argument pos:start="23:44" pos:end="23:65"><expr pos:start="23:44" pos:end="23:65"><name pos:start="23:44" pos:end="23:65">QVIRTIO_SCSI_DEVICE_ID</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    <expr_stmt pos:start="25:5" pos:end="25:35"><expr pos:start="25:5" pos:end="25:34"><name pos:start="25:5" pos:end="25:11"><name pos:start="25:5" pos:end="25:6">vs</name><operator pos:start="25:7" pos:end="25:8">-&gt;</operator><name pos:start="25:9" pos:end="25:11">dev</name></name> <operator pos:start="25:13" pos:end="25:13">=</operator> <operator pos:start="25:15" pos:end="25:15">(</operator><name pos:start="25:16" pos:end="25:28">QVirtioDevice</name> <operator pos:start="25:30" pos:end="25:30">*</operator><operator pos:start="25:31" pos:end="25:31">)</operator><name pos:start="25:32" pos:end="25:34">dev</name></expr>;</expr_stmt>

    <expr_stmt pos:start="27:5" pos:end="27:26"><expr pos:start="27:5" pos:end="27:25"><call pos:start="27:5" pos:end="27:25"><name pos:start="27:5" pos:end="27:12">g_assert</name><argument_list pos:start="27:13" pos:end="27:25">(<argument pos:start="27:14" pos:end="27:24"><expr pos:start="27:14" pos:end="27:24"><name pos:start="27:14" pos:end="27:16">dev</name> <operator pos:start="27:18" pos:end="27:19">!=</operator> <name pos:start="27:21" pos:end="27:24">NULL</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    <expr_stmt pos:start="29:5" pos:end="29:70"><expr pos:start="29:5" pos:end="29:69"><call pos:start="29:5" pos:end="29:69"><name pos:start="29:5" pos:end="29:19">g_assert_cmphex</name><argument_list pos:start="29:20" pos:end="29:69">(<argument pos:start="29:21" pos:end="29:40"><expr pos:start="29:21" pos:end="29:40"><name pos:start="29:21" pos:end="29:40"><name pos:start="29:21" pos:end="29:22">vs</name><operator pos:start="29:23" pos:end="29:24">-&gt;</operator><name pos:start="29:25" pos:end="29:27">dev</name><operator pos:start="29:28" pos:end="29:29">-&gt;</operator><name pos:start="29:30" pos:end="29:40">device_type</name></name></expr></argument>, <argument pos:start="29:43" pos:end="29:44"><expr pos:start="29:43" pos:end="29:44"><operator pos:start="29:43" pos:end="29:44">==</operator></expr></argument>, <argument pos:start="29:47" pos:end="29:68"><expr pos:start="29:47" pos:end="29:68"><name pos:start="29:47" pos:end="29:68">QVIRTIO_SCSI_DEVICE_ID</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>



    <expr_stmt pos:start="33:5" pos:end="33:35"><expr pos:start="33:5" pos:end="33:34"><call pos:start="33:5" pos:end="33:34"><name pos:start="33:5" pos:end="33:29">qvirtio_pci_device_enable</name><argument_list pos:start="33:30" pos:end="33:34">(<argument pos:start="33:31" pos:end="33:33"><expr pos:start="33:31" pos:end="33:33"><name pos:start="33:31" pos:end="33:33">dev</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    <expr_stmt pos:start="35:5" pos:end="35:41"><expr pos:start="35:5" pos:end="35:40"><call pos:start="35:5" pos:end="35:40"><name pos:start="35:5" pos:end="35:17">qvirtio_reset</name><argument_list pos:start="35:18" pos:end="35:40">(<argument pos:start="35:19" pos:end="35:30"><expr pos:start="35:19" pos:end="35:30"><operator pos:start="35:19" pos:end="35:19">&amp;</operator><name pos:start="35:20" pos:end="35:30">qvirtio_pci</name></expr></argument>, <argument pos:start="35:33" pos:end="35:39"><expr pos:start="35:33" pos:end="35:39"><name pos:start="35:33" pos:end="35:39"><name pos:start="35:33" pos:end="35:34">vs</name><operator pos:start="35:35" pos:end="35:36">-&gt;</operator><name pos:start="35:37" pos:end="35:39">dev</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    <expr_stmt pos:start="37:5" pos:end="37:51"><expr pos:start="37:5" pos:end="37:50"><call pos:start="37:5" pos:end="37:50"><name pos:start="37:5" pos:end="37:27">qvirtio_set_acknowledge</name><argument_list pos:start="37:28" pos:end="37:50">(<argument pos:start="37:29" pos:end="37:40"><expr pos:start="37:29" pos:end="37:40"><operator pos:start="37:29" pos:end="37:29">&amp;</operator><name pos:start="37:30" pos:end="37:40">qvirtio_pci</name></expr></argument>, <argument pos:start="37:43" pos:end="37:49"><expr pos:start="37:43" pos:end="37:49"><name pos:start="37:43" pos:end="37:49"><name pos:start="37:43" pos:end="37:44">vs</name><operator pos:start="37:45" pos:end="37:46">-&gt;</operator><name pos:start="37:47" pos:end="37:49">dev</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    <expr_stmt pos:start="39:5" pos:end="39:46"><expr pos:start="39:5" pos:end="39:45"><call pos:start="39:5" pos:end="39:45"><name pos:start="39:5" pos:end="39:22">qvirtio_set_driver</name><argument_list pos:start="39:23" pos:end="39:45">(<argument pos:start="39:24" pos:end="39:35"><expr pos:start="39:24" pos:end="39:35"><operator pos:start="39:24" pos:end="39:24">&amp;</operator><name pos:start="39:25" pos:end="39:35">qvirtio_pci</name></expr></argument>, <argument pos:start="39:38" pos:end="39:44"><expr pos:start="39:38" pos:end="39:44"><name pos:start="39:38" pos:end="39:44"><name pos:start="39:38" pos:end="39:39">vs</name><operator pos:start="39:40" pos:end="39:41">-&gt;</operator><name pos:start="39:42" pos:end="39:44">dev</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>



    <expr_stmt pos:start="43:5" pos:end="43:59"><expr pos:start="43:5" pos:end="43:58"><name pos:start="43:5" pos:end="43:8">addr</name> <operator pos:start="43:10" pos:end="43:10">=</operator> <name pos:start="43:12" pos:end="43:20"><name pos:start="43:12" pos:end="43:14">dev</name><operator pos:start="43:15" pos:end="43:16">-&gt;</operator><name pos:start="43:17" pos:end="43:20">addr</name></name> <operator pos:start="43:22" pos:end="43:22">+</operator> <name pos:start="43:24" pos:end="43:58">QVIRTIO_PCI_DEVICE_SPECIFIC_NO_MSIX</name></expr>;</expr_stmt>

    <expr_stmt pos:start="45:5" pos:end="47:69"><expr pos:start="45:5" pos:end="47:68"><name pos:start="45:5" pos:end="45:18"><name pos:start="45:5" pos:end="45:6">vs</name><operator pos:start="45:7" pos:end="45:8">-&gt;</operator><name pos:start="45:9" pos:end="45:18">num_queues</name></name> <operator pos:start="45:20" pos:end="45:20">=</operator> <call pos:start="45:22" pos:end="47:68"><name pos:start="45:22" pos:end="45:41">qvirtio_config_readl</name><argument_list pos:start="45:42" pos:end="47:68">(<argument pos:start="45:43" pos:end="45:54"><expr pos:start="45:43" pos:end="45:54"><operator pos:start="45:43" pos:end="45:43">&amp;</operator><name pos:start="45:44" pos:end="45:54">qvirtio_pci</name></expr></argument>, <argument pos:start="45:57" pos:end="45:63"><expr pos:start="45:57" pos:end="45:63"><name pos:start="45:57" pos:end="45:63"><name pos:start="45:57" pos:end="45:58">vs</name><operator pos:start="45:59" pos:end="45:60">-&gt;</operator><name pos:start="45:61" pos:end="45:63">dev</name></name></expr></argument>,

                                          <argument pos:start="47:43" pos:end="47:67"><expr pos:start="47:43" pos:end="47:67"><operator pos:start="47:43" pos:end="47:43">(</operator><name pos:start="47:44" pos:end="47:51">uint64_t</name><operator pos:start="47:52" pos:end="47:52">)</operator><operator pos:start="47:53" pos:end="47:53">(</operator><name pos:start="47:54" pos:end="47:62">uintptr_t</name><operator pos:start="47:63" pos:end="47:63">)</operator><name pos:start="47:64" pos:end="47:67">addr</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>



    <expr_stmt pos:start="51:5" pos:end="51:55"><expr pos:start="51:5" pos:end="51:54"><call pos:start="51:5" pos:end="51:54"><name pos:start="51:5" pos:end="51:19">g_assert_cmpint</name><argument_list pos:start="51:20" pos:end="51:54">(<argument pos:start="51:21" pos:end="51:34"><expr pos:start="51:21" pos:end="51:34"><name pos:start="51:21" pos:end="51:34"><name pos:start="51:21" pos:end="51:22">vs</name><operator pos:start="51:23" pos:end="51:24">-&gt;</operator><name pos:start="51:25" pos:end="51:34">num_queues</name></name></expr></argument>, <argument pos:start="51:37" pos:end="51:37"><expr pos:start="51:37" pos:end="51:37"><operator pos:start="51:37" pos:end="51:37">&lt;</operator></expr></argument>, <argument pos:start="51:40" pos:end="51:53"><expr pos:start="51:40" pos:end="51:53"><name pos:start="51:40" pos:end="51:53">MAX_NUM_QUEUES</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>



    <for pos:start="55:5" pos:end="59:5">for <control pos:start="55:9" pos:end="55:44">(<init pos:start="55:10" pos:end="55:15"><expr pos:start="55:10" pos:end="55:14"><name pos:start="55:10" pos:end="55:10">i</name> <operator pos:start="55:12" pos:end="55:12">=</operator> <literal type="number" pos:start="55:14" pos:end="55:14">0</literal></expr>;</init> <condition pos:start="55:17" pos:end="55:39"><expr pos:start="55:17" pos:end="55:38"><name pos:start="55:17" pos:end="55:17">i</name> <operator pos:start="55:19" pos:end="55:19">&lt;</operator> <name pos:start="55:21" pos:end="55:34"><name pos:start="55:21" pos:end="55:22">vs</name><operator pos:start="55:23" pos:end="55:24">-&gt;</operator><name pos:start="55:25" pos:end="55:34">num_queues</name></name> <operator pos:start="55:36" pos:end="55:36">+</operator> <literal type="number" pos:start="55:38" pos:end="55:38">2</literal></expr>;</condition> <incr pos:start="55:41" pos:end="55:43"><expr pos:start="55:41" pos:end="55:43"><name pos:start="55:41" pos:end="55:41">i</name><operator pos:start="55:42" pos:end="55:43">++</operator></expr></incr>)</control> <block pos:start="55:46" pos:end="59:5">{<block_content pos:start="57:9" pos:end="57:74">

        <expr_stmt pos:start="57:9" pos:end="57:74"><expr pos:start="57:9" pos:end="57:73"><name pos:start="57:9" pos:end="57:17"><name pos:start="57:9" pos:end="57:10">vs</name><operator pos:start="57:11" pos:end="57:12">-&gt;</operator><name pos:start="57:13" pos:end="57:14">vq</name><index pos:start="57:15" pos:end="57:17">[<expr pos:start="57:16" pos:end="57:16"><name pos:start="57:16" pos:end="57:16">i</name></expr>]</index></name> <operator pos:start="57:19" pos:end="57:19">=</operator> <call pos:start="57:21" pos:end="57:73"><name pos:start="57:21" pos:end="57:36">qvirtqueue_setup</name><argument_list pos:start="57:37" pos:end="57:73">(<argument pos:start="57:38" pos:end="57:49"><expr pos:start="57:38" pos:end="57:49"><operator pos:start="57:38" pos:end="57:38">&amp;</operator><name pos:start="57:39" pos:end="57:49">qvirtio_pci</name></expr></argument>, <argument pos:start="57:52" pos:end="57:58"><expr pos:start="57:52" pos:end="57:58"><name pos:start="57:52" pos:end="57:58"><name pos:start="57:52" pos:end="57:53">vs</name><operator pos:start="57:54" pos:end="57:55">-&gt;</operator><name pos:start="57:56" pos:end="57:58">dev</name></name></expr></argument>, <argument pos:start="57:61" pos:end="57:69"><expr pos:start="57:61" pos:end="57:69"><name pos:start="57:61" pos:end="57:69"><name pos:start="57:61" pos:end="57:62">vs</name><operator pos:start="57:63" pos:end="57:64">-&gt;</operator><name pos:start="57:65" pos:end="57:69">alloc</name></name></expr></argument>, <argument pos:start="57:72" pos:end="57:72"><expr pos:start="57:72" pos:end="57:72"><name pos:start="57:72" pos:end="57:72">i</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    </block_content>}</block></for>



    <return pos:start="63:5" pos:end="63:14">return <expr pos:start="63:12" pos:end="63:13"><name pos:start="63:12" pos:end="63:13">vs</name></expr>;</return>

</block_content>}</block></function>
</unit>
