<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<unit xmlns="http://www.srcML.org/srcML/src" xmlns:pos="http://www.srcML.org/srcML/position" revision="1.0.0" language="C" filename="dataset/ropgen/aug/0/23012.c" pos:tabs="8"><function pos:start="1:1" pos:end="69:1"><type pos:start="1:1" pos:end="1:11"><specifier pos:start="1:1" pos:end="1:6">static</specifier> <name pos:start="1:8" pos:end="1:11">void</name></type> <name pos:start="1:13" pos:end="1:37">virtio_net_set_multiqueue</name><parameter_list pos:start="1:38" pos:end="1:77">(<parameter pos:start="1:39" pos:end="1:50"><decl pos:start="1:39" pos:end="1:50"><type pos:start="1:39" pos:end="1:50"><name pos:start="1:39" pos:end="1:47">VirtIONet</name> <modifier pos:start="1:49" pos:end="1:49">*</modifier></type><name pos:start="1:50" pos:end="1:50">n</name></decl></parameter>, <parameter pos:start="1:53" pos:end="1:66"><decl pos:start="1:53" pos:end="1:66"><type pos:start="1:53" pos:end="1:66"><name pos:start="1:53" pos:end="1:55">int</name></type> <name pos:start="1:57" pos:end="1:66">multiqueue</name></decl></parameter>, <parameter pos:start="1:69" pos:end="1:76"><decl pos:start="1:69" pos:end="1:76"><type pos:start="1:69" pos:end="1:76"><name pos:start="1:69" pos:end="1:71">int</name></type> <name pos:start="1:73" pos:end="1:76">ctrl</name></decl></parameter>)</parameter_list>

<block pos:start="3:1" pos:end="69:1">{<block_content pos:start="5:5" pos:end="67:29">

    <decl_stmt pos:start="5:5" pos:end="5:42"><decl pos:start="5:5" pos:end="5:41"><type pos:start="5:5" pos:end="5:18"><name pos:start="5:5" pos:end="5:16">VirtIODevice</name> <modifier pos:start="5:18" pos:end="5:18">*</modifier></type><name pos:start="5:19" pos:end="5:22">vdev</name> <init pos:start="5:24" pos:end="5:41">= <expr pos:start="5:26" pos:end="5:41"><call pos:start="5:26" pos:end="5:41"><name pos:start="5:26" pos:end="5:38">VIRTIO_DEVICE</name><argument_list pos:start="5:39" pos:end="5:41">(<argument pos:start="5:40" pos:end="5:40"><expr pos:start="5:40" pos:end="5:40"><name pos:start="5:40" pos:end="5:40">n</name></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>

    <decl_stmt pos:start="7:5" pos:end="7:48"><decl pos:start="7:5" pos:end="7:9"><type pos:start="7:5" pos:end="7:7"><name pos:start="7:5" pos:end="7:7">int</name></type> <name pos:start="7:9" pos:end="7:9">i</name></decl>, <decl pos:start="7:12" pos:end="7:47"><type ref="prev" pos:start="7:5" pos:end="7:7"/><name pos:start="7:12" pos:end="7:14">max</name> <init pos:start="7:16" pos:end="7:47">= <expr pos:start="7:18" pos:end="7:47"><ternary pos:start="7:18" pos:end="7:47"><condition pos:start="7:18" pos:end="7:29"><expr pos:start="7:18" pos:end="7:27"><name pos:start="7:18" pos:end="7:27">multiqueue</name></expr> ?</condition><then pos:start="7:31" pos:end="7:43"> <expr pos:start="7:31" pos:end="7:43"><name pos:start="7:31" pos:end="7:43"><name pos:start="7:31" pos:end="7:31">n</name><operator pos:start="7:32" pos:end="7:33">-&gt;</operator><name pos:start="7:34" pos:end="7:43">max_queues</name></name></expr> </then><else pos:start="7:45" pos:end="7:47">: <expr pos:start="7:47" pos:end="7:47"><literal type="number" pos:start="7:47" pos:end="7:47">1</literal></expr></else></ternary></expr></init></decl>;</decl_stmt>



    <expr_stmt pos:start="11:5" pos:end="11:31"><expr pos:start="11:5" pos:end="11:30"><name pos:start="11:5" pos:end="11:17"><name pos:start="11:5" pos:end="11:5">n</name><operator pos:start="11:6" pos:end="11:7">-&gt;</operator><name pos:start="11:8" pos:end="11:17">multiqueue</name></name> <operator pos:start="11:19" pos:end="11:19">=</operator> <name pos:start="11:21" pos:end="11:30">multiqueue</name></expr>;</expr_stmt>



    <for pos:start="15:5" pos:end="19:5">for <control pos:start="15:9" pos:end="15:48">(<init pos:start="15:10" pos:end="15:15"><expr pos:start="15:10" pos:end="15:14"><name pos:start="15:10" pos:end="15:10">i</name> <operator pos:start="15:12" pos:end="15:12">=</operator> <literal type="number" pos:start="15:14" pos:end="15:14">2</literal></expr>;</init> <condition pos:start="15:17" pos:end="15:43"><expr pos:start="15:17" pos:end="15:42"><name pos:start="15:17" pos:end="15:17">i</name> <operator pos:start="15:19" pos:end="15:20">&lt;=</operator> <name pos:start="15:22" pos:end="15:34"><name pos:start="15:22" pos:end="15:22">n</name><operator pos:start="15:23" pos:end="15:24">-&gt;</operator><name pos:start="15:25" pos:end="15:34">max_queues</name></name> <operator pos:start="15:36" pos:end="15:36">*</operator> <literal type="number" pos:start="15:38" pos:end="15:40">2</literal> <operator pos:start="15:40" pos:end="15:40">+</operator> <literal type="number" pos:start="15:42" pos:end="15:42">1</literal></expr>;</condition> <incr pos:start="15:45" pos:end="15:47"><expr pos:start="15:45" pos:end="15:47"><name pos:start="15:45" pos:end="15:45">i</name><operator pos:start="15:46" pos:end="15:47">++</operator></expr></incr>)</control> <block pos:start="15:50" pos:end="19:5">{<block_content pos:start="17:9" pos:end="17:34">

        <expr_stmt pos:start="17:9" pos:end="17:34"><expr pos:start="17:9" pos:end="17:33"><call pos:start="17:9" pos:end="17:33"><name pos:start="17:9" pos:end="17:24">virtio_del_queue</name><argument_list pos:start="17:25" pos:end="17:33">(<argument pos:start="17:26" pos:end="17:29"><expr pos:start="17:26" pos:end="17:29"><name pos:start="17:26" pos:end="17:29">vdev</name></expr></argument>, <argument pos:start="17:32" pos:end="17:32"><expr pos:start="17:32" pos:end="17:32"><name pos:start="17:32" pos:end="17:32">i</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    </block_content>}</block></for>



    <for pos:start="23:5" pos:end="55:5">for <control pos:start="23:9" pos:end="23:29">(<init pos:start="23:10" pos:end="23:15"><expr pos:start="23:10" pos:end="23:14"><name pos:start="23:10" pos:end="23:10">i</name> <operator pos:start="23:12" pos:end="23:12">=</operator> <literal type="number" pos:start="23:14" pos:end="23:14">1</literal></expr>;</init> <condition pos:start="23:17" pos:end="23:24"><expr pos:start="23:17" pos:end="23:23"><name pos:start="23:17" pos:end="23:17">i</name> <operator pos:start="23:19" pos:end="23:19">&lt;</operator> <name pos:start="23:21" pos:end="23:23">max</name></expr>;</condition> <incr pos:start="23:26" pos:end="23:28"><expr pos:start="23:26" pos:end="23:28"><name pos:start="23:26" pos:end="23:26">i</name><operator pos:start="23:27" pos:end="23:28">++</operator></expr></incr>)</control> <block pos:start="23:31" pos:end="55:5">{<block_content pos:start="25:9" pos:end="53:24">

        <expr_stmt pos:start="25:9" pos:end="25:76"><expr pos:start="25:9" pos:end="25:75"><name pos:start="25:9" pos:end="25:17"><name pos:start="25:9" pos:end="25:9">n</name><operator pos:start="25:10" pos:end="25:11">-&gt;</operator><name pos:start="25:12" pos:end="25:14">vqs</name><index pos:start="25:15" pos:end="25:17">[<expr pos:start="25:16" pos:end="25:16"><name pos:start="25:16" pos:end="25:16">i</name></expr>]</index></name><operator pos:start="25:18" pos:end="25:18">.</operator><name pos:start="25:19" pos:end="25:23">rx_vq</name> <operator pos:start="25:25" pos:end="25:25">=</operator> <call pos:start="25:27" pos:end="25:75"><name pos:start="25:27" pos:end="25:42">virtio_add_queue</name><argument_list pos:start="25:43" pos:end="25:75">(<argument pos:start="25:44" pos:end="25:47"><expr pos:start="25:44" pos:end="25:47"><name pos:start="25:44" pos:end="25:47">vdev</name></expr></argument>, <argument pos:start="25:50" pos:end="25:52"><expr pos:start="25:50" pos:end="25:52"><literal type="number" pos:start="25:50" pos:end="25:52">256</literal></expr></argument>, <argument pos:start="25:55" pos:end="25:74"><expr pos:start="25:55" pos:end="25:74"><name pos:start="25:55" pos:end="25:74">virtio_net_handle_rx</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <if_stmt pos:start="27:9" pos:end="47:9"><if pos:start="27:9" pos:end="39:9">if <condition pos:start="27:12" pos:end="27:31">(<expr pos:start="27:13" pos:end="27:30"><name pos:start="27:13" pos:end="27:21"><name pos:start="27:13" pos:end="27:13">n</name><operator pos:start="27:14" pos:end="27:15">-&gt;</operator><name pos:start="27:16" pos:end="27:18">vqs</name><index pos:start="27:19" pos:end="27:21">[<expr pos:start="27:20" pos:end="27:20"><name pos:start="27:20" pos:end="27:20">i</name></expr>]</index></name><operator pos:start="27:22" pos:end="27:22">.</operator><name pos:start="27:23" pos:end="27:30">tx_timer</name></expr>)</condition> <block pos:start="27:33" pos:end="39:9">{<block_content pos:start="29:13" pos:end="37:63">

            <expr_stmt pos:start="29:13" pos:end="31:72"><expr pos:start="29:13" pos:end="31:71"><name pos:start="29:13" pos:end="29:21"><name pos:start="29:13" pos:end="29:13">n</name><operator pos:start="29:14" pos:end="29:15">-&gt;</operator><name pos:start="29:16" pos:end="29:18">vqs</name><index pos:start="29:19" pos:end="29:21">[<expr pos:start="29:20" pos:end="29:20"><name pos:start="29:20" pos:end="29:20">i</name></expr>]</index></name><operator pos:start="29:22" pos:end="29:22">.</operator><name pos:start="29:23" pos:end="29:27">tx_vq</name> <operator pos:start="29:29" pos:end="29:29">=</operator>

                <call pos:start="31:17" pos:end="31:71"><name pos:start="31:17" pos:end="31:32">virtio_add_queue</name><argument_list pos:start="31:33" pos:end="31:71">(<argument pos:start="31:34" pos:end="31:37"><expr pos:start="31:34" pos:end="31:37"><name pos:start="31:34" pos:end="31:37">vdev</name></expr></argument>, <argument pos:start="31:40" pos:end="31:42"><expr pos:start="31:40" pos:end="31:42"><literal type="number" pos:start="31:40" pos:end="31:42">256</literal></expr></argument>, <argument pos:start="31:45" pos:end="31:70"><expr pos:start="31:45" pos:end="31:70"><name pos:start="31:45" pos:end="31:70">virtio_net_handle_tx_timer</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

            <expr_stmt pos:start="33:13" pos:end="37:63"><expr pos:start="33:13" pos:end="37:62"><name pos:start="33:13" pos:end="33:21"><name pos:start="33:13" pos:end="33:13">n</name><operator pos:start="33:14" pos:end="33:15">-&gt;</operator><name pos:start="33:16" pos:end="33:18">vqs</name><index pos:start="33:19" pos:end="33:21">[<expr pos:start="33:20" pos:end="33:20"><name pos:start="33:20" pos:end="33:20">i</name></expr>]</index></name><operator pos:start="33:22" pos:end="33:22">.</operator><name pos:start="33:23" pos:end="33:30">tx_timer</name> <operator pos:start="33:32" pos:end="33:32">=</operator> <call pos:start="33:34" pos:end="37:62"><name pos:start="33:34" pos:end="33:50">qemu_new_timer_ns</name><argument_list pos:start="33:51" pos:end="37:62">(<argument pos:start="33:52" pos:end="33:59"><expr pos:start="33:52" pos:end="33:59"><name pos:start="33:52" pos:end="33:59">vm_clock</name></expr></argument>,

                                                   <argument pos:start="35:52" pos:end="35:70"><expr pos:start="35:52" pos:end="35:70"><name pos:start="35:52" pos:end="35:70">virtio_net_tx_timer</name></expr></argument>,

                                                   <argument pos:start="37:52" pos:end="37:61"><expr pos:start="37:52" pos:end="37:61"><operator pos:start="37:52" pos:end="37:52">&amp;</operator><name pos:start="37:53" pos:end="37:61"><name pos:start="37:53" pos:end="37:53">n</name><operator pos:start="37:54" pos:end="37:55">-&gt;</operator><name pos:start="37:56" pos:end="37:58">vqs</name><index pos:start="37:59" pos:end="37:61">[<expr pos:start="37:60" pos:end="37:60"><name pos:start="37:60" pos:end="37:60">i</name></expr>]</index></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        </block_content>}</block></if> <else pos:start="39:11" pos:end="47:9">else <block pos:start="39:16" pos:end="47:9">{<block_content pos:start="41:13" pos:end="45:72">

            <expr_stmt pos:start="41:13" pos:end="43:69"><expr pos:start="41:13" pos:end="43:68"><name pos:start="41:13" pos:end="41:21"><name pos:start="41:13" pos:end="41:13">n</name><operator pos:start="41:14" pos:end="41:15">-&gt;</operator><name pos:start="41:16" pos:end="41:18">vqs</name><index pos:start="41:19" pos:end="41:21">[<expr pos:start="41:20" pos:end="41:20"><name pos:start="41:20" pos:end="41:20">i</name></expr>]</index></name><operator pos:start="41:22" pos:end="41:22">.</operator><name pos:start="41:23" pos:end="41:27">tx_vq</name> <operator pos:start="41:29" pos:end="41:29">=</operator>

                <call pos:start="43:17" pos:end="43:68"><name pos:start="43:17" pos:end="43:32">virtio_add_queue</name><argument_list pos:start="43:33" pos:end="43:68">(<argument pos:start="43:34" pos:end="43:37"><expr pos:start="43:34" pos:end="43:37"><name pos:start="43:34" pos:end="43:37">vdev</name></expr></argument>, <argument pos:start="43:40" pos:end="43:42"><expr pos:start="43:40" pos:end="43:42"><literal type="number" pos:start="43:40" pos:end="43:42">256</literal></expr></argument>, <argument pos:start="43:45" pos:end="43:67"><expr pos:start="43:45" pos:end="43:67"><name pos:start="43:45" pos:end="43:67">virtio_net_handle_tx_bh</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

            <expr_stmt pos:start="45:13" pos:end="45:72"><expr pos:start="45:13" pos:end="45:71"><name pos:start="45:13" pos:end="45:21"><name pos:start="45:13" pos:end="45:13">n</name><operator pos:start="45:14" pos:end="45:15">-&gt;</operator><name pos:start="45:16" pos:end="45:18">vqs</name><index pos:start="45:19" pos:end="45:21">[<expr pos:start="45:20" pos:end="45:20"><name pos:start="45:20" pos:end="45:20">i</name></expr>]</index></name><operator pos:start="45:22" pos:end="45:22">.</operator><name pos:start="45:23" pos:end="45:27">tx_bh</name> <operator pos:start="45:29" pos:end="45:29">=</operator> <call pos:start="45:31" pos:end="45:71"><name pos:start="45:31" pos:end="45:41">qemu_bh_new</name><argument_list pos:start="45:42" pos:end="45:71">(<argument pos:start="45:43" pos:end="45:58"><expr pos:start="45:43" pos:end="45:58"><name pos:start="45:43" pos:end="45:58">virtio_net_tx_bh</name></expr></argument>, <argument pos:start="45:61" pos:end="45:70"><expr pos:start="45:61" pos:end="45:70"><operator pos:start="45:61" pos:end="45:61">&amp;</operator><name pos:start="45:62" pos:end="45:70"><name pos:start="45:62" pos:end="45:62">n</name><operator pos:start="45:63" pos:end="45:64">-&gt;</operator><name pos:start="45:65" pos:end="45:67">vqs</name><index pos:start="45:68" pos:end="45:70">[<expr pos:start="45:69" pos:end="45:69"><name pos:start="45:69" pos:end="45:69">i</name></expr>]</index></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        </block_content>}</block></else></if_stmt>



        <expr_stmt pos:start="51:9" pos:end="51:33"><expr pos:start="51:9" pos:end="51:32"><name pos:start="51:9" pos:end="51:17"><name pos:start="51:9" pos:end="51:9">n</name><operator pos:start="51:10" pos:end="51:11">-&gt;</operator><name pos:start="51:12" pos:end="51:14">vqs</name><index pos:start="51:15" pos:end="51:17">[<expr pos:start="51:16" pos:end="51:16"><name pos:start="51:16" pos:end="51:16">i</name></expr>]</index></name><operator pos:start="51:18" pos:end="51:18">.</operator><name pos:start="51:19" pos:end="51:28">tx_waiting</name> <operator pos:start="51:30" pos:end="51:30">=</operator> <literal type="number" pos:start="51:32" pos:end="51:32">0</literal></expr>;</expr_stmt>

        <expr_stmt pos:start="53:9" pos:end="53:24"><expr pos:start="53:9" pos:end="53:23"><name pos:start="53:9" pos:end="53:17"><name pos:start="53:9" pos:end="53:9">n</name><operator pos:start="53:10" pos:end="53:11">-&gt;</operator><name pos:start="53:12" pos:end="53:14">vqs</name><index pos:start="53:15" pos:end="53:17">[<expr pos:start="53:16" pos:end="53:16"><name pos:start="53:16" pos:end="53:16">i</name></expr>]</index></name><operator pos:start="53:18" pos:end="53:18">.</operator><name pos:start="53:19" pos:end="53:19">n</name> <operator pos:start="53:21" pos:end="53:21">=</operator> <name pos:start="53:23" pos:end="53:23">n</name></expr>;</expr_stmt>

    </block_content>}</block></for>



    <if_stmt pos:start="59:5" pos:end="63:5"><if pos:start="59:5" pos:end="63:5">if <condition pos:start="59:8" pos:end="59:13">(<expr pos:start="59:9" pos:end="59:12"><name pos:start="59:9" pos:end="59:12">ctrl</name></expr>)</condition> <block pos:start="59:15" pos:end="63:5">{<block_content pos:start="61:9" pos:end="61:72">

        <expr_stmt pos:start="61:9" pos:end="61:72"><expr pos:start="61:9" pos:end="61:71"><name pos:start="61:9" pos:end="61:18"><name pos:start="61:9" pos:end="61:9">n</name><operator pos:start="61:10" pos:end="61:11">-&gt;</operator><name pos:start="61:12" pos:end="61:18">ctrl_vq</name></name> <operator pos:start="61:20" pos:end="61:20">=</operator> <call pos:start="61:22" pos:end="61:71"><name pos:start="61:22" pos:end="61:37">virtio_add_queue</name><argument_list pos:start="61:38" pos:end="61:71">(<argument pos:start="61:39" pos:end="61:42"><expr pos:start="61:39" pos:end="61:42"><name pos:start="61:39" pos:end="61:42">vdev</name></expr></argument>, <argument pos:start="61:45" pos:end="61:46"><expr pos:start="61:45" pos:end="61:46"><literal type="number" pos:start="61:45" pos:end="61:46">64</literal></expr></argument>, <argument pos:start="61:49" pos:end="61:70"><expr pos:start="61:49" pos:end="61:70"><name pos:start="61:49" pos:end="61:70">virtio_net_handle_ctrl</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    </block_content>}</block></if></if_stmt>



    <expr_stmt pos:start="67:5" pos:end="67:29"><expr pos:start="67:5" pos:end="67:28"><call pos:start="67:5" pos:end="67:28"><name pos:start="67:5" pos:end="67:25">virtio_net_set_queues</name><argument_list pos:start="67:26" pos:end="67:28">(<argument pos:start="67:27" pos:end="67:27"><expr pos:start="67:27" pos:end="67:27"><name pos:start="67:27" pos:end="67:27">n</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

</block_content>}</block></function>
</unit>
