<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<unit xmlns="http://www.srcML.org/srcML/src" xmlns:pos="http://www.srcML.org/srcML/position" revision="1.0.0" language="C" filename="dataset/ropgen/aug/0/19344.c" pos:tabs="8"><function pos:start="1:1" pos:end="27:1"><type pos:start="1:1" pos:end="1:10"><specifier pos:start="1:1" pos:end="1:6">static</specifier> <name pos:start="1:8" pos:end="1:10">int</name></type> <name pos:start="1:12" pos:end="1:25">iscsi_get_info</name><parameter_list pos:start="1:26" pos:end="1:69">(<parameter pos:start="1:27" pos:end="1:46"><decl pos:start="1:27" pos:end="1:46"><type pos:start="1:27" pos:end="1:46"><name pos:start="1:27" pos:end="1:42">BlockDriverState</name> <modifier pos:start="1:44" pos:end="1:44">*</modifier></type><name pos:start="1:45" pos:end="1:46">bs</name></decl></parameter>, <parameter pos:start="1:49" pos:end="1:68"><decl pos:start="1:49" pos:end="1:68"><type pos:start="1:49" pos:end="1:68"><name pos:start="1:49" pos:end="1:63">BlockDriverInfo</name> <modifier pos:start="1:65" pos:end="1:65">*</modifier></type><name pos:start="1:66" pos:end="1:68">bdi</name></decl></parameter>)</parameter_list>

<block pos:start="3:1" pos:end="27:1">{<block_content pos:start="5:5" pos:end="25:13">

    <decl_stmt pos:start="5:5" pos:end="5:36"><decl pos:start="5:5" pos:end="5:35"><type pos:start="5:5" pos:end="5:14"><name pos:start="5:5" pos:end="5:12">IscsiLun</name> <modifier pos:start="5:14" pos:end="5:14">*</modifier></type><name pos:start="5:15" pos:end="5:22">iscsilun</name> <init pos:start="5:24" pos:end="5:35">= <expr pos:start="5:26" pos:end="5:35"><name pos:start="5:26" pos:end="5:35"><name pos:start="5:26" pos:end="5:27">bs</name><operator pos:start="5:28" pos:end="5:29">-&gt;</operator><name pos:start="5:30" pos:end="5:35">opaque</name></name></expr></init></decl>;</decl_stmt>

    <expr_stmt pos:start="7:5" pos:end="7:57"><expr pos:start="7:5" pos:end="7:56"><name pos:start="7:5" pos:end="7:36"><name pos:start="7:5" pos:end="7:7">bdi</name><operator pos:start="7:8" pos:end="7:9">-&gt;</operator><name pos:start="7:10" pos:end="7:36">unallocated_blocks_are_zero</name></name> <operator pos:start="7:38" pos:end="7:38">=</operator> <operator pos:start="7:40" pos:end="7:40">!</operator><operator pos:start="7:41" pos:end="7:41">!</operator><name pos:start="7:42" pos:end="7:56"><name pos:start="7:42" pos:end="7:49">iscsilun</name><operator pos:start="7:50" pos:end="7:51">-&gt;</operator><name pos:start="7:52" pos:end="7:56">lbprz</name></name></expr>;</expr_stmt>

    <expr_stmt pos:start="9:5" pos:end="9:78"><expr pos:start="9:5" pos:end="9:77"><name pos:start="9:5" pos:end="9:36"><name pos:start="9:5" pos:end="9:7">bdi</name><operator pos:start="9:8" pos:end="9:9">-&gt;</operator><name pos:start="9:10" pos:end="9:36">can_write_zeroes_with_unmap</name></name> <operator pos:start="9:38" pos:end="9:38">=</operator> <name pos:start="9:40" pos:end="9:54"><name pos:start="9:40" pos:end="9:47">iscsilun</name><operator pos:start="9:48" pos:end="9:49">-&gt;</operator><name pos:start="9:50" pos:end="9:54">lbprz</name></name> <operator pos:start="9:56" pos:end="9:57">&amp;&amp;</operator> <name pos:start="9:59" pos:end="9:77"><name pos:start="9:59" pos:end="9:66">iscsilun</name><operator pos:start="9:67" pos:end="9:68">-&gt;</operator><name pos:start="9:69" pos:end="9:71">lbp</name><operator pos:start="9:72" pos:end="9:72">.</operator><name pos:start="9:73" pos:end="9:77">lbpws</name></name></expr>;</expr_stmt>

    <comment type="block" pos:start="11:5" pos:end="15:47">/* Guess the internal cluster (page) size of the iscsi target by the means

     * of opt_unmap_gran. Transfer the unmap granularity only if it has a

     * reasonable size for bdi-&gt;cluster_size */</comment>

    <if_stmt pos:start="17:5" pos:end="23:5"><if pos:start="17:5" pos:end="23:5">if <condition pos:start="17:8" pos:end="19:79">(<expr pos:start="17:9" pos:end="19:78"><name pos:start="17:9" pos:end="17:35"><name pos:start="17:9" pos:end="17:16">iscsilun</name><operator pos:start="17:17" pos:end="17:18">-&gt;</operator><name pos:start="17:19" pos:end="17:20">bl</name><operator pos:start="17:21" pos:end="17:21">.</operator><name pos:start="17:22" pos:end="17:35">opt_unmap_gran</name></name> <operator pos:start="17:37" pos:end="17:37">*</operator> <name pos:start="17:39" pos:end="17:58"><name pos:start="17:39" pos:end="17:46">iscsilun</name><operator pos:start="17:47" pos:end="17:48">-&gt;</operator><name pos:start="17:49" pos:end="17:58">block_size</name></name> <operator pos:start="17:60" pos:end="17:61">&gt;=</operator> <literal type="number" pos:start="17:63" pos:end="17:64">64</literal> <operator pos:start="17:66" pos:end="17:66">*</operator> <literal type="number" pos:start="17:68" pos:end="17:71">1024</literal> <operator pos:start="17:73" pos:end="17:74">&amp;&amp;</operator>

        <name pos:start="19:9" pos:end="19:35"><name pos:start="19:9" pos:end="19:16">iscsilun</name><operator pos:start="19:17" pos:end="19:18">-&gt;</operator><name pos:start="19:19" pos:end="19:20">bl</name><operator pos:start="19:21" pos:end="19:21">.</operator><name pos:start="19:22" pos:end="19:35">opt_unmap_gran</name></name> <operator pos:start="19:37" pos:end="19:37">*</operator> <name pos:start="19:39" pos:end="19:58"><name pos:start="19:39" pos:end="19:46">iscsilun</name><operator pos:start="19:47" pos:end="19:48">-&gt;</operator><name pos:start="19:49" pos:end="19:58">block_size</name></name> <operator pos:start="19:60" pos:end="19:61">&lt;=</operator> <literal type="number" pos:start="19:63" pos:end="19:64">16</literal> <operator pos:start="19:66" pos:end="19:66">*</operator> <literal type="number" pos:start="19:68" pos:end="19:71">1024</literal> <operator pos:start="19:73" pos:end="19:73">*</operator> <literal type="number" pos:start="19:75" pos:end="19:78">1024</literal></expr>)</condition> <block pos:start="19:81" pos:end="23:5">{<block_content pos:start="21:9" pos:end="21:79">

        <expr_stmt pos:start="21:9" pos:end="21:79"><expr pos:start="21:9" pos:end="21:78"><name pos:start="21:9" pos:end="21:25"><name pos:start="21:9" pos:end="21:11">bdi</name><operator pos:start="21:12" pos:end="21:13">-&gt;</operator><name pos:start="21:14" pos:end="21:25">cluster_size</name></name> <operator pos:start="21:27" pos:end="21:27">=</operator> <name pos:start="21:29" pos:end="21:55"><name pos:start="21:29" pos:end="21:36">iscsilun</name><operator pos:start="21:37" pos:end="21:38">-&gt;</operator><name pos:start="21:39" pos:end="21:40">bl</name><operator pos:start="21:41" pos:end="21:41">.</operator><name pos:start="21:42" pos:end="21:55">opt_unmap_gran</name></name> <operator pos:start="21:57" pos:end="21:57">*</operator> <name pos:start="21:59" pos:end="21:78"><name pos:start="21:59" pos:end="21:66">iscsilun</name><operator pos:start="21:67" pos:end="21:68">-&gt;</operator><name pos:start="21:69" pos:end="21:78">block_size</name></name></expr>;</expr_stmt>

    </block_content>}</block></if></if_stmt>

    <return pos:start="25:5" pos:end="25:13">return <expr pos:start="25:12" pos:end="25:12"><literal type="number" pos:start="25:12" pos:end="25:12">0</literal></expr>;</return>

</block_content>}</block></function>
</unit>
