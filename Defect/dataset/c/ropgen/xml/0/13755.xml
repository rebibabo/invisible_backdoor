<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<unit xmlns="http://www.srcML.org/srcML/src" xmlns:pos="http://www.srcML.org/srcML/position" revision="1.0.0" language="C" filename="dataset/ropgen/aug/0/13755.c" pos:tabs="8"><function pos:start="1:1" pos:end="59:1"><type pos:start="1:1" pos:end="1:21"><specifier pos:start="1:1" pos:end="1:6">static</specifier> <name pos:start="1:8" pos:end="1:19">AVIndexEntry</name> <modifier pos:start="1:21" pos:end="1:21">*</modifier></type><name pos:start="1:22" pos:end="1:41">mov_find_next_sample</name><parameter_list pos:start="1:42" pos:end="1:76">(<parameter pos:start="1:43" pos:end="1:60"><decl pos:start="1:43" pos:end="1:60"><type pos:start="1:43" pos:end="1:60"><name pos:start="1:43" pos:end="1:57">AVFormatContext</name> <modifier pos:start="1:59" pos:end="1:59">*</modifier></type><name pos:start="1:60" pos:end="1:60">s</name></decl></parameter>, <parameter pos:start="1:63" pos:end="1:75"><decl pos:start="1:63" pos:end="1:75"><type pos:start="1:63" pos:end="1:75"><name pos:start="1:63" pos:end="1:70">AVStream</name> <modifier pos:start="1:72" pos:end="1:72">*</modifier><modifier pos:start="1:73" pos:end="1:73">*</modifier></type><name pos:start="1:74" pos:end="1:75">st</name></decl></parameter>)</parameter_list>

<block pos:start="3:1" pos:end="59:1">{<block_content pos:start="5:5" pos:end="57:18">

    <decl_stmt pos:start="5:5" pos:end="5:32"><decl pos:start="5:5" pos:end="5:31"><type pos:start="5:5" pos:end="5:18"><name pos:start="5:5" pos:end="5:16">AVIndexEntry</name> <modifier pos:start="5:18" pos:end="5:18">*</modifier></type><name pos:start="5:19" pos:end="5:24">sample</name> <init pos:start="5:26" pos:end="5:31">= <expr pos:start="5:28" pos:end="5:31"><name pos:start="5:28" pos:end="5:31">NULL</name></expr></init></decl>;</decl_stmt>

    <decl_stmt pos:start="7:5" pos:end="7:33"><decl pos:start="7:5" pos:end="7:32"><type pos:start="7:5" pos:end="7:11"><name pos:start="7:5" pos:end="7:11">int64_t</name></type> <name pos:start="7:13" pos:end="7:20">best_dts</name> <init pos:start="7:22" pos:end="7:32">= <expr pos:start="7:24" pos:end="7:32"><name pos:start="7:24" pos:end="7:32">INT64_MAX</name></expr></init></decl>;</decl_stmt>

    <decl_stmt pos:start="9:5" pos:end="9:10"><decl pos:start="9:5" pos:end="9:9"><type pos:start="9:5" pos:end="9:7"><name pos:start="9:5" pos:end="9:7">int</name></type> <name pos:start="9:9" pos:end="9:9">i</name></decl>;</decl_stmt>

    <for pos:start="11:5" pos:end="55:5">for <control pos:start="11:9" pos:end="11:39">(<init pos:start="11:10" pos:end="11:15"><expr pos:start="11:10" pos:end="11:14"><name pos:start="11:10" pos:end="11:10">i</name> <operator pos:start="11:12" pos:end="11:12">=</operator> <literal type="number" pos:start="11:14" pos:end="11:14">0</literal></expr>;</init> <condition pos:start="11:17" pos:end="11:34"><expr pos:start="11:17" pos:end="11:33"><name pos:start="11:17" pos:end="11:17">i</name> <operator pos:start="11:19" pos:end="11:19">&lt;</operator> <name pos:start="11:21" pos:end="11:33"><name pos:start="11:21" pos:end="11:21">s</name><operator pos:start="11:22" pos:end="11:23">-&gt;</operator><name pos:start="11:24" pos:end="11:33">nb_streams</name></name></expr>;</condition> <incr pos:start="11:36" pos:end="11:38"><expr pos:start="11:36" pos:end="11:38"><name pos:start="11:36" pos:end="11:36">i</name><operator pos:start="11:37" pos:end="11:38">++</operator></expr></incr>)</control> <block pos:start="11:41" pos:end="55:5">{<block_content pos:start="13:9" pos:end="53:9">

        <decl_stmt pos:start="13:9" pos:end="13:39"><decl pos:start="13:9" pos:end="13:38"><type pos:start="13:9" pos:end="13:18"><name pos:start="13:9" pos:end="13:16">AVStream</name> <modifier pos:start="13:18" pos:end="13:18">*</modifier></type><name pos:start="13:19" pos:end="13:22">avst</name> <init pos:start="13:24" pos:end="13:38">= <expr pos:start="13:26" pos:end="13:38"><name pos:start="13:26" pos:end="13:38"><name pos:start="13:26" pos:end="13:26">s</name><operator pos:start="13:27" pos:end="13:28">-&gt;</operator><name pos:start="13:29" pos:end="13:35">streams</name><index pos:start="13:36" pos:end="13:38">[<expr pos:start="13:37" pos:end="13:37"><name pos:start="13:37" pos:end="13:37">i</name></expr>]</index></name></expr></init></decl>;</decl_stmt>

        <decl_stmt pos:start="15:9" pos:end="15:48"><decl pos:start="15:9" pos:end="15:47"><type pos:start="15:9" pos:end="15:26"><name pos:start="15:9" pos:end="15:24">MOVStreamContext</name> <modifier pos:start="15:26" pos:end="15:26">*</modifier></type><name pos:start="15:27" pos:end="15:29">msc</name> <init pos:start="15:31" pos:end="15:47">= <expr pos:start="15:33" pos:end="15:47"><name pos:start="15:33" pos:end="15:47"><name pos:start="15:33" pos:end="15:36">avst</name><operator pos:start="15:37" pos:end="15:38">-&gt;</operator><name pos:start="15:39" pos:end="15:47">priv_data</name></name></expr></init></decl>;</decl_stmt>

        <if_stmt pos:start="17:9" pos:end="53:9"><if pos:start="17:9" pos:end="53:9">if <condition pos:start="17:12" pos:end="17:68">(<expr pos:start="17:13" pos:end="17:67"><name pos:start="17:13" pos:end="17:19"><name pos:start="17:13" pos:end="17:15">msc</name><operator pos:start="17:16" pos:end="17:17">-&gt;</operator><name pos:start="17:18" pos:end="17:19">pb</name></name> <operator pos:start="17:21" pos:end="17:22">&amp;&amp;</operator> <name pos:start="17:24" pos:end="17:42"><name pos:start="17:24" pos:end="17:26">msc</name><operator pos:start="17:27" pos:end="17:28">-&gt;</operator><name pos:start="17:29" pos:end="17:42">current_sample</name></name> <operator pos:start="17:44" pos:end="17:44">&lt;</operator> <name pos:start="17:46" pos:end="17:67"><name pos:start="17:46" pos:end="17:49">avst</name><operator pos:start="17:50" pos:end="17:51">-&gt;</operator><name pos:start="17:52" pos:end="17:67">nb_index_entries</name></name></expr>)</condition> <block pos:start="17:70" pos:end="53:9">{<block_content pos:start="19:13" pos:end="51:13">

            <decl_stmt pos:start="19:13" pos:end="19:85"><decl pos:start="19:13" pos:end="19:84"><type pos:start="19:13" pos:end="19:26"><name pos:start="19:13" pos:end="19:24">AVIndexEntry</name> <modifier pos:start="19:26" pos:end="19:26">*</modifier></type><name pos:start="19:27" pos:end="19:40">current_sample</name> <init pos:start="19:42" pos:end="19:84">= <expr pos:start="19:44" pos:end="19:84"><operator pos:start="19:44" pos:end="19:44">&amp;</operator><name pos:start="19:45" pos:end="19:84"><name pos:start="19:45" pos:end="19:48">avst</name><operator pos:start="19:49" pos:end="19:50">-&gt;</operator><name pos:start="19:51" pos:end="19:63">index_entries</name><index pos:start="19:64" pos:end="19:84">[<expr pos:start="19:65" pos:end="19:83"><name pos:start="19:65" pos:end="19:83"><name pos:start="19:65" pos:end="19:67">msc</name><operator pos:start="19:68" pos:end="19:69">-&gt;</operator><name pos:start="19:70" pos:end="19:83">current_sample</name></name></expr>]</index></name></expr></init></decl>;</decl_stmt>

            <decl_stmt pos:start="21:13" pos:end="21:24"><decl pos:start="21:13" pos:end="21:23"><type pos:start="21:13" pos:end="21:19"><name pos:start="21:13" pos:end="21:19">int64_t</name></type> <name pos:start="21:21" pos:end="21:23">dts</name></decl>;</decl_stmt>

            <if_stmt pos:start="23:13" pos:end="31:91"><if pos:start="23:13" pos:end="27:64">if <condition pos:start="23:16" pos:end="23:31">(<expr pos:start="23:17" pos:end="23:30"><name pos:start="23:17" pos:end="23:30"><name pos:start="23:17" pos:end="23:19">msc</name><operator pos:start="23:20" pos:end="23:21">-&gt;</operator><name pos:start="23:22" pos:end="23:30">ctts_data</name></name></expr>)</condition><block type="pseudo" pos:start="25:17" pos:end="27:64"><block_content pos:start="25:17" pos:end="27:64">

                <expr_stmt pos:start="25:17" pos:end="27:64"><expr pos:start="25:17" pos:end="27:63"><name pos:start="25:17" pos:end="25:19">dts</name> <operator pos:start="25:21" pos:end="25:21">=</operator> <call pos:start="25:23" pos:end="27:63"><name pos:start="25:23" pos:end="25:32">av_rescale</name><argument_list pos:start="25:33" pos:end="27:63">(<argument pos:start="25:34" pos:end="25:118"><expr pos:start="25:34" pos:end="25:118"><name pos:start="25:34" pos:end="25:58"><name pos:start="25:34" pos:end="25:47">current_sample</name><operator pos:start="25:48" pos:end="25:49">-&gt;</operator><name pos:start="25:50" pos:end="25:58">timestamp</name></name> <operator pos:start="25:60" pos:end="25:60">-</operator> <name pos:start="25:62" pos:end="25:75"><name pos:start="25:62" pos:end="25:64">msc</name><operator pos:start="25:65" pos:end="25:66">-&gt;</operator><name pos:start="25:67" pos:end="25:75">dts_shift</name></name> <operator pos:start="25:77" pos:end="25:77">-</operator> <name pos:start="25:79" pos:end="25:109"><name pos:start="25:79" pos:end="25:81">msc</name><operator pos:start="25:82" pos:end="25:83">-&gt;</operator><name pos:start="25:84" pos:end="25:92">ctts_data</name><index pos:start="25:93" pos:end="25:109">[<expr pos:start="25:94" pos:end="25:108"><name pos:start="25:94" pos:end="25:108"><name pos:start="25:94" pos:end="25:96">msc</name><operator pos:start="25:97" pos:end="25:98">-&gt;</operator><name pos:start="25:99" pos:end="25:108">ctts_index</name></name></expr>]</index></name><operator pos:start="25:110" pos:end="25:110">.</operator><name pos:start="25:111" pos:end="25:118">duration</name></expr></argument>,

                                 <argument pos:start="27:34" pos:end="27:45"><expr pos:start="27:34" pos:end="27:45"><name pos:start="27:34" pos:end="27:45">AV_TIME_BASE</name></expr></argument>, <argument pos:start="27:48" pos:end="27:62"><expr pos:start="27:48" pos:end="27:62"><name pos:start="27:48" pos:end="27:62"><name pos:start="27:48" pos:end="27:50">msc</name><operator pos:start="27:51" pos:end="27:52">-&gt;</operator><name pos:start="27:53" pos:end="27:62">time_scale</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt></block_content></block></if>

            <else pos:start="29:13" pos:end="31:91">else<block type="pseudo" pos:start="31:17" pos:end="31:91"><block_content pos:start="31:17" pos:end="31:91">

                <expr_stmt pos:start="31:17" pos:end="31:91"><expr pos:start="31:17" pos:end="31:90"><name pos:start="31:17" pos:end="31:19">dts</name> <operator pos:start="31:21" pos:end="31:21">=</operator> <call pos:start="31:23" pos:end="31:90"><name pos:start="31:23" pos:end="31:32">av_rescale</name><argument_list pos:start="31:33" pos:end="31:90">(<argument pos:start="31:34" pos:end="31:58"><expr pos:start="31:34" pos:end="31:58"><name pos:start="31:34" pos:end="31:58"><name pos:start="31:34" pos:end="31:47">current_sample</name><operator pos:start="31:48" pos:end="31:49">-&gt;</operator><name pos:start="31:50" pos:end="31:58">timestamp</name></name></expr></argument>, <argument pos:start="31:61" pos:end="31:72"><expr pos:start="31:61" pos:end="31:72"><name pos:start="31:61" pos:end="31:72">AV_TIME_BASE</name></expr></argument>, <argument pos:start="31:75" pos:end="31:89"><expr pos:start="31:75" pos:end="31:89"><name pos:start="31:75" pos:end="31:89"><name pos:start="31:75" pos:end="31:77">msc</name><operator pos:start="31:78" pos:end="31:79">-&gt;</operator><name pos:start="31:80" pos:end="31:89">time_scale</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt></block_content></block></else></if_stmt>

            <expr_stmt pos:start="33:13" pos:end="33:93"><expr pos:start="33:13" pos:end="33:92"><call pos:start="33:13" pos:end="33:92"><name pos:start="33:13" pos:end="33:19">av_dlog</name><argument_list pos:start="33:20" pos:end="33:92">(<argument pos:start="33:21" pos:end="33:21"><expr pos:start="33:21" pos:end="33:21"><name pos:start="33:21" pos:end="33:21">s</name></expr></argument>, <argument pos:start="33:24" pos:end="33:62"><expr pos:start="33:24" pos:end="33:62"><literal type="string" pos:start="33:24" pos:end="33:52">"stream %d, sample %d, dts %"</literal><name pos:start="33:53" pos:end="33:58">PRId64</name><literal type="string" pos:start="33:59" pos:end="33:62">"\n"</literal></expr></argument>, <argument pos:start="33:65" pos:end="33:65"><expr pos:start="33:65" pos:end="33:65"><name pos:start="33:65" pos:end="33:65">i</name></expr></argument>, <argument pos:start="33:68" pos:end="33:86"><expr pos:start="33:68" pos:end="33:86"><name pos:start="33:68" pos:end="33:86"><name pos:start="33:68" pos:end="33:70">msc</name><operator pos:start="33:71" pos:end="33:72">-&gt;</operator><name pos:start="33:73" pos:end="33:86">current_sample</name></name></expr></argument>, <argument pos:start="33:89" pos:end="33:91"><expr pos:start="33:89" pos:end="33:91"><name pos:start="33:89" pos:end="33:91">dts</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

            <if_stmt pos:start="35:13" pos:end="51:13"><if pos:start="35:13" pos:end="51:13">if <condition pos:start="35:16" pos:end="43:79">(<expr pos:start="35:17" pos:end="43:78"><operator pos:start="35:17" pos:end="35:17">!</operator><name pos:start="35:18" pos:end="35:23">sample</name> <operator pos:start="35:25" pos:end="35:26">||</operator> <operator pos:start="35:28" pos:end="35:28">(</operator><operator pos:start="35:29" pos:end="35:29">!</operator><name pos:start="35:30" pos:end="35:44"><name pos:start="35:30" pos:end="35:30">s</name><operator pos:start="35:31" pos:end="35:32">-&gt;</operator><name pos:start="35:33" pos:end="35:34">pb</name><operator pos:start="35:35" pos:end="35:36">-&gt;</operator><name pos:start="35:37" pos:end="35:44">seekable</name></name> <operator pos:start="35:46" pos:end="35:47">&amp;&amp;</operator> <name pos:start="35:49" pos:end="35:67"><name pos:start="35:49" pos:end="35:62">current_sample</name><operator pos:start="35:63" pos:end="35:64">-&gt;</operator><name pos:start="35:65" pos:end="35:67">pos</name></name> <operator pos:start="35:69" pos:end="35:69">&lt;</operator> <name pos:start="35:71" pos:end="35:81"><name pos:start="35:71" pos:end="35:76">sample</name><operator pos:start="35:77" pos:end="35:78">-&gt;</operator><name pos:start="35:79" pos:end="35:81">pos</name></name><operator pos:start="35:82" pos:end="35:82">)</operator> <operator pos:start="35:84" pos:end="35:85">||</operator>

                <operator pos:start="37:17" pos:end="37:17">(</operator><name pos:start="37:18" pos:end="37:32"><name pos:start="37:18" pos:end="37:18">s</name><operator pos:start="37:19" pos:end="37:20">-&gt;</operator><name pos:start="37:21" pos:end="37:22">pb</name><operator pos:start="37:23" pos:end="37:24">-&gt;</operator><name pos:start="37:25" pos:end="37:32">seekable</name></name> <operator pos:start="37:34" pos:end="37:35">&amp;&amp;</operator>

                 <operator pos:start="39:18" pos:end="39:18">(</operator><operator pos:start="39:19" pos:end="39:19">(</operator><name pos:start="39:20" pos:end="39:26"><name pos:start="39:20" pos:end="39:22">msc</name><operator pos:start="39:23" pos:end="39:24">-&gt;</operator><name pos:start="39:25" pos:end="39:26">pb</name></name> <operator pos:start="39:28" pos:end="39:29">!=</operator> <name pos:start="39:31" pos:end="39:35"><name pos:start="39:31" pos:end="39:31">s</name><operator pos:start="39:32" pos:end="39:33">-&gt;</operator><name pos:start="39:34" pos:end="39:35">pb</name></name> <operator pos:start="39:37" pos:end="39:38">&amp;&amp;</operator> <name pos:start="39:40" pos:end="39:42">dts</name> <operator pos:start="39:44" pos:end="39:44">&lt;</operator> <name pos:start="39:46" pos:end="39:53">best_dts</name><operator pos:start="39:54" pos:end="39:54">)</operator> <operator pos:start="39:56" pos:end="39:57">||</operator> <operator pos:start="39:59" pos:end="39:59">(</operator><name pos:start="39:60" pos:end="39:66"><name pos:start="39:60" pos:end="39:62">msc</name><operator pos:start="39:63" pos:end="39:64">-&gt;</operator><name pos:start="39:65" pos:end="39:66">pb</name></name> <operator pos:start="39:68" pos:end="39:69">==</operator> <name pos:start="39:71" pos:end="39:75"><name pos:start="39:71" pos:end="39:71">s</name><operator pos:start="39:72" pos:end="39:73">-&gt;</operator><name pos:start="39:74" pos:end="39:75">pb</name></name> <operator pos:start="39:77" pos:end="39:78">&amp;&amp;</operator>

                 <operator pos:start="41:18" pos:end="41:18">(</operator><operator pos:start="41:19" pos:end="41:19">(</operator><call pos:start="41:20" pos:end="41:40"><name pos:start="41:20" pos:end="41:24">FFABS</name><argument_list pos:start="41:25" pos:end="41:40">(<argument pos:start="41:26" pos:end="41:39"><expr pos:start="41:26" pos:end="41:39"><name pos:start="41:26" pos:end="41:33">best_dts</name> <operator pos:start="41:35" pos:end="41:35">-</operator> <name pos:start="41:37" pos:end="41:39">dts</name></expr></argument>)</argument_list></call> <operator pos:start="41:42" pos:end="41:43">&lt;=</operator> <name pos:start="41:45" pos:end="41:56">AV_TIME_BASE</name> <operator pos:start="41:58" pos:end="41:59">&amp;&amp;</operator> <name pos:start="41:61" pos:end="41:79"><name pos:start="41:61" pos:end="41:74">current_sample</name><operator pos:start="41:75" pos:end="41:76">-&gt;</operator><name pos:start="41:77" pos:end="41:79">pos</name></name> <operator pos:start="41:81" pos:end="41:81">&lt;</operator> <name pos:start="41:83" pos:end="41:93"><name pos:start="41:83" pos:end="41:88">sample</name><operator pos:start="41:89" pos:end="41:90">-&gt;</operator><name pos:start="41:91" pos:end="41:93">pos</name></name><operator pos:start="41:94" pos:end="41:94">)</operator> <operator pos:start="41:96" pos:end="41:97">||</operator>

                  <operator pos:start="43:19" pos:end="43:19">(</operator><call pos:start="43:20" pos:end="43:40"><name pos:start="43:20" pos:end="43:24">FFABS</name><argument_list pos:start="43:25" pos:end="43:40">(<argument pos:start="43:26" pos:end="43:39"><expr pos:start="43:26" pos:end="43:39"><name pos:start="43:26" pos:end="43:33">best_dts</name> <operator pos:start="43:35" pos:end="43:35">-</operator> <name pos:start="43:37" pos:end="43:39">dts</name></expr></argument>)</argument_list></call> <operator pos:start="43:42" pos:end="43:42">&gt;</operator> <name pos:start="43:44" pos:end="43:55">AV_TIME_BASE</name> <operator pos:start="43:57" pos:end="43:58">&amp;&amp;</operator> <name pos:start="43:60" pos:end="43:62">dts</name> <operator pos:start="43:64" pos:end="43:64">&lt;</operator> <name pos:start="43:66" pos:end="43:73">best_dts</name><operator pos:start="43:74" pos:end="43:74">)</operator><operator pos:start="43:75" pos:end="43:75">)</operator><operator pos:start="43:76" pos:end="43:76">)</operator><operator pos:start="43:77" pos:end="43:77">)</operator><operator pos:start="43:78" pos:end="43:78">)</operator></expr>)</condition> <block pos:start="43:81" pos:end="51:13">{<block_content pos:start="45:17" pos:end="49:27">

                <expr_stmt pos:start="45:17" pos:end="45:40"><expr pos:start="45:17" pos:end="45:39"><name pos:start="45:17" pos:end="45:22">sample</name> <operator pos:start="45:24" pos:end="45:24">=</operator> <name pos:start="45:26" pos:end="45:39">current_sample</name></expr>;</expr_stmt>

                <expr_stmt pos:start="47:17" pos:end="47:31"><expr pos:start="47:17" pos:end="47:30"><name pos:start="47:17" pos:end="47:24">best_dts</name> <operator pos:start="47:26" pos:end="47:26">=</operator> <name pos:start="47:28" pos:end="47:30">dts</name></expr>;</expr_stmt>

                <expr_stmt pos:start="49:17" pos:end="49:27"><expr pos:start="49:17" pos:end="49:26"><operator pos:start="49:17" pos:end="49:17">*</operator><name pos:start="49:18" pos:end="49:19">st</name> <operator pos:start="49:21" pos:end="49:21">=</operator> <name pos:start="49:23" pos:end="49:26">avst</name></expr>;</expr_stmt>

            </block_content>}</block></if></if_stmt>

        </block_content>}</block></if></if_stmt>

    </block_content>}</block></for>

    <return pos:start="57:5" pos:end="57:18">return <expr pos:start="57:12" pos:end="57:17"><name pos:start="57:12" pos:end="57:17">sample</name></expr>;</return>

</block_content>}</block></function>
</unit>
