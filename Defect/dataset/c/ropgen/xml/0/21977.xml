<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<unit xmlns="http://www.srcML.org/srcML/src" xmlns:pos="http://www.srcML.org/srcML/position" revision="1.0.0" language="C" filename="dataset/ropgen/aug/0/21977.c" pos:tabs="8"><function pos:start="1:1" pos:end="145:1"><type pos:start="1:1" pos:end="1:10"><specifier pos:start="1:1" pos:end="1:6">static</specifier> <name pos:start="1:8" pos:end="1:10">int</name></type> <name pos:start="1:12" pos:end="1:24">mov_read_tkhd</name><parameter_list pos:start="1:25" pos:end="1:72">(<parameter pos:start="1:26" pos:end="1:38"><decl pos:start="1:26" pos:end="1:38"><type pos:start="1:26" pos:end="1:38"><name pos:start="1:26" pos:end="1:35">MOVContext</name> <modifier pos:start="1:37" pos:end="1:37">*</modifier></type><name pos:start="1:38" pos:end="1:38">c</name></decl></parameter>, <parameter pos:start="1:41" pos:end="1:57"><decl pos:start="1:41" pos:end="1:57"><type pos:start="1:41" pos:end="1:57"><name pos:start="1:41" pos:end="1:53">ByteIOContext</name> <modifier pos:start="1:55" pos:end="1:55">*</modifier></type><name pos:start="1:56" pos:end="1:57">pb</name></decl></parameter>, <parameter pos:start="1:60" pos:end="1:71"><decl pos:start="1:60" pos:end="1:71"><type pos:start="1:60" pos:end="1:71"><name pos:start="1:60" pos:end="1:66">MOVAtom</name></type> <name pos:start="1:68" pos:end="1:71">atom</name></decl></parameter>)</parameter_list>

<block pos:start="3:1" pos:end="145:1">{<block_content pos:start="5:5" pos:end="143:13">

    <decl_stmt pos:start="5:5" pos:end="5:10"><decl pos:start="5:5" pos:end="5:9"><type pos:start="5:5" pos:end="5:7"><name pos:start="5:5" pos:end="5:7">int</name></type> <name pos:start="5:9" pos:end="5:9">i</name></decl>;</decl_stmt>

    <decl_stmt pos:start="7:5" pos:end="7:14"><decl pos:start="7:5" pos:end="7:13"><type pos:start="7:5" pos:end="7:7"><name pos:start="7:5" pos:end="7:7">int</name></type> <name pos:start="7:9" pos:end="7:13">width</name></decl>;</decl_stmt>

    <decl_stmt pos:start="9:5" pos:end="9:15"><decl pos:start="9:5" pos:end="9:14"><type pos:start="9:5" pos:end="9:7"><name pos:start="9:5" pos:end="9:7">int</name></type> <name pos:start="9:9" pos:end="9:14">height</name></decl>;</decl_stmt>

    <decl_stmt pos:start="11:5" pos:end="11:30"><decl pos:start="11:5" pos:end="11:29"><type pos:start="11:5" pos:end="11:11"><name pos:start="11:5" pos:end="11:11">int64_t</name></type> <name pos:start="11:13" pos:end="11:29"><name pos:start="11:13" pos:end="11:26">disp_transform</name><index pos:start="11:27" pos:end="11:29">[<expr pos:start="11:28" pos:end="11:28"><literal type="number" pos:start="11:28" pos:end="11:28">2</literal></expr>]</index></name></decl>;</decl_stmt>

    <decl_stmt pos:start="13:5" pos:end="13:29"><decl pos:start="13:5" pos:end="13:28"><type pos:start="13:5" pos:end="13:7"><name pos:start="13:5" pos:end="13:7">int</name></type> <name pos:start="13:9" pos:end="13:28"><name pos:start="13:9" pos:end="13:22">display_matrix</name><index pos:start="13:23" pos:end="13:25">[<expr pos:start="13:24" pos:end="13:24"><literal type="number" pos:start="13:24" pos:end="13:24">3</literal></expr>]</index><index pos:start="13:26" pos:end="13:28">[<expr pos:start="13:27" pos:end="13:27"><literal type="number" pos:start="13:27" pos:end="13:27">2</literal></expr>]</index></name></decl>;</decl_stmt>

    <decl_stmt pos:start="15:5" pos:end="15:55"><decl pos:start="15:5" pos:end="15:54"><type pos:start="15:5" pos:end="15:14"><name pos:start="15:5" pos:end="15:12">AVStream</name> <modifier pos:start="15:14" pos:end="15:14">*</modifier></type><name pos:start="15:15" pos:end="15:16">st</name> <init pos:start="15:18" pos:end="15:54">= <expr pos:start="15:20" pos:end="15:54"><name pos:start="15:20" pos:end="15:54"><name pos:start="15:20" pos:end="15:20">c</name><operator pos:start="15:21" pos:end="15:22">-&gt;</operator><name pos:start="15:23" pos:end="15:24">fc</name><operator pos:start="15:25" pos:end="15:26">-&gt;</operator><name pos:start="15:27" pos:end="15:33">streams</name><index pos:start="15:34" pos:end="15:54">[<expr pos:start="15:35" pos:end="15:53"><name pos:start="15:35" pos:end="15:51"><name pos:start="15:35" pos:end="15:35">c</name><operator pos:start="15:36" pos:end="15:37">-&gt;</operator><name pos:start="15:38" pos:end="15:39">fc</name><operator pos:start="15:40" pos:end="15:41">-&gt;</operator><name pos:start="15:42" pos:end="15:51">nb_streams</name></name><operator pos:start="15:52" pos:end="15:52">-</operator><literal type="number" pos:start="15:53" pos:end="15:53">1</literal></expr>]</index></name></expr></init></decl>;</decl_stmt>

    <decl_stmt pos:start="17:5" pos:end="17:41"><decl pos:start="17:5" pos:end="17:40"><type pos:start="17:5" pos:end="17:22"><name pos:start="17:5" pos:end="17:20">MOVStreamContext</name> <modifier pos:start="17:22" pos:end="17:22">*</modifier></type><name pos:start="17:23" pos:end="17:24">sc</name> <init pos:start="17:26" pos:end="17:40">= <expr pos:start="17:28" pos:end="17:40"><name pos:start="17:28" pos:end="17:40"><name pos:start="17:28" pos:end="17:29">st</name><operator pos:start="17:30" pos:end="17:31">-&gt;</operator><name pos:start="17:32" pos:end="17:40">priv_data</name></name></expr></init></decl>;</decl_stmt>

    <decl_stmt pos:start="19:5" pos:end="19:31"><decl pos:start="19:5" pos:end="19:30"><type pos:start="19:5" pos:end="19:7"><name pos:start="19:5" pos:end="19:7">int</name></type> <name pos:start="19:9" pos:end="19:15">version</name> <init pos:start="19:17" pos:end="19:30">= <expr pos:start="19:19" pos:end="19:30"><call pos:start="19:19" pos:end="19:30"><name pos:start="19:19" pos:end="19:26">get_byte</name><argument_list pos:start="19:27" pos:end="19:30">(<argument pos:start="19:28" pos:end="19:29"><expr pos:start="19:28" pos:end="19:29"><name pos:start="19:28" pos:end="19:29">pb</name></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>



    <expr_stmt pos:start="23:5" pos:end="23:17"><expr pos:start="23:5" pos:end="23:16"><call pos:start="23:5" pos:end="23:16"><name pos:start="23:5" pos:end="23:12">get_be24</name><argument_list pos:start="23:13" pos:end="23:16">(<argument pos:start="23:14" pos:end="23:15"><expr pos:start="23:14" pos:end="23:15"><name pos:start="23:14" pos:end="23:15">pb</name></expr></argument>)</argument_list></call></expr>;</expr_stmt> <comment type="block" pos:start="23:19" pos:end="23:29">/* flags */</comment>

    <comment type="block" pos:start="25:5" pos:end="35:6">/*

    MOV_TRACK_ENABLED 0x0001

    MOV_TRACK_IN_MOVIE 0x0002

    MOV_TRACK_IN_PREVIEW 0x0004

    MOV_TRACK_IN_POSTER 0x0008

    */</comment>



    <if_stmt pos:start="39:5" pos:end="51:5"><if pos:start="39:5" pos:end="45:5">if <condition pos:start="39:8" pos:end="39:21">(<expr pos:start="39:9" pos:end="39:20"><name pos:start="39:9" pos:end="39:15">version</name> <operator pos:start="39:17" pos:end="39:18">==</operator> <literal type="number" pos:start="39:20" pos:end="39:20">1</literal></expr>)</condition> <block pos:start="39:23" pos:end="45:5">{<block_content pos:start="41:9" pos:end="43:21">

        <expr_stmt pos:start="41:9" pos:end="41:21"><expr pos:start="41:9" pos:end="41:20"><call pos:start="41:9" pos:end="41:20"><name pos:start="41:9" pos:end="41:16">get_be64</name><argument_list pos:start="41:17" pos:end="41:20">(<argument pos:start="41:18" pos:end="41:19"><expr pos:start="41:18" pos:end="41:19"><name pos:start="41:18" pos:end="41:19">pb</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <expr_stmt pos:start="43:9" pos:end="43:21"><expr pos:start="43:9" pos:end="43:20"><call pos:start="43:9" pos:end="43:20"><name pos:start="43:9" pos:end="43:16">get_be64</name><argument_list pos:start="43:17" pos:end="43:20">(<argument pos:start="43:18" pos:end="43:19"><expr pos:start="43:18" pos:end="43:19"><name pos:start="43:18" pos:end="43:19">pb</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    </block_content>}</block></if> <else pos:start="45:7" pos:end="51:5">else <block pos:start="45:12" pos:end="51:5">{<block_content pos:start="47:9" pos:end="49:21">

        <expr_stmt pos:start="47:9" pos:end="47:21"><expr pos:start="47:9" pos:end="47:20"><call pos:start="47:9" pos:end="47:20"><name pos:start="47:9" pos:end="47:16">get_be32</name><argument_list pos:start="47:17" pos:end="47:20">(<argument pos:start="47:18" pos:end="47:19"><expr pos:start="47:18" pos:end="47:19"><name pos:start="47:18" pos:end="47:19">pb</name></expr></argument>)</argument_list></call></expr>;</expr_stmt> <comment type="block" pos:start="47:23" pos:end="47:41">/* creation time */</comment>

        <expr_stmt pos:start="49:9" pos:end="49:21"><expr pos:start="49:9" pos:end="49:20"><call pos:start="49:9" pos:end="49:20"><name pos:start="49:9" pos:end="49:16">get_be32</name><argument_list pos:start="49:17" pos:end="49:20">(<argument pos:start="49:18" pos:end="49:19"><expr pos:start="49:18" pos:end="49:19"><name pos:start="49:18" pos:end="49:19">pb</name></expr></argument>)</argument_list></call></expr>;</expr_stmt> <comment type="block" pos:start="49:23" pos:end="49:45">/* modification time */</comment>

    </block_content>}</block></else></if_stmt>

    <expr_stmt pos:start="53:5" pos:end="53:31"><expr pos:start="53:5" pos:end="53:30"><name pos:start="53:5" pos:end="53:10"><name pos:start="53:5" pos:end="53:6">st</name><operator pos:start="53:7" pos:end="53:8">-&gt;</operator><name pos:start="53:9" pos:end="53:10">id</name></name> <operator pos:start="53:12" pos:end="53:12">=</operator> <operator pos:start="53:14" pos:end="53:14">(</operator><name pos:start="53:15" pos:end="53:17">int</name><operator pos:start="53:18" pos:end="53:18">)</operator><call pos:start="53:19" pos:end="53:30"><name pos:start="53:19" pos:end="53:26">get_be32</name><argument_list pos:start="53:27" pos:end="53:30">(<argument pos:start="53:28" pos:end="53:29"><expr pos:start="53:28" pos:end="53:29"><name pos:start="53:28" pos:end="53:29">pb</name></expr></argument>)</argument_list></call></expr>;</expr_stmt> <comment type="block" pos:start="53:33" pos:end="53:55">/* track id (NOT 0 !)*/</comment>

    <expr_stmt pos:start="55:5" pos:end="55:17"><expr pos:start="55:5" pos:end="55:16"><call pos:start="55:5" pos:end="55:16"><name pos:start="55:5" pos:end="55:12">get_be32</name><argument_list pos:start="55:13" pos:end="55:16">(<argument pos:start="55:14" pos:end="55:15"><expr pos:start="55:14" pos:end="55:15"><name pos:start="55:14" pos:end="55:15">pb</name></expr></argument>)</argument_list></call></expr>;</expr_stmt> <comment type="block" pos:start="55:19" pos:end="55:32">/* reserved */</comment>



    <comment type="block" pos:start="59:5" pos:end="59:66">/* highlevel (considering edits) duration in movie timebase */</comment>

    <expr_stmt pos:start="61:5" pos:end="61:49"><expr pos:start="61:5" pos:end="61:48"><ternary pos:start="61:5" pos:end="61:48"><condition pos:start="61:5" pos:end="61:20"><expr pos:start="61:5" pos:end="61:18"><operator pos:start="61:5" pos:end="61:5">(</operator><name pos:start="61:6" pos:end="61:12">version</name> <operator pos:start="61:14" pos:end="61:15">==</operator> <literal type="number" pos:start="61:17" pos:end="61:17">1</literal><operator pos:start="61:18" pos:end="61:18">)</operator></expr> ?</condition><then pos:start="61:22" pos:end="61:33"> <expr pos:start="61:22" pos:end="61:33"><call pos:start="61:22" pos:end="61:33"><name pos:start="61:22" pos:end="61:29">get_be64</name><argument_list pos:start="61:30" pos:end="61:33">(<argument pos:start="61:31" pos:end="61:32"><expr pos:start="61:31" pos:end="61:32"><name pos:start="61:31" pos:end="61:32">pb</name></expr></argument>)</argument_list></call></expr> </then><else pos:start="61:35" pos:end="61:48">: <expr pos:start="61:37" pos:end="61:48"><call pos:start="61:37" pos:end="61:48"><name pos:start="61:37" pos:end="61:44">get_be32</name><argument_list pos:start="61:45" pos:end="61:48">(<argument pos:start="61:46" pos:end="61:47"><expr pos:start="61:46" pos:end="61:47"><name pos:start="61:46" pos:end="61:47">pb</name></expr></argument>)</argument_list></call></expr></else></ternary></expr>;</expr_stmt>

    <expr_stmt pos:start="63:5" pos:end="63:17"><expr pos:start="63:5" pos:end="63:16"><call pos:start="63:5" pos:end="63:16"><name pos:start="63:5" pos:end="63:12">get_be32</name><argument_list pos:start="63:13" pos:end="63:16">(<argument pos:start="63:14" pos:end="63:15"><expr pos:start="63:14" pos:end="63:15"><name pos:start="63:14" pos:end="63:15">pb</name></expr></argument>)</argument_list></call></expr>;</expr_stmt> <comment type="block" pos:start="63:19" pos:end="63:32">/* reserved */</comment>

    <expr_stmt pos:start="65:5" pos:end="65:17"><expr pos:start="65:5" pos:end="65:16"><call pos:start="65:5" pos:end="65:16"><name pos:start="65:5" pos:end="65:12">get_be32</name><argument_list pos:start="65:13" pos:end="65:16">(<argument pos:start="65:14" pos:end="65:15"><expr pos:start="65:14" pos:end="65:15"><name pos:start="65:14" pos:end="65:15">pb</name></expr></argument>)</argument_list></call></expr>;</expr_stmt> <comment type="block" pos:start="65:19" pos:end="65:32">/* reserved */</comment>



    <expr_stmt pos:start="69:5" pos:end="69:17"><expr pos:start="69:5" pos:end="69:16"><call pos:start="69:5" pos:end="69:16"><name pos:start="69:5" pos:end="69:12">get_be16</name><argument_list pos:start="69:13" pos:end="69:16">(<argument pos:start="69:14" pos:end="69:15"><expr pos:start="69:14" pos:end="69:15"><name pos:start="69:14" pos:end="69:15">pb</name></expr></argument>)</argument_list></call></expr>;</expr_stmt> <comment type="block" pos:start="69:19" pos:end="69:29">/* layer */</comment>

    <expr_stmt pos:start="71:5" pos:end="71:17"><expr pos:start="71:5" pos:end="71:16"><call pos:start="71:5" pos:end="71:16"><name pos:start="71:5" pos:end="71:12">get_be16</name><argument_list pos:start="71:13" pos:end="71:16">(<argument pos:start="71:14" pos:end="71:15"><expr pos:start="71:14" pos:end="71:15"><name pos:start="71:14" pos:end="71:15">pb</name></expr></argument>)</argument_list></call></expr>;</expr_stmt> <comment type="block" pos:start="71:19" pos:end="71:39">/* alternate group */</comment>

    <expr_stmt pos:start="73:5" pos:end="73:17"><expr pos:start="73:5" pos:end="73:16"><call pos:start="73:5" pos:end="73:16"><name pos:start="73:5" pos:end="73:12">get_be16</name><argument_list pos:start="73:13" pos:end="73:16">(<argument pos:start="73:14" pos:end="73:15"><expr pos:start="73:14" pos:end="73:15"><name pos:start="73:14" pos:end="73:15">pb</name></expr></argument>)</argument_list></call></expr>;</expr_stmt> <comment type="block" pos:start="73:19" pos:end="73:30">/* volume */</comment>

    <expr_stmt pos:start="75:5" pos:end="75:17"><expr pos:start="75:5" pos:end="75:16"><call pos:start="75:5" pos:end="75:16"><name pos:start="75:5" pos:end="75:12">get_be16</name><argument_list pos:start="75:13" pos:end="75:16">(<argument pos:start="75:14" pos:end="75:15"><expr pos:start="75:14" pos:end="75:15"><name pos:start="75:14" pos:end="75:15">pb</name></expr></argument>)</argument_list></call></expr>;</expr_stmt> <comment type="block" pos:start="75:19" pos:end="75:32">/* reserved */</comment>



    <comment type="line" pos:start="79:5" pos:end="79:74">//read in the display matrix (outlined in ISO 14496-12, Section 6.2.2)</comment>

    <comment type="line" pos:start="81:5" pos:end="81:66">// they're kept in fixed point format through all calculations</comment>

    <comment type="line" pos:start="83:5" pos:end="83:75">// ignore u,v,z b/c we don't need the scale factor to calc aspect ratio</comment>

    <for pos:start="85:5" pos:end="93:5">for <control pos:start="85:9" pos:end="85:27">(<init pos:start="85:10" pos:end="85:15"><expr pos:start="85:10" pos:end="85:14"><name pos:start="85:10" pos:end="85:10">i</name> <operator pos:start="85:12" pos:end="85:12">=</operator> <literal type="number" pos:start="85:14" pos:end="85:14">0</literal></expr>;</init> <condition pos:start="85:17" pos:end="85:22"><expr pos:start="85:17" pos:end="85:21"><name pos:start="85:17" pos:end="85:17">i</name> <operator pos:start="85:19" pos:end="85:19">&lt;</operator> <literal type="number" pos:start="85:21" pos:end="85:21">3</literal></expr>;</condition> <incr pos:start="85:24" pos:end="85:26"><expr pos:start="85:24" pos:end="85:26"><name pos:start="85:24" pos:end="85:24">i</name><operator pos:start="85:25" pos:end="85:26">++</operator></expr></incr>)</control> <block pos:start="85:29" pos:end="93:5">{<block_content pos:start="87:9" pos:end="91:21">

        <expr_stmt pos:start="87:9" pos:end="87:44"><expr pos:start="87:9" pos:end="87:43"><name pos:start="87:9" pos:end="87:28"><name pos:start="87:9" pos:end="87:22">display_matrix</name><index pos:start="87:23" pos:end="87:25">[<expr pos:start="87:24" pos:end="87:24"><name pos:start="87:24" pos:end="87:24">i</name></expr>]</index><index pos:start="87:26" pos:end="87:28">[<expr pos:start="87:27" pos:end="87:27"><literal type="number" pos:start="87:27" pos:end="87:27">0</literal></expr>]</index></name> <operator pos:start="87:30" pos:end="87:30">=</operator> <call pos:start="87:32" pos:end="87:43"><name pos:start="87:32" pos:end="87:39">get_be32</name><argument_list pos:start="87:40" pos:end="87:43">(<argument pos:start="87:41" pos:end="87:42"><expr pos:start="87:41" pos:end="87:42"><name pos:start="87:41" pos:end="87:42">pb</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>   <comment type="line" pos:start="87:48" pos:end="87:67">// 16.16 fixed point</comment>

        <expr_stmt pos:start="89:9" pos:end="89:44"><expr pos:start="89:9" pos:end="89:43"><name pos:start="89:9" pos:end="89:28"><name pos:start="89:9" pos:end="89:22">display_matrix</name><index pos:start="89:23" pos:end="89:25">[<expr pos:start="89:24" pos:end="89:24"><name pos:start="89:24" pos:end="89:24">i</name></expr>]</index><index pos:start="89:26" pos:end="89:28">[<expr pos:start="89:27" pos:end="89:27"><literal type="number" pos:start="89:27" pos:end="89:27">1</literal></expr>]</index></name> <operator pos:start="89:30" pos:end="89:30">=</operator> <call pos:start="89:32" pos:end="89:43"><name pos:start="89:32" pos:end="89:39">get_be32</name><argument_list pos:start="89:40" pos:end="89:43">(<argument pos:start="89:41" pos:end="89:42"><expr pos:start="89:41" pos:end="89:42"><name pos:start="89:41" pos:end="89:42">pb</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>   <comment type="line" pos:start="89:48" pos:end="89:67">// 16.16 fixed point</comment>

        <expr_stmt pos:start="91:9" pos:end="91:21"><expr pos:start="91:9" pos:end="91:20"><call pos:start="91:9" pos:end="91:20"><name pos:start="91:9" pos:end="91:16">get_be32</name><argument_list pos:start="91:17" pos:end="91:20">(<argument pos:start="91:18" pos:end="91:19"><expr pos:start="91:18" pos:end="91:19"><name pos:start="91:18" pos:end="91:19">pb</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>           <comment type="line" pos:start="91:33" pos:end="91:62">// 2.30 fixed point (not used)</comment>

    </block_content>}</block></for>



    <expr_stmt pos:start="97:5" pos:end="97:25"><expr pos:start="97:5" pos:end="97:24"><name pos:start="97:5" pos:end="97:9">width</name> <operator pos:start="97:11" pos:end="97:11">=</operator> <call pos:start="97:13" pos:end="97:24"><name pos:start="97:13" pos:end="97:20">get_be32</name><argument_list pos:start="97:21" pos:end="97:24">(<argument pos:start="97:22" pos:end="97:23"><expr pos:start="97:22" pos:end="97:23"><name pos:start="97:22" pos:end="97:23">pb</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>       <comment type="line" pos:start="97:33" pos:end="97:64">// 16.16 fixed point track width</comment>

    <expr_stmt pos:start="99:5" pos:end="99:26"><expr pos:start="99:5" pos:end="99:25"><name pos:start="99:5" pos:end="99:10">height</name> <operator pos:start="99:12" pos:end="99:12">=</operator> <call pos:start="99:14" pos:end="99:25"><name pos:start="99:14" pos:end="99:21">get_be32</name><argument_list pos:start="99:22" pos:end="99:25">(<argument pos:start="99:23" pos:end="99:24"><expr pos:start="99:23" pos:end="99:24"><name pos:start="99:23" pos:end="99:24">pb</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>      <comment type="line" pos:start="99:33" pos:end="99:65">// 16.16 fixed point track height</comment>

    <expr_stmt pos:start="101:5" pos:end="101:28"><expr pos:start="101:5" pos:end="101:27"><name pos:start="101:5" pos:end="101:13"><name pos:start="101:5" pos:end="101:6">sc</name><operator pos:start="101:7" pos:end="101:8">-&gt;</operator><name pos:start="101:9" pos:end="101:13">width</name></name> <operator pos:start="101:15" pos:end="101:15">=</operator> <name pos:start="101:17" pos:end="101:21">width</name> <operator pos:start="101:23" pos:end="101:24">&gt;&gt;</operator> <literal type="number" pos:start="101:26" pos:end="101:27">16</literal></expr>;</expr_stmt>

    <expr_stmt pos:start="103:5" pos:end="103:30"><expr pos:start="103:5" pos:end="103:29"><name pos:start="103:5" pos:end="103:14"><name pos:start="103:5" pos:end="103:6">sc</name><operator pos:start="103:7" pos:end="103:8">-&gt;</operator><name pos:start="103:9" pos:end="103:14">height</name></name> <operator pos:start="103:16" pos:end="103:16">=</operator> <name pos:start="103:18" pos:end="103:23">height</name> <operator pos:start="103:25" pos:end="103:26">&gt;&gt;</operator> <literal type="number" pos:start="103:28" pos:end="103:29">16</literal></expr>;</expr_stmt>



    <comment type="line" pos:start="107:5" pos:end="107:64">//transform the display width/height according to the matrix</comment>

    <comment type="line" pos:start="109:5" pos:end="109:69">// skip this if the display matrix is the default identity matrix</comment>

    <comment type="line" pos:start="111:5" pos:end="111:55">// to keep the same scale, use [width height 1&lt;&lt;16]</comment>

    <if_stmt pos:start="113:5" pos:end="141:5"><if pos:start="113:5" pos:end="141:5">if <condition pos:start="113:8" pos:end="119:64">(<expr pos:start="113:9" pos:end="119:63"><name pos:start="113:9" pos:end="113:13">width</name> <operator pos:start="113:15" pos:end="113:16">&amp;&amp;</operator> <name pos:start="113:18" pos:end="113:23">height</name> <operator pos:start="113:25" pos:end="113:26">&amp;&amp;</operator>

        <operator pos:start="115:9" pos:end="115:9">(</operator><name pos:start="115:10" pos:end="115:29"><name pos:start="115:10" pos:end="115:23">display_matrix</name><index pos:start="115:24" pos:end="115:26">[<expr pos:start="115:25" pos:end="115:25"><literal type="number" pos:start="115:25" pos:end="115:25">0</literal></expr>]</index><index pos:start="115:27" pos:end="115:29">[<expr pos:start="115:28" pos:end="115:28"><literal type="number" pos:start="115:28" pos:end="115:28">0</literal></expr>]</index></name> <operator pos:start="115:31" pos:end="115:32">!=</operator> <literal type="number" pos:start="115:34" pos:end="115:38">65536</literal> <operator pos:start="115:40" pos:end="115:41">||</operator> <name pos:start="115:43" pos:end="115:62"><name pos:start="115:43" pos:end="115:56">display_matrix</name><index pos:start="115:57" pos:end="115:59">[<expr pos:start="115:58" pos:end="115:58"><literal type="number" pos:start="115:58" pos:end="115:58">0</literal></expr>]</index><index pos:start="115:60" pos:end="115:62">[<expr pos:start="115:61" pos:end="115:61"><literal type="number" pos:start="115:61" pos:end="115:61">1</literal></expr>]</index></name>           <operator pos:start="115:74" pos:end="115:75">||</operator>

        <name pos:start="117:9" pos:end="117:28"><name pos:start="117:9" pos:end="117:22">display_matrix</name><index pos:start="117:23" pos:end="117:25">[<expr pos:start="117:24" pos:end="117:24"><literal type="number" pos:start="117:24" pos:end="117:24">1</literal></expr>]</index><index pos:start="117:26" pos:end="117:28">[<expr pos:start="117:27" pos:end="117:27"><literal type="number" pos:start="117:27" pos:end="117:27">0</literal></expr>]</index></name>           <operator pos:start="117:40" pos:end="117:41">||</operator> <name pos:start="117:43" pos:end="117:62"><name pos:start="117:43" pos:end="117:56">display_matrix</name><index pos:start="117:57" pos:end="117:59">[<expr pos:start="117:58" pos:end="117:58"><literal type="number" pos:start="117:58" pos:end="117:58">1</literal></expr>]</index><index pos:start="117:60" pos:end="117:62">[<expr pos:start="117:61" pos:end="117:61"><literal type="number" pos:start="117:61" pos:end="117:61">1</literal></expr>]</index></name> <operator pos:start="117:64" pos:end="117:65">!=</operator> <literal type="number" pos:start="117:67" pos:end="117:71">65536</literal>  <operator pos:start="117:74" pos:end="117:75">||</operator>

        <name pos:start="119:9" pos:end="119:28"><name pos:start="119:9" pos:end="119:22">display_matrix</name><index pos:start="119:23" pos:end="119:25">[<expr pos:start="119:24" pos:end="119:24"><literal type="number" pos:start="119:24" pos:end="119:24">2</literal></expr>]</index><index pos:start="119:26" pos:end="119:28">[<expr pos:start="119:27" pos:end="119:27"><literal type="number" pos:start="119:27" pos:end="119:27">0</literal></expr>]</index></name>           <operator pos:start="119:40" pos:end="119:41">||</operator> <name pos:start="119:43" pos:end="119:62"><name pos:start="119:43" pos:end="119:56">display_matrix</name><index pos:start="119:57" pos:end="119:59">[<expr pos:start="119:58" pos:end="119:58"><literal type="number" pos:start="119:58" pos:end="119:58">2</literal></expr>]</index><index pos:start="119:60" pos:end="119:62">[<expr pos:start="119:61" pos:end="119:61"><literal type="number" pos:start="119:61" pos:end="119:61">1</literal></expr>]</index></name><operator pos:start="119:63" pos:end="119:63">)</operator></expr>)</condition> <block pos:start="119:66" pos:end="141:5">{<block_content pos:start="121:9" pos:end="139:59">

        <for pos:start="121:9" pos:end="129:55">for <control pos:start="121:13" pos:end="121:31">(<init pos:start="121:14" pos:end="121:19"><expr pos:start="121:14" pos:end="121:18"><name pos:start="121:14" pos:end="121:14">i</name> <operator pos:start="121:16" pos:end="121:16">=</operator> <literal type="number" pos:start="121:18" pos:end="121:18">0</literal></expr>;</init> <condition pos:start="121:21" pos:end="121:26"><expr pos:start="121:21" pos:end="121:25"><name pos:start="121:21" pos:end="121:21">i</name> <operator pos:start="121:23" pos:end="121:23">&lt;</operator> <literal type="number" pos:start="121:25" pos:end="121:25">2</literal></expr>;</condition> <incr pos:start="121:28" pos:end="121:30"><expr pos:start="121:28" pos:end="121:30"><name pos:start="121:28" pos:end="121:28">i</name><operator pos:start="121:29" pos:end="121:30">++</operator></expr></incr>)</control><block type="pseudo" pos:start="123:13" pos:end="129:55"><block_content pos:start="123:13" pos:end="129:55">

            <expr_stmt pos:start="123:13" pos:end="129:55"><expr pos:start="123:13" pos:end="129:54"><name pos:start="123:13" pos:end="123:29"><name pos:start="123:13" pos:end="123:26">disp_transform</name><index pos:start="123:27" pos:end="123:29">[<expr pos:start="123:28" pos:end="123:28"><name pos:start="123:28" pos:end="123:28">i</name></expr>]</index></name> <operator pos:start="123:31" pos:end="123:31">=</operator>

                <operator pos:start="125:17" pos:end="125:17">(</operator><name pos:start="125:18" pos:end="125:24">int64_t</name><operator pos:start="125:25" pos:end="125:25">)</operator>  <name pos:start="125:28" pos:end="125:32">width</name>  <operator pos:start="125:35" pos:end="125:35">*</operator> <name pos:start="125:37" pos:end="125:56"><name pos:start="125:37" pos:end="125:50">display_matrix</name><index pos:start="125:51" pos:end="125:53">[<expr pos:start="125:52" pos:end="125:52"><literal type="number" pos:start="125:52" pos:end="125:52">0</literal></expr>]</index><index pos:start="125:54" pos:end="125:56">[<expr pos:start="125:55" pos:end="125:55"><name pos:start="125:55" pos:end="125:55">i</name></expr>]</index></name> <operator pos:start="125:58" pos:end="125:58">+</operator>

                <operator pos:start="127:17" pos:end="127:17">(</operator><name pos:start="127:18" pos:end="127:24">int64_t</name><operator pos:start="127:25" pos:end="127:25">)</operator>  <name pos:start="127:28" pos:end="127:33">height</name> <operator pos:start="127:35" pos:end="127:35">*</operator> <name pos:start="127:37" pos:end="127:56"><name pos:start="127:37" pos:end="127:50">display_matrix</name><index pos:start="127:51" pos:end="127:53">[<expr pos:start="127:52" pos:end="127:52"><literal type="number" pos:start="127:52" pos:end="127:52">1</literal></expr>]</index><index pos:start="127:54" pos:end="127:56">[<expr pos:start="127:55" pos:end="127:55"><name pos:start="127:55" pos:end="127:55">i</name></expr>]</index></name> <operator pos:start="127:58" pos:end="127:58">+</operator>

                <operator pos:start="129:17" pos:end="129:17">(</operator><operator pos:start="129:18" pos:end="129:18">(</operator><name pos:start="129:19" pos:end="129:25">int64_t</name><operator pos:start="129:26" pos:end="129:26">)</operator> <name pos:start="129:28" pos:end="129:47"><name pos:start="129:28" pos:end="129:41">display_matrix</name><index pos:start="129:42" pos:end="129:44">[<expr pos:start="129:43" pos:end="129:43"><literal type="number" pos:start="129:43" pos:end="129:43">2</literal></expr>]</index><index pos:start="129:45" pos:end="129:47">[<expr pos:start="129:46" pos:end="129:46"><name pos:start="129:46" pos:end="129:46">i</name></expr>]</index></name> <operator pos:start="129:49" pos:end="129:50">&lt;&lt;</operator> <literal type="number" pos:start="129:52" pos:end="129:53">16</literal><operator pos:start="129:54" pos:end="129:54">)</operator></expr>;</expr_stmt></block_content></block></for>



        <comment type="line" pos:start="133:9" pos:end="133:77">//sample aspect ratio is new width/height divided by old width/height</comment>

        <expr_stmt pos:start="135:9" pos:end="139:59"><expr pos:start="135:9" pos:end="139:58"><name pos:start="135:9" pos:end="135:31"><name pos:start="135:9" pos:end="135:10">st</name><operator pos:start="135:11" pos:end="135:12">-&gt;</operator><name pos:start="135:13" pos:end="135:31">sample_aspect_ratio</name></name> <operator pos:start="135:33" pos:end="135:33">=</operator> <call pos:start="135:35" pos:end="139:58"><name pos:start="135:35" pos:end="135:40">av_d2q</name><argument_list pos:start="135:41" pos:end="139:58">(

            <argument pos:start="137:13" pos:end="139:48"><expr pos:start="137:13" pos:end="139:48"><operator pos:start="137:13" pos:end="137:13">(</operator><operator pos:start="137:14" pos:end="137:14">(</operator><name pos:start="137:15" pos:end="137:20">double</name><operator pos:start="137:21" pos:end="137:21">)</operator> <name pos:start="137:23" pos:end="137:39"><name pos:start="137:23" pos:end="137:36">disp_transform</name><index pos:start="137:37" pos:end="137:39">[<expr pos:start="137:38" pos:end="137:38"><literal type="number" pos:start="137:38" pos:end="137:38">0</literal></expr>]</index></name> <operator pos:start="137:41" pos:end="137:41">*</operator> <name pos:start="137:43" pos:end="137:48">height</name><operator pos:start="137:49" pos:end="137:49">)</operator> <operator pos:start="137:51" pos:end="137:51">/</operator>

            <operator pos:start="139:13" pos:end="139:13">(</operator><operator pos:start="139:14" pos:end="139:14">(</operator><name pos:start="139:15" pos:end="139:20">double</name><operator pos:start="139:21" pos:end="139:21">)</operator> <name pos:start="139:23" pos:end="139:39"><name pos:start="139:23" pos:end="139:36">disp_transform</name><index pos:start="139:37" pos:end="139:39">[<expr pos:start="139:38" pos:end="139:38"><literal type="number" pos:start="139:38" pos:end="139:38">1</literal></expr>]</index></name> <operator pos:start="139:41" pos:end="139:41">*</operator> <name pos:start="139:43" pos:end="139:47">width</name><operator pos:start="139:48" pos:end="139:48">)</operator></expr></argument>, <argument pos:start="139:51" pos:end="139:57"><expr pos:start="139:51" pos:end="139:57"><name pos:start="139:51" pos:end="139:57">INT_MAX</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    </block_content>}</block></if></if_stmt>

    <return pos:start="143:5" pos:end="143:13">return <expr pos:start="143:12" pos:end="143:12"><literal type="number" pos:start="143:12" pos:end="143:12">0</literal></expr>;</return>

</block_content>}</block></function>
</unit>
