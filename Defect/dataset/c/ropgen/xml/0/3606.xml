<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<unit xmlns="http://www.srcML.org/srcML/src" xmlns:pos="http://www.srcML.org/srcML/position" revision="1.0.0" language="C" filename="dataset/ropgen/aug/0/3606.c" pos:tabs="8"><macro pos:start="1:1" pos:end="5:57"><name pos:start="1:1" pos:end="1:16">rdt_parse_packet</name> <argument_list pos:start="1:18" pos:end="5:57">(<argument pos:start="1:19" pos:end="1:37">PayloadContext *rdt</argument>, <argument pos:start="1:40" pos:end="1:51">AVStream *st</argument>,

                  <argument pos:start="3:19" pos:end="3:31">AVPacket *pkt</argument>, <argument pos:start="3:34" pos:end="3:52">uint32_t *timestamp</argument>,

                  <argument pos:start="5:19" pos:end="5:36">const uint8_t *buf</argument>, <argument pos:start="5:39" pos:end="5:45">int len</argument>, <argument pos:start="5:48" pos:end="5:56">int flags</argument>)</argument_list></macro>

<block pos:start="7:1" pos:end="69:1">{<block_content pos:start="9:5" pos:end="67:42">

    <decl_stmt pos:start="9:5" pos:end="9:21"><decl pos:start="9:5" pos:end="9:15"><type pos:start="9:5" pos:end="9:7"><name pos:start="9:5" pos:end="9:7">int</name></type> <name pos:start="9:9" pos:end="9:11">seq</name> <init pos:start="9:13" pos:end="9:15">= <expr pos:start="9:15" pos:end="9:15"><literal type="number" pos:start="9:15" pos:end="9:15">1</literal></expr></init></decl>, <decl pos:start="9:18" pos:end="9:20"><type ref="prev" pos:start="9:5" pos:end="9:7"/><name pos:start="9:18" pos:end="9:20">res</name></decl>;</decl_stmt>

    <decl_stmt pos:start="11:5" pos:end="11:21"><decl pos:start="11:5" pos:end="11:20"><type pos:start="11:5" pos:end="11:17"><name pos:start="11:5" pos:end="11:17">ByteIOContext</name></type> <name pos:start="11:19" pos:end="11:20">pb</name></decl>;</decl_stmt>



    <if_stmt pos:start="15:5" pos:end="59:5"><if pos:start="15:5" pos:end="49:5">if <condition pos:start="15:8" pos:end="15:32">(<expr pos:start="15:9" pos:end="15:31"><name pos:start="15:9" pos:end="15:26"><name pos:start="15:9" pos:end="15:11">rdt</name><operator pos:start="15:12" pos:end="15:13">-&gt;</operator><name pos:start="15:14" pos:end="15:26">audio_pkt_cnt</name></name> <operator pos:start="15:28" pos:end="15:29">==</operator> <literal type="number" pos:start="15:31" pos:end="15:31">0</literal></expr>)</condition> <block pos:start="15:34" pos:end="49:5">{<block_content pos:start="17:9" pos:end="47:9">

        <decl_stmt pos:start="17:9" pos:end="17:16"><decl pos:start="17:9" pos:end="17:15"><type pos:start="17:9" pos:end="17:11"><name pos:start="17:9" pos:end="17:11">int</name></type> <name pos:start="17:13" pos:end="17:15">pos</name></decl>;</decl_stmt>



        <expr_stmt pos:start="21:9" pos:end="21:64"><expr pos:start="21:9" pos:end="21:63"><call pos:start="21:9" pos:end="21:63"><name pos:start="21:9" pos:end="21:21">init_put_byte</name><argument_list pos:start="21:22" pos:end="21:63">(<argument pos:start="21:23" pos:end="21:25"><expr pos:start="21:23" pos:end="21:25"><operator pos:start="21:23" pos:end="21:23">&amp;</operator><name pos:start="21:24" pos:end="21:25">pb</name></expr></argument>, <argument pos:start="21:28" pos:end="21:30"><expr pos:start="21:28" pos:end="21:30"><name pos:start="21:28" pos:end="21:30">buf</name></expr></argument>, <argument pos:start="21:33" pos:end="21:35"><expr pos:start="21:33" pos:end="21:35"><name pos:start="21:33" pos:end="21:35">len</name></expr></argument>, <argument pos:start="21:38" pos:end="21:38"><expr pos:start="21:38" pos:end="21:38"><literal type="number" pos:start="21:38" pos:end="21:38">0</literal></expr></argument>, <argument pos:start="21:41" pos:end="21:44"><expr pos:start="21:41" pos:end="21:44"><name pos:start="21:41" pos:end="21:44">NULL</name></expr></argument>, <argument pos:start="21:47" pos:end="21:50"><expr pos:start="21:47" pos:end="21:50"><name pos:start="21:47" pos:end="21:50">NULL</name></expr></argument>, <argument pos:start="21:53" pos:end="21:56"><expr pos:start="21:53" pos:end="21:56"><name pos:start="21:53" pos:end="21:56">NULL</name></expr></argument>, <argument pos:start="21:59" pos:end="21:62"><expr pos:start="21:59" pos:end="21:62"><name pos:start="21:59" pos:end="21:62">NULL</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <expr_stmt pos:start="23:9" pos:end="23:47"><expr pos:start="23:9" pos:end="23:46"><name pos:start="23:9" pos:end="23:13">flags</name> <operator pos:start="23:15" pos:end="23:15">=</operator> <ternary pos:start="23:17" pos:end="23:46"><condition pos:start="23:17" pos:end="23:40"><expr pos:start="23:17" pos:end="23:38"><operator pos:start="23:17" pos:end="23:17">(</operator><name pos:start="23:18" pos:end="23:22">flags</name> <operator pos:start="23:24" pos:end="23:24">&amp;</operator> <name pos:start="23:26" pos:end="23:37">PKT_FLAG_KEY</name><operator pos:start="23:38" pos:end="23:38">)</operator></expr> ?</condition><then pos:start="23:42" pos:end="23:42"> <expr pos:start="23:42" pos:end="23:42"><literal type="number" pos:start="23:42" pos:end="23:42">2</literal></expr> </then><else pos:start="23:44" pos:end="23:46">: <expr pos:start="23:46" pos:end="23:46"><literal type="number" pos:start="23:46" pos:end="23:46">0</literal></expr></else></ternary></expr>;</expr_stmt>

        <expr_stmt pos:start="25:9" pos:end="27:59"><expr pos:start="25:9" pos:end="27:58"><name pos:start="25:9" pos:end="25:11">res</name> <operator pos:start="25:13" pos:end="25:13">=</operator> <call pos:start="25:15" pos:end="27:58"><name pos:start="25:15" pos:end="25:32">ff_rm_parse_packet</name> <argument_list pos:start="25:34" pos:end="27:58">(<argument pos:start="25:35" pos:end="25:44"><expr pos:start="25:35" pos:end="25:44"><name pos:start="25:35" pos:end="25:44"><name pos:start="25:35" pos:end="25:37">rdt</name><operator pos:start="25:38" pos:end="25:39">-&gt;</operator><name pos:start="25:40" pos:end="25:44">rmctx</name></name></expr></argument>, <argument pos:start="25:47" pos:end="25:49"><expr pos:start="25:47" pos:end="25:49"><operator pos:start="25:47" pos:end="25:47">&amp;</operator><name pos:start="25:48" pos:end="25:49">pb</name></expr></argument>, <argument pos:start="25:52" pos:end="25:53"><expr pos:start="25:52" pos:end="25:53"><name pos:start="25:52" pos:end="25:53">st</name></expr></argument>, <argument pos:start="25:56" pos:end="25:67"><expr pos:start="25:56" pos:end="25:67"><name pos:start="25:56" pos:end="25:67"><name pos:start="25:56" pos:end="25:58">rdt</name><operator pos:start="25:59" pos:end="25:60">-&gt;</operator><name pos:start="25:61" pos:end="25:64">rmst</name><index pos:start="25:65" pos:end="25:67">[<expr pos:start="25:66" pos:end="25:66"><literal type="number" pos:start="25:66" pos:end="25:66">0</literal></expr>]</index></name></expr></argument>, <argument pos:start="25:70" pos:end="25:72"><expr pos:start="25:70" pos:end="25:72"><name pos:start="25:70" pos:end="25:72">len</name></expr></argument>, <argument pos:start="25:75" pos:end="25:77"><expr pos:start="25:75" pos:end="25:77"><name pos:start="25:75" pos:end="25:77">pkt</name></expr></argument>,

                                  <argument pos:start="27:35" pos:end="27:38"><expr pos:start="27:35" pos:end="27:38"><operator pos:start="27:35" pos:end="27:35">&amp;</operator><name pos:start="27:36" pos:end="27:38">seq</name></expr></argument>, <argument pos:start="27:41" pos:end="27:46"><expr pos:start="27:41" pos:end="27:46"><operator pos:start="27:41" pos:end="27:41">&amp;</operator><name pos:start="27:42" pos:end="27:46">flags</name></expr></argument>, <argument pos:start="27:49" pos:end="27:57"><expr pos:start="27:49" pos:end="27:57"><name pos:start="27:49" pos:end="27:57">timestamp</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <expr_stmt pos:start="29:9" pos:end="29:29"><expr pos:start="29:9" pos:end="29:28"><name pos:start="29:9" pos:end="29:11">pos</name> <operator pos:start="29:13" pos:end="29:13">=</operator> <call pos:start="29:15" pos:end="29:28"><name pos:start="29:15" pos:end="29:23">url_ftell</name><argument_list pos:start="29:24" pos:end="29:28">(<argument pos:start="29:25" pos:end="29:27"><expr pos:start="29:25" pos:end="29:27"><operator pos:start="29:25" pos:end="29:25">&amp;</operator><name pos:start="29:26" pos:end="29:27">pb</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <if_stmt pos:start="31:9" pos:end="33:23"><if pos:start="31:9" pos:end="33:23">if <condition pos:start="31:12" pos:end="31:20">(<expr pos:start="31:13" pos:end="31:19"><name pos:start="31:13" pos:end="31:15">res</name> <operator pos:start="31:17" pos:end="31:17">&lt;</operator> <literal type="number" pos:start="31:19" pos:end="31:19">0</literal></expr>)</condition><block type="pseudo" pos:start="33:13" pos:end="33:23"><block_content pos:start="33:13" pos:end="33:23">

            <return pos:start="33:13" pos:end="33:23">return <expr pos:start="33:20" pos:end="33:22"><name pos:start="33:20" pos:end="33:22">res</name></expr>;</return></block_content></block></if></if_stmt>

        <expr_stmt pos:start="35:9" pos:end="35:41"><expr pos:start="35:9" pos:end="35:40"><name pos:start="35:9" pos:end="35:34"><name pos:start="35:9" pos:end="35:11">rdt</name><operator pos:start="35:12" pos:end="35:13">-&gt;</operator><name pos:start="35:14" pos:end="35:26">audio_pkt_cnt</name><index pos:start="35:27" pos:end="35:34">[<expr pos:start="35:28" pos:end="35:33"><name pos:start="35:28" pos:end="35:33"><name pos:start="35:28" pos:end="35:29">st</name><operator pos:start="35:30" pos:end="35:31">-&gt;</operator><name pos:start="35:32" pos:end="35:33">id</name></name></expr>]</index></name> <operator pos:start="35:36" pos:end="35:36">=</operator> <name pos:start="35:38" pos:end="35:40">res</name></expr>;</expr_stmt>

        <if_stmt pos:start="37:9" pos:end="47:9"><if pos:start="37:9" pos:end="47:9">if <condition pos:start="37:12" pos:end="39:48">(<expr pos:start="37:13" pos:end="39:47"><name pos:start="37:13" pos:end="37:38"><name pos:start="37:13" pos:end="37:15">rdt</name><operator pos:start="37:16" pos:end="37:17">-&gt;</operator><name pos:start="37:18" pos:end="37:30">audio_pkt_cnt</name><index pos:start="37:31" pos:end="37:38">[<expr pos:start="37:32" pos:end="37:37"><name pos:start="37:32" pos:end="37:37"><name pos:start="37:32" pos:end="37:33">st</name><operator pos:start="37:34" pos:end="37:35">-&gt;</operator><name pos:start="37:36" pos:end="37:37">id</name></name></expr>]</index></name> <operator pos:start="37:40" pos:end="37:40">&gt;</operator> <literal type="number" pos:start="37:42" pos:end="37:42">0</literal> <operator pos:start="37:44" pos:end="37:45">&amp;&amp;</operator>

            <name pos:start="39:13" pos:end="39:31"><name pos:start="39:13" pos:end="39:14">st</name><operator pos:start="39:15" pos:end="39:16">-&gt;</operator><name pos:start="39:17" pos:end="39:21">codec</name><operator pos:start="39:22" pos:end="39:23">-&gt;</operator><name pos:start="39:24" pos:end="39:31">codec_id</name></name> <operator pos:start="39:33" pos:end="39:34">==</operator> <name pos:start="39:36" pos:end="39:47">CODEC_ID_AAC</name></expr>)</condition> <block pos:start="39:50" pos:end="47:9">{<block_content pos:start="41:13" pos:end="45:72">

            <expr_stmt pos:start="41:13" pos:end="41:55"><expr pos:start="41:13" pos:end="41:54"><call pos:start="41:13" pos:end="41:54"><name pos:start="41:13" pos:end="41:18">memcpy</name> <argument_list pos:start="41:20" pos:end="41:54">(<argument pos:start="41:21" pos:end="41:31"><expr pos:start="41:21" pos:end="41:31"><name pos:start="41:21" pos:end="41:31"><name pos:start="41:21" pos:end="41:23">rdt</name><operator pos:start="41:24" pos:end="41:25">-&gt;</operator><name pos:start="41:26" pos:end="41:31">buffer</name></name></expr></argument>, <argument pos:start="41:34" pos:end="41:42"><expr pos:start="41:34" pos:end="41:42"><name pos:start="41:34" pos:end="41:36">buf</name> <operator pos:start="41:38" pos:end="41:38">+</operator> <name pos:start="41:40" pos:end="41:42">pos</name></expr></argument>, <argument pos:start="41:45" pos:end="41:53"><expr pos:start="41:45" pos:end="41:53"><name pos:start="41:45" pos:end="41:47">len</name> <operator pos:start="41:49" pos:end="41:49">-</operator> <name pos:start="41:51" pos:end="41:53">pos</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

            <expr_stmt pos:start="43:13" pos:end="45:72"><expr pos:start="43:13" pos:end="45:71"><name pos:start="43:13" pos:end="43:26"><name pos:start="43:13" pos:end="43:15">rdt</name><operator pos:start="43:16" pos:end="43:17">-&gt;</operator><name pos:start="43:18" pos:end="43:22">rmctx</name><operator pos:start="43:23" pos:end="43:24">-&gt;</operator><name pos:start="43:25" pos:end="43:26">pb</name></name> <operator pos:start="43:28" pos:end="43:28">=</operator> <call pos:start="43:30" pos:end="45:71"><name pos:start="43:30" pos:end="43:46">av_alloc_put_byte</name> <argument_list pos:start="43:48" pos:end="45:71">(<argument pos:start="43:49" pos:end="43:59"><expr pos:start="43:49" pos:end="43:59"><name pos:start="43:49" pos:end="43:59"><name pos:start="43:49" pos:end="43:51">rdt</name><operator pos:start="43:52" pos:end="43:53">-&gt;</operator><name pos:start="43:54" pos:end="43:59">buffer</name></name></expr></argument>, <argument pos:start="43:62" pos:end="43:70"><expr pos:start="43:62" pos:end="43:70"><name pos:start="43:62" pos:end="43:64">len</name> <operator pos:start="43:66" pos:end="43:66">-</operator> <name pos:start="43:68" pos:end="43:70">pos</name></expr></argument>, <argument pos:start="43:73" pos:end="43:73"><expr pos:start="43:73" pos:end="43:73"><literal type="number" pos:start="43:73" pos:end="43:73">0</literal></expr></argument>,

                                                <argument pos:start="45:49" pos:end="45:52"><expr pos:start="45:49" pos:end="45:52"><name pos:start="45:49" pos:end="45:52">NULL</name></expr></argument>, <argument pos:start="45:55" pos:end="45:58"><expr pos:start="45:55" pos:end="45:58"><name pos:start="45:55" pos:end="45:58">NULL</name></expr></argument>, <argument pos:start="45:61" pos:end="45:64"><expr pos:start="45:61" pos:end="45:64"><name pos:start="45:61" pos:end="45:64">NULL</name></expr></argument>, <argument pos:start="45:67" pos:end="45:70"><expr pos:start="45:67" pos:end="45:70"><name pos:start="45:67" pos:end="45:70">NULL</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        </block_content>}</block></if></if_stmt>

    </block_content>}</block></if> <else pos:start="49:7" pos:end="59:5">else <block pos:start="49:12" pos:end="59:5">{<block_content pos:start="51:9" pos:end="57:38">

        <expr_stmt pos:start="51:9" pos:end="51:81"><expr pos:start="51:9" pos:end="51:80"><call pos:start="51:9" pos:end="51:80"><name pos:start="51:9" pos:end="51:28">ff_rm_retrieve_cache</name> <argument_list pos:start="51:30" pos:end="51:80">(<argument pos:start="51:31" pos:end="51:40"><expr pos:start="51:31" pos:end="51:40"><name pos:start="51:31" pos:end="51:40"><name pos:start="51:31" pos:end="51:33">rdt</name><operator pos:start="51:34" pos:end="51:35">-&gt;</operator><name pos:start="51:36" pos:end="51:40">rmctx</name></name></expr></argument>, <argument pos:start="51:43" pos:end="51:56"><expr pos:start="51:43" pos:end="51:56"><name pos:start="51:43" pos:end="51:56"><name pos:start="51:43" pos:end="51:45">rdt</name><operator pos:start="51:46" pos:end="51:47">-&gt;</operator><name pos:start="51:48" pos:end="51:52">rmctx</name><operator pos:start="51:53" pos:end="51:54">-&gt;</operator><name pos:start="51:55" pos:end="51:56">pb</name></name></expr></argument>, <argument pos:start="51:59" pos:end="51:60"><expr pos:start="51:59" pos:end="51:60"><name pos:start="51:59" pos:end="51:60">st</name></expr></argument>, <argument pos:start="51:63" pos:end="51:74"><expr pos:start="51:63" pos:end="51:74"><name pos:start="51:63" pos:end="51:74"><name pos:start="51:63" pos:end="51:65">rdt</name><operator pos:start="51:66" pos:end="51:67">-&gt;</operator><name pos:start="51:68" pos:end="51:71">rmst</name><index pos:start="51:72" pos:end="51:74">[<expr pos:start="51:73" pos:end="51:73"><literal type="number" pos:start="51:73" pos:end="51:73">0</literal></expr>]</index></name></expr></argument>, <argument pos:start="51:77" pos:end="51:79"><expr pos:start="51:77" pos:end="51:79"><name pos:start="51:77" pos:end="51:79">pkt</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <if_stmt pos:start="53:9" pos:end="57:38"><if pos:start="53:9" pos:end="57:38">if <condition pos:start="53:12" pos:end="55:48">(<expr pos:start="53:13" pos:end="55:47"><name pos:start="53:13" pos:end="53:38"><name pos:start="53:13" pos:end="53:15">rdt</name><operator pos:start="53:16" pos:end="53:17">-&gt;</operator><name pos:start="53:18" pos:end="53:30">audio_pkt_cnt</name><index pos:start="53:31" pos:end="53:38">[<expr pos:start="53:32" pos:end="53:37"><name pos:start="53:32" pos:end="53:37"><name pos:start="53:32" pos:end="53:33">st</name><operator pos:start="53:34" pos:end="53:35">-&gt;</operator><name pos:start="53:36" pos:end="53:37">id</name></name></expr>]</index></name> <operator pos:start="53:40" pos:end="53:41">==</operator> <literal type="number" pos:start="53:43" pos:end="53:43">0</literal> <operator pos:start="53:45" pos:end="53:46">&amp;&amp;</operator>

            <name pos:start="55:13" pos:end="55:31"><name pos:start="55:13" pos:end="55:14">st</name><operator pos:start="55:15" pos:end="55:16">-&gt;</operator><name pos:start="55:17" pos:end="55:21">codec</name><operator pos:start="55:22" pos:end="55:23">-&gt;</operator><name pos:start="55:24" pos:end="55:31">codec_id</name></name> <operator pos:start="55:33" pos:end="55:34">==</operator> <name pos:start="55:36" pos:end="55:47">CODEC_ID_AAC</name></expr>)</condition><block type="pseudo" pos:start="57:13" pos:end="57:38"><block_content pos:start="57:13" pos:end="57:38">

            <expr_stmt pos:start="57:13" pos:end="57:38"><expr pos:start="57:13" pos:end="57:37"><call pos:start="57:13" pos:end="57:37"><name pos:start="57:13" pos:end="57:20">av_freep</name><argument_list pos:start="57:21" pos:end="57:37">(<argument pos:start="57:22" pos:end="57:36"><expr pos:start="57:22" pos:end="57:36"><operator pos:start="57:22" pos:end="57:22">&amp;</operator><name pos:start="57:23" pos:end="57:36"><name pos:start="57:23" pos:end="57:25">rdt</name><operator pos:start="57:26" pos:end="57:27">-&gt;</operator><name pos:start="57:28" pos:end="57:32">rmctx</name><operator pos:start="57:33" pos:end="57:34">-&gt;</operator><name pos:start="57:35" pos:end="57:36">pb</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt></block_content></block></if></if_stmt>

    </block_content>}</block></else></if_stmt>

    <expr_stmt pos:start="61:5" pos:end="61:34"><expr pos:start="61:5" pos:end="61:33"><name pos:start="61:5" pos:end="61:21"><name pos:start="61:5" pos:end="61:7">pkt</name><operator pos:start="61:8" pos:end="61:9">-&gt;</operator><name pos:start="61:10" pos:end="61:21">stream_index</name></name> <operator pos:start="61:23" pos:end="61:23">=</operator> <name pos:start="61:25" pos:end="61:33"><name pos:start="61:25" pos:end="61:26">st</name><operator pos:start="61:27" pos:end="61:28">-&gt;</operator><name pos:start="61:29" pos:end="61:33">index</name></name></expr>;</expr_stmt>

    <expr_stmt pos:start="63:5" pos:end="63:26"><expr pos:start="63:5" pos:end="63:25"><name pos:start="63:5" pos:end="63:12"><name pos:start="63:5" pos:end="63:7">pkt</name><operator pos:start="63:8" pos:end="63:9">-&gt;</operator><name pos:start="63:10" pos:end="63:12">pts</name></name> <operator pos:start="63:14" pos:end="63:14">=</operator> <operator pos:start="63:16" pos:end="63:16">*</operator><name pos:start="63:17" pos:end="63:25">timestamp</name></expr>;</expr_stmt>



    <return pos:start="67:5" pos:end="67:42">return <expr pos:start="67:12" pos:end="67:41"><name pos:start="67:12" pos:end="67:37"><name pos:start="67:12" pos:end="67:14">rdt</name><operator pos:start="67:15" pos:end="67:16">-&gt;</operator><name pos:start="67:17" pos:end="67:29">audio_pkt_cnt</name><index pos:start="67:30" pos:end="67:37">[<expr pos:start="67:31" pos:end="67:36"><name pos:start="67:31" pos:end="67:36"><name pos:start="67:31" pos:end="67:32">st</name><operator pos:start="67:33" pos:end="67:34">-&gt;</operator><name pos:start="67:35" pos:end="67:36">id</name></name></expr>]</index></name> <operator pos:start="67:39" pos:end="67:39">&gt;</operator> <literal type="number" pos:start="67:41" pos:end="67:41">0</literal></expr>;</return>

</block_content>}</block>
</unit>
