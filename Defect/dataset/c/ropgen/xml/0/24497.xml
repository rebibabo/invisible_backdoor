<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<unit xmlns="http://www.srcML.org/srcML/src" xmlns:pos="http://www.srcML.org/srcML/position" revision="1.0.0" language="C" filename="dataset/ropgen/aug/0/24497.c" pos:tabs="8"><function pos:start="1:1" pos:end="81:1"><type pos:start="1:1" pos:end="1:18"><specifier pos:start="1:1" pos:end="1:6">static</specifier> <name pos:start="1:8" pos:end="1:14">av_cold</name> <name pos:start="1:16" pos:end="1:18">int</name></type> <name pos:start="1:20" pos:end="1:49">vaapi_encode_init_rate_control</name><parameter_list pos:start="1:50" pos:end="1:72">(<parameter pos:start="1:51" pos:end="1:71"><decl pos:start="1:51" pos:end="1:71"><type pos:start="1:51" pos:end="1:66"><name pos:start="1:51" pos:end="1:64">AVCodecContext</name> <modifier pos:start="1:66" pos:end="1:66">*</modifier></type><name pos:start="1:67" pos:end="1:71">avctx</name></decl></parameter>)</parameter_list>

<block pos:start="3:1" pos:end="81:1">{<block_content pos:start="5:5" pos:end="79:13">

    <decl_stmt pos:start="5:5" pos:end="5:47"><decl pos:start="5:5" pos:end="5:46"><type pos:start="5:5" pos:end="5:24"><name pos:start="5:5" pos:end="5:22">VAAPIEncodeContext</name> <modifier pos:start="5:24" pos:end="5:24">*</modifier></type><name pos:start="5:25" pos:end="5:27">ctx</name> <init pos:start="5:29" pos:end="5:46">= <expr pos:start="5:31" pos:end="5:46"><name pos:start="5:31" pos:end="5:46"><name pos:start="5:31" pos:end="5:35">avctx</name><operator pos:start="5:36" pos:end="5:37">-&gt;</operator><name pos:start="5:38" pos:end="5:46">priv_data</name></name></expr></init></decl>;</decl_stmt>

    <decl_stmt pos:start="7:5" pos:end="7:24"><decl pos:start="7:5" pos:end="7:23"><type pos:start="7:5" pos:end="7:7"><name pos:start="7:5" pos:end="7:7">int</name></type> <name pos:start="7:9" pos:end="7:23">hrd_buffer_size</name></decl>;</decl_stmt>

    <decl_stmt pos:start="9:5" pos:end="9:36"><decl pos:start="9:5" pos:end="9:35"><type pos:start="9:5" pos:end="9:7"><name pos:start="9:5" pos:end="9:7">int</name></type> <name pos:start="9:9" pos:end="9:35">hrd_initial_buffer_fullness</name></decl>;</decl_stmt>



    <if_stmt pos:start="13:5" pos:end="19:42"><if pos:start="13:5" pos:end="15:48">if <condition pos:start="13:8" pos:end="13:30">(<expr pos:start="13:9" pos:end="13:29"><name pos:start="13:9" pos:end="13:29"><name pos:start="13:9" pos:end="13:13">avctx</name><operator pos:start="13:14" pos:end="13:15">-&gt;</operator><name pos:start="13:16" pos:end="13:29">rc_buffer_size</name></name></expr>)</condition><block type="pseudo" pos:start="15:9" pos:end="15:48"><block_content pos:start="15:9" pos:end="15:48">

        <expr_stmt pos:start="15:9" pos:end="15:48"><expr pos:start="15:9" pos:end="15:47"><name pos:start="15:9" pos:end="15:23">hrd_buffer_size</name> <operator pos:start="15:25" pos:end="15:25">=</operator> <name pos:start="15:27" pos:end="15:47"><name pos:start="15:27" pos:end="15:31">avctx</name><operator pos:start="15:32" pos:end="15:33">-&gt;</operator><name pos:start="15:34" pos:end="15:47">rc_buffer_size</name></name></expr>;</expr_stmt></block_content></block></if>

    <else pos:start="17:5" pos:end="19:42">else<block type="pseudo" pos:start="19:9" pos:end="19:42"><block_content pos:start="19:9" pos:end="19:42">

        <expr_stmt pos:start="19:9" pos:end="19:42"><expr pos:start="19:9" pos:end="19:41"><name pos:start="19:9" pos:end="19:23">hrd_buffer_size</name> <operator pos:start="19:25" pos:end="19:25">=</operator> <name pos:start="19:27" pos:end="19:41"><name pos:start="19:27" pos:end="19:31">avctx</name><operator pos:start="19:32" pos:end="19:33">-&gt;</operator><name pos:start="19:34" pos:end="19:41">bit_rate</name></name></expr>;</expr_stmt></block_content></block></else></if_stmt>

    <if_stmt pos:start="21:5" pos:end="27:62"><if pos:start="21:5" pos:end="23:73">if <condition pos:start="21:8" pos:end="21:43">(<expr pos:start="21:9" pos:end="21:42"><name pos:start="21:9" pos:end="21:42"><name pos:start="21:9" pos:end="21:13">avctx</name><operator pos:start="21:14" pos:end="21:15">-&gt;</operator><name pos:start="21:16" pos:end="21:42">rc_initial_buffer_occupancy</name></name></expr>)</condition><block type="pseudo" pos:start="23:9" pos:end="23:73"><block_content pos:start="23:9" pos:end="23:73">

        <expr_stmt pos:start="23:9" pos:end="23:73"><expr pos:start="23:9" pos:end="23:72"><name pos:start="23:9" pos:end="23:35">hrd_initial_buffer_fullness</name> <operator pos:start="23:37" pos:end="23:37">=</operator> <name pos:start="23:39" pos:end="23:72"><name pos:start="23:39" pos:end="23:43">avctx</name><operator pos:start="23:44" pos:end="23:45">-&gt;</operator><name pos:start="23:46" pos:end="23:72">rc_initial_buffer_occupancy</name></name></expr>;</expr_stmt></block_content></block></if>

    <else pos:start="25:5" pos:end="27:62">else<block type="pseudo" pos:start="27:9" pos:end="27:62"><block_content pos:start="27:9" pos:end="27:62">

        <expr_stmt pos:start="27:9" pos:end="27:62"><expr pos:start="27:9" pos:end="27:61"><name pos:start="27:9" pos:end="27:35">hrd_initial_buffer_fullness</name> <operator pos:start="27:37" pos:end="27:37">=</operator> <name pos:start="27:39" pos:end="27:53">hrd_buffer_size</name> <operator pos:start="27:55" pos:end="27:55">*</operator> <literal type="number" pos:start="27:57" pos:end="27:57">3</literal> <operator pos:start="27:59" pos:end="27:59">/</operator> <literal type="number" pos:start="27:61" pos:end="27:61">4</literal></expr>;</expr_stmt></block_content></block></else></if_stmt>



    <expr_stmt pos:start="31:5" pos:end="31:65"><expr pos:start="31:5" pos:end="31:64"><name pos:start="31:5" pos:end="31:28"><name pos:start="31:5" pos:end="31:7">ctx</name><operator pos:start="31:8" pos:end="31:9">-&gt;</operator><name pos:start="31:10" pos:end="31:18">rc_params</name><operator pos:start="31:19" pos:end="31:19">.</operator><name pos:start="31:20" pos:end="31:23">misc</name><operator pos:start="31:24" pos:end="31:24">.</operator><name pos:start="31:25" pos:end="31:28">type</name></name> <operator pos:start="31:30" pos:end="31:30">=</operator> <name pos:start="31:32" pos:end="31:64">VAEncMiscParameterTypeRateControl</name></expr>;</expr_stmt>

    <expr_stmt pos:start="33:5" pos:end="47:6"><expr pos:start="33:5" pos:end="47:5"><name pos:start="33:5" pos:end="33:21"><name pos:start="33:5" pos:end="33:7">ctx</name><operator pos:start="33:8" pos:end="33:9">-&gt;</operator><name pos:start="33:10" pos:end="33:18">rc_params</name><operator pos:start="33:19" pos:end="33:19">.</operator><name pos:start="33:20" pos:end="33:21">rc</name></name> <operator pos:start="33:23" pos:end="33:23">=</operator> <operator pos:start="33:25" pos:end="33:25">(</operator><name pos:start="33:26" pos:end="33:54">VAEncMiscParameterRateControl</name><operator pos:start="33:55" pos:end="33:55">)</operator> <block pos:start="33:57" pos:end="47:5">{

        <expr pos:start="35:9" pos:end="35:44"><operator pos:start="35:9" pos:end="35:9">.</operator><name pos:start="35:10" pos:end="35:24">bits_per_second</name>   <operator pos:start="35:28" pos:end="35:28">=</operator> <name pos:start="35:30" pos:end="35:44"><name pos:start="35:30" pos:end="35:34">avctx</name><operator pos:start="35:35" pos:end="35:36">-&gt;</operator><name pos:start="35:37" pos:end="35:44">bit_rate</name></name></expr>,

        <expr pos:start="37:9" pos:end="37:31"><operator pos:start="37:9" pos:end="37:9">.</operator><name pos:start="37:10" pos:end="37:26">target_percentage</name> <operator pos:start="37:28" pos:end="37:28">=</operator> <literal type="number" pos:start="37:30" pos:end="37:31">66</literal></expr>,

        <expr pos:start="39:9" pos:end="39:33"><operator pos:start="39:9" pos:end="39:9">.</operator><name pos:start="39:10" pos:end="39:20">window_size</name>       <operator pos:start="39:28" pos:end="39:28">=</operator> <literal type="number" pos:start="39:30" pos:end="39:33">1000</literal></expr>,

        <expr pos:start="41:9" pos:end="41:66"><operator pos:start="41:9" pos:end="41:9">.</operator><name pos:start="41:10" pos:end="41:19">initial_qp</name>        <operator pos:start="41:28" pos:end="41:28">=</operator> <operator pos:start="41:30" pos:end="41:30">(</operator><name pos:start="41:31" pos:end="41:41"><name pos:start="41:31" pos:end="41:35">avctx</name><operator pos:start="41:36" pos:end="41:37">-&gt;</operator><name pos:start="41:38" pos:end="41:41">qmax</name></name> <operator pos:start="41:43" pos:end="41:44">&gt;=</operator> <literal type="number" pos:start="41:46" pos:end="41:46">0</literal> <operator pos:start="41:48" pos:end="41:48">?</operator> <name pos:start="41:50" pos:end="41:60"><name pos:start="41:50" pos:end="41:54">avctx</name><operator pos:start="41:55" pos:end="41:56">-&gt;</operator><name pos:start="41:57" pos:end="41:60">qmax</name></name> <operator pos:start="41:62" pos:end="41:62">:</operator> <literal type="number" pos:start="41:64" pos:end="41:65">40</literal><operator pos:start="41:66" pos:end="41:66">)</operator></expr>,

        <expr pos:start="43:9" pos:end="43:66"><operator pos:start="43:9" pos:end="43:9">.</operator><name pos:start="43:10" pos:end="43:15">min_qp</name>            <operator pos:start="43:28" pos:end="43:28">=</operator> <operator pos:start="43:30" pos:end="43:30">(</operator><name pos:start="43:31" pos:end="43:41"><name pos:start="43:31" pos:end="43:35">avctx</name><operator pos:start="43:36" pos:end="43:37">-&gt;</operator><name pos:start="43:38" pos:end="43:41">qmin</name></name> <operator pos:start="43:43" pos:end="43:44">&gt;=</operator> <literal type="number" pos:start="43:46" pos:end="43:46">0</literal> <operator pos:start="43:48" pos:end="43:48">?</operator> <name pos:start="43:50" pos:end="43:60"><name pos:start="43:50" pos:end="43:54">avctx</name><operator pos:start="43:55" pos:end="43:56">-&gt;</operator><name pos:start="43:57" pos:end="43:60">qmin</name></name> <operator pos:start="43:62" pos:end="43:62">:</operator> <literal type="number" pos:start="43:64" pos:end="43:65">18</literal><operator pos:start="43:66" pos:end="43:66">)</operator></expr>,

        <expr pos:start="45:9" pos:end="45:30"><operator pos:start="45:9" pos:end="45:9">.</operator><name pos:start="45:10" pos:end="45:24">basic_unit_size</name>   <operator pos:start="45:28" pos:end="45:28">=</operator> <literal type="number" pos:start="45:30" pos:end="45:30">0</literal></expr>,

    }</block></expr>;</expr_stmt>

    <expr_stmt pos:start="49:5" pos:end="51:29"><expr pos:start="49:5" pos:end="51:28"><name pos:start="49:5" pos:end="49:45"><name pos:start="49:5" pos:end="49:7">ctx</name><operator pos:start="49:8" pos:end="49:9">-&gt;</operator><name pos:start="49:10" pos:end="49:22">global_params</name><index pos:start="49:23" pos:end="49:45">[<expr pos:start="49:24" pos:end="49:44"><name pos:start="49:24" pos:end="49:44"><name pos:start="49:24" pos:end="49:26">ctx</name><operator pos:start="49:27" pos:end="49:28">-&gt;</operator><name pos:start="49:29" pos:end="49:44">nb_global_params</name></name></expr>]</index></name> <operator pos:start="49:47" pos:end="49:47">=</operator>

        <operator pos:start="51:9" pos:end="51:9">&amp;</operator><name pos:start="51:10" pos:end="51:28"><name pos:start="51:10" pos:end="51:12">ctx</name><operator pos:start="51:13" pos:end="51:14">-&gt;</operator><name pos:start="51:15" pos:end="51:23">rc_params</name><operator pos:start="51:24" pos:end="51:24">.</operator><name pos:start="51:25" pos:end="51:28">misc</name></name></expr>;</expr_stmt>

    <expr_stmt pos:start="53:5" pos:end="55:31"><expr pos:start="53:5" pos:end="55:30"><name pos:start="53:5" pos:end="53:52"><name pos:start="53:5" pos:end="53:7">ctx</name><operator pos:start="53:8" pos:end="53:9">-&gt;</operator><name pos:start="53:10" pos:end="53:27">global_params_size</name><index pos:start="53:28" pos:end="53:52">[<expr pos:start="53:29" pos:end="53:51"><name pos:start="53:29" pos:end="53:49"><name pos:start="53:29" pos:end="53:31">ctx</name><operator pos:start="53:32" pos:end="53:33">-&gt;</operator><name pos:start="53:34" pos:end="53:49">nb_global_params</name></name><operator pos:start="53:50" pos:end="53:51">++</operator></expr>]</index></name> <operator pos:start="53:54" pos:end="53:54">=</operator>

        <sizeof pos:start="55:9" pos:end="55:30">sizeof<argument_list pos:start="55:15" pos:end="55:30">(<argument pos:start="55:16" pos:end="55:29"><expr pos:start="55:16" pos:end="55:29"><name pos:start="55:16" pos:end="55:29"><name pos:start="55:16" pos:end="55:18">ctx</name><operator pos:start="55:19" pos:end="55:20">-&gt;</operator><name pos:start="55:21" pos:end="55:29">rc_params</name></name></expr></argument>)</argument_list></sizeof></expr>;</expr_stmt>



    <expr_stmt pos:start="59:5" pos:end="59:58"><expr pos:start="59:5" pos:end="59:57"><name pos:start="59:5" pos:end="59:29"><name pos:start="59:5" pos:end="59:7">ctx</name><operator pos:start="59:8" pos:end="59:9">-&gt;</operator><name pos:start="59:10" pos:end="59:19">hrd_params</name><operator pos:start="59:20" pos:end="59:20">.</operator><name pos:start="59:21" pos:end="59:24">misc</name><operator pos:start="59:25" pos:end="59:25">.</operator><name pos:start="59:26" pos:end="59:29">type</name></name> <operator pos:start="59:31" pos:end="59:31">=</operator> <name pos:start="59:33" pos:end="59:57">VAEncMiscParameterTypeHRD</name></expr>;</expr_stmt>

    <expr_stmt pos:start="61:5" pos:end="67:6"><expr pos:start="61:5" pos:end="67:5"><name pos:start="61:5" pos:end="61:23"><name pos:start="61:5" pos:end="61:7">ctx</name><operator pos:start="61:8" pos:end="61:9">-&gt;</operator><name pos:start="61:10" pos:end="61:19">hrd_params</name><operator pos:start="61:20" pos:end="61:20">.</operator><name pos:start="61:21" pos:end="61:23">hrd</name></name> <operator pos:start="61:25" pos:end="61:25">=</operator> <operator pos:start="61:27" pos:end="61:27">(</operator><name pos:start="61:28" pos:end="61:48">VAEncMiscParameterHRD</name><operator pos:start="61:49" pos:end="61:49">)</operator> <block pos:start="61:51" pos:end="67:5">{

        <expr pos:start="63:9" pos:end="63:62"><operator pos:start="63:9" pos:end="63:9">.</operator><name pos:start="63:10" pos:end="63:32">initial_buffer_fullness</name> <operator pos:start="63:34" pos:end="63:34">=</operator> <name pos:start="63:36" pos:end="63:62">hrd_initial_buffer_fullness</name></expr>,

        <expr pos:start="65:9" pos:end="65:50"><operator pos:start="65:9" pos:end="65:9">.</operator><name pos:start="65:10" pos:end="65:20">buffer_size</name>             <operator pos:start="65:34" pos:end="65:34">=</operator> <name pos:start="65:36" pos:end="65:50">hrd_buffer_size</name></expr>,

    }</block></expr>;</expr_stmt>

    <expr_stmt pos:start="69:5" pos:end="71:30"><expr pos:start="69:5" pos:end="71:29"><name pos:start="69:5" pos:end="69:45"><name pos:start="69:5" pos:end="69:7">ctx</name><operator pos:start="69:8" pos:end="69:9">-&gt;</operator><name pos:start="69:10" pos:end="69:22">global_params</name><index pos:start="69:23" pos:end="69:45">[<expr pos:start="69:24" pos:end="69:44"><name pos:start="69:24" pos:end="69:44"><name pos:start="69:24" pos:end="69:26">ctx</name><operator pos:start="69:27" pos:end="69:28">-&gt;</operator><name pos:start="69:29" pos:end="69:44">nb_global_params</name></name></expr>]</index></name> <operator pos:start="69:47" pos:end="69:47">=</operator>

        <operator pos:start="71:9" pos:end="71:9">&amp;</operator><name pos:start="71:10" pos:end="71:29"><name pos:start="71:10" pos:end="71:12">ctx</name><operator pos:start="71:13" pos:end="71:14">-&gt;</operator><name pos:start="71:15" pos:end="71:24">hrd_params</name><operator pos:start="71:25" pos:end="71:25">.</operator><name pos:start="71:26" pos:end="71:29">misc</name></name></expr>;</expr_stmt>

    <expr_stmt pos:start="73:5" pos:end="75:32"><expr pos:start="73:5" pos:end="75:31"><name pos:start="73:5" pos:end="73:52"><name pos:start="73:5" pos:end="73:7">ctx</name><operator pos:start="73:8" pos:end="73:9">-&gt;</operator><name pos:start="73:10" pos:end="73:27">global_params_size</name><index pos:start="73:28" pos:end="73:52">[<expr pos:start="73:29" pos:end="73:51"><name pos:start="73:29" pos:end="73:49"><name pos:start="73:29" pos:end="73:31">ctx</name><operator pos:start="73:32" pos:end="73:33">-&gt;</operator><name pos:start="73:34" pos:end="73:49">nb_global_params</name></name><operator pos:start="73:50" pos:end="73:51">++</operator></expr>]</index></name> <operator pos:start="73:54" pos:end="73:54">=</operator>

        <sizeof pos:start="75:9" pos:end="75:31">sizeof<argument_list pos:start="75:15" pos:end="75:31">(<argument pos:start="75:16" pos:end="75:30"><expr pos:start="75:16" pos:end="75:30"><name pos:start="75:16" pos:end="75:30"><name pos:start="75:16" pos:end="75:18">ctx</name><operator pos:start="75:19" pos:end="75:20">-&gt;</operator><name pos:start="75:21" pos:end="75:30">hrd_params</name></name></expr></argument>)</argument_list></sizeof></expr>;</expr_stmt>



    <return pos:start="79:5" pos:end="79:13">return <expr pos:start="79:12" pos:end="79:12"><literal type="number" pos:start="79:12" pos:end="79:12">0</literal></expr>;</return>

</block_content>}</block></function>
</unit>
