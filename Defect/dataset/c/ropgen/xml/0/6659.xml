<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<unit xmlns="http://www.srcML.org/srcML/src" xmlns:pos="http://www.srcML.org/srcML/position" revision="1.0.0" language="C" filename="dataset/ropgen/aug/0/6659.c" pos:tabs="8"><function pos:start="1:1" pos:end="233:1"><type pos:start="1:1" pos:end="1:10"><specifier pos:start="1:1" pos:end="1:6">static</specifier> <name pos:start="1:8" pos:end="1:10">int</name></type> <name pos:start="1:12" pos:end="1:27">hls_write_packet</name><parameter_list pos:start="1:28" pos:end="1:62">(<parameter pos:start="1:29" pos:end="1:46"><decl pos:start="1:29" pos:end="1:46"><type pos:start="1:29" pos:end="1:46"><name pos:start="1:29" pos:end="1:43">AVFormatContext</name> <modifier pos:start="1:45" pos:end="1:45">*</modifier></type><name pos:start="1:46" pos:end="1:46">s</name></decl></parameter>, <parameter pos:start="1:49" pos:end="1:61"><decl pos:start="1:49" pos:end="1:61"><type pos:start="1:49" pos:end="1:61"><name pos:start="1:49" pos:end="1:56">AVPacket</name> <modifier pos:start="1:58" pos:end="1:58">*</modifier></type><name pos:start="1:59" pos:end="1:61">pkt</name></decl></parameter>)</parameter_list>

<block pos:start="3:1" pos:end="233:1">{<block_content pos:start="5:5" pos:end="231:15">

    <decl_stmt pos:start="5:5" pos:end="5:35"><decl pos:start="5:5" pos:end="5:34"><type pos:start="5:5" pos:end="5:16"><name pos:start="5:5" pos:end="5:14">HLSContext</name> <modifier pos:start="5:16" pos:end="5:16">*</modifier></type><name pos:start="5:17" pos:end="5:19">hls</name> <init pos:start="5:21" pos:end="5:34">= <expr pos:start="5:23" pos:end="5:34"><name pos:start="5:23" pos:end="5:34"><name pos:start="5:23" pos:end="5:23">s</name><operator pos:start="5:24" pos:end="5:25">-&gt;</operator><name pos:start="5:26" pos:end="5:34">priv_data</name></name></expr></init></decl>;</decl_stmt>

    <decl_stmt pos:start="7:5" pos:end="7:31"><decl pos:start="7:5" pos:end="7:30"><type pos:start="7:5" pos:end="7:21"><name pos:start="7:5" pos:end="7:19">AVFormatContext</name> <modifier pos:start="7:21" pos:end="7:21">*</modifier></type><name pos:start="7:22" pos:end="7:23">oc</name> <init pos:start="7:25" pos:end="7:30">= <expr pos:start="7:27" pos:end="7:30"><name pos:start="7:27" pos:end="7:30">NULL</name></expr></init></decl>;</decl_stmt>

    <decl_stmt pos:start="9:5" pos:end="9:49"><decl pos:start="9:5" pos:end="9:48"><type pos:start="9:5" pos:end="9:14"><name pos:start="9:5" pos:end="9:12">AVStream</name> <modifier pos:start="9:14" pos:end="9:14">*</modifier></type><name pos:start="9:15" pos:end="9:16">st</name> <init pos:start="9:18" pos:end="9:48">= <expr pos:start="9:20" pos:end="9:48"><name pos:start="9:20" pos:end="9:48"><name pos:start="9:20" pos:end="9:20">s</name><operator pos:start="9:21" pos:end="9:22">-&gt;</operator><name pos:start="9:23" pos:end="9:29">streams</name><index pos:start="9:30" pos:end="9:48">[<expr pos:start="9:31" pos:end="9:47"><name pos:start="9:31" pos:end="9:47"><name pos:start="9:31" pos:end="9:33">pkt</name><operator pos:start="9:34" pos:end="9:35">-&gt;</operator><name pos:start="9:36" pos:end="9:47">stream_index</name></name></expr>]</index></name></expr></init></decl>;</decl_stmt>

    <decl_stmt pos:start="11:5" pos:end="11:56"><decl pos:start="11:5" pos:end="11:55"><type pos:start="11:5" pos:end="11:11"><name pos:start="11:5" pos:end="11:11">int64_t</name></type> <name pos:start="11:13" pos:end="11:19">end_pts</name> <init pos:start="11:21" pos:end="11:55">= <expr pos:start="11:23" pos:end="11:55"><name pos:start="11:23" pos:end="11:41"><name pos:start="11:23" pos:end="11:25">hls</name><operator pos:start="11:26" pos:end="11:27">-&gt;</operator><name pos:start="11:28" pos:end="11:41">recording_time</name></name> <operator pos:start="11:43" pos:end="11:43">*</operator> <name pos:start="11:45" pos:end="11:55"><name pos:start="11:45" pos:end="11:47">hls</name><operator pos:start="11:48" pos:end="11:49">-&gt;</operator><name pos:start="11:50" pos:end="11:55">number</name></name></expr></init></decl>;</decl_stmt>

    <decl_stmt pos:start="13:5" pos:end="13:23"><decl pos:start="13:5" pos:end="13:22"><type pos:start="13:5" pos:end="13:7"><name pos:start="13:5" pos:end="13:7">int</name></type> <name pos:start="13:9" pos:end="13:18">is_ref_pkt</name> <init pos:start="13:20" pos:end="13:22">= <expr pos:start="13:22" pos:end="13:22"><literal type="number" pos:start="13:22" pos:end="13:22">1</literal></expr></init></decl>;</decl_stmt>

    <decl_stmt pos:start="15:5" pos:end="15:27"><decl pos:start="15:5" pos:end="15:11"><type pos:start="15:5" pos:end="15:7"><name pos:start="15:5" pos:end="15:7">int</name></type> <name pos:start="15:9" pos:end="15:11">ret</name></decl>, <decl pos:start="15:14" pos:end="15:26"><type ref="prev" pos:start="15:5" pos:end="15:7"/><name pos:start="15:14" pos:end="15:22">can_split</name> <init pos:start="15:24" pos:end="15:26">= <expr pos:start="15:26" pos:end="15:26"><literal type="number" pos:start="15:26" pos:end="15:26">1</literal></expr></init></decl>;</decl_stmt>

    <decl_stmt pos:start="17:5" pos:end="17:25"><decl pos:start="17:5" pos:end="17:24"><type pos:start="17:5" pos:end="17:7"><name pos:start="17:5" pos:end="17:7">int</name></type> <name pos:start="17:9" pos:end="17:20">stream_index</name> <init pos:start="17:22" pos:end="17:24">= <expr pos:start="17:24" pos:end="17:24"><literal type="number" pos:start="17:24" pos:end="17:24">0</literal></expr></init></decl>;</decl_stmt>



    <if_stmt pos:start="21:5" pos:end="33:5"><if pos:start="21:5" pos:end="33:5">if <condition pos:start="21:8" pos:end="21:84">(<expr pos:start="21:9" pos:end="21:83"><name pos:start="21:9" pos:end="21:21"><name pos:start="21:9" pos:end="21:11">hls</name><operator pos:start="21:12" pos:end="21:13">-&gt;</operator><name pos:start="21:14" pos:end="21:21">sequence</name></name> <operator pos:start="21:23" pos:end="21:23">-</operator> <name pos:start="21:25" pos:end="21:39"><name pos:start="21:25" pos:end="21:27">hls</name><operator pos:start="21:28" pos:end="21:29">-&gt;</operator><name pos:start="21:30" pos:end="21:39">nb_entries</name></name> <operator pos:start="21:41" pos:end="21:41">&gt;</operator> <name pos:start="21:43" pos:end="21:61"><name pos:start="21:43" pos:end="21:45">hls</name><operator pos:start="21:46" pos:end="21:47">-&gt;</operator><name pos:start="21:48" pos:end="21:61">start_sequence</name></name> <operator pos:start="21:63" pos:end="21:64">&amp;&amp;</operator> <name pos:start="21:66" pos:end="21:79"><name pos:start="21:66" pos:end="21:68">hls</name><operator pos:start="21:69" pos:end="21:70">-&gt;</operator><name pos:start="21:71" pos:end="21:79">init_time</name></name> <operator pos:start="21:81" pos:end="21:81">&gt;</operator> <literal type="number" pos:start="21:83" pos:end="21:83">0</literal></expr>)</condition> <block pos:start="21:86" pos:end="33:5">{<block_content pos:start="25:9" pos:end="31:55">

        <comment type="block" pos:start="23:9" pos:end="23:76">/* reset end_pts, hls-&gt;recording_time at end of the init hls list */</comment>

        <decl_stmt pos:start="25:9" pos:end="25:76"><decl pos:start="25:9" pos:end="25:75"><type pos:start="25:9" pos:end="25:11"><name pos:start="25:9" pos:end="25:11">int</name></type> <name pos:start="25:13" pos:end="25:25">init_list_dur</name> <init pos:start="25:27" pos:end="25:75">= <expr pos:start="25:29" pos:end="25:75"><name pos:start="25:29" pos:end="25:42"><name pos:start="25:29" pos:end="25:31">hls</name><operator pos:start="25:32" pos:end="25:33">-&gt;</operator><name pos:start="25:34" pos:end="25:42">init_time</name></name> <operator pos:start="25:44" pos:end="25:44">*</operator> <name pos:start="25:46" pos:end="25:60"><name pos:start="25:46" pos:end="25:48">hls</name><operator pos:start="25:49" pos:end="25:50">-&gt;</operator><name pos:start="25:51" pos:end="25:60">nb_entries</name></name> <operator pos:start="25:62" pos:end="25:62">*</operator> <name pos:start="25:64" pos:end="25:75">AV_TIME_BASE</name></expr></init></decl>;</decl_stmt>

        <decl_stmt pos:start="27:9" pos:end="27:96"><decl pos:start="27:9" pos:end="27:95"><type pos:start="27:9" pos:end="27:11"><name pos:start="27:9" pos:end="27:11">int</name></type> <name pos:start="27:13" pos:end="27:31">after_init_list_dur</name> <init pos:start="27:33" pos:end="27:95">= <expr pos:start="27:35" pos:end="27:95"><operator pos:start="27:35" pos:end="27:35">(</operator><name pos:start="27:36" pos:end="27:48"><name pos:start="27:36" pos:end="27:38">hls</name><operator pos:start="27:39" pos:end="27:40">-&gt;</operator><name pos:start="27:41" pos:end="27:48">sequence</name></name> <operator pos:start="27:50" pos:end="27:50">-</operator> <name pos:start="27:52" pos:end="27:66"><name pos:start="27:52" pos:end="27:54">hls</name><operator pos:start="27:55" pos:end="27:56">-&gt;</operator><name pos:start="27:57" pos:end="27:66">nb_entries</name></name> <operator pos:start="27:68" pos:end="27:68">)</operator> <operator pos:start="27:70" pos:end="27:70">*</operator> <name pos:start="27:72" pos:end="27:80"><name pos:start="27:72" pos:end="27:74">hls</name><operator pos:start="27:75" pos:end="27:76">-&gt;</operator><name pos:start="27:77" pos:end="27:80">time</name></name> <operator pos:start="27:82" pos:end="27:82">*</operator> <name pos:start="27:84" pos:end="27:95">AV_TIME_BASE</name></expr></init></decl>;</decl_stmt>

        <expr_stmt pos:start="29:9" pos:end="29:55"><expr pos:start="29:9" pos:end="29:54"><name pos:start="29:9" pos:end="29:27"><name pos:start="29:9" pos:end="29:11">hls</name><operator pos:start="29:12" pos:end="29:13">-&gt;</operator><name pos:start="29:14" pos:end="29:27">recording_time</name></name> <operator pos:start="29:29" pos:end="29:29">=</operator> <name pos:start="29:31" pos:end="29:39"><name pos:start="29:31" pos:end="29:33">hls</name><operator pos:start="29:34" pos:end="29:35">-&gt;</operator><name pos:start="29:36" pos:end="29:39">time</name></name> <operator pos:start="29:41" pos:end="29:41">*</operator> <name pos:start="29:43" pos:end="29:54">AV_TIME_BASE</name></expr>;</expr_stmt>

        <expr_stmt pos:start="31:9" pos:end="31:55"><expr pos:start="31:9" pos:end="31:53"><name pos:start="31:9" pos:end="31:15">end_pts</name> <operator pos:start="31:17" pos:end="31:17">=</operator> <name pos:start="31:19" pos:end="31:31">init_list_dur</name> <operator pos:start="31:33" pos:end="31:33">+</operator> <name pos:start="31:35" pos:end="31:53">after_init_list_dur</name></expr> ;</expr_stmt>

    </block_content>}</block></if></if_stmt>



    <if_stmt pos:start="37:5" pos:end="49:5"><if pos:start="37:5" pos:end="43:5">if<condition pos:start="37:7" pos:end="37:59">( <expr pos:start="37:9" pos:end="37:57"><name pos:start="37:9" pos:end="37:32"><name pos:start="37:9" pos:end="37:10">st</name><operator pos:start="37:11" pos:end="37:12">-&gt;</operator><name pos:start="37:13" pos:end="37:20">codecpar</name><operator pos:start="37:21" pos:end="37:22">-&gt;</operator><name pos:start="37:23" pos:end="37:32">codec_type</name></name> <operator pos:start="37:34" pos:end="37:35">==</operator> <name pos:start="37:37" pos:end="37:57">AVMEDIA_TYPE_SUBTITLE</name></expr> )</condition> <block pos:start="37:61" pos:end="43:5">{<block_content pos:start="39:9" pos:end="41:25">

        <expr_stmt pos:start="39:9" pos:end="39:26"><expr pos:start="39:9" pos:end="39:25"><name pos:start="39:9" pos:end="39:10">oc</name> <operator pos:start="39:12" pos:end="39:12">=</operator> <name pos:start="39:14" pos:end="39:25"><name pos:start="39:14" pos:end="39:16">hls</name><operator pos:start="39:17" pos:end="39:18">-&gt;</operator><name pos:start="39:19" pos:end="39:25">vtt_avf</name></name></expr>;</expr_stmt>

        <expr_stmt pos:start="41:9" pos:end="41:25"><expr pos:start="41:9" pos:end="41:24"><name pos:start="41:9" pos:end="41:20">stream_index</name> <operator pos:start="41:22" pos:end="41:22">=</operator> <literal type="number" pos:start="41:24" pos:end="41:24">0</literal></expr>;</expr_stmt>

    </block_content>}</block></if> <else pos:start="43:7" pos:end="49:5">else <block pos:start="43:12" pos:end="49:5">{<block_content pos:start="45:9" pos:end="47:41">

        <expr_stmt pos:start="45:9" pos:end="45:22"><expr pos:start="45:9" pos:end="45:21"><name pos:start="45:9" pos:end="45:10">oc</name> <operator pos:start="45:12" pos:end="45:12">=</operator> <name pos:start="45:14" pos:end="45:21"><name pos:start="45:14" pos:end="45:16">hls</name><operator pos:start="45:17" pos:end="45:18">-&gt;</operator><name pos:start="45:19" pos:end="45:21">avf</name></name></expr>;</expr_stmt>

        <expr_stmt pos:start="47:9" pos:end="47:41"><expr pos:start="47:9" pos:end="47:40"><name pos:start="47:9" pos:end="47:20">stream_index</name> <operator pos:start="47:22" pos:end="47:22">=</operator> <name pos:start="47:24" pos:end="47:40"><name pos:start="47:24" pos:end="47:26">pkt</name><operator pos:start="47:27" pos:end="47:28">-&gt;</operator><name pos:start="47:29" pos:end="47:40">stream_index</name></name></expr>;</expr_stmt>

    </block_content>}</block></else></if_stmt>

    <if_stmt pos:start="51:5" pos:end="57:5"><if pos:start="51:5" pos:end="57:5">if <condition pos:start="51:8" pos:end="51:41">(<expr pos:start="51:9" pos:end="51:40"><name pos:start="51:9" pos:end="51:22"><name pos:start="51:9" pos:end="51:11">hls</name><operator pos:start="51:12" pos:end="51:13">-&gt;</operator><name pos:start="51:14" pos:end="51:22">start_pts</name></name> <operator pos:start="51:24" pos:end="51:25">==</operator> <name pos:start="51:27" pos:end="51:40">AV_NOPTS_VALUE</name></expr>)</condition> <block pos:start="51:43" pos:end="57:5">{<block_content pos:start="53:9" pos:end="55:34">

        <expr_stmt pos:start="53:9" pos:end="53:34"><expr pos:start="53:9" pos:end="53:33"><name pos:start="53:9" pos:end="53:22"><name pos:start="53:9" pos:end="53:11">hls</name><operator pos:start="53:12" pos:end="53:13">-&gt;</operator><name pos:start="53:14" pos:end="53:22">start_pts</name></name> <operator pos:start="53:24" pos:end="53:24">=</operator> <name pos:start="53:26" pos:end="53:33"><name pos:start="53:26" pos:end="53:28">pkt</name><operator pos:start="53:29" pos:end="53:30">-&gt;</operator><name pos:start="53:31" pos:end="53:33">pts</name></name></expr>;</expr_stmt>

        <expr_stmt pos:start="55:9" pos:end="55:34"><expr pos:start="55:9" pos:end="55:33"><name pos:start="55:9" pos:end="55:20"><name pos:start="55:9" pos:end="55:11">hls</name><operator pos:start="55:12" pos:end="55:13">-&gt;</operator><name pos:start="55:14" pos:end="55:20">end_pts</name></name>   <operator pos:start="55:24" pos:end="55:24">=</operator> <name pos:start="55:26" pos:end="55:33"><name pos:start="55:26" pos:end="55:28">pkt</name><operator pos:start="55:29" pos:end="55:30">-&gt;</operator><name pos:start="55:31" pos:end="55:33">pts</name></name></expr>;</expr_stmt>

    </block_content>}</block></if></if_stmt>



    <if_stmt pos:start="61:5" pos:end="69:5"><if pos:start="61:5" pos:end="69:5">if <condition pos:start="61:8" pos:end="61:23">(<expr pos:start="61:9" pos:end="61:22"><name pos:start="61:9" pos:end="61:22"><name pos:start="61:9" pos:end="61:11">hls</name><operator pos:start="61:12" pos:end="61:13">-&gt;</operator><name pos:start="61:14" pos:end="61:22">has_video</name></name></expr>)</condition> <block pos:start="61:25" pos:end="69:5">{<block_content pos:start="63:9" pos:end="67:68">

        <expr_stmt pos:start="63:9" pos:end="65:89"><expr pos:start="63:9" pos:end="65:88"><name pos:start="63:9" pos:end="63:17">can_split</name> <operator pos:start="63:19" pos:end="63:19">=</operator> <name pos:start="63:21" pos:end="63:44"><name pos:start="63:21" pos:end="63:22">st</name><operator pos:start="63:23" pos:end="63:24">-&gt;</operator><name pos:start="63:25" pos:end="63:32">codecpar</name><operator pos:start="63:33" pos:end="63:34">-&gt;</operator><name pos:start="63:35" pos:end="63:44">codec_type</name></name> <operator pos:start="63:46" pos:end="63:47">==</operator> <name pos:start="63:49" pos:end="63:66">AVMEDIA_TYPE_VIDEO</name> <operator pos:start="63:68" pos:end="63:69">&amp;&amp;</operator>

                    <operator pos:start="65:21" pos:end="65:21">(</operator><operator pos:start="65:22" pos:end="65:22">(</operator><name pos:start="65:23" pos:end="65:32"><name pos:start="65:23" pos:end="65:25">pkt</name><operator pos:start="65:26" pos:end="65:27">-&gt;</operator><name pos:start="65:28" pos:end="65:32">flags</name></name> <operator pos:start="65:34" pos:end="65:34">&amp;</operator> <name pos:start="65:36" pos:end="65:50">AV_PKT_FLAG_KEY</name><operator pos:start="65:51" pos:end="65:51">)</operator> <operator pos:start="65:53" pos:end="65:54">||</operator> <operator pos:start="65:56" pos:end="65:56">(</operator><name pos:start="65:57" pos:end="65:66"><name pos:start="65:57" pos:end="65:59">hls</name><operator pos:start="65:60" pos:end="65:61">-&gt;</operator><name pos:start="65:62" pos:end="65:66">flags</name></name> <operator pos:start="65:68" pos:end="65:68">&amp;</operator> <name pos:start="65:70" pos:end="65:86">HLS_SPLIT_BY_TIME</name><operator pos:start="65:87" pos:end="65:87">)</operator><operator pos:start="65:88" pos:end="65:88">)</operator></expr>;</expr_stmt>

        <expr_stmt pos:start="67:9" pos:end="67:68"><expr pos:start="67:9" pos:end="67:67"><name pos:start="67:9" pos:end="67:18">is_ref_pkt</name> <operator pos:start="67:20" pos:end="67:20">=</operator> <name pos:start="67:22" pos:end="67:45"><name pos:start="67:22" pos:end="67:23">st</name><operator pos:start="67:24" pos:end="67:25">-&gt;</operator><name pos:start="67:26" pos:end="67:33">codecpar</name><operator pos:start="67:34" pos:end="67:35">-&gt;</operator><name pos:start="67:36" pos:end="67:45">codec_type</name></name> <operator pos:start="67:47" pos:end="67:48">==</operator> <name pos:start="67:50" pos:end="67:67">AVMEDIA_TYPE_VIDEO</name></expr>;</expr_stmt>

    </block_content>}</block></if></if_stmt>

    <if_stmt pos:start="71:5" pos:end="73:35"><if pos:start="71:5" pos:end="73:35">if <condition pos:start="71:8" pos:end="71:35">(<expr pos:start="71:9" pos:end="71:34"><name pos:start="71:9" pos:end="71:16"><name pos:start="71:9" pos:end="71:11">pkt</name><operator pos:start="71:12" pos:end="71:13">-&gt;</operator><name pos:start="71:14" pos:end="71:16">pts</name></name> <operator pos:start="71:18" pos:end="71:19">==</operator> <name pos:start="71:21" pos:end="71:34">AV_NOPTS_VALUE</name></expr>)</condition><block type="pseudo" pos:start="73:9" pos:end="73:35"><block_content pos:start="73:9" pos:end="73:35">

        <expr_stmt pos:start="73:9" pos:end="73:35"><expr pos:start="73:9" pos:end="73:34"><name pos:start="73:9" pos:end="73:18">is_ref_pkt</name> <operator pos:start="73:20" pos:end="73:20">=</operator> <name pos:start="73:22" pos:end="73:30">can_split</name> <operator pos:start="73:32" pos:end="73:32">=</operator> <literal type="number" pos:start="73:34" pos:end="73:34">0</literal></expr>;</expr_stmt></block_content></block></if></if_stmt>



    <if_stmt pos:start="77:5" pos:end="97:5"><if pos:start="77:5" pos:end="97:5">if <condition pos:start="77:8" pos:end="77:19">(<expr pos:start="77:9" pos:end="77:18"><name pos:start="77:9" pos:end="77:18">is_ref_pkt</name></expr>)</condition> <block pos:start="77:21" pos:end="97:5">{<block_content pos:start="79:9" pos:end="93:9">

        <if_stmt pos:start="79:9" pos:end="93:9"><if pos:start="79:9" pos:end="89:9">if <condition pos:start="79:12" pos:end="79:27">(<expr pos:start="79:13" pos:end="79:26"><name pos:start="79:13" pos:end="79:26"><name pos:start="79:13" pos:end="79:15">hls</name><operator pos:start="79:16" pos:end="79:17">-&gt;</operator><name pos:start="79:18" pos:end="79:26">new_start</name></name></expr>)</condition> <block pos:start="79:29" pos:end="89:9">{<block_content pos:start="81:13" pos:end="87:87">

            <expr_stmt pos:start="81:13" pos:end="81:31"><expr pos:start="81:13" pos:end="81:30"><name pos:start="81:13" pos:end="81:26"><name pos:start="81:13" pos:end="81:15">hls</name><operator pos:start="81:16" pos:end="81:17">-&gt;</operator><name pos:start="81:18" pos:end="81:26">new_start</name></name> <operator pos:start="81:28" pos:end="81:28">=</operator> <literal type="number" pos:start="81:30" pos:end="81:30">0</literal></expr>;</expr_stmt>

            <expr_stmt pos:start="83:13" pos:end="85:79"><expr pos:start="83:13" pos:end="85:78"><name pos:start="83:13" pos:end="83:25"><name pos:start="83:13" pos:end="83:15">hls</name><operator pos:start="83:16" pos:end="83:17">-&gt;</operator><name pos:start="83:18" pos:end="83:25">duration</name></name> <operator pos:start="83:27" pos:end="83:27">=</operator> <operator pos:start="83:29" pos:end="83:29">(</operator><name pos:start="83:30" pos:end="83:35">double</name><operator pos:start="83:36" pos:end="83:36">)</operator><operator pos:start="83:37" pos:end="83:37">(</operator><name pos:start="83:38" pos:end="83:45"><name pos:start="83:38" pos:end="83:40">pkt</name><operator pos:start="83:41" pos:end="83:42">-&gt;</operator><name pos:start="83:43" pos:end="83:45">pts</name></name> <operator pos:start="83:47" pos:end="83:47">-</operator> <name pos:start="83:49" pos:end="83:60"><name pos:start="83:49" pos:end="83:51">hls</name><operator pos:start="83:52" pos:end="83:53">-&gt;</operator><name pos:start="83:54" pos:end="83:60">end_pts</name></name><operator pos:start="83:61" pos:end="83:61">)</operator>

                                       <operator pos:start="85:40" pos:end="85:40">*</operator> <name pos:start="85:42" pos:end="85:58"><name pos:start="85:42" pos:end="85:43">st</name><operator pos:start="85:44" pos:end="85:45">-&gt;</operator><name pos:start="85:46" pos:end="85:54">time_base</name><operator pos:start="85:55" pos:end="85:55">.</operator><name pos:start="85:56" pos:end="85:58">num</name></name> <operator pos:start="85:60" pos:end="85:60">/</operator> <name pos:start="85:62" pos:end="85:78"><name pos:start="85:62" pos:end="85:63">st</name><operator pos:start="85:64" pos:end="85:65">-&gt;</operator><name pos:start="85:66" pos:end="85:74">time_base</name><operator pos:start="85:75" pos:end="85:75">.</operator><name pos:start="85:76" pos:end="85:78">den</name></name></expr>;</expr_stmt>

            <expr_stmt pos:start="87:13" pos:end="87:87"><expr pos:start="87:13" pos:end="87:86"><name pos:start="87:13" pos:end="87:20"><name pos:start="87:13" pos:end="87:15">hls</name><operator pos:start="87:16" pos:end="87:17">-&gt;</operator><name pos:start="87:18" pos:end="87:20">dpp</name></name> <operator pos:start="87:22" pos:end="87:22">=</operator> <operator pos:start="87:24" pos:end="87:24">(</operator><name pos:start="87:25" pos:end="87:30">double</name><operator pos:start="87:31" pos:end="87:31">)</operator><operator pos:start="87:32" pos:end="87:32">(</operator><name pos:start="87:33" pos:end="87:45"><name pos:start="87:33" pos:end="87:35">pkt</name><operator pos:start="87:36" pos:end="87:37">-&gt;</operator><name pos:start="87:38" pos:end="87:45">duration</name></name><operator pos:start="87:46" pos:end="87:46">)</operator> <operator pos:start="87:48" pos:end="87:48">*</operator> <name pos:start="87:50" pos:end="87:66"><name pos:start="87:50" pos:end="87:51">st</name><operator pos:start="87:52" pos:end="87:53">-&gt;</operator><name pos:start="87:54" pos:end="87:62">time_base</name><operator pos:start="87:63" pos:end="87:63">.</operator><name pos:start="87:64" pos:end="87:66">num</name></name> <operator pos:start="87:68" pos:end="87:68">/</operator> <name pos:start="87:70" pos:end="87:86"><name pos:start="87:70" pos:end="87:71">st</name><operator pos:start="87:72" pos:end="87:73">-&gt;</operator><name pos:start="87:74" pos:end="87:82">time_base</name><operator pos:start="87:83" pos:end="87:83">.</operator><name pos:start="87:84" pos:end="87:86">den</name></name></expr>;</expr_stmt>

        </block_content>}</block></if> <else pos:start="89:11" pos:end="93:9">else <block pos:start="89:16" pos:end="93:9">{<block_content pos:start="91:13" pos:end="91:93">

            <expr_stmt pos:start="91:13" pos:end="91:93"><expr pos:start="91:13" pos:end="91:92"><name pos:start="91:13" pos:end="91:25"><name pos:start="91:13" pos:end="91:15">hls</name><operator pos:start="91:16" pos:end="91:17">-&gt;</operator><name pos:start="91:18" pos:end="91:25">duration</name></name> <operator pos:start="91:27" pos:end="91:28">+=</operator> <operator pos:start="91:30" pos:end="91:30">(</operator><name pos:start="91:31" pos:end="91:36">double</name><operator pos:start="91:37" pos:end="91:37">)</operator><operator pos:start="91:38" pos:end="91:38">(</operator><name pos:start="91:39" pos:end="91:51"><name pos:start="91:39" pos:end="91:41">pkt</name><operator pos:start="91:42" pos:end="91:43">-&gt;</operator><name pos:start="91:44" pos:end="91:51">duration</name></name><operator pos:start="91:52" pos:end="91:52">)</operator> <operator pos:start="91:54" pos:end="91:54">*</operator> <name pos:start="91:56" pos:end="91:72"><name pos:start="91:56" pos:end="91:57">st</name><operator pos:start="91:58" pos:end="91:59">-&gt;</operator><name pos:start="91:60" pos:end="91:68">time_base</name><operator pos:start="91:69" pos:end="91:69">.</operator><name pos:start="91:70" pos:end="91:72">num</name></name> <operator pos:start="91:74" pos:end="91:74">/</operator> <name pos:start="91:76" pos:end="91:92"><name pos:start="91:76" pos:end="91:77">st</name><operator pos:start="91:78" pos:end="91:79">-&gt;</operator><name pos:start="91:80" pos:end="91:88">time_base</name><operator pos:start="91:89" pos:end="91:89">.</operator><name pos:start="91:90" pos:end="91:92">den</name></name></expr>;</expr_stmt>

        </block_content>}</block></else></if_stmt>



    </block_content>}</block></if></if_stmt>

    <if_stmt pos:start="99:5" pos:end="223:5"><if pos:start="99:5" pos:end="223:5">if <condition pos:start="99:8" pos:end="101:65">(<expr pos:start="99:9" pos:end="101:64"><name pos:start="99:9" pos:end="99:17">can_split</name> <operator pos:start="99:19" pos:end="99:20">&amp;&amp;</operator> <call pos:start="99:22" pos:end="101:59"><name pos:start="99:22" pos:end="99:34">av_compare_ts</name><argument_list pos:start="99:35" pos:end="101:59">(<argument pos:start="99:36" pos:end="99:60"><expr pos:start="99:36" pos:end="99:60"><name pos:start="99:36" pos:end="99:43"><name pos:start="99:36" pos:end="99:38">pkt</name><operator pos:start="99:39" pos:end="99:40">-&gt;</operator><name pos:start="99:41" pos:end="99:43">pts</name></name> <operator pos:start="99:45" pos:end="99:45">-</operator> <name pos:start="99:47" pos:end="99:60"><name pos:start="99:47" pos:end="99:49">hls</name><operator pos:start="99:50" pos:end="99:51">-&gt;</operator><name pos:start="99:52" pos:end="99:60">start_pts</name></name></expr></argument>, <argument pos:start="99:63" pos:end="99:75"><expr pos:start="99:63" pos:end="99:75"><name pos:start="99:63" pos:end="99:75"><name pos:start="99:63" pos:end="99:64">st</name><operator pos:start="99:65" pos:end="99:66">-&gt;</operator><name pos:start="99:67" pos:end="99:75">time_base</name></name></expr></argument>,

                                   <argument pos:start="101:36" pos:end="101:42"><expr pos:start="101:36" pos:end="101:42"><name pos:start="101:36" pos:end="101:42">end_pts</name></expr></argument>, <argument pos:start="101:45" pos:end="101:58"><expr pos:start="101:45" pos:end="101:58"><name pos:start="101:45" pos:end="101:58">AV_TIME_BASE_Q</name></expr></argument>)</argument_list></call> <operator pos:start="101:61" pos:end="101:62">&gt;=</operator> <literal type="number" pos:start="101:64" pos:end="101:64">0</literal></expr>)</condition> <block pos:start="101:67" pos:end="223:5">{<block_content pos:start="103:9" pos:end="221:9">

        <decl_stmt pos:start="103:9" pos:end="103:30"><decl pos:start="103:9" pos:end="103:29"><type pos:start="103:9" pos:end="103:15"><name pos:start="103:9" pos:end="103:15">int64_t</name></type> <name pos:start="103:17" pos:end="103:29">new_start_pos</name></decl>;</decl_stmt>

        <decl_stmt pos:start="105:9" pos:end="105:59"><decl pos:start="105:9" pos:end="105:58"><type pos:start="105:9" pos:end="105:14"><name pos:start="105:9" pos:end="105:12">char</name> <modifier pos:start="105:14" pos:end="105:14">*</modifier></type><name pos:start="105:15" pos:end="105:26">old_filename</name> <init pos:start="105:28" pos:end="105:58">= <expr pos:start="105:30" pos:end="105:58"><call pos:start="105:30" pos:end="105:58"><name pos:start="105:30" pos:end="105:38">av_strdup</name><argument_list pos:start="105:39" pos:end="105:58">(<argument pos:start="105:40" pos:end="105:57"><expr pos:start="105:40" pos:end="105:57"><name pos:start="105:40" pos:end="105:57"><name pos:start="105:40" pos:end="105:42">hls</name><operator pos:start="105:43" pos:end="105:44">-&gt;</operator><name pos:start="105:45" pos:end="105:47">avf</name><operator pos:start="105:48" pos:end="105:49">-&gt;</operator><name pos:start="105:50" pos:end="105:57">filename</name></name></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>



        <if_stmt pos:start="109:9" pos:end="113:9"><if pos:start="109:9" pos:end="113:9">if <condition pos:start="109:12" pos:end="109:26">(<expr pos:start="109:13" pos:end="109:25"><operator pos:start="109:13" pos:end="109:13">!</operator><name pos:start="109:14" pos:end="109:25">old_filename</name></expr>)</condition> <block pos:start="109:28" pos:end="113:9">{<block_content pos:start="111:13" pos:end="111:35">

            <return pos:start="111:13" pos:end="111:35">return <expr pos:start="111:20" pos:end="111:34"><call pos:start="111:20" pos:end="111:34"><name pos:start="111:20" pos:end="111:26">AVERROR</name><argument_list pos:start="111:27" pos:end="111:34">(<argument pos:start="111:28" pos:end="111:33"><expr pos:start="111:28" pos:end="111:33"><name pos:start="111:28" pos:end="111:33">ENOMEM</name></expr></argument>)</argument_list></call></expr>;</return>

        </block_content>}</block></if></if_stmt>



        <expr_stmt pos:start="117:9" pos:end="117:33"><expr pos:start="117:9" pos:end="117:32"><call pos:start="117:9" pos:end="117:32"><name pos:start="117:9" pos:end="117:22">av_write_frame</name><argument_list pos:start="117:23" pos:end="117:32">(<argument pos:start="117:24" pos:end="117:25"><expr pos:start="117:24" pos:end="117:25"><name pos:start="117:24" pos:end="117:25">oc</name></expr></argument>, <argument pos:start="117:28" pos:end="117:31"><expr pos:start="117:28" pos:end="117:31"><name pos:start="117:28" pos:end="117:31">NULL</name></expr></argument>)</argument_list></call></expr>;</expr_stmt> <comment type="block" pos:start="117:35" pos:end="117:63">/* Flush any buffered data */</comment>



        <expr_stmt pos:start="121:9" pos:end="121:48"><expr pos:start="121:9" pos:end="121:47"><name pos:start="121:9" pos:end="121:21">new_start_pos</name> <operator pos:start="121:23" pos:end="121:23">=</operator> <call pos:start="121:25" pos:end="121:47"><name pos:start="121:25" pos:end="121:33">avio_tell</name><argument_list pos:start="121:34" pos:end="121:47">(<argument pos:start="121:35" pos:end="121:46"><expr pos:start="121:35" pos:end="121:46"><name pos:start="121:35" pos:end="121:46"><name pos:start="121:35" pos:end="121:37">hls</name><operator pos:start="121:38" pos:end="121:39">-&gt;</operator><name pos:start="121:40" pos:end="121:42">avf</name><operator pos:start="121:43" pos:end="121:44">-&gt;</operator><name pos:start="121:45" pos:end="121:46">pb</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <expr_stmt pos:start="123:9" pos:end="123:51"><expr pos:start="123:9" pos:end="123:50"><name pos:start="123:9" pos:end="123:17"><name pos:start="123:9" pos:end="123:11">hls</name><operator pos:start="123:12" pos:end="123:13">-&gt;</operator><name pos:start="123:14" pos:end="123:17">size</name></name> <operator pos:start="123:19" pos:end="123:19">=</operator> <name pos:start="123:21" pos:end="123:33">new_start_pos</name> <operator pos:start="123:35" pos:end="123:35">-</operator> <name pos:start="123:37" pos:end="123:50"><name pos:start="123:37" pos:end="123:39">hls</name><operator pos:start="123:40" pos:end="123:41">-&gt;</operator><name pos:start="123:42" pos:end="123:50">start_pos</name></name></expr>;</expr_stmt>



        <expr_stmt pos:start="127:9" pos:end="127:39"><expr pos:start="127:9" pos:end="127:38"><call pos:start="127:9" pos:end="127:38"><name pos:start="127:9" pos:end="127:26">ff_format_io_close</name><argument_list pos:start="127:27" pos:end="127:38">(<argument pos:start="127:28" pos:end="127:28"><expr pos:start="127:28" pos:end="127:28"><name pos:start="127:28" pos:end="127:28">s</name></expr></argument>, <argument pos:start="127:31" pos:end="127:37"><expr pos:start="127:31" pos:end="127:37"><operator pos:start="127:31" pos:end="127:31">&amp;</operator><name pos:start="127:32" pos:end="127:37"><name pos:start="127:32" pos:end="127:33">oc</name><operator pos:start="127:34" pos:end="127:35">-&gt;</operator><name pos:start="127:36" pos:end="127:37">pb</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <if_stmt pos:start="129:9" pos:end="133:9"><if pos:start="129:9" pos:end="133:9">if <condition pos:start="129:12" pos:end="129:25">(<expr pos:start="129:13" pos:end="129:24"><name pos:start="129:13" pos:end="129:24"><name pos:start="129:13" pos:end="129:15">hls</name><operator pos:start="129:16" pos:end="129:17">-&gt;</operator><name pos:start="129:18" pos:end="129:24">vtt_avf</name></name></expr>)</condition> <block pos:start="129:27" pos:end="133:9">{<block_content pos:start="131:13" pos:end="131:53">

            <expr_stmt pos:start="131:13" pos:end="131:53"><expr pos:start="131:13" pos:end="131:52"><call pos:start="131:13" pos:end="131:52"><name pos:start="131:13" pos:end="131:30">ff_format_io_close</name><argument_list pos:start="131:31" pos:end="131:52">(<argument pos:start="131:32" pos:end="131:32"><expr pos:start="131:32" pos:end="131:32"><name pos:start="131:32" pos:end="131:32">s</name></expr></argument>, <argument pos:start="131:35" pos:end="131:51"><expr pos:start="131:35" pos:end="131:51"><operator pos:start="131:35" pos:end="131:35">&amp;</operator><name pos:start="131:36" pos:end="131:51"><name pos:start="131:36" pos:end="131:38">hls</name><operator pos:start="131:39" pos:end="131:40">-&gt;</operator><name pos:start="131:41" pos:end="131:47">vtt_avf</name><operator pos:start="131:48" pos:end="131:49">-&gt;</operator><name pos:start="131:50" pos:end="131:51">pb</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        </block_content>}</block></if></if_stmt>

        <if_stmt pos:start="135:9" pos:end="145:9"><if pos:start="135:9" pos:end="145:9">if <condition pos:start="135:12" pos:end="135:60">(<expr pos:start="135:13" pos:end="135:59"><operator pos:start="135:13" pos:end="135:13">(</operator><name pos:start="135:14" pos:end="135:23"><name pos:start="135:14" pos:end="135:16">hls</name><operator pos:start="135:17" pos:end="135:18">-&gt;</operator><name pos:start="135:19" pos:end="135:23">flags</name></name> <operator pos:start="135:25" pos:end="135:25">&amp;</operator> <name pos:start="135:27" pos:end="135:39">HLS_TEMP_FILE</name><operator pos:start="135:40" pos:end="135:40">)</operator> <operator pos:start="135:42" pos:end="135:43">&amp;&amp;</operator> <name pos:start="135:45" pos:end="135:59"><name pos:start="135:45" pos:end="135:46">oc</name><operator pos:start="135:47" pos:end="135:48">-&gt;</operator><name pos:start="135:49" pos:end="135:56">filename</name><index pos:start="135:57" pos:end="135:59">[<expr pos:start="135:58" pos:end="135:58"><literal type="number" pos:start="135:58" pos:end="135:58">0</literal></expr>]</index></name></expr>)</condition> <block pos:start="135:62" pos:end="145:9">{<block_content pos:start="137:13" pos:end="143:40">

            <if_stmt pos:start="137:13" pos:end="141:89"><if pos:start="137:13" pos:end="141:89">if <condition pos:start="137:16" pos:end="137:76">(<expr pos:start="137:17" pos:end="137:75"><operator pos:start="137:17" pos:end="137:17">!</operator><operator pos:start="137:18" pos:end="137:18">(</operator><name pos:start="137:19" pos:end="137:28"><name pos:start="137:19" pos:end="137:21">hls</name><operator pos:start="137:22" pos:end="137:23">-&gt;</operator><name pos:start="137:24" pos:end="137:28">flags</name></name> <operator pos:start="137:30" pos:end="137:30">&amp;</operator> <name pos:start="137:32" pos:end="137:46">HLS_SINGLE_FILE</name><operator pos:start="137:47" pos:end="137:47">)</operator> <operator pos:start="137:49" pos:end="137:50">||</operator> <operator pos:start="137:52" pos:end="137:52">(</operator><name pos:start="137:53" pos:end="137:69"><name pos:start="137:53" pos:end="137:55">hls</name><operator pos:start="137:56" pos:end="137:57">-&gt;</operator><name pos:start="137:58" pos:end="137:69">max_seg_size</name></name> <operator pos:start="137:71" pos:end="137:72">&lt;=</operator> <literal type="number" pos:start="137:74" pos:end="137:74">0</literal><operator pos:start="137:75" pos:end="137:75">)</operator></expr>)</condition><block type="pseudo" pos:start="139:17" pos:end="141:89"><block_content pos:start="139:17" pos:end="141:89">

                <if_stmt pos:start="139:17" pos:end="141:89"><if pos:start="139:17" pos:end="141:89">if <condition pos:start="139:20" pos:end="139:73">(<expr pos:start="139:21" pos:end="139:72"><name pos:start="139:21" pos:end="139:49"><name pos:start="139:21" pos:end="139:23">hls</name><operator pos:start="139:24" pos:end="139:25">-&gt;</operator><name pos:start="139:26" pos:end="139:28">avf</name><operator pos:start="139:29" pos:end="139:30">-&gt;</operator><name pos:start="139:31" pos:end="139:37">oformat</name><operator pos:start="139:38" pos:end="139:39">-&gt;</operator><name pos:start="139:40" pos:end="139:49">priv_class</name></name> <operator pos:start="139:51" pos:end="139:52">&amp;&amp;</operator> <name pos:start="139:54" pos:end="139:72"><name pos:start="139:54" pos:end="139:56">hls</name><operator pos:start="139:57" pos:end="139:58">-&gt;</operator><name pos:start="139:59" pos:end="139:61">avf</name><operator pos:start="139:62" pos:end="139:63">-&gt;</operator><name pos:start="139:64" pos:end="139:72">priv_data</name></name></expr>)</condition><block type="pseudo" pos:start="141:21" pos:end="141:89"><block_content pos:start="141:21" pos:end="141:89">

                    <expr_stmt pos:start="141:21" pos:end="141:89"><expr pos:start="141:21" pos:end="141:88"><call pos:start="141:21" pos:end="141:88"><name pos:start="141:21" pos:end="141:30">av_opt_set</name><argument_list pos:start="141:31" pos:end="141:88">(<argument pos:start="141:32" pos:end="141:50"><expr pos:start="141:32" pos:end="141:50"><name pos:start="141:32" pos:end="141:50"><name pos:start="141:32" pos:end="141:34">hls</name><operator pos:start="141:35" pos:end="141:36">-&gt;</operator><name pos:start="141:37" pos:end="141:39">avf</name><operator pos:start="141:40" pos:end="141:41">-&gt;</operator><name pos:start="141:42" pos:end="141:50">priv_data</name></name></expr></argument>, <argument pos:start="141:53" pos:end="141:66"><expr pos:start="141:53" pos:end="141:66"><literal type="string" pos:start="141:53" pos:end="141:66">"mpegts_flags"</literal></expr></argument>, <argument pos:start="141:69" pos:end="141:84"><expr pos:start="141:69" pos:end="141:84"><literal type="string" pos:start="141:69" pos:end="141:84">"resend_headers"</literal></expr></argument>, <argument pos:start="141:87" pos:end="141:87"><expr pos:start="141:87" pos:end="141:87"><literal type="number" pos:start="141:87" pos:end="141:87">0</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt></block_content></block></if></if_stmt></block_content></block></if></if_stmt>

            <expr_stmt pos:start="143:13" pos:end="143:40"><expr pos:start="143:13" pos:end="143:39"><call pos:start="143:13" pos:end="143:39"><name pos:start="143:13" pos:end="143:32">hls_rename_temp_file</name><argument_list pos:start="143:33" pos:end="143:39">(<argument pos:start="143:34" pos:end="143:34"><expr pos:start="143:34" pos:end="143:34"><name pos:start="143:34" pos:end="143:34">s</name></expr></argument>, <argument pos:start="143:37" pos:end="143:38"><expr pos:start="143:37" pos:end="143:38"><name pos:start="143:37" pos:end="143:38">oc</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        </block_content>}</block></if></if_stmt>



        <expr_stmt pos:start="149:9" pos:end="149:83"><expr pos:start="149:9" pos:end="149:82"><name pos:start="149:9" pos:end="149:11">ret</name> <operator pos:start="149:13" pos:end="149:13">=</operator> <call pos:start="149:15" pos:end="149:82"><name pos:start="149:15" pos:end="149:32">hls_append_segment</name><argument_list pos:start="149:33" pos:end="149:82">(<argument pos:start="149:34" pos:end="149:34"><expr pos:start="149:34" pos:end="149:34"><name pos:start="149:34" pos:end="149:34">s</name></expr></argument>, <argument pos:start="149:37" pos:end="149:39"><expr pos:start="149:37" pos:end="149:39"><name pos:start="149:37" pos:end="149:39">hls</name></expr></argument>, <argument pos:start="149:42" pos:end="149:54"><expr pos:start="149:42" pos:end="149:54"><name pos:start="149:42" pos:end="149:54"><name pos:start="149:42" pos:end="149:44">hls</name><operator pos:start="149:45" pos:end="149:46">-&gt;</operator><name pos:start="149:47" pos:end="149:54">duration</name></name></expr></argument>, <argument pos:start="149:57" pos:end="149:70"><expr pos:start="149:57" pos:end="149:70"><name pos:start="149:57" pos:end="149:70"><name pos:start="149:57" pos:end="149:59">hls</name><operator pos:start="149:60" pos:end="149:61">-&gt;</operator><name pos:start="149:62" pos:end="149:70">start_pos</name></name></expr></argument>, <argument pos:start="149:73" pos:end="149:81"><expr pos:start="149:73" pos:end="149:81"><name pos:start="149:73" pos:end="149:81"><name pos:start="149:73" pos:end="149:75">hls</name><operator pos:start="149:76" pos:end="149:77">-&gt;</operator><name pos:start="149:78" pos:end="149:81">size</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <expr_stmt pos:start="151:9" pos:end="151:39"><expr pos:start="151:9" pos:end="151:38"><name pos:start="151:9" pos:end="151:22"><name pos:start="151:9" pos:end="151:11">hls</name><operator pos:start="151:12" pos:end="151:13">-&gt;</operator><name pos:start="151:14" pos:end="151:22">start_pos</name></name> <operator pos:start="151:24" pos:end="151:24">=</operator> <name pos:start="151:26" pos:end="151:38">new_start_pos</name></expr>;</expr_stmt>

        <if_stmt pos:start="153:9" pos:end="159:9"><if pos:start="153:9" pos:end="159:9">if <condition pos:start="153:12" pos:end="153:20">(<expr pos:start="153:13" pos:end="153:19"><name pos:start="153:13" pos:end="153:15">ret</name> <operator pos:start="153:17" pos:end="153:17">&lt;</operator> <literal type="number" pos:start="153:19" pos:end="153:19">0</literal></expr>)</condition> <block pos:start="153:22" pos:end="159:9">{<block_content pos:start="155:13" pos:end="157:23">

            <expr_stmt pos:start="155:13" pos:end="155:34"><expr pos:start="155:13" pos:end="155:33"><call pos:start="155:13" pos:end="155:33"><name pos:start="155:13" pos:end="155:19">av_free</name><argument_list pos:start="155:20" pos:end="155:33">(<argument pos:start="155:21" pos:end="155:32"><expr pos:start="155:21" pos:end="155:32"><name pos:start="155:21" pos:end="155:32">old_filename</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

            <return pos:start="157:13" pos:end="157:23">return <expr pos:start="157:20" pos:end="157:22"><name pos:start="157:20" pos:end="157:22">ret</name></expr>;</return>

        </block_content>}</block></if></if_stmt>



        <expr_stmt pos:start="163:9" pos:end="163:32"><expr pos:start="163:9" pos:end="163:31"><name pos:start="163:9" pos:end="163:20"><name pos:start="163:9" pos:end="163:11">hls</name><operator pos:start="163:12" pos:end="163:13">-&gt;</operator><name pos:start="163:14" pos:end="163:20">end_pts</name></name> <operator pos:start="163:22" pos:end="163:22">=</operator> <name pos:start="163:24" pos:end="163:31"><name pos:start="163:24" pos:end="163:26">pkt</name><operator pos:start="163:27" pos:end="163:28">-&gt;</operator><name pos:start="163:29" pos:end="163:31">pts</name></name></expr>;</expr_stmt>

        <expr_stmt pos:start="165:9" pos:end="165:26"><expr pos:start="165:9" pos:end="165:25"><name pos:start="165:9" pos:end="165:21"><name pos:start="165:9" pos:end="165:11">hls</name><operator pos:start="165:12" pos:end="165:13">-&gt;</operator><name pos:start="165:14" pos:end="165:21">duration</name></name> <operator pos:start="165:23" pos:end="165:23">=</operator> <literal type="number" pos:start="165:25" pos:end="165:25">0</literal></expr>;</expr_stmt>



        <if_stmt pos:start="169:9" pos:end="201:9"><if pos:start="169:9" pos:end="173:9">if <condition pos:start="169:12" pos:end="169:41">(<expr pos:start="169:13" pos:end="169:40"><name pos:start="169:13" pos:end="169:22"><name pos:start="169:13" pos:end="169:15">hls</name><operator pos:start="169:16" pos:end="169:17">-&gt;</operator><name pos:start="169:18" pos:end="169:22">flags</name></name> <operator pos:start="169:24" pos:end="169:24">&amp;</operator> <name pos:start="169:26" pos:end="169:40">HLS_SINGLE_FILE</name></expr>)</condition> <block pos:start="169:43" pos:end="173:9">{<block_content pos:start="171:13" pos:end="171:26">

            <expr_stmt pos:start="171:13" pos:end="171:26"><expr pos:start="171:13" pos:end="171:25"><name pos:start="171:13" pos:end="171:23"><name pos:start="171:13" pos:end="171:15">hls</name><operator pos:start="171:16" pos:end="171:17">-&gt;</operator><name pos:start="171:18" pos:end="171:23">number</name></name><operator pos:start="171:24" pos:end="171:25">++</operator></expr>;</expr_stmt>

        </block_content>}</block></if> <if type="elseif" pos:start="173:11" pos:end="195:9">else if <condition pos:start="173:19" pos:end="173:41">(<expr pos:start="173:20" pos:end="173:40"><name pos:start="173:20" pos:end="173:36"><name pos:start="173:20" pos:end="173:22">hls</name><operator pos:start="173:23" pos:end="173:24">-&gt;</operator><name pos:start="173:25" pos:end="173:36">max_seg_size</name></name> <operator pos:start="173:38" pos:end="173:38">&gt;</operator> <literal type="number" pos:start="173:40" pos:end="173:40">0</literal></expr>)</condition> <block pos:start="173:43" pos:end="195:9">{<block_content pos:start="175:13" pos:end="193:26">

            <if_stmt pos:start="175:13" pos:end="191:13"><if pos:start="175:13" pos:end="191:13">if <condition pos:start="175:16" pos:end="175:52">(<expr pos:start="175:17" pos:end="175:51"><name pos:start="175:17" pos:end="175:30"><name pos:start="175:17" pos:end="175:19">hls</name><operator pos:start="175:20" pos:end="175:21">-&gt;</operator><name pos:start="175:22" pos:end="175:30">start_pos</name></name> <operator pos:start="175:32" pos:end="175:33">&gt;=</operator> <name pos:start="175:35" pos:end="175:51"><name pos:start="175:35" pos:end="175:37">hls</name><operator pos:start="175:38" pos:end="175:39">-&gt;</operator><name pos:start="175:40" pos:end="175:51">max_seg_size</name></name></expr>)</condition> <block pos:start="175:54" pos:end="191:13">{<block_content pos:start="177:17" pos:end="189:30">

                <expr_stmt pos:start="177:17" pos:end="177:32"><expr pos:start="177:17" pos:end="177:31"><name pos:start="177:17" pos:end="177:29"><name pos:start="177:17" pos:end="177:19">hls</name><operator pos:start="177:20" pos:end="177:21">-&gt;</operator><name pos:start="177:22" pos:end="177:29">sequence</name></name><operator pos:start="177:30" pos:end="177:31">++</operator></expr>;</expr_stmt>

                <expr_stmt pos:start="179:17" pos:end="179:56"><expr pos:start="179:17" pos:end="179:55"><call pos:start="179:17" pos:end="179:55"><name pos:start="179:17" pos:end="179:36">sls_flag_file_rename</name><argument_list pos:start="179:37" pos:end="179:55">(<argument pos:start="179:38" pos:end="179:40"><expr pos:start="179:38" pos:end="179:40"><name pos:start="179:38" pos:end="179:40">hls</name></expr></argument>, <argument pos:start="179:43" pos:end="179:54"><expr pos:start="179:43" pos:end="179:54"><name pos:start="179:43" pos:end="179:54">old_filename</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

                <expr_stmt pos:start="181:17" pos:end="181:35"><expr pos:start="181:17" pos:end="181:34"><name pos:start="181:17" pos:end="181:19">ret</name> <operator pos:start="181:21" pos:end="181:21">=</operator> <call pos:start="181:23" pos:end="181:34"><name pos:start="181:23" pos:end="181:31">hls_start</name><argument_list pos:start="181:32" pos:end="181:34">(<argument pos:start="181:33" pos:end="181:33"><expr pos:start="181:33" pos:end="181:33"><name pos:start="181:33" pos:end="181:33">s</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

                <expr_stmt pos:start="183:17" pos:end="183:35"><expr pos:start="183:17" pos:end="183:34"><name pos:start="183:17" pos:end="183:30"><name pos:start="183:17" pos:end="183:19">hls</name><operator pos:start="183:20" pos:end="183:21">-&gt;</operator><name pos:start="183:22" pos:end="183:30">start_pos</name></name> <operator pos:start="183:32" pos:end="183:32">=</operator> <literal type="number" pos:start="183:34" pos:end="183:34">0</literal></expr>;</expr_stmt>

                <comment type="block" pos:start="185:17" pos:end="187:75">/* When split segment by byte, the duration is short than hls_time,

                 * so it is not enough one segment duration as hls_time, */</comment>

                <expr_stmt pos:start="189:17" pos:end="189:30"><expr pos:start="189:17" pos:end="189:29"><name pos:start="189:17" pos:end="189:27"><name pos:start="189:17" pos:end="189:19">hls</name><operator pos:start="189:20" pos:end="189:21">-&gt;</operator><name pos:start="189:22" pos:end="189:27">number</name></name><operator pos:start="189:28" pos:end="189:29">--</operator></expr>;</expr_stmt>

            </block_content>}</block></if></if_stmt>

            <expr_stmt pos:start="193:13" pos:end="193:26"><expr pos:start="193:13" pos:end="193:25"><name pos:start="193:13" pos:end="193:23"><name pos:start="193:13" pos:end="193:15">hls</name><operator pos:start="193:16" pos:end="193:17">-&gt;</operator><name pos:start="193:18" pos:end="193:23">number</name></name><operator pos:start="193:24" pos:end="193:25">++</operator></expr>;</expr_stmt>

        </block_content>}</block></if> <else pos:start="195:11" pos:end="201:9">else <block pos:start="195:16" pos:end="201:9">{<block_content pos:start="197:13" pos:end="199:31">

            <expr_stmt pos:start="197:13" pos:end="197:52"><expr pos:start="197:13" pos:end="197:51"><call pos:start="197:13" pos:end="197:51"><name pos:start="197:13" pos:end="197:32">sls_flag_file_rename</name><argument_list pos:start="197:33" pos:end="197:51">(<argument pos:start="197:34" pos:end="197:36"><expr pos:start="197:34" pos:end="197:36"><name pos:start="197:34" pos:end="197:36">hls</name></expr></argument>, <argument pos:start="197:39" pos:end="197:50"><expr pos:start="197:39" pos:end="197:50"><name pos:start="197:39" pos:end="197:50">old_filename</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

            <expr_stmt pos:start="199:13" pos:end="199:31"><expr pos:start="199:13" pos:end="199:30"><name pos:start="199:13" pos:end="199:15">ret</name> <operator pos:start="199:17" pos:end="199:17">=</operator> <call pos:start="199:19" pos:end="199:30"><name pos:start="199:19" pos:end="199:27">hls_start</name><argument_list pos:start="199:28" pos:end="199:30">(<argument pos:start="199:29" pos:end="199:29"><expr pos:start="199:29" pos:end="199:29"><name pos:start="199:29" pos:end="199:29">s</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        </block_content>}</block></else></if_stmt>



        <if_stmt pos:start="205:9" pos:end="211:9"><if pos:start="205:9" pos:end="211:9">if <condition pos:start="205:12" pos:end="205:20">(<expr pos:start="205:13" pos:end="205:19"><name pos:start="205:13" pos:end="205:15">ret</name> <operator pos:start="205:17" pos:end="205:17">&lt;</operator> <literal type="number" pos:start="205:19" pos:end="205:19">0</literal></expr>)</condition> <block pos:start="205:22" pos:end="211:9">{<block_content pos:start="207:13" pos:end="209:23">

            <expr_stmt pos:start="207:13" pos:end="207:34"><expr pos:start="207:13" pos:end="207:33"><call pos:start="207:13" pos:end="207:33"><name pos:start="207:13" pos:end="207:19">av_free</name><argument_list pos:start="207:20" pos:end="207:33">(<argument pos:start="207:21" pos:end="207:32"><expr pos:start="207:21" pos:end="207:32"><name pos:start="207:21" pos:end="207:32">old_filename</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

            <return pos:start="209:13" pos:end="209:23">return <expr pos:start="209:20" pos:end="209:22"><name pos:start="209:20" pos:end="209:22">ret</name></expr>;</return>

        </block_content>}</block></if></if_stmt>



        <if_stmt pos:start="215:9" pos:end="221:9"><if pos:start="215:9" pos:end="221:9">if <condition pos:start="215:12" pos:end="215:41">(<expr pos:start="215:13" pos:end="215:40"><operator pos:start="215:13" pos:end="215:13">(</operator><name pos:start="215:14" pos:end="215:16">ret</name> <operator pos:start="215:18" pos:end="215:18">=</operator> <call pos:start="215:20" pos:end="215:35"><name pos:start="215:20" pos:end="215:29">hls_window</name><argument_list pos:start="215:30" pos:end="215:35">(<argument pos:start="215:31" pos:end="215:31"><expr pos:start="215:31" pos:end="215:31"><name pos:start="215:31" pos:end="215:31">s</name></expr></argument>, <argument pos:start="215:34" pos:end="215:34"><expr pos:start="215:34" pos:end="215:34"><literal type="number" pos:start="215:34" pos:end="215:34">0</literal></expr></argument>)</argument_list></call><operator pos:start="215:36" pos:end="215:36">)</operator> <operator pos:start="215:38" pos:end="215:38">&lt;</operator> <literal type="number" pos:start="215:40" pos:end="215:40">0</literal></expr>)</condition> <block pos:start="215:43" pos:end="221:9">{<block_content pos:start="217:13" pos:end="219:23">

            <expr_stmt pos:start="217:13" pos:end="217:34"><expr pos:start="217:13" pos:end="217:33"><call pos:start="217:13" pos:end="217:33"><name pos:start="217:13" pos:end="217:19">av_free</name><argument_list pos:start="217:20" pos:end="217:33">(<argument pos:start="217:21" pos:end="217:32"><expr pos:start="217:21" pos:end="217:32"><name pos:start="217:21" pos:end="217:32">old_filename</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

            <return pos:start="219:13" pos:end="219:23">return <expr pos:start="219:20" pos:end="219:22"><name pos:start="219:20" pos:end="219:22">ret</name></expr>;</return>

        </block_content>}</block></if></if_stmt>

    </block_content>}</block></if></if_stmt>



    <expr_stmt pos:start="227:5" pos:end="227:56"><expr pos:start="227:5" pos:end="227:55"><name pos:start="227:5" pos:end="227:7">ret</name> <operator pos:start="227:9" pos:end="227:9">=</operator> <call pos:start="227:11" pos:end="227:55"><name pos:start="227:11" pos:end="227:26">ff_write_chained</name><argument_list pos:start="227:27" pos:end="227:55">(<argument pos:start="227:28" pos:end="227:29"><expr pos:start="227:28" pos:end="227:29"><name pos:start="227:28" pos:end="227:29">oc</name></expr></argument>, <argument pos:start="227:32" pos:end="227:43"><expr pos:start="227:32" pos:end="227:43"><name pos:start="227:32" pos:end="227:43">stream_index</name></expr></argument>, <argument pos:start="227:46" pos:end="227:48"><expr pos:start="227:46" pos:end="227:48"><name pos:start="227:46" pos:end="227:48">pkt</name></expr></argument>, <argument pos:start="227:51" pos:end="227:51"><expr pos:start="227:51" pos:end="227:51"><name pos:start="227:51" pos:end="227:51">s</name></expr></argument>, <argument pos:start="227:54" pos:end="227:54"><expr pos:start="227:54" pos:end="227:54"><literal type="number" pos:start="227:54" pos:end="227:54">0</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>



    <return pos:start="231:5" pos:end="231:15">return <expr pos:start="231:12" pos:end="231:14"><name pos:start="231:12" pos:end="231:14">ret</name></expr>;</return>

</block_content>}</block></function>
</unit>
