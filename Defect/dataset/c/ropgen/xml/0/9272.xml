<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<unit xmlns="http://www.srcML.org/srcML/src" xmlns:pos="http://www.srcML.org/srcML/position" revision="1.0.0" language="C" filename="dataset/ropgen/aug/0/9272.c" pos:tabs="8"><function pos:start="1:1" pos:end="55:1"><type pos:start="1:1" pos:end="1:11"><specifier pos:start="1:1" pos:end="1:6">static</specifier> <name pos:start="1:8" pos:end="1:11">void</name></type> <name pos:start="1:13" pos:end="1:24">v9fs_version</name><parameter_list pos:start="1:25" pos:end="1:38">(<parameter pos:start="1:26" pos:end="1:37"><decl pos:start="1:26" pos:end="1:37"><type pos:start="1:26" pos:end="1:31"><name pos:start="1:26" pos:end="1:29">void</name> <modifier pos:start="1:31" pos:end="1:31">*</modifier></type><name pos:start="1:32" pos:end="1:37">opaque</name></decl></parameter>)</parameter_list>

<block pos:start="3:1" pos:end="55:1">{<block_content pos:start="5:5" pos:end="53:11">

    <decl_stmt pos:start="5:5" pos:end="5:26"><decl pos:start="5:5" pos:end="5:25"><type pos:start="5:5" pos:end="5:13"><name pos:start="5:5" pos:end="5:11">V9fsPDU</name> <modifier pos:start="5:13" pos:end="5:13">*</modifier></type><name pos:start="5:14" pos:end="5:16">pdu</name> <init pos:start="5:18" pos:end="5:25">= <expr pos:start="5:20" pos:end="5:25"><name pos:start="5:20" pos:end="5:25">opaque</name></expr></init></decl>;</decl_stmt>

    <decl_stmt pos:start="7:5" pos:end="7:26"><decl pos:start="7:5" pos:end="7:25"><type pos:start="7:5" pos:end="7:15"><name pos:start="7:5" pos:end="7:13">V9fsState</name> <modifier pos:start="7:15" pos:end="7:15">*</modifier></type><name pos:start="7:16" pos:end="7:16">s</name> <init pos:start="7:18" pos:end="7:25">= <expr pos:start="7:20" pos:end="7:25"><name pos:start="7:20" pos:end="7:25"><name pos:start="7:20" pos:end="7:22">pdu</name><operator pos:start="7:23" pos:end="7:24">-&gt;</operator><name pos:start="7:25" pos:end="7:25">s</name></name></expr></init></decl>;</decl_stmt>

    <decl_stmt pos:start="9:5" pos:end="9:23"><decl pos:start="9:5" pos:end="9:22"><type pos:start="9:5" pos:end="9:14"><name pos:start="9:5" pos:end="9:14">V9fsString</name></type> <name pos:start="9:16" pos:end="9:22">version</name></decl>;</decl_stmt>

    <decl_stmt pos:start="11:5" pos:end="11:22"><decl pos:start="11:5" pos:end="11:21"><type pos:start="11:5" pos:end="11:10"><name pos:start="11:5" pos:end="11:10">size_t</name></type> <name pos:start="11:12" pos:end="11:17">offset</name> <init pos:start="11:19" pos:end="11:21">= <expr pos:start="11:21" pos:end="11:21"><literal type="number" pos:start="11:21" pos:end="11:21">7</literal></expr></init></decl>;</decl_stmt>



    <expr_stmt pos:start="15:5" pos:end="15:58"><expr pos:start="15:5" pos:end="15:57"><call pos:start="15:5" pos:end="15:57"><name pos:start="15:5" pos:end="15:17">pdu_unmarshal</name><argument_list pos:start="15:18" pos:end="15:57">(<argument pos:start="15:19" pos:end="15:21"><expr pos:start="15:19" pos:end="15:21"><name pos:start="15:19" pos:end="15:21">pdu</name></expr></argument>, <argument pos:start="15:24" pos:end="15:29"><expr pos:start="15:24" pos:end="15:29"><name pos:start="15:24" pos:end="15:29">offset</name></expr></argument>, <argument pos:start="15:32" pos:end="15:35"><expr pos:start="15:32" pos:end="15:35"><literal type="string" pos:start="15:32" pos:end="15:35">"ds"</literal></expr></argument>, <argument pos:start="15:38" pos:end="15:46"><expr pos:start="15:38" pos:end="15:46"><operator pos:start="15:38" pos:end="15:38">&amp;</operator><name pos:start="15:39" pos:end="15:46"><name pos:start="15:39" pos:end="15:39">s</name><operator pos:start="15:40" pos:end="15:41">-&gt;</operator><name pos:start="15:42" pos:end="15:46">msize</name></name></expr></argument>, <argument pos:start="15:49" pos:end="15:56"><expr pos:start="15:49" pos:end="15:56"><operator pos:start="15:49" pos:end="15:49">&amp;</operator><name pos:start="15:50" pos:end="15:56">version</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    <expr_stmt pos:start="17:5" pos:end="17:66"><expr pos:start="17:5" pos:end="17:65"><call pos:start="17:5" pos:end="17:65"><name pos:start="17:5" pos:end="17:22">trace_v9fs_version</name><argument_list pos:start="17:23" pos:end="17:65">(<argument pos:start="17:24" pos:end="17:31"><expr pos:start="17:24" pos:end="17:31"><name pos:start="17:24" pos:end="17:31"><name pos:start="17:24" pos:end="17:26">pdu</name><operator pos:start="17:27" pos:end="17:28">-&gt;</operator><name pos:start="17:29" pos:end="17:31">tag</name></name></expr></argument>, <argument pos:start="17:34" pos:end="17:40"><expr pos:start="17:34" pos:end="17:40"><name pos:start="17:34" pos:end="17:40"><name pos:start="17:34" pos:end="17:36">pdu</name><operator pos:start="17:37" pos:end="17:38">-&gt;</operator><name pos:start="17:39" pos:end="17:40">id</name></name></expr></argument>, <argument pos:start="17:43" pos:end="17:50"><expr pos:start="17:43" pos:end="17:50"><name pos:start="17:43" pos:end="17:50"><name pos:start="17:43" pos:end="17:43">s</name><operator pos:start="17:44" pos:end="17:45">-&gt;</operator><name pos:start="17:46" pos:end="17:50">msize</name></name></expr></argument>, <argument pos:start="17:53" pos:end="17:64"><expr pos:start="17:53" pos:end="17:64"><name pos:start="17:53" pos:end="17:64"><name pos:start="17:53" pos:end="17:59">version</name><operator pos:start="17:60" pos:end="17:60">.</operator><name pos:start="17:61" pos:end="17:64">data</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>



    <expr_stmt pos:start="21:5" pos:end="21:22"><expr pos:start="21:5" pos:end="21:21"><call pos:start="21:5" pos:end="21:21"><name pos:start="21:5" pos:end="21:16">virtfs_reset</name><argument_list pos:start="21:17" pos:end="21:21">(<argument pos:start="21:18" pos:end="21:20"><expr pos:start="21:18" pos:end="21:20"><name pos:start="21:18" pos:end="21:20">pdu</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>



    <if_stmt pos:start="25:5" pos:end="37:5"><if pos:start="25:5" pos:end="29:5">if <condition pos:start="25:8" pos:end="25:42">(<expr pos:start="25:9" pos:end="25:41"><operator pos:start="25:9" pos:end="25:9">!</operator><call pos:start="25:10" pos:end="25:41"><name pos:start="25:10" pos:end="25:15">strcmp</name><argument_list pos:start="25:16" pos:end="25:41">(<argument pos:start="25:17" pos:end="25:28"><expr pos:start="25:17" pos:end="25:28"><name pos:start="25:17" pos:end="25:28"><name pos:start="25:17" pos:end="25:23">version</name><operator pos:start="25:24" pos:end="25:24">.</operator><name pos:start="25:25" pos:end="25:28">data</name></name></expr></argument>, <argument pos:start="25:31" pos:end="25:40"><expr pos:start="25:31" pos:end="25:40"><literal type="string" pos:start="25:31" pos:end="25:40">"9P2000.u"</literal></expr></argument>)</argument_list></call></expr>)</condition> <block pos:start="25:44" pos:end="29:5">{<block_content pos:start="27:9" pos:end="27:44">

        <expr_stmt pos:start="27:9" pos:end="27:44"><expr pos:start="27:9" pos:end="27:43"><name pos:start="27:9" pos:end="27:24"><name pos:start="27:9" pos:end="27:9">s</name><operator pos:start="27:10" pos:end="27:11">-&gt;</operator><name pos:start="27:12" pos:end="27:24">proto_version</name></name> <operator pos:start="27:26" pos:end="27:26">=</operator> <name pos:start="27:28" pos:end="27:43">V9FS_PROTO_2000U</name></expr>;</expr_stmt>

    </block_content>}</block></if> <if type="elseif" pos:start="29:7" pos:end="33:5">else if <condition pos:start="29:15" pos:end="29:49">(<expr pos:start="29:16" pos:end="29:48"><operator pos:start="29:16" pos:end="29:16">!</operator><call pos:start="29:17" pos:end="29:48"><name pos:start="29:17" pos:end="29:22">strcmp</name><argument_list pos:start="29:23" pos:end="29:48">(<argument pos:start="29:24" pos:end="29:35"><expr pos:start="29:24" pos:end="29:35"><name pos:start="29:24" pos:end="29:35"><name pos:start="29:24" pos:end="29:30">version</name><operator pos:start="29:31" pos:end="29:31">.</operator><name pos:start="29:32" pos:end="29:35">data</name></name></expr></argument>, <argument pos:start="29:38" pos:end="29:47"><expr pos:start="29:38" pos:end="29:47"><literal type="string" pos:start="29:38" pos:end="29:47">"9P2000.L"</literal></expr></argument>)</argument_list></call></expr>)</condition> <block pos:start="29:51" pos:end="33:5">{<block_content pos:start="31:9" pos:end="31:44">

        <expr_stmt pos:start="31:9" pos:end="31:44"><expr pos:start="31:9" pos:end="31:43"><name pos:start="31:9" pos:end="31:24"><name pos:start="31:9" pos:end="31:9">s</name><operator pos:start="31:10" pos:end="31:11">-&gt;</operator><name pos:start="31:12" pos:end="31:24">proto_version</name></name> <operator pos:start="31:26" pos:end="31:26">=</operator> <name pos:start="31:28" pos:end="31:43">V9FS_PROTO_2000L</name></expr>;</expr_stmt>

    </block_content>}</block></if> <else pos:start="33:7" pos:end="37:5">else <block pos:start="33:12" pos:end="37:5">{<block_content pos:start="35:9" pos:end="35:49">

        <expr_stmt pos:start="35:9" pos:end="35:49"><expr pos:start="35:9" pos:end="35:48"><call pos:start="35:9" pos:end="35:48"><name pos:start="35:9" pos:end="35:27">v9fs_string_sprintf</name><argument_list pos:start="35:28" pos:end="35:48">(<argument pos:start="35:29" pos:end="35:36"><expr pos:start="35:29" pos:end="35:36"><operator pos:start="35:29" pos:end="35:29">&amp;</operator><name pos:start="35:30" pos:end="35:36">version</name></expr></argument>, <argument pos:start="35:39" pos:end="35:47"><expr pos:start="35:39" pos:end="35:47"><literal type="string" pos:start="35:39" pos:end="35:47">"unknown"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    </block_content>}</block></else></if_stmt>



    <expr_stmt pos:start="41:5" pos:end="41:65"><expr pos:start="41:5" pos:end="41:64"><name pos:start="41:5" pos:end="41:10">offset</name> <operator pos:start="41:12" pos:end="41:13">+=</operator> <call pos:start="41:15" pos:end="41:64"><name pos:start="41:15" pos:end="41:25">pdu_marshal</name><argument_list pos:start="41:26" pos:end="41:64">(<argument pos:start="41:27" pos:end="41:29"><expr pos:start="41:27" pos:end="41:29"><name pos:start="41:27" pos:end="41:29">pdu</name></expr></argument>, <argument pos:start="41:32" pos:end="41:37"><expr pos:start="41:32" pos:end="41:37"><name pos:start="41:32" pos:end="41:37">offset</name></expr></argument>, <argument pos:start="41:40" pos:end="41:43"><expr pos:start="41:40" pos:end="41:43"><literal type="string" pos:start="41:40" pos:end="41:43">"ds"</literal></expr></argument>, <argument pos:start="41:46" pos:end="41:53"><expr pos:start="41:46" pos:end="41:53"><name pos:start="41:46" pos:end="41:53"><name pos:start="41:46" pos:end="41:46">s</name><operator pos:start="41:47" pos:end="41:48">-&gt;</operator><name pos:start="41:49" pos:end="41:53">msize</name></name></expr></argument>, <argument pos:start="41:56" pos:end="41:63"><expr pos:start="41:56" pos:end="41:63"><operator pos:start="41:56" pos:end="41:56">&amp;</operator><name pos:start="41:57" pos:end="41:63">version</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    <expr_stmt pos:start="43:5" pos:end="43:73"><expr pos:start="43:5" pos:end="43:72"><call pos:start="43:5" pos:end="43:72"><name pos:start="43:5" pos:end="43:29">trace_v9fs_version_return</name><argument_list pos:start="43:30" pos:end="43:72">(<argument pos:start="43:31" pos:end="43:38"><expr pos:start="43:31" pos:end="43:38"><name pos:start="43:31" pos:end="43:38"><name pos:start="43:31" pos:end="43:33">pdu</name><operator pos:start="43:34" pos:end="43:35">-&gt;</operator><name pos:start="43:36" pos:end="43:38">tag</name></name></expr></argument>, <argument pos:start="43:41" pos:end="43:47"><expr pos:start="43:41" pos:end="43:47"><name pos:start="43:41" pos:end="43:47"><name pos:start="43:41" pos:end="43:43">pdu</name><operator pos:start="43:44" pos:end="43:45">-&gt;</operator><name pos:start="43:46" pos:end="43:47">id</name></name></expr></argument>, <argument pos:start="43:50" pos:end="43:57"><expr pos:start="43:50" pos:end="43:57"><name pos:start="43:50" pos:end="43:57"><name pos:start="43:50" pos:end="43:50">s</name><operator pos:start="43:51" pos:end="43:52">-&gt;</operator><name pos:start="43:53" pos:end="43:57">msize</name></name></expr></argument>, <argument pos:start="43:60" pos:end="43:71"><expr pos:start="43:60" pos:end="43:71"><name pos:start="43:60" pos:end="43:71"><name pos:start="43:60" pos:end="43:66">version</name><operator pos:start="43:67" pos:end="43:67">.</operator><name pos:start="43:68" pos:end="43:71">data</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>



    <expr_stmt pos:start="47:5" pos:end="47:33"><expr pos:start="47:5" pos:end="47:32"><call pos:start="47:5" pos:end="47:32"><name pos:start="47:5" pos:end="47:16">complete_pdu</name><argument_list pos:start="47:17" pos:end="47:32">(<argument pos:start="47:18" pos:end="47:18"><expr pos:start="47:18" pos:end="47:18"><name pos:start="47:18" pos:end="47:18">s</name></expr></argument>, <argument pos:start="47:21" pos:end="47:23"><expr pos:start="47:21" pos:end="47:23"><name pos:start="47:21" pos:end="47:23">pdu</name></expr></argument>, <argument pos:start="47:26" pos:end="47:31"><expr pos:start="47:26" pos:end="47:31"><name pos:start="47:26" pos:end="47:31">offset</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>



    <expr_stmt pos:start="51:5" pos:end="51:31"><expr pos:start="51:5" pos:end="51:30"><call pos:start="51:5" pos:end="51:30"><name pos:start="51:5" pos:end="51:20">v9fs_string_free</name><argument_list pos:start="51:21" pos:end="51:30">(<argument pos:start="51:22" pos:end="51:29"><expr pos:start="51:22" pos:end="51:29"><operator pos:start="51:22" pos:end="51:22">&amp;</operator><name pos:start="51:23" pos:end="51:29">version</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    <return pos:start="53:5" pos:end="53:11">return;</return>

</block_content>}</block></function>
</unit>
