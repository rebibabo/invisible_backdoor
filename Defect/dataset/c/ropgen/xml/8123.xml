<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<unit xmlns="http://www.srcML.org/srcML/src" xmlns:pos="http://www.srcML.org/srcML/position" revision="1.0.0" language="C" filename="dataset/ropgen/aug/1/8123.c" pos:tabs="8"><function pos:start="1:1" pos:end="70:1"><type pos:start="1:1" pos:end="1:4"><name pos:start="1:1" pos:end="1:4">void</name></type> <name pos:start="1:6" pos:end="1:30">qmp_block_set_io_throttle</name><parameter_list pos:start="1:31" pos:end="19:63">(<parameter pos:start="1:32" pos:end="1:49"><decl pos:start="1:32" pos:end="1:49"><type pos:start="1:32" pos:end="1:49"><specifier pos:start="1:32" pos:end="1:36">const</specifier> <name pos:start="1:38" pos:end="1:41">char</name> <modifier pos:start="1:43" pos:end="1:43">*</modifier></type><name pos:start="1:44" pos:end="1:49">device</name></decl></parameter>, <parameter pos:start="1:52" pos:end="1:62"><decl pos:start="1:52" pos:end="1:62"><type pos:start="1:52" pos:end="1:62"><name pos:start="1:52" pos:end="1:58">int64_t</name></type> <name pos:start="1:60" pos:end="1:62">bps</name></decl></parameter>, <parameter pos:start="1:65" pos:end="1:78"><decl pos:start="1:65" pos:end="1:78"><type pos:start="1:65" pos:end="1:78"><name pos:start="1:65" pos:end="1:71">int64_t</name></type> <name pos:start="1:73" pos:end="1:78">bps_rd</name></decl></parameter>,
                               <parameter pos:start="2:32" pos:end="2:45"><decl pos:start="2:32" pos:end="2:45"><type pos:start="2:32" pos:end="2:45"><name pos:start="2:32" pos:end="2:38">int64_t</name></type> <name pos:start="2:40" pos:end="2:45">bps_wr</name></decl></parameter>,
                               <parameter pos:start="3:32" pos:end="3:43"><decl pos:start="3:32" pos:end="3:43"><type pos:start="3:32" pos:end="3:43"><name pos:start="3:32" pos:end="3:38">int64_t</name></type> <name pos:start="3:40" pos:end="3:43">iops</name></decl></parameter>,
                               <parameter pos:start="4:32" pos:end="4:46"><decl pos:start="4:32" pos:end="4:46"><type pos:start="4:32" pos:end="4:46"><name pos:start="4:32" pos:end="4:38">int64_t</name></type> <name pos:start="4:40" pos:end="4:46">iops_rd</name></decl></parameter>,
                               <parameter pos:start="5:32" pos:end="5:46"><decl pos:start="5:32" pos:end="5:46"><type pos:start="5:32" pos:end="5:46"><name pos:start="5:32" pos:end="5:38">int64_t</name></type> <name pos:start="5:40" pos:end="5:46">iops_wr</name></decl></parameter>,
                               <parameter pos:start="6:32" pos:end="6:47"><decl pos:start="6:32" pos:end="6:47"><type pos:start="6:32" pos:end="6:47"><name pos:start="6:32" pos:end="6:35">bool</name></type> <name pos:start="6:37" pos:end="6:47">has_bps_max</name></decl></parameter>,
                               <parameter pos:start="7:32" pos:end="7:46"><decl pos:start="7:32" pos:end="7:46"><type pos:start="7:32" pos:end="7:46"><name pos:start="7:32" pos:end="7:38">int64_t</name></type> <name pos:start="7:40" pos:end="7:46">bps_max</name></decl></parameter>,
                               <parameter pos:start="8:32" pos:end="8:50"><decl pos:start="8:32" pos:end="8:50"><type pos:start="8:32" pos:end="8:50"><name pos:start="8:32" pos:end="8:35">bool</name></type> <name pos:start="8:37" pos:end="8:50">has_bps_rd_max</name></decl></parameter>,
                               <parameter pos:start="9:32" pos:end="9:49"><decl pos:start="9:32" pos:end="9:49"><type pos:start="9:32" pos:end="9:49"><name pos:start="9:32" pos:end="9:38">int64_t</name></type> <name pos:start="9:40" pos:end="9:49">bps_rd_max</name></decl></parameter>,
                               <parameter pos:start="10:32" pos:end="10:50"><decl pos:start="10:32" pos:end="10:50"><type pos:start="10:32" pos:end="10:50"><name pos:start="10:32" pos:end="10:35">bool</name></type> <name pos:start="10:37" pos:end="10:50">has_bps_wr_max</name></decl></parameter>,
                               <parameter pos:start="11:32" pos:end="11:49"><decl pos:start="11:32" pos:end="11:49"><type pos:start="11:32" pos:end="11:49"><name pos:start="11:32" pos:end="11:38">int64_t</name></type> <name pos:start="11:40" pos:end="11:49">bps_wr_max</name></decl></parameter>,
                               <parameter pos:start="12:32" pos:end="12:48"><decl pos:start="12:32" pos:end="12:48"><type pos:start="12:32" pos:end="12:48"><name pos:start="12:32" pos:end="12:35">bool</name></type> <name pos:start="12:37" pos:end="12:48">has_iops_max</name></decl></parameter>,
                               <parameter pos:start="13:32" pos:end="13:47"><decl pos:start="13:32" pos:end="13:47"><type pos:start="13:32" pos:end="13:47"><name pos:start="13:32" pos:end="13:38">int64_t</name></type> <name pos:start="13:40" pos:end="13:47">iops_max</name></decl></parameter>,
                               <parameter pos:start="14:32" pos:end="14:51"><decl pos:start="14:32" pos:end="14:51"><type pos:start="14:32" pos:end="14:51"><name pos:start="14:32" pos:end="14:35">bool</name></type> <name pos:start="14:37" pos:end="14:51">has_iops_rd_max</name></decl></parameter>,
                               <parameter pos:start="15:32" pos:end="15:50"><decl pos:start="15:32" pos:end="15:50"><type pos:start="15:32" pos:end="15:50"><name pos:start="15:32" pos:end="15:38">int64_t</name></type> <name pos:start="15:40" pos:end="15:50">iops_rd_max</name></decl></parameter>,
                               <parameter pos:start="16:32" pos:end="16:51"><decl pos:start="16:32" pos:end="16:51"><type pos:start="16:32" pos:end="16:51"><name pos:start="16:32" pos:end="16:35">bool</name></type> <name pos:start="16:37" pos:end="16:51">has_iops_wr_max</name></decl></parameter>,
                               <parameter pos:start="17:32" pos:end="17:50"><decl pos:start="17:32" pos:end="17:50"><type pos:start="17:32" pos:end="17:50"><name pos:start="17:32" pos:end="17:38">int64_t</name></type> <name pos:start="17:40" pos:end="17:50">iops_wr_max</name></decl></parameter>,
                               <parameter pos:start="18:32" pos:end="18:49"><decl pos:start="18:32" pos:end="18:49"><type pos:start="18:32" pos:end="18:49"><name pos:start="18:32" pos:end="18:35">bool</name></type> <name pos:start="18:37" pos:end="18:49">has_iops_size</name></decl></parameter>,
                               <parameter pos:start="19:32" pos:end="19:48"><decl pos:start="19:32" pos:end="19:48"><type pos:start="19:32" pos:end="19:48"><name pos:start="19:32" pos:end="19:38">int64_t</name></type> <name pos:start="19:40" pos:end="19:48">iops_size</name></decl></parameter>, <parameter pos:start="19:51" pos:end="19:62"><decl pos:start="19:51" pos:end="19:62"><type pos:start="19:51" pos:end="19:62"><name pos:start="19:51" pos:end="19:55">Error</name> <modifier pos:start="19:57" pos:end="19:57">*</modifier><modifier pos:start="19:58" pos:end="19:58">*</modifier></type><name pos:start="19:59" pos:end="19:62">errp</name></decl></parameter>)</parameter_list>
<block pos:start="20:1" pos:end="70:1">{<block_content pos:start="21:5" pos:end="69:5">
    <decl_stmt pos:start="21:5" pos:end="21:23"><decl pos:start="21:5" pos:end="21:22"><type pos:start="21:5" pos:end="21:18"><name pos:start="21:5" pos:end="21:18">ThrottleConfig</name></type> <name pos:start="21:20" pos:end="21:22">cfg</name></decl>;</decl_stmt>
    <decl_stmt pos:start="22:5" pos:end="22:25"><decl pos:start="22:5" pos:end="22:24"><type pos:start="22:5" pos:end="22:22"><name pos:start="22:5" pos:end="22:20">BlockDriverState</name> <modifier pos:start="22:22" pos:end="22:22">*</modifier></type><name pos:start="22:23" pos:end="22:24">bs</name></decl>;</decl_stmt>
    <decl_stmt pos:start="23:5" pos:end="23:28"><decl pos:start="23:5" pos:end="23:27"><type pos:start="23:5" pos:end="23:16"><name pos:start="23:5" pos:end="23:14">AioContext</name> <modifier pos:start="23:16" pos:end="23:16">*</modifier></type><name pos:start="23:17" pos:end="23:27">aio_context</name></decl>;</decl_stmt>
    <expr_stmt pos:start="24:5" pos:end="24:27"><expr pos:start="24:5" pos:end="24:26"><name pos:start="24:5" pos:end="24:6">bs</name> <operator pos:start="24:8" pos:end="24:8">=</operator> <call pos:start="24:10" pos:end="24:26"><name pos:start="24:10" pos:end="24:18">bdrv_find</name><argument_list pos:start="24:19" pos:end="24:26">(<argument pos:start="24:20" pos:end="24:25"><expr pos:start="24:20" pos:end="24:25"><name pos:start="24:20" pos:end="24:25">device</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
    <if_stmt pos:start="25:5" pos:end="28:5"><if pos:start="25:5" pos:end="28:5">if <condition pos:start="25:8" pos:end="25:12">(<expr pos:start="25:9" pos:end="25:11"><operator pos:start="25:9" pos:end="25:9">!</operator><name pos:start="25:10" pos:end="25:11">bs</name></expr>)</condition> <block pos:start="25:14" pos:end="28:5">{<block_content pos:start="26:9" pos:end="27:15">
        <expr_stmt pos:start="26:9" pos:end="26:55"><expr pos:start="26:9" pos:end="26:54"><call pos:start="26:9" pos:end="26:54"><name pos:start="26:9" pos:end="26:17">error_set</name><argument_list pos:start="26:18" pos:end="26:54">(<argument pos:start="26:19" pos:end="26:22"><expr pos:start="26:19" pos:end="26:22"><name pos:start="26:19" pos:end="26:22">errp</name></expr></argument>, <argument pos:start="26:25" pos:end="26:45"><expr pos:start="26:25" pos:end="26:45"><name pos:start="26:25" pos:end="26:45">QERR_DEVICE_NOT_FOUND</name></expr></argument>, <argument pos:start="26:48" pos:end="26:53"><expr pos:start="26:48" pos:end="26:53"><name pos:start="26:48" pos:end="26:53">device</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
        <return pos:start="27:9" pos:end="27:15">return;</return>
    </block_content>}</block></if></if_stmt>
    <expr_stmt pos:start="29:5" pos:end="29:33"><expr pos:start="29:5" pos:end="29:32"><call pos:start="29:5" pos:end="29:32"><name pos:start="29:5" pos:end="29:10">memset</name><argument_list pos:start="29:11" pos:end="29:32">(<argument pos:start="29:12" pos:end="29:15"><expr pos:start="29:12" pos:end="29:15"><operator pos:start="29:12" pos:end="29:12">&amp;</operator><name pos:start="29:13" pos:end="29:15">cfg</name></expr></argument>, <argument pos:start="29:18" pos:end="29:18"><expr pos:start="29:18" pos:end="29:18"><literal type="number" pos:start="29:18" pos:end="29:18">0</literal></expr></argument>, <argument pos:start="29:21" pos:end="29:31"><expr pos:start="29:21" pos:end="29:31"><sizeof pos:start="29:21" pos:end="29:31">sizeof<argument_list pos:start="29:27" pos:end="29:31">(<argument pos:start="29:28" pos:end="29:30"><expr pos:start="29:28" pos:end="29:30"><name pos:start="29:28" pos:end="29:30">cfg</name></expr></argument>)</argument_list></sizeof></expr></argument>)</argument_list></call></expr>;</expr_stmt>
    <expr_stmt pos:start="30:5" pos:end="30:46"><expr pos:start="30:5" pos:end="30:45"><name pos:start="30:5" pos:end="30:35"><name pos:start="30:5" pos:end="30:7">cfg</name><operator pos:start="30:8" pos:end="30:8">.</operator><name pos:start="30:9" pos:end="30:15">buckets</name><index pos:start="30:16" pos:end="30:35">[<expr pos:start="30:17" pos:end="30:34"><name pos:start="30:17" pos:end="30:34">THROTTLE_BPS_TOTAL</name></expr>]</index></name><operator pos:start="30:36" pos:end="30:36">.</operator><name pos:start="30:37" pos:end="30:39">avg</name> <operator pos:start="30:41" pos:end="30:41">=</operator> <name pos:start="30:43" pos:end="30:45">bps</name></expr>;</expr_stmt>
    <expr_stmt pos:start="31:5" pos:end="31:49"><expr pos:start="31:5" pos:end="31:48"><name pos:start="31:5" pos:end="31:34"><name pos:start="31:5" pos:end="31:7">cfg</name><operator pos:start="31:8" pos:end="31:8">.</operator><name pos:start="31:9" pos:end="31:15">buckets</name><index pos:start="31:16" pos:end="31:34">[<expr pos:start="31:17" pos:end="31:33"><name pos:start="31:17" pos:end="31:33">THROTTLE_BPS_READ</name></expr>]</index></name><operator pos:start="31:35" pos:end="31:35">.</operator><name pos:start="31:36" pos:end="31:38">avg</name>  <operator pos:start="31:41" pos:end="31:41">=</operator> <name pos:start="31:43" pos:end="31:48">bps_rd</name></expr>;</expr_stmt>
    <expr_stmt pos:start="32:5" pos:end="32:49"><expr pos:start="32:5" pos:end="32:48"><name pos:start="32:5" pos:end="32:35"><name pos:start="32:5" pos:end="32:7">cfg</name><operator pos:start="32:8" pos:end="32:8">.</operator><name pos:start="32:9" pos:end="32:15">buckets</name><index pos:start="32:16" pos:end="32:35">[<expr pos:start="32:17" pos:end="32:34"><name pos:start="32:17" pos:end="32:34">THROTTLE_BPS_WRITE</name></expr>]</index></name><operator pos:start="32:36" pos:end="32:36">.</operator><name pos:start="32:37" pos:end="32:39">avg</name> <operator pos:start="32:41" pos:end="32:41">=</operator> <name pos:start="32:43" pos:end="32:48">bps_wr</name></expr>;</expr_stmt>
    <expr_stmt pos:start="33:5" pos:end="33:47"><expr pos:start="33:5" pos:end="33:46"><name pos:start="33:5" pos:end="33:35"><name pos:start="33:5" pos:end="33:7">cfg</name><operator pos:start="33:8" pos:end="33:8">.</operator><name pos:start="33:9" pos:end="33:15">buckets</name><index pos:start="33:16" pos:end="33:35">[<expr pos:start="33:17" pos:end="33:34"><name pos:start="33:17" pos:end="33:34">THROTTLE_OPS_TOTAL</name></expr>]</index></name><operator pos:start="33:36" pos:end="33:36">.</operator><name pos:start="33:37" pos:end="33:39">avg</name> <operator pos:start="33:41" pos:end="33:41">=</operator> <name pos:start="33:43" pos:end="33:46">iops</name></expr>;</expr_stmt>
    <expr_stmt pos:start="34:5" pos:end="34:50"><expr pos:start="34:5" pos:end="34:49"><name pos:start="34:5" pos:end="34:34"><name pos:start="34:5" pos:end="34:7">cfg</name><operator pos:start="34:8" pos:end="34:8">.</operator><name pos:start="34:9" pos:end="34:15">buckets</name><index pos:start="34:16" pos:end="34:34">[<expr pos:start="34:17" pos:end="34:33"><name pos:start="34:17" pos:end="34:33">THROTTLE_OPS_READ</name></expr>]</index></name><operator pos:start="34:35" pos:end="34:35">.</operator><name pos:start="34:36" pos:end="34:38">avg</name>  <operator pos:start="34:41" pos:end="34:41">=</operator> <name pos:start="34:43" pos:end="34:49">iops_rd</name></expr>;</expr_stmt>
    <expr_stmt pos:start="35:5" pos:end="35:50"><expr pos:start="35:5" pos:end="35:49"><name pos:start="35:5" pos:end="35:35"><name pos:start="35:5" pos:end="35:7">cfg</name><operator pos:start="35:8" pos:end="35:8">.</operator><name pos:start="35:9" pos:end="35:15">buckets</name><index pos:start="35:16" pos:end="35:35">[<expr pos:start="35:17" pos:end="35:34"><name pos:start="35:17" pos:end="35:34">THROTTLE_OPS_WRITE</name></expr>]</index></name><operator pos:start="35:36" pos:end="35:36">.</operator><name pos:start="35:37" pos:end="35:39">avg</name> <operator pos:start="35:41" pos:end="35:41">=</operator> <name pos:start="35:43" pos:end="35:49">iops_wr</name></expr>;</expr_stmt>
    <if_stmt pos:start="36:5" pos:end="38:5"><if pos:start="36:5" pos:end="38:5">if <condition pos:start="36:8" pos:end="36:20">(<expr pos:start="36:9" pos:end="36:19"><name pos:start="36:9" pos:end="36:19">has_bps_max</name></expr>)</condition> <block pos:start="36:22" pos:end="38:5">{<block_content pos:start="37:9" pos:end="37:54">
        <expr_stmt pos:start="37:9" pos:end="37:54"><expr pos:start="37:9" pos:end="37:53"><name pos:start="37:9" pos:end="37:39"><name pos:start="37:9" pos:end="37:11">cfg</name><operator pos:start="37:12" pos:end="37:12">.</operator><name pos:start="37:13" pos:end="37:19">buckets</name><index pos:start="37:20" pos:end="37:39">[<expr pos:start="37:21" pos:end="37:38"><name pos:start="37:21" pos:end="37:38">THROTTLE_BPS_TOTAL</name></expr>]</index></name><operator pos:start="37:40" pos:end="37:40">.</operator><name pos:start="37:41" pos:end="37:43">max</name> <operator pos:start="37:45" pos:end="37:45">=</operator> <name pos:start="37:47" pos:end="37:53">bps_max</name></expr>;</expr_stmt>
    </block_content>}</block></if></if_stmt>
    <if_stmt pos:start="39:5" pos:end="41:5"><if pos:start="39:5" pos:end="41:5">if <condition pos:start="39:8" pos:end="39:23">(<expr pos:start="39:9" pos:end="39:22"><name pos:start="39:9" pos:end="39:22">has_bps_rd_max</name></expr>)</condition> <block pos:start="39:25" pos:end="41:5">{<block_content pos:start="40:9" pos:end="40:56">
        <expr_stmt pos:start="40:9" pos:end="40:56"><expr pos:start="40:9" pos:end="40:55"><name pos:start="40:9" pos:end="40:38"><name pos:start="40:9" pos:end="40:11">cfg</name><operator pos:start="40:12" pos:end="40:12">.</operator><name pos:start="40:13" pos:end="40:19">buckets</name><index pos:start="40:20" pos:end="40:38">[<expr pos:start="40:21" pos:end="40:37"><name pos:start="40:21" pos:end="40:37">THROTTLE_BPS_READ</name></expr>]</index></name><operator pos:start="40:39" pos:end="40:39">.</operator><name pos:start="40:40" pos:end="40:42">max</name> <operator pos:start="40:44" pos:end="40:44">=</operator> <name pos:start="40:46" pos:end="40:55">bps_rd_max</name></expr>;</expr_stmt>
    </block_content>}</block></if></if_stmt>
    <if_stmt pos:start="42:5" pos:end="44:5"><if pos:start="42:5" pos:end="44:5">if <condition pos:start="42:8" pos:end="42:23">(<expr pos:start="42:9" pos:end="42:22"><name pos:start="42:9" pos:end="42:22">has_bps_wr_max</name></expr>)</condition> <block pos:start="42:25" pos:end="44:5">{<block_content pos:start="43:9" pos:end="43:57">
        <expr_stmt pos:start="43:9" pos:end="43:57"><expr pos:start="43:9" pos:end="43:56"><name pos:start="43:9" pos:end="43:39"><name pos:start="43:9" pos:end="43:11">cfg</name><operator pos:start="43:12" pos:end="43:12">.</operator><name pos:start="43:13" pos:end="43:19">buckets</name><index pos:start="43:20" pos:end="43:39">[<expr pos:start="43:21" pos:end="43:38"><name pos:start="43:21" pos:end="43:38">THROTTLE_BPS_WRITE</name></expr>]</index></name><operator pos:start="43:40" pos:end="43:40">.</operator><name pos:start="43:41" pos:end="43:43">max</name> <operator pos:start="43:45" pos:end="43:45">=</operator> <name pos:start="43:47" pos:end="43:56">bps_wr_max</name></expr>;</expr_stmt>
    </block_content>}</block></if></if_stmt>
    <if_stmt pos:start="45:5" pos:end="47:5"><if pos:start="45:5" pos:end="47:5">if <condition pos:start="45:8" pos:end="45:21">(<expr pos:start="45:9" pos:end="45:20"><name pos:start="45:9" pos:end="45:20">has_iops_max</name></expr>)</condition> <block pos:start="45:23" pos:end="47:5">{<block_content pos:start="46:9" pos:end="46:55">
        <expr_stmt pos:start="46:9" pos:end="46:55"><expr pos:start="46:9" pos:end="46:54"><name pos:start="46:9" pos:end="46:39"><name pos:start="46:9" pos:end="46:11">cfg</name><operator pos:start="46:12" pos:end="46:12">.</operator><name pos:start="46:13" pos:end="46:19">buckets</name><index pos:start="46:20" pos:end="46:39">[<expr pos:start="46:21" pos:end="46:38"><name pos:start="46:21" pos:end="46:38">THROTTLE_OPS_TOTAL</name></expr>]</index></name><operator pos:start="46:40" pos:end="46:40">.</operator><name pos:start="46:41" pos:end="46:43">max</name> <operator pos:start="46:45" pos:end="46:45">=</operator> <name pos:start="46:47" pos:end="46:54">iops_max</name></expr>;</expr_stmt>
    </block_content>}</block></if></if_stmt>
    <if_stmt pos:start="48:5" pos:end="50:5"><if pos:start="48:5" pos:end="50:5">if <condition pos:start="48:8" pos:end="48:24">(<expr pos:start="48:9" pos:end="48:23"><name pos:start="48:9" pos:end="48:23">has_iops_rd_max</name></expr>)</condition> <block pos:start="48:26" pos:end="50:5">{<block_content pos:start="49:9" pos:end="49:57">
        <expr_stmt pos:start="49:9" pos:end="49:57"><expr pos:start="49:9" pos:end="49:56"><name pos:start="49:9" pos:end="49:38"><name pos:start="49:9" pos:end="49:11">cfg</name><operator pos:start="49:12" pos:end="49:12">.</operator><name pos:start="49:13" pos:end="49:19">buckets</name><index pos:start="49:20" pos:end="49:38">[<expr pos:start="49:21" pos:end="49:37"><name pos:start="49:21" pos:end="49:37">THROTTLE_OPS_READ</name></expr>]</index></name><operator pos:start="49:39" pos:end="49:39">.</operator><name pos:start="49:40" pos:end="49:42">max</name> <operator pos:start="49:44" pos:end="49:44">=</operator> <name pos:start="49:46" pos:end="49:56">iops_rd_max</name></expr>;</expr_stmt>
    </block_content>}</block></if></if_stmt>
    <if_stmt pos:start="51:5" pos:end="53:5"><if pos:start="51:5" pos:end="53:5">if <condition pos:start="51:8" pos:end="51:24">(<expr pos:start="51:9" pos:end="51:23"><name pos:start="51:9" pos:end="51:23">has_iops_wr_max</name></expr>)</condition> <block pos:start="51:26" pos:end="53:5">{<block_content pos:start="52:9" pos:end="52:58">
        <expr_stmt pos:start="52:9" pos:end="52:58"><expr pos:start="52:9" pos:end="52:57"><name pos:start="52:9" pos:end="52:39"><name pos:start="52:9" pos:end="52:11">cfg</name><operator pos:start="52:12" pos:end="52:12">.</operator><name pos:start="52:13" pos:end="52:19">buckets</name><index pos:start="52:20" pos:end="52:39">[<expr pos:start="52:21" pos:end="52:38"><name pos:start="52:21" pos:end="52:38">THROTTLE_OPS_WRITE</name></expr>]</index></name><operator pos:start="52:40" pos:end="52:40">.</operator><name pos:start="52:41" pos:end="52:43">max</name> <operator pos:start="52:45" pos:end="52:45">=</operator> <name pos:start="52:47" pos:end="52:57">iops_wr_max</name></expr>;</expr_stmt>
    </block_content>}</block></if></if_stmt>
    <if_stmt pos:start="54:5" pos:end="56:5"><if pos:start="54:5" pos:end="56:5">if <condition pos:start="54:8" pos:end="54:22">(<expr pos:start="54:9" pos:end="54:21"><name pos:start="54:9" pos:end="54:21">has_iops_size</name></expr>)</condition> <block pos:start="54:24" pos:end="56:5">{<block_content pos:start="55:9" pos:end="55:32">
        <expr_stmt pos:start="55:9" pos:end="55:32"><expr pos:start="55:9" pos:end="55:31"><name pos:start="55:9" pos:end="55:19"><name pos:start="55:9" pos:end="55:11">cfg</name><operator pos:start="55:12" pos:end="55:12">.</operator><name pos:start="55:13" pos:end="55:19">op_size</name></name> <operator pos:start="55:21" pos:end="55:21">=</operator> <name pos:start="55:23" pos:end="55:31">iops_size</name></expr>;</expr_stmt>
    </block_content>}</block></if></if_stmt>
    <if_stmt pos:start="57:5" pos:end="59:5"><if pos:start="57:5" pos:end="59:5">if <condition pos:start="57:8" pos:end="57:43">(<expr pos:start="57:9" pos:end="57:42"><operator pos:start="57:9" pos:end="57:9">!</operator><call pos:start="57:10" pos:end="57:42"><name pos:start="57:10" pos:end="57:30">check_throttle_config</name><argument_list pos:start="57:31" pos:end="57:42">(<argument pos:start="57:32" pos:end="57:35"><expr pos:start="57:32" pos:end="57:35"><operator pos:start="57:32" pos:end="57:32">&amp;</operator><name pos:start="57:33" pos:end="57:35">cfg</name></expr></argument>, <argument pos:start="57:38" pos:end="57:41"><expr pos:start="57:38" pos:end="57:41"><name pos:start="57:38" pos:end="57:41">errp</name></expr></argument>)</argument_list></call></expr>)</condition> <block pos:start="57:45" pos:end="59:5">{<block_content pos:start="58:9" pos:end="58:15">
        <return pos:start="58:9" pos:end="58:15">return;</return>
    </block_content>}</block></if></if_stmt>
    <expr_stmt pos:start="60:5" pos:end="60:43"><expr pos:start="60:5" pos:end="60:42"><name pos:start="60:5" pos:end="60:15">aio_context</name> <operator pos:start="60:17" pos:end="60:17">=</operator> <call pos:start="60:19" pos:end="60:42"><name pos:start="60:19" pos:end="60:38">bdrv_get_aio_context</name><argument_list pos:start="60:39" pos:end="60:42">(<argument pos:start="60:40" pos:end="60:41"><expr pos:start="60:40" pos:end="60:41"><name pos:start="60:40" pos:end="60:41">bs</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
    <expr_stmt pos:start="61:5" pos:end="61:37"><expr pos:start="61:5" pos:end="61:36"><call pos:start="61:5" pos:end="61:36"><name pos:start="61:5" pos:end="61:23">aio_context_acquire</name><argument_list pos:start="61:24" pos:end="61:36">(<argument pos:start="61:25" pos:end="61:35"><expr pos:start="61:25" pos:end="61:35"><name pos:start="61:25" pos:end="61:35">aio_context</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
    <if_stmt pos:start="62:5" pos:end="66:5"><if pos:start="62:5" pos:end="64:5">if <condition pos:start="62:8" pos:end="62:57">(<expr pos:start="62:9" pos:end="62:56"><operator pos:start="62:9" pos:end="62:9">!</operator><name pos:start="62:10" pos:end="62:30"><name pos:start="62:10" pos:end="62:11">bs</name><operator pos:start="62:12" pos:end="62:13">-&gt;</operator><name pos:start="62:14" pos:end="62:30">io_limits_enabled</name></name> <operator pos:start="62:32" pos:end="62:33">&amp;&amp;</operator> <call pos:start="62:35" pos:end="62:56"><name pos:start="62:35" pos:end="62:50">throttle_enabled</name><argument_list pos:start="62:51" pos:end="62:56">(<argument pos:start="62:52" pos:end="62:55"><expr pos:start="62:52" pos:end="62:55"><operator pos:start="62:52" pos:end="62:52">&amp;</operator><name pos:start="62:53" pos:end="62:55">cfg</name></expr></argument>)</argument_list></call></expr>)</condition> <block pos:start="62:59" pos:end="64:5">{<block_content pos:start="63:9" pos:end="63:34">
        <expr_stmt pos:start="63:9" pos:end="63:34"><expr pos:start="63:9" pos:end="63:33"><call pos:start="63:9" pos:end="63:33"><name pos:start="63:9" pos:end="63:29">bdrv_io_limits_enable</name><argument_list pos:start="63:30" pos:end="63:33">(<argument pos:start="63:31" pos:end="63:32"><expr pos:start="63:31" pos:end="63:32"><name pos:start="63:31" pos:end="63:32">bs</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
    </block_content>}</block></if> <if type="elseif" pos:start="64:7" pos:end="66:5">else if <condition pos:start="64:15" pos:end="64:64">(<expr pos:start="64:16" pos:end="64:63"><name pos:start="64:16" pos:end="64:36"><name pos:start="64:16" pos:end="64:17">bs</name><operator pos:start="64:18" pos:end="64:19">-&gt;</operator><name pos:start="64:20" pos:end="64:36">io_limits_enabled</name></name> <operator pos:start="64:38" pos:end="64:39">&amp;&amp;</operator> <operator pos:start="64:41" pos:end="64:41">!</operator><call pos:start="64:42" pos:end="64:63"><name pos:start="64:42" pos:end="64:57">throttle_enabled</name><argument_list pos:start="64:58" pos:end="64:63">(<argument pos:start="64:59" pos:end="64:62"><expr pos:start="64:59" pos:end="64:62"><operator pos:start="64:59" pos:end="64:59">&amp;</operator><name pos:start="64:60" pos:end="64:62">cfg</name></expr></argument>)</argument_list></call></expr>)</condition> <block pos:start="64:66" pos:end="66:5">{<block_content pos:start="65:9" pos:end="65:35">
        <expr_stmt pos:start="65:9" pos:end="65:35"><expr pos:start="65:9" pos:end="65:34"><call pos:start="65:9" pos:end="65:34"><name pos:start="65:9" pos:end="65:30">bdrv_io_limits_disable</name><argument_list pos:start="65:31" pos:end="65:34">(<argument pos:start="65:32" pos:end="65:33"><expr pos:start="65:32" pos:end="65:33"><name pos:start="65:32" pos:end="65:33">bs</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
    </block_content>}</block></if></if_stmt>
    <if_stmt pos:start="67:5" pos:end="69:5"><if pos:start="67:5" pos:end="69:5">if <condition pos:start="67:8" pos:end="67:30">(<expr pos:start="67:9" pos:end="67:29"><name pos:start="67:9" pos:end="67:29"><name pos:start="67:9" pos:end="67:10">bs</name><operator pos:start="67:11" pos:end="67:12">-&gt;</operator><name pos:start="67:13" pos:end="67:29">io_limits_enabled</name></name></expr>)</condition> <block pos:start="67:32" pos:end="69:5">{<block_content pos:start="68:9" pos:end="68:37">
        <expr_stmt pos:start="68:9" pos:end="68:37"><expr pos:start="68:9" pos:end="68:36"><call pos:start="68:9" pos:end="68:36"><name pos:start="68:9" pos:end="68:26">bdrv_set_io_limits</name><argument_list pos:start="68:27" pos:end="68:36">(<argument pos:start="68:28" pos:end="68:29"><expr pos:start="68:28" pos:end="68:29"><name pos:start="68:28" pos:end="68:29">bs</name></expr></argument>, <argument pos:start="68:32" pos:end="68:35"><expr pos:start="68:32" pos:end="68:35"><operator pos:start="68:32" pos:end="68:32">&amp;</operator><name pos:start="68:33" pos:end="68:35">cfg</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
    </block_content>}</block></if></if_stmt>
</block_content>}</block></function></unit>
