<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<unit xmlns="http://www.srcML.org/srcML/src" xmlns:pos="http://www.srcML.org/srcML/position" revision="1.0.0" language="C" filename="dataset/ropgen/aug/1/5145.c" pos:tabs="8"><function pos:start="1:1" pos:end="163:1"><type pos:start="1:1" pos:end="1:10"><specifier pos:start="1:1" pos:end="1:6">static</specifier> <name pos:start="1:8" pos:end="1:10">int</name></type> <name pos:start="1:12" pos:end="1:25">mkv_write_tags</name><parameter_list pos:start="1:26" pos:end="1:45">(<parameter pos:start="1:27" pos:end="1:44"><decl pos:start="1:27" pos:end="1:44"><type pos:start="1:27" pos:end="1:43"><name pos:start="1:27" pos:end="1:41">AVFormatContext</name> <modifier pos:start="1:43" pos:end="1:43">*</modifier></type><name pos:start="1:44" pos:end="1:44">s</name></decl></parameter>)</parameter_list>

<block pos:start="3:1" pos:end="163:1">{<block_content pos:start="5:5" pos:end="161:13">

    <decl_stmt pos:start="5:5" pos:end="5:43"><decl pos:start="5:5" pos:end="5:42"><type pos:start="5:5" pos:end="5:24"><name pos:start="5:5" pos:end="5:22">MatroskaMuxContext</name> <modifier pos:start="5:24" pos:end="5:24">*</modifier></type><name pos:start="5:25" pos:end="5:27">mkv</name> <init pos:start="5:29" pos:end="5:42">= <expr pos:start="5:31" pos:end="5:42"><name pos:start="5:31" pos:end="5:42"><name pos:start="5:31" pos:end="5:31">s</name><operator pos:start="5:32" pos:end="5:33">-&gt;</operator><name pos:start="5:34" pos:end="5:42">priv_data</name></name></expr></init></decl>;</decl_stmt>

    <decl_stmt pos:start="7:5" pos:end="7:15"><decl pos:start="7:5" pos:end="7:9"><type pos:start="7:5" pos:end="7:7"><name pos:start="7:5" pos:end="7:7">int</name></type> <name pos:start="7:9" pos:end="7:9">i</name></decl>, <decl pos:start="7:12" pos:end="7:14"><type ref="prev" pos:start="7:5" pos:end="7:7"/><name pos:start="7:12" pos:end="7:14">ret</name></decl>;</decl_stmt>



    <expr_stmt pos:start="11:5" pos:end="11:56"><expr pos:start="11:5" pos:end="11:55"><call pos:start="11:5" pos:end="11:55"><name pos:start="11:5" pos:end="11:24">ff_metadata_conv_ctx</name><argument_list pos:start="11:25" pos:end="11:55">(<argument pos:start="11:26" pos:end="11:26"><expr pos:start="11:26" pos:end="11:26"><name pos:start="11:26" pos:end="11:26">s</name></expr></argument>, <argument pos:start="11:29" pos:end="11:48"><expr pos:start="11:29" pos:end="11:48"><name pos:start="11:29" pos:end="11:48">ff_mkv_metadata_conv</name></expr></argument>, <argument pos:start="11:51" pos:end="11:54"><expr pos:start="11:51" pos:end="11:54"><name pos:start="11:51" pos:end="11:54">NULL</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>



    <if_stmt pos:start="15:5" pos:end="21:5"><if pos:start="15:5" pos:end="21:5">if <condition pos:start="15:8" pos:end="15:38">(<expr pos:start="15:9" pos:end="15:37"><call pos:start="15:9" pos:end="15:37"><name pos:start="15:9" pos:end="15:21">mkv_check_tag</name><argument_list pos:start="15:22" pos:end="15:37">(<argument pos:start="15:23" pos:end="15:33"><expr pos:start="15:23" pos:end="15:33"><name pos:start="15:23" pos:end="15:33"><name pos:start="15:23" pos:end="15:23">s</name><operator pos:start="15:24" pos:end="15:25">-&gt;</operator><name pos:start="15:26" pos:end="15:33">metadata</name></name></expr></argument>, <argument pos:start="15:36" pos:end="15:36"><expr pos:start="15:36" pos:end="15:36"><literal type="number" pos:start="15:36" pos:end="15:36">0</literal></expr></argument>)</argument_list></call></expr>)</condition> <block pos:start="15:40" pos:end="21:5">{<block_content pos:start="17:9" pos:end="19:32">

        <expr_stmt pos:start="17:9" pos:end="17:62"><expr pos:start="17:9" pos:end="17:61"><name pos:start="17:9" pos:end="17:11">ret</name> <operator pos:start="17:13" pos:end="17:13">=</operator> <call pos:start="17:15" pos:end="17:61"><name pos:start="17:15" pos:end="17:27">mkv_write_tag</name><argument_list pos:start="17:28" pos:end="17:61">(<argument pos:start="17:29" pos:end="17:29"><expr pos:start="17:29" pos:end="17:29"><name pos:start="17:29" pos:end="17:29">s</name></expr></argument>, <argument pos:start="17:32" pos:end="17:42"><expr pos:start="17:32" pos:end="17:42"><name pos:start="17:32" pos:end="17:42"><name pos:start="17:32" pos:end="17:32">s</name><operator pos:start="17:33" pos:end="17:34">-&gt;</operator><name pos:start="17:35" pos:end="17:42">metadata</name></name></expr></argument>, <argument pos:start="17:45" pos:end="17:45"><expr pos:start="17:45" pos:end="17:45"><literal type="number" pos:start="17:45" pos:end="17:45">0</literal></expr></argument>, <argument pos:start="17:48" pos:end="17:48"><expr pos:start="17:48" pos:end="17:48"><literal type="number" pos:start="17:48" pos:end="17:48">0</literal></expr></argument>, <argument pos:start="17:51" pos:end="17:60"><expr pos:start="17:51" pos:end="17:60"><operator pos:start="17:51" pos:end="17:51">&amp;</operator><name pos:start="17:52" pos:end="17:60"><name pos:start="17:52" pos:end="17:54">mkv</name><operator pos:start="17:55" pos:end="17:56">-&gt;</operator><name pos:start="17:57" pos:end="17:60">tags</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <if_stmt pos:start="19:9" pos:end="19:32"><if pos:start="19:9" pos:end="19:32">if <condition pos:start="19:12" pos:end="19:20">(<expr pos:start="19:13" pos:end="19:19"><name pos:start="19:13" pos:end="19:15">ret</name> <operator pos:start="19:17" pos:end="19:17">&lt;</operator> <literal type="number" pos:start="19:19" pos:end="19:19">0</literal></expr>)</condition><block type="pseudo" pos:start="19:22" pos:end="19:32"><block_content pos:start="19:22" pos:end="19:32"> <return pos:start="19:22" pos:end="19:32">return <expr pos:start="19:29" pos:end="19:31"><name pos:start="19:29" pos:end="19:31">ret</name></expr>;</return></block_content></block></if></if_stmt>

    </block_content>}</block></if></if_stmt>



    <for pos:start="25:5" pos:end="47:5">for <control pos:start="25:9" pos:end="25:39">(<init pos:start="25:10" pos:end="25:15"><expr pos:start="25:10" pos:end="25:14"><name pos:start="25:10" pos:end="25:10">i</name> <operator pos:start="25:12" pos:end="25:12">=</operator> <literal type="number" pos:start="25:14" pos:end="25:14">0</literal></expr>;</init> <condition pos:start="25:17" pos:end="25:34"><expr pos:start="25:17" pos:end="25:33"><name pos:start="25:17" pos:end="25:17">i</name> <operator pos:start="25:19" pos:end="25:19">&lt;</operator> <name pos:start="25:21" pos:end="25:33"><name pos:start="25:21" pos:end="25:21">s</name><operator pos:start="25:22" pos:end="25:23">-&gt;</operator><name pos:start="25:24" pos:end="25:33">nb_streams</name></name></expr>;</condition> <incr pos:start="25:36" pos:end="25:38"><expr pos:start="25:36" pos:end="25:38"><name pos:start="25:36" pos:end="25:36">i</name><operator pos:start="25:37" pos:end="25:38">++</operator></expr></incr>)</control> <block pos:start="25:41" pos:end="47:5">{<block_content pos:start="27:9" pos:end="45:32">

        <decl_stmt pos:start="27:9" pos:end="27:37"><decl pos:start="27:9" pos:end="27:36"><type pos:start="27:9" pos:end="27:18"><name pos:start="27:9" pos:end="27:16">AVStream</name> <modifier pos:start="27:18" pos:end="27:18">*</modifier></type><name pos:start="27:19" pos:end="27:20">st</name> <init pos:start="27:22" pos:end="27:36">= <expr pos:start="27:24" pos:end="27:36"><name pos:start="27:24" pos:end="27:36"><name pos:start="27:24" pos:end="27:24">s</name><operator pos:start="27:25" pos:end="27:26">-&gt;</operator><name pos:start="27:27" pos:end="27:33">streams</name><index pos:start="27:34" pos:end="27:36">[<expr pos:start="27:35" pos:end="27:35"><name pos:start="27:35" pos:end="27:35">i</name></expr>]</index></name></expr></init></decl>;</decl_stmt>



        <if_stmt pos:start="31:9" pos:end="33:21"><if pos:start="31:9" pos:end="33:21">if <condition pos:start="31:12" pos:end="31:64">(<expr pos:start="31:13" pos:end="31:63"><name pos:start="31:13" pos:end="31:36"><name pos:start="31:13" pos:end="31:14">st</name><operator pos:start="31:15" pos:end="31:16">-&gt;</operator><name pos:start="31:17" pos:end="31:24">codecpar</name><operator pos:start="31:25" pos:end="31:26">-&gt;</operator><name pos:start="31:27" pos:end="31:36">codec_type</name></name> <operator pos:start="31:38" pos:end="31:39">==</operator> <name pos:start="31:41" pos:end="31:63">AVMEDIA_TYPE_ATTACHMENT</name></expr>)</condition><block type="pseudo" pos:start="33:13" pos:end="33:21"><block_content pos:start="33:13" pos:end="33:21">

            <continue pos:start="33:13" pos:end="33:21">continue;</continue></block_content></block></if></if_stmt>



        <if_stmt pos:start="37:9" pos:end="39:21"><if pos:start="37:9" pos:end="39:21">if <condition pos:start="37:12" pos:end="37:74">(<expr pos:start="37:13" pos:end="37:73"><operator pos:start="37:13" pos:end="37:13">!</operator><call pos:start="37:14" pos:end="37:73"><name pos:start="37:14" pos:end="37:26">mkv_check_tag</name><argument_list pos:start="37:27" pos:end="37:73">(<argument pos:start="37:28" pos:end="37:39"><expr pos:start="37:28" pos:end="37:39"><name pos:start="37:28" pos:end="37:39"><name pos:start="37:28" pos:end="37:29">st</name><operator pos:start="37:30" pos:end="37:31">-&gt;</operator><name pos:start="37:32" pos:end="37:39">metadata</name></name></expr></argument>, <argument pos:start="37:42" pos:end="37:72"><expr pos:start="37:42" pos:end="37:72"><name pos:start="37:42" pos:end="37:72">MATROSKA_ID_TAGTARGETS_TRACKUID</name></expr></argument>)</argument_list></call></expr>)</condition><block type="pseudo" pos:start="39:13" pos:end="39:21"><block_content pos:start="39:13" pos:end="39:21">

            <continue pos:start="39:13" pos:end="39:21">continue;</continue></block_content></block></if></if_stmt>



        <expr_stmt pos:start="43:9" pos:end="43:97"><expr pos:start="43:9" pos:end="43:96"><name pos:start="43:9" pos:end="43:11">ret</name> <operator pos:start="43:13" pos:end="43:13">=</operator> <call pos:start="43:15" pos:end="43:96"><name pos:start="43:15" pos:end="43:27">mkv_write_tag</name><argument_list pos:start="43:28" pos:end="43:96">(<argument pos:start="43:29" pos:end="43:29"><expr pos:start="43:29" pos:end="43:29"><name pos:start="43:29" pos:end="43:29">s</name></expr></argument>, <argument pos:start="43:32" pos:end="43:43"><expr pos:start="43:32" pos:end="43:43"><name pos:start="43:32" pos:end="43:43"><name pos:start="43:32" pos:end="43:33">st</name><operator pos:start="43:34" pos:end="43:35">-&gt;</operator><name pos:start="43:36" pos:end="43:43">metadata</name></name></expr></argument>, <argument pos:start="43:46" pos:end="43:76"><expr pos:start="43:46" pos:end="43:76"><name pos:start="43:46" pos:end="43:76">MATROSKA_ID_TAGTARGETS_TRACKUID</name></expr></argument>, <argument pos:start="43:79" pos:end="43:83"><expr pos:start="43:79" pos:end="43:83"><name pos:start="43:79" pos:end="43:79">i</name> <operator pos:start="43:81" pos:end="43:81">+</operator> <literal type="number" pos:start="43:83" pos:end="43:83">1</literal></expr></argument>, <argument pos:start="43:86" pos:end="43:95"><expr pos:start="43:86" pos:end="43:95"><operator pos:start="43:86" pos:end="43:86">&amp;</operator><name pos:start="43:87" pos:end="43:95"><name pos:start="43:87" pos:end="43:89">mkv</name><operator pos:start="43:90" pos:end="43:91">-&gt;</operator><name pos:start="43:92" pos:end="43:95">tags</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <if_stmt pos:start="45:9" pos:end="45:32"><if pos:start="45:9" pos:end="45:32">if <condition pos:start="45:12" pos:end="45:20">(<expr pos:start="45:13" pos:end="45:19"><name pos:start="45:13" pos:end="45:15">ret</name> <operator pos:start="45:17" pos:end="45:17">&lt;</operator> <literal type="number" pos:start="45:19" pos:end="45:19">0</literal></expr>)</condition><block type="pseudo" pos:start="45:22" pos:end="45:32"><block_content pos:start="45:22" pos:end="45:32"> <return pos:start="45:22" pos:end="45:32">return <expr pos:start="45:29" pos:end="45:31"><name pos:start="45:29" pos:end="45:31">ret</name></expr>;</return></block_content></block></if></if_stmt>

    </block_content>}</block></for>



    <if_stmt pos:start="51:5" pos:end="97:5"><if pos:start="51:5" pos:end="97:5">if <condition pos:start="51:8" pos:end="51:41">(<expr pos:start="51:9" pos:end="51:40"><name pos:start="51:9" pos:end="51:23"><name pos:start="51:9" pos:end="51:9">s</name><operator pos:start="51:10" pos:end="51:11">-&gt;</operator><name pos:start="51:12" pos:end="51:13">pb</name><operator pos:start="51:14" pos:end="51:15">-&gt;</operator><name pos:start="51:16" pos:end="51:23">seekable</name></name> <operator pos:start="51:25" pos:end="51:26">&amp;&amp;</operator> <operator pos:start="51:28" pos:end="51:28">!</operator><name pos:start="51:29" pos:end="51:40"><name pos:start="51:29" pos:end="51:31">mkv</name><operator pos:start="51:32" pos:end="51:33">-&gt;</operator><name pos:start="51:34" pos:end="51:40">is_live</name></name></expr>)</condition> <block pos:start="51:43" pos:end="97:5">{<block_content pos:start="53:9" pos:end="95:9">

        <for pos:start="53:9" pos:end="95:9">for <control pos:start="53:13" pos:end="53:43">(<init pos:start="53:14" pos:end="53:19"><expr pos:start="53:14" pos:end="53:18"><name pos:start="53:14" pos:end="53:14">i</name> <operator pos:start="53:16" pos:end="53:16">=</operator> <literal type="number" pos:start="53:18" pos:end="53:18">0</literal></expr>;</init> <condition pos:start="53:21" pos:end="53:38"><expr pos:start="53:21" pos:end="53:37"><name pos:start="53:21" pos:end="53:21">i</name> <operator pos:start="53:23" pos:end="53:23">&lt;</operator> <name pos:start="53:25" pos:end="53:37"><name pos:start="53:25" pos:end="53:25">s</name><operator pos:start="53:26" pos:end="53:27">-&gt;</operator><name pos:start="53:28" pos:end="53:37">nb_streams</name></name></expr>;</condition> <incr pos:start="53:40" pos:end="53:42"><expr pos:start="53:40" pos:end="53:42"><name pos:start="53:40" pos:end="53:40">i</name><operator pos:start="53:41" pos:end="53:42">++</operator></expr></incr>)</control> <block pos:start="53:45" pos:end="95:9">{<block_content pos:start="55:13" pos:end="93:44">

            <decl_stmt pos:start="55:13" pos:end="55:28"><decl pos:start="55:13" pos:end="55:27"><type pos:start="55:13" pos:end="55:25"><name pos:start="55:13" pos:end="55:23">AVIOContext</name> <modifier pos:start="55:25" pos:end="55:25">*</modifier></type><name pos:start="55:26" pos:end="55:27">pb</name></decl>;</decl_stmt>

            <decl_stmt pos:start="57:13" pos:end="57:41"><decl pos:start="57:13" pos:end="57:40"><type pos:start="57:13" pos:end="57:22"><name pos:start="57:13" pos:end="57:20">AVStream</name> <modifier pos:start="57:22" pos:end="57:22">*</modifier></type><name pos:start="57:23" pos:end="57:24">st</name> <init pos:start="57:26" pos:end="57:40">= <expr pos:start="57:28" pos:end="57:40"><name pos:start="57:28" pos:end="57:40"><name pos:start="57:28" pos:end="57:28">s</name><operator pos:start="57:29" pos:end="57:30">-&gt;</operator><name pos:start="57:31" pos:end="57:37">streams</name><index pos:start="57:38" pos:end="57:40">[<expr pos:start="57:39" pos:end="57:39"><name pos:start="57:39" pos:end="57:39">i</name></expr>]</index></name></expr></init></decl>;</decl_stmt>

            <decl_stmt pos:start="59:13" pos:end="59:35"><decl pos:start="59:13" pos:end="59:34"><type pos:start="59:13" pos:end="59:23"><name pos:start="59:13" pos:end="59:23">ebml_master</name></type> <name pos:start="59:25" pos:end="59:34">tag_target</name></decl>;</decl_stmt>

            <decl_stmt pos:start="61:13" pos:end="61:28"><decl pos:start="61:13" pos:end="61:27"><type pos:start="61:13" pos:end="61:23"><name pos:start="61:13" pos:end="61:23">ebml_master</name></type> <name pos:start="61:25" pos:end="61:27">tag</name></decl>;</decl_stmt>



            <if_stmt pos:start="65:13" pos:end="67:25"><if pos:start="65:13" pos:end="67:25">if <condition pos:start="65:16" pos:end="65:68">(<expr pos:start="65:17" pos:end="65:67"><name pos:start="65:17" pos:end="65:40"><name pos:start="65:17" pos:end="65:18">st</name><operator pos:start="65:19" pos:end="65:20">-&gt;</operator><name pos:start="65:21" pos:end="65:28">codecpar</name><operator pos:start="65:29" pos:end="65:30">-&gt;</operator><name pos:start="65:31" pos:end="65:40">codec_type</name></name> <operator pos:start="65:42" pos:end="65:43">==</operator> <name pos:start="65:45" pos:end="65:67">AVMEDIA_TYPE_ATTACHMENT</name></expr>)</condition><block type="pseudo" pos:start="67:17" pos:end="67:25"><block_content pos:start="67:17" pos:end="67:25">

                <continue pos:start="67:17" pos:end="67:25">continue;</continue></block_content></block></if></if_stmt>



            <expr_stmt pos:start="71:13" pos:end="71:102"><expr pos:start="71:13" pos:end="71:101"><call pos:start="71:13" pos:end="71:101"><name pos:start="71:13" pos:end="71:33">mkv_write_tag_targets</name><argument_list pos:start="71:34" pos:end="71:101">(<argument pos:start="71:35" pos:end="71:35"><expr pos:start="71:35" pos:end="71:35"><name pos:start="71:35" pos:end="71:35">s</name></expr></argument>, <argument pos:start="71:38" pos:end="71:68"><expr pos:start="71:38" pos:end="71:68"><name pos:start="71:38" pos:end="71:68">MATROSKA_ID_TAGTARGETS_TRACKUID</name></expr></argument>, <argument pos:start="71:71" pos:end="71:75"><expr pos:start="71:71" pos:end="71:75"><name pos:start="71:71" pos:end="71:71">i</name> <operator pos:start="71:73" pos:end="71:73">+</operator> <literal type="number" pos:start="71:75" pos:end="71:75">1</literal></expr></argument>, <argument pos:start="71:78" pos:end="71:87"><expr pos:start="71:78" pos:end="71:87"><operator pos:start="71:78" pos:end="71:78">&amp;</operator><name pos:start="71:79" pos:end="71:87"><name pos:start="71:79" pos:end="71:81">mkv</name><operator pos:start="71:82" pos:end="71:83">-&gt;</operator><name pos:start="71:84" pos:end="71:87">tags</name></name></expr></argument>, <argument pos:start="71:90" pos:end="71:100"><expr pos:start="71:90" pos:end="71:100"><operator pos:start="71:90" pos:end="71:90">&amp;</operator><name pos:start="71:91" pos:end="71:100">tag_target</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

            <expr_stmt pos:start="73:13" pos:end="73:30"><expr pos:start="73:13" pos:end="73:29"><name pos:start="73:13" pos:end="73:14">pb</name> <operator pos:start="73:16" pos:end="73:16">=</operator> <name pos:start="73:18" pos:end="73:29"><name pos:start="73:18" pos:end="73:20">mkv</name><operator pos:start="73:21" pos:end="73:22">-&gt;</operator><name pos:start="73:23" pos:end="73:29">tags_bc</name></name></expr>;</expr_stmt>



            <expr_stmt pos:start="77:13" pos:end="77:66"><expr pos:start="77:13" pos:end="77:65"><name pos:start="77:13" pos:end="77:15">tag</name> <operator pos:start="77:17" pos:end="77:17">=</operator> <call pos:start="77:19" pos:end="77:65"><name pos:start="77:19" pos:end="77:35">start_ebml_master</name><argument_list pos:start="77:36" pos:end="77:65">(<argument pos:start="77:37" pos:end="77:38"><expr pos:start="77:37" pos:end="77:38"><name pos:start="77:37" pos:end="77:38">pb</name></expr></argument>, <argument pos:start="77:41" pos:end="77:61"><expr pos:start="77:41" pos:end="77:61"><name pos:start="77:41" pos:end="77:61">MATROSKA_ID_SIMPLETAG</name></expr></argument>, <argument pos:start="77:64" pos:end="77:64"><expr pos:start="77:64" pos:end="77:64"><literal type="number" pos:start="77:64" pos:end="77:64">0</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

            <expr_stmt pos:start="79:13" pos:end="79:65"><expr pos:start="79:13" pos:end="79:64"><call pos:start="79:13" pos:end="79:64"><name pos:start="79:13" pos:end="79:27">put_ebml_string</name><argument_list pos:start="79:28" pos:end="79:64">(<argument pos:start="79:29" pos:end="79:30"><expr pos:start="79:29" pos:end="79:30"><name pos:start="79:29" pos:end="79:30">pb</name></expr></argument>, <argument pos:start="79:33" pos:end="79:51"><expr pos:start="79:33" pos:end="79:51"><name pos:start="79:33" pos:end="79:51">MATROSKA_ID_TAGNAME</name></expr></argument>, <argument pos:start="79:54" pos:end="79:63"><expr pos:start="79:54" pos:end="79:63"><literal type="string" pos:start="79:54" pos:end="79:63">"DURATION"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

            <expr_stmt pos:start="81:13" pos:end="81:60"><expr pos:start="81:13" pos:end="81:59"><name pos:start="81:13" pos:end="81:43"><name pos:start="81:13" pos:end="81:15">mkv</name><operator pos:start="81:16" pos:end="81:17">-&gt;</operator><name pos:start="81:18" pos:end="81:40">stream_duration_offsets</name><index pos:start="81:41" pos:end="81:43">[<expr pos:start="81:42" pos:end="81:42"><name pos:start="81:42" pos:end="81:42">i</name></expr>]</index></name> <operator pos:start="81:45" pos:end="81:45">=</operator> <call pos:start="81:47" pos:end="81:59"><name pos:start="81:47" pos:end="81:55">avio_tell</name><argument_list pos:start="81:56" pos:end="81:59">(<argument pos:start="81:57" pos:end="81:58"><expr pos:start="81:57" pos:end="81:58"><name pos:start="81:57" pos:end="81:58">pb</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>



            <comment type="line" pos:start="85:13" pos:end="85:67">// Reserve space to write duration as a 20-byte string.</comment>

            <comment type="line" pos:start="87:13" pos:end="87:54">// 2 (ebml id) + 1 (data size) + 20 (data)</comment>

            <expr_stmt pos:start="89:13" pos:end="89:34"><expr pos:start="89:13" pos:end="89:33"><call pos:start="89:13" pos:end="89:33"><name pos:start="89:13" pos:end="89:25">put_ebml_void</name><argument_list pos:start="89:26" pos:end="89:33">(<argument pos:start="89:27" pos:end="89:28"><expr pos:start="89:27" pos:end="89:28"><name pos:start="89:27" pos:end="89:28">pb</name></expr></argument>, <argument pos:start="89:31" pos:end="89:32"><expr pos:start="89:31" pos:end="89:32"><literal type="number" pos:start="89:31" pos:end="89:32">23</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

            <expr_stmt pos:start="91:13" pos:end="91:37"><expr pos:start="91:13" pos:end="91:36"><call pos:start="91:13" pos:end="91:36"><name pos:start="91:13" pos:end="91:27">end_ebml_master</name><argument_list pos:start="91:28" pos:end="91:36">(<argument pos:start="91:29" pos:end="91:30"><expr pos:start="91:29" pos:end="91:30"><name pos:start="91:29" pos:end="91:30">pb</name></expr></argument>, <argument pos:start="91:33" pos:end="91:35"><expr pos:start="91:33" pos:end="91:35"><name pos:start="91:33" pos:end="91:35">tag</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

            <expr_stmt pos:start="93:13" pos:end="93:44"><expr pos:start="93:13" pos:end="93:43"><call pos:start="93:13" pos:end="93:43"><name pos:start="93:13" pos:end="93:27">end_ebml_master</name><argument_list pos:start="93:28" pos:end="93:43">(<argument pos:start="93:29" pos:end="93:30"><expr pos:start="93:29" pos:end="93:30"><name pos:start="93:29" pos:end="93:30">pb</name></expr></argument>, <argument pos:start="93:33" pos:end="93:42"><expr pos:start="93:33" pos:end="93:42"><name pos:start="93:33" pos:end="93:42">tag_target</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        </block_content>}</block></for>

    </block_content>}</block></if></if_stmt>



    <for pos:start="101:5" pos:end="117:5">for <control pos:start="101:9" pos:end="101:40">(<init pos:start="101:10" pos:end="101:15"><expr pos:start="101:10" pos:end="101:14"><name pos:start="101:10" pos:end="101:10">i</name> <operator pos:start="101:12" pos:end="101:12">=</operator> <literal type="number" pos:start="101:14" pos:end="101:14">0</literal></expr>;</init> <condition pos:start="101:17" pos:end="101:35"><expr pos:start="101:17" pos:end="101:34"><name pos:start="101:17" pos:end="101:17">i</name> <operator pos:start="101:19" pos:end="101:19">&lt;</operator> <name pos:start="101:21" pos:end="101:34"><name pos:start="101:21" pos:end="101:21">s</name><operator pos:start="101:22" pos:end="101:23">-&gt;</operator><name pos:start="101:24" pos:end="101:34">nb_chapters</name></name></expr>;</condition> <incr pos:start="101:37" pos:end="101:39"><expr pos:start="101:37" pos:end="101:39"><name pos:start="101:37" pos:end="101:37">i</name><operator pos:start="101:38" pos:end="101:39">++</operator></expr></incr>)</control> <block pos:start="101:42" pos:end="117:5">{<block_content pos:start="103:9" pos:end="115:32">

        <decl_stmt pos:start="103:9" pos:end="103:39"><decl pos:start="103:9" pos:end="103:38"><type pos:start="103:9" pos:end="103:19"><name pos:start="103:9" pos:end="103:17">AVChapter</name> <modifier pos:start="103:19" pos:end="103:19">*</modifier></type><name pos:start="103:20" pos:end="103:21">ch</name> <init pos:start="103:23" pos:end="103:38">= <expr pos:start="103:25" pos:end="103:38"><name pos:start="103:25" pos:end="103:38"><name pos:start="103:25" pos:end="103:25">s</name><operator pos:start="103:26" pos:end="103:27">-&gt;</operator><name pos:start="103:28" pos:end="103:35">chapters</name><index pos:start="103:36" pos:end="103:38">[<expr pos:start="103:37" pos:end="103:37"><name pos:start="103:37" pos:end="103:37">i</name></expr>]</index></name></expr></init></decl>;</decl_stmt>



        <if_stmt pos:start="107:9" pos:end="109:21"><if pos:start="107:9" pos:end="109:21">if <condition pos:start="107:12" pos:end="107:76">(<expr pos:start="107:13" pos:end="107:75"><operator pos:start="107:13" pos:end="107:13">!</operator><call pos:start="107:14" pos:end="107:75"><name pos:start="107:14" pos:end="107:26">mkv_check_tag</name><argument_list pos:start="107:27" pos:end="107:75">(<argument pos:start="107:28" pos:end="107:39"><expr pos:start="107:28" pos:end="107:39"><name pos:start="107:28" pos:end="107:39"><name pos:start="107:28" pos:end="107:29">ch</name><operator pos:start="107:30" pos:end="107:31">-&gt;</operator><name pos:start="107:32" pos:end="107:39">metadata</name></name></expr></argument>, <argument pos:start="107:42" pos:end="107:74"><expr pos:start="107:42" pos:end="107:74"><name pos:start="107:42" pos:end="107:74">MATROSKA_ID_TAGTARGETS_CHAPTERUID</name></expr></argument>)</argument_list></call></expr>)</condition><block type="pseudo" pos:start="109:13" pos:end="109:21"><block_content pos:start="109:13" pos:end="109:21">

            <continue pos:start="109:13" pos:end="109:21">continue;</continue></block_content></block></if></if_stmt>



        <expr_stmt pos:start="113:9" pos:end="113:125"><expr pos:start="113:9" pos:end="113:124"><name pos:start="113:9" pos:end="113:11">ret</name> <operator pos:start="113:13" pos:end="113:13">=</operator> <call pos:start="113:15" pos:end="113:124"><name pos:start="113:15" pos:end="113:27">mkv_write_tag</name><argument_list pos:start="113:28" pos:end="113:124">(<argument pos:start="113:29" pos:end="113:29"><expr pos:start="113:29" pos:end="113:29"><name pos:start="113:29" pos:end="113:29">s</name></expr></argument>, <argument pos:start="113:32" pos:end="113:43"><expr pos:start="113:32" pos:end="113:43"><name pos:start="113:32" pos:end="113:43"><name pos:start="113:32" pos:end="113:33">ch</name><operator pos:start="113:34" pos:end="113:35">-&gt;</operator><name pos:start="113:36" pos:end="113:43">metadata</name></name></expr></argument>, <argument pos:start="113:46" pos:end="113:78"><expr pos:start="113:46" pos:end="113:78"><name pos:start="113:46" pos:end="113:78">MATROSKA_ID_TAGTARGETS_CHAPTERUID</name></expr></argument>, <argument pos:start="113:81" pos:end="113:111"><expr pos:start="113:81" pos:end="113:111"><name pos:start="113:81" pos:end="113:86"><name pos:start="113:81" pos:end="113:82">ch</name><operator pos:start="113:83" pos:end="113:84">-&gt;</operator><name pos:start="113:85" pos:end="113:86">id</name></name> <operator pos:start="113:88" pos:end="113:88">+</operator> <name pos:start="113:90" pos:end="113:111"><name pos:start="113:90" pos:end="113:92">mkv</name><operator pos:start="113:93" pos:end="113:94">-&gt;</operator><name pos:start="113:95" pos:end="113:111">chapter_id_offset</name></name></expr></argument>, <argument pos:start="113:114" pos:end="113:123"><expr pos:start="113:114" pos:end="113:123"><operator pos:start="113:114" pos:end="113:114">&amp;</operator><name pos:start="113:115" pos:end="113:123"><name pos:start="113:115" pos:end="113:117">mkv</name><operator pos:start="113:118" pos:end="113:119">-&gt;</operator><name pos:start="113:120" pos:end="113:123">tags</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <if_stmt pos:start="115:9" pos:end="115:32"><if pos:start="115:9" pos:end="115:32">if <condition pos:start="115:12" pos:end="115:20">(<expr pos:start="115:13" pos:end="115:19"><name pos:start="115:13" pos:end="115:15">ret</name> <operator pos:start="115:17" pos:end="115:17">&lt;</operator> <literal type="number" pos:start="115:19" pos:end="115:19">0</literal></expr>)</condition><block type="pseudo" pos:start="115:22" pos:end="115:32"><block_content pos:start="115:22" pos:end="115:32"> <return pos:start="115:22" pos:end="115:32">return <expr pos:start="115:29" pos:end="115:31"><name pos:start="115:29" pos:end="115:31">ret</name></expr>;</return></block_content></block></if></if_stmt>

    </block_content>}</block></for>



    <if_stmt pos:start="121:5" pos:end="145:5"><if pos:start="121:5" pos:end="145:5">if <condition pos:start="121:8" pos:end="121:30">(<expr pos:start="121:9" pos:end="121:29"><name pos:start="121:9" pos:end="121:29"><name pos:start="121:9" pos:end="121:11">mkv</name><operator pos:start="121:12" pos:end="121:13">-&gt;</operator><name pos:start="121:14" pos:end="121:29">have_attachments</name></name></expr>)</condition> <block pos:start="121:32" pos:end="145:5">{<block_content pos:start="123:9" pos:end="143:9">

        <for pos:start="123:9" pos:end="143:9">for <control pos:start="123:13" pos:end="123:59">(<init pos:start="123:14" pos:end="123:19"><expr pos:start="123:14" pos:end="123:18"><name pos:start="123:14" pos:end="123:14">i</name> <operator pos:start="123:16" pos:end="123:16">=</operator> <literal type="number" pos:start="123:18" pos:end="123:18">0</literal></expr>;</init> <condition pos:start="123:21" pos:end="123:54"><expr pos:start="123:21" pos:end="123:53"><name pos:start="123:21" pos:end="123:21">i</name> <operator pos:start="123:23" pos:end="123:23">&lt;</operator> <name pos:start="123:25" pos:end="123:53"><name pos:start="123:25" pos:end="123:27">mkv</name><operator pos:start="123:28" pos:end="123:29">-&gt;</operator><name pos:start="123:30" pos:end="123:40">attachments</name><operator pos:start="123:41" pos:end="123:42">-&gt;</operator><name pos:start="123:43" pos:end="123:53">num_entries</name></name></expr>;</condition> <incr pos:start="123:56" pos:end="123:58"><expr pos:start="123:56" pos:end="123:58"><name pos:start="123:56" pos:end="123:56">i</name><operator pos:start="123:57" pos:end="123:58">++</operator></expr></incr>)</control> <block pos:start="123:61" pos:end="143:9">{<block_content pos:start="125:13" pos:end="141:27">

            <decl_stmt pos:start="125:13" pos:end="125:71"><decl pos:start="125:13" pos:end="125:70"><type pos:start="125:13" pos:end="125:28"><name pos:start="125:13" pos:end="125:26">mkv_attachment</name> <modifier pos:start="125:28" pos:end="125:28">*</modifier></type><name pos:start="125:29" pos:end="125:38">attachment</name> <init pos:start="125:40" pos:end="125:70">= <expr pos:start="125:42" pos:end="125:70"><operator pos:start="125:42" pos:end="125:42">&amp;</operator><name pos:start="125:43" pos:end="125:70"><name pos:start="125:43" pos:end="125:45">mkv</name><operator pos:start="125:46" pos:end="125:47">-&gt;</operator><name pos:start="125:48" pos:end="125:58">attachments</name><operator pos:start="125:59" pos:end="125:60">-&gt;</operator><name pos:start="125:61" pos:end="125:67">entries</name><index pos:start="125:68" pos:end="125:70">[<expr pos:start="125:69" pos:end="125:69"><name pos:start="125:69" pos:end="125:69">i</name></expr>]</index></name></expr></init></decl>;</decl_stmt>

            <decl_stmt pos:start="127:13" pos:end="127:62"><decl pos:start="127:13" pos:end="127:61"><type pos:start="127:13" pos:end="127:22"><name pos:start="127:13" pos:end="127:20">AVStream</name> <modifier pos:start="127:22" pos:end="127:22">*</modifier></type><name pos:start="127:23" pos:end="127:24">st</name> <init pos:start="127:26" pos:end="127:61">= <expr pos:start="127:28" pos:end="127:61"><name pos:start="127:28" pos:end="127:61"><name pos:start="127:28" pos:end="127:28">s</name><operator pos:start="127:29" pos:end="127:30">-&gt;</operator><name pos:start="127:31" pos:end="127:37">streams</name><index pos:start="127:38" pos:end="127:61">[<expr pos:start="127:39" pos:end="127:60"><name pos:start="127:39" pos:end="127:60"><name pos:start="127:39" pos:end="127:48">attachment</name><operator pos:start="127:49" pos:end="127:50">-&gt;</operator><name pos:start="127:51" pos:end="127:60">stream_idx</name></name></expr>]</index></name></expr></init></decl>;</decl_stmt>



            <if_stmt pos:start="131:13" pos:end="133:25"><if pos:start="131:13" pos:end="133:25">if <condition pos:start="131:16" pos:end="131:79">(<expr pos:start="131:17" pos:end="131:78"><operator pos:start="131:17" pos:end="131:17">!</operator><call pos:start="131:18" pos:end="131:78"><name pos:start="131:18" pos:end="131:30">mkv_check_tag</name><argument_list pos:start="131:31" pos:end="131:78">(<argument pos:start="131:32" pos:end="131:43"><expr pos:start="131:32" pos:end="131:43"><name pos:start="131:32" pos:end="131:43"><name pos:start="131:32" pos:end="131:33">st</name><operator pos:start="131:34" pos:end="131:35">-&gt;</operator><name pos:start="131:36" pos:end="131:43">metadata</name></name></expr></argument>, <argument pos:start="131:46" pos:end="131:77"><expr pos:start="131:46" pos:end="131:77"><name pos:start="131:46" pos:end="131:77">MATROSKA_ID_TAGTARGETS_ATTACHUID</name></expr></argument>)</argument_list></call></expr>)</condition><block type="pseudo" pos:start="133:17" pos:end="133:25"><block_content pos:start="133:17" pos:end="133:25">

                <continue pos:start="133:17" pos:end="133:25">continue;</continue></block_content></block></if></if_stmt>



            <expr_stmt pos:start="137:13" pos:end="137:116"><expr pos:start="137:13" pos:end="137:115"><name pos:start="137:13" pos:end="137:15">ret</name> <operator pos:start="137:17" pos:end="137:17">=</operator> <call pos:start="137:19" pos:end="137:115"><name pos:start="137:19" pos:end="137:31">mkv_write_tag</name><argument_list pos:start="137:32" pos:end="137:115">(<argument pos:start="137:33" pos:end="137:33"><expr pos:start="137:33" pos:end="137:33"><name pos:start="137:33" pos:end="137:33">s</name></expr></argument>, <argument pos:start="137:36" pos:end="137:47"><expr pos:start="137:36" pos:end="137:47"><name pos:start="137:36" pos:end="137:47"><name pos:start="137:36" pos:end="137:37">st</name><operator pos:start="137:38" pos:end="137:39">-&gt;</operator><name pos:start="137:40" pos:end="137:47">metadata</name></name></expr></argument>, <argument pos:start="137:50" pos:end="137:81"><expr pos:start="137:50" pos:end="137:81"><name pos:start="137:50" pos:end="137:81">MATROSKA_ID_TAGTARGETS_ATTACHUID</name></expr></argument>, <argument pos:start="137:84" pos:end="137:102"><expr pos:start="137:84" pos:end="137:102"><name pos:start="137:84" pos:end="137:102"><name pos:start="137:84" pos:end="137:93">attachment</name><operator pos:start="137:94" pos:end="137:95">-&gt;</operator><name pos:start="137:96" pos:end="137:102">fileuid</name></name></expr></argument>, <argument pos:start="137:105" pos:end="137:114"><expr pos:start="137:105" pos:end="137:114"><operator pos:start="137:105" pos:end="137:105">&amp;</operator><name pos:start="137:106" pos:end="137:114"><name pos:start="137:106" pos:end="137:108">mkv</name><operator pos:start="137:109" pos:end="137:110">-&gt;</operator><name pos:start="137:111" pos:end="137:114">tags</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

            <if_stmt pos:start="139:13" pos:end="141:27"><if pos:start="139:13" pos:end="141:27">if <condition pos:start="139:16" pos:end="139:24">(<expr pos:start="139:17" pos:end="139:23"><name pos:start="139:17" pos:end="139:19">ret</name> <operator pos:start="139:21" pos:end="139:21">&lt;</operator> <literal type="number" pos:start="139:23" pos:end="139:23">0</literal></expr>)</condition><block type="pseudo" pos:start="141:17" pos:end="141:27"><block_content pos:start="141:17" pos:end="141:27">

                <return pos:start="141:17" pos:end="141:27">return <expr pos:start="141:24" pos:end="141:26"><name pos:start="141:24" pos:end="141:26">ret</name></expr>;</return></block_content></block></if></if_stmt>

        </block_content>}</block></for>

    </block_content>}</block></if></if_stmt>



    <if_stmt pos:start="149:5" pos:end="159:5"><if pos:start="149:5" pos:end="159:5">if <condition pos:start="149:8" pos:end="149:22">(<expr pos:start="149:9" pos:end="149:21"><name pos:start="149:9" pos:end="149:21"><name pos:start="149:9" pos:end="149:11">mkv</name><operator pos:start="149:12" pos:end="149:13">-&gt;</operator><name pos:start="149:14" pos:end="149:17">tags</name><operator pos:start="149:18" pos:end="149:18">.</operator><name pos:start="149:19" pos:end="149:21">pos</name></name></expr>)</condition> <block pos:start="149:24" pos:end="159:5">{<block_content pos:start="151:9" pos:end="157:72">

        <if_stmt pos:start="151:9" pos:end="157:72"><if pos:start="151:9" pos:end="153:58">if <condition pos:start="151:12" pos:end="151:45">(<expr pos:start="151:13" pos:end="151:44"><name pos:start="151:13" pos:end="151:27"><name pos:start="151:13" pos:end="151:13">s</name><operator pos:start="151:14" pos:end="151:15">-&gt;</operator><name pos:start="151:16" pos:end="151:17">pb</name><operator pos:start="151:18" pos:end="151:19">-&gt;</operator><name pos:start="151:20" pos:end="151:27">seekable</name></name> <operator pos:start="151:29" pos:end="151:30">&amp;&amp;</operator> <operator pos:start="151:32" pos:end="151:32">!</operator><name pos:start="151:33" pos:end="151:44"><name pos:start="151:33" pos:end="151:35">mkv</name><operator pos:start="151:36" pos:end="151:37">-&gt;</operator><name pos:start="151:38" pos:end="151:44">is_live</name></name></expr>)</condition><block type="pseudo" pos:start="153:13" pos:end="153:58"><block_content pos:start="153:13" pos:end="153:58">

            <expr_stmt pos:start="153:13" pos:end="153:58"><expr pos:start="153:13" pos:end="153:57"><call pos:start="153:13" pos:end="153:57"><name pos:start="153:13" pos:end="153:25">put_ebml_void</name><argument_list pos:start="153:26" pos:end="153:57">(<argument pos:start="153:27" pos:end="153:31"><expr pos:start="153:27" pos:end="153:31"><name pos:start="153:27" pos:end="153:31"><name pos:start="153:27" pos:end="153:27">s</name><operator pos:start="153:28" pos:end="153:29">-&gt;</operator><name pos:start="153:30" pos:end="153:31">pb</name></name></expr></argument>, <argument pos:start="153:34" pos:end="153:56"><expr pos:start="153:34" pos:end="153:56"><call pos:start="153:34" pos:end="153:56"><name pos:start="153:34" pos:end="153:42">avio_tell</name><argument_list pos:start="153:43" pos:end="153:56">(<argument pos:start="153:44" pos:end="153:55"><expr pos:start="153:44" pos:end="153:55"><name pos:start="153:44" pos:end="153:55"><name pos:start="153:44" pos:end="153:46">mkv</name><operator pos:start="153:47" pos:end="153:48">-&gt;</operator><name pos:start="153:49" pos:end="153:55">tags_bc</name></name></expr></argument>)</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt></block_content></block></if>

        <else pos:start="155:9" pos:end="157:72">else<block type="pseudo" pos:start="157:13" pos:end="157:72"><block_content pos:start="157:13" pos:end="157:72">

            <expr_stmt pos:start="157:13" pos:end="157:72"><expr pos:start="157:13" pos:end="157:71"><call pos:start="157:13" pos:end="157:71"><name pos:start="157:13" pos:end="157:33">end_ebml_master_crc32</name><argument_list pos:start="157:34" pos:end="157:71">(<argument pos:start="157:35" pos:end="157:39"><expr pos:start="157:35" pos:end="157:39"><name pos:start="157:35" pos:end="157:39"><name pos:start="157:35" pos:end="157:35">s</name><operator pos:start="157:36" pos:end="157:37">-&gt;</operator><name pos:start="157:38" pos:end="157:39">pb</name></name></expr></argument>, <argument pos:start="157:42" pos:end="157:54"><expr pos:start="157:42" pos:end="157:54"><operator pos:start="157:42" pos:end="157:42">&amp;</operator><name pos:start="157:43" pos:end="157:54"><name pos:start="157:43" pos:end="157:45">mkv</name><operator pos:start="157:46" pos:end="157:47">-&gt;</operator><name pos:start="157:48" pos:end="157:54">tags_bc</name></name></expr></argument>, <argument pos:start="157:57" pos:end="157:59"><expr pos:start="157:57" pos:end="157:59"><name pos:start="157:57" pos:end="157:59">mkv</name></expr></argument>, <argument pos:start="157:62" pos:end="157:70"><expr pos:start="157:62" pos:end="157:70"><name pos:start="157:62" pos:end="157:70"><name pos:start="157:62" pos:end="157:64">mkv</name><operator pos:start="157:65" pos:end="157:66">-&gt;</operator><name pos:start="157:67" pos:end="157:70">tags</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt></block_content></block></else></if_stmt>

    </block_content>}</block></if></if_stmt>

    <return pos:start="161:5" pos:end="161:13">return <expr pos:start="161:12" pos:end="161:12"><literal type="number" pos:start="161:12" pos:end="161:12">0</literal></expr>;</return>

</block_content>}</block></function>
</unit>
