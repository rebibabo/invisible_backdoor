<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<unit xmlns="http://www.srcML.org/srcML/src" xmlns:pos="http://www.srcML.org/srcML/position" revision="1.0.0" language="C" filename="dataset/ropgen/aug/0/8606.c" pos:tabs="8"><function pos:start="1:1" pos:end="147:1"><type pos:start="1:1" pos:end="1:10"><specifier pos:start="1:1" pos:end="1:6">static</specifier> <name pos:start="1:8" pos:end="1:10">int</name></type> <name pos:start="1:12" pos:end="1:34">mov_write_single_packet</name><parameter_list pos:start="1:35" pos:end="1:69">(<parameter pos:start="1:36" pos:end="1:53"><decl pos:start="1:36" pos:end="1:53"><type pos:start="1:36" pos:end="1:53"><name pos:start="1:36" pos:end="1:50">AVFormatContext</name> <modifier pos:start="1:52" pos:end="1:52">*</modifier></type><name pos:start="1:53" pos:end="1:53">s</name></decl></parameter>, <parameter pos:start="1:56" pos:end="1:68"><decl pos:start="1:56" pos:end="1:68"><type pos:start="1:56" pos:end="1:68"><name pos:start="1:56" pos:end="1:63">AVPacket</name> <modifier pos:start="1:65" pos:end="1:65">*</modifier></type><name pos:start="1:66" pos:end="1:68">pkt</name></decl></parameter>)</parameter_list>

<block pos:start="3:1" pos:end="147:1">{<block_content pos:start="5:9" pos:end="145:43">

        <decl_stmt pos:start="5:9" pos:end="5:42"><decl pos:start="5:9" pos:end="5:41"><type pos:start="5:9" pos:end="5:23"><name pos:start="5:9" pos:end="5:21">MOVMuxContext</name> <modifier pos:start="5:23" pos:end="5:23">*</modifier></type><name pos:start="5:24" pos:end="5:26">mov</name> <init pos:start="5:28" pos:end="5:41">= <expr pos:start="5:30" pos:end="5:41"><name pos:start="5:30" pos:end="5:41"><name pos:start="5:30" pos:end="5:30">s</name><operator pos:start="5:31" pos:end="5:32">-&gt;</operator><name pos:start="5:33" pos:end="5:41">priv_data</name></name></expr></init></decl>;</decl_stmt>

        <decl_stmt pos:start="7:9" pos:end="7:56"><decl pos:start="7:9" pos:end="7:55"><type pos:start="7:9" pos:end="7:18"><name pos:start="7:9" pos:end="7:16">MOVTrack</name> <modifier pos:start="7:18" pos:end="7:18">*</modifier></type><name pos:start="7:19" pos:end="7:21">trk</name> <init pos:start="7:23" pos:end="7:55">= <expr pos:start="7:25" pos:end="7:55"><operator pos:start="7:25" pos:end="7:25">&amp;</operator><name pos:start="7:26" pos:end="7:55"><name pos:start="7:26" pos:end="7:28">mov</name><operator pos:start="7:29" pos:end="7:30">-&gt;</operator><name pos:start="7:31" pos:end="7:36">tracks</name><index pos:start="7:37" pos:end="7:55">[<expr pos:start="7:38" pos:end="7:54"><name pos:start="7:38" pos:end="7:54"><name pos:start="7:38" pos:end="7:40">pkt</name><operator pos:start="7:41" pos:end="7:42">-&gt;</operator><name pos:start="7:43" pos:end="7:54">stream_index</name></name></expr>]</index></name></expr></init></decl>;</decl_stmt>

        <decl_stmt pos:start="9:9" pos:end="9:42"><decl pos:start="9:9" pos:end="9:41"><type pos:start="9:9" pos:end="9:27"><name pos:start="9:9" pos:end="9:25">AVCodecParameters</name> <modifier pos:start="9:27" pos:end="9:27">*</modifier></type><name pos:start="9:28" pos:end="9:30">par</name> <init pos:start="9:32" pos:end="9:41">= <expr pos:start="9:34" pos:end="9:41"><name pos:start="9:34" pos:end="9:41"><name pos:start="9:34" pos:end="9:36">trk</name><operator pos:start="9:37" pos:end="9:38">-&gt;</operator><name pos:start="9:39" pos:end="9:41">par</name></name></expr></init></decl>;</decl_stmt>

        <decl_stmt pos:start="11:9" pos:end="11:34"><decl pos:start="11:9" pos:end="11:33"><type pos:start="11:9" pos:end="11:15"><name pos:start="11:9" pos:end="11:15">int64_t</name></type> <name pos:start="11:17" pos:end="11:29">frag_duration</name> <init pos:start="11:31" pos:end="11:33">= <expr pos:start="11:33" pos:end="11:33"><literal type="number" pos:start="11:33" pos:end="11:33">0</literal></expr></init></decl>;</decl_stmt>

        <decl_stmt pos:start="13:9" pos:end="13:29"><decl pos:start="13:9" pos:end="13:28"><type pos:start="13:9" pos:end="13:11"><name pos:start="13:9" pos:end="13:11">int</name></type> <name pos:start="13:13" pos:end="13:16">size</name> <init pos:start="13:18" pos:end="13:28">= <expr pos:start="13:20" pos:end="13:28"><name pos:start="13:20" pos:end="13:28"><name pos:start="13:20" pos:end="13:22">pkt</name><operator pos:start="13:23" pos:end="13:24">-&gt;</operator><name pos:start="13:25" pos:end="13:28">size</name></name></expr></init></decl>;</decl_stmt>



        <decl_stmt pos:start="17:9" pos:end="17:36"><decl pos:start="17:9" pos:end="17:35"><type pos:start="17:9" pos:end="17:11"><name pos:start="17:9" pos:end="17:11">int</name></type> <name pos:start="17:13" pos:end="17:15">ret</name> <init pos:start="17:17" pos:end="17:35">= <expr pos:start="17:19" pos:end="17:35"><call pos:start="17:19" pos:end="17:35"><name pos:start="17:19" pos:end="17:27">check_pkt</name><argument_list pos:start="17:28" pos:end="17:35">(<argument pos:start="17:29" pos:end="17:29"><expr pos:start="17:29" pos:end="17:29"><name pos:start="17:29" pos:end="17:29">s</name></expr></argument>, <argument pos:start="17:32" pos:end="17:34"><expr pos:start="17:32" pos:end="17:34"><name pos:start="17:32" pos:end="17:34">pkt</name></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>

        <if_stmt pos:start="19:9" pos:end="21:23"><if pos:start="19:9" pos:end="21:23">if <condition pos:start="19:12" pos:end="19:20">(<expr pos:start="19:13" pos:end="19:19"><name pos:start="19:13" pos:end="19:15">ret</name> <operator pos:start="19:17" pos:end="19:17">&lt;</operator> <literal type="number" pos:start="19:19" pos:end="19:19">0</literal></expr>)</condition><block type="pseudo" pos:start="21:13" pos:end="21:23"><block_content pos:start="21:13" pos:end="21:23">

            <return pos:start="21:13" pos:end="21:23">return <expr pos:start="21:20" pos:end="21:22"><name pos:start="21:20" pos:end="21:22">ret</name></expr>;</return></block_content></block></if></if_stmt>



        <if_stmt pos:start="25:9" pos:end="35:9"><if pos:start="25:9" pos:end="35:9">if <condition pos:start="25:12" pos:end="25:50">(<expr pos:start="25:13" pos:end="25:49"><name pos:start="25:13" pos:end="25:22"><name pos:start="25:13" pos:end="25:15">mov</name><operator pos:start="25:16" pos:end="25:17">-&gt;</operator><name pos:start="25:18" pos:end="25:22">flags</name></name> <operator pos:start="25:24" pos:end="25:24">&amp;</operator> <name pos:start="25:26" pos:end="25:49">FF_MOV_FLAG_FRAG_DISCONT</name></expr>)</condition> <block pos:start="25:52" pos:end="35:9">{<block_content pos:start="27:13" pos:end="33:52">

            <decl_stmt pos:start="27:13" pos:end="27:18"><decl pos:start="27:13" pos:end="27:17"><type pos:start="27:13" pos:end="27:15"><name pos:start="27:13" pos:end="27:15">int</name></type> <name pos:start="27:17" pos:end="27:17">i</name></decl>;</decl_stmt>

            <for pos:start="29:13" pos:end="31:48">for <control pos:start="29:17" pos:end="29:47">(<init pos:start="29:18" pos:end="29:23"><expr pos:start="29:18" pos:end="29:22"><name pos:start="29:18" pos:end="29:18">i</name> <operator pos:start="29:20" pos:end="29:20">=</operator> <literal type="number" pos:start="29:22" pos:end="29:22">0</literal></expr>;</init> <condition pos:start="29:25" pos:end="29:42"><expr pos:start="29:25" pos:end="29:41"><name pos:start="29:25" pos:end="29:25">i</name> <operator pos:start="29:27" pos:end="29:27">&lt;</operator> <name pos:start="29:29" pos:end="29:41"><name pos:start="29:29" pos:end="29:29">s</name><operator pos:start="29:30" pos:end="29:31">-&gt;</operator><name pos:start="29:32" pos:end="29:41">nb_streams</name></name></expr>;</condition> <incr pos:start="29:44" pos:end="29:46"><expr pos:start="29:44" pos:end="29:46"><name pos:start="29:44" pos:end="29:44">i</name><operator pos:start="29:45" pos:end="29:46">++</operator></expr></incr>)</control><block type="pseudo" pos:start="31:17" pos:end="31:48"><block_content pos:start="31:17" pos:end="31:48">

                <expr_stmt pos:start="31:17" pos:end="31:48"><expr pos:start="31:17" pos:end="31:47"><name pos:start="31:17" pos:end="31:30"><name pos:start="31:17" pos:end="31:19">mov</name><operator pos:start="31:20" pos:end="31:21">-&gt;</operator><name pos:start="31:22" pos:end="31:27">tracks</name><index pos:start="31:28" pos:end="31:30">[<expr pos:start="31:29" pos:end="31:29"><name pos:start="31:29" pos:end="31:29">i</name></expr>]</index></name><operator pos:start="31:31" pos:end="31:31">.</operator><name pos:start="31:32" pos:end="31:43">frag_discont</name> <operator pos:start="31:45" pos:end="31:45">=</operator> <literal type="number" pos:start="31:47" pos:end="31:47">1</literal></expr>;</expr_stmt></block_content></block></for>

            <expr_stmt pos:start="33:13" pos:end="33:52"><expr pos:start="33:13" pos:end="33:51"><name pos:start="33:13" pos:end="33:22"><name pos:start="33:13" pos:end="33:15">mov</name><operator pos:start="33:16" pos:end="33:17">-&gt;</operator><name pos:start="33:18" pos:end="33:22">flags</name></name> <operator pos:start="33:24" pos:end="33:25">&amp;=</operator> <operator pos:start="33:27" pos:end="33:27">~</operator><name pos:start="33:28" pos:end="33:51">FF_MOV_FLAG_FRAG_DISCONT</name></expr>;</expr_stmt>

        </block_content>}</block></if></if_stmt>



        <if_stmt pos:start="39:9" pos:end="91:9"><if pos:start="39:9" pos:end="91:9">if <condition pos:start="39:12" pos:end="39:23">(<expr pos:start="39:13" pos:end="39:22"><operator pos:start="39:13" pos:end="39:13">!</operator><name pos:start="39:14" pos:end="39:22"><name pos:start="39:14" pos:end="39:16">pkt</name><operator pos:start="39:17" pos:end="39:18">-&gt;</operator><name pos:start="39:19" pos:end="39:22">size</name></name></expr>)</condition> <block pos:start="39:25" pos:end="91:9">{<block_content pos:start="41:13" pos:end="89:21">

            <if_stmt pos:start="41:13" pos:end="53:13"><if pos:start="41:13" pos:end="53:13">if <condition pos:start="41:16" pos:end="41:70">(<expr pos:start="41:17" pos:end="41:69"><name pos:start="41:17" pos:end="41:30"><name pos:start="41:17" pos:end="41:19">trk</name><operator pos:start="41:20" pos:end="41:21">-&gt;</operator><name pos:start="41:22" pos:end="41:30">start_dts</name></name> <operator pos:start="41:32" pos:end="41:33">==</operator> <name pos:start="41:35" pos:end="41:48">AV_NOPTS_VALUE</name> <operator pos:start="41:50" pos:end="41:51">&amp;&amp;</operator> <name pos:start="41:53" pos:end="41:69"><name pos:start="41:53" pos:end="41:55">trk</name><operator pos:start="41:56" pos:end="41:57">-&gt;</operator><name pos:start="41:58" pos:end="41:69">frag_discont</name></name></expr>)</condition> <block pos:start="41:72" pos:end="53:13">{<block_content pos:start="43:17" pos:end="51:39">

                <expr_stmt pos:start="43:17" pos:end="43:42"><expr pos:start="43:17" pos:end="43:41"><name pos:start="43:17" pos:end="43:30"><name pos:start="43:17" pos:end="43:19">trk</name><operator pos:start="43:20" pos:end="43:21">-&gt;</operator><name pos:start="43:22" pos:end="43:30">start_dts</name></name> <operator pos:start="43:32" pos:end="43:32">=</operator> <name pos:start="43:34" pos:end="43:41"><name pos:start="43:34" pos:end="43:36">pkt</name><operator pos:start="43:37" pos:end="43:38">-&gt;</operator><name pos:start="43:39" pos:end="43:41">dts</name></name></expr>;</expr_stmt>

                <if_stmt pos:start="45:17" pos:end="51:39"><if pos:start="45:17" pos:end="47:57">if <condition pos:start="45:20" pos:end="45:47">(<expr pos:start="45:21" pos:end="45:46"><name pos:start="45:21" pos:end="45:28"><name pos:start="45:21" pos:end="45:23">pkt</name><operator pos:start="45:24" pos:end="45:25">-&gt;</operator><name pos:start="45:26" pos:end="45:28">pts</name></name> <operator pos:start="45:30" pos:end="45:31">!=</operator> <name pos:start="45:33" pos:end="45:46">AV_NOPTS_VALUE</name></expr>)</condition><block type="pseudo" pos:start="47:21" pos:end="47:57"><block_content pos:start="47:21" pos:end="47:57">

                    <expr_stmt pos:start="47:21" pos:end="47:57"><expr pos:start="47:21" pos:end="47:56"><name pos:start="47:21" pos:end="47:34"><name pos:start="47:21" pos:end="47:23">trk</name><operator pos:start="47:24" pos:end="47:25">-&gt;</operator><name pos:start="47:26" pos:end="47:34">start_cts</name></name> <operator pos:start="47:36" pos:end="47:36">=</operator> <name pos:start="47:38" pos:end="47:45"><name pos:start="47:38" pos:end="47:40">pkt</name><operator pos:start="47:41" pos:end="47:42">-&gt;</operator><name pos:start="47:43" pos:end="47:45">pts</name></name> <operator pos:start="47:47" pos:end="47:47">-</operator> <name pos:start="47:49" pos:end="47:56"><name pos:start="47:49" pos:end="47:51">pkt</name><operator pos:start="47:52" pos:end="47:53">-&gt;</operator><name pos:start="47:54" pos:end="47:56">dts</name></name></expr>;</expr_stmt></block_content></block></if>

                <else pos:start="49:17" pos:end="51:39">else<block type="pseudo" pos:start="51:21" pos:end="51:39"><block_content pos:start="51:21" pos:end="51:39">

                    <expr_stmt pos:start="51:21" pos:end="51:39"><expr pos:start="51:21" pos:end="51:38"><name pos:start="51:21" pos:end="51:34"><name pos:start="51:21" pos:end="51:23">trk</name><operator pos:start="51:24" pos:end="51:25">-&gt;</operator><name pos:start="51:26" pos:end="51:34">start_cts</name></name> <operator pos:start="51:36" pos:end="51:36">=</operator> <literal type="number" pos:start="51:38" pos:end="51:38">0</literal></expr>;</expr_stmt></block_content></block></else></if_stmt>

            </block_content>}</block></if></if_stmt>



            <if_stmt pos:start="57:13" pos:end="85:13"><if pos:start="57:13" pos:end="85:13">if <condition pos:start="57:16" pos:end="59:55">(<expr pos:start="57:17" pos:end="59:54"><name pos:start="57:17" pos:end="57:34"><name pos:start="57:17" pos:end="57:19">trk</name><operator pos:start="57:20" pos:end="57:21">-&gt;</operator><name pos:start="57:22" pos:end="57:24">par</name><operator pos:start="57:25" pos:end="57:26">-&gt;</operator><name pos:start="57:27" pos:end="57:34">codec_id</name></name> <operator pos:start="57:36" pos:end="57:37">==</operator> <name pos:start="57:39" pos:end="57:56">AV_CODEC_ID_MP4ALS</name> <operator pos:start="57:58" pos:end="57:59">||</operator>

                <name pos:start="59:17" pos:end="59:34"><name pos:start="59:17" pos:end="59:19">trk</name><operator pos:start="59:20" pos:end="59:21">-&gt;</operator><name pos:start="59:22" pos:end="59:24">par</name><operator pos:start="59:25" pos:end="59:26">-&gt;</operator><name pos:start="59:27" pos:end="59:34">codec_id</name></name> <operator pos:start="59:36" pos:end="59:37">==</operator> <name pos:start="59:39" pos:end="59:54">AV_CODEC_ID_FLAC</name></expr>)</condition> <block pos:start="59:57" pos:end="85:13">{<block_content pos:start="61:17" pos:end="83:17">

                <decl_stmt pos:start="61:17" pos:end="61:34"><decl pos:start="61:17" pos:end="61:33"><type pos:start="61:17" pos:end="61:19"><name pos:start="61:17" pos:end="61:19">int</name></type> <name pos:start="61:21" pos:end="61:29">side_size</name> <init pos:start="61:31" pos:end="61:33">= <expr pos:start="61:33" pos:end="61:33"><literal type="number" pos:start="61:33" pos:end="61:33">0</literal></expr></init></decl>;</decl_stmt>

                <decl_stmt pos:start="63:17" pos:end="63:100"><decl pos:start="63:17" pos:end="63:99"><type pos:start="63:17" pos:end="63:25"><name pos:start="63:17" pos:end="63:23">uint8_t</name> <modifier pos:start="63:25" pos:end="63:25">*</modifier></type><name pos:start="63:26" pos:end="63:29">side</name> <init pos:start="63:31" pos:end="63:99">= <expr pos:start="63:33" pos:end="63:99"><call pos:start="63:33" pos:end="63:99"><name pos:start="63:33" pos:end="63:55">av_packet_get_side_data</name><argument_list pos:start="63:56" pos:end="63:99">(<argument pos:start="63:57" pos:end="63:59"><expr pos:start="63:57" pos:end="63:59"><name pos:start="63:57" pos:end="63:59">pkt</name></expr></argument>, <argument pos:start="63:62" pos:end="63:86"><expr pos:start="63:62" pos:end="63:86"><name pos:start="63:62" pos:end="63:86">AV_PKT_DATA_NEW_EXTRADATA</name></expr></argument>, <argument pos:start="63:89" pos:end="63:98"><expr pos:start="63:89" pos:end="63:98"><operator pos:start="63:89" pos:end="63:89">&amp;</operator><name pos:start="63:90" pos:end="63:98">side_size</name></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>

                <if_stmt pos:start="65:17" pos:end="83:17"><if pos:start="65:17" pos:end="83:17">if <condition pos:start="65:20" pos:end="65:123">(<expr pos:start="65:21" pos:end="65:122"><name pos:start="65:21" pos:end="65:24">side</name> <operator pos:start="65:26" pos:end="65:27">&amp;&amp;</operator> <name pos:start="65:29" pos:end="65:37">side_size</name> <operator pos:start="65:39" pos:end="65:39">&gt;</operator> <literal type="number" pos:start="65:41" pos:end="65:41">0</literal> <operator pos:start="65:43" pos:end="65:44">&amp;&amp;</operator> <operator pos:start="65:46" pos:end="65:46">(</operator><name pos:start="65:47" pos:end="65:55">side_size</name> <operator pos:start="65:57" pos:end="65:58">!=</operator> <name pos:start="65:60" pos:end="65:78"><name pos:start="65:60" pos:end="65:62">par</name><operator pos:start="65:63" pos:end="65:64">-&gt;</operator><name pos:start="65:65" pos:end="65:78">extradata_size</name></name> <operator pos:start="65:80" pos:end="65:81">||</operator> <call pos:start="65:83" pos:end="65:121"><name pos:start="65:83" pos:end="65:88">memcmp</name><argument_list pos:start="65:89" pos:end="65:121">(<argument pos:start="65:90" pos:end="65:93"><expr pos:start="65:90" pos:end="65:93"><name pos:start="65:90" pos:end="65:93">side</name></expr></argument>, <argument pos:start="65:96" pos:end="65:109"><expr pos:start="65:96" pos:end="65:109"><name pos:start="65:96" pos:end="65:109"><name pos:start="65:96" pos:end="65:98">par</name><operator pos:start="65:99" pos:end="65:100">-&gt;</operator><name pos:start="65:101" pos:end="65:109">extradata</name></name></expr></argument>, <argument pos:start="65:112" pos:end="65:120"><expr pos:start="65:112" pos:end="65:120"><name pos:start="65:112" pos:end="65:120">side_size</name></expr></argument>)</argument_list></call><operator pos:start="65:122" pos:end="65:122">)</operator></expr>)</condition> <block pos:start="65:125" pos:end="83:17">{<block_content pos:start="67:21" pos:end="81:52">

                    <decl_stmt pos:start="67:21" pos:end="67:90"><decl pos:start="67:21" pos:end="67:89"><type pos:start="67:21" pos:end="67:26"><name pos:start="67:21" pos:end="67:24">void</name> <modifier pos:start="67:26" pos:end="67:26">*</modifier></type><name pos:start="67:27" pos:end="67:34">newextra</name> <init pos:start="67:36" pos:end="67:89">= <expr pos:start="67:38" pos:end="67:89"><call pos:start="67:38" pos:end="67:89"><name pos:start="67:38" pos:end="67:47">av_mallocz</name><argument_list pos:start="67:48" pos:end="67:89">(<argument pos:start="67:49" pos:end="67:88"><expr pos:start="67:49" pos:end="67:88"><name pos:start="67:49" pos:end="67:57">side_size</name> <operator pos:start="67:59" pos:end="67:59">+</operator> <name pos:start="67:61" pos:end="67:88">AV_INPUT_BUFFER_PADDING_SIZE</name></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>

                    <if_stmt pos:start="69:21" pos:end="71:47"><if pos:start="69:21" pos:end="71:47">if <condition pos:start="69:24" pos:end="69:34">(<expr pos:start="69:25" pos:end="69:33"><operator pos:start="69:25" pos:end="69:25">!</operator><name pos:start="69:26" pos:end="69:33">newextra</name></expr>)</condition><block type="pseudo" pos:start="71:25" pos:end="71:47"><block_content pos:start="71:25" pos:end="71:47">

                        <return pos:start="71:25" pos:end="71:47">return <expr pos:start="71:32" pos:end="71:46"><call pos:start="71:32" pos:end="71:46"><name pos:start="71:32" pos:end="71:38">AVERROR</name><argument_list pos:start="71:39" pos:end="71:46">(<argument pos:start="71:40" pos:end="71:45"><expr pos:start="71:40" pos:end="71:45"><name pos:start="71:40" pos:end="71:45">ENOMEM</name></expr></argument>)</argument_list></call></expr>;</return></block_content></block></if></if_stmt>

                    <expr_stmt pos:start="73:21" pos:end="73:44"><expr pos:start="73:21" pos:end="73:43"><call pos:start="73:21" pos:end="73:43"><name pos:start="73:21" pos:end="73:27">av_free</name><argument_list pos:start="73:28" pos:end="73:43">(<argument pos:start="73:29" pos:end="73:42"><expr pos:start="73:29" pos:end="73:42"><name pos:start="73:29" pos:end="73:42"><name pos:start="73:29" pos:end="73:31">par</name><operator pos:start="73:32" pos:end="73:33">-&gt;</operator><name pos:start="73:34" pos:end="73:42">extradata</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

                    <expr_stmt pos:start="75:21" pos:end="75:46"><expr pos:start="75:21" pos:end="75:45"><name pos:start="75:21" pos:end="75:34"><name pos:start="75:21" pos:end="75:23">par</name><operator pos:start="75:24" pos:end="75:25">-&gt;</operator><name pos:start="75:26" pos:end="75:34">extradata</name></name> <operator pos:start="75:36" pos:end="75:36">=</operator> <name pos:start="75:38" pos:end="75:45">newextra</name></expr>;</expr_stmt>

                    <expr_stmt pos:start="77:21" pos:end="77:60"><expr pos:start="77:21" pos:end="77:59"><call pos:start="77:21" pos:end="77:59"><name pos:start="77:21" pos:end="77:26">memcpy</name><argument_list pos:start="77:27" pos:end="77:59">(<argument pos:start="77:28" pos:end="77:41"><expr pos:start="77:28" pos:end="77:41"><name pos:start="77:28" pos:end="77:41"><name pos:start="77:28" pos:end="77:30">par</name><operator pos:start="77:31" pos:end="77:32">-&gt;</operator><name pos:start="77:33" pos:end="77:41">extradata</name></name></expr></argument>, <argument pos:start="77:44" pos:end="77:47"><expr pos:start="77:44" pos:end="77:47"><name pos:start="77:44" pos:end="77:47">side</name></expr></argument>, <argument pos:start="77:50" pos:end="77:58"><expr pos:start="77:50" pos:end="77:58"><name pos:start="77:50" pos:end="77:58">side_size</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

                    <expr_stmt pos:start="79:21" pos:end="79:52"><expr pos:start="79:21" pos:end="79:51"><name pos:start="79:21" pos:end="79:39"><name pos:start="79:21" pos:end="79:23">par</name><operator pos:start="79:24" pos:end="79:25">-&gt;</operator><name pos:start="79:26" pos:end="79:39">extradata_size</name></name> <operator pos:start="79:41" pos:end="79:41">=</operator> <name pos:start="79:43" pos:end="79:51">side_size</name></expr>;</expr_stmt>

                    <expr_stmt pos:start="81:21" pos:end="81:52"><expr pos:start="81:21" pos:end="81:51"><name pos:start="81:21" pos:end="81:47"><name pos:start="81:21" pos:end="81:23">mov</name><operator pos:start="81:24" pos:end="81:25">-&gt;</operator><name pos:start="81:26" pos:end="81:47">need_rewrite_extradata</name></name> <operator pos:start="81:49" pos:end="81:49">=</operator> <literal type="number" pos:start="81:51" pos:end="81:51">1</literal></expr>;</expr_stmt>

                </block_content>}</block></if></if_stmt>

            </block_content>}</block></if></if_stmt>



            <return pos:start="89:13" pos:end="89:21">return <expr pos:start="89:20" pos:end="89:20"><literal type="number" pos:start="89:20" pos:end="89:20">0</literal></expr>;</return>             <comment type="block" pos:start="89:35" pos:end="89:63">/* Discard 0 sized packets */</comment>

        </block_content>}</block></if></if_stmt>



        <if_stmt pos:start="95:9" pos:end="101:57"><if pos:start="95:9" pos:end="101:57">if <condition pos:start="95:12" pos:end="95:60">(<expr pos:start="95:13" pos:end="95:59"><name pos:start="95:13" pos:end="95:22"><name pos:start="95:13" pos:end="95:15">trk</name><operator pos:start="95:16" pos:end="95:17">-&gt;</operator><name pos:start="95:18" pos:end="95:22">entry</name></name> <operator pos:start="95:24" pos:end="95:25">&amp;&amp;</operator> <name pos:start="95:27" pos:end="95:43"><name pos:start="95:27" pos:end="95:29">pkt</name><operator pos:start="95:30" pos:end="95:31">-&gt;</operator><name pos:start="95:32" pos:end="95:43">stream_index</name></name> <operator pos:start="95:45" pos:end="95:45">&lt;</operator> <name pos:start="95:47" pos:end="95:59"><name pos:start="95:47" pos:end="95:47">s</name><operator pos:start="95:48" pos:end="95:49">-&gt;</operator><name pos:start="95:50" pos:end="95:59">nb_streams</name></name></expr>)</condition><block type="pseudo" pos:start="97:13" pos:end="101:57"><block_content pos:start="97:13" pos:end="101:57">

            <expr_stmt pos:start="97:13" pos:end="101:57"><expr pos:start="97:13" pos:end="101:56"><name pos:start="97:13" pos:end="97:25">frag_duration</name> <operator pos:start="97:27" pos:end="97:27">=</operator> <call pos:start="97:29" pos:end="101:56"><name pos:start="97:29" pos:end="97:40">av_rescale_q</name><argument_list pos:start="97:41" pos:end="101:56">(<argument pos:start="97:42" pos:end="97:71"><expr pos:start="97:42" pos:end="97:71"><name pos:start="97:42" pos:end="97:49"><name pos:start="97:42" pos:end="97:44">pkt</name><operator pos:start="97:45" pos:end="97:46">-&gt;</operator><name pos:start="97:47" pos:end="97:49">dts</name></name> <operator pos:start="97:51" pos:end="97:51">-</operator> <name pos:start="97:53" pos:end="97:67"><name pos:start="97:53" pos:end="97:55">trk</name><operator pos:start="97:56" pos:end="97:57">-&gt;</operator><name pos:start="97:58" pos:end="97:64">cluster</name><index pos:start="97:65" pos:end="97:67">[<expr pos:start="97:66" pos:end="97:66"><literal type="number" pos:start="97:66" pos:end="97:66">0</literal></expr>]</index></name><operator pos:start="97:68" pos:end="97:68">.</operator><name pos:start="97:69" pos:end="97:71">dts</name></expr></argument>,

                                         <argument pos:start="99:42" pos:end="99:81"><expr pos:start="99:42" pos:end="99:81"><name pos:start="99:42" pos:end="99:70"><name pos:start="99:42" pos:end="99:42">s</name><operator pos:start="99:43" pos:end="99:44">-&gt;</operator><name pos:start="99:45" pos:end="99:51">streams</name><index pos:start="99:52" pos:end="99:70">[<expr pos:start="99:53" pos:end="99:69"><name pos:start="99:53" pos:end="99:69"><name pos:start="99:53" pos:end="99:55">pkt</name><operator pos:start="99:56" pos:end="99:57">-&gt;</operator><name pos:start="99:58" pos:end="99:69">stream_index</name></name></expr>]</index></name><operator pos:start="99:71" pos:end="99:72">-&gt;</operator><name pos:start="99:73" pos:end="99:81">time_base</name></expr></argument>,

                                         <argument pos:start="101:42" pos:end="101:55"><expr pos:start="101:42" pos:end="101:55"><name pos:start="101:42" pos:end="101:55">AV_TIME_BASE_Q</name></expr></argument>)</argument_list></call></expr>;</expr_stmt></block_content></block></if></if_stmt>

        <if_stmt pos:start="103:9" pos:end="141:9"><if pos:start="103:9" pos:end="141:9">if <condition pos:start="103:12" pos:end="113:58">(<expr pos:start="103:13" pos:end="113:57"><operator pos:start="103:13" pos:end="103:13">(</operator><name pos:start="103:14" pos:end="103:39"><name pos:start="103:14" pos:end="103:16">mov</name><operator pos:start="103:17" pos:end="103:18">-&gt;</operator><name pos:start="103:19" pos:end="103:39">max_fragment_duration</name></name> <operator pos:start="103:41" pos:end="103:42">&amp;&amp;</operator>

             <name pos:start="105:14" pos:end="105:26">frag_duration</name> <operator pos:start="105:28" pos:end="105:29">&gt;=</operator> <name pos:start="105:31" pos:end="105:56"><name pos:start="105:31" pos:end="105:33">mov</name><operator pos:start="105:34" pos:end="105:35">-&gt;</operator><name pos:start="105:36" pos:end="105:56">max_fragment_duration</name></name><operator pos:start="105:57" pos:end="105:57">)</operator> <operator pos:start="105:59" pos:end="105:60">||</operator>

             <operator pos:start="107:14" pos:end="107:14">(</operator><name pos:start="107:15" pos:end="107:36"><name pos:start="107:15" pos:end="107:17">mov</name><operator pos:start="107:18" pos:end="107:19">-&gt;</operator><name pos:start="107:20" pos:end="107:36">max_fragment_size</name></name> <operator pos:start="107:38" pos:end="107:39">&amp;&amp;</operator> <name pos:start="107:41" pos:end="107:54"><name pos:start="107:41" pos:end="107:43">mov</name><operator pos:start="107:44" pos:end="107:45">-&gt;</operator><name pos:start="107:46" pos:end="107:54">mdat_size</name></name> <operator pos:start="107:56" pos:end="107:56">+</operator> <name pos:start="107:58" pos:end="107:61">size</name> <operator pos:start="107:63" pos:end="107:64">&gt;=</operator> <name pos:start="107:66" pos:end="107:87"><name pos:start="107:66" pos:end="107:68">mov</name><operator pos:start="107:69" pos:end="107:70">-&gt;</operator><name pos:start="107:71" pos:end="107:87">max_fragment_size</name></name><operator pos:start="107:88" pos:end="107:88">)</operator> <operator pos:start="107:90" pos:end="107:91">||</operator>

             <operator pos:start="109:14" pos:end="109:14">(</operator><name pos:start="109:15" pos:end="109:24"><name pos:start="109:15" pos:end="109:17">mov</name><operator pos:start="109:18" pos:end="109:19">-&gt;</operator><name pos:start="109:20" pos:end="109:24">flags</name></name> <operator pos:start="109:26" pos:end="109:26">&amp;</operator> <name pos:start="109:28" pos:end="109:52">FF_MOV_FLAG_FRAG_KEYFRAME</name> <operator pos:start="109:54" pos:end="109:55">&amp;&amp;</operator>

              <name pos:start="111:15" pos:end="111:29"><name pos:start="111:15" pos:end="111:17">par</name><operator pos:start="111:18" pos:end="111:19">-&gt;</operator><name pos:start="111:20" pos:end="111:29">codec_type</name></name> <operator pos:start="111:31" pos:end="111:32">==</operator> <name pos:start="111:34" pos:end="111:51">AVMEDIA_TYPE_VIDEO</name> <operator pos:start="111:53" pos:end="111:54">&amp;&amp;</operator>

              <name pos:start="113:15" pos:end="113:24"><name pos:start="113:15" pos:end="113:17">trk</name><operator pos:start="113:18" pos:end="113:19">-&gt;</operator><name pos:start="113:20" pos:end="113:24">entry</name></name> <operator pos:start="113:26" pos:end="113:27">&amp;&amp;</operator> <name pos:start="113:29" pos:end="113:38"><name pos:start="113:29" pos:end="113:31">pkt</name><operator pos:start="113:32" pos:end="113:33">-&gt;</operator><name pos:start="113:34" pos:end="113:38">flags</name></name> <operator pos:start="113:40" pos:end="113:40">&amp;</operator> <name pos:start="113:42" pos:end="113:56">AV_PKT_FLAG_KEY</name><operator pos:start="113:57" pos:end="113:57">)</operator></expr>)</condition> <block pos:start="113:60" pos:end="141:9">{<block_content pos:start="115:13" pos:end="139:13">

            <if_stmt pos:start="115:13" pos:end="139:13"><if pos:start="115:13" pos:end="139:13">if <condition pos:start="115:16" pos:end="115:60">(<expr pos:start="115:17" pos:end="115:59"><name pos:start="115:17" pos:end="115:29">frag_duration</name> <operator pos:start="115:31" pos:end="115:32">&gt;=</operator> <name pos:start="115:34" pos:end="115:59"><name pos:start="115:34" pos:end="115:36">mov</name><operator pos:start="115:37" pos:end="115:38">-&gt;</operator><name pos:start="115:39" pos:end="115:59">min_fragment_duration</name></name></expr>)</condition> <block pos:start="115:62" pos:end="139:13">{<block_content pos:start="125:17" pos:end="137:46">

                <comment type="line" pos:start="117:17" pos:end="117:74">// Set the duration of this track to line up with the next</comment>

                <comment type="line" pos:start="119:17" pos:end="119:72">// sample in this track. This avoids relying on AVPacket</comment>

                <comment type="line" pos:start="121:17" pos:end="121:74">// duration, but only helps for this particular track, not</comment>

                <comment type="line" pos:start="123:17" pos:end="123:72">// for the other ones that are flushed at the same time.</comment>

                <expr_stmt pos:start="125:17" pos:end="125:64"><expr pos:start="125:17" pos:end="125:63"><name pos:start="125:17" pos:end="125:35"><name pos:start="125:17" pos:end="125:19">trk</name><operator pos:start="125:20" pos:end="125:21">-&gt;</operator><name pos:start="125:22" pos:end="125:35">track_duration</name></name> <operator pos:start="125:37" pos:end="125:37">=</operator> <name pos:start="125:39" pos:end="125:46"><name pos:start="125:39" pos:end="125:41">pkt</name><operator pos:start="125:42" pos:end="125:43">-&gt;</operator><name pos:start="125:44" pos:end="125:46">dts</name></name> <operator pos:start="125:48" pos:end="125:48">-</operator> <name pos:start="125:50" pos:end="125:63"><name pos:start="125:50" pos:end="125:52">trk</name><operator pos:start="125:53" pos:end="125:54">-&gt;</operator><name pos:start="125:55" pos:end="125:63">start_dts</name></name></expr>;</expr_stmt>

                <if_stmt pos:start="127:17" pos:end="133:44"><if pos:start="127:17" pos:end="129:44">if <condition pos:start="127:20" pos:end="127:47">(<expr pos:start="127:21" pos:end="127:46"><name pos:start="127:21" pos:end="127:28"><name pos:start="127:21" pos:end="127:23">pkt</name><operator pos:start="127:24" pos:end="127:25">-&gt;</operator><name pos:start="127:26" pos:end="127:28">pts</name></name> <operator pos:start="127:30" pos:end="127:31">!=</operator> <name pos:start="127:33" pos:end="127:46">AV_NOPTS_VALUE</name></expr>)</condition><block type="pseudo" pos:start="129:21" pos:end="129:44"><block_content pos:start="129:21" pos:end="129:44">

                    <expr_stmt pos:start="129:21" pos:end="129:44"><expr pos:start="129:21" pos:end="129:43"><name pos:start="129:21" pos:end="129:32"><name pos:start="129:21" pos:end="129:23">trk</name><operator pos:start="129:24" pos:end="129:25">-&gt;</operator><name pos:start="129:26" pos:end="129:32">end_pts</name></name> <operator pos:start="129:34" pos:end="129:34">=</operator> <name pos:start="129:36" pos:end="129:43"><name pos:start="129:36" pos:end="129:38">pkt</name><operator pos:start="129:39" pos:end="129:40">-&gt;</operator><name pos:start="129:41" pos:end="129:43">pts</name></name></expr>;</expr_stmt></block_content></block></if>

                <else pos:start="131:17" pos:end="133:44">else<block type="pseudo" pos:start="133:21" pos:end="133:44"><block_content pos:start="133:21" pos:end="133:44">

                    <expr_stmt pos:start="133:21" pos:end="133:44"><expr pos:start="133:21" pos:end="133:43"><name pos:start="133:21" pos:end="133:32"><name pos:start="133:21" pos:end="133:23">trk</name><operator pos:start="133:24" pos:end="133:25">-&gt;</operator><name pos:start="133:26" pos:end="133:32">end_pts</name></name> <operator pos:start="133:34" pos:end="133:34">=</operator> <name pos:start="133:36" pos:end="133:43"><name pos:start="133:36" pos:end="133:38">pkt</name><operator pos:start="133:39" pos:end="133:40">-&gt;</operator><name pos:start="133:41" pos:end="133:43">dts</name></name></expr>;</expr_stmt></block_content></block></else></if_stmt>

                <expr_stmt pos:start="135:17" pos:end="135:38"><expr pos:start="135:17" pos:end="135:37"><name pos:start="135:17" pos:end="135:33"><name pos:start="135:17" pos:end="135:19">trk</name><operator pos:start="135:20" pos:end="135:21">-&gt;</operator><name pos:start="135:22" pos:end="135:33">end_reliable</name></name> <operator pos:start="135:35" pos:end="135:35">=</operator> <literal type="number" pos:start="135:37" pos:end="135:37">1</literal></expr>;</expr_stmt>

                <expr_stmt pos:start="137:17" pos:end="137:46"><expr pos:start="137:17" pos:end="137:45"><call pos:start="137:17" pos:end="137:45"><name pos:start="137:17" pos:end="137:39">mov_auto_flush_fragment</name><argument_list pos:start="137:40" pos:end="137:45">(<argument pos:start="137:41" pos:end="137:41"><expr pos:start="137:41" pos:end="137:41"><name pos:start="137:41" pos:end="137:41">s</name></expr></argument>, <argument pos:start="137:44" pos:end="137:44"><expr pos:start="137:44" pos:end="137:44"><literal type="number" pos:start="137:44" pos:end="137:44">0</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

            </block_content>}</block></if></if_stmt>

        </block_content>}</block></if></if_stmt>



        <return pos:start="145:9" pos:end="145:43">return <expr pos:start="145:16" pos:end="145:42"><call pos:start="145:16" pos:end="145:42"><name pos:start="145:16" pos:end="145:34">ff_mov_write_packet</name><argument_list pos:start="145:35" pos:end="145:42">(<argument pos:start="145:36" pos:end="145:36"><expr pos:start="145:36" pos:end="145:36"><name pos:start="145:36" pos:end="145:36">s</name></expr></argument>, <argument pos:start="145:39" pos:end="145:41"><expr pos:start="145:39" pos:end="145:41"><name pos:start="145:39" pos:end="145:41">pkt</name></expr></argument>)</argument_list></call></expr>;</return>

</block_content>}</block></function>
</unit>
