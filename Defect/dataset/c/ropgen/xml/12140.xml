<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<unit xmlns="http://www.srcML.org/srcML/src" xmlns:pos="http://www.srcML.org/srcML/position" revision="1.0.0" language="C" filename="dataset/ropgen/aug/0/12140.c" pos:tabs="8"><function pos:start="1:1" pos:end="223:1"><type pos:start="1:1" pos:end="1:11"><specifier pos:start="1:1" pos:end="1:6">static</specifier> <name pos:start="1:8" pos:end="1:11">void</name></type> <name pos:start="1:13" pos:end="1:31">process_ncq_command</name><parameter_list pos:start="1:32" pos:end="3:41">(<parameter pos:start="1:33" pos:end="1:44"><decl pos:start="1:33" pos:end="1:44"><type pos:start="1:33" pos:end="1:44"><name pos:start="1:33" pos:end="1:41">AHCIState</name> <modifier pos:start="1:43" pos:end="1:43">*</modifier></type><name pos:start="1:44" pos:end="1:44">s</name></decl></parameter>, <parameter pos:start="1:47" pos:end="1:54"><decl pos:start="1:47" pos:end="1:54"><type pos:start="1:47" pos:end="1:54"><name pos:start="1:47" pos:end="1:49">int</name></type> <name pos:start="1:51" pos:end="1:54">port</name></decl></parameter>, <parameter pos:start="1:57" pos:end="1:72"><decl pos:start="1:57" pos:end="1:72"><type pos:start="1:57" pos:end="1:72"><name pos:start="1:57" pos:end="1:63">uint8_t</name> <modifier pos:start="1:65" pos:end="1:65">*</modifier></type><name pos:start="1:66" pos:end="1:72">cmd_fis</name></decl></parameter>,

                                <parameter pos:start="3:33" pos:end="3:40"><decl pos:start="3:33" pos:end="3:40"><type pos:start="3:33" pos:end="3:40"><name pos:start="3:33" pos:end="3:35">int</name></type> <name pos:start="3:37" pos:end="3:40">slot</name></decl></parameter>)</parameter_list>

<block pos:start="5:1" pos:end="223:1">{<block_content pos:start="7:5" pos:end="221:5">

    <decl_stmt pos:start="7:5" pos:end="7:35"><decl pos:start="7:5" pos:end="7:34"><type pos:start="7:5" pos:end="7:16"><name pos:start="7:5" pos:end="7:14">AHCIDevice</name> <modifier pos:start="7:16" pos:end="7:16">*</modifier></type><name pos:start="7:17" pos:end="7:18">ad</name> <init pos:start="7:20" pos:end="7:34">= <expr pos:start="7:22" pos:end="7:34"><operator pos:start="7:22" pos:end="7:22">&amp;</operator><name pos:start="7:23" pos:end="7:34"><name pos:start="7:23" pos:end="7:23">s</name><operator pos:start="7:24" pos:end="7:25">-&gt;</operator><name pos:start="7:26" pos:end="7:28">dev</name><index pos:start="7:29" pos:end="7:34">[<expr pos:start="7:30" pos:end="7:33"><name pos:start="7:30" pos:end="7:33">port</name></expr>]</index></name></expr></init></decl>;</decl_stmt>

    <decl_stmt pos:start="9:5" pos:end="9:43"><decl pos:start="9:5" pos:end="9:42"><type pos:start="9:5" pos:end="9:14"><name pos:start="9:5" pos:end="9:12">IDEState</name> <modifier pos:start="9:14" pos:end="9:14">*</modifier></type><name pos:start="9:15" pos:end="9:23">ide_state</name> <init pos:start="9:25" pos:end="9:42">= <expr pos:start="9:27" pos:end="9:42"><operator pos:start="9:27" pos:end="9:27">&amp;</operator><name pos:start="9:28" pos:end="9:42"><name pos:start="9:28" pos:end="9:29">ad</name><operator pos:start="9:30" pos:end="9:31">-&gt;</operator><name pos:start="9:32" pos:end="9:35">port</name><operator pos:start="9:36" pos:end="9:36">.</operator><name pos:start="9:37" pos:end="9:39">ifs</name><index pos:start="9:40" pos:end="9:42">[<expr pos:start="9:41" pos:end="9:41"><literal type="number" pos:start="9:41" pos:end="9:41">0</literal></expr>]</index></name></expr></init></decl>;</decl_stmt>

    <decl_stmt pos:start="11:5" pos:end="11:43"><decl pos:start="11:5" pos:end="11:42"><type pos:start="11:5" pos:end="11:14"><name pos:start="11:5" pos:end="11:12">NCQFrame</name> <modifier pos:start="11:14" pos:end="11:14">*</modifier></type><name pos:start="11:15" pos:end="11:21">ncq_fis</name> <init pos:start="11:23" pos:end="11:42">= <expr pos:start="11:25" pos:end="11:42"><operator pos:start="11:25" pos:end="11:25">(</operator><name pos:start="11:26" pos:end="11:33">NCQFrame</name><operator pos:start="11:34" pos:end="11:34">*</operator><operator pos:start="11:35" pos:end="11:35">)</operator><name pos:start="11:36" pos:end="11:42">cmd_fis</name></expr></init></decl>;</decl_stmt>

    <decl_stmt pos:start="13:5" pos:end="13:36"><decl pos:start="13:5" pos:end="13:35"><type pos:start="13:5" pos:end="13:11"><name pos:start="13:5" pos:end="13:11">uint8_t</name></type> <name pos:start="13:13" pos:end="13:15">tag</name> <init pos:start="13:17" pos:end="13:35">= <expr pos:start="13:19" pos:end="13:35"><name pos:start="13:19" pos:end="13:30"><name pos:start="13:19" pos:end="13:25">ncq_fis</name><operator pos:start="13:26" pos:end="13:27">-&gt;</operator><name pos:start="13:28" pos:end="13:30">tag</name></name> <operator pos:start="13:32" pos:end="13:33">&gt;&gt;</operator> <literal type="number" pos:start="13:35" pos:end="13:35">3</literal></expr></init></decl>;</decl_stmt>

    <decl_stmt pos:start="15:5" pos:end="15:50"><decl pos:start="15:5" pos:end="15:49"><type pos:start="15:5" pos:end="15:22"><name pos:start="15:5" pos:end="15:20">NCQTransferState</name> <modifier pos:start="15:22" pos:end="15:22">*</modifier></type><name pos:start="15:23" pos:end="15:29">ncq_tfs</name> <init pos:start="15:31" pos:end="15:49">= <expr pos:start="15:33" pos:end="15:49"><operator pos:start="15:33" pos:end="15:33">&amp;</operator><name pos:start="15:34" pos:end="15:49"><name pos:start="15:34" pos:end="15:35">ad</name><operator pos:start="15:36" pos:end="15:37">-&gt;</operator><name pos:start="15:38" pos:end="15:44">ncq_tfs</name><index pos:start="15:45" pos:end="15:49">[<expr pos:start="15:46" pos:end="15:48"><name pos:start="15:46" pos:end="15:48">tag</name></expr>]</index></name></expr></init></decl>;</decl_stmt>

    <decl_stmt pos:start="17:5" pos:end="17:16"><decl pos:start="17:5" pos:end="17:15"><type pos:start="17:5" pos:end="17:10"><name pos:start="17:5" pos:end="17:10">size_t</name></type> <name pos:start="17:12" pos:end="17:15">size</name></decl>;</decl_stmt>



    <if_stmt pos:start="21:5" pos:end="29:5"><if pos:start="21:5" pos:end="29:5">if <condition pos:start="21:8" pos:end="21:22">(<expr pos:start="21:9" pos:end="21:21"><name pos:start="21:9" pos:end="21:21"><name pos:start="21:9" pos:end="21:15">ncq_tfs</name><operator pos:start="21:16" pos:end="21:17">-&gt;</operator><name pos:start="21:18" pos:end="21:21">used</name></name></expr>)</condition> <block pos:start="21:24" pos:end="29:5">{<block_content pos:start="25:9" pos:end="27:15">

        <comment type="block" pos:start="23:9" pos:end="23:36">/* error - already in use */</comment>

        <expr_stmt pos:start="25:9" pos:end="25:72"><expr pos:start="25:9" pos:end="25:71"><call pos:start="25:9" pos:end="25:71"><name pos:start="25:9" pos:end="25:15">fprintf</name><argument_list pos:start="25:16" pos:end="25:71">(<argument pos:start="25:17" pos:end="25:22"><expr pos:start="25:17" pos:end="25:22"><name pos:start="25:17" pos:end="25:22">stderr</name></expr></argument>, <argument pos:start="25:25" pos:end="25:51"><expr pos:start="25:25" pos:end="25:51"><literal type="string" pos:start="25:25" pos:end="25:51">"%s: tag %d already used\n"</literal></expr></argument>, <argument pos:start="25:54" pos:end="25:65"><expr pos:start="25:54" pos:end="25:65"><name pos:start="25:54" pos:end="25:65">__FUNCTION__</name></expr></argument>, <argument pos:start="25:68" pos:end="25:70"><expr pos:start="25:68" pos:end="25:70"><name pos:start="25:68" pos:end="25:70">tag</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <return pos:start="27:9" pos:end="27:15">return;</return>

    </block_content>}</block></if></if_stmt>



    <expr_stmt pos:start="33:5" pos:end="33:22"><expr pos:start="33:5" pos:end="33:21"><name pos:start="33:5" pos:end="33:17"><name pos:start="33:5" pos:end="33:11">ncq_tfs</name><operator pos:start="33:12" pos:end="33:13">-&gt;</operator><name pos:start="33:14" pos:end="33:17">used</name></name> <operator pos:start="33:19" pos:end="33:19">=</operator> <literal type="number" pos:start="33:21" pos:end="33:21">1</literal></expr>;</expr_stmt>

    <expr_stmt pos:start="35:5" pos:end="35:24"><expr pos:start="35:5" pos:end="35:23"><name pos:start="35:5" pos:end="35:18"><name pos:start="35:5" pos:end="35:11">ncq_tfs</name><operator pos:start="35:12" pos:end="35:13">-&gt;</operator><name pos:start="35:14" pos:end="35:18">drive</name></name> <operator pos:start="35:20" pos:end="35:20">=</operator> <name pos:start="35:22" pos:end="35:23">ad</name></expr>;</expr_stmt>

    <expr_stmt pos:start="37:5" pos:end="37:25"><expr pos:start="37:5" pos:end="37:24"><name pos:start="37:5" pos:end="37:17"><name pos:start="37:5" pos:end="37:11">ncq_tfs</name><operator pos:start="37:12" pos:end="37:13">-&gt;</operator><name pos:start="37:14" pos:end="37:17">slot</name></name> <operator pos:start="37:19" pos:end="37:19">=</operator> <name pos:start="37:21" pos:end="37:24">slot</name></expr>;</expr_stmt>

    <expr_stmt pos:start="39:5" pos:end="39:36"><expr pos:start="39:5" pos:end="39:35"><name pos:start="39:5" pos:end="39:16"><name pos:start="39:5" pos:end="39:11">ncq_tfs</name><operator pos:start="39:12" pos:end="39:13">-&gt;</operator><name pos:start="39:14" pos:end="39:16">cmd</name></name> <operator pos:start="39:18" pos:end="39:18">=</operator> <name pos:start="39:20" pos:end="39:35"><name pos:start="39:20" pos:end="39:26">ncq_fis</name><operator pos:start="39:27" pos:end="39:28">-&gt;</operator><name pos:start="39:29" pos:end="39:35">command</name></name></expr>;</expr_stmt>

    <expr_stmt pos:start="41:5" pos:end="51:43"><expr pos:start="41:5" pos:end="51:42"><name pos:start="41:5" pos:end="41:16"><name pos:start="41:5" pos:end="41:11">ncq_tfs</name><operator pos:start="41:12" pos:end="41:13">-&gt;</operator><name pos:start="41:14" pos:end="41:16">lba</name></name> <operator pos:start="41:18" pos:end="41:18">=</operator> <operator pos:start="41:20" pos:end="41:20">(</operator><operator pos:start="41:21" pos:end="41:21">(</operator><name pos:start="41:22" pos:end="41:29">uint64_t</name><operator pos:start="41:30" pos:end="41:30">)</operator><name pos:start="41:31" pos:end="41:43"><name pos:start="41:31" pos:end="41:37">ncq_fis</name><operator pos:start="41:38" pos:end="41:39">-&gt;</operator><name pos:start="41:40" pos:end="41:43">lba5</name></name> <operator pos:start="41:45" pos:end="41:46">&lt;&lt;</operator> <literal type="number" pos:start="41:48" pos:end="41:49">40</literal><operator pos:start="41:50" pos:end="41:50">)</operator> <operator pos:start="41:52" pos:end="41:52">|</operator>

                   <operator pos:start="43:20" pos:end="43:20">(</operator><operator pos:start="43:21" pos:end="43:21">(</operator><name pos:start="43:22" pos:end="43:29">uint64_t</name><operator pos:start="43:30" pos:end="43:30">)</operator><name pos:start="43:31" pos:end="43:43"><name pos:start="43:31" pos:end="43:37">ncq_fis</name><operator pos:start="43:38" pos:end="43:39">-&gt;</operator><name pos:start="43:40" pos:end="43:43">lba4</name></name> <operator pos:start="43:45" pos:end="43:46">&lt;&lt;</operator> <literal type="number" pos:start="43:48" pos:end="43:49">32</literal><operator pos:start="43:50" pos:end="43:50">)</operator> <operator pos:start="43:52" pos:end="43:52">|</operator>

                   <operator pos:start="45:20" pos:end="45:20">(</operator><operator pos:start="45:21" pos:end="45:21">(</operator><name pos:start="45:22" pos:end="45:29">uint64_t</name><operator pos:start="45:30" pos:end="45:30">)</operator><name pos:start="45:31" pos:end="45:43"><name pos:start="45:31" pos:end="45:37">ncq_fis</name><operator pos:start="45:38" pos:end="45:39">-&gt;</operator><name pos:start="45:40" pos:end="45:43">lba3</name></name> <operator pos:start="45:45" pos:end="45:46">&lt;&lt;</operator> <literal type="number" pos:start="45:48" pos:end="45:49">24</literal><operator pos:start="45:50" pos:end="45:50">)</operator> <operator pos:start="45:52" pos:end="45:52">|</operator>

                   <operator pos:start="47:20" pos:end="47:20">(</operator><operator pos:start="47:21" pos:end="47:21">(</operator><name pos:start="47:22" pos:end="47:29">uint64_t</name><operator pos:start="47:30" pos:end="47:30">)</operator><name pos:start="47:31" pos:end="47:43"><name pos:start="47:31" pos:end="47:37">ncq_fis</name><operator pos:start="47:38" pos:end="47:39">-&gt;</operator><name pos:start="47:40" pos:end="47:43">lba2</name></name> <operator pos:start="47:45" pos:end="47:46">&lt;&lt;</operator> <literal type="number" pos:start="47:48" pos:end="47:49">16</literal><operator pos:start="47:50" pos:end="47:50">)</operator> <operator pos:start="47:52" pos:end="47:52">|</operator>

                   <operator pos:start="49:20" pos:end="49:20">(</operator><operator pos:start="49:21" pos:end="49:21">(</operator><name pos:start="49:22" pos:end="49:29">uint64_t</name><operator pos:start="49:30" pos:end="49:30">)</operator><name pos:start="49:31" pos:end="49:43"><name pos:start="49:31" pos:end="49:37">ncq_fis</name><operator pos:start="49:38" pos:end="49:39">-&gt;</operator><name pos:start="49:40" pos:end="49:43">lba1</name></name> <operator pos:start="49:45" pos:end="49:46">&lt;&lt;</operator> <literal type="number" pos:start="49:48" pos:end="49:48">8</literal><operator pos:start="49:49" pos:end="49:49">)</operator> <operator pos:start="49:51" pos:end="49:51">|</operator>

                   <operator pos:start="51:20" pos:end="51:20">(</operator><name pos:start="51:21" pos:end="51:28">uint64_t</name><operator pos:start="51:29" pos:end="51:29">)</operator><name pos:start="51:30" pos:end="51:42"><name pos:start="51:30" pos:end="51:36">ncq_fis</name><operator pos:start="51:37" pos:end="51:38">-&gt;</operator><name pos:start="51:39" pos:end="51:42">lba0</name></name></expr>;</expr_stmt>

    <expr_stmt pos:start="53:5" pos:end="53:23"><expr pos:start="53:5" pos:end="53:22"><name pos:start="53:5" pos:end="53:16"><name pos:start="53:5" pos:end="53:11">ncq_tfs</name><operator pos:start="53:12" pos:end="53:13">-&gt;</operator><name pos:start="53:14" pos:end="53:16">tag</name></name> <operator pos:start="53:18" pos:end="53:18">=</operator> <name pos:start="53:20" pos:end="53:22">tag</name></expr>;</expr_stmt>



    <comment type="block" pos:start="57:5" pos:end="57:37">/* Sanity-check the NCQ packet */</comment>

    <if_stmt pos:start="59:5" pos:end="65:5"><if pos:start="59:5" pos:end="65:5">if <condition pos:start="59:8" pos:end="59:20">(<expr pos:start="59:9" pos:end="59:19"><name pos:start="59:9" pos:end="59:11">tag</name> <operator pos:start="59:13" pos:end="59:14">!=</operator> <name pos:start="59:16" pos:end="59:19">slot</name></expr>)</condition> <block pos:start="59:22" pos:end="65:5">{<block_content pos:start="61:9" pos:end="63:27">

        <expr_stmt pos:start="61:9" pos:end="63:27"><expr pos:start="61:9" pos:end="63:26"><call pos:start="61:9" pos:end="63:26"><name pos:start="61:9" pos:end="61:15">DPRINTF</name><argument_list pos:start="61:16" pos:end="63:26">(<argument pos:start="61:17" pos:end="61:20"><expr pos:start="61:17" pos:end="61:20"><name pos:start="61:17" pos:end="61:20">port</name></expr></argument>, <argument pos:start="61:23" pos:end="61:78"><expr pos:start="61:23" pos:end="61:78"><literal type="string" pos:start="61:23" pos:end="61:78">"Warn: NCQ slot (%d) did not match the given tag (%d)\n"</literal></expr></argument>,

                <argument pos:start="63:17" pos:end="63:20"><expr pos:start="63:17" pos:end="63:20"><name pos:start="63:17" pos:end="63:20">slot</name></expr></argument>, <argument pos:start="63:23" pos:end="63:25"><expr pos:start="63:23" pos:end="63:25"><name pos:start="63:23" pos:end="63:25">tag</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    </block_content>}</block></if></if_stmt>



    <if_stmt pos:start="69:5" pos:end="73:5"><if pos:start="69:5" pos:end="73:5">if <condition pos:start="69:8" pos:end="69:73">(<expr pos:start="69:9" pos:end="69:72"><name pos:start="69:9" pos:end="69:21"><name pos:start="69:9" pos:end="69:15">ncq_fis</name><operator pos:start="69:16" pos:end="69:17">-&gt;</operator><name pos:start="69:18" pos:end="69:21">aux0</name></name> <operator pos:start="69:23" pos:end="69:24">||</operator> <name pos:start="69:26" pos:end="69:38"><name pos:start="69:26" pos:end="69:32">ncq_fis</name><operator pos:start="69:33" pos:end="69:34">-&gt;</operator><name pos:start="69:35" pos:end="69:38">aux1</name></name> <operator pos:start="69:40" pos:end="69:41">||</operator> <name pos:start="69:43" pos:end="69:55"><name pos:start="69:43" pos:end="69:49">ncq_fis</name><operator pos:start="69:50" pos:end="69:51">-&gt;</operator><name pos:start="69:52" pos:end="69:55">aux2</name></name> <operator pos:start="69:57" pos:end="69:58">||</operator> <name pos:start="69:60" pos:end="69:72"><name pos:start="69:60" pos:end="69:66">ncq_fis</name><operator pos:start="69:67" pos:end="69:68">-&gt;</operator><name pos:start="69:69" pos:end="69:72">aux3</name></name></expr>)</condition> <block pos:start="69:75" pos:end="73:5">{<block_content pos:start="71:9" pos:end="71:70">

        <expr_stmt pos:start="71:9" pos:end="71:70"><expr pos:start="71:9" pos:end="71:69"><call pos:start="71:9" pos:end="71:69"><name pos:start="71:9" pos:end="71:15">DPRINTF</name><argument_list pos:start="71:16" pos:end="71:69">(<argument pos:start="71:17" pos:end="71:20"><expr pos:start="71:17" pos:end="71:20"><name pos:start="71:17" pos:end="71:20">port</name></expr></argument>, <argument pos:start="71:23" pos:end="71:68"><expr pos:start="71:23" pos:end="71:68"><literal type="string" pos:start="71:23" pos:end="71:68">"Warn: Attempt to use NCQ auxiliary fields.\n"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    </block_content>}</block></if></if_stmt>

    <if_stmt pos:start="75:5" pos:end="79:5"><if pos:start="75:5" pos:end="79:5">if <condition pos:start="75:8" pos:end="75:38">(<expr pos:start="75:9" pos:end="75:37"><name pos:start="75:9" pos:end="75:21"><name pos:start="75:9" pos:end="75:15">ncq_fis</name><operator pos:start="75:16" pos:end="75:17">-&gt;</operator><name pos:start="75:18" pos:end="75:21">prio</name></name> <operator pos:start="75:23" pos:end="75:24">||</operator> <name pos:start="75:26" pos:end="75:37"><name pos:start="75:26" pos:end="75:32">ncq_fis</name><operator pos:start="75:33" pos:end="75:34">-&gt;</operator><name pos:start="75:35" pos:end="75:37">icc</name></name></expr>)</condition> <block pos:start="75:40" pos:end="79:5">{<block_content pos:start="77:9" pos:end="77:76">

        <expr_stmt pos:start="77:9" pos:end="77:76"><expr pos:start="77:9" pos:end="77:75"><call pos:start="77:9" pos:end="77:75"><name pos:start="77:9" pos:end="77:15">DPRINTF</name><argument_list pos:start="77:16" pos:end="77:75">(<argument pos:start="77:17" pos:end="77:20"><expr pos:start="77:17" pos:end="77:20"><name pos:start="77:17" pos:end="77:20">port</name></expr></argument>, <argument pos:start="77:23" pos:end="77:74"><expr pos:start="77:23" pos:end="77:74"><literal type="string" pos:start="77:23" pos:end="77:74">"Warn: Unsupported attempt to use PRIO/ICC fields\n"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    </block_content>}</block></if></if_stmt>

    <if_stmt pos:start="81:5" pos:end="85:5"><if pos:start="81:5" pos:end="85:5">if <condition pos:start="81:8" pos:end="81:40">(<expr pos:start="81:9" pos:end="81:39"><name pos:start="81:9" pos:end="81:20"><name pos:start="81:9" pos:end="81:15">ncq_fis</name><operator pos:start="81:16" pos:end="81:17">-&gt;</operator><name pos:start="81:18" pos:end="81:20">fua</name></name> <operator pos:start="81:22" pos:end="81:22">&amp;</operator> <name pos:start="81:24" pos:end="81:39">NCQ_FIS_FUA_MASK</name></expr>)</condition> <block pos:start="81:42" pos:end="85:5">{<block_content pos:start="83:9" pos:end="83:78">

        <expr_stmt pos:start="83:9" pos:end="83:78"><expr pos:start="83:9" pos:end="83:77"><call pos:start="83:9" pos:end="83:77"><name pos:start="83:9" pos:end="83:15">DPRINTF</name><argument_list pos:start="83:16" pos:end="83:77">(<argument pos:start="83:17" pos:end="83:20"><expr pos:start="83:17" pos:end="83:20"><name pos:start="83:17" pos:end="83:20">port</name></expr></argument>, <argument pos:start="83:23" pos:end="83:76"><expr pos:start="83:23" pos:end="83:76"><literal type="string" pos:start="83:23" pos:end="83:76">"Warn: Unsupported attempt to use Force Unit Access\n"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    </block_content>}</block></if></if_stmt>

    <if_stmt pos:start="87:5" pos:end="91:5"><if pos:start="87:5" pos:end="91:5">if <condition pos:start="87:8" pos:end="87:41">(<expr pos:start="87:9" pos:end="87:40"><name pos:start="87:9" pos:end="87:20"><name pos:start="87:9" pos:end="87:15">ncq_fis</name><operator pos:start="87:16" pos:end="87:17">-&gt;</operator><name pos:start="87:18" pos:end="87:20">tag</name></name> <operator pos:start="87:22" pos:end="87:22">&amp;</operator> <name pos:start="87:24" pos:end="87:40">NCQ_FIS_RARC_MASK</name></expr>)</condition> <block pos:start="87:43" pos:end="91:5">{<block_content pos:start="89:9" pos:end="89:75">

        <expr_stmt pos:start="89:9" pos:end="89:75"><expr pos:start="89:9" pos:end="89:74"><call pos:start="89:9" pos:end="89:74"><name pos:start="89:9" pos:end="89:15">DPRINTF</name><argument_list pos:start="89:16" pos:end="89:74">(<argument pos:start="89:17" pos:end="89:20"><expr pos:start="89:17" pos:end="89:20"><name pos:start="89:17" pos:end="89:20">port</name></expr></argument>, <argument pos:start="89:23" pos:end="89:73"><expr pos:start="89:23" pos:end="89:73"><literal type="string" pos:start="89:23" pos:end="89:73">"Warn: Unsupported attempt to use Rebuild Assist\n"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    </block_content>}</block></if></if_stmt>



    <expr_stmt pos:start="95:5" pos:end="97:58"><expr pos:start="95:5" pos:end="97:57"><name pos:start="95:5" pos:end="95:25"><name pos:start="95:5" pos:end="95:11">ncq_tfs</name><operator pos:start="95:12" pos:end="95:13">-&gt;</operator><name pos:start="95:14" pos:end="95:25">sector_count</name></name> <operator pos:start="95:27" pos:end="95:27">=</operator> <operator pos:start="95:29" pos:end="95:29">(</operator><operator pos:start="95:30" pos:end="95:30">(</operator><name pos:start="95:31" pos:end="95:38">uint16_t</name><operator pos:start="95:39" pos:end="95:39">)</operator><name pos:start="95:40" pos:end="95:65"><name pos:start="95:40" pos:end="95:46">ncq_fis</name><operator pos:start="95:47" pos:end="95:48">-&gt;</operator><name pos:start="95:49" pos:end="95:65">sector_count_high</name></name> <operator pos:start="95:67" pos:end="95:68">&lt;&lt;</operator> <literal type="number" pos:start="95:70" pos:end="95:70">8</literal><operator pos:start="95:71" pos:end="95:71">)</operator> <operator pos:start="95:73" pos:end="95:73">|</operator>

                                <name pos:start="97:33" pos:end="97:57"><name pos:start="97:33" pos:end="97:39">ncq_fis</name><operator pos:start="97:40" pos:end="97:41">-&gt;</operator><name pos:start="97:42" pos:end="97:57">sector_count_low</name></name></expr>;</expr_stmt>

    <expr_stmt pos:start="99:5" pos:end="99:39"><expr pos:start="99:5" pos:end="99:38"><name pos:start="99:5" pos:end="99:8">size</name> <operator pos:start="99:10" pos:end="99:10">=</operator> <name pos:start="99:12" pos:end="99:32"><name pos:start="99:12" pos:end="99:18">ncq_tfs</name><operator pos:start="99:19" pos:end="99:20">-&gt;</operator><name pos:start="99:21" pos:end="99:32">sector_count</name></name> <operator pos:start="99:34" pos:end="99:34">*</operator> <literal type="number" pos:start="99:36" pos:end="99:38">512</literal></expr>;</expr_stmt>

    <expr_stmt pos:start="101:5" pos:end="101:56"><expr pos:start="101:5" pos:end="101:55"><call pos:start="101:5" pos:end="101:55"><name pos:start="101:5" pos:end="101:24">ahci_populate_sglist</name><argument_list pos:start="101:25" pos:end="101:55">(<argument pos:start="101:26" pos:end="101:27"><expr pos:start="101:26" pos:end="101:27"><name pos:start="101:26" pos:end="101:27">ad</name></expr></argument>, <argument pos:start="101:30" pos:end="101:45"><expr pos:start="101:30" pos:end="101:45"><operator pos:start="101:30" pos:end="101:30">&amp;</operator><name pos:start="101:31" pos:end="101:45"><name pos:start="101:31" pos:end="101:37">ncq_tfs</name><operator pos:start="101:38" pos:end="101:39">-&gt;</operator><name pos:start="101:40" pos:end="101:45">sglist</name></name></expr></argument>, <argument pos:start="101:48" pos:end="101:51"><expr pos:start="101:48" pos:end="101:51"><name pos:start="101:48" pos:end="101:51">size</name></expr></argument>, <argument pos:start="101:54" pos:end="101:54"><expr pos:start="101:54" pos:end="101:54"><literal type="number" pos:start="101:54" pos:end="101:54">0</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>



    <if_stmt pos:start="105:5" pos:end="129:5"><if pos:start="105:5" pos:end="121:5">if <condition pos:start="105:8" pos:end="105:36">(<expr pos:start="105:9" pos:end="105:35"><name pos:start="105:9" pos:end="105:28"><name pos:start="105:9" pos:end="105:15">ncq_tfs</name><operator pos:start="105:16" pos:end="105:17">-&gt;</operator><name pos:start="105:18" pos:end="105:23">sglist</name><operator pos:start="105:24" pos:end="105:24">.</operator><name pos:start="105:25" pos:end="105:28">size</name></name> <operator pos:start="105:30" pos:end="105:30">&lt;</operator> <name pos:start="105:32" pos:end="105:35">size</name></expr>)</condition> <block pos:start="105:38" pos:end="121:5">{<block_content pos:start="107:9" pos:end="119:15">

        <expr_stmt pos:start="107:9" pos:end="111:49"><expr pos:start="107:9" pos:end="111:48"><call pos:start="107:9" pos:end="111:48"><name pos:start="107:9" pos:end="107:20">error_report</name><argument_list pos:start="107:21" pos:end="111:48">(<argument pos:start="107:22" pos:end="109:65"><expr pos:start="107:22" pos:end="109:65"><literal type="string" pos:start="107:22" pos:end="107:65">"ahci: PRDT length for NCQ command (0x%zx) "</literal>

                     <literal type="string" pos:start="109:22" pos:end="109:65">"is smaller than the requested size (0x%zx)"</literal></expr></argument>,

                     <argument pos:start="111:22" pos:end="111:41"><expr pos:start="111:22" pos:end="111:41"><name pos:start="111:22" pos:end="111:41"><name pos:start="111:22" pos:end="111:28">ncq_tfs</name><operator pos:start="111:29" pos:end="111:30">-&gt;</operator><name pos:start="111:31" pos:end="111:36">sglist</name><operator pos:start="111:37" pos:end="111:37">.</operator><name pos:start="111:38" pos:end="111:41">size</name></name></expr></argument>, <argument pos:start="111:44" pos:end="111:47"><expr pos:start="111:44" pos:end="111:47"><name pos:start="111:44" pos:end="111:47">size</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <expr_stmt pos:start="113:9" pos:end="113:46"><expr pos:start="113:9" pos:end="113:45"><call pos:start="113:9" pos:end="113:45"><name pos:start="113:9" pos:end="113:27">qemu_sglist_destroy</name><argument_list pos:start="113:28" pos:end="113:45">(<argument pos:start="113:29" pos:end="113:44"><expr pos:start="113:29" pos:end="113:44"><operator pos:start="113:29" pos:end="113:29">&amp;</operator><name pos:start="113:30" pos:end="113:44"><name pos:start="113:30" pos:end="113:36">ncq_tfs</name><operator pos:start="113:37" pos:end="113:38">-&gt;</operator><name pos:start="113:39" pos:end="113:44">sglist</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <expr_stmt pos:start="115:9" pos:end="115:25"><expr pos:start="115:9" pos:end="115:24"><call pos:start="115:9" pos:end="115:24"><name pos:start="115:9" pos:end="115:15">ncq_err</name><argument_list pos:start="115:16" pos:end="115:24">(<argument pos:start="115:17" pos:end="115:23"><expr pos:start="115:17" pos:end="115:23"><name pos:start="115:17" pos:end="115:23">ncq_tfs</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <expr_stmt pos:start="117:9" pos:end="117:57"><expr pos:start="117:9" pos:end="117:56"><call pos:start="117:9" pos:end="117:56"><name pos:start="117:9" pos:end="117:24">ahci_trigger_irq</name><argument_list pos:start="117:25" pos:end="117:56">(<argument pos:start="117:26" pos:end="117:32"><expr pos:start="117:26" pos:end="117:32"><name pos:start="117:26" pos:end="117:32"><name pos:start="117:26" pos:end="117:27">ad</name><operator pos:start="117:28" pos:end="117:29">-&gt;</operator><name pos:start="117:30" pos:end="117:32">hba</name></name></expr></argument>, <argument pos:start="117:35" pos:end="117:36"><expr pos:start="117:35" pos:end="117:36"><name pos:start="117:35" pos:end="117:36">ad</name></expr></argument>, <argument pos:start="117:39" pos:end="117:55"><expr pos:start="117:39" pos:end="117:55"><name pos:start="117:39" pos:end="117:55">PORT_IRQ_OVERFLOW</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <return pos:start="119:9" pos:end="119:15">return;</return>

    </block_content>}</block></if> <if type="elseif" pos:start="121:7" pos:end="129:5">else if <condition pos:start="121:15" pos:end="121:44">(<expr pos:start="121:16" pos:end="121:43"><name pos:start="121:16" pos:end="121:35"><name pos:start="121:16" pos:end="121:22">ncq_tfs</name><operator pos:start="121:23" pos:end="121:24">-&gt;</operator><name pos:start="121:25" pos:end="121:30">sglist</name><operator pos:start="121:31" pos:end="121:31">.</operator><name pos:start="121:32" pos:end="121:35">size</name></name> <operator pos:start="121:37" pos:end="121:38">!=</operator> <name pos:start="121:40" pos:end="121:43">size</name></expr>)</condition> <block pos:start="121:46" pos:end="129:5">{<block_content pos:start="123:9" pos:end="127:44">

        <expr_stmt pos:start="123:9" pos:end="127:44"><expr pos:start="123:9" pos:end="127:43"><call pos:start="123:9" pos:end="127:43"><name pos:start="123:9" pos:end="123:15">DPRINTF</name><argument_list pos:start="123:16" pos:end="127:43">(<argument pos:start="123:17" pos:end="123:20"><expr pos:start="123:17" pos:end="123:20"><name pos:start="123:17" pos:end="123:20">port</name></expr></argument>, <argument pos:start="123:23" pos:end="125:56"><expr pos:start="123:23" pos:end="125:56"><literal type="string" pos:start="123:23" pos:end="123:43">"Warn: PRDTL (0x%zx)"</literal>

                <literal type="string" pos:start="125:17" pos:end="125:56">" does not match requested size (0x%zx)"</literal></expr></argument>,

                <argument pos:start="127:17" pos:end="127:36"><expr pos:start="127:17" pos:end="127:36"><name pos:start="127:17" pos:end="127:36"><name pos:start="127:17" pos:end="127:23">ncq_tfs</name><operator pos:start="127:24" pos:end="127:25">-&gt;</operator><name pos:start="127:26" pos:end="127:31">sglist</name><operator pos:start="127:32" pos:end="127:32">.</operator><name pos:start="127:33" pos:end="127:36">size</name></name></expr></argument>, <argument pos:start="127:39" pos:end="127:42"><expr pos:start="127:39" pos:end="127:42"><name pos:start="127:39" pos:end="127:42">size</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    </block_content>}</block></if></if_stmt>



    <expr_stmt pos:start="133:5" pos:end="139:39"><expr pos:start="133:5" pos:end="139:38"><call pos:start="133:5" pos:end="139:38"><name pos:start="133:5" pos:end="133:11">DPRINTF</name><argument_list pos:start="133:12" pos:end="139:38">(<argument pos:start="133:13" pos:end="133:16"><expr pos:start="133:13" pos:end="133:16"><name pos:start="133:13" pos:end="133:16">port</name></expr></argument>, <argument pos:start="133:19" pos:end="135:35"><expr pos:start="133:19" pos:end="135:35"><literal type="string" pos:start="133:19" pos:end="133:43">"NCQ transfer LBA from %"</literal><name pos:start="133:44" pos:end="133:49">PRId64</name><literal type="string" pos:start="133:50" pos:end="133:56">" to %"</literal><name pos:start="133:57" pos:end="133:62">PRId64</name><literal type="string" pos:start="133:63" pos:end="133:66">", "</literal>

            <literal type="string" pos:start="135:13" pos:end="135:25">"drive max %"</literal><name pos:start="135:26" pos:end="135:31">PRId64</name><literal type="string" pos:start="135:32" pos:end="135:35">"\n"</literal></expr></argument>,

            <argument pos:start="137:13" pos:end="137:24"><expr pos:start="137:13" pos:end="137:24"><name pos:start="137:13" pos:end="137:24"><name pos:start="137:13" pos:end="137:19">ncq_tfs</name><operator pos:start="137:20" pos:end="137:21">-&gt;</operator><name pos:start="137:22" pos:end="137:24">lba</name></name></expr></argument>, <argument pos:start="137:27" pos:end="137:66"><expr pos:start="137:27" pos:end="137:66"><name pos:start="137:27" pos:end="137:38"><name pos:start="137:27" pos:end="137:33">ncq_tfs</name><operator pos:start="137:34" pos:end="137:35">-&gt;</operator><name pos:start="137:36" pos:end="137:38">lba</name></name> <operator pos:start="137:40" pos:end="137:40">+</operator> <name pos:start="137:42" pos:end="137:62"><name pos:start="137:42" pos:end="137:48">ncq_tfs</name><operator pos:start="137:49" pos:end="137:50">-&gt;</operator><name pos:start="137:51" pos:end="137:62">sector_count</name></name> <operator pos:start="137:64" pos:end="137:64">-</operator> <literal type="number" pos:start="137:66" pos:end="137:66">1</literal></expr></argument>,

            <argument pos:start="139:13" pos:end="139:37"><expr pos:start="139:13" pos:end="139:37"><name pos:start="139:13" pos:end="139:33"><name pos:start="139:13" pos:end="139:21">ide_state</name><operator pos:start="139:22" pos:end="139:23">-&gt;</operator><name pos:start="139:24" pos:end="139:33">nb_sectors</name></name> <operator pos:start="139:35" pos:end="139:35">-</operator> <literal type="number" pos:start="139:37" pos:end="139:37">1</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>



    <switch pos:start="143:5" pos:end="221:5">switch <condition pos:start="143:12" pos:end="143:25">(<expr pos:start="143:13" pos:end="143:24"><name pos:start="143:13" pos:end="143:24"><name pos:start="143:13" pos:end="143:19">ncq_tfs</name><operator pos:start="143:20" pos:end="143:21">-&gt;</operator><name pos:start="143:22" pos:end="143:24">cmd</name></name></expr>)</condition> <block pos:start="143:27" pos:end="221:5">{<block_content pos:start="145:9" pos:end="219:29">

        <case pos:start="145:9" pos:end="145:31">case <expr pos:start="145:14" pos:end="145:30"><name pos:start="145:14" pos:end="145:30">READ_FPDMA_QUEUED</name></expr>:</case>

            <expr_stmt pos:start="147:13" pos:end="151:71"><expr pos:start="147:13" pos:end="151:70"><call pos:start="147:13" pos:end="151:70"><name pos:start="147:13" pos:end="147:19">DPRINTF</name><argument_list pos:start="147:20" pos:end="151:70">(<argument pos:start="147:21" pos:end="147:24"><expr pos:start="147:21" pos:end="147:24"><name pos:start="147:21" pos:end="147:24">port</name></expr></argument>, <argument pos:start="147:27" pos:end="149:30"><expr pos:start="147:27" pos:end="149:30"><literal type="string" pos:start="147:27" pos:end="147:61">"NCQ reading %d sectors from LBA %"</literal><name pos:start="147:62" pos:end="147:67">PRId64</name><literal type="string" pos:start="147:68" pos:end="147:71">", "</literal>

                    <literal type="string" pos:start="149:21" pos:end="149:30">"tag %d\n"</literal></expr></argument>,

                    <argument pos:start="151:21" pos:end="151:41"><expr pos:start="151:21" pos:end="151:41"><name pos:start="151:21" pos:end="151:41"><name pos:start="151:21" pos:end="151:27">ncq_tfs</name><operator pos:start="151:28" pos:end="151:29">-&gt;</operator><name pos:start="151:30" pos:end="151:41">sector_count</name></name></expr></argument>, <argument pos:start="151:44" pos:end="151:55"><expr pos:start="151:44" pos:end="151:55"><name pos:start="151:44" pos:end="151:55"><name pos:start="151:44" pos:end="151:50">ncq_tfs</name><operator pos:start="151:51" pos:end="151:52">-&gt;</operator><name pos:start="151:53" pos:end="151:55">lba</name></name></expr></argument>, <argument pos:start="151:58" pos:end="151:69"><expr pos:start="151:58" pos:end="151:69"><name pos:start="151:58" pos:end="151:69"><name pos:start="151:58" pos:end="151:64">ncq_tfs</name><operator pos:start="151:65" pos:end="151:66">-&gt;</operator><name pos:start="151:67" pos:end="151:69">tag</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>



            <expr_stmt pos:start="155:13" pos:end="157:48"><expr pos:start="155:13" pos:end="157:47"><call pos:start="155:13" pos:end="157:47"><name pos:start="155:13" pos:end="155:19">DPRINTF</name><argument_list pos:start="155:20" pos:end="157:47">(<argument pos:start="155:21" pos:end="155:24"><expr pos:start="155:21" pos:end="155:24"><name pos:start="155:21" pos:end="155:24">port</name></expr></argument>, <argument pos:start="155:27" pos:end="155:55"><expr pos:start="155:27" pos:end="155:55"><literal type="string" pos:start="155:27" pos:end="155:45">"tag %d aio read %"</literal><name pos:start="155:46" pos:end="155:51">PRId64</name><literal type="string" pos:start="155:52" pos:end="155:55">"\n"</literal></expr></argument>,

                    <argument pos:start="157:21" pos:end="157:32"><expr pos:start="157:21" pos:end="157:32"><name pos:start="157:21" pos:end="157:32"><name pos:start="157:21" pos:end="157:27">ncq_tfs</name><operator pos:start="157:28" pos:end="157:29">-&gt;</operator><name pos:start="157:30" pos:end="157:32">tag</name></name></expr></argument>, <argument pos:start="157:35" pos:end="157:46"><expr pos:start="157:35" pos:end="157:46"><name pos:start="157:35" pos:end="157:46"><name pos:start="157:35" pos:end="157:41">ncq_tfs</name><operator pos:start="157:42" pos:end="157:43">-&gt;</operator><name pos:start="157:44" pos:end="157:46">lba</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>



            <expr_stmt pos:start="161:13" pos:end="163:62"><expr pos:start="161:13" pos:end="163:61"><call pos:start="161:13" pos:end="163:61"><name pos:start="161:13" pos:end="161:26">dma_acct_start</name><argument_list pos:start="161:27" pos:end="163:61">(<argument pos:start="161:28" pos:end="161:41"><expr pos:start="161:28" pos:end="161:41"><name pos:start="161:28" pos:end="161:41"><name pos:start="161:28" pos:end="161:36">ide_state</name><operator pos:start="161:37" pos:end="161:38">-&gt;</operator><name pos:start="161:39" pos:end="161:41">blk</name></name></expr></argument>, <argument pos:start="161:44" pos:end="161:57"><expr pos:start="161:44" pos:end="161:57"><operator pos:start="161:44" pos:end="161:44">&amp;</operator><name pos:start="161:45" pos:end="161:57"><name pos:start="161:45" pos:end="161:51">ncq_tfs</name><operator pos:start="161:52" pos:end="161:53">-&gt;</operator><name pos:start="161:54" pos:end="161:57">acct</name></name></expr></argument>,

                           <argument pos:start="163:28" pos:end="163:43"><expr pos:start="163:28" pos:end="163:43"><operator pos:start="163:28" pos:end="163:28">&amp;</operator><name pos:start="163:29" pos:end="163:43"><name pos:start="163:29" pos:end="163:35">ncq_tfs</name><operator pos:start="163:36" pos:end="163:37">-&gt;</operator><name pos:start="163:38" pos:end="163:43">sglist</name></name></expr></argument>, <argument pos:start="163:46" pos:end="163:60"><expr pos:start="163:46" pos:end="163:60"><name pos:start="163:46" pos:end="163:60">BLOCK_ACCT_READ</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

            <expr_stmt pos:start="165:13" pos:end="169:59"><expr pos:start="165:13" pos:end="169:58"><name pos:start="165:13" pos:end="165:26"><name pos:start="165:13" pos:end="165:19">ncq_tfs</name><operator pos:start="165:20" pos:end="165:21">-&gt;</operator><name pos:start="165:22" pos:end="165:26">aiocb</name></name> <operator pos:start="165:28" pos:end="165:28">=</operator> <call pos:start="165:30" pos:end="169:58"><name pos:start="165:30" pos:end="165:41">dma_blk_read</name><argument_list pos:start="165:42" pos:end="169:58">(<argument pos:start="165:43" pos:end="165:56"><expr pos:start="165:43" pos:end="165:56"><name pos:start="165:43" pos:end="165:56"><name pos:start="165:43" pos:end="165:51">ide_state</name><operator pos:start="165:52" pos:end="165:53">-&gt;</operator><name pos:start="165:54" pos:end="165:56">blk</name></name></expr></argument>,

                                          <argument pos:start="167:43" pos:end="167:58"><expr pos:start="167:43" pos:end="167:58"><operator pos:start="167:43" pos:end="167:43">&amp;</operator><name pos:start="167:44" pos:end="167:58"><name pos:start="167:44" pos:end="167:50">ncq_tfs</name><operator pos:start="167:51" pos:end="167:52">-&gt;</operator><name pos:start="167:53" pos:end="167:58">sglist</name></name></expr></argument>, <argument pos:start="167:61" pos:end="167:72"><expr pos:start="167:61" pos:end="167:72"><name pos:start="167:61" pos:end="167:72"><name pos:start="167:61" pos:end="167:67">ncq_tfs</name><operator pos:start="167:68" pos:end="167:69">-&gt;</operator><name pos:start="167:70" pos:end="167:72">lba</name></name></expr></argument>,

                                          <argument pos:start="169:43" pos:end="169:48"><expr pos:start="169:43" pos:end="169:48"><name pos:start="169:43" pos:end="169:48">ncq_cb</name></expr></argument>, <argument pos:start="169:51" pos:end="169:57"><expr pos:start="169:51" pos:end="169:57"><name pos:start="169:51" pos:end="169:57">ncq_tfs</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

            <break pos:start="171:13" pos:end="171:18">break;</break>

        <case pos:start="173:9" pos:end="173:32">case <expr pos:start="173:14" pos:end="173:31"><name pos:start="173:14" pos:end="173:31">WRITE_FPDMA_QUEUED</name></expr>:</case>

            <expr_stmt pos:start="175:13" pos:end="177:71"><expr pos:start="175:13" pos:end="177:70"><call pos:start="175:13" pos:end="177:70"><name pos:start="175:13" pos:end="175:19">DPRINTF</name><argument_list pos:start="175:20" pos:end="177:70">(<argument pos:start="175:21" pos:end="175:24"><expr pos:start="175:21" pos:end="175:24"><name pos:start="175:21" pos:end="175:24">port</name></expr></argument>, <argument pos:start="175:27" pos:end="175:77"><expr pos:start="175:27" pos:end="175:77"><literal type="string" pos:start="175:27" pos:end="175:59">"NCQ writing %d sectors to LBA %"</literal><name pos:start="175:60" pos:end="175:65">PRId64</name><literal type="string" pos:start="175:66" pos:end="175:77">", tag %d\n"</literal></expr></argument>,

                    <argument pos:start="177:21" pos:end="177:41"><expr pos:start="177:21" pos:end="177:41"><name pos:start="177:21" pos:end="177:41"><name pos:start="177:21" pos:end="177:27">ncq_tfs</name><operator pos:start="177:28" pos:end="177:29">-&gt;</operator><name pos:start="177:30" pos:end="177:41">sector_count</name></name></expr></argument>, <argument pos:start="177:44" pos:end="177:55"><expr pos:start="177:44" pos:end="177:55"><name pos:start="177:44" pos:end="177:55"><name pos:start="177:44" pos:end="177:50">ncq_tfs</name><operator pos:start="177:51" pos:end="177:52">-&gt;</operator><name pos:start="177:53" pos:end="177:55">lba</name></name></expr></argument>, <argument pos:start="177:58" pos:end="177:69"><expr pos:start="177:58" pos:end="177:69"><name pos:start="177:58" pos:end="177:69"><name pos:start="177:58" pos:end="177:64">ncq_tfs</name><operator pos:start="177:65" pos:end="177:66">-&gt;</operator><name pos:start="177:67" pos:end="177:69">tag</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>



            <expr_stmt pos:start="181:13" pos:end="183:48"><expr pos:start="181:13" pos:end="183:47"><call pos:start="181:13" pos:end="183:47"><name pos:start="181:13" pos:end="181:19">DPRINTF</name><argument_list pos:start="181:20" pos:end="183:47">(<argument pos:start="181:21" pos:end="181:24"><expr pos:start="181:21" pos:end="181:24"><name pos:start="181:21" pos:end="181:24">port</name></expr></argument>, <argument pos:start="181:27" pos:end="181:56"><expr pos:start="181:27" pos:end="181:56"><literal type="string" pos:start="181:27" pos:end="181:46">"tag %d aio write %"</literal><name pos:start="181:47" pos:end="181:52">PRId64</name><literal type="string" pos:start="181:53" pos:end="181:56">"\n"</literal></expr></argument>,

                    <argument pos:start="183:21" pos:end="183:32"><expr pos:start="183:21" pos:end="183:32"><name pos:start="183:21" pos:end="183:32"><name pos:start="183:21" pos:end="183:27">ncq_tfs</name><operator pos:start="183:28" pos:end="183:29">-&gt;</operator><name pos:start="183:30" pos:end="183:32">tag</name></name></expr></argument>, <argument pos:start="183:35" pos:end="183:46"><expr pos:start="183:35" pos:end="183:46"><name pos:start="183:35" pos:end="183:46"><name pos:start="183:35" pos:end="183:41">ncq_tfs</name><operator pos:start="183:42" pos:end="183:43">-&gt;</operator><name pos:start="183:44" pos:end="183:46">lba</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>



            <expr_stmt pos:start="187:13" pos:end="189:63"><expr pos:start="187:13" pos:end="189:62"><call pos:start="187:13" pos:end="189:62"><name pos:start="187:13" pos:end="187:26">dma_acct_start</name><argument_list pos:start="187:27" pos:end="189:62">(<argument pos:start="187:28" pos:end="187:41"><expr pos:start="187:28" pos:end="187:41"><name pos:start="187:28" pos:end="187:41"><name pos:start="187:28" pos:end="187:36">ide_state</name><operator pos:start="187:37" pos:end="187:38">-&gt;</operator><name pos:start="187:39" pos:end="187:41">blk</name></name></expr></argument>, <argument pos:start="187:44" pos:end="187:57"><expr pos:start="187:44" pos:end="187:57"><operator pos:start="187:44" pos:end="187:44">&amp;</operator><name pos:start="187:45" pos:end="187:57"><name pos:start="187:45" pos:end="187:51">ncq_tfs</name><operator pos:start="187:52" pos:end="187:53">-&gt;</operator><name pos:start="187:54" pos:end="187:57">acct</name></name></expr></argument>,

                           <argument pos:start="189:28" pos:end="189:43"><expr pos:start="189:28" pos:end="189:43"><operator pos:start="189:28" pos:end="189:28">&amp;</operator><name pos:start="189:29" pos:end="189:43"><name pos:start="189:29" pos:end="189:35">ncq_tfs</name><operator pos:start="189:36" pos:end="189:37">-&gt;</operator><name pos:start="189:38" pos:end="189:43">sglist</name></name></expr></argument>, <argument pos:start="189:46" pos:end="189:61"><expr pos:start="189:46" pos:end="189:61"><name pos:start="189:46" pos:end="189:61">BLOCK_ACCT_WRITE</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

            <expr_stmt pos:start="191:13" pos:end="195:60"><expr pos:start="191:13" pos:end="195:59"><name pos:start="191:13" pos:end="191:26"><name pos:start="191:13" pos:end="191:19">ncq_tfs</name><operator pos:start="191:20" pos:end="191:21">-&gt;</operator><name pos:start="191:22" pos:end="191:26">aiocb</name></name> <operator pos:start="191:28" pos:end="191:28">=</operator> <call pos:start="191:30" pos:end="195:59"><name pos:start="191:30" pos:end="191:42">dma_blk_write</name><argument_list pos:start="191:43" pos:end="195:59">(<argument pos:start="191:44" pos:end="191:57"><expr pos:start="191:44" pos:end="191:57"><name pos:start="191:44" pos:end="191:57"><name pos:start="191:44" pos:end="191:52">ide_state</name><operator pos:start="191:53" pos:end="191:54">-&gt;</operator><name pos:start="191:55" pos:end="191:57">blk</name></name></expr></argument>,

                                           <argument pos:start="193:44" pos:end="193:59"><expr pos:start="193:44" pos:end="193:59"><operator pos:start="193:44" pos:end="193:44">&amp;</operator><name pos:start="193:45" pos:end="193:59"><name pos:start="193:45" pos:end="193:51">ncq_tfs</name><operator pos:start="193:52" pos:end="193:53">-&gt;</operator><name pos:start="193:54" pos:end="193:59">sglist</name></name></expr></argument>, <argument pos:start="193:62" pos:end="193:73"><expr pos:start="193:62" pos:end="193:73"><name pos:start="193:62" pos:end="193:73"><name pos:start="193:62" pos:end="193:68">ncq_tfs</name><operator pos:start="193:69" pos:end="193:70">-&gt;</operator><name pos:start="193:71" pos:end="193:73">lba</name></name></expr></argument>,

                                           <argument pos:start="195:44" pos:end="195:49"><expr pos:start="195:44" pos:end="195:49"><name pos:start="195:44" pos:end="195:49">ncq_cb</name></expr></argument>, <argument pos:start="195:52" pos:end="195:58"><expr pos:start="195:52" pos:end="195:58"><name pos:start="195:52" pos:end="195:58">ncq_tfs</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

            <break pos:start="197:13" pos:end="197:18">break;</break>

        <default pos:start="199:9" pos:end="199:16">default:</default>

            <if_stmt pos:start="201:13" pos:end="215:13"><if pos:start="201:13" pos:end="209:13">if <condition pos:start="201:16" pos:end="201:35">(<expr pos:start="201:17" pos:end="201:34"><call pos:start="201:17" pos:end="201:34"><name pos:start="201:17" pos:end="201:22">is_ncq</name><argument_list pos:start="201:23" pos:end="201:34">(<argument pos:start="201:24" pos:end="201:33"><expr pos:start="201:24" pos:end="201:33"><name pos:start="201:24" pos:end="201:33"><name pos:start="201:24" pos:end="201:30">cmd_fis</name><index pos:start="201:31" pos:end="201:33">[<expr pos:start="201:32" pos:end="201:32"><literal type="number" pos:start="201:32" pos:end="201:32">2</literal></expr>]</index></name></expr></argument>)</argument_list></call></expr>)</condition> <block pos:start="201:37" pos:end="209:13">{<block_content pos:start="203:17" pos:end="207:36">

                <expr_stmt pos:start="203:17" pos:end="207:36"><expr pos:start="203:17" pos:end="207:35"><call pos:start="203:17" pos:end="207:35"><name pos:start="203:17" pos:end="203:23">DPRINTF</name><argument_list pos:start="203:24" pos:end="207:35">(<argument pos:start="203:25" pos:end="203:28"><expr pos:start="203:25" pos:end="203:28"><name pos:start="203:25" pos:end="203:28">port</name></expr></argument>,

                        <argument pos:start="205:25" pos:end="205:76"><expr pos:start="205:25" pos:end="205:76"><literal type="string" pos:start="205:25" pos:end="205:76">"error: unsupported NCQ command (0x%02x) received\n"</literal></expr></argument>,

                        <argument pos:start="207:25" pos:end="207:34"><expr pos:start="207:25" pos:end="207:34"><name pos:start="207:25" pos:end="207:34"><name pos:start="207:25" pos:end="207:31">cmd_fis</name><index pos:start="207:32" pos:end="207:34">[<expr pos:start="207:33" pos:end="207:33"><literal type="number" pos:start="207:33" pos:end="207:33">2</literal></expr>]</index></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

            </block_content>}</block></if> <else pos:start="209:15" pos:end="215:13">else <block pos:start="209:20" pos:end="215:13">{<block_content pos:start="211:17" pos:end="213:76">

                <expr_stmt pos:start="211:17" pos:end="213:76"><expr pos:start="211:17" pos:end="213:75"><call pos:start="211:17" pos:end="213:75"><name pos:start="211:17" pos:end="211:23">DPRINTF</name><argument_list pos:start="211:24" pos:end="213:75">(<argument pos:start="211:25" pos:end="211:28"><expr pos:start="211:25" pos:end="211:28"><name pos:start="211:25" pos:end="211:28">port</name></expr></argument>,

                        <argument pos:start="213:25" pos:end="213:74"><expr pos:start="213:25" pos:end="213:74"><literal type="string" pos:start="213:25" pos:end="213:74">"error: tried to process non-NCQ command as NCQ\n"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

            </block_content>}</block></else></if_stmt>

            <expr_stmt pos:start="217:13" pos:end="217:50"><expr pos:start="217:13" pos:end="217:49"><call pos:start="217:13" pos:end="217:49"><name pos:start="217:13" pos:end="217:31">qemu_sglist_destroy</name><argument_list pos:start="217:32" pos:end="217:49">(<argument pos:start="217:33" pos:end="217:48"><expr pos:start="217:33" pos:end="217:48"><operator pos:start="217:33" pos:end="217:33">&amp;</operator><name pos:start="217:34" pos:end="217:48"><name pos:start="217:34" pos:end="217:40">ncq_tfs</name><operator pos:start="217:41" pos:end="217:42">-&gt;</operator><name pos:start="217:43" pos:end="217:48">sglist</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

            <expr_stmt pos:start="219:13" pos:end="219:29"><expr pos:start="219:13" pos:end="219:28"><call pos:start="219:13" pos:end="219:28"><name pos:start="219:13" pos:end="219:19">ncq_err</name><argument_list pos:start="219:20" pos:end="219:28">(<argument pos:start="219:21" pos:end="219:27"><expr pos:start="219:21" pos:end="219:27"><name pos:start="219:21" pos:end="219:27">ncq_tfs</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    </block_content>}</block></switch>

</block_content>}</block></function>
</unit>
