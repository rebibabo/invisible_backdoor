<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<unit xmlns="http://www.srcML.org/srcML/src" xmlns:pos="http://www.srcML.org/srcML/position" revision="1.0.0" language="C" filename="dataset/ropgen/aug/0/7162.c" pos:tabs="8"><function pos:start="1:1" pos:end="247:1"><type pos:start="1:1" pos:end="1:10"><specifier pos:start="1:1" pos:end="1:6">static</specifier> <name pos:start="1:8" pos:end="1:10">int</name></type> <name pos:start="1:12" pos:end="1:28">apng_encode_frame</name><parameter_list pos:start="1:29" pos:end="3:97">(<parameter pos:start="1:30" pos:end="1:50"><decl pos:start="1:30" pos:end="1:50"><type pos:start="1:30" pos:end="1:50"><name pos:start="1:30" pos:end="1:43">AVCodecContext</name> <modifier pos:start="1:45" pos:end="1:45">*</modifier></type><name pos:start="1:46" pos:end="1:50">avctx</name></decl></parameter>, <parameter pos:start="1:53" pos:end="1:71"><decl pos:start="1:53" pos:end="1:71"><type pos:start="1:53" pos:end="1:71"><specifier pos:start="1:53" pos:end="1:57">const</specifier> <name pos:start="1:59" pos:end="1:65">AVFrame</name> <modifier pos:start="1:67" pos:end="1:67">*</modifier></type><name pos:start="1:68" pos:end="1:71">pict</name></decl></parameter>,

                             <parameter pos:start="3:30" pos:end="3:59"><decl pos:start="3:30" pos:end="3:59"><type pos:start="3:30" pos:end="3:59"><name pos:start="3:30" pos:end="3:42">APNGFctlChunk</name> <modifier pos:start="3:44" pos:end="3:44">*</modifier></type><name pos:start="3:45" pos:end="3:59">best_fctl_chunk</name></decl></parameter>, <parameter pos:start="3:62" pos:end="3:96"><decl pos:start="3:62" pos:end="3:96"><type pos:start="3:62" pos:end="3:96"><name pos:start="3:62" pos:end="3:74">APNGFctlChunk</name> <modifier pos:start="3:76" pos:end="3:76">*</modifier></type><name pos:start="3:77" pos:end="3:96">best_last_fctl_chunk</name></decl></parameter>)</parameter_list>

<block pos:start="5:1" pos:end="247:1">{<block_content pos:start="7:5" pos:end="245:15">

    <decl_stmt pos:start="7:5" pos:end="7:40"><decl pos:start="7:5" pos:end="7:39"><type pos:start="7:5" pos:end="7:19"><name pos:start="7:5" pos:end="7:17">PNGEncContext</name> <modifier pos:start="7:19" pos:end="7:19">*</modifier></type><name pos:start="7:20" pos:end="7:20">s</name> <init pos:start="7:22" pos:end="7:39">= <expr pos:start="7:24" pos:end="7:39"><name pos:start="7:24" pos:end="7:39"><name pos:start="7:24" pos:end="7:28">avctx</name><operator pos:start="7:29" pos:end="7:30">-&gt;</operator><name pos:start="7:31" pos:end="7:39">priv_data</name></name></expr></init></decl>;</decl_stmt>

    <decl_stmt pos:start="9:5" pos:end="9:12"><decl pos:start="9:5" pos:end="9:11"><type pos:start="9:5" pos:end="9:7"><name pos:start="9:5" pos:end="9:7">int</name></type> <name pos:start="9:9" pos:end="9:11">ret</name></decl>;</decl_stmt>

    <decl_stmt pos:start="11:5" pos:end="11:19"><decl pos:start="11:5" pos:end="11:18"><type pos:start="11:5" pos:end="11:16"><name pos:start="11:5" pos:end="11:12">unsigned</name> <name pos:start="11:14" pos:end="11:16">int</name></type> <name pos:start="11:18" pos:end="11:18">y</name></decl>;</decl_stmt>

    <decl_stmt pos:start="13:5" pos:end="13:23"><decl pos:start="13:5" pos:end="13:22"><type pos:start="13:5" pos:end="13:12"><name pos:start="13:5" pos:end="13:11">AVFrame</name><modifier pos:start="13:12" pos:end="13:12">*</modifier></type> <name pos:start="13:14" pos:end="13:22">diffFrame</name></decl>;</decl_stmt>

    <decl_stmt pos:start="15:5" pos:end="15:47"><decl pos:start="15:5" pos:end="15:46"><type pos:start="15:5" pos:end="15:11"><name pos:start="15:5" pos:end="15:11">uint8_t</name></type> <name pos:start="15:13" pos:end="15:15">bpp</name> <init pos:start="15:17" pos:end="15:46">= <expr pos:start="15:19" pos:end="15:46"><operator pos:start="15:19" pos:end="15:19">(</operator><name pos:start="15:20" pos:end="15:36"><name pos:start="15:20" pos:end="15:20">s</name><operator pos:start="15:21" pos:end="15:22">-&gt;</operator><name pos:start="15:23" pos:end="15:36">bits_per_pixel</name></name> <operator pos:start="15:38" pos:end="15:38">+</operator> <literal type="number" pos:start="15:40" pos:end="15:40">7</literal><operator pos:start="15:41" pos:end="15:41">)</operator> <operator pos:start="15:43" pos:end="15:44">&gt;&gt;</operator> <literal type="number" pos:start="15:46" pos:end="15:46">3</literal></expr></init></decl>;</decl_stmt>

    <decl_stmt pos:start="17:5" pos:end="17:59"><decl pos:start="17:5" pos:end="17:32"><type pos:start="17:5" pos:end="17:13"><name pos:start="17:5" pos:end="17:11">uint8_t</name> <modifier pos:start="17:13" pos:end="17:13">*</modifier></type><name pos:start="17:14" pos:end="17:32">original_bytestream</name></decl>, <decl pos:start="17:35" pos:end="17:58"><type ref="prev" pos:start="17:5" pos:end="17:13"><modifier pos:start="17:35" pos:end="17:35">*</modifier></type><name pos:start="17:36" pos:end="17:58">original_bytestream_end</name></decl>;</decl_stmt>

    <decl_stmt pos:start="19:5" pos:end="19:55"><decl pos:start="19:5" pos:end="19:32"><type pos:start="19:5" pos:end="19:13"><name pos:start="19:5" pos:end="19:11">uint8_t</name> <modifier pos:start="19:13" pos:end="19:13">*</modifier></type><name pos:start="19:14" pos:end="19:28">temp_bytestream</name> <init pos:start="19:30" pos:end="19:32">= <expr pos:start="19:32" pos:end="19:32"><literal type="number" pos:start="19:32" pos:end="19:32">0</literal></expr></init></decl>, <decl pos:start="19:35" pos:end="19:54"><type ref="prev" pos:start="19:5" pos:end="19:13"><modifier pos:start="19:35" pos:end="19:35">*</modifier></type><name pos:start="19:36" pos:end="19:54">temp_bytestream_end</name></decl>;</decl_stmt>

    <decl_stmt pos:start="21:5" pos:end="21:34"><decl pos:start="21:5" pos:end="21:33"><type pos:start="21:5" pos:end="21:12"><name pos:start="21:5" pos:end="21:12">uint32_t</name></type> <name pos:start="21:14" pos:end="21:33">best_sequence_number</name></decl>;</decl_stmt>

    <decl_stmt pos:start="23:5" pos:end="23:29"><decl pos:start="23:5" pos:end="23:28"><type pos:start="23:5" pos:end="23:13"><name pos:start="23:5" pos:end="23:11">uint8_t</name> <modifier pos:start="23:13" pos:end="23:13">*</modifier></type><name pos:start="23:14" pos:end="23:28">best_bytestream</name></decl>;</decl_stmt>

    <decl_stmt pos:start="25:5" pos:end="25:43"><decl pos:start="25:5" pos:end="25:42"><type pos:start="25:5" pos:end="25:10"><name pos:start="25:5" pos:end="25:10">size_t</name></type> <name pos:start="25:12" pos:end="25:31">best_bytestream_size</name> <init pos:start="25:33" pos:end="25:42">= <expr pos:start="25:35" pos:end="25:42"><name pos:start="25:35" pos:end="25:42">SIZE_MAX</name></expr></init></decl>;</decl_stmt>

    <decl_stmt pos:start="27:5" pos:end="27:58"><decl pos:start="27:5" pos:end="27:57"><type pos:start="27:5" pos:end="27:17"><name pos:start="27:5" pos:end="27:17">APNGFctlChunk</name></type> <name pos:start="27:19" pos:end="27:33">last_fctl_chunk</name> <init pos:start="27:35" pos:end="27:57">= <expr pos:start="27:37" pos:end="27:57"><operator pos:start="27:37" pos:end="27:37">*</operator><name pos:start="27:38" pos:end="27:57">best_last_fctl_chunk</name></expr></init></decl>;</decl_stmt>

    <decl_stmt pos:start="29:5" pos:end="29:48"><decl pos:start="29:5" pos:end="29:47"><type pos:start="29:5" pos:end="29:17"><name pos:start="29:5" pos:end="29:17">APNGFctlChunk</name></type> <name pos:start="29:19" pos:end="29:28">fctl_chunk</name> <init pos:start="29:30" pos:end="29:47">= <expr pos:start="29:32" pos:end="29:47"><operator pos:start="29:32" pos:end="29:32">*</operator><name pos:start="29:33" pos:end="29:47">best_fctl_chunk</name></expr></init></decl>;</decl_stmt>



    <if_stmt pos:start="33:5" pos:end="47:5"><if pos:start="33:5" pos:end="47:5">if <condition pos:start="33:8" pos:end="33:33">(<expr pos:start="33:9" pos:end="33:32"><name pos:start="33:9" pos:end="33:27"><name pos:start="33:9" pos:end="33:13">avctx</name><operator pos:start="33:14" pos:end="33:15">-&gt;</operator><name pos:start="33:16" pos:end="33:27">frame_number</name></name> <operator pos:start="33:29" pos:end="33:30">==</operator> <literal type="number" pos:start="33:32" pos:end="33:32">0</literal></expr>)</condition> <block pos:start="33:35" pos:end="47:5">{<block_content pos:start="35:9" pos:end="45:41">

        <expr_stmt pos:start="35:9" pos:end="35:45"><expr pos:start="35:9" pos:end="35:44"><name pos:start="35:9" pos:end="35:30"><name pos:start="35:9" pos:end="35:23">best_fctl_chunk</name><operator pos:start="35:24" pos:end="35:25">-&gt;</operator><name pos:start="35:26" pos:end="35:30">width</name></name> <operator pos:start="35:32" pos:end="35:32">=</operator> <name pos:start="35:34" pos:end="35:44"><name pos:start="35:34" pos:end="35:37">pict</name><operator pos:start="35:38" pos:end="35:39">-&gt;</operator><name pos:start="35:40" pos:end="35:44">width</name></name></expr>;</expr_stmt>

        <expr_stmt pos:start="37:9" pos:end="37:47"><expr pos:start="37:9" pos:end="37:46"><name pos:start="37:9" pos:end="37:31"><name pos:start="37:9" pos:end="37:23">best_fctl_chunk</name><operator pos:start="37:24" pos:end="37:25">-&gt;</operator><name pos:start="37:26" pos:end="37:31">height</name></name> <operator pos:start="37:33" pos:end="37:33">=</operator> <name pos:start="37:35" pos:end="37:46"><name pos:start="37:35" pos:end="37:38">pict</name><operator pos:start="37:39" pos:end="37:40">-&gt;</operator><name pos:start="37:41" pos:end="37:46">height</name></name></expr>;</expr_stmt>

        <expr_stmt pos:start="39:9" pos:end="39:38"><expr pos:start="39:9" pos:end="39:37"><name pos:start="39:9" pos:end="39:33"><name pos:start="39:9" pos:end="39:23">best_fctl_chunk</name><operator pos:start="39:24" pos:end="39:25">-&gt;</operator><name pos:start="39:26" pos:end="39:33">x_offset</name></name> <operator pos:start="39:35" pos:end="39:35">=</operator> <literal type="number" pos:start="39:37" pos:end="39:37">0</literal></expr>;</expr_stmt>

        <expr_stmt pos:start="41:9" pos:end="41:38"><expr pos:start="41:9" pos:end="41:37"><name pos:start="41:9" pos:end="41:33"><name pos:start="41:9" pos:end="41:23">best_fctl_chunk</name><operator pos:start="41:24" pos:end="41:25">-&gt;</operator><name pos:start="41:26" pos:end="41:33">y_offset</name></name> <operator pos:start="41:35" pos:end="41:35">=</operator> <literal type="number" pos:start="41:37" pos:end="41:37">0</literal></expr>;</expr_stmt>

        <expr_stmt pos:start="43:9" pos:end="43:57"><expr pos:start="43:9" pos:end="43:56"><name pos:start="43:9" pos:end="43:33"><name pos:start="43:9" pos:end="43:23">best_fctl_chunk</name><operator pos:start="43:24" pos:end="43:25">-&gt;</operator><name pos:start="43:26" pos:end="43:33">blend_op</name></name> <operator pos:start="43:35" pos:end="43:35">=</operator> <name pos:start="43:37" pos:end="43:56">APNG_BLEND_OP_SOURCE</name></expr>;</expr_stmt>

        <return pos:start="45:9" pos:end="45:41">return <expr pos:start="45:16" pos:end="45:40"><call pos:start="45:16" pos:end="45:40"><name pos:start="45:16" pos:end="45:27">encode_frame</name><argument_list pos:start="45:28" pos:end="45:40">(<argument pos:start="45:29" pos:end="45:33"><expr pos:start="45:29" pos:end="45:33"><name pos:start="45:29" pos:end="45:33">avctx</name></expr></argument>, <argument pos:start="45:36" pos:end="45:39"><expr pos:start="45:36" pos:end="45:39"><name pos:start="45:36" pos:end="45:39">pict</name></expr></argument>)</argument_list></call></expr>;</return>

    </block_content>}</block></if></if_stmt>



    <expr_stmt pos:start="51:5" pos:end="51:33"><expr pos:start="51:5" pos:end="51:32"><name pos:start="51:5" pos:end="51:13">diffFrame</name> <operator pos:start="51:15" pos:end="51:15">=</operator> <call pos:start="51:17" pos:end="51:32"><name pos:start="51:17" pos:end="51:30">av_frame_alloc</name><argument_list pos:start="51:31" pos:end="51:32">()</argument_list></call></expr>;</expr_stmt>

    <if_stmt pos:start="53:5" pos:end="55:31"><if pos:start="53:5" pos:end="55:31">if <condition pos:start="53:8" pos:end="53:19">(<expr pos:start="53:9" pos:end="53:18"><operator pos:start="53:9" pos:end="53:9">!</operator><name pos:start="53:10" pos:end="53:18">diffFrame</name></expr>)</condition><block type="pseudo" pos:start="55:9" pos:end="55:31"><block_content pos:start="55:9" pos:end="55:31">

        <return pos:start="55:9" pos:end="55:31">return <expr pos:start="55:16" pos:end="55:30"><call pos:start="55:16" pos:end="55:30"><name pos:start="55:16" pos:end="55:22">AVERROR</name><argument_list pos:start="55:23" pos:end="55:30">(<argument pos:start="55:24" pos:end="55:29"><expr pos:start="55:24" pos:end="55:29"><name pos:start="55:24" pos:end="55:29">ENOMEM</name></expr></argument>)</argument_list></call></expr>;</return></block_content></block></if></if_stmt>



    <expr_stmt pos:start="59:5" pos:end="59:37"><expr pos:start="59:5" pos:end="59:36"><name pos:start="59:5" pos:end="59:21"><name pos:start="59:5" pos:end="59:13">diffFrame</name><operator pos:start="59:14" pos:end="59:15">-&gt;</operator><name pos:start="59:16" pos:end="59:21">format</name></name> <operator pos:start="59:23" pos:end="59:23">=</operator> <name pos:start="59:25" pos:end="59:36"><name pos:start="59:25" pos:end="59:28">pict</name><operator pos:start="59:29" pos:end="59:30">-&gt;</operator><name pos:start="59:31" pos:end="59:36">format</name></name></expr>;</expr_stmt>

    <expr_stmt pos:start="61:5" pos:end="61:35"><expr pos:start="61:5" pos:end="61:34"><name pos:start="61:5" pos:end="61:20"><name pos:start="61:5" pos:end="61:13">diffFrame</name><operator pos:start="61:14" pos:end="61:15">-&gt;</operator><name pos:start="61:16" pos:end="61:20">width</name></name> <operator pos:start="61:22" pos:end="61:22">=</operator> <name pos:start="61:24" pos:end="61:34"><name pos:start="61:24" pos:end="61:27">pict</name><operator pos:start="61:28" pos:end="61:29">-&gt;</operator><name pos:start="61:30" pos:end="61:34">width</name></name></expr>;</expr_stmt>

    <expr_stmt pos:start="63:5" pos:end="63:37"><expr pos:start="63:5" pos:end="63:36"><name pos:start="63:5" pos:end="63:21"><name pos:start="63:5" pos:end="63:13">diffFrame</name><operator pos:start="63:14" pos:end="63:15">-&gt;</operator><name pos:start="63:16" pos:end="63:21">height</name></name> <operator pos:start="63:23" pos:end="63:23">=</operator> <name pos:start="63:25" pos:end="63:36"><name pos:start="63:25" pos:end="63:28">pict</name><operator pos:start="63:29" pos:end="63:30">-&gt;</operator><name pos:start="63:31" pos:end="63:36">height</name></name></expr>;</expr_stmt>

    <if_stmt pos:start="65:5" pos:end="67:18"><if pos:start="65:5" pos:end="67:18">if <condition pos:start="65:8" pos:end="65:55">(<expr pos:start="65:9" pos:end="65:54"><operator pos:start="65:9" pos:end="65:9">(</operator><name pos:start="65:10" pos:end="65:12">ret</name> <operator pos:start="65:14" pos:end="65:14">=</operator> <call pos:start="65:16" pos:end="65:49"><name pos:start="65:16" pos:end="65:34">av_frame_get_buffer</name><argument_list pos:start="65:35" pos:end="65:49">(<argument pos:start="65:36" pos:end="65:44"><expr pos:start="65:36" pos:end="65:44"><name pos:start="65:36" pos:end="65:44">diffFrame</name></expr></argument>, <argument pos:start="65:47" pos:end="65:48"><expr pos:start="65:47" pos:end="65:48"><literal type="number" pos:start="65:47" pos:end="65:48">32</literal></expr></argument>)</argument_list></call><operator pos:start="65:50" pos:end="65:50">)</operator> <operator pos:start="65:52" pos:end="65:52">&lt;</operator> <literal type="number" pos:start="65:54" pos:end="65:54">0</literal></expr>)</condition><block type="pseudo" pos:start="67:9" pos:end="67:18"><block_content pos:start="67:9" pos:end="67:18">

        <goto pos:start="67:9" pos:end="67:18">goto <name pos:start="67:14" pos:end="67:17">fail</name>;</goto></block_content></block></if></if_stmt>



    <expr_stmt pos:start="71:5" pos:end="71:40"><expr pos:start="71:5" pos:end="71:39"><name pos:start="71:5" pos:end="71:23">original_bytestream</name> <operator pos:start="71:25" pos:end="71:25">=</operator> <name pos:start="71:27" pos:end="71:39"><name pos:start="71:27" pos:end="71:27">s</name><operator pos:start="71:28" pos:end="71:29">-&gt;</operator><name pos:start="71:30" pos:end="71:39">bytestream</name></name></expr>;</expr_stmt>

    <expr_stmt pos:start="73:5" pos:end="73:48"><expr pos:start="73:5" pos:end="73:47"><name pos:start="73:5" pos:end="73:27">original_bytestream_end</name> <operator pos:start="73:29" pos:end="73:29">=</operator> <name pos:start="73:31" pos:end="73:47"><name pos:start="73:31" pos:end="73:31">s</name><operator pos:start="73:32" pos:end="73:33">-&gt;</operator><name pos:start="73:34" pos:end="73:47">bytestream_end</name></name></expr>;</expr_stmt>



    <expr_stmt pos:start="77:5" pos:end="77:79"><expr pos:start="77:5" pos:end="77:78"><name pos:start="77:5" pos:end="77:19">temp_bytestream</name> <operator pos:start="77:21" pos:end="77:21">=</operator> <call pos:start="77:23" pos:end="77:78"><name pos:start="77:23" pos:end="77:31">av_malloc</name><argument_list pos:start="77:32" pos:end="77:78">(<argument pos:start="77:33" pos:end="77:77"><expr pos:start="77:33" pos:end="77:77"><name pos:start="77:33" pos:end="77:55">original_bytestream_end</name> <operator pos:start="77:57" pos:end="77:57">-</operator> <name pos:start="77:59" pos:end="77:77">original_bytestream</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    <expr_stmt pos:start="79:5" pos:end="79:92"><expr pos:start="79:5" pos:end="79:91"><name pos:start="79:5" pos:end="79:23">temp_bytestream_end</name> <operator pos:start="79:25" pos:end="79:25">=</operator> <name pos:start="79:27" pos:end="79:41">temp_bytestream</name> <operator pos:start="79:43" pos:end="79:43">+</operator> <operator pos:start="79:45" pos:end="79:45">(</operator><name pos:start="79:46" pos:end="79:68">original_bytestream_end</name> <operator pos:start="79:70" pos:end="79:70">-</operator> <name pos:start="79:72" pos:end="79:90">original_bytestream</name><operator pos:start="79:91" pos:end="79:91">)</operator></expr>;</expr_stmt>

    <if_stmt pos:start="81:5" pos:end="87:5"><if pos:start="81:5" pos:end="87:5">if <condition pos:start="81:8" pos:end="81:25">(<expr pos:start="81:9" pos:end="81:24"><operator pos:start="81:9" pos:end="81:9">!</operator><name pos:start="81:10" pos:end="81:24">temp_bytestream</name></expr>)</condition> <block pos:start="81:27" pos:end="87:5">{<block_content pos:start="83:9" pos:end="85:18">

        <expr_stmt pos:start="83:9" pos:end="83:30"><expr pos:start="83:9" pos:end="83:29"><name pos:start="83:9" pos:end="83:11">ret</name> <operator pos:start="83:13" pos:end="83:13">=</operator> <call pos:start="83:15" pos:end="83:29"><name pos:start="83:15" pos:end="83:21">AVERROR</name><argument_list pos:start="83:22" pos:end="83:29">(<argument pos:start="83:23" pos:end="83:28"><expr pos:start="83:23" pos:end="83:28"><name pos:start="83:23" pos:end="83:28">ENOMEM</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <goto pos:start="85:9" pos:end="85:18">goto <name pos:start="85:14" pos:end="85:17">fail</name>;</goto>

    </block_content>}</block></if></if_stmt>



    <for pos:start="91:5" pos:end="219:5">for <control pos:start="91:9" pos:end="91:102">(<init pos:start="91:10" pos:end="91:40"><expr pos:start="91:10" pos:end="91:39"><name pos:start="91:10" pos:end="91:35"><name pos:start="91:10" pos:end="91:24">last_fctl_chunk</name><operator pos:start="91:25" pos:end="91:25">.</operator><name pos:start="91:26" pos:end="91:35">dispose_op</name></name> <operator pos:start="91:37" pos:end="91:37">=</operator> <literal type="number" pos:start="91:39" pos:end="91:39">0</literal></expr>;</init> <condition pos:start="91:42" pos:end="91:72"><expr pos:start="91:42" pos:end="91:71"><name pos:start="91:42" pos:end="91:67"><name pos:start="91:42" pos:end="91:56">last_fctl_chunk</name><operator pos:start="91:57" pos:end="91:57">.</operator><name pos:start="91:58" pos:end="91:67">dispose_op</name></name> <operator pos:start="91:69" pos:end="91:69">&lt;</operator> <literal type="number" pos:start="91:71" pos:end="91:71">3</literal></expr>;</condition> <incr pos:start="91:74" pos:end="91:101"><expr pos:start="91:74" pos:end="91:101"><operator pos:start="91:74" pos:end="91:75">++</operator><name pos:start="91:76" pos:end="91:101"><name pos:start="91:76" pos:end="91:90">last_fctl_chunk</name><operator pos:start="91:91" pos:end="91:91">.</operator><name pos:start="91:92" pos:end="91:101">dispose_op</name></name></expr></incr>)</control> <block pos:start="91:104" pos:end="219:5">{<block_content pos:start="101:9" pos:end="217:9">

        <comment type="line" pos:start="93:9" pos:end="93:34">// 0: APNG_DISPOSE_OP_NONE</comment>

        <comment type="line" pos:start="95:9" pos:end="95:40">// 1: APNG_DISPOSE_OP_BACKGROUND</comment>

        <comment type="line" pos:start="97:9" pos:end="97:38">// 2: APNG_DISPOSE_OP_PREVIOUS</comment>



        <for pos:start="101:9" pos:end="217:9">for <control pos:start="101:13" pos:end="101:85">(<init pos:start="101:14" pos:end="101:37"><expr pos:start="101:14" pos:end="101:36"><name pos:start="101:14" pos:end="101:32"><name pos:start="101:14" pos:end="101:23">fctl_chunk</name><operator pos:start="101:24" pos:end="101:24">.</operator><name pos:start="101:25" pos:end="101:32">blend_op</name></name> <operator pos:start="101:34" pos:end="101:34">=</operator> <literal type="number" pos:start="101:36" pos:end="101:36">0</literal></expr>;</init> <condition pos:start="101:39" pos:end="101:62"><expr pos:start="101:39" pos:end="101:61"><name pos:start="101:39" pos:end="101:57"><name pos:start="101:39" pos:end="101:48">fctl_chunk</name><operator pos:start="101:49" pos:end="101:49">.</operator><name pos:start="101:50" pos:end="101:57">blend_op</name></name> <operator pos:start="101:59" pos:end="101:59">&lt;</operator> <literal type="number" pos:start="101:61" pos:end="101:61">2</literal></expr>;</condition> <incr pos:start="101:64" pos:end="101:84"><expr pos:start="101:64" pos:end="101:84"><operator pos:start="101:64" pos:end="101:65">++</operator><name pos:start="101:66" pos:end="101:84"><name pos:start="101:66" pos:end="101:75">fctl_chunk</name><operator pos:start="101:76" pos:end="101:76">.</operator><name pos:start="101:77" pos:end="101:84">blend_op</name></name></expr></incr>)</control> <block pos:start="101:87" pos:end="217:9">{<block_content pos:start="109:13" pos:end="215:13">

            <comment type="line" pos:start="103:13" pos:end="103:38">// 0: APNG_BLEND_OP_SOURCE</comment>

            <comment type="line" pos:start="105:13" pos:end="105:36">// 1: APNG_BLEND_OP_OVER</comment>



            <decl_stmt pos:start="109:13" pos:end="109:84"><decl pos:start="109:13" pos:end="109:66"><type pos:start="109:13" pos:end="109:20"><name pos:start="109:13" pos:end="109:20">uint32_t</name></type> <name pos:start="109:22" pos:end="109:45">original_sequence_number</name> <init pos:start="109:47" pos:end="109:66">= <expr pos:start="109:49" pos:end="109:66"><name pos:start="109:49" pos:end="109:66"><name pos:start="109:49" pos:end="109:49">s</name><operator pos:start="109:50" pos:end="109:51">-&gt;</operator><name pos:start="109:52" pos:end="109:66">sequence_number</name></name></expr></init></decl>, <decl pos:start="109:69" pos:end="109:83"><type ref="prev" pos:start="109:13" pos:end="109:20"/><name pos:start="109:69" pos:end="109:83">sequence_number</name></decl>;</decl_stmt>

            <decl_stmt pos:start="111:13" pos:end="111:54"><decl pos:start="111:13" pos:end="111:53"><type pos:start="111:13" pos:end="111:21"><name pos:start="111:13" pos:end="111:19">uint8_t</name> <modifier pos:start="111:21" pos:end="111:21">*</modifier></type><name pos:start="111:22" pos:end="111:37">bytestream_start</name> <init pos:start="111:39" pos:end="111:53">= <expr pos:start="111:41" pos:end="111:53"><name pos:start="111:41" pos:end="111:53"><name pos:start="111:41" pos:end="111:41">s</name><operator pos:start="111:42" pos:end="111:43">-&gt;</operator><name pos:start="111:44" pos:end="111:53">bytestream</name></name></expr></init></decl>;</decl_stmt>

            <decl_stmt pos:start="113:13" pos:end="113:35"><decl pos:start="113:13" pos:end="113:34"><type pos:start="113:13" pos:end="113:18"><name pos:start="113:13" pos:end="113:18">size_t</name></type> <name pos:start="113:20" pos:end="113:34">bytestream_size</name></decl>;</decl_stmt>



            <comment type="line" pos:start="117:13" pos:end="117:26">// Do disposal</comment>

            <if_stmt pos:start="119:13" pos:end="155:13"><if pos:start="119:13" pos:end="141:13">if <condition pos:start="119:16" pos:end="119:71">(<expr pos:start="119:17" pos:end="119:70"><name pos:start="119:17" pos:end="119:42"><name pos:start="119:17" pos:end="119:31">last_fctl_chunk</name><operator pos:start="119:32" pos:end="119:32">.</operator><name pos:start="119:33" pos:end="119:42">dispose_op</name></name> <operator pos:start="119:44" pos:end="119:45">!=</operator> <name pos:start="119:47" pos:end="119:70">APNG_DISPOSE_OP_PREVIOUS</name></expr>)</condition> <block pos:start="119:73" pos:end="141:13">{<block_content pos:start="121:17" pos:end="139:17">

                <expr_stmt pos:start="121:17" pos:end="121:47"><expr pos:start="121:17" pos:end="121:46"><name pos:start="121:17" pos:end="121:32"><name pos:start="121:17" pos:end="121:25">diffFrame</name><operator pos:start="121:26" pos:end="121:27">-&gt;</operator><name pos:start="121:28" pos:end="121:32">width</name></name> <operator pos:start="121:34" pos:end="121:34">=</operator> <name pos:start="121:36" pos:end="121:46"><name pos:start="121:36" pos:end="121:39">pict</name><operator pos:start="121:40" pos:end="121:41">-&gt;</operator><name pos:start="121:42" pos:end="121:46">width</name></name></expr>;</expr_stmt>

                <expr_stmt pos:start="123:17" pos:end="123:49"><expr pos:start="123:17" pos:end="123:48"><name pos:start="123:17" pos:end="123:33"><name pos:start="123:17" pos:end="123:25">diffFrame</name><operator pos:start="123:26" pos:end="123:27">-&gt;</operator><name pos:start="123:28" pos:end="123:33">height</name></name> <operator pos:start="123:35" pos:end="123:35">=</operator> <name pos:start="123:37" pos:end="123:48"><name pos:start="123:37" pos:end="123:40">pict</name><operator pos:start="123:41" pos:end="123:42">-&gt;</operator><name pos:start="123:43" pos:end="123:48">height</name></name></expr>;</expr_stmt>

                <expr_stmt pos:start="125:17" pos:end="125:56"><expr pos:start="125:17" pos:end="125:55"><call pos:start="125:17" pos:end="125:55"><name pos:start="125:17" pos:end="125:29">av_frame_copy</name><argument_list pos:start="125:30" pos:end="125:55">(<argument pos:start="125:31" pos:end="125:39"><expr pos:start="125:31" pos:end="125:39"><name pos:start="125:31" pos:end="125:39">diffFrame</name></expr></argument>, <argument pos:start="125:42" pos:end="125:54"><expr pos:start="125:42" pos:end="125:54"><name pos:start="125:42" pos:end="125:54"><name pos:start="125:42" pos:end="125:42">s</name><operator pos:start="125:43" pos:end="125:44">-&gt;</operator><name pos:start="125:45" pos:end="125:54">last_frame</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>



                <if_stmt pos:start="129:17" pos:end="139:17"><if pos:start="129:17" pos:end="139:17">if <condition pos:start="129:20" pos:end="129:77">(<expr pos:start="129:21" pos:end="129:76"><name pos:start="129:21" pos:end="129:46"><name pos:start="129:21" pos:end="129:35">last_fctl_chunk</name><operator pos:start="129:36" pos:end="129:36">.</operator><name pos:start="129:37" pos:end="129:46">dispose_op</name></name> <operator pos:start="129:48" pos:end="129:49">==</operator> <name pos:start="129:51" pos:end="129:76">APNG_DISPOSE_OP_BACKGROUND</name></expr>)</condition> <block pos:start="129:79" pos:end="139:17">{<block_content pos:start="131:21" pos:end="137:21">

                    <for pos:start="131:21" pos:end="137:21">for <control pos:start="131:25" pos:end="131:114">(<init pos:start="131:26" pos:end="131:54"><expr pos:start="131:26" pos:end="131:53"><name pos:start="131:26" pos:end="131:26">y</name> <operator pos:start="131:28" pos:end="131:28">=</operator> <name pos:start="131:30" pos:end="131:53"><name pos:start="131:30" pos:end="131:44">last_fctl_chunk</name><operator pos:start="131:45" pos:end="131:45">.</operator><name pos:start="131:46" pos:end="131:53">y_offset</name></name></expr>;</init> <condition pos:start="131:56" pos:end="131:109"><expr pos:start="131:56" pos:end="131:108"><name pos:start="131:56" pos:end="131:56">y</name> <operator pos:start="131:58" pos:end="131:58">&lt;</operator> <name pos:start="131:60" pos:end="131:83"><name pos:start="131:60" pos:end="131:74">last_fctl_chunk</name><operator pos:start="131:75" pos:end="131:75">.</operator><name pos:start="131:76" pos:end="131:83">y_offset</name></name> <operator pos:start="131:85" pos:end="131:85">+</operator> <name pos:start="131:87" pos:end="131:108"><name pos:start="131:87" pos:end="131:101">last_fctl_chunk</name><operator pos:start="131:102" pos:end="131:102">.</operator><name pos:start="131:103" pos:end="131:108">height</name></name></expr>;</condition> <incr pos:start="131:111" pos:end="131:113"><expr pos:start="131:111" pos:end="131:113"><operator pos:start="131:111" pos:end="131:112">++</operator><name pos:start="131:113" pos:end="131:113">y</name></expr></incr>)</control> <block pos:start="131:116" pos:end="137:21">{<block_content pos:start="133:25" pos:end="135:95">

                        <decl_stmt pos:start="133:25" pos:end="133:103"><decl pos:start="133:25" pos:end="133:102"><type pos:start="133:25" pos:end="133:30"><name pos:start="133:25" pos:end="133:30">size_t</name></type> <name pos:start="133:32" pos:end="133:40">row_start</name> <init pos:start="133:42" pos:end="133:102">= <expr pos:start="133:44" pos:end="133:102"><name pos:start="133:44" pos:end="133:65"><name pos:start="133:44" pos:end="133:52">diffFrame</name><operator pos:start="133:53" pos:end="133:54">-&gt;</operator><name pos:start="133:55" pos:end="133:62">linesize</name><index pos:start="133:63" pos:end="133:65">[<expr pos:start="133:64" pos:end="133:64"><literal type="number" pos:start="133:64" pos:end="133:64">0</literal></expr>]</index></name> <operator pos:start="133:67" pos:end="133:67">*</operator> <name pos:start="133:69" pos:end="133:69">y</name> <operator pos:start="133:71" pos:end="133:71">+</operator> <name pos:start="133:73" pos:end="133:75">bpp</name> <operator pos:start="133:77" pos:end="133:77">*</operator> <name pos:start="133:79" pos:end="133:102"><name pos:start="133:79" pos:end="133:93">last_fctl_chunk</name><operator pos:start="133:94" pos:end="133:94">.</operator><name pos:start="133:95" pos:end="133:102">x_offset</name></name></expr></init></decl>;</decl_stmt>

                        <expr_stmt pos:start="135:25" pos:end="135:95"><expr pos:start="135:25" pos:end="135:94"><call pos:start="135:25" pos:end="135:94"><name pos:start="135:25" pos:end="135:30">memset</name><argument_list pos:start="135:31" pos:end="135:94">(<argument pos:start="135:32" pos:end="135:61"><expr pos:start="135:32" pos:end="135:61"><name pos:start="135:32" pos:end="135:49"><name pos:start="135:32" pos:end="135:40">diffFrame</name><operator pos:start="135:41" pos:end="135:42">-&gt;</operator><name pos:start="135:43" pos:end="135:46">data</name><index pos:start="135:47" pos:end="135:49">[<expr pos:start="135:48" pos:end="135:48"><literal type="number" pos:start="135:48" pos:end="135:48">0</literal></expr>]</index></name> <operator pos:start="135:51" pos:end="135:51">+</operator> <name pos:start="135:53" pos:end="135:61">row_start</name></expr></argument>, <argument pos:start="135:64" pos:end="135:64"><expr pos:start="135:64" pos:end="135:64"><literal type="number" pos:start="135:64" pos:end="135:64">0</literal></expr></argument>, <argument pos:start="135:67" pos:end="135:93"><expr pos:start="135:67" pos:end="135:93"><name pos:start="135:67" pos:end="135:69">bpp</name> <operator pos:start="135:71" pos:end="135:71">*</operator> <name pos:start="135:73" pos:end="135:93"><name pos:start="135:73" pos:end="135:87">last_fctl_chunk</name><operator pos:start="135:88" pos:end="135:88">.</operator><name pos:start="135:89" pos:end="135:93">width</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

                    </block_content>}</block></for>

                </block_content>}</block></if></if_stmt>

            </block_content>}</block></if> <else pos:start="141:15" pos:end="155:13">else <block pos:start="141:20" pos:end="155:13">{<block_content pos:start="143:17" pos:end="153:56">

                <if_stmt pos:start="143:17" pos:end="145:29"><if pos:start="143:17" pos:end="145:29">if <condition pos:start="143:20" pos:end="143:35">(<expr pos:start="143:21" pos:end="143:34"><operator pos:start="143:21" pos:end="143:21">!</operator><name pos:start="143:22" pos:end="143:34"><name pos:start="143:22" pos:end="143:22">s</name><operator pos:start="143:23" pos:end="143:24">-&gt;</operator><name pos:start="143:25" pos:end="143:34">prev_frame</name></name></expr>)</condition><block type="pseudo" pos:start="145:21" pos:end="145:29"><block_content pos:start="145:21" pos:end="145:29">

                    <continue pos:start="145:21" pos:end="145:29">continue;</continue></block_content></block></if></if_stmt>



                <expr_stmt pos:start="149:17" pos:end="149:47"><expr pos:start="149:17" pos:end="149:46"><name pos:start="149:17" pos:end="149:32"><name pos:start="149:17" pos:end="149:25">diffFrame</name><operator pos:start="149:26" pos:end="149:27">-&gt;</operator><name pos:start="149:28" pos:end="149:32">width</name></name> <operator pos:start="149:34" pos:end="149:34">=</operator> <name pos:start="149:36" pos:end="149:46"><name pos:start="149:36" pos:end="149:39">pict</name><operator pos:start="149:40" pos:end="149:41">-&gt;</operator><name pos:start="149:42" pos:end="149:46">width</name></name></expr>;</expr_stmt>

                <expr_stmt pos:start="151:17" pos:end="151:49"><expr pos:start="151:17" pos:end="151:48"><name pos:start="151:17" pos:end="151:33"><name pos:start="151:17" pos:end="151:25">diffFrame</name><operator pos:start="151:26" pos:end="151:27">-&gt;</operator><name pos:start="151:28" pos:end="151:33">height</name></name> <operator pos:start="151:35" pos:end="151:35">=</operator> <name pos:start="151:37" pos:end="151:48"><name pos:start="151:37" pos:end="151:40">pict</name><operator pos:start="151:41" pos:end="151:42">-&gt;</operator><name pos:start="151:43" pos:end="151:48">height</name></name></expr>;</expr_stmt>

                <expr_stmt pos:start="153:17" pos:end="153:56"><expr pos:start="153:17" pos:end="153:55"><call pos:start="153:17" pos:end="153:55"><name pos:start="153:17" pos:end="153:29">av_frame_copy</name><argument_list pos:start="153:30" pos:end="153:55">(<argument pos:start="153:31" pos:end="153:39"><expr pos:start="153:31" pos:end="153:39"><name pos:start="153:31" pos:end="153:39">diffFrame</name></expr></argument>, <argument pos:start="153:42" pos:end="153:54"><expr pos:start="153:42" pos:end="153:54"><name pos:start="153:42" pos:end="153:54"><name pos:start="153:42" pos:end="153:42">s</name><operator pos:start="153:43" pos:end="153:44">-&gt;</operator><name pos:start="153:45" pos:end="153:54">prev_frame</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

            </block_content>}</block></else></if_stmt>



            <comment type="line" pos:start="159:13" pos:end="159:34">// Do inverse blending</comment>

            <if_stmt pos:start="161:13" pos:end="163:25"><if pos:start="161:13" pos:end="163:25">if <condition pos:start="161:16" pos:end="161:77">(<expr pos:start="161:17" pos:end="161:76"><call pos:start="161:17" pos:end="161:72"><name pos:start="161:17" pos:end="161:37">apng_do_inverse_blend</name><argument_list pos:start="161:38" pos:end="161:72">(<argument pos:start="161:39" pos:end="161:47"><expr pos:start="161:39" pos:end="161:47"><name pos:start="161:39" pos:end="161:47">diffFrame</name></expr></argument>, <argument pos:start="161:50" pos:end="161:53"><expr pos:start="161:50" pos:end="161:53"><name pos:start="161:50" pos:end="161:53">pict</name></expr></argument>, <argument pos:start="161:56" pos:end="161:66"><expr pos:start="161:56" pos:end="161:66"><operator pos:start="161:56" pos:end="161:56">&amp;</operator><name pos:start="161:57" pos:end="161:66">fctl_chunk</name></expr></argument>, <argument pos:start="161:69" pos:end="161:71"><expr pos:start="161:69" pos:end="161:71"><name pos:start="161:69" pos:end="161:71">bpp</name></expr></argument>)</argument_list></call> <operator pos:start="161:74" pos:end="161:74">&lt;</operator> <literal type="number" pos:start="161:76" pos:end="161:76">0</literal></expr>)</condition><block type="pseudo" pos:start="163:17" pos:end="163:25"><block_content pos:start="163:17" pos:end="163:25">

                <continue pos:start="163:17" pos:end="163:25">continue;</continue></block_content></block></if></if_stmt>



            <comment type="line" pos:start="167:13" pos:end="167:26">// Do encoding</comment>

            <expr_stmt pos:start="169:13" pos:end="169:49"><expr pos:start="169:13" pos:end="169:48"><name pos:start="169:13" pos:end="169:15">ret</name> <operator pos:start="169:17" pos:end="169:17">=</operator> <call pos:start="169:19" pos:end="169:48"><name pos:start="169:19" pos:end="169:30">encode_frame</name><argument_list pos:start="169:31" pos:end="169:48">(<argument pos:start="169:32" pos:end="169:36"><expr pos:start="169:32" pos:end="169:36"><name pos:start="169:32" pos:end="169:36">avctx</name></expr></argument>, <argument pos:start="169:39" pos:end="169:47"><expr pos:start="169:39" pos:end="169:47"><name pos:start="169:39" pos:end="169:47">diffFrame</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

            <expr_stmt pos:start="171:13" pos:end="171:49"><expr pos:start="171:13" pos:end="171:48"><name pos:start="171:13" pos:end="171:27">sequence_number</name> <operator pos:start="171:29" pos:end="171:29">=</operator> <name pos:start="171:31" pos:end="171:48"><name pos:start="171:31" pos:end="171:31">s</name><operator pos:start="171:32" pos:end="171:33">-&gt;</operator><name pos:start="171:34" pos:end="171:48">sequence_number</name></name></expr>;</expr_stmt>

            <expr_stmt pos:start="173:13" pos:end="173:58"><expr pos:start="173:13" pos:end="173:57"><name pos:start="173:13" pos:end="173:30"><name pos:start="173:13" pos:end="173:13">s</name><operator pos:start="173:14" pos:end="173:15">-&gt;</operator><name pos:start="173:16" pos:end="173:30">sequence_number</name></name> <operator pos:start="173:32" pos:end="173:32">=</operator> <name pos:start="173:34" pos:end="173:57">original_sequence_number</name></expr>;</expr_stmt>

            <expr_stmt pos:start="175:13" pos:end="175:63"><expr pos:start="175:13" pos:end="175:62"><name pos:start="175:13" pos:end="175:27">bytestream_size</name> <operator pos:start="175:29" pos:end="175:29">=</operator> <name pos:start="175:31" pos:end="175:43"><name pos:start="175:31" pos:end="175:31">s</name><operator pos:start="175:32" pos:end="175:33">-&gt;</operator><name pos:start="175:34" pos:end="175:43">bytestream</name></name> <operator pos:start="175:45" pos:end="175:45">-</operator> <name pos:start="175:47" pos:end="175:62">bytestream_start</name></expr>;</expr_stmt>

            <expr_stmt pos:start="177:13" pos:end="177:45"><expr pos:start="177:13" pos:end="177:44"><name pos:start="177:13" pos:end="177:25"><name pos:start="177:13" pos:end="177:13">s</name><operator pos:start="177:14" pos:end="177:15">-&gt;</operator><name pos:start="177:16" pos:end="177:25">bytestream</name></name> <operator pos:start="177:27" pos:end="177:27">=</operator> <name pos:start="177:29" pos:end="177:44">bytestream_start</name></expr>;</expr_stmt>

            <if_stmt pos:start="179:13" pos:end="181:26"><if pos:start="179:13" pos:end="181:26">if <condition pos:start="179:16" pos:end="179:24">(<expr pos:start="179:17" pos:end="179:23"><name pos:start="179:17" pos:end="179:19">ret</name> <operator pos:start="179:21" pos:end="179:21">&lt;</operator> <literal type="number" pos:start="179:23" pos:end="179:23">0</literal></expr>)</condition><block type="pseudo" pos:start="181:17" pos:end="181:26"><block_content pos:start="181:17" pos:end="181:26">

                <goto pos:start="181:17" pos:end="181:26">goto <name pos:start="181:22" pos:end="181:25">fail</name>;</goto></block_content></block></if></if_stmt>



            <if_stmt pos:start="185:13" pos:end="215:13"><if pos:start="185:13" pos:end="215:13">if <condition pos:start="185:16" pos:end="185:55">(<expr pos:start="185:17" pos:end="185:54"><name pos:start="185:17" pos:end="185:31">bytestream_size</name> <operator pos:start="185:33" pos:end="185:33">&lt;</operator> <name pos:start="185:35" pos:end="185:54">best_bytestream_size</name></expr>)</condition> <block pos:start="185:57" pos:end="215:13">{<block_content pos:start="187:17" pos:end="213:17">

                <expr_stmt pos:start="187:17" pos:end="187:46"><expr pos:start="187:17" pos:end="187:45"><operator pos:start="187:17" pos:end="187:17">*</operator><name pos:start="187:18" pos:end="187:32">best_fctl_chunk</name> <operator pos:start="187:34" pos:end="187:34">=</operator> <name pos:start="187:36" pos:end="187:45">fctl_chunk</name></expr>;</expr_stmt>

                <expr_stmt pos:start="189:17" pos:end="189:56"><expr pos:start="189:17" pos:end="189:55"><operator pos:start="189:17" pos:end="189:17">*</operator><name pos:start="189:18" pos:end="189:37">best_last_fctl_chunk</name> <operator pos:start="189:39" pos:end="189:39">=</operator> <name pos:start="189:41" pos:end="189:55">last_fctl_chunk</name></expr>;</expr_stmt>



                <expr_stmt pos:start="193:17" pos:end="193:55"><expr pos:start="193:17" pos:end="193:54"><name pos:start="193:17" pos:end="193:36">best_sequence_number</name> <operator pos:start="193:38" pos:end="193:38">=</operator> <name pos:start="193:40" pos:end="193:54">sequence_number</name></expr>;</expr_stmt>

                <expr_stmt pos:start="195:17" pos:end="195:48"><expr pos:start="195:17" pos:end="195:47"><name pos:start="195:17" pos:end="195:31">best_bytestream</name> <operator pos:start="195:33" pos:end="195:33">=</operator> <name pos:start="195:35" pos:end="195:47"><name pos:start="195:35" pos:end="195:35">s</name><operator pos:start="195:36" pos:end="195:37">-&gt;</operator><name pos:start="195:38" pos:end="195:47">bytestream</name></name></expr>;</expr_stmt>

                <expr_stmt pos:start="197:17" pos:end="197:55"><expr pos:start="197:17" pos:end="197:54"><name pos:start="197:17" pos:end="197:36">best_bytestream_size</name> <operator pos:start="197:38" pos:end="197:38">=</operator> <name pos:start="197:40" pos:end="197:54">bytestream_size</name></expr>;</expr_stmt>



                <if_stmt pos:start="201:17" pos:end="213:17"><if pos:start="201:17" pos:end="207:17">if <condition pos:start="201:20" pos:end="201:59">(<expr pos:start="201:21" pos:end="201:58"><name pos:start="201:21" pos:end="201:35">best_bytestream</name> <operator pos:start="201:37" pos:end="201:38">==</operator> <name pos:start="201:40" pos:end="201:58">original_bytestream</name></expr>)</condition> <block pos:start="201:61" pos:end="207:17">{<block_content pos:start="203:21" pos:end="205:60">

                    <expr_stmt pos:start="203:21" pos:end="203:52"><expr pos:start="203:21" pos:end="203:51"><name pos:start="203:21" pos:end="203:33"><name pos:start="203:21" pos:end="203:21">s</name><operator pos:start="203:22" pos:end="203:23">-&gt;</operator><name pos:start="203:24" pos:end="203:33">bytestream</name></name> <operator pos:start="203:35" pos:end="203:35">=</operator> <name pos:start="203:37" pos:end="203:51">temp_bytestream</name></expr>;</expr_stmt>

                    <expr_stmt pos:start="205:21" pos:end="205:60"><expr pos:start="205:21" pos:end="205:59"><name pos:start="205:21" pos:end="205:37"><name pos:start="205:21" pos:end="205:21">s</name><operator pos:start="205:22" pos:end="205:23">-&gt;</operator><name pos:start="205:24" pos:end="205:37">bytestream_end</name></name> <operator pos:start="205:39" pos:end="205:39">=</operator> <name pos:start="205:41" pos:end="205:59">temp_bytestream_end</name></expr>;</expr_stmt>

                </block_content>}</block></if> <else pos:start="207:19" pos:end="213:17">else <block pos:start="207:24" pos:end="213:17">{<block_content pos:start="209:21" pos:end="211:64">

                    <expr_stmt pos:start="209:21" pos:end="209:56"><expr pos:start="209:21" pos:end="209:55"><name pos:start="209:21" pos:end="209:33"><name pos:start="209:21" pos:end="209:21">s</name><operator pos:start="209:22" pos:end="209:23">-&gt;</operator><name pos:start="209:24" pos:end="209:33">bytestream</name></name> <operator pos:start="209:35" pos:end="209:35">=</operator> <name pos:start="209:37" pos:end="209:55">original_bytestream</name></expr>;</expr_stmt>

                    <expr_stmt pos:start="211:21" pos:end="211:64"><expr pos:start="211:21" pos:end="211:63"><name pos:start="211:21" pos:end="211:37"><name pos:start="211:21" pos:end="211:21">s</name><operator pos:start="211:22" pos:end="211:23">-&gt;</operator><name pos:start="211:24" pos:end="211:37">bytestream_end</name></name> <operator pos:start="211:39" pos:end="211:39">=</operator> <name pos:start="211:41" pos:end="211:63">original_bytestream_end</name></expr>;</expr_stmt>

                </block_content>}</block></else></if_stmt>

            </block_content>}</block></if></if_stmt>

        </block_content>}</block></for>

    </block_content>}</block></for>



    <expr_stmt pos:start="223:5" pos:end="223:46"><expr pos:start="223:5" pos:end="223:45"><name pos:start="223:5" pos:end="223:22"><name pos:start="223:5" pos:end="223:5">s</name><operator pos:start="223:6" pos:end="223:7">-&gt;</operator><name pos:start="223:8" pos:end="223:22">sequence_number</name></name> <operator pos:start="223:24" pos:end="223:24">=</operator> <name pos:start="223:26" pos:end="223:45">best_sequence_number</name></expr>;</expr_stmt>

    <expr_stmt pos:start="225:5" pos:end="225:63"><expr pos:start="225:5" pos:end="225:62"><name pos:start="225:5" pos:end="225:17"><name pos:start="225:5" pos:end="225:5">s</name><operator pos:start="225:6" pos:end="225:7">-&gt;</operator><name pos:start="225:8" pos:end="225:17">bytestream</name></name> <operator pos:start="225:19" pos:end="225:19">=</operator> <name pos:start="225:21" pos:end="225:39">original_bytestream</name> <operator pos:start="225:41" pos:end="225:41">+</operator> <name pos:start="225:43" pos:end="225:62">best_bytestream_size</name></expr>;</expr_stmt>

    <expr_stmt pos:start="227:5" pos:end="227:48"><expr pos:start="227:5" pos:end="227:47"><name pos:start="227:5" pos:end="227:21"><name pos:start="227:5" pos:end="227:5">s</name><operator pos:start="227:6" pos:end="227:7">-&gt;</operator><name pos:start="227:8" pos:end="227:21">bytestream_end</name></name> <operator pos:start="227:23" pos:end="227:23">=</operator> <name pos:start="227:25" pos:end="227:47">original_bytestream_end</name></expr>;</expr_stmt>

    <if_stmt pos:start="229:5" pos:end="231:75"><if pos:start="229:5" pos:end="231:75">if <condition pos:start="229:8" pos:end="229:47">(<expr pos:start="229:9" pos:end="229:46"><name pos:start="229:9" pos:end="229:23">best_bytestream</name> <operator pos:start="229:25" pos:end="229:26">!=</operator> <name pos:start="229:28" pos:end="229:46">original_bytestream</name></expr>)</condition><block type="pseudo" pos:start="231:9" pos:end="231:75"><block_content pos:start="231:9" pos:end="231:75">

        <expr_stmt pos:start="231:9" pos:end="231:75"><expr pos:start="231:9" pos:end="231:74"><call pos:start="231:9" pos:end="231:74"><name pos:start="231:9" pos:end="231:14">memcpy</name><argument_list pos:start="231:15" pos:end="231:74">(<argument pos:start="231:16" pos:end="231:34"><expr pos:start="231:16" pos:end="231:34"><name pos:start="231:16" pos:end="231:34">original_bytestream</name></expr></argument>, <argument pos:start="231:37" pos:end="231:51"><expr pos:start="231:37" pos:end="231:51"><name pos:start="231:37" pos:end="231:51">best_bytestream</name></expr></argument>, <argument pos:start="231:54" pos:end="231:73"><expr pos:start="231:54" pos:end="231:73"><name pos:start="231:54" pos:end="231:73">best_bytestream_size</name></expr></argument>)</argument_list></call></expr>;</expr_stmt></block_content></block></if></if_stmt>



    <expr_stmt pos:start="235:5" pos:end="235:12"><expr pos:start="235:5" pos:end="235:11"><name pos:start="235:5" pos:end="235:7">ret</name> <operator pos:start="235:9" pos:end="235:9">=</operator> <literal type="number" pos:start="235:11" pos:end="235:11">0</literal></expr>;</expr_stmt>



<label pos:start="239:1" pos:end="239:5"><name pos:start="239:1" pos:end="239:4">fail</name>:</label>

    <expr_stmt pos:start="241:5" pos:end="241:31"><expr pos:start="241:5" pos:end="241:30"><call pos:start="241:5" pos:end="241:30"><name pos:start="241:5" pos:end="241:12">av_freep</name><argument_list pos:start="241:13" pos:end="241:30">(<argument pos:start="241:14" pos:end="241:29"><expr pos:start="241:14" pos:end="241:29"><operator pos:start="241:14" pos:end="241:14">&amp;</operator><name pos:start="241:15" pos:end="241:29">temp_bytestream</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    <expr_stmt pos:start="243:5" pos:end="243:30"><expr pos:start="243:5" pos:end="243:29"><call pos:start="243:5" pos:end="243:29"><name pos:start="243:5" pos:end="243:17">av_frame_free</name><argument_list pos:start="243:18" pos:end="243:29">(<argument pos:start="243:19" pos:end="243:28"><expr pos:start="243:19" pos:end="243:28"><operator pos:start="243:19" pos:end="243:19">&amp;</operator><name pos:start="243:20" pos:end="243:28">diffFrame</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    <return pos:start="245:5" pos:end="245:15">return <expr pos:start="245:12" pos:end="245:14"><name pos:start="245:12" pos:end="245:14">ret</name></expr>;</return>

</block_content>}</block></function>
</unit>
