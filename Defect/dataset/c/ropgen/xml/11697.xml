<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<unit xmlns="http://www.srcML.org/srcML/src" xmlns:pos="http://www.srcML.org/srcML/position" revision="1.0.0" language="C" filename="dataset/ropgen/aug/1/11697.c" pos:tabs="8"><function pos:start="1:1" pos:end="163:1"><type pos:start="1:1" pos:end="1:11"><specifier pos:start="1:1" pos:end="1:6">static</specifier> <name pos:start="1:8" pos:end="1:11">void</name></type> <name pos:start="1:13" pos:end="1:26">search_for_pns</name><parameter_list pos:start="1:27" pos:end="1:94">(<parameter pos:start="1:28" pos:end="1:43"><decl pos:start="1:28" pos:end="1:43"><type pos:start="1:28" pos:end="1:43"><name pos:start="1:28" pos:end="1:40">AACEncContext</name> <modifier pos:start="1:42" pos:end="1:42">*</modifier></type><name pos:start="1:43" pos:end="1:43">s</name></decl></parameter>, <parameter pos:start="1:46" pos:end="1:66"><decl pos:start="1:46" pos:end="1:66"><type pos:start="1:46" pos:end="1:66"><name pos:start="1:46" pos:end="1:59">AVCodecContext</name> <modifier pos:start="1:61" pos:end="1:61">*</modifier></type><name pos:start="1:62" pos:end="1:66">avctx</name></decl></parameter>, <parameter pos:start="1:69" pos:end="1:93"><decl pos:start="1:69" pos:end="1:93"><type pos:start="1:69" pos:end="1:93"><name pos:start="1:69" pos:end="1:88">SingleChannelElement</name> <modifier pos:start="1:90" pos:end="1:90">*</modifier></type><name pos:start="1:91" pos:end="1:93">sce</name></decl></parameter>)</parameter_list>

<block pos:start="3:1" pos:end="163:1">{<block_content pos:start="5:5" pos:end="161:5">

    <decl_stmt pos:start="5:5" pos:end="5:20"><decl pos:start="5:5" pos:end="5:19"><type pos:start="5:5" pos:end="5:15"><name pos:start="5:5" pos:end="5:13">FFPsyBand</name> <modifier pos:start="5:15" pos:end="5:15">*</modifier></type><name pos:start="5:16" pos:end="5:19">band</name></decl>;</decl_stmt>

    <decl_stmt pos:start="7:5" pos:end="7:20"><decl pos:start="7:5" pos:end="7:9"><type pos:start="7:5" pos:end="7:7"><name pos:start="7:5" pos:end="7:7">int</name></type> <name pos:start="7:9" pos:end="7:9">w</name></decl>, <decl pos:start="7:12" pos:end="7:12"><type ref="prev" pos:start="7:5" pos:end="7:7"/><name pos:start="7:12" pos:end="7:12">g</name></decl>, <decl pos:start="7:15" pos:end="7:16"><type ref="prev" pos:start="7:5" pos:end="7:7"/><name pos:start="7:15" pos:end="7:16">w2</name></decl>, <decl pos:start="7:19" pos:end="7:19"><type ref="prev" pos:start="7:5" pos:end="7:7"/><name pos:start="7:19" pos:end="7:19">i</name></decl>;</decl_stmt>

    <decl_stmt pos:start="9:5" pos:end="9:63"><decl pos:start="9:5" pos:end="9:34"><type pos:start="9:5" pos:end="9:11"><name pos:start="9:5" pos:end="9:9">float</name> <modifier pos:start="9:11" pos:end="9:11">*</modifier></type><name pos:start="9:12" pos:end="9:14">PNS</name> <init pos:start="9:16" pos:end="9:34">= <expr pos:start="9:18" pos:end="9:34"><operator pos:start="9:18" pos:end="9:18">&amp;</operator><name pos:start="9:19" pos:end="9:34"><name pos:start="9:19" pos:end="9:19">s</name><operator pos:start="9:20" pos:end="9:21">-&gt;</operator><name pos:start="9:22" pos:end="9:27">scoefs</name><index pos:start="9:28" pos:end="9:34">[<expr pos:start="9:29" pos:end="9:33"><literal type="number" pos:start="9:29" pos:end="9:29">0</literal><operator pos:start="9:30" pos:end="9:30">*</operator><literal type="number" pos:start="9:31" pos:end="9:33">128</literal></expr>]</index></name></expr></init></decl>, <decl pos:start="9:37" pos:end="9:62"><type ref="prev" pos:start="9:5" pos:end="9:11"><modifier pos:start="9:37" pos:end="9:37">*</modifier></type><name pos:start="9:38" pos:end="9:42">PNS34</name> <init pos:start="9:44" pos:end="9:62">= <expr pos:start="9:46" pos:end="9:62"><operator pos:start="9:46" pos:end="9:46">&amp;</operator><name pos:start="9:47" pos:end="9:62"><name pos:start="9:47" pos:end="9:47">s</name><operator pos:start="9:48" pos:end="9:49">-&gt;</operator><name pos:start="9:50" pos:end="9:55">scoefs</name><index pos:start="9:56" pos:end="9:62">[<expr pos:start="9:57" pos:end="9:61"><literal type="number" pos:start="9:57" pos:end="9:57">1</literal><operator pos:start="9:58" pos:end="9:58">*</operator><literal type="number" pos:start="9:59" pos:end="9:61">128</literal></expr>]</index></name></expr></init></decl>;</decl_stmt>

    <decl_stmt pos:start="11:5" pos:end="11:37"><decl pos:start="11:5" pos:end="11:36"><type pos:start="11:5" pos:end="11:11"><name pos:start="11:5" pos:end="11:9">float</name> <modifier pos:start="11:11" pos:end="11:11">*</modifier></type><name pos:start="11:12" pos:end="11:16">NOR34</name> <init pos:start="11:18" pos:end="11:36">= <expr pos:start="11:20" pos:end="11:36"><operator pos:start="11:20" pos:end="11:20">&amp;</operator><name pos:start="11:21" pos:end="11:36"><name pos:start="11:21" pos:end="11:21">s</name><operator pos:start="11:22" pos:end="11:23">-&gt;</operator><name pos:start="11:24" pos:end="11:29">scoefs</name><index pos:start="11:30" pos:end="11:36">[<expr pos:start="11:31" pos:end="11:35"><literal type="number" pos:start="11:31" pos:end="11:31">3</literal><operator pos:start="11:32" pos:end="11:32">*</operator><literal type="number" pos:start="11:33" pos:end="11:35">128</literal></expr>]</index></name></expr></init></decl>;</decl_stmt>

    <decl_stmt pos:start="13:5" pos:end="13:35"><decl pos:start="13:5" pos:end="13:34"><type pos:start="13:5" pos:end="13:15"><specifier pos:start="13:5" pos:end="13:9">const</specifier> <name pos:start="13:11" pos:end="13:15">float</name></type> <name pos:start="13:17" pos:end="13:22">lambda</name> <init pos:start="13:24" pos:end="13:34">= <expr pos:start="13:26" pos:end="13:34"><name pos:start="13:26" pos:end="13:34"><name pos:start="13:26" pos:end="13:26">s</name><operator pos:start="13:27" pos:end="13:28">-&gt;</operator><name pos:start="13:29" pos:end="13:34">lambda</name></name></expr></init></decl>;</decl_stmt>

    <decl_stmt pos:start="15:5" pos:end="15:83"><decl pos:start="15:5" pos:end="15:82"><type pos:start="15:5" pos:end="15:15"><specifier pos:start="15:5" pos:end="15:9">const</specifier> <name pos:start="15:11" pos:end="15:15">float</name></type> <name pos:start="15:17" pos:end="15:25">freq_mult</name> <init pos:start="15:27" pos:end="15:82">= <expr pos:start="15:29" pos:end="15:82"><name pos:start="15:29" pos:end="15:46"><name pos:start="15:29" pos:end="15:33">avctx</name><operator pos:start="15:34" pos:end="15:35">-&gt;</operator><name pos:start="15:36" pos:end="15:46">sample_rate</name></name><operator pos:start="15:47" pos:end="15:47">/</operator><operator pos:start="15:48" pos:end="15:48">(</operator><literal type="number" pos:start="15:49" pos:end="15:55">1024.0f</literal><operator pos:start="15:56" pos:end="15:56">/</operator><name pos:start="15:57" pos:end="15:76"><name pos:start="15:57" pos:end="15:59">sce</name><operator pos:start="15:60" pos:end="15:61">-&gt;</operator><name pos:start="15:62" pos:end="15:64">ics</name><operator pos:start="15:65" pos:end="15:65">.</operator><name pos:start="15:66" pos:end="15:76">num_windows</name></name><operator pos:start="15:77" pos:end="15:77">)</operator><operator pos:start="15:78" pos:end="15:78">/</operator><literal type="number" pos:start="15:79" pos:end="15:82">2.0f</literal></expr></init></decl>;</decl_stmt>

    <decl_stmt pos:start="17:5" pos:end="17:64"><decl pos:start="17:5" pos:end="17:63"><type pos:start="17:5" pos:end="17:15"><specifier pos:start="17:5" pos:end="17:9">const</specifier> <name pos:start="17:11" pos:end="17:15">float</name></type> <name pos:start="17:17" pos:end="17:24">thr_mult</name> <init pos:start="17:26" pos:end="17:63">= <expr pos:start="17:28" pos:end="17:63"><name pos:start="17:28" pos:end="17:47">NOISE_LAMBDA_REPLACE</name><operator pos:start="17:48" pos:end="17:48">*</operator><operator pos:start="17:49" pos:end="17:49">(</operator><literal type="number" pos:start="17:50" pos:end="17:55">100.0f</literal><operator pos:start="17:56" pos:end="17:56">/</operator><name pos:start="17:57" pos:end="17:62">lambda</name><operator pos:start="17:63" pos:end="17:63">)</operator></expr></init></decl>;</decl_stmt>

    <decl_stmt pos:start="19:5" pos:end="19:73"><decl pos:start="19:5" pos:end="19:72"><type pos:start="19:5" pos:end="19:15"><specifier pos:start="19:5" pos:end="19:9">const</specifier> <name pos:start="19:11" pos:end="19:15">float</name></type> <name pos:start="19:17" pos:end="19:32">spread_threshold</name> <init pos:start="19:34" pos:end="19:72">= <expr pos:start="19:36" pos:end="19:72"><name pos:start="19:36" pos:end="19:57">NOISE_SPREAD_THRESHOLD</name><operator pos:start="19:58" pos:end="19:58">*</operator><operator pos:start="19:59" pos:end="19:59">(</operator><name pos:start="19:60" pos:end="19:65">lambda</name><operator pos:start="19:66" pos:end="19:66">/</operator><literal type="number" pos:start="19:67" pos:end="19:71">100.f</literal><operator pos:start="19:72" pos:end="19:72">)</operator></expr></init></decl>;</decl_stmt>



    <if_stmt pos:start="23:5" pos:end="25:15"><if pos:start="23:5" pos:end="25:15">if <condition pos:start="23:8" pos:end="23:60">(<expr pos:start="23:9" pos:end="23:59"><name pos:start="23:9" pos:end="23:35"><name pos:start="23:9" pos:end="23:11">sce</name><operator pos:start="23:12" pos:end="23:13">-&gt;</operator><name pos:start="23:14" pos:end="23:16">ics</name><operator pos:start="23:17" pos:end="23:17">.</operator><name pos:start="23:18" pos:end="23:32">window_sequence</name><index pos:start="23:33" pos:end="23:35">[<expr pos:start="23:34" pos:end="23:34"><literal type="number" pos:start="23:34" pos:end="23:34">0</literal></expr>]</index></name> <operator pos:start="23:37" pos:end="23:38">==</operator> <name pos:start="23:40" pos:end="23:59">EIGHT_SHORT_SEQUENCE</name></expr>)</condition><block type="pseudo" pos:start="25:9" pos:end="25:15"><block_content pos:start="25:9" pos:end="25:15">

        <return pos:start="25:9" pos:end="25:15">return;</return></block_content></block></if></if_stmt>



    <for pos:start="29:5" pos:end="161:5">for <control pos:start="29:9" pos:end="29:69">(<init pos:start="29:10" pos:end="29:15"><expr pos:start="29:10" pos:end="29:14"><name pos:start="29:10" pos:end="29:10">w</name> <operator pos:start="29:12" pos:end="29:12">=</operator> <literal type="number" pos:start="29:14" pos:end="29:14">0</literal></expr>;</init> <condition pos:start="29:17" pos:end="29:41"><expr pos:start="29:17" pos:end="29:40"><name pos:start="29:17" pos:end="29:17">w</name> <operator pos:start="29:19" pos:end="29:19">&lt;</operator> <name pos:start="29:21" pos:end="29:40"><name pos:start="29:21" pos:end="29:23">sce</name><operator pos:start="29:24" pos:end="29:25">-&gt;</operator><name pos:start="29:26" pos:end="29:28">ics</name><operator pos:start="29:29" pos:end="29:29">.</operator><name pos:start="29:30" pos:end="29:40">num_windows</name></name></expr>;</condition> <incr pos:start="29:43" pos:end="29:68"><expr pos:start="29:43" pos:end="29:68"><name pos:start="29:43" pos:end="29:43">w</name> <operator pos:start="29:45" pos:end="29:46">+=</operator> <name pos:start="29:48" pos:end="29:68"><name pos:start="29:48" pos:end="29:50">sce</name><operator pos:start="29:51" pos:end="29:52">-&gt;</operator><name pos:start="29:53" pos:end="29:55">ics</name><operator pos:start="29:56" pos:end="29:56">.</operator><name pos:start="29:57" pos:end="29:65">group_len</name><index pos:start="29:66" pos:end="29:68">[<expr pos:start="29:67" pos:end="29:67"><name pos:start="29:67" pos:end="29:67">w</name></expr>]</index></name></expr></incr>)</control> <block pos:start="29:71" pos:end="161:5">{<block_content pos:start="31:9" pos:end="159:9">

        <for pos:start="31:9" pos:end="159:9">for <control pos:start="31:13" pos:end="31:47">(<init pos:start="31:14" pos:end="31:19"><expr pos:start="31:14" pos:end="31:18"><name pos:start="31:14" pos:end="31:14">g</name> <operator pos:start="31:16" pos:end="31:16">=</operator> <literal type="number" pos:start="31:18" pos:end="31:18">0</literal></expr>;</init>  <condition pos:start="31:22" pos:end="31:42"><expr pos:start="31:22" pos:end="31:41"><name pos:start="31:22" pos:end="31:22">g</name> <operator pos:start="31:24" pos:end="31:24">&lt;</operator> <name pos:start="31:26" pos:end="31:41"><name pos:start="31:26" pos:end="31:28">sce</name><operator pos:start="31:29" pos:end="31:30">-&gt;</operator><name pos:start="31:31" pos:end="31:33">ics</name><operator pos:start="31:34" pos:end="31:34">.</operator><name pos:start="31:35" pos:end="31:41">num_swb</name></name></expr>;</condition> <incr pos:start="31:44" pos:end="31:46"><expr pos:start="31:44" pos:end="31:46"><name pos:start="31:44" pos:end="31:44">g</name><operator pos:start="31:45" pos:end="31:46">++</operator></expr></incr>)</control> <block pos:start="31:49" pos:end="159:9">{<block_content pos:start="33:13" pos:end="157:13">

            <decl_stmt pos:start="33:13" pos:end="33:26"><decl pos:start="33:13" pos:end="33:25"><type pos:start="33:13" pos:end="33:15"><name pos:start="33:13" pos:end="33:15">int</name></type> <name pos:start="33:17" pos:end="33:25">noise_sfi</name></decl>;</decl_stmt>

            <decl_stmt pos:start="35:13" pos:end="35:56"><decl pos:start="35:13" pos:end="35:30"><type pos:start="35:13" pos:end="35:17"><name pos:start="35:13" pos:end="35:17">float</name></type> <name pos:start="35:19" pos:end="35:23">dist1</name> <init pos:start="35:25" pos:end="35:30">= <expr pos:start="35:27" pos:end="35:30"><literal type="number" pos:start="35:27" pos:end="35:30">0.0f</literal></expr></init></decl>, <decl pos:start="35:33" pos:end="35:44"><type ref="prev" pos:start="35:13" pos:end="35:17"/><name pos:start="35:33" pos:end="35:37">dist2</name> <init pos:start="35:39" pos:end="35:44">= <expr pos:start="35:41" pos:end="35:44"><literal type="number" pos:start="35:41" pos:end="35:44">0.0f</literal></expr></init></decl>, <decl pos:start="35:47" pos:end="35:55"><type ref="prev" pos:start="35:13" pos:end="35:17"/><name pos:start="35:47" pos:end="35:55">noise_amp</name></decl>;</decl_stmt>

            <decl_stmt pos:start="37:13" pos:end="37:63"><decl pos:start="37:13" pos:end="37:35"><type pos:start="37:13" pos:end="37:17"><name pos:start="37:13" pos:end="37:17">float</name></type> <name pos:start="37:19" pos:end="37:28">pns_energy</name> <init pos:start="37:30" pos:end="37:35">= <expr pos:start="37:32" pos:end="37:35"><literal type="number" pos:start="37:32" pos:end="37:35">0.0f</literal></expr></init></decl>, <decl pos:start="37:38" pos:end="37:49"><type ref="prev" pos:start="37:13" pos:end="37:17"/><name pos:start="37:38" pos:end="37:49">energy_ratio</name></decl>, <decl pos:start="37:52" pos:end="37:62"><type ref="prev" pos:start="37:13" pos:end="37:17"/><name pos:start="37:52" pos:end="37:62">dist_thresh</name></decl>;</decl_stmt>

            <decl_stmt pos:start="39:13" pos:end="39:69"><decl pos:start="39:13" pos:end="39:35"><type pos:start="39:13" pos:end="39:17"><name pos:start="39:13" pos:end="39:17">float</name></type> <name pos:start="39:19" pos:end="39:28">sfb_energy</name> <init pos:start="39:30" pos:end="39:35">= <expr pos:start="39:32" pos:end="39:35"><literal type="number" pos:start="39:32" pos:end="39:35">0.0f</literal></expr></init></decl>, <decl pos:start="39:38" pos:end="39:53"><type ref="prev" pos:start="39:13" pos:end="39:17"/><name pos:start="39:38" pos:end="39:46">threshold</name> <init pos:start="39:48" pos:end="39:53">= <expr pos:start="39:50" pos:end="39:53"><literal type="number" pos:start="39:50" pos:end="39:53">0.0f</literal></expr></init></decl>, <decl pos:start="39:56" pos:end="39:68"><type ref="prev" pos:start="39:13" pos:end="39:17"/><name pos:start="39:56" pos:end="39:61">spread</name> <init pos:start="39:63" pos:end="39:68">= <expr pos:start="39:65" pos:end="39:68"><literal type="number" pos:start="39:65" pos:end="39:68">0.0f</literal></expr></init></decl>;</decl_stmt>

            <decl_stmt pos:start="41:13" pos:end="41:58"><decl pos:start="41:13" pos:end="41:57"><type pos:start="41:13" pos:end="41:21"><specifier pos:start="41:13" pos:end="41:17">const</specifier> <name pos:start="41:19" pos:end="41:21">int</name></type> <name pos:start="41:23" pos:end="41:27">start</name> <init pos:start="41:29" pos:end="41:57">= <expr pos:start="41:31" pos:end="41:57"><name pos:start="41:31" pos:end="41:57"><name pos:start="41:31" pos:end="41:33">sce</name><operator pos:start="41:34" pos:end="41:35">-&gt;</operator><name pos:start="41:36" pos:end="41:38">ics</name><operator pos:start="41:39" pos:end="41:39">.</operator><name pos:start="41:40" pos:end="41:49">swb_offset</name><index pos:start="41:50" pos:end="41:57">[<expr pos:start="41:51" pos:end="41:56"><name pos:start="41:51" pos:end="41:51">w</name><operator pos:start="41:52" pos:end="41:52">*</operator><literal type="number" pos:start="41:53" pos:end="41:55">16</literal><operator pos:start="41:55" pos:end="41:55">+</operator><name pos:start="41:56" pos:end="41:56">g</name></expr>]</index></name></expr></init></decl>;</decl_stmt>

            <decl_stmt pos:start="43:13" pos:end="43:47"><decl pos:start="43:13" pos:end="43:46"><type pos:start="43:13" pos:end="43:23"><specifier pos:start="43:13" pos:end="43:17">const</specifier> <name pos:start="43:19" pos:end="43:23">float</name></type> <name pos:start="43:25" pos:end="43:28">freq</name> <init pos:start="43:30" pos:end="43:46">= <expr pos:start="43:32" pos:end="43:46"><name pos:start="43:32" pos:end="43:36">start</name><operator pos:start="43:37" pos:end="43:37">*</operator><name pos:start="43:38" pos:end="43:46">freq_mult</name></expr></init></decl>;</decl_stmt>

            <decl_stmt pos:start="45:13" pos:end="45:77"><decl pos:start="45:13" pos:end="45:76"><type pos:start="45:13" pos:end="45:23"><specifier pos:start="45:13" pos:end="45:17">const</specifier> <name pos:start="45:19" pos:end="45:23">float</name></type> <name pos:start="45:25" pos:end="45:34">freq_boost</name> <init pos:start="45:36" pos:end="45:76">= <expr pos:start="45:38" pos:end="45:76"><call pos:start="45:38" pos:end="45:76"><name pos:start="45:38" pos:end="45:42">FFMAX</name><argument_list pos:start="45:43" pos:end="45:76">(<argument pos:start="45:44" pos:end="45:69"><expr pos:start="45:44" pos:end="45:69"><literal type="number" pos:start="45:44" pos:end="45:48">0.88f</literal><operator pos:start="45:49" pos:end="45:49">*</operator><name pos:start="45:50" pos:end="45:53">freq</name><operator pos:start="45:54" pos:end="45:54">/</operator><name pos:start="45:55" pos:end="45:69">NOISE_LOW_LIMIT</name></expr></argument>, <argument pos:start="45:72" pos:end="45:75"><expr pos:start="45:72" pos:end="45:75"><literal type="number" pos:start="45:72" pos:end="45:75">1.0f</literal></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>

            <if_stmt pos:start="47:13" pos:end="49:25"><if pos:start="47:13" pos:end="49:25">if <condition pos:start="47:16" pos:end="47:81">(<expr pos:start="47:17" pos:end="47:80"><name pos:start="47:17" pos:end="47:20">freq</name> <operator pos:start="47:22" pos:end="47:22">&lt;</operator> <name pos:start="47:24" pos:end="47:38">NOISE_LOW_LIMIT</name> <operator pos:start="47:40" pos:end="47:41">||</operator> <name pos:start="47:43" pos:end="47:55"><name pos:start="47:43" pos:end="47:47">avctx</name><operator pos:start="47:48" pos:end="47:49">-&gt;</operator><name pos:start="47:50" pos:end="47:55">cutoff</name></name> <operator pos:start="47:57" pos:end="47:58">&amp;&amp;</operator> <name pos:start="47:60" pos:end="47:63">freq</name> <operator pos:start="47:65" pos:end="47:66">&gt;=</operator> <name pos:start="47:68" pos:end="47:80"><name pos:start="47:68" pos:end="47:72">avctx</name><operator pos:start="47:73" pos:end="47:74">-&gt;</operator><name pos:start="47:75" pos:end="47:80">cutoff</name></name></expr>)</condition><block type="pseudo" pos:start="49:17" pos:end="49:25"><block_content pos:start="49:17" pos:end="49:25">

                <continue pos:start="49:17" pos:end="49:25">continue;</continue></block_content></block></if></if_stmt>

            <for pos:start="51:13" pos:end="61:13">for <control pos:start="51:17" pos:end="51:58">(<init pos:start="51:18" pos:end="51:24"><expr pos:start="51:18" pos:end="51:23"><name pos:start="51:18" pos:end="51:19">w2</name> <operator pos:start="51:21" pos:end="51:21">=</operator> <literal type="number" pos:start="51:23" pos:end="51:23">0</literal></expr>;</init> <condition pos:start="51:26" pos:end="51:52"><expr pos:start="51:26" pos:end="51:51"><name pos:start="51:26" pos:end="51:27">w2</name> <operator pos:start="51:29" pos:end="51:29">&lt;</operator> <name pos:start="51:31" pos:end="51:51"><name pos:start="51:31" pos:end="51:33">sce</name><operator pos:start="51:34" pos:end="51:35">-&gt;</operator><name pos:start="51:36" pos:end="51:38">ics</name><operator pos:start="51:39" pos:end="51:39">.</operator><name pos:start="51:40" pos:end="51:48">group_len</name><index pos:start="51:49" pos:end="51:51">[<expr pos:start="51:50" pos:end="51:50"><name pos:start="51:50" pos:end="51:50">w</name></expr>]</index></name></expr>;</condition> <incr pos:start="51:54" pos:end="51:57"><expr pos:start="51:54" pos:end="51:57"><name pos:start="51:54" pos:end="51:55">w2</name><operator pos:start="51:56" pos:end="51:57">++</operator></expr></incr>)</control> <block pos:start="51:60" pos:end="61:13">{<block_content pos:start="53:17" pos:end="59:46">

                <expr_stmt pos:start="53:17" pos:end="53:73"><expr pos:start="53:17" pos:end="53:72"><name pos:start="53:17" pos:end="53:20">band</name> <operator pos:start="53:22" pos:end="53:22">=</operator> <operator pos:start="53:24" pos:end="53:24">&amp;</operator><name pos:start="53:25" pos:end="53:49"><name pos:start="53:25" pos:end="53:25">s</name><operator pos:start="53:26" pos:end="53:27">-&gt;</operator><name pos:start="53:28" pos:end="53:30">psy</name><operator pos:start="53:31" pos:end="53:31">.</operator><name pos:start="53:32" pos:end="53:33">ch</name><index pos:start="53:34" pos:end="53:49">[<expr pos:start="53:35" pos:end="53:48"><name pos:start="53:35" pos:end="53:48"><name pos:start="53:35" pos:end="53:35">s</name><operator pos:start="53:36" pos:end="53:37">-&gt;</operator><name pos:start="53:38" pos:end="53:48">cur_channel</name></name></expr>]</index></name><operator pos:start="53:50" pos:end="53:50">.</operator><name pos:start="53:51" pos:end="53:72"><name pos:start="53:51" pos:end="53:59">psy_bands</name><index pos:start="53:60" pos:end="53:72">[<expr pos:start="53:61" pos:end="53:71"><operator pos:start="53:61" pos:end="53:61">(</operator><name pos:start="53:62" pos:end="53:62">w</name><operator pos:start="53:63" pos:end="53:63">+</operator><name pos:start="53:64" pos:end="53:65">w2</name><operator pos:start="53:66" pos:end="53:66">)</operator><operator pos:start="53:67" pos:end="53:67">*</operator><literal type="number" pos:start="53:68" pos:end="53:70">16</literal><operator pos:start="53:70" pos:end="53:70">+</operator><name pos:start="53:71" pos:end="53:71">g</name></expr>]</index></name></expr>;</expr_stmt>

                <expr_stmt pos:start="55:17" pos:end="55:43"><expr pos:start="55:17" pos:end="55:42"><name pos:start="55:17" pos:end="55:26">sfb_energy</name> <operator pos:start="55:28" pos:end="55:29">+=</operator> <name pos:start="55:31" pos:end="55:42"><name pos:start="55:31" pos:end="55:34">band</name><operator pos:start="55:35" pos:end="55:36">-&gt;</operator><name pos:start="55:37" pos:end="55:42">energy</name></name></expr>;</expr_stmt>

                <expr_stmt pos:start="57:17" pos:end="57:43"><expr pos:start="57:17" pos:end="57:42"><name pos:start="57:17" pos:end="57:22">spread</name>     <operator pos:start="57:28" pos:end="57:29">+=</operator> <name pos:start="57:31" pos:end="57:42"><name pos:start="57:31" pos:end="57:34">band</name><operator pos:start="57:35" pos:end="57:36">-&gt;</operator><name pos:start="57:37" pos:end="57:42">spread</name></name></expr>;</expr_stmt>

                <expr_stmt pos:start="59:17" pos:end="59:46"><expr pos:start="59:17" pos:end="59:45"><name pos:start="59:17" pos:end="59:25">threshold</name>  <operator pos:start="59:28" pos:end="59:29">+=</operator> <name pos:start="59:31" pos:end="59:45"><name pos:start="59:31" pos:end="59:34">band</name><operator pos:start="59:35" pos:end="59:36">-&gt;</operator><name pos:start="59:37" pos:end="59:45">threshold</name></name></expr>;</expr_stmt>

            </block_content>}</block></for>



            <comment type="block" pos:start="65:13" pos:end="65:70">/* Ramps down at ~8000Hz and loosens the dist threshold */</comment>

            <expr_stmt pos:start="67:13" pos:end="67:66"><expr pos:start="67:13" pos:end="67:65"><name pos:start="67:13" pos:end="67:23">dist_thresh</name> <operator pos:start="67:25" pos:end="67:25">=</operator> <call pos:start="67:27" pos:end="67:65"><name pos:start="67:27" pos:end="67:31">FFMIN</name><argument_list pos:start="67:32" pos:end="67:65">(<argument pos:start="67:33" pos:end="67:57"><expr pos:start="67:33" pos:end="67:57"><literal type="number" pos:start="67:33" pos:end="67:36">2.5f</literal><operator pos:start="67:37" pos:end="67:37">*</operator><name pos:start="67:38" pos:end="67:52">NOISE_LOW_LIMIT</name><operator pos:start="67:53" pos:end="67:53">/</operator><name pos:start="67:54" pos:end="67:57">freq</name></expr></argument>, <argument pos:start="67:60" pos:end="67:64"><expr pos:start="67:60" pos:end="67:64"><literal type="number" pos:start="67:60" pos:end="67:64">1.27f</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>



            <if_stmt pos:start="71:13" pos:end="79:13"><if pos:start="71:13" pos:end="79:13">if <condition pos:start="71:16" pos:end="73:59">(<expr pos:start="71:17" pos:end="73:58"><name pos:start="71:17" pos:end="71:35"><name pos:start="71:17" pos:end="71:19">sce</name><operator pos:start="71:20" pos:end="71:21">-&gt;</operator><name pos:start="71:22" pos:end="71:27">zeroes</name><index pos:start="71:28" pos:end="71:35">[<expr pos:start="71:29" pos:end="71:34"><name pos:start="71:29" pos:end="71:29">w</name><operator pos:start="71:30" pos:end="71:30">*</operator><literal type="number" pos:start="71:31" pos:end="71:32">16</literal><operator pos:start="71:33" pos:end="71:33">+</operator><name pos:start="71:34" pos:end="71:34">g</name></expr>]</index></name> <operator pos:start="71:37" pos:end="71:38">||</operator> <name pos:start="71:40" pos:end="73:28"><name pos:start="71:40" pos:end="71:45">spread</name> <argument_list type="generic" pos:start="71:47" pos:end="73:28">&lt; <argument pos:start="71:49" pos:end="73:26"><expr pos:start="71:49" pos:end="73:26"><name pos:start="71:49" pos:end="71:64">spread_threshold</name> <operator pos:start="71:66" pos:end="71:67">||</operator>

                <name pos:start="73:17" pos:end="73:26">sfb_energy</name></expr></argument> &gt;</argument_list></name> <name pos:start="73:30" pos:end="73:38">threshold</name><operator pos:start="73:39" pos:end="73:39">*</operator><name pos:start="73:40" pos:end="73:47">thr_mult</name><operator pos:start="73:48" pos:end="73:48">*</operator><name pos:start="73:49" pos:end="73:58">freq_boost</name></expr>)</condition> <block pos:start="73:61" pos:end="79:13">{<block_content pos:start="75:17" pos:end="77:25">

                <expr_stmt pos:start="75:17" pos:end="75:51"><expr pos:start="75:17" pos:end="75:50"><name pos:start="75:17" pos:end="75:37"><name pos:start="75:17" pos:end="75:19">sce</name><operator pos:start="75:20" pos:end="75:21">-&gt;</operator><name pos:start="75:22" pos:end="75:29">pns_ener</name><index pos:start="75:30" pos:end="75:37">[<expr pos:start="75:31" pos:end="75:36"><name pos:start="75:31" pos:end="75:31">w</name><operator pos:start="75:32" pos:end="75:32">*</operator><literal type="number" pos:start="75:33" pos:end="75:34">16</literal><operator pos:start="75:35" pos:end="75:35">+</operator><name pos:start="75:36" pos:end="75:36">g</name></expr>]</index></name> <operator pos:start="75:39" pos:end="75:39">=</operator> <name pos:start="75:41" pos:end="75:50">sfb_energy</name></expr>;</expr_stmt>

                <continue pos:start="77:17" pos:end="77:25">continue;</continue>

            </block_content>}</block></if></if_stmt>



            <expr_stmt pos:start="83:13" pos:end="83:72"><expr pos:start="83:13" pos:end="83:71"><name pos:start="83:13" pos:end="83:21">noise_sfi</name> <operator pos:start="83:23" pos:end="83:23">=</operator> <call pos:start="83:25" pos:end="83:71"><name pos:start="83:25" pos:end="83:31">av_clip</name><argument_list pos:start="83:32" pos:end="83:71">(<argument pos:start="83:33" pos:end="83:59"><expr pos:start="83:33" pos:end="83:59"><call pos:start="83:33" pos:end="83:59"><name pos:start="83:33" pos:end="83:38">roundf</name><argument_list pos:start="83:39" pos:end="83:59">(<argument pos:start="83:40" pos:end="83:58"><expr pos:start="83:40" pos:end="83:58"><call pos:start="83:40" pos:end="83:56"><name pos:start="83:40" pos:end="83:44">log2f</name><argument_list pos:start="83:45" pos:end="83:56">(<argument pos:start="83:46" pos:end="83:55"><expr pos:start="83:46" pos:end="83:55"><name pos:start="83:46" pos:end="83:55">sfb_energy</name></expr></argument>)</argument_list></call><operator pos:start="83:57" pos:end="83:57">*</operator><literal type="number" pos:start="83:58" pos:end="83:58">2</literal></expr></argument>)</argument_list></call></expr></argument>, <argument pos:start="83:62" pos:end="83:65"><expr pos:start="83:62" pos:end="83:65"><operator pos:start="83:62" pos:end="83:62">-</operator><literal type="number" pos:start="83:63" pos:end="83:65">100</literal></expr></argument>, <argument pos:start="83:68" pos:end="83:70"><expr pos:start="83:68" pos:end="83:70"><literal type="number" pos:start="83:68" pos:end="83:70">155</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt> <comment type="block" pos:start="83:74" pos:end="83:87">/* Quantize */</comment>

            <expr_stmt pos:start="85:13" pos:end="85:69"><expr pos:start="85:13" pos:end="85:68"><name pos:start="85:13" pos:end="85:21">noise_amp</name> <operator pos:start="85:23" pos:end="85:23">=</operator> <operator pos:start="85:25" pos:end="85:25">-</operator><name pos:start="85:26" pos:end="85:68"><name pos:start="85:26" pos:end="85:42">ff_aac_pow2sf_tab</name><index pos:start="85:43" pos:end="85:68">[<expr pos:start="85:44" pos:end="85:67"><name pos:start="85:44" pos:end="85:52">noise_sfi</name> <operator pos:start="85:54" pos:end="85:54">+</operator> <name pos:start="85:56" pos:end="85:67">POW_SF2_ZERO</name></expr>]</index></name></expr>;</expr_stmt>    <comment type="block" pos:start="85:74" pos:end="85:89">/* Dequantize */</comment>

            <for pos:start="87:13" pos:end="135:13">for <control pos:start="87:17" pos:end="87:58">(<init pos:start="87:18" pos:end="87:24"><expr pos:start="87:18" pos:end="87:23"><name pos:start="87:18" pos:end="87:19">w2</name> <operator pos:start="87:21" pos:end="87:21">=</operator> <literal type="number" pos:start="87:23" pos:end="87:23">0</literal></expr>;</init> <condition pos:start="87:26" pos:end="87:52"><expr pos:start="87:26" pos:end="87:51"><name pos:start="87:26" pos:end="87:27">w2</name> <operator pos:start="87:29" pos:end="87:29">&lt;</operator> <name pos:start="87:31" pos:end="87:51"><name pos:start="87:31" pos:end="87:33">sce</name><operator pos:start="87:34" pos:end="87:35">-&gt;</operator><name pos:start="87:36" pos:end="87:38">ics</name><operator pos:start="87:39" pos:end="87:39">.</operator><name pos:start="87:40" pos:end="87:48">group_len</name><index pos:start="87:49" pos:end="87:51">[<expr pos:start="87:50" pos:end="87:50"><name pos:start="87:50" pos:end="87:50">w</name></expr>]</index></name></expr>;</condition> <incr pos:start="87:54" pos:end="87:57"><expr pos:start="87:54" pos:end="87:57"><name pos:start="87:54" pos:end="87:55">w2</name><operator pos:start="87:56" pos:end="87:57">++</operator></expr></incr>)</control> <block pos:start="87:60" pos:end="135:13">{<block_content pos:start="89:17" pos:end="133:87">

                <decl_stmt pos:start="89:17" pos:end="89:41"><decl pos:start="89:17" pos:end="89:33"><type pos:start="89:17" pos:end="89:21"><name pos:start="89:17" pos:end="89:21">float</name></type> <name pos:start="89:23" pos:end="89:33">band_energy</name></decl>, <decl pos:start="89:36" pos:end="89:40"><type ref="prev" pos:start="89:17" pos:end="89:21"/><name pos:start="89:36" pos:end="89:40">scale</name></decl>;</decl_stmt>

                <decl_stmt pos:start="91:17" pos:end="91:69"><decl pos:start="91:17" pos:end="91:68"><type pos:start="91:17" pos:end="91:25"><specifier pos:start="91:17" pos:end="91:21">const</specifier> <name pos:start="91:23" pos:end="91:25">int</name></type> <name pos:start="91:27" pos:end="91:33">start_c</name> <init pos:start="91:35" pos:end="91:68">= <expr pos:start="91:37" pos:end="91:68"><name pos:start="91:37" pos:end="91:68"><name pos:start="91:37" pos:end="91:39">sce</name><operator pos:start="91:40" pos:end="91:41">-&gt;</operator><name pos:start="91:42" pos:end="91:44">ics</name><operator pos:start="91:45" pos:end="91:45">.</operator><name pos:start="91:46" pos:end="91:55">swb_offset</name><index pos:start="91:56" pos:end="91:68">[<expr pos:start="91:57" pos:end="91:67"><operator pos:start="91:57" pos:end="91:57">(</operator><name pos:start="91:58" pos:end="91:58">w</name><operator pos:start="91:59" pos:end="91:59">+</operator><name pos:start="91:60" pos:end="91:61">w2</name><operator pos:start="91:62" pos:end="91:62">)</operator><operator pos:start="91:63" pos:end="91:63">*</operator><literal type="number" pos:start="91:64" pos:end="91:66">16</literal><operator pos:start="91:66" pos:end="91:66">+</operator><name pos:start="91:67" pos:end="91:67">g</name></expr>]</index></name></expr></init></decl>;</decl_stmt>

                <expr_stmt pos:start="93:17" pos:end="93:73"><expr pos:start="93:17" pos:end="93:72"><name pos:start="93:17" pos:end="93:20">band</name> <operator pos:start="93:22" pos:end="93:22">=</operator> <operator pos:start="93:24" pos:end="93:24">&amp;</operator><name pos:start="93:25" pos:end="93:49"><name pos:start="93:25" pos:end="93:25">s</name><operator pos:start="93:26" pos:end="93:27">-&gt;</operator><name pos:start="93:28" pos:end="93:30">psy</name><operator pos:start="93:31" pos:end="93:31">.</operator><name pos:start="93:32" pos:end="93:33">ch</name><index pos:start="93:34" pos:end="93:49">[<expr pos:start="93:35" pos:end="93:48"><name pos:start="93:35" pos:end="93:48"><name pos:start="93:35" pos:end="93:35">s</name><operator pos:start="93:36" pos:end="93:37">-&gt;</operator><name pos:start="93:38" pos:end="93:48">cur_channel</name></name></expr>]</index></name><operator pos:start="93:50" pos:end="93:50">.</operator><name pos:start="93:51" pos:end="93:72"><name pos:start="93:51" pos:end="93:59">psy_bands</name><index pos:start="93:60" pos:end="93:72">[<expr pos:start="93:61" pos:end="93:71"><operator pos:start="93:61" pos:end="93:61">(</operator><name pos:start="93:62" pos:end="93:62">w</name><operator pos:start="93:63" pos:end="93:63">+</operator><name pos:start="93:64" pos:end="93:65">w2</name><operator pos:start="93:66" pos:end="93:66">)</operator><operator pos:start="93:67" pos:end="93:67">*</operator><literal type="number" pos:start="93:68" pos:end="93:70">16</literal><operator pos:start="93:70" pos:end="93:70">+</operator><name pos:start="93:71" pos:end="93:71">g</name></expr>]</index></name></expr>;</expr_stmt>

                <for pos:start="95:17" pos:end="97:75">for <control pos:start="95:21" pos:end="95:59">(<init pos:start="95:22" pos:end="95:27"><expr pos:start="95:22" pos:end="95:26"><name pos:start="95:22" pos:end="95:22">i</name> <operator pos:start="95:24" pos:end="95:24">=</operator> <literal type="number" pos:start="95:26" pos:end="95:26">0</literal></expr>;</init> <condition pos:start="95:29" pos:end="95:54"><expr pos:start="95:29" pos:end="95:53"><name pos:start="95:29" pos:end="95:29">i</name> <operator pos:start="95:31" pos:end="95:31">&lt;</operator> <name pos:start="95:33" pos:end="95:53"><name pos:start="95:33" pos:end="95:35">sce</name><operator pos:start="95:36" pos:end="95:37">-&gt;</operator><name pos:start="95:38" pos:end="95:40">ics</name><operator pos:start="95:41" pos:end="95:41">.</operator><name pos:start="95:42" pos:end="95:50">swb_sizes</name><index pos:start="95:51" pos:end="95:53">[<expr pos:start="95:52" pos:end="95:52"><name pos:start="95:52" pos:end="95:52">g</name></expr>]</index></name></expr>;</condition> <incr pos:start="95:56" pos:end="95:58"><expr pos:start="95:56" pos:end="95:58"><name pos:start="95:56" pos:end="95:56">i</name><operator pos:start="95:57" pos:end="95:58">++</operator></expr></incr>)</control><block type="pseudo" pos:start="97:21" pos:end="97:75"><block_content pos:start="97:21" pos:end="97:75">

                    <expr_stmt pos:start="97:21" pos:end="97:75"><expr pos:start="97:21" pos:end="97:74"><name pos:start="97:21" pos:end="97:26"><name pos:start="97:21" pos:end="97:23">PNS</name><index pos:start="97:24" pos:end="97:26">[<expr pos:start="97:25" pos:end="97:25"><name pos:start="97:25" pos:end="97:25">i</name></expr>]</index></name> <operator pos:start="97:28" pos:end="97:28">=</operator> <name pos:start="97:30" pos:end="97:44"><name pos:start="97:30" pos:end="97:30">s</name><operator pos:start="97:31" pos:end="97:32">-&gt;</operator><name pos:start="97:33" pos:end="97:44">random_state</name></name> <operator pos:start="97:46" pos:end="97:46">=</operator> <call pos:start="97:48" pos:end="97:74"><name pos:start="97:48" pos:end="97:57">lcg_random</name><argument_list pos:start="97:58" pos:end="97:74">(<argument pos:start="97:59" pos:end="97:73"><expr pos:start="97:59" pos:end="97:73"><name pos:start="97:59" pos:end="97:73"><name pos:start="97:59" pos:end="97:59">s</name><operator pos:start="97:60" pos:end="97:61">-&gt;</operator><name pos:start="97:62" pos:end="97:73">random_state</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt></block_content></block></for>

                <expr_stmt pos:start="99:17" pos:end="99:92"><expr pos:start="99:17" pos:end="99:91"><name pos:start="99:17" pos:end="99:27">band_energy</name> <operator pos:start="99:29" pos:end="99:29">=</operator> <call pos:start="99:31" pos:end="99:91"><name pos:start="99:31" pos:end="99:58"><name pos:start="99:31" pos:end="99:31">s</name><operator pos:start="99:32" pos:end="99:33">-&gt;</operator><name pos:start="99:34" pos:end="99:37">fdsp</name><operator pos:start="99:38" pos:end="99:39">-&gt;</operator><name pos:start="99:40" pos:end="99:58">scalarproduct_float</name></name><argument_list pos:start="99:59" pos:end="99:91">(<argument pos:start="99:60" pos:end="99:62"><expr pos:start="99:60" pos:end="99:62"><name pos:start="99:60" pos:end="99:62">PNS</name></expr></argument>, <argument pos:start="99:65" pos:end="99:67"><expr pos:start="99:65" pos:end="99:67"><name pos:start="99:65" pos:end="99:67">PNS</name></expr></argument>, <argument pos:start="99:70" pos:end="99:90"><expr pos:start="99:70" pos:end="99:90"><name pos:start="99:70" pos:end="99:90"><name pos:start="99:70" pos:end="99:72">sce</name><operator pos:start="99:73" pos:end="99:74">-&gt;</operator><name pos:start="99:75" pos:end="99:77">ics</name><operator pos:start="99:78" pos:end="99:78">.</operator><name pos:start="99:79" pos:end="99:87">swb_sizes</name><index pos:start="99:88" pos:end="99:90">[<expr pos:start="99:89" pos:end="99:89"><name pos:start="99:89" pos:end="99:89">g</name></expr>]</index></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

                <expr_stmt pos:start="101:17" pos:end="101:53"><expr pos:start="101:17" pos:end="101:52"><name pos:start="101:17" pos:end="101:21">scale</name> <operator pos:start="101:23" pos:end="101:23">=</operator> <name pos:start="101:25" pos:end="101:33">noise_amp</name><operator pos:start="101:34" pos:end="101:34">/</operator><call pos:start="101:35" pos:end="101:52"><name pos:start="101:35" pos:end="101:39">sqrtf</name><argument_list pos:start="101:40" pos:end="101:52">(<argument pos:start="101:41" pos:end="101:51"><expr pos:start="101:41" pos:end="101:51"><name pos:start="101:41" pos:end="101:51">band_energy</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

                <expr_stmt pos:start="103:17" pos:end="103:84"><expr pos:start="103:17" pos:end="103:83"><call pos:start="103:17" pos:end="103:83"><name pos:start="103:17" pos:end="103:43"><name pos:start="103:17" pos:end="103:17">s</name><operator pos:start="103:18" pos:end="103:19">-&gt;</operator><name pos:start="103:20" pos:end="103:23">fdsp</name><operator pos:start="103:24" pos:end="103:25">-&gt;</operator><name pos:start="103:26" pos:end="103:43">vector_fmul_scalar</name></name><argument_list pos:start="103:44" pos:end="103:83">(<argument pos:start="103:45" pos:end="103:47"><expr pos:start="103:45" pos:end="103:47"><name pos:start="103:45" pos:end="103:47">PNS</name></expr></argument>, <argument pos:start="103:50" pos:end="103:52"><expr pos:start="103:50" pos:end="103:52"><name pos:start="103:50" pos:end="103:52">PNS</name></expr></argument>, <argument pos:start="103:55" pos:end="103:59"><expr pos:start="103:55" pos:end="103:59"><name pos:start="103:55" pos:end="103:59">scale</name></expr></argument>, <argument pos:start="103:62" pos:end="103:82"><expr pos:start="103:62" pos:end="103:82"><name pos:start="103:62" pos:end="103:82"><name pos:start="103:62" pos:end="103:64">sce</name><operator pos:start="103:65" pos:end="103:66">-&gt;</operator><name pos:start="103:67" pos:end="103:69">ics</name><operator pos:start="103:70" pos:end="103:70">.</operator><name pos:start="103:71" pos:end="103:79">swb_sizes</name><index pos:start="103:80" pos:end="103:82">[<expr pos:start="103:81" pos:end="103:81"><name pos:start="103:81" pos:end="103:81">g</name></expr>]</index></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

                <expr_stmt pos:start="105:17" pos:end="105:92"><expr pos:start="105:17" pos:end="105:91"><name pos:start="105:17" pos:end="105:26">pns_energy</name> <operator pos:start="105:28" pos:end="105:29">+=</operator> <call pos:start="105:31" pos:end="105:91"><name pos:start="105:31" pos:end="105:58"><name pos:start="105:31" pos:end="105:31">s</name><operator pos:start="105:32" pos:end="105:33">-&gt;</operator><name pos:start="105:34" pos:end="105:37">fdsp</name><operator pos:start="105:38" pos:end="105:39">-&gt;</operator><name pos:start="105:40" pos:end="105:58">scalarproduct_float</name></name><argument_list pos:start="105:59" pos:end="105:91">(<argument pos:start="105:60" pos:end="105:62"><expr pos:start="105:60" pos:end="105:62"><name pos:start="105:60" pos:end="105:62">PNS</name></expr></argument>, <argument pos:start="105:65" pos:end="105:67"><expr pos:start="105:65" pos:end="105:67"><name pos:start="105:65" pos:end="105:67">PNS</name></expr></argument>, <argument pos:start="105:70" pos:end="105:90"><expr pos:start="105:70" pos:end="105:90"><name pos:start="105:70" pos:end="105:90"><name pos:start="105:70" pos:end="105:72">sce</name><operator pos:start="105:73" pos:end="105:74">-&gt;</operator><name pos:start="105:75" pos:end="105:77">ics</name><operator pos:start="105:78" pos:end="105:78">.</operator><name pos:start="105:79" pos:end="105:87">swb_sizes</name><index pos:start="105:88" pos:end="105:90">[<expr pos:start="105:89" pos:end="105:89"><name pos:start="105:89" pos:end="105:89">g</name></expr>]</index></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

                <expr_stmt pos:start="107:17" pos:end="107:81"><expr pos:start="107:17" pos:end="107:80"><call pos:start="107:17" pos:end="107:80"><name pos:start="107:17" pos:end="107:27">abs_pow34_v</name><argument_list pos:start="107:28" pos:end="107:80">(<argument pos:start="107:29" pos:end="107:33"><expr pos:start="107:29" pos:end="107:33"><name pos:start="107:29" pos:end="107:33">NOR34</name></expr></argument>, <argument pos:start="107:36" pos:end="107:56"><expr pos:start="107:36" pos:end="107:56"><operator pos:start="107:36" pos:end="107:36">&amp;</operator><name pos:start="107:37" pos:end="107:56"><name pos:start="107:37" pos:end="107:39">sce</name><operator pos:start="107:40" pos:end="107:41">-&gt;</operator><name pos:start="107:42" pos:end="107:47">coeffs</name><index pos:start="107:48" pos:end="107:56">[<expr pos:start="107:49" pos:end="107:55"><name pos:start="107:49" pos:end="107:55">start_c</name></expr>]</index></name></expr></argument>, <argument pos:start="107:59" pos:end="107:79"><expr pos:start="107:59" pos:end="107:79"><name pos:start="107:59" pos:end="107:79"><name pos:start="107:59" pos:end="107:61">sce</name><operator pos:start="107:62" pos:end="107:63">-&gt;</operator><name pos:start="107:64" pos:end="107:66">ics</name><operator pos:start="107:67" pos:end="107:67">.</operator><name pos:start="107:68" pos:end="107:76">swb_sizes</name><index pos:start="107:77" pos:end="107:79">[<expr pos:start="107:78" pos:end="107:78"><name pos:start="107:78" pos:end="107:78">g</name></expr>]</index></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

                <expr_stmt pos:start="109:17" pos:end="109:63"><expr pos:start="109:17" pos:end="109:62"><call pos:start="109:17" pos:end="109:62"><name pos:start="109:17" pos:end="109:27">abs_pow34_v</name><argument_list pos:start="109:28" pos:end="109:62">(<argument pos:start="109:29" pos:end="109:33"><expr pos:start="109:29" pos:end="109:33"><name pos:start="109:29" pos:end="109:33">PNS34</name></expr></argument>, <argument pos:start="109:36" pos:end="109:38"><expr pos:start="109:36" pos:end="109:38"><name pos:start="109:36" pos:end="109:38">PNS</name></expr></argument>, <argument pos:start="109:41" pos:end="109:61"><expr pos:start="109:41" pos:end="109:61"><name pos:start="109:41" pos:end="109:61"><name pos:start="109:41" pos:end="109:43">sce</name><operator pos:start="109:44" pos:end="109:45">-&gt;</operator><name pos:start="109:46" pos:end="109:48">ics</name><operator pos:start="109:49" pos:end="109:49">.</operator><name pos:start="109:50" pos:end="109:58">swb_sizes</name><index pos:start="109:59" pos:end="109:61">[<expr pos:start="109:60" pos:end="109:60"><name pos:start="109:60" pos:end="109:60">g</name></expr>]</index></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

                <expr_stmt pos:start="111:17" pos:end="121:87"><expr pos:start="111:17" pos:end="121:86"><name pos:start="111:17" pos:end="111:21">dist1</name> <operator pos:start="111:23" pos:end="111:24">+=</operator> <call pos:start="111:26" pos:end="121:86"><name pos:start="111:26" pos:end="111:43">quantize_band_cost</name><argument_list pos:start="111:44" pos:end="121:86">(<argument pos:start="111:45" pos:end="111:45"><expr pos:start="111:45" pos:end="111:45"><name pos:start="111:45" pos:end="111:45">s</name></expr></argument>, <argument pos:start="111:48" pos:end="111:68"><expr pos:start="111:48" pos:end="111:68"><operator pos:start="111:48" pos:end="111:48">&amp;</operator><name pos:start="111:49" pos:end="111:68"><name pos:start="111:49" pos:end="111:51">sce</name><operator pos:start="111:52" pos:end="111:53">-&gt;</operator><name pos:start="111:54" pos:end="111:59">coeffs</name><index pos:start="111:60" pos:end="111:68">[<expr pos:start="111:61" pos:end="111:67"><name pos:start="111:61" pos:end="111:67">start_c</name></expr>]</index></name></expr></argument>,

                                            <argument pos:start="113:45" pos:end="113:49"><expr pos:start="113:45" pos:end="113:49"><name pos:start="113:45" pos:end="113:49">NOR34</name></expr></argument>,

                                            <argument pos:start="115:45" pos:end="115:65"><expr pos:start="115:45" pos:end="115:65"><name pos:start="115:45" pos:end="115:65"><name pos:start="115:45" pos:end="115:47">sce</name><operator pos:start="115:48" pos:end="115:49">-&gt;</operator><name pos:start="115:50" pos:end="115:52">ics</name><operator pos:start="115:53" pos:end="115:53">.</operator><name pos:start="115:54" pos:end="115:62">swb_sizes</name><index pos:start="115:63" pos:end="115:65">[<expr pos:start="115:64" pos:end="115:64"><name pos:start="115:64" pos:end="115:64">g</name></expr>]</index></name></expr></argument>,

                                            <argument pos:start="117:45" pos:end="117:68"><expr pos:start="117:45" pos:end="117:68"><name pos:start="117:45" pos:end="117:68"><name pos:start="117:45" pos:end="117:47">sce</name><operator pos:start="117:48" pos:end="117:49">-&gt;</operator><name pos:start="117:50" pos:end="117:55">sf_idx</name><index pos:start="117:56" pos:end="117:68">[<expr pos:start="117:57" pos:end="117:67"><operator pos:start="117:57" pos:end="117:57">(</operator><name pos:start="117:58" pos:end="117:58">w</name><operator pos:start="117:59" pos:end="117:59">+</operator><name pos:start="117:60" pos:end="117:61">w2</name><operator pos:start="117:62" pos:end="117:62">)</operator><operator pos:start="117:63" pos:end="117:63">*</operator><literal type="number" pos:start="117:64" pos:end="117:66">16</literal><operator pos:start="117:66" pos:end="117:66">+</operator><name pos:start="117:67" pos:end="117:67">g</name></expr>]</index></name></expr></argument>,

                                            <argument pos:start="119:45" pos:end="119:70"><expr pos:start="119:45" pos:end="119:70"><name pos:start="119:45" pos:end="119:70"><name pos:start="119:45" pos:end="119:47">sce</name><operator pos:start="119:48" pos:end="119:49">-&gt;</operator><name pos:start="119:50" pos:end="119:57">band_alt</name><index pos:start="119:58" pos:end="119:70">[<expr pos:start="119:59" pos:end="119:69"><operator pos:start="119:59" pos:end="119:59">(</operator><name pos:start="119:60" pos:end="119:60">w</name><operator pos:start="119:61" pos:end="119:61">+</operator><name pos:start="119:62" pos:end="119:63">w2</name><operator pos:start="119:64" pos:end="119:64">)</operator><operator pos:start="119:65" pos:end="119:65">*</operator><literal type="number" pos:start="119:66" pos:end="119:68">16</literal><operator pos:start="119:68" pos:end="119:68">+</operator><name pos:start="119:69" pos:end="119:69">g</name></expr>]</index></name></expr></argument>,

                                            <argument pos:start="121:45" pos:end="121:66"><expr pos:start="121:45" pos:end="121:66"><name pos:start="121:45" pos:end="121:50">lambda</name><operator pos:start="121:51" pos:end="121:51">/</operator><name pos:start="121:52" pos:end="121:66"><name pos:start="121:52" pos:end="121:55">band</name><operator pos:start="121:56" pos:end="121:57">-&gt;</operator><name pos:start="121:58" pos:end="121:66">threshold</name></name></expr></argument>, <argument pos:start="121:69" pos:end="121:76"><expr pos:start="121:69" pos:end="121:76"><name pos:start="121:69" pos:end="121:76">INFINITY</name></expr></argument>, <argument pos:start="121:79" pos:end="121:82"><expr pos:start="121:79" pos:end="121:82"><name pos:start="121:79" pos:end="121:82">NULL</name></expr></argument>, <argument pos:start="121:85" pos:end="121:85"><expr pos:start="121:85" pos:end="121:85"><literal type="number" pos:start="121:85" pos:end="121:85">0</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

                <expr_stmt pos:start="123:17" pos:end="133:87"><expr pos:start="123:17" pos:end="133:86"><name pos:start="123:17" pos:end="123:21">dist2</name> <operator pos:start="123:23" pos:end="123:24">+=</operator> <call pos:start="123:26" pos:end="133:86"><name pos:start="123:26" pos:end="123:43">quantize_band_cost</name><argument_list pos:start="123:44" pos:end="133:86">(<argument pos:start="123:45" pos:end="123:45"><expr pos:start="123:45" pos:end="123:45"><name pos:start="123:45" pos:end="123:45">s</name></expr></argument>, <argument pos:start="123:48" pos:end="123:50"><expr pos:start="123:48" pos:end="123:50"><name pos:start="123:48" pos:end="123:50">PNS</name></expr></argument>,

                                            <argument pos:start="125:45" pos:end="125:49"><expr pos:start="125:45" pos:end="125:49"><name pos:start="125:45" pos:end="125:49">PNS34</name></expr></argument>,

                                            <argument pos:start="127:45" pos:end="127:65"><expr pos:start="127:45" pos:end="127:65"><name pos:start="127:45" pos:end="127:65"><name pos:start="127:45" pos:end="127:47">sce</name><operator pos:start="127:48" pos:end="127:49">-&gt;</operator><name pos:start="127:50" pos:end="127:52">ics</name><operator pos:start="127:53" pos:end="127:53">.</operator><name pos:start="127:54" pos:end="127:62">swb_sizes</name><index pos:start="127:63" pos:end="127:65">[<expr pos:start="127:64" pos:end="127:64"><name pos:start="127:64" pos:end="127:64">g</name></expr>]</index></name></expr></argument>,

                                            <argument pos:start="129:45" pos:end="129:53"><expr pos:start="129:45" pos:end="129:53"><name pos:start="129:45" pos:end="129:53">noise_sfi</name></expr></argument>,

                                            <argument pos:start="131:45" pos:end="131:52"><expr pos:start="131:45" pos:end="131:52"><name pos:start="131:45" pos:end="131:52">NOISE_BT</name></expr></argument>,

                                            <argument pos:start="133:45" pos:end="133:66"><expr pos:start="133:45" pos:end="133:66"><name pos:start="133:45" pos:end="133:50">lambda</name><operator pos:start="133:51" pos:end="133:51">/</operator><name pos:start="133:52" pos:end="133:66"><name pos:start="133:52" pos:end="133:55">band</name><operator pos:start="133:56" pos:end="133:57">-&gt;</operator><name pos:start="133:58" pos:end="133:66">threshold</name></name></expr></argument>, <argument pos:start="133:69" pos:end="133:76"><expr pos:start="133:69" pos:end="133:76"><name pos:start="133:69" pos:end="133:76">INFINITY</name></expr></argument>, <argument pos:start="133:79" pos:end="133:82"><expr pos:start="133:79" pos:end="133:82"><name pos:start="133:79" pos:end="133:82">NULL</name></expr></argument>, <argument pos:start="133:85" pos:end="133:85"><expr pos:start="133:85" pos:end="133:85"><literal type="number" pos:start="133:85" pos:end="133:85">0</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

            </block_content>}</block></for>

            <expr_stmt pos:start="137:13" pos:end="137:49"><expr pos:start="137:13" pos:end="137:48"><name pos:start="137:13" pos:end="137:24">energy_ratio</name> <operator pos:start="137:26" pos:end="137:26">=</operator> <name pos:start="137:28" pos:end="137:37">sfb_energy</name><operator pos:start="137:38" pos:end="137:38">/</operator><name pos:start="137:39" pos:end="137:48">pns_energy</name></expr>;</expr_stmt> <comment type="block" pos:start="137:51" pos:end="137:90">/* Compensates for quantization error */</comment>

            <expr_stmt pos:start="139:13" pos:end="139:60"><expr pos:start="139:13" pos:end="139:59"><name pos:start="139:13" pos:end="139:33"><name pos:start="139:13" pos:end="139:15">sce</name><operator pos:start="139:16" pos:end="139:17">-&gt;</operator><name pos:start="139:18" pos:end="139:25">pns_ener</name><index pos:start="139:26" pos:end="139:33">[<expr pos:start="139:27" pos:end="139:32"><name pos:start="139:27" pos:end="139:27">w</name><operator pos:start="139:28" pos:end="139:28">*</operator><literal type="number" pos:start="139:29" pos:end="139:30">16</literal><operator pos:start="139:31" pos:end="139:31">+</operator><name pos:start="139:32" pos:end="139:32">g</name></expr>]</index></name> <operator pos:start="139:35" pos:end="139:35">=</operator> <name pos:start="139:37" pos:end="139:48">energy_ratio</name><operator pos:start="139:49" pos:end="139:49">*</operator><name pos:start="139:50" pos:end="139:59">sfb_energy</name></expr>;</expr_stmt>

            <if_stmt pos:start="141:13" pos:end="157:13"><if pos:start="141:13" pos:end="157:13">if <condition pos:start="141:16" pos:end="141:90">(<expr pos:start="141:17" pos:end="141:89"><name pos:start="141:17" pos:end="141:28">energy_ratio</name> <operator pos:start="141:30" pos:end="141:30">&gt;</operator> <literal type="number" pos:start="141:32" pos:end="141:36">0.85f</literal> <operator pos:start="141:38" pos:end="141:39">&amp;&amp;</operator> <name pos:start="141:41" pos:end="141:77"><name pos:start="141:41" pos:end="141:52">energy_ratio</name> <argument_list type="generic" pos:start="141:54" pos:end="141:77">&lt; <argument pos:start="141:56" pos:end="141:75"><expr pos:start="141:56" pos:end="141:75"><literal type="number" pos:start="141:56" pos:end="141:60">1.25f</literal> <operator pos:start="141:62" pos:end="141:63">&amp;&amp;</operator> <name pos:start="141:65" pos:end="141:69">dist1</name><operator pos:start="141:70" pos:end="141:70">/</operator><name pos:start="141:71" pos:end="141:75">dist2</name></expr></argument> &gt;</argument_list></name> <name pos:start="141:79" pos:end="141:89">dist_thresh</name></expr>)</condition> <block pos:start="141:92" pos:end="157:13">{<block_content pos:start="143:17" pos:end="155:17">

                <expr_stmt pos:start="143:17" pos:end="143:50"><expr pos:start="143:17" pos:end="143:49"><name pos:start="143:17" pos:end="143:38"><name pos:start="143:17" pos:end="143:19">sce</name><operator pos:start="143:20" pos:end="143:21">-&gt;</operator><name pos:start="143:22" pos:end="143:30">band_type</name><index pos:start="143:31" pos:end="143:38">[<expr pos:start="143:32" pos:end="143:37"><name pos:start="143:32" pos:end="143:32">w</name><operator pos:start="143:33" pos:end="143:33">*</operator><literal type="number" pos:start="143:34" pos:end="143:35">16</literal><operator pos:start="143:36" pos:end="143:36">+</operator><name pos:start="143:37" pos:end="143:37">g</name></expr>]</index></name> <operator pos:start="143:40" pos:end="143:40">=</operator> <name pos:start="143:42" pos:end="143:49">NOISE_BT</name></expr>;</expr_stmt>

                <expr_stmt pos:start="145:17" pos:end="145:40"><expr pos:start="145:17" pos:end="145:39"><name pos:start="145:17" pos:end="145:35"><name pos:start="145:17" pos:end="145:19">sce</name><operator pos:start="145:20" pos:end="145:21">-&gt;</operator><name pos:start="145:22" pos:end="145:27">zeroes</name><index pos:start="145:28" pos:end="145:35">[<expr pos:start="145:29" pos:end="145:34"><name pos:start="145:29" pos:end="145:29">w</name><operator pos:start="145:30" pos:end="145:30">*</operator><literal type="number" pos:start="145:31" pos:end="145:32">16</literal><operator pos:start="145:33" pos:end="145:33">+</operator><name pos:start="145:34" pos:end="145:34">g</name></expr>]</index></name> <operator pos:start="145:37" pos:end="145:37">=</operator> <literal type="number" pos:start="145:39" pos:end="145:39">0</literal></expr>;</expr_stmt>

                <if_stmt pos:start="147:17" pos:end="155:17"><if pos:start="147:17" pos:end="155:17">if <condition pos:start="147:20" pos:end="149:57">(<expr pos:start="147:21" pos:end="149:56"><name pos:start="147:21" pos:end="147:44"><name pos:start="147:21" pos:end="147:23">sce</name><operator pos:start="147:24" pos:end="147:25">-&gt;</operator><name pos:start="147:26" pos:end="147:34">band_type</name><index pos:start="147:35" pos:end="147:44">[<expr pos:start="147:36" pos:end="147:43"><name pos:start="147:36" pos:end="147:36">w</name><operator pos:start="147:37" pos:end="147:37">*</operator><literal type="number" pos:start="147:38" pos:end="147:39">16</literal><operator pos:start="147:40" pos:end="147:40">+</operator><name pos:start="147:41" pos:end="147:41">g</name><operator pos:start="147:42" pos:end="147:42">-</operator><literal type="number" pos:start="147:43" pos:end="147:43">1</literal></expr>]</index></name> <operator pos:start="147:46" pos:end="147:47">!=</operator> <name pos:start="147:49" pos:end="147:56">NOISE_BT</name> <operator pos:start="147:58" pos:end="147:59">&amp;&amp;</operator> <comment type="block" pos:start="147:61" pos:end="147:79">/* Prevent holes */</comment>

                    <name pos:start="149:21" pos:end="149:44"><name pos:start="149:21" pos:end="149:23">sce</name><operator pos:start="149:24" pos:end="149:25">-&gt;</operator><name pos:start="149:26" pos:end="149:34">band_type</name><index pos:start="149:35" pos:end="149:44">[<expr pos:start="149:36" pos:end="149:43"><name pos:start="149:36" pos:end="149:36">w</name><operator pos:start="149:37" pos:end="149:37">*</operator><literal type="number" pos:start="149:38" pos:end="149:40">16</literal><operator pos:start="149:40" pos:end="149:40">+</operator><name pos:start="149:41" pos:end="149:41">g</name><operator pos:start="149:42" pos:end="149:42">-</operator><literal type="number" pos:start="149:43" pos:end="149:43">2</literal></expr>]</index></name> <operator pos:start="149:46" pos:end="149:47">==</operator> <name pos:start="149:49" pos:end="149:56">NOISE_BT</name></expr>)</condition> <block pos:start="149:59" pos:end="155:17">{<block_content pos:start="151:21" pos:end="153:46">

                    <expr_stmt pos:start="151:21" pos:end="151:56"><expr pos:start="151:21" pos:end="151:55"><name pos:start="151:21" pos:end="151:44"><name pos:start="151:21" pos:end="151:23">sce</name><operator pos:start="151:24" pos:end="151:25">-&gt;</operator><name pos:start="151:26" pos:end="151:34">band_type</name><index pos:start="151:35" pos:end="151:44">[<expr pos:start="151:36" pos:end="151:43"><name pos:start="151:36" pos:end="151:36">w</name><operator pos:start="151:37" pos:end="151:37">*</operator><literal type="number" pos:start="151:38" pos:end="151:39">16</literal><operator pos:start="151:40" pos:end="151:40">+</operator><name pos:start="151:41" pos:end="151:41">g</name><operator pos:start="151:42" pos:end="151:42">-</operator><literal type="number" pos:start="151:43" pos:end="151:43">1</literal></expr>]</index></name> <operator pos:start="151:46" pos:end="151:46">=</operator> <name pos:start="151:48" pos:end="151:55">NOISE_BT</name></expr>;</expr_stmt>

                    <expr_stmt pos:start="153:21" pos:end="153:46"><expr pos:start="153:21" pos:end="153:45"><name pos:start="153:21" pos:end="153:41"><name pos:start="153:21" pos:end="153:23">sce</name><operator pos:start="153:24" pos:end="153:25">-&gt;</operator><name pos:start="153:26" pos:end="153:31">zeroes</name><index pos:start="153:32" pos:end="153:41">[<expr pos:start="153:33" pos:end="153:40"><name pos:start="153:33" pos:end="153:33">w</name><operator pos:start="153:34" pos:end="153:34">*</operator><literal type="number" pos:start="153:35" pos:end="153:36">16</literal><operator pos:start="153:37" pos:end="153:37">+</operator><name pos:start="153:38" pos:end="153:38">g</name><operator pos:start="153:39" pos:end="153:39">-</operator><literal type="number" pos:start="153:40" pos:end="153:40">1</literal></expr>]</index></name> <operator pos:start="153:43" pos:end="153:43">=</operator> <literal type="number" pos:start="153:45" pos:end="153:45">0</literal></expr>;</expr_stmt>

                </block_content>}</block></if></if_stmt>

            </block_content>}</block></if></if_stmt>

        </block_content>}</block></for>

    </block_content>}</block></for>

</block_content>}</block></function>
</unit>
