<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<unit xmlns="http://www.srcML.org/srcML/src" xmlns:pos="http://www.srcML.org/srcML/position" revision="1.0.0" language="C" filename="dataset/ropgen/aug/1/20164.c" pos:tabs="8"><function pos:start="1:1" pos:end="41:1"><type pos:start="1:1" pos:end="1:11"><specifier pos:start="1:1" pos:end="1:6">static</specifier> <name pos:start="1:8" pos:end="1:11">bool</name></type> <name pos:start="1:13" pos:end="1:24">vring_notify</name><parameter_list pos:start="1:25" pos:end="1:59">(<parameter pos:start="1:26" pos:end="1:43"><decl pos:start="1:26" pos:end="1:43"><type pos:start="1:26" pos:end="1:43"><name pos:start="1:26" pos:end="1:37">VirtIODevice</name> <modifier pos:start="1:39" pos:end="1:39">*</modifier></type><name pos:start="1:40" pos:end="1:43">vdev</name></decl></parameter>, <parameter pos:start="1:46" pos:end="1:58"><decl pos:start="1:46" pos:end="1:58"><type pos:start="1:46" pos:end="1:58"><name pos:start="1:46" pos:end="1:54">VirtQueue</name> <modifier pos:start="1:56" pos:end="1:56">*</modifier></type><name pos:start="1:57" pos:end="1:58">vq</name></decl></parameter>)</parameter_list>

<block pos:start="3:1" pos:end="41:1">{<block_content pos:start="5:5" pos:end="39:66">

    <decl_stmt pos:start="5:5" pos:end="5:22"><decl pos:start="5:5" pos:end="5:16"><type pos:start="5:5" pos:end="5:12"><name pos:start="5:5" pos:end="5:12">uint16_t</name></type> <name pos:start="5:14" pos:end="5:16">old</name></decl>, <decl pos:start="5:19" pos:end="5:21"><type ref="prev" pos:start="5:5" pos:end="5:12"/><name pos:start="5:19" pos:end="5:21">new</name></decl>;</decl_stmt>

    <decl_stmt pos:start="7:5" pos:end="7:11"><decl pos:start="7:5" pos:end="7:10"><type pos:start="7:5" pos:end="7:8"><name pos:start="7:5" pos:end="7:8">bool</name></type> <name pos:start="7:10" pos:end="7:10">v</name></decl>;</decl_stmt>



    <comment type="block" pos:start="11:5" pos:end="11:70">/* Always notify when queue is empty (when feature acknowledge) */</comment>

    <if_stmt pos:start="13:5" pos:end="19:5"><if pos:start="13:5" pos:end="19:5">if <condition pos:start="13:8" pos:end="15:66">(<expr pos:start="13:9" pos:end="15:65"><operator pos:start="13:9" pos:end="13:9">(</operator><operator pos:start="13:10" pos:end="13:10">(</operator><name pos:start="13:11" pos:end="13:30"><name pos:start="13:11" pos:end="13:14">vdev</name><operator pos:start="13:15" pos:end="13:16">-&gt;</operator><name pos:start="13:17" pos:end="13:30">guest_features</name></name> <operator pos:start="13:32" pos:end="13:32">&amp;</operator> <operator pos:start="13:34" pos:end="13:34">(</operator><literal type="number" pos:start="13:35" pos:end="13:35">1</literal> <operator pos:start="13:37" pos:end="13:38">&lt;&lt;</operator> <name pos:start="13:40" pos:end="13:63">VIRTIO_F_NOTIFY_ON_EMPTY</name><operator pos:start="13:64" pos:end="13:64">)</operator><operator pos:start="13:65" pos:end="13:65">)</operator> <operator pos:start="13:67" pos:end="13:68">&amp;&amp;</operator>

         <operator pos:start="15:10" pos:end="15:10">!</operator><name pos:start="15:11" pos:end="15:19"><name pos:start="15:11" pos:end="15:12">vq</name><operator pos:start="15:13" pos:end="15:14">-&gt;</operator><name pos:start="15:15" pos:end="15:19">inuse</name></name> <operator pos:start="15:21" pos:end="15:22">&amp;&amp;</operator> <call pos:start="15:24" pos:end="15:42"><name pos:start="15:24" pos:end="15:38">vring_avail_idx</name><argument_list pos:start="15:39" pos:end="15:42">(<argument pos:start="15:40" pos:end="15:41"><expr pos:start="15:40" pos:end="15:41"><name pos:start="15:40" pos:end="15:41">vq</name></expr></argument>)</argument_list></call> <operator pos:start="15:44" pos:end="15:45">==</operator> <name pos:start="15:47" pos:end="15:64"><name pos:start="15:47" pos:end="15:48">vq</name><operator pos:start="15:49" pos:end="15:50">-&gt;</operator><name pos:start="15:51" pos:end="15:64">last_avail_idx</name></name><operator pos:start="15:65" pos:end="15:65">)</operator></expr>)</condition> <block pos:start="15:68" pos:end="19:5">{<block_content pos:start="17:9" pos:end="17:20">

        <return pos:start="17:9" pos:end="17:20">return <expr pos:start="17:16" pos:end="17:19"><name pos:start="17:16" pos:end="17:19">true</name></expr>;</return>

    </block_content>}</block></if></if_stmt>



    <if_stmt pos:start="23:5" pos:end="27:5"><if pos:start="23:5" pos:end="27:5">if <condition pos:start="23:8" pos:end="23:65">(<expr pos:start="23:9" pos:end="23:64"><operator pos:start="23:9" pos:end="23:9">!</operator><operator pos:start="23:10" pos:end="23:10">(</operator><name pos:start="23:11" pos:end="23:30"><name pos:start="23:11" pos:end="23:14">vdev</name><operator pos:start="23:15" pos:end="23:16">-&gt;</operator><name pos:start="23:17" pos:end="23:30">guest_features</name></name> <operator pos:start="23:32" pos:end="23:32">&amp;</operator> <operator pos:start="23:34" pos:end="23:34">(</operator><literal type="number" pos:start="23:35" pos:end="23:35">1</literal> <operator pos:start="23:37" pos:end="23:38">&lt;&lt;</operator> <name pos:start="23:40" pos:end="23:62">VIRTIO_RING_F_EVENT_IDX</name><operator pos:start="23:63" pos:end="23:63">)</operator><operator pos:start="23:64" pos:end="23:64">)</operator></expr>)</condition> <block pos:start="23:67" pos:end="27:5">{<block_content pos:start="25:9" pos:end="25:69">

        <return pos:start="25:9" pos:end="25:69">return <expr pos:start="25:16" pos:end="25:68"><operator pos:start="25:16" pos:end="25:16">!</operator><operator pos:start="25:17" pos:end="25:17">(</operator><call pos:start="25:18" pos:end="25:38"><name pos:start="25:18" pos:end="25:34">vring_avail_flags</name><argument_list pos:start="25:35" pos:end="25:38">(<argument pos:start="25:36" pos:end="25:37"><expr pos:start="25:36" pos:end="25:37"><name pos:start="25:36" pos:end="25:37">vq</name></expr></argument>)</argument_list></call> <operator pos:start="25:40" pos:end="25:40">&amp;</operator> <name pos:start="25:42" pos:end="25:67">VRING_AVAIL_F_NO_INTERRUPT</name><operator pos:start="25:68" pos:end="25:68">)</operator></expr>;</return>

    </block_content>}</block></if></if_stmt>



    <expr_stmt pos:start="31:5" pos:end="31:33"><expr pos:start="31:5" pos:end="31:32"><name pos:start="31:5" pos:end="31:5">v</name> <operator pos:start="31:7" pos:end="31:7">=</operator> <name pos:start="31:9" pos:end="31:32"><name pos:start="31:9" pos:end="31:10">vq</name><operator pos:start="31:11" pos:end="31:12">-&gt;</operator><name pos:start="31:13" pos:end="31:32">signalled_used_valid</name></name></expr>;</expr_stmt>

    <expr_stmt pos:start="33:5" pos:end="33:36"><expr pos:start="33:5" pos:end="33:35"><name pos:start="33:5" pos:end="33:28"><name pos:start="33:5" pos:end="33:6">vq</name><operator pos:start="33:7" pos:end="33:8">-&gt;</operator><name pos:start="33:9" pos:end="33:28">signalled_used_valid</name></name> <operator pos:start="33:30" pos:end="33:30">=</operator> <name pos:start="33:32" pos:end="33:35">true</name></expr>;</expr_stmt>

    <expr_stmt pos:start="35:5" pos:end="35:29"><expr pos:start="35:5" pos:end="35:28"><name pos:start="35:5" pos:end="35:7">old</name> <operator pos:start="35:9" pos:end="35:9">=</operator> <name pos:start="35:11" pos:end="35:28"><name pos:start="35:11" pos:end="35:12">vq</name><operator pos:start="35:13" pos:end="35:14">-&gt;</operator><name pos:start="35:15" pos:end="35:28">signalled_used</name></name></expr>;</expr_stmt>

    <expr_stmt pos:start="37:5" pos:end="37:50"><expr pos:start="37:5" pos:end="37:49"><name pos:start="37:5" pos:end="37:7">new</name> <operator pos:start="37:9" pos:end="37:9">=</operator> <name pos:start="37:11" pos:end="37:28"><name pos:start="37:11" pos:end="37:12">vq</name><operator pos:start="37:13" pos:end="37:14">-&gt;</operator><name pos:start="37:15" pos:end="37:28">signalled_used</name></name> <operator pos:start="37:30" pos:end="37:30">=</operator> <call pos:start="37:32" pos:end="37:49"><name pos:start="37:32" pos:end="37:45">vring_used_idx</name><argument_list pos:start="37:46" pos:end="37:49">(<argument pos:start="37:47" pos:end="37:48"><expr pos:start="37:47" pos:end="37:48"><name pos:start="37:47" pos:end="37:48">vq</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    <return pos:start="39:5" pos:end="39:66">return <expr pos:start="39:12" pos:end="39:65"><operator pos:start="39:12" pos:end="39:12">!</operator><name pos:start="39:13" pos:end="39:13">v</name> <operator pos:start="39:15" pos:end="39:16">||</operator> <call pos:start="39:18" pos:end="39:65"><name pos:start="39:18" pos:end="39:33">vring_need_event</name><argument_list pos:start="39:34" pos:end="39:65">(<argument pos:start="39:35" pos:end="39:54"><expr pos:start="39:35" pos:end="39:54"><call pos:start="39:35" pos:end="39:54"><name pos:start="39:35" pos:end="39:50">vring_used_event</name><argument_list pos:start="39:51" pos:end="39:54">(<argument pos:start="39:52" pos:end="39:53"><expr pos:start="39:52" pos:end="39:53"><name pos:start="39:52" pos:end="39:53">vq</name></expr></argument>)</argument_list></call></expr></argument>, <argument pos:start="39:57" pos:end="39:59"><expr pos:start="39:57" pos:end="39:59"><name pos:start="39:57" pos:end="39:59">new</name></expr></argument>, <argument pos:start="39:62" pos:end="39:64"><expr pos:start="39:62" pos:end="39:64"><name pos:start="39:62" pos:end="39:64">old</name></expr></argument>)</argument_list></call></expr>;</return>

</block_content>}</block></function></unit>
