<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<unit xmlns="http://www.srcML.org/srcML/src" xmlns:pos="http://www.srcML.org/srcML/position" revision="1.0.0" language="C" filename="dataset/ropgen/aug/1/5064.c" pos:tabs="8"><function pos:start="1:1" pos:end="79:1"><type pos:start="1:1" pos:end="1:11"><specifier pos:start="1:1" pos:end="1:6">static</specifier> <name pos:start="1:8" pos:end="1:11">void</name></type> <name pos:start="1:13" pos:end="1:22">mmio_basic</name><parameter_list pos:start="1:23" pos:end="1:28">(<parameter pos:start="1:24" pos:end="1:27"><decl pos:start="1:24" pos:end="1:27"><type pos:start="1:24" pos:end="1:27"><name pos:start="1:24" pos:end="1:27">void</name></type></decl></parameter>)</parameter_list>

<block pos:start="3:1" pos:end="79:1">{<block_content pos:start="5:5" pos:end="77:15">

    <decl_stmt pos:start="5:5" pos:end="5:27"><decl pos:start="5:5" pos:end="5:26"><type pos:start="5:5" pos:end="5:23"><name pos:start="5:5" pos:end="5:21">QVirtioMMIODevice</name> <modifier pos:start="5:23" pos:end="5:23">*</modifier></type><name pos:start="5:24" pos:end="5:26">dev</name></decl>;</decl_stmt>

    <decl_stmt pos:start="7:5" pos:end="7:19"><decl pos:start="7:5" pos:end="7:18"><type pos:start="7:5" pos:end="7:16"><name pos:start="7:5" pos:end="7:14">QVirtQueue</name> <modifier pos:start="7:16" pos:end="7:16">*</modifier></type><name pos:start="7:17" pos:end="7:18">vq</name></decl>;</decl_stmt>

    <decl_stmt pos:start="9:5" pos:end="9:27"><decl pos:start="9:5" pos:end="9:26"><type pos:start="9:5" pos:end="9:21"><name pos:start="9:5" pos:end="9:19">QGuestAllocator</name> <modifier pos:start="9:21" pos:end="9:21">*</modifier></type><name pos:start="9:22" pos:end="9:26">alloc</name></decl>;</decl_stmt>

    <decl_stmt pos:start="11:5" pos:end="11:37"><decl pos:start="11:5" pos:end="11:36"><type pos:start="11:5" pos:end="11:7"><name pos:start="11:5" pos:end="11:7">int</name></type> <name pos:start="11:9" pos:end="11:14">n_size</name> <init pos:start="11:16" pos:end="11:36">= <expr pos:start="11:18" pos:end="11:36"><name pos:start="11:18" pos:end="11:32">TEST_IMAGE_SIZE</name> <operator pos:start="11:34" pos:end="11:34">/</operator> <literal type="number" pos:start="11:36" pos:end="11:36">2</literal></expr></init></decl>;</decl_stmt>

    <decl_stmt pos:start="13:5" pos:end="13:22"><decl pos:start="13:5" pos:end="13:21"><type pos:start="13:5" pos:end="13:12"><name pos:start="13:5" pos:end="13:12">uint64_t</name></type> <name pos:start="13:14" pos:end="13:21">capacity</name></decl>;</decl_stmt>



    <expr_stmt pos:start="17:5" pos:end="17:21"><expr pos:start="17:5" pos:end="17:20"><call pos:start="17:5" pos:end="17:20"><name pos:start="17:5" pos:end="17:18">arm_test_start</name><argument_list pos:start="17:19" pos:end="17:20">()</argument_list></call></expr>;</expr_stmt>



    <expr_stmt pos:start="21:5" pos:end="21:71"><expr pos:start="21:5" pos:end="21:70"><name pos:start="21:5" pos:end="21:7">dev</name> <operator pos:start="21:9" pos:end="21:9">=</operator> <call pos:start="21:11" pos:end="21:70"><name pos:start="21:11" pos:end="21:34">qvirtio_mmio_init_device</name><argument_list pos:start="21:35" pos:end="21:70">(<argument pos:start="21:36" pos:end="21:53"><expr pos:start="21:36" pos:end="21:53"><name pos:start="21:36" pos:end="21:53">MMIO_DEV_BASE_ADDR</name></expr></argument>, <argument pos:start="21:56" pos:end="21:69"><expr pos:start="21:56" pos:end="21:69"><name pos:start="21:56" pos:end="21:69">MMIO_PAGE_SIZE</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    <expr_stmt pos:start="23:5" pos:end="23:26"><expr pos:start="23:5" pos:end="23:25"><call pos:start="23:5" pos:end="23:25"><name pos:start="23:5" pos:end="23:12">g_assert</name><argument_list pos:start="23:13" pos:end="23:25">(<argument pos:start="23:14" pos:end="23:24"><expr pos:start="23:14" pos:end="23:24"><name pos:start="23:14" pos:end="23:16">dev</name> <operator pos:start="23:18" pos:end="23:19">!=</operator> <name pos:start="23:21" pos:end="23:24">NULL</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    <expr_stmt pos:start="25:5" pos:end="25:64"><expr pos:start="25:5" pos:end="25:63"><call pos:start="25:5" pos:end="25:63"><name pos:start="25:5" pos:end="25:19">g_assert_cmphex</name><argument_list pos:start="25:20" pos:end="25:63">(<argument pos:start="25:21" pos:end="25:41"><expr pos:start="25:21" pos:end="25:41"><name pos:start="25:21" pos:end="25:41"><name pos:start="25:21" pos:end="25:23">dev</name><operator pos:start="25:24" pos:end="25:25">-&gt;</operator><name pos:start="25:26" pos:end="25:29">vdev</name><operator pos:start="25:30" pos:end="25:30">.</operator><name pos:start="25:31" pos:end="25:41">device_type</name></name></expr></argument>, <argument pos:start="25:44" pos:end="25:45"><expr pos:start="25:44" pos:end="25:45"><operator pos:start="25:44" pos:end="25:45">==</operator></expr></argument>, <argument pos:start="25:48" pos:end="25:62"><expr pos:start="25:48" pos:end="25:62"><name pos:start="25:48" pos:end="25:62">VIRTIO_ID_BLOCK</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>



    <expr_stmt pos:start="29:5" pos:end="29:45"><expr pos:start="29:5" pos:end="29:44"><call pos:start="29:5" pos:end="29:44"><name pos:start="29:5" pos:end="29:17">qvirtio_reset</name><argument_list pos:start="29:18" pos:end="29:44">(<argument pos:start="29:19" pos:end="29:31"><expr pos:start="29:19" pos:end="29:31"><operator pos:start="29:19" pos:end="29:19">&amp;</operator><name pos:start="29:20" pos:end="29:31">qvirtio_mmio</name></expr></argument>, <argument pos:start="29:34" pos:end="29:43"><expr pos:start="29:34" pos:end="29:43"><operator pos:start="29:34" pos:end="29:34">&amp;</operator><name pos:start="29:35" pos:end="29:43"><name pos:start="29:35" pos:end="29:37">dev</name><operator pos:start="29:38" pos:end="29:39">-&gt;</operator><name pos:start="29:40" pos:end="29:43">vdev</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    <expr_stmt pos:start="31:5" pos:end="31:55"><expr pos:start="31:5" pos:end="31:54"><call pos:start="31:5" pos:end="31:54"><name pos:start="31:5" pos:end="31:27">qvirtio_set_acknowledge</name><argument_list pos:start="31:28" pos:end="31:54">(<argument pos:start="31:29" pos:end="31:41"><expr pos:start="31:29" pos:end="31:41"><operator pos:start="31:29" pos:end="31:29">&amp;</operator><name pos:start="31:30" pos:end="31:41">qvirtio_mmio</name></expr></argument>, <argument pos:start="31:44" pos:end="31:53"><expr pos:start="31:44" pos:end="31:53"><operator pos:start="31:44" pos:end="31:44">&amp;</operator><name pos:start="31:45" pos:end="31:53"><name pos:start="31:45" pos:end="31:47">dev</name><operator pos:start="31:48" pos:end="31:49">-&gt;</operator><name pos:start="31:50" pos:end="31:53">vdev</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    <expr_stmt pos:start="33:5" pos:end="33:50"><expr pos:start="33:5" pos:end="33:49"><call pos:start="33:5" pos:end="33:49"><name pos:start="33:5" pos:end="33:22">qvirtio_set_driver</name><argument_list pos:start="33:23" pos:end="33:49">(<argument pos:start="33:24" pos:end="33:36"><expr pos:start="33:24" pos:end="33:36"><operator pos:start="33:24" pos:end="33:24">&amp;</operator><name pos:start="33:25" pos:end="33:36">qvirtio_mmio</name></expr></argument>, <argument pos:start="33:39" pos:end="33:48"><expr pos:start="33:39" pos:end="33:48"><operator pos:start="33:39" pos:end="33:39">&amp;</operator><name pos:start="33:40" pos:end="33:48"><name pos:start="33:40" pos:end="33:42">dev</name><operator pos:start="33:43" pos:end="33:44">-&gt;</operator><name pos:start="33:45" pos:end="33:48">vdev</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>



    <expr_stmt pos:start="37:5" pos:end="37:77"><expr pos:start="37:5" pos:end="37:76"><name pos:start="37:5" pos:end="37:9">alloc</name> <operator pos:start="37:11" pos:end="37:11">=</operator> <call pos:start="37:13" pos:end="37:76"><name pos:start="37:13" pos:end="37:30">generic_alloc_init</name><argument_list pos:start="37:31" pos:end="37:76">(<argument pos:start="37:32" pos:end="37:44"><expr pos:start="37:32" pos:end="37:44"><name pos:start="37:32" pos:end="37:44">MMIO_RAM_ADDR</name></expr></argument>, <argument pos:start="37:47" pos:end="37:59"><expr pos:start="37:47" pos:end="37:59"><name pos:start="37:47" pos:end="37:59">MMIO_RAM_SIZE</name></expr></argument>, <argument pos:start="37:62" pos:end="37:75"><expr pos:start="37:62" pos:end="37:75"><name pos:start="37:62" pos:end="37:75">MMIO_PAGE_SIZE</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    <expr_stmt pos:start="39:5" pos:end="39:63"><expr pos:start="39:5" pos:end="39:62"><name pos:start="39:5" pos:end="39:6">vq</name> <operator pos:start="39:8" pos:end="39:8">=</operator> <call pos:start="39:10" pos:end="39:62"><name pos:start="39:10" pos:end="39:25">qvirtqueue_setup</name><argument_list pos:start="39:26" pos:end="39:62">(<argument pos:start="39:27" pos:end="39:39"><expr pos:start="39:27" pos:end="39:39"><operator pos:start="39:27" pos:end="39:27">&amp;</operator><name pos:start="39:28" pos:end="39:39">qvirtio_mmio</name></expr></argument>, <argument pos:start="39:42" pos:end="39:51"><expr pos:start="39:42" pos:end="39:51"><operator pos:start="39:42" pos:end="39:42">&amp;</operator><name pos:start="39:43" pos:end="39:51"><name pos:start="39:43" pos:end="39:45">dev</name><operator pos:start="39:46" pos:end="39:47">-&gt;</operator><name pos:start="39:48" pos:end="39:51">vdev</name></name></expr></argument>, <argument pos:start="39:54" pos:end="39:58"><expr pos:start="39:54" pos:end="39:58"><name pos:start="39:54" pos:end="39:58">alloc</name></expr></argument>, <argument pos:start="39:61" pos:end="39:61"><expr pos:start="39:61" pos:end="39:61"><literal type="number" pos:start="39:61" pos:end="39:61">0</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>



    <expr_stmt pos:start="43:5" pos:end="45:58"><expr pos:start="43:5" pos:end="45:57"><call pos:start="43:5" pos:end="45:57"><name pos:start="43:5" pos:end="43:14">test_basic</name><argument_list pos:start="43:15" pos:end="45:57">(<argument pos:start="43:16" pos:end="43:28"><expr pos:start="43:16" pos:end="43:28"><operator pos:start="43:16" pos:end="43:16">&amp;</operator><name pos:start="43:17" pos:end="43:28">qvirtio_mmio</name></expr></argument>, <argument pos:start="43:31" pos:end="43:40"><expr pos:start="43:31" pos:end="43:40"><operator pos:start="43:31" pos:end="43:31">&amp;</operator><name pos:start="43:32" pos:end="43:40"><name pos:start="43:32" pos:end="43:34">dev</name><operator pos:start="43:35" pos:end="43:36">-&gt;</operator><name pos:start="43:37" pos:end="43:40">vdev</name></name></expr></argument>, <argument pos:start="43:43" pos:end="43:47"><expr pos:start="43:43" pos:end="43:47"><name pos:start="43:43" pos:end="43:47">alloc</name></expr></argument>, <argument pos:start="43:50" pos:end="43:51"><expr pos:start="43:50" pos:end="43:51"><name pos:start="43:50" pos:end="43:51">vq</name></expr></argument>,

                            <argument pos:start="45:29" pos:end="45:56"><expr pos:start="45:29" pos:end="45:56"><name pos:start="45:29" pos:end="45:56">QVIRTIO_MMIO_DEVICE_SPECIFIC</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>



    <expr_stmt pos:start="49:5" pos:end="51:79"><expr pos:start="49:5" pos:end="51:78"><call pos:start="49:5" pos:end="51:78"><name pos:start="49:5" pos:end="49:7">qmp</name><argument_list pos:start="49:8" pos:end="51:78">(<argument pos:start="49:9" pos:end="51:69"><expr pos:start="49:9" pos:end="51:69"><literal type="string" pos:start="49:9" pos:end="49:74">"{ 'execute': 'block_resize', 'arguments': { 'device': 'drive0', "</literal>

                                                    <literal type="string" pos:start="51:53" pos:end="51:69">" 'size': %d } }"</literal></expr></argument>, <argument pos:start="51:72" pos:end="51:77"><expr pos:start="51:72" pos:end="51:77"><name pos:start="51:72" pos:end="51:77">n_size</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>



    <expr_stmt pos:start="55:5" pos:end="57:51"><expr pos:start="55:5" pos:end="57:50"><call pos:start="55:5" pos:end="57:50"><name pos:start="55:5" pos:end="55:26">qvirtio_wait_queue_isr</name><argument_list pos:start="55:27" pos:end="57:50">(<argument pos:start="55:28" pos:end="55:40"><expr pos:start="55:28" pos:end="55:40"><operator pos:start="55:28" pos:end="55:28">&amp;</operator><name pos:start="55:29" pos:end="55:40">qvirtio_mmio</name></expr></argument>, <argument pos:start="55:43" pos:end="55:52"><expr pos:start="55:43" pos:end="55:52"><operator pos:start="55:43" pos:end="55:43">&amp;</operator><name pos:start="55:44" pos:end="55:52"><name pos:start="55:44" pos:end="55:46">dev</name><operator pos:start="55:47" pos:end="55:48">-&gt;</operator><name pos:start="55:49" pos:end="55:52">vdev</name></name></expr></argument>, <argument pos:start="55:55" pos:end="55:56"><expr pos:start="55:55" pos:end="55:56"><name pos:start="55:55" pos:end="55:56">vq</name></expr></argument>,

                           <argument pos:start="57:28" pos:end="57:49"><expr pos:start="57:28" pos:end="57:49"><name pos:start="57:28" pos:end="57:49">QVIRTIO_BLK_TIMEOUT_US</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>



    <expr_stmt pos:start="61:5" pos:end="63:78"><expr pos:start="61:5" pos:end="63:77"><name pos:start="61:5" pos:end="61:12">capacity</name> <operator pos:start="61:14" pos:end="61:14">=</operator> <call pos:start="61:16" pos:end="63:77"><name pos:start="61:16" pos:end="61:35">qvirtio_config_readq</name><argument_list pos:start="61:36" pos:end="63:77">(<argument pos:start="61:37" pos:end="61:49"><expr pos:start="61:37" pos:end="61:49"><operator pos:start="61:37" pos:end="61:37">&amp;</operator><name pos:start="61:38" pos:end="61:49">qvirtio_mmio</name></expr></argument>, <argument pos:start="61:52" pos:end="61:61"><expr pos:start="61:52" pos:end="61:61"><operator pos:start="61:52" pos:end="61:52">&amp;</operator><name pos:start="61:53" pos:end="61:61"><name pos:start="61:53" pos:end="61:55">dev</name><operator pos:start="61:56" pos:end="61:57">-&gt;</operator><name pos:start="61:58" pos:end="61:61">vdev</name></name></expr></argument>,

                                                <argument pos:start="63:49" pos:end="63:76"><expr pos:start="63:49" pos:end="63:76"><name pos:start="63:49" pos:end="63:76">QVIRTIO_MMIO_DEVICE_SPECIFIC</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    <expr_stmt pos:start="65:5" pos:end="65:48"><expr pos:start="65:5" pos:end="65:47"><call pos:start="65:5" pos:end="65:47"><name pos:start="65:5" pos:end="65:19">g_assert_cmpint</name><argument_list pos:start="65:20" pos:end="65:47">(<argument pos:start="65:21" pos:end="65:28"><expr pos:start="65:21" pos:end="65:28"><name pos:start="65:21" pos:end="65:28">capacity</name></expr></argument>, <argument pos:start="65:31" pos:end="65:32"><expr pos:start="65:31" pos:end="65:32"><operator pos:start="65:31" pos:end="65:32">==</operator></expr></argument>, <argument pos:start="65:35" pos:end="65:46"><expr pos:start="65:35" pos:end="65:46"><name pos:start="65:35" pos:end="65:40">n_size</name> <operator pos:start="65:42" pos:end="65:42">/</operator> <literal type="number" pos:start="65:44" pos:end="65:46">512</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>



    <comment type="block" pos:start="69:5" pos:end="69:18">/* End test */</comment>

    <expr_stmt pos:start="71:5" pos:end="71:32"><expr pos:start="71:5" pos:end="71:31"><call pos:start="71:5" pos:end="71:31"><name pos:start="71:5" pos:end="71:14">guest_free</name><argument_list pos:start="71:15" pos:end="71:31">(<argument pos:start="71:16" pos:end="71:20"><expr pos:start="71:16" pos:end="71:20"><name pos:start="71:16" pos:end="71:20">alloc</name></expr></argument>, <argument pos:start="71:23" pos:end="71:30"><expr pos:start="71:23" pos:end="71:30"><name pos:start="71:23" pos:end="71:30"><name pos:start="71:23" pos:end="71:24">vq</name><operator pos:start="71:25" pos:end="71:26">-&gt;</operator><name pos:start="71:27" pos:end="71:30">desc</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    <expr_stmt pos:start="73:5" pos:end="73:32"><expr pos:start="73:5" pos:end="73:31"><call pos:start="73:5" pos:end="73:31"><name pos:start="73:5" pos:end="73:24">generic_alloc_uninit</name><argument_list pos:start="73:25" pos:end="73:31">(<argument pos:start="73:26" pos:end="73:30"><expr pos:start="73:26" pos:end="73:30"><name pos:start="73:26" pos:end="73:30">alloc</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    <expr_stmt pos:start="75:5" pos:end="75:16"><expr pos:start="75:5" pos:end="75:15"><call pos:start="75:5" pos:end="75:15"><name pos:start="75:5" pos:end="75:10">g_free</name><argument_list pos:start="75:11" pos:end="75:15">(<argument pos:start="75:12" pos:end="75:14"><expr pos:start="75:12" pos:end="75:14"><name pos:start="75:12" pos:end="75:14">dev</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    <expr_stmt pos:start="77:5" pos:end="77:15"><expr pos:start="77:5" pos:end="77:14"><call pos:start="77:5" pos:end="77:14"><name pos:start="77:5" pos:end="77:12">test_end</name><argument_list pos:start="77:13" pos:end="77:14">()</argument_list></call></expr>;</expr_stmt>

</block_content>}</block></function>
</unit>
