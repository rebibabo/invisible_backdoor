<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<unit xmlns="http://www.srcML.org/srcML/src" xmlns:cpp="http://www.srcML.org/srcML/cpp" xmlns:pos="http://www.srcML.org/srcML/position" revision="1.0.0" language="C" filename="dataset/ropgen/aug/1/9296.c" pos:tabs="8"><function pos:start="1:1" pos:end="393:1"><type pos:start="1:1" pos:end="1:10"><specifier pos:start="1:1" pos:end="1:6">static</specifier> <name pos:start="1:8" pos:end="1:10">int</name></type> <name pos:start="1:12" pos:end="1:27">grab_read_header</name><parameter_list pos:start="1:28" pos:end="1:72">(<parameter pos:start="1:29" pos:end="1:47"><decl pos:start="1:29" pos:end="1:47"><type pos:start="1:29" pos:end="1:47"><name pos:start="1:29" pos:end="1:43">AVFormatContext</name> <modifier pos:start="1:45" pos:end="1:45">*</modifier></type><name pos:start="1:46" pos:end="1:47">s1</name></decl></parameter>, <parameter pos:start="1:50" pos:end="1:71"><decl pos:start="1:50" pos:end="1:71"><type pos:start="1:50" pos:end="1:71"><name pos:start="1:50" pos:end="1:67">AVFormatParameters</name> <modifier pos:start="1:69" pos:end="1:69">*</modifier></type><name pos:start="1:70" pos:end="1:71">ap</name></decl></parameter>)</parameter_list>

<block pos:start="3:1" pos:end="393:1">{<block_content pos:start="5:5" pos:end="391:24">

    <decl_stmt pos:start="5:5" pos:end="5:33"><decl pos:start="5:5" pos:end="5:32"><type pos:start="5:5" pos:end="5:15"><name pos:start="5:5" pos:end="5:13">VideoData</name> <modifier pos:start="5:15" pos:end="5:15">*</modifier></type><name pos:start="5:16" pos:end="5:16">s</name> <init pos:start="5:18" pos:end="5:32">= <expr pos:start="5:20" pos:end="5:32"><name pos:start="5:20" pos:end="5:32"><name pos:start="5:20" pos:end="5:21">s1</name><operator pos:start="5:22" pos:end="5:23">-&gt;</operator><name pos:start="5:24" pos:end="5:32">priv_data</name></name></expr></init></decl>;</decl_stmt>

    <decl_stmt pos:start="7:5" pos:end="7:17"><decl pos:start="7:5" pos:end="7:16"><type pos:start="7:5" pos:end="7:14"><name pos:start="7:5" pos:end="7:12">AVStream</name> <modifier pos:start="7:14" pos:end="7:14">*</modifier></type><name pos:start="7:15" pos:end="7:16">st</name></decl>;</decl_stmt>

    <decl_stmt pos:start="9:5" pos:end="9:22"><decl pos:start="9:5" pos:end="9:13"><type pos:start="9:5" pos:end="9:7"><name pos:start="9:5" pos:end="9:7">int</name></type> <name pos:start="9:9" pos:end="9:13">width</name></decl>, <decl pos:start="9:16" pos:end="9:21"><type ref="prev" pos:start="9:5" pos:end="9:7"/><name pos:start="9:16" pos:end="9:21">height</name></decl>;</decl_stmt>

    <decl_stmt pos:start="11:5" pos:end="11:29"><decl pos:start="11:5" pos:end="11:16"><type pos:start="11:5" pos:end="11:7"><name pos:start="11:5" pos:end="11:7">int</name></type> <name pos:start="11:9" pos:end="11:16">video_fd</name></decl>, <decl pos:start="11:19" pos:end="11:28"><type ref="prev" pos:start="11:5" pos:end="11:7"/><name pos:start="11:19" pos:end="11:28">frame_size</name></decl>;</decl_stmt>

    <decl_stmt pos:start="13:5" pos:end="13:41"><decl pos:start="13:5" pos:end="13:11"><type pos:start="13:5" pos:end="13:7"><name pos:start="13:5" pos:end="13:7">int</name></type> <name pos:start="13:9" pos:end="13:11">ret</name></decl>, <decl pos:start="13:14" pos:end="13:23"><type ref="prev" pos:start="13:5" pos:end="13:7"/><name pos:start="13:14" pos:end="13:23">frame_rate</name></decl>, <decl pos:start="13:26" pos:end="13:40"><type ref="prev" pos:start="13:5" pos:end="13:7"/><name pos:start="13:26" pos:end="13:40">frame_rate_base</name></decl>;</decl_stmt>

    <decl_stmt pos:start="15:5" pos:end="15:39"><decl pos:start="15:5" pos:end="15:23"><type pos:start="15:5" pos:end="15:7"><name pos:start="15:5" pos:end="15:7">int</name></type> <name pos:start="15:9" pos:end="15:23">desired_palette</name></decl>, <decl pos:start="15:26" pos:end="15:38"><type ref="prev" pos:start="15:5" pos:end="15:7"/><name pos:start="15:26" pos:end="15:38">desired_depth</name></decl>;</decl_stmt>

    <decl_stmt pos:start="17:5" pos:end="17:29"><decl pos:start="17:5" pos:end="17:28"><type pos:start="17:5" pos:end="17:22"><name pos:start="17:5" pos:end="17:22"><name pos:start="17:5" pos:end="17:10">struct</name> <name pos:start="17:12" pos:end="17:22">video_tuner</name></name></type> <name pos:start="17:24" pos:end="17:28">tuner</name></decl>;</decl_stmt>

    <decl_stmt pos:start="19:5" pos:end="19:29"><decl pos:start="19:5" pos:end="19:28"><type pos:start="19:5" pos:end="19:22"><name pos:start="19:5" pos:end="19:22"><name pos:start="19:5" pos:end="19:10">struct</name> <name pos:start="19:12" pos:end="19:22">video_audio</name></name></type> <name pos:start="19:24" pos:end="19:28">audio</name></decl>;</decl_stmt>

    <decl_stmt pos:start="21:5" pos:end="21:30"><decl pos:start="21:5" pos:end="21:29"><type pos:start="21:5" pos:end="21:24"><name pos:start="21:5" pos:end="21:24"><name pos:start="21:5" pos:end="21:10">struct</name> <name pos:start="21:12" pos:end="21:24">video_picture</name></name></type> <name pos:start="21:26" pos:end="21:29">pict</name></decl>;</decl_stmt>

    <decl_stmt pos:start="23:5" pos:end="23:10"><decl pos:start="23:5" pos:end="23:9"><type pos:start="23:5" pos:end="23:7"><name pos:start="23:5" pos:end="23:7">int</name></type> <name pos:start="23:9" pos:end="23:9">j</name></decl>;</decl_stmt>

    <decl_stmt pos:start="25:5" pos:end="25:71"><decl pos:start="25:5" pos:end="25:70"><type pos:start="25:5" pos:end="25:7"><name pos:start="25:5" pos:end="25:7">int</name></type> <name pos:start="25:9" pos:end="25:19">vformat_num</name> <init pos:start="25:21" pos:end="25:70">= <expr pos:start="25:23" pos:end="25:70"><sizeof pos:start="25:23" pos:end="25:43">sizeof<argument_list pos:start="25:29" pos:end="25:43">(<argument pos:start="25:30" pos:end="25:42"><expr pos:start="25:30" pos:end="25:42"><name pos:start="25:30" pos:end="25:42">video_formats</name></expr></argument>)</argument_list></sizeof> <operator pos:start="25:45" pos:end="25:45">/</operator> <sizeof pos:start="25:47" pos:end="25:70">sizeof<argument_list pos:start="25:53" pos:end="25:70">(<argument pos:start="25:54" pos:end="25:69"><expr pos:start="25:54" pos:end="25:69"><name pos:start="25:54" pos:end="25:69"><name pos:start="25:54" pos:end="25:66">video_formats</name><index pos:start="25:67" pos:end="25:69">[<expr pos:start="25:68" pos:end="25:68"><literal type="number" pos:start="25:68" pos:end="25:68">0</literal></expr>]</index></name></expr></argument>)</argument_list></sizeof></expr></init></decl>;</decl_stmt>



    <if_stmt pos:start="29:5" pos:end="39:5"><if pos:start="29:5" pos:end="39:5">if <condition pos:start="29:8" pos:end="29:68">(<expr pos:start="29:9" pos:end="29:67"><name pos:start="29:9" pos:end="29:17"><name pos:start="29:9" pos:end="29:10">ap</name><operator pos:start="29:11" pos:end="29:12">-&gt;</operator><name pos:start="29:13" pos:end="29:17">width</name></name> <operator pos:start="29:19" pos:end="29:20">&lt;=</operator> <literal type="number" pos:start="29:22" pos:end="29:22">0</literal> <operator pos:start="29:24" pos:end="29:25">||</operator> <name pos:start="29:27" pos:end="29:36"><name pos:start="29:27" pos:end="29:28">ap</name><operator pos:start="29:29" pos:end="29:30">-&gt;</operator><name pos:start="29:31" pos:end="29:36">height</name></name> <operator pos:start="29:38" pos:end="29:39">&lt;=</operator> <literal type="number" pos:start="29:41" pos:end="29:41">0</literal> <operator pos:start="29:43" pos:end="29:44">||</operator> <name pos:start="29:46" pos:end="29:62"><name pos:start="29:46" pos:end="29:47">ap</name><operator pos:start="29:48" pos:end="29:49">-&gt;</operator><name pos:start="29:50" pos:end="29:58">time_base</name><operator pos:start="29:59" pos:end="29:59">.</operator><name pos:start="29:60" pos:end="29:62">den</name></name> <operator pos:start="29:64" pos:end="29:65">&lt;=</operator> <literal type="number" pos:start="29:67" pos:end="29:67">0</literal></expr>)</condition> <block pos:start="29:70" pos:end="39:5">{<block_content pos:start="31:9" pos:end="37:18">

        <expr_stmt pos:start="31:9" pos:end="33:54"><expr pos:start="31:9" pos:end="33:53"><call pos:start="31:9" pos:end="33:53"><name pos:start="31:9" pos:end="31:14">av_log</name><argument_list pos:start="31:15" pos:end="33:53">(<argument pos:start="31:16" pos:end="31:17"><expr pos:start="31:16" pos:end="31:17"><name pos:start="31:16" pos:end="31:17">s1</name></expr></argument>, <argument pos:start="31:20" pos:end="31:31"><expr pos:start="31:20" pos:end="31:31"><name pos:start="31:20" pos:end="31:31">AV_LOG_ERROR</name></expr></argument>, <argument pos:start="31:34" pos:end="31:85"><expr pos:start="31:34" pos:end="31:85"><literal type="string" pos:start="31:34" pos:end="31:85">"Bad capture size (%dx%d) or wrong time base (%d)\n"</literal></expr></argument>,

            <argument pos:start="33:13" pos:end="33:21"><expr pos:start="33:13" pos:end="33:21"><name pos:start="33:13" pos:end="33:21"><name pos:start="33:13" pos:end="33:14">ap</name><operator pos:start="33:15" pos:end="33:16">-&gt;</operator><name pos:start="33:17" pos:end="33:21">width</name></name></expr></argument>, <argument pos:start="33:24" pos:end="33:33"><expr pos:start="33:24" pos:end="33:33"><name pos:start="33:24" pos:end="33:33"><name pos:start="33:24" pos:end="33:25">ap</name><operator pos:start="33:26" pos:end="33:27">-&gt;</operator><name pos:start="33:28" pos:end="33:33">height</name></name></expr></argument>, <argument pos:start="33:36" pos:end="33:52"><expr pos:start="33:36" pos:end="33:52"><name pos:start="33:36" pos:end="33:52"><name pos:start="33:36" pos:end="33:37">ap</name><operator pos:start="33:38" pos:end="33:39">-&gt;</operator><name pos:start="33:40" pos:end="33:48">time_base</name><operator pos:start="33:49" pos:end="33:49">.</operator><name pos:start="33:50" pos:end="33:52">den</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>



        <return pos:start="37:9" pos:end="37:18">return <expr pos:start="37:16" pos:end="37:17"><operator pos:start="37:16" pos:end="37:16">-</operator><literal type="number" pos:start="37:17" pos:end="37:17">1</literal></expr>;</return>

    </block_content>}</block></if></if_stmt>



    <expr_stmt pos:start="43:5" pos:end="43:22"><expr pos:start="43:5" pos:end="43:21"><name pos:start="43:5" pos:end="43:9">width</name> <operator pos:start="43:11" pos:end="43:11">=</operator> <name pos:start="43:13" pos:end="43:21"><name pos:start="43:13" pos:end="43:14">ap</name><operator pos:start="43:15" pos:end="43:16">-&gt;</operator><name pos:start="43:17" pos:end="43:21">width</name></name></expr>;</expr_stmt>

    <expr_stmt pos:start="45:5" pos:end="45:24"><expr pos:start="45:5" pos:end="45:23"><name pos:start="45:5" pos:end="45:10">height</name> <operator pos:start="45:12" pos:end="45:12">=</operator> <name pos:start="45:14" pos:end="45:23"><name pos:start="45:14" pos:end="45:15">ap</name><operator pos:start="45:16" pos:end="45:17">-&gt;</operator><name pos:start="45:18" pos:end="45:23">height</name></name></expr>;</expr_stmt>

    <expr_stmt pos:start="47:5" pos:end="47:40"><expr pos:start="47:5" pos:end="47:39"><name pos:start="47:5" pos:end="47:14">frame_rate</name>      <operator pos:start="47:21" pos:end="47:21">=</operator> <name pos:start="47:23" pos:end="47:39"><name pos:start="47:23" pos:end="47:24">ap</name><operator pos:start="47:25" pos:end="47:26">-&gt;</operator><name pos:start="47:27" pos:end="47:35">time_base</name><operator pos:start="47:36" pos:end="47:36">.</operator><name pos:start="47:37" pos:end="47:39">den</name></name></expr>;</expr_stmt>

    <expr_stmt pos:start="49:5" pos:end="49:40"><expr pos:start="49:5" pos:end="49:39"><name pos:start="49:5" pos:end="49:19">frame_rate_base</name> <operator pos:start="49:21" pos:end="49:21">=</operator> <name pos:start="49:23" pos:end="49:39"><name pos:start="49:23" pos:end="49:24">ap</name><operator pos:start="49:25" pos:end="49:26">-&gt;</operator><name pos:start="49:27" pos:end="49:35">time_base</name><operator pos:start="49:36" pos:end="49:36">.</operator><name pos:start="49:37" pos:end="49:39">num</name></name></expr>;</expr_stmt>



    <if_stmt pos:start="53:5" pos:end="63:5"><if pos:start="53:5" pos:end="63:5">if<condition pos:start="53:7" pos:end="53:59">(<expr pos:start="53:8" pos:end="53:58"><operator pos:start="53:8" pos:end="53:8">(</operator><name pos:start="53:9" pos:end="53:16">unsigned</name><operator pos:start="53:17" pos:end="53:17">)</operator><name pos:start="53:18" pos:end="53:22">width</name> <operator pos:start="53:24" pos:end="53:24">&gt;</operator> <literal type="number" pos:start="53:26" pos:end="53:30">32767</literal> <operator pos:start="53:32" pos:end="53:33">||</operator> <operator pos:start="53:35" pos:end="53:35">(</operator><name pos:start="53:36" pos:end="53:43">unsigned</name><operator pos:start="53:44" pos:end="53:44">)</operator><name pos:start="53:45" pos:end="53:50">height</name> <operator pos:start="53:52" pos:end="53:52">&gt;</operator> <literal type="number" pos:start="53:54" pos:end="53:58">32767</literal></expr>)</condition> <block pos:start="53:61" pos:end="63:5">{<block_content pos:start="55:9" pos:end="61:18">

        <expr_stmt pos:start="55:9" pos:end="57:27"><expr pos:start="55:9" pos:end="57:26"><call pos:start="55:9" pos:end="57:26"><name pos:start="55:9" pos:end="55:14">av_log</name><argument_list pos:start="55:15" pos:end="57:26">(<argument pos:start="55:16" pos:end="55:17"><expr pos:start="55:16" pos:end="55:17"><name pos:start="55:16" pos:end="55:17">s1</name></expr></argument>, <argument pos:start="55:20" pos:end="55:31"><expr pos:start="55:20" pos:end="55:31"><name pos:start="55:20" pos:end="55:31">AV_LOG_ERROR</name></expr></argument>, <argument pos:start="55:34" pos:end="55:72"><expr pos:start="55:34" pos:end="55:72"><literal type="string" pos:start="55:34" pos:end="55:72">"Capture size is out of range: %dx%d\n"</literal></expr></argument>,

            <argument pos:start="57:13" pos:end="57:17"><expr pos:start="57:13" pos:end="57:17"><name pos:start="57:13" pos:end="57:17">width</name></expr></argument>, <argument pos:start="57:20" pos:end="57:25"><expr pos:start="57:20" pos:end="57:25"><name pos:start="57:20" pos:end="57:25">height</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>



        <return pos:start="61:9" pos:end="61:18">return <expr pos:start="61:16" pos:end="61:17"><operator pos:start="61:16" pos:end="61:16">-</operator><literal type="number" pos:start="61:17" pos:end="61:17">1</literal></expr>;</return>

    </block_content>}</block></if></if_stmt>



    <expr_stmt pos:start="67:5" pos:end="67:30"><expr pos:start="67:5" pos:end="67:29"><name pos:start="67:5" pos:end="67:6">st</name> <operator pos:start="67:8" pos:end="67:8">=</operator> <call pos:start="67:10" pos:end="67:29"><name pos:start="67:10" pos:end="67:22">av_new_stream</name><argument_list pos:start="67:23" pos:end="67:29">(<argument pos:start="67:24" pos:end="67:25"><expr pos:start="67:24" pos:end="67:25"><name pos:start="67:24" pos:end="67:25">s1</name></expr></argument>, <argument pos:start="67:28" pos:end="67:28"><expr pos:start="67:28" pos:end="67:28"><literal type="number" pos:start="67:28" pos:end="67:28">0</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    <if_stmt pos:start="69:5" pos:end="71:31"><if pos:start="69:5" pos:end="71:31">if <condition pos:start="69:8" pos:end="69:12">(<expr pos:start="69:9" pos:end="69:11"><operator pos:start="69:9" pos:end="69:9">!</operator><name pos:start="69:10" pos:end="69:11">st</name></expr>)</condition><block type="pseudo" pos:start="71:9" pos:end="71:31"><block_content pos:start="71:9" pos:end="71:31">

        <return pos:start="71:9" pos:end="71:31">return <expr pos:start="71:16" pos:end="71:30"><call pos:start="71:16" pos:end="71:30"><name pos:start="71:16" pos:end="71:22">AVERROR</name><argument_list pos:start="71:23" pos:end="71:30">(<argument pos:start="71:24" pos:end="71:29"><expr pos:start="71:24" pos:end="71:29"><name pos:start="71:24" pos:end="71:29">ENOMEM</name></expr></argument>)</argument_list></call></expr>;</return></block_content></block></if></if_stmt>

    <expr_stmt pos:start="73:5" pos:end="73:40"><expr pos:start="73:5" pos:end="73:39"><call pos:start="73:5" pos:end="73:39"><name pos:start="73:5" pos:end="73:19">av_set_pts_info</name><argument_list pos:start="73:20" pos:end="73:39">(<argument pos:start="73:21" pos:end="73:22"><expr pos:start="73:21" pos:end="73:22"><name pos:start="73:21" pos:end="73:22">st</name></expr></argument>, <argument pos:start="73:25" pos:end="73:26"><expr pos:start="73:25" pos:end="73:26"><literal type="number" pos:start="73:25" pos:end="73:26">64</literal></expr></argument>, <argument pos:start="73:29" pos:end="73:29"><expr pos:start="73:29" pos:end="73:29"><literal type="number" pos:start="73:29" pos:end="73:29">1</literal></expr></argument>, <argument pos:start="73:32" pos:end="73:38"><expr pos:start="73:32" pos:end="73:38"><literal type="number" pos:start="73:32" pos:end="73:38">1000000</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt> <comment type="block" pos:start="73:42" pos:end="73:64">/* 64 bits pts in us */</comment>



    <expr_stmt pos:start="77:5" pos:end="77:21"><expr pos:start="77:5" pos:end="77:20"><name pos:start="77:5" pos:end="77:12"><name pos:start="77:5" pos:end="77:5">s</name><operator pos:start="77:6" pos:end="77:7">-&gt;</operator><name pos:start="77:8" pos:end="77:12">width</name></name> <operator pos:start="77:14" pos:end="77:14">=</operator> <name pos:start="77:16" pos:end="77:20">width</name></expr>;</expr_stmt>

    <expr_stmt pos:start="79:5" pos:end="79:23"><expr pos:start="79:5" pos:end="79:22"><name pos:start="79:5" pos:end="79:13"><name pos:start="79:5" pos:end="79:5">s</name><operator pos:start="79:6" pos:end="79:7">-&gt;</operator><name pos:start="79:8" pos:end="79:13">height</name></name> <operator pos:start="79:15" pos:end="79:15">=</operator> <name pos:start="79:17" pos:end="79:22">height</name></expr>;</expr_stmt>

    <expr_stmt pos:start="81:5" pos:end="81:36"><expr pos:start="81:5" pos:end="81:35"><name pos:start="81:5" pos:end="81:17"><name pos:start="81:5" pos:end="81:5">s</name><operator pos:start="81:6" pos:end="81:7">-&gt;</operator><name pos:start="81:8" pos:end="81:17">frame_rate</name></name>      <operator pos:start="81:24" pos:end="81:24">=</operator> <name pos:start="81:26" pos:end="81:35">frame_rate</name></expr>;</expr_stmt>

    <expr_stmt pos:start="83:5" pos:end="83:41"><expr pos:start="83:5" pos:end="83:40"><name pos:start="83:5" pos:end="83:22"><name pos:start="83:5" pos:end="83:5">s</name><operator pos:start="83:6" pos:end="83:7">-&gt;</operator><name pos:start="83:8" pos:end="83:22">frame_rate_base</name></name> <operator pos:start="83:24" pos:end="83:24">=</operator> <name pos:start="83:26" pos:end="83:40">frame_rate_base</name></expr>;</expr_stmt>



    <expr_stmt pos:start="87:5" pos:end="87:42"><expr pos:start="87:5" pos:end="87:41"><name pos:start="87:5" pos:end="87:12">video_fd</name> <operator pos:start="87:14" pos:end="87:14">=</operator> <call pos:start="87:16" pos:end="87:41"><name pos:start="87:16" pos:end="87:19">open</name><argument_list pos:start="87:20" pos:end="87:41">(<argument pos:start="87:21" pos:end="87:32"><expr pos:start="87:21" pos:end="87:32"><name pos:start="87:21" pos:end="87:32"><name pos:start="87:21" pos:end="87:22">s1</name><operator pos:start="87:23" pos:end="87:24">-&gt;</operator><name pos:start="87:25" pos:end="87:32">filename</name></name></expr></argument>, <argument pos:start="87:35" pos:end="87:40"><expr pos:start="87:35" pos:end="87:40"><name pos:start="87:35" pos:end="87:40">O_RDWR</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    <if_stmt pos:start="89:5" pos:end="95:5"><if pos:start="89:5" pos:end="95:5">if <condition pos:start="89:8" pos:end="89:21">(<expr pos:start="89:9" pos:end="89:20"><name pos:start="89:9" pos:end="89:16">video_fd</name> <operator pos:start="89:18" pos:end="89:18">&lt;</operator> <literal type="number" pos:start="89:20" pos:end="89:20">0</literal></expr>)</condition> <block pos:start="89:23" pos:end="95:5">{<block_content pos:start="91:9" pos:end="93:18">

        <expr_stmt pos:start="91:9" pos:end="91:76"><expr pos:start="91:9" pos:end="91:75"><call pos:start="91:9" pos:end="91:75"><name pos:start="91:9" pos:end="91:14">av_log</name><argument_list pos:start="91:15" pos:end="91:75">(<argument pos:start="91:16" pos:end="91:17"><expr pos:start="91:16" pos:end="91:17"><name pos:start="91:16" pos:end="91:17">s1</name></expr></argument>, <argument pos:start="91:20" pos:end="91:31"><expr pos:start="91:20" pos:end="91:31"><name pos:start="91:20" pos:end="91:31">AV_LOG_ERROR</name></expr></argument>, <argument pos:start="91:34" pos:end="91:43"><expr pos:start="91:34" pos:end="91:43"><literal type="string" pos:start="91:34" pos:end="91:43">"%s: %s\n"</literal></expr></argument>, <argument pos:start="91:46" pos:end="91:57"><expr pos:start="91:46" pos:end="91:57"><name pos:start="91:46" pos:end="91:57"><name pos:start="91:46" pos:end="91:47">s1</name><operator pos:start="91:48" pos:end="91:49">-&gt;</operator><name pos:start="91:50" pos:end="91:57">filename</name></name></expr></argument>, <argument pos:start="91:60" pos:end="91:74"><expr pos:start="91:60" pos:end="91:74"><call pos:start="91:60" pos:end="91:74"><name pos:start="91:60" pos:end="91:67">strerror</name><argument_list pos:start="91:68" pos:end="91:74">(<argument pos:start="91:69" pos:end="91:73"><expr pos:start="91:69" pos:end="91:73"><name pos:start="91:69" pos:end="91:73">errno</name></expr></argument>)</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <goto pos:start="93:9" pos:end="93:18">goto <name pos:start="93:14" pos:end="93:17">fail</name>;</goto>

    </block_content>}</block></if></if_stmt>



    <if_stmt pos:start="99:5" pos:end="105:5"><if pos:start="99:5" pos:end="105:5">if <condition pos:start="99:8" pos:end="99:54">(<expr pos:start="99:9" pos:end="99:53"><call pos:start="99:9" pos:end="99:49"><name pos:start="99:9" pos:end="99:13">ioctl</name><argument_list pos:start="99:14" pos:end="99:49">(<argument pos:start="99:15" pos:end="99:22"><expr pos:start="99:15" pos:end="99:22"><name pos:start="99:15" pos:end="99:22">video_fd</name></expr></argument>,<argument pos:start="99:24" pos:end="99:33"><expr pos:start="99:24" pos:end="99:33"><name pos:start="99:24" pos:end="99:33">VIDIOCGCAP</name></expr></argument>, <argument pos:start="99:36" pos:end="99:48"><expr pos:start="99:36" pos:end="99:48"><operator pos:start="99:36" pos:end="99:36">&amp;</operator><name pos:start="99:37" pos:end="99:48"><name pos:start="99:37" pos:end="99:37">s</name><operator pos:start="99:38" pos:end="99:39">-&gt;</operator><name pos:start="99:40" pos:end="99:48">video_cap</name></name></expr></argument>)</argument_list></call> <operator pos:start="99:51" pos:end="99:51">&lt;</operator> <literal type="number" pos:start="99:53" pos:end="99:53">0</literal></expr>)</condition> <block pos:start="99:56" pos:end="105:5">{<block_content pos:start="101:9" pos:end="103:18">

        <expr_stmt pos:start="101:9" pos:end="101:70"><expr pos:start="101:9" pos:end="101:69"><call pos:start="101:9" pos:end="101:69"><name pos:start="101:9" pos:end="101:14">av_log</name><argument_list pos:start="101:15" pos:end="101:69">(<argument pos:start="101:16" pos:end="101:17"><expr pos:start="101:16" pos:end="101:17"><name pos:start="101:16" pos:end="101:17">s1</name></expr></argument>, <argument pos:start="101:20" pos:end="101:31"><expr pos:start="101:20" pos:end="101:31"><name pos:start="101:20" pos:end="101:31">AV_LOG_ERROR</name></expr></argument>, <argument pos:start="101:34" pos:end="101:51"><expr pos:start="101:34" pos:end="101:51"><literal type="string" pos:start="101:34" pos:end="101:51">"VIDIOCGCAP: %s\n"</literal></expr></argument>, <argument pos:start="101:54" pos:end="101:68"><expr pos:start="101:54" pos:end="101:68"><call pos:start="101:54" pos:end="101:68"><name pos:start="101:54" pos:end="101:61">strerror</name><argument_list pos:start="101:62" pos:end="101:68">(<argument pos:start="101:63" pos:end="101:67"><expr pos:start="101:63" pos:end="101:67"><name pos:start="101:63" pos:end="101:67">errno</name></expr></argument>)</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <goto pos:start="103:9" pos:end="103:18">goto <name pos:start="103:14" pos:end="103:17">fail</name>;</goto>

    </block_content>}</block></if></if_stmt>



    <if_stmt pos:start="109:5" pos:end="115:5"><if pos:start="109:5" pos:end="115:5">if <condition pos:start="109:8" pos:end="109:48">(<expr pos:start="109:9" pos:end="109:47"><operator pos:start="109:9" pos:end="109:9">!</operator><operator pos:start="109:10" pos:end="109:10">(</operator><name pos:start="109:11" pos:end="109:27"><name pos:start="109:11" pos:end="109:11">s</name><operator pos:start="109:12" pos:end="109:13">-&gt;</operator><name pos:start="109:14" pos:end="109:22">video_cap</name><operator pos:start="109:23" pos:end="109:23">.</operator><name pos:start="109:24" pos:end="109:27">type</name></name> <operator pos:start="109:29" pos:end="109:29">&amp;</operator> <name pos:start="109:31" pos:end="109:46">VID_TYPE_CAPTURE</name><operator pos:start="109:47" pos:end="109:47">)</operator></expr>)</condition> <block pos:start="109:50" pos:end="115:5">{<block_content pos:start="111:9" pos:end="113:18">

        <expr_stmt pos:start="111:9" pos:end="111:81"><expr pos:start="111:9" pos:end="111:80"><call pos:start="111:9" pos:end="111:80"><name pos:start="111:9" pos:end="111:14">av_log</name><argument_list pos:start="111:15" pos:end="111:80">(<argument pos:start="111:16" pos:end="111:17"><expr pos:start="111:16" pos:end="111:17"><name pos:start="111:16" pos:end="111:17">s1</name></expr></argument>, <argument pos:start="111:20" pos:end="111:31"><expr pos:start="111:20" pos:end="111:31"><name pos:start="111:20" pos:end="111:31">AV_LOG_ERROR</name></expr></argument>, <argument pos:start="111:34" pos:end="111:79"><expr pos:start="111:34" pos:end="111:79"><literal type="string" pos:start="111:34" pos:end="111:79">"Fatal: grab device does not handle capture\n"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <goto pos:start="113:9" pos:end="113:18">goto <name pos:start="113:14" pos:end="113:17">fail</name>;</goto>

    </block_content>}</block></if></if_stmt>



    <expr_stmt pos:start="119:5" pos:end="119:25"><expr pos:start="119:5" pos:end="119:24"><name pos:start="119:5" pos:end="119:19">desired_palette</name> <operator pos:start="119:21" pos:end="119:21">=</operator> <operator pos:start="119:23" pos:end="119:23">-</operator><literal type="number" pos:start="119:24" pos:end="119:24">1</literal></expr>;</expr_stmt>

    <expr_stmt pos:start="121:5" pos:end="121:23"><expr pos:start="121:5" pos:end="121:22"><name pos:start="121:5" pos:end="121:17">desired_depth</name> <operator pos:start="121:19" pos:end="121:19">=</operator> <operator pos:start="121:21" pos:end="121:21">-</operator><literal type="number" pos:start="121:22" pos:end="121:22">1</literal></expr>;</expr_stmt>

    <for pos:start="123:5" pos:end="135:5">for <control pos:start="123:9" pos:end="123:37">(<init pos:start="123:10" pos:end="123:15"><expr pos:start="123:10" pos:end="123:14"><name pos:start="123:10" pos:end="123:10">j</name> <operator pos:start="123:12" pos:end="123:12">=</operator> <literal type="number" pos:start="123:14" pos:end="123:14">0</literal></expr>;</init> <condition pos:start="123:17" pos:end="123:32"><expr pos:start="123:17" pos:end="123:31"><name pos:start="123:17" pos:end="123:17">j</name> <operator pos:start="123:19" pos:end="123:19">&lt;</operator> <name pos:start="123:21" pos:end="123:31">vformat_num</name></expr>;</condition> <incr pos:start="123:34" pos:end="123:36"><expr pos:start="123:34" pos:end="123:36"><name pos:start="123:34" pos:end="123:34">j</name><operator pos:start="123:35" pos:end="123:36">++</operator></expr></incr>)</control> <block pos:start="123:39" pos:end="135:5">{<block_content pos:start="125:9" pos:end="133:9">

        <if_stmt pos:start="125:9" pos:end="133:9"><if pos:start="125:9" pos:end="133:9">if <condition pos:start="125:12" pos:end="125:52">(<expr pos:start="125:13" pos:end="125:51"><name pos:start="125:13" pos:end="125:23"><name pos:start="125:13" pos:end="125:14">ap</name><operator pos:start="125:15" pos:end="125:16">-&gt;</operator><name pos:start="125:17" pos:end="125:23">pix_fmt</name></name> <operator pos:start="125:25" pos:end="125:26">==</operator> <name pos:start="125:28" pos:end="125:43"><name pos:start="125:28" pos:end="125:40">video_formats</name><index pos:start="125:41" pos:end="125:43">[<expr pos:start="125:42" pos:end="125:42"><name pos:start="125:42" pos:end="125:42">j</name></expr>]</index></name><operator pos:start="125:44" pos:end="125:44">.</operator><name pos:start="125:45" pos:end="125:51">pix_fmt</name></expr>)</condition> <block pos:start="125:54" pos:end="133:9">{<block_content pos:start="127:13" pos:end="131:18">

            <expr_stmt pos:start="127:13" pos:end="127:55"><expr pos:start="127:13" pos:end="127:54"><name pos:start="127:13" pos:end="127:27">desired_palette</name> <operator pos:start="127:29" pos:end="127:29">=</operator> <name pos:start="127:31" pos:end="127:46"><name pos:start="127:31" pos:end="127:43">video_formats</name><index pos:start="127:44" pos:end="127:46">[<expr pos:start="127:45" pos:end="127:45"><name pos:start="127:45" pos:end="127:45">j</name></expr>]</index></name><operator pos:start="127:47" pos:end="127:47">.</operator><name pos:start="127:48" pos:end="127:54">palette</name></expr>;</expr_stmt>

            <expr_stmt pos:start="129:13" pos:end="129:51"><expr pos:start="129:13" pos:end="129:50"><name pos:start="129:13" pos:end="129:25">desired_depth</name> <operator pos:start="129:27" pos:end="129:27">=</operator> <name pos:start="129:29" pos:end="129:44"><name pos:start="129:29" pos:end="129:41">video_formats</name><index pos:start="129:42" pos:end="129:44">[<expr pos:start="129:43" pos:end="129:43"><name pos:start="129:43" pos:end="129:43">j</name></expr>]</index></name><operator pos:start="129:45" pos:end="129:45">.</operator><name pos:start="129:46" pos:end="129:50">depth</name></expr>;</expr_stmt>

            <break pos:start="131:13" pos:end="131:18">break;</break>

        </block_content>}</block></if></if_stmt>

    </block_content>}</block></for>



    <comment type="block" pos:start="139:5" pos:end="139:25">/* set tv standard */</comment>

    <if_stmt pos:start="141:5" pos:end="157:5"><if pos:start="141:5" pos:end="157:5">if <condition pos:start="141:8" pos:end="141:63">(<expr pos:start="141:9" pos:end="141:62"><name pos:start="141:9" pos:end="141:20"><name pos:start="141:9" pos:end="141:10">ap</name><operator pos:start="141:11" pos:end="141:12">-&gt;</operator><name pos:start="141:13" pos:end="141:20">standard</name></name> <operator pos:start="141:22" pos:end="141:23">&amp;&amp;</operator> <operator pos:start="141:25" pos:end="141:25">!</operator><call pos:start="141:26" pos:end="141:62"><name pos:start="141:26" pos:end="141:30">ioctl</name><argument_list pos:start="141:31" pos:end="141:62">(<argument pos:start="141:32" pos:end="141:39"><expr pos:start="141:32" pos:end="141:39"><name pos:start="141:32" pos:end="141:39">video_fd</name></expr></argument>, <argument pos:start="141:42" pos:end="141:53"><expr pos:start="141:42" pos:end="141:53"><name pos:start="141:42" pos:end="141:53">VIDIOCGTUNER</name></expr></argument>, <argument pos:start="141:56" pos:end="141:61"><expr pos:start="141:56" pos:end="141:61"><operator pos:start="141:56" pos:end="141:56">&amp;</operator><name pos:start="141:57" pos:end="141:61">tuner</name></expr></argument>)</argument_list></call></expr>)</condition> <block pos:start="141:65" pos:end="157:5">{<block_content pos:start="143:9" pos:end="155:46">

        <if_stmt pos:start="143:9" pos:end="153:41"><if pos:start="143:9" pos:end="145:40">if <condition pos:start="143:12" pos:end="143:45">(<expr pos:start="143:13" pos:end="143:44"><operator pos:start="143:13" pos:end="143:13">!</operator><call pos:start="143:14" pos:end="143:44"><name pos:start="143:14" pos:end="143:23">strcasecmp</name><argument_list pos:start="143:24" pos:end="143:44">(<argument pos:start="143:25" pos:end="143:36"><expr pos:start="143:25" pos:end="143:36"><name pos:start="143:25" pos:end="143:36"><name pos:start="143:25" pos:end="143:26">ap</name><operator pos:start="143:27" pos:end="143:28">-&gt;</operator><name pos:start="143:29" pos:end="143:36">standard</name></name></expr></argument>, <argument pos:start="143:39" pos:end="143:43"><expr pos:start="143:39" pos:end="143:43"><literal type="string" pos:start="143:39" pos:end="143:43">"pal"</literal></expr></argument>)</argument_list></call></expr>)</condition><block type="pseudo" pos:start="145:13" pos:end="145:40"><block_content pos:start="145:13" pos:end="145:40">

            <expr_stmt pos:start="145:13" pos:end="145:40"><expr pos:start="145:13" pos:end="145:39"><name pos:start="145:13" pos:end="145:22"><name pos:start="145:13" pos:end="145:17">tuner</name><operator pos:start="145:18" pos:end="145:18">.</operator><name pos:start="145:19" pos:end="145:22">mode</name></name> <operator pos:start="145:24" pos:end="145:24">=</operator> <name pos:start="145:26" pos:end="145:39">VIDEO_MODE_PAL</name></expr>;</expr_stmt></block_content></block></if>

        <if type="elseif" pos:start="147:9" pos:end="149:42">else if <condition pos:start="147:17" pos:end="147:52">(<expr pos:start="147:18" pos:end="147:51"><operator pos:start="147:18" pos:end="147:18">!</operator><call pos:start="147:19" pos:end="147:51"><name pos:start="147:19" pos:end="147:28">strcasecmp</name><argument_list pos:start="147:29" pos:end="147:51">(<argument pos:start="147:30" pos:end="147:41"><expr pos:start="147:30" pos:end="147:41"><name pos:start="147:30" pos:end="147:41"><name pos:start="147:30" pos:end="147:31">ap</name><operator pos:start="147:32" pos:end="147:33">-&gt;</operator><name pos:start="147:34" pos:end="147:41">standard</name></name></expr></argument>, <argument pos:start="147:44" pos:end="147:50"><expr pos:start="147:44" pos:end="147:50"><literal type="string" pos:start="147:44" pos:end="147:50">"secam"</literal></expr></argument>)</argument_list></call></expr>)</condition><block type="pseudo" pos:start="149:13" pos:end="149:42"><block_content pos:start="149:13" pos:end="149:42">

            <expr_stmt pos:start="149:13" pos:end="149:42"><expr pos:start="149:13" pos:end="149:41"><name pos:start="149:13" pos:end="149:22"><name pos:start="149:13" pos:end="149:17">tuner</name><operator pos:start="149:18" pos:end="149:18">.</operator><name pos:start="149:19" pos:end="149:22">mode</name></name> <operator pos:start="149:24" pos:end="149:24">=</operator> <name pos:start="149:26" pos:end="149:41">VIDEO_MODE_SECAM</name></expr>;</expr_stmt></block_content></block></if>

        <else pos:start="151:9" pos:end="153:41">else<block type="pseudo" pos:start="153:13" pos:end="153:41"><block_content pos:start="153:13" pos:end="153:41">

            <expr_stmt pos:start="153:13" pos:end="153:41"><expr pos:start="153:13" pos:end="153:40"><name pos:start="153:13" pos:end="153:22"><name pos:start="153:13" pos:end="153:17">tuner</name><operator pos:start="153:18" pos:end="153:18">.</operator><name pos:start="153:19" pos:end="153:22">mode</name></name> <operator pos:start="153:24" pos:end="153:24">=</operator> <name pos:start="153:26" pos:end="153:40">VIDEO_MODE_NTSC</name></expr>;</expr_stmt></block_content></block></else></if_stmt>

        <expr_stmt pos:start="155:9" pos:end="155:46"><expr pos:start="155:9" pos:end="155:45"><call pos:start="155:9" pos:end="155:45"><name pos:start="155:9" pos:end="155:13">ioctl</name><argument_list pos:start="155:14" pos:end="155:45">(<argument pos:start="155:15" pos:end="155:22"><expr pos:start="155:15" pos:end="155:22"><name pos:start="155:15" pos:end="155:22">video_fd</name></expr></argument>, <argument pos:start="155:25" pos:end="155:36"><expr pos:start="155:25" pos:end="155:36"><name pos:start="155:25" pos:end="155:36">VIDIOCSTUNER</name></expr></argument>, <argument pos:start="155:39" pos:end="155:44"><expr pos:start="155:39" pos:end="155:44"><operator pos:start="155:39" pos:end="155:39">&amp;</operator><name pos:start="155:40" pos:end="155:44">tuner</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    </block_content>}</block></if></if_stmt>



    <comment type="block" pos:start="161:5" pos:end="161:22">/* unmute audio */</comment>

    <expr_stmt pos:start="163:5" pos:end="163:20"><expr pos:start="163:5" pos:end="163:19"><name pos:start="163:5" pos:end="163:15"><name pos:start="163:5" pos:end="163:9">audio</name><operator pos:start="163:10" pos:end="163:10">.</operator><name pos:start="163:11" pos:end="163:15">audio</name></name> <operator pos:start="163:17" pos:end="163:17">=</operator> <literal type="number" pos:start="163:19" pos:end="163:19">0</literal></expr>;</expr_stmt>

    <expr_stmt pos:start="165:5" pos:end="165:42"><expr pos:start="165:5" pos:end="165:41"><call pos:start="165:5" pos:end="165:41"><name pos:start="165:5" pos:end="165:9">ioctl</name><argument_list pos:start="165:10" pos:end="165:41">(<argument pos:start="165:11" pos:end="165:18"><expr pos:start="165:11" pos:end="165:18"><name pos:start="165:11" pos:end="165:18">video_fd</name></expr></argument>, <argument pos:start="165:21" pos:end="165:32"><expr pos:start="165:21" pos:end="165:32"><name pos:start="165:21" pos:end="165:32">VIDIOCGAUDIO</name></expr></argument>, <argument pos:start="165:35" pos:end="165:40"><expr pos:start="165:35" pos:end="165:40"><operator pos:start="165:35" pos:end="165:35">&amp;</operator><name pos:start="165:36" pos:end="165:40">audio</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    <expr_stmt pos:start="167:5" pos:end="167:51"><expr pos:start="167:5" pos:end="167:50"><call pos:start="167:5" pos:end="167:50"><name pos:start="167:5" pos:end="167:10">memcpy</name><argument_list pos:start="167:11" pos:end="167:50">(<argument pos:start="167:12" pos:end="167:26"><expr pos:start="167:12" pos:end="167:26"><operator pos:start="167:12" pos:end="167:12">&amp;</operator><name pos:start="167:13" pos:end="167:26"><name pos:start="167:13" pos:end="167:13">s</name><operator pos:start="167:14" pos:end="167:15">-&gt;</operator><name pos:start="167:16" pos:end="167:26">audio_saved</name></name></expr></argument>, <argument pos:start="167:29" pos:end="167:34"><expr pos:start="167:29" pos:end="167:34"><operator pos:start="167:29" pos:end="167:29">&amp;</operator><name pos:start="167:30" pos:end="167:34">audio</name></expr></argument>, <argument pos:start="167:37" pos:end="167:49"><expr pos:start="167:37" pos:end="167:49"><sizeof pos:start="167:37" pos:end="167:49">sizeof<argument_list pos:start="167:43" pos:end="167:49">(<argument pos:start="167:44" pos:end="167:48"><expr pos:start="167:44" pos:end="167:48"><name pos:start="167:44" pos:end="167:48">audio</name></expr></argument>)</argument_list></sizeof></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    <expr_stmt pos:start="169:5" pos:end="169:37"><expr pos:start="169:5" pos:end="169:36"><name pos:start="169:5" pos:end="169:15"><name pos:start="169:5" pos:end="169:9">audio</name><operator pos:start="169:10" pos:end="169:10">.</operator><name pos:start="169:11" pos:end="169:15">flags</name></name> <operator pos:start="169:17" pos:end="169:18">&amp;=</operator> <operator pos:start="169:20" pos:end="169:20">~</operator><name pos:start="169:21" pos:end="169:36">VIDEO_AUDIO_MUTE</name></expr>;</expr_stmt>

    <expr_stmt pos:start="171:5" pos:end="171:42"><expr pos:start="171:5" pos:end="171:41"><call pos:start="171:5" pos:end="171:41"><name pos:start="171:5" pos:end="171:9">ioctl</name><argument_list pos:start="171:10" pos:end="171:41">(<argument pos:start="171:11" pos:end="171:18"><expr pos:start="171:11" pos:end="171:18"><name pos:start="171:11" pos:end="171:18">video_fd</name></expr></argument>, <argument pos:start="171:21" pos:end="171:32"><expr pos:start="171:21" pos:end="171:32"><name pos:start="171:21" pos:end="171:32">VIDIOCSAUDIO</name></expr></argument>, <argument pos:start="171:35" pos:end="171:40"><expr pos:start="171:35" pos:end="171:40"><operator pos:start="171:35" pos:end="171:35">&amp;</operator><name pos:start="171:36" pos:end="171:40">audio</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>



    <expr_stmt pos:start="175:5" pos:end="192:0"><expr pos:start="175:5" pos:end="175:39"><call pos:start="175:5" pos:end="175:39"><name pos:start="175:5" pos:end="175:9">ioctl</name><argument_list pos:start="175:10" pos:end="175:39">(<argument pos:start="175:11" pos:end="175:18"><expr pos:start="175:11" pos:end="175:18"><name pos:start="175:11" pos:end="175:18">video_fd</name></expr></argument>, <argument pos:start="175:21" pos:end="175:31"><expr pos:start="175:21" pos:end="175:31"><name pos:start="175:21" pos:end="175:31">VIDIOCGPICT</name></expr></argument>, <argument pos:start="175:34" pos:end="175:38"><expr pos:start="175:34" pos:end="175:38"><operator pos:start="175:34" pos:end="175:34">&amp;</operator><name pos:start="175:35" pos:end="175:38">pict</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

<cpp:if pos:start="177:1" pos:end="177:5">#<cpp:directive pos:start="177:2" pos:end="177:3">if</cpp:directive> <expr pos:start="177:5" pos:end="177:5"><literal type="number" pos:start="177:5" pos:end="177:5">0</literal></expr></cpp:if>

    printf("v4l: colour=%d hue=%d brightness=%d constrast=%d whiteness=%d\n",

           pict.colour,

           pict.hue,

           pict.brightness,

           pict.contrast,

           pict.whiteness);

<cpp:endif pos:start="191:1" pos:end="191:6">#<cpp:directive pos:start="191:2" pos:end="191:6">endif</cpp:directive></cpp:endif>

    <comment type="block" pos:start="193:5" pos:end="193:47">/* try to choose a suitable video format */</comment>

    <expr_stmt pos:start="195:5" pos:end="195:35"><expr pos:start="195:5" pos:end="195:34"><name pos:start="195:5" pos:end="195:16"><name pos:start="195:5" pos:end="195:8">pict</name><operator pos:start="195:9" pos:end="195:9">.</operator><name pos:start="195:10" pos:end="195:16">palette</name></name> <operator pos:start="195:18" pos:end="195:18">=</operator> <name pos:start="195:20" pos:end="195:34">desired_palette</name></expr>;</expr_stmt>

    <expr_stmt pos:start="197:5" pos:end="197:30"><expr pos:start="197:5" pos:end="197:29"><name pos:start="197:5" pos:end="197:14"><name pos:start="197:5" pos:end="197:8">pict</name><operator pos:start="197:9" pos:end="197:9">.</operator><name pos:start="197:10" pos:end="197:14">depth</name></name><operator pos:start="197:15" pos:end="197:15">=</operator> <name pos:start="197:17" pos:end="197:29">desired_depth</name></expr>;</expr_stmt>

    <if_stmt pos:start="199:5" pos:end="217:5"><if pos:start="199:5" pos:end="217:5">if <condition pos:start="199:8" pos:end="199:81">(<expr pos:start="199:9" pos:end="199:80"><name pos:start="199:9" pos:end="199:23">desired_palette</name> <operator pos:start="199:25" pos:end="199:26">==</operator> <operator pos:start="199:28" pos:end="199:28">-</operator><literal type="number" pos:start="199:29" pos:end="199:29">1</literal> <operator pos:start="199:31" pos:end="199:32">||</operator> <operator pos:start="199:34" pos:end="199:34">(</operator><name pos:start="199:35" pos:end="199:37">ret</name> <operator pos:start="199:39" pos:end="199:39">=</operator> <call pos:start="199:41" pos:end="199:75"><name pos:start="199:41" pos:end="199:45">ioctl</name><argument_list pos:start="199:46" pos:end="199:75">(<argument pos:start="199:47" pos:end="199:54"><expr pos:start="199:47" pos:end="199:54"><name pos:start="199:47" pos:end="199:54">video_fd</name></expr></argument>, <argument pos:start="199:57" pos:end="199:67"><expr pos:start="199:57" pos:end="199:67"><name pos:start="199:57" pos:end="199:67">VIDIOCSPICT</name></expr></argument>, <argument pos:start="199:70" pos:end="199:74"><expr pos:start="199:70" pos:end="199:74"><operator pos:start="199:70" pos:end="199:70">&amp;</operator><name pos:start="199:71" pos:end="199:74">pict</name></expr></argument>)</argument_list></call><operator pos:start="199:76" pos:end="199:76">)</operator> <operator pos:start="199:78" pos:end="199:78">&lt;</operator> <literal type="number" pos:start="199:80" pos:end="199:80">0</literal></expr>)</condition> <block pos:start="199:83" pos:end="217:5">{<block_content pos:start="201:9" pos:end="215:23">

        <for pos:start="201:9" pos:end="211:9">for <control pos:start="201:13" pos:end="201:41">(<init pos:start="201:14" pos:end="201:19"><expr pos:start="201:14" pos:end="201:18"><name pos:start="201:14" pos:end="201:14">j</name> <operator pos:start="201:16" pos:end="201:16">=</operator> <literal type="number" pos:start="201:18" pos:end="201:18">0</literal></expr>;</init> <condition pos:start="201:21" pos:end="201:36"><expr pos:start="201:21" pos:end="201:35"><name pos:start="201:21" pos:end="201:21">j</name> <operator pos:start="201:23" pos:end="201:23">&lt;</operator> <name pos:start="201:25" pos:end="201:35">vformat_num</name></expr>;</condition> <incr pos:start="201:38" pos:end="201:40"><expr pos:start="201:38" pos:end="201:40"><name pos:start="201:38" pos:end="201:38">j</name><operator pos:start="201:39" pos:end="201:40">++</operator></expr></incr>)</control> <block pos:start="201:43" pos:end="211:9">{<block_content pos:start="203:13" pos:end="209:22">

            <expr_stmt pos:start="203:13" pos:end="203:52"><expr pos:start="203:13" pos:end="203:51"><name pos:start="203:13" pos:end="203:24"><name pos:start="203:13" pos:end="203:16">pict</name><operator pos:start="203:17" pos:end="203:17">.</operator><name pos:start="203:18" pos:end="203:24">palette</name></name> <operator pos:start="203:26" pos:end="203:26">=</operator> <name pos:start="203:28" pos:end="203:43"><name pos:start="203:28" pos:end="203:40">video_formats</name><index pos:start="203:41" pos:end="203:43">[<expr pos:start="203:42" pos:end="203:42"><name pos:start="203:42" pos:end="203:42">j</name></expr>]</index></name><operator pos:start="203:44" pos:end="203:44">.</operator><name pos:start="203:45" pos:end="203:51">palette</name></expr>;</expr_stmt>

            <expr_stmt pos:start="205:13" pos:end="205:48"><expr pos:start="205:13" pos:end="205:47"><name pos:start="205:13" pos:end="205:22"><name pos:start="205:13" pos:end="205:16">pict</name><operator pos:start="205:17" pos:end="205:17">.</operator><name pos:start="205:18" pos:end="205:22">depth</name></name> <operator pos:start="205:24" pos:end="205:24">=</operator> <name pos:start="205:26" pos:end="205:41"><name pos:start="205:26" pos:end="205:38">video_formats</name><index pos:start="205:39" pos:end="205:41">[<expr pos:start="205:40" pos:end="205:40"><name pos:start="205:40" pos:end="205:40">j</name></expr>]</index></name><operator pos:start="205:42" pos:end="205:42">.</operator><name pos:start="205:43" pos:end="205:47">depth</name></expr>;</expr_stmt>

            <if_stmt pos:start="207:13" pos:end="209:22"><if pos:start="207:13" pos:end="209:22">if <condition pos:start="207:16" pos:end="207:58">(<expr pos:start="207:17" pos:end="207:57"><operator pos:start="207:17" pos:end="207:17">-</operator><literal type="number" pos:start="207:18" pos:end="207:18">1</literal> <operator pos:start="207:20" pos:end="207:21">!=</operator> <call pos:start="207:23" pos:end="207:57"><name pos:start="207:23" pos:end="207:27">ioctl</name><argument_list pos:start="207:28" pos:end="207:57">(<argument pos:start="207:29" pos:end="207:36"><expr pos:start="207:29" pos:end="207:36"><name pos:start="207:29" pos:end="207:36">video_fd</name></expr></argument>, <argument pos:start="207:39" pos:end="207:49"><expr pos:start="207:39" pos:end="207:49"><name pos:start="207:39" pos:end="207:49">VIDIOCSPICT</name></expr></argument>, <argument pos:start="207:52" pos:end="207:56"><expr pos:start="207:52" pos:end="207:56"><operator pos:start="207:52" pos:end="207:52">&amp;</operator><name pos:start="207:53" pos:end="207:56">pict</name></expr></argument>)</argument_list></call></expr>)</condition><block type="pseudo" pos:start="209:17" pos:end="209:22"><block_content pos:start="209:17" pos:end="209:22">

                <break pos:start="209:17" pos:end="209:22">break;</break></block_content></block></if></if_stmt>

        </block_content>}</block></for>

        <if_stmt pos:start="213:9" pos:end="215:23"><if pos:start="213:9" pos:end="215:23">if <condition pos:start="213:12" pos:end="213:29">(<expr pos:start="213:13" pos:end="213:28"><name pos:start="213:13" pos:end="213:13">j</name> <operator pos:start="213:15" pos:end="213:16">&gt;=</operator> <name pos:start="213:18" pos:end="213:28">vformat_num</name></expr>)</condition><block type="pseudo" pos:start="215:13" pos:end="215:23"><block_content pos:start="215:13" pos:end="215:23">

            <goto pos:start="215:13" pos:end="215:23">goto <name pos:start="215:18" pos:end="215:22">fail1</name>;</goto></block_content></block></if></if_stmt>

    </block_content>}</block></if></if_stmt>



    <expr_stmt pos:start="221:5" pos:end="221:53"><expr pos:start="221:5" pos:end="221:52"><name pos:start="221:5" pos:end="221:7">ret</name> <operator pos:start="221:9" pos:end="221:9">=</operator> <call pos:start="221:11" pos:end="221:52"><name pos:start="221:11" pos:end="221:15">ioctl</name><argument_list pos:start="221:16" pos:end="221:52">(<argument pos:start="221:17" pos:end="221:24"><expr pos:start="221:17" pos:end="221:24"><name pos:start="221:17" pos:end="221:24">video_fd</name></expr></argument>,<argument pos:start="221:26" pos:end="221:36"><expr pos:start="221:26" pos:end="221:36"><name pos:start="221:26" pos:end="221:36">VIDIOCGMBUF</name></expr></argument>,<argument pos:start="221:38" pos:end="221:51"><expr pos:start="221:38" pos:end="221:51"><operator pos:start="221:38" pos:end="221:38">&amp;</operator><name pos:start="221:39" pos:end="221:51"><name pos:start="221:39" pos:end="221:39">s</name><operator pos:start="221:40" pos:end="221:41">-&gt;</operator><name pos:start="221:42" pos:end="221:51">gb_buffers</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    <if_stmt pos:start="223:5" pos:end="333:5"><if pos:start="223:5" pos:end="265:5">if <condition pos:start="223:8" pos:end="223:16">(<expr pos:start="223:9" pos:end="223:15"><name pos:start="223:9" pos:end="223:11">ret</name> <operator pos:start="223:13" pos:end="223:13">&lt;</operator> <literal type="number" pos:start="223:15" pos:end="223:15">0</literal></expr>)</condition> <block pos:start="223:18" pos:end="265:5">{<block_content pos:start="227:9" pos:end="263:24">

        <comment type="block" pos:start="225:9" pos:end="225:42">/* try to use read based access */</comment>

        <decl_stmt pos:start="227:9" pos:end="227:32"><decl pos:start="227:9" pos:end="227:31"><type pos:start="227:9" pos:end="227:27"><name pos:start="227:9" pos:end="227:27"><name pos:start="227:9" pos:end="227:14">struct</name> <name pos:start="227:16" pos:end="227:27">video_window</name></name></type> <name pos:start="227:29" pos:end="227:31">win</name></decl>;</decl_stmt>

        <decl_stmt pos:start="229:9" pos:end="229:16"><decl pos:start="229:9" pos:end="229:15"><type pos:start="229:9" pos:end="229:11"><name pos:start="229:9" pos:end="229:11">int</name></type> <name pos:start="229:13" pos:end="229:15">val</name></decl>;</decl_stmt>



        <expr_stmt pos:start="233:9" pos:end="233:18"><expr pos:start="233:9" pos:end="233:17"><name pos:start="233:9" pos:end="233:13"><name pos:start="233:9" pos:end="233:11">win</name><operator pos:start="233:12" pos:end="233:12">.</operator><name pos:start="233:13" pos:end="233:13">x</name></name> <operator pos:start="233:15" pos:end="233:15">=</operator> <literal type="number" pos:start="233:17" pos:end="233:17">0</literal></expr>;</expr_stmt>

        <expr_stmt pos:start="235:9" pos:end="235:18"><expr pos:start="235:9" pos:end="235:17"><name pos:start="235:9" pos:end="235:13"><name pos:start="235:9" pos:end="235:11">win</name><operator pos:start="235:12" pos:end="235:12">.</operator><name pos:start="235:13" pos:end="235:13">y</name></name> <operator pos:start="235:15" pos:end="235:15">=</operator> <literal type="number" pos:start="235:17" pos:end="235:17">0</literal></expr>;</expr_stmt>

        <expr_stmt pos:start="237:9" pos:end="237:26"><expr pos:start="237:9" pos:end="237:25"><name pos:start="237:9" pos:end="237:17"><name pos:start="237:9" pos:end="237:11">win</name><operator pos:start="237:12" pos:end="237:12">.</operator><name pos:start="237:13" pos:end="237:17">width</name></name> <operator pos:start="237:19" pos:end="237:19">=</operator> <name pos:start="237:21" pos:end="237:25">width</name></expr>;</expr_stmt>

        <expr_stmt pos:start="239:9" pos:end="239:28"><expr pos:start="239:9" pos:end="239:27"><name pos:start="239:9" pos:end="239:18"><name pos:start="239:9" pos:end="239:11">win</name><operator pos:start="239:12" pos:end="239:12">.</operator><name pos:start="239:13" pos:end="239:18">height</name></name> <operator pos:start="239:20" pos:end="239:20">=</operator> <name pos:start="239:22" pos:end="239:27">height</name></expr>;</expr_stmt>

        <expr_stmt pos:start="241:9" pos:end="241:27"><expr pos:start="241:9" pos:end="241:26"><name pos:start="241:9" pos:end="241:21"><name pos:start="241:9" pos:end="241:11">win</name><operator pos:start="241:12" pos:end="241:12">.</operator><name pos:start="241:13" pos:end="241:21">chromakey</name></name> <operator pos:start="241:23" pos:end="241:23">=</operator> <operator pos:start="241:25" pos:end="241:25">-</operator><literal type="number" pos:start="241:26" pos:end="241:26">1</literal></expr>;</expr_stmt>

        <expr_stmt pos:start="243:9" pos:end="243:22"><expr pos:start="243:9" pos:end="243:21"><name pos:start="243:9" pos:end="243:17"><name pos:start="243:9" pos:end="243:11">win</name><operator pos:start="243:12" pos:end="243:12">.</operator><name pos:start="243:13" pos:end="243:17">flags</name></name> <operator pos:start="243:19" pos:end="243:19">=</operator> <literal type="number" pos:start="243:21" pos:end="243:21">0</literal></expr>;</expr_stmt>



        <expr_stmt pos:start="247:9" pos:end="247:42"><expr pos:start="247:9" pos:end="247:41"><call pos:start="247:9" pos:end="247:41"><name pos:start="247:9" pos:end="247:13">ioctl</name><argument_list pos:start="247:14" pos:end="247:41">(<argument pos:start="247:15" pos:end="247:22"><expr pos:start="247:15" pos:end="247:22"><name pos:start="247:15" pos:end="247:22">video_fd</name></expr></argument>, <argument pos:start="247:25" pos:end="247:34"><expr pos:start="247:25" pos:end="247:34"><name pos:start="247:25" pos:end="247:34">VIDIOCSWIN</name></expr></argument>, <argument pos:start="247:37" pos:end="247:40"><expr pos:start="247:37" pos:end="247:40"><operator pos:start="247:37" pos:end="247:37">&amp;</operator><name pos:start="247:38" pos:end="247:40">win</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>



        <expr_stmt pos:start="251:9" pos:end="251:39"><expr pos:start="251:9" pos:end="251:38"><name pos:start="251:9" pos:end="251:23"><name pos:start="251:9" pos:end="251:9">s</name><operator pos:start="251:10" pos:end="251:11">-&gt;</operator><name pos:start="251:12" pos:end="251:23">frame_format</name></name> <operator pos:start="251:25" pos:end="251:25">=</operator> <name pos:start="251:27" pos:end="251:38"><name pos:start="251:27" pos:end="251:30">pict</name><operator pos:start="251:31" pos:end="251:31">.</operator><name pos:start="251:32" pos:end="251:38">palette</name></name></expr>;</expr_stmt>



        <expr_stmt pos:start="255:9" pos:end="255:16"><expr pos:start="255:9" pos:end="255:15"><name pos:start="255:9" pos:end="255:11">val</name> <operator pos:start="255:13" pos:end="255:13">=</operator> <literal type="number" pos:start="255:15" pos:end="255:15">1</literal></expr>;</expr_stmt>

        <expr_stmt pos:start="257:9" pos:end="257:45"><expr pos:start="257:9" pos:end="257:44"><call pos:start="257:9" pos:end="257:44"><name pos:start="257:9" pos:end="257:13">ioctl</name><argument_list pos:start="257:14" pos:end="257:44">(<argument pos:start="257:15" pos:end="257:22"><expr pos:start="257:15" pos:end="257:22"><name pos:start="257:15" pos:end="257:22">video_fd</name></expr></argument>, <argument pos:start="257:25" pos:end="257:37"><expr pos:start="257:25" pos:end="257:37"><name pos:start="257:25" pos:end="257:37">VIDIOCCAPTURE</name></expr></argument>, <argument pos:start="257:40" pos:end="257:43"><expr pos:start="257:40" pos:end="257:43"><operator pos:start="257:40" pos:end="257:40">&amp;</operator><name pos:start="257:41" pos:end="257:43">val</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>



        <expr_stmt pos:start="261:9" pos:end="261:74"><expr pos:start="261:9" pos:end="261:73"><name pos:start="261:9" pos:end="261:21"><name pos:start="261:9" pos:end="261:9">s</name><operator pos:start="261:10" pos:end="261:11">-&gt;</operator><name pos:start="261:12" pos:end="261:21">time_frame</name></name> <operator pos:start="261:23" pos:end="261:23">=</operator> <call pos:start="261:25" pos:end="261:36"><name pos:start="261:25" pos:end="261:34">av_gettime</name><argument_list pos:start="261:35" pos:end="261:36">()</argument_list></call> <operator pos:start="261:38" pos:end="261:38">*</operator> <name pos:start="261:40" pos:end="261:52"><name pos:start="261:40" pos:end="261:40">s</name><operator pos:start="261:41" pos:end="261:42">-&gt;</operator><name pos:start="261:43" pos:end="261:52">frame_rate</name></name> <operator pos:start="261:54" pos:end="261:54">/</operator> <name pos:start="261:56" pos:end="261:73"><name pos:start="261:56" pos:end="261:56">s</name><operator pos:start="261:57" pos:end="261:58">-&gt;</operator><name pos:start="261:59" pos:end="261:73">frame_rate_base</name></name></expr>;</expr_stmt>

        <expr_stmt pos:start="263:9" pos:end="263:24"><expr pos:start="263:9" pos:end="263:23"><name pos:start="263:9" pos:end="263:19"><name pos:start="263:9" pos:end="263:9">s</name><operator pos:start="263:10" pos:end="263:11">-&gt;</operator><name pos:start="263:12" pos:end="263:19">use_mmap</name></name> <operator pos:start="263:21" pos:end="263:21">=</operator> <literal type="number" pos:start="263:23" pos:end="263:23">0</literal></expr>;</expr_stmt>

    </block_content>}</block></if> <else pos:start="265:7" pos:end="333:5">else <block pos:start="265:12" pos:end="333:5">{<block_content pos:start="267:9" pos:end="331:24">

        <expr_stmt pos:start="267:9" pos:end="267:93"><expr pos:start="267:9" pos:end="267:92"><name pos:start="267:9" pos:end="267:20"><name pos:start="267:9" pos:end="267:9">s</name><operator pos:start="267:10" pos:end="267:11">-&gt;</operator><name pos:start="267:12" pos:end="267:20">video_buf</name></name> <operator pos:start="267:22" pos:end="267:22">=</operator> <call pos:start="267:24" pos:end="267:92"><name pos:start="267:24" pos:end="267:27">mmap</name><argument_list pos:start="267:28" pos:end="267:92">(<argument pos:start="267:29" pos:end="267:29"><expr pos:start="267:29" pos:end="267:29"><literal type="number" pos:start="267:29" pos:end="267:29">0</literal></expr></argument>,<argument pos:start="267:31" pos:end="267:48"><expr pos:start="267:31" pos:end="267:48"><name pos:start="267:31" pos:end="267:48"><name pos:start="267:31" pos:end="267:31">s</name><operator pos:start="267:32" pos:end="267:33">-&gt;</operator><name pos:start="267:34" pos:end="267:43">gb_buffers</name><operator pos:start="267:44" pos:end="267:44">.</operator><name pos:start="267:45" pos:end="267:48">size</name></name></expr></argument>,<argument pos:start="267:50" pos:end="267:69"><expr pos:start="267:50" pos:end="267:69"><name pos:start="267:50" pos:end="267:58">PROT_READ</name><operator pos:start="267:59" pos:end="267:59">|</operator><name pos:start="267:60" pos:end="267:69">PROT_WRITE</name></expr></argument>,<argument pos:start="267:71" pos:end="267:80"><expr pos:start="267:71" pos:end="267:80"><name pos:start="267:71" pos:end="267:80">MAP_SHARED</name></expr></argument>,<argument pos:start="267:82" pos:end="267:89"><expr pos:start="267:82" pos:end="267:89"><name pos:start="267:82" pos:end="267:89">video_fd</name></expr></argument>,<argument pos:start="267:91" pos:end="267:91"><expr pos:start="267:91" pos:end="267:91"><literal type="number" pos:start="267:91" pos:end="267:91">0</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <if_stmt pos:start="269:9" pos:end="281:9"><if pos:start="269:9" pos:end="281:9">if <condition pos:start="269:12" pos:end="269:47">(<expr pos:start="269:13" pos:end="269:46"><operator pos:start="269:13" pos:end="269:13">(</operator><name pos:start="269:14" pos:end="269:21">unsigned</name> <name pos:start="269:23" pos:end="269:26">char</name><operator pos:start="269:27" pos:end="269:27">*</operator><operator pos:start="269:28" pos:end="269:28">)</operator><operator pos:start="269:29" pos:end="269:29">-</operator><literal type="number" pos:start="269:30" pos:end="269:30">1</literal> <operator pos:start="269:32" pos:end="269:33">==</operator> <name pos:start="269:35" pos:end="269:46"><name pos:start="269:35" pos:end="269:35">s</name><operator pos:start="269:36" pos:end="269:37">-&gt;</operator><name pos:start="269:38" pos:end="269:46">video_buf</name></name></expr>)</condition> <block pos:start="269:49" pos:end="281:9">{<block_content pos:start="271:13" pos:end="279:13">

            <expr_stmt pos:start="271:13" pos:end="271:98"><expr pos:start="271:13" pos:end="271:97"><name pos:start="271:13" pos:end="271:24"><name pos:start="271:13" pos:end="271:13">s</name><operator pos:start="271:14" pos:end="271:15">-&gt;</operator><name pos:start="271:16" pos:end="271:24">video_buf</name></name> <operator pos:start="271:26" pos:end="271:26">=</operator> <call pos:start="271:28" pos:end="271:97"><name pos:start="271:28" pos:end="271:31">mmap</name><argument_list pos:start="271:32" pos:end="271:97">(<argument pos:start="271:33" pos:end="271:33"><expr pos:start="271:33" pos:end="271:33"><literal type="number" pos:start="271:33" pos:end="271:33">0</literal></expr></argument>,<argument pos:start="271:35" pos:end="271:52"><expr pos:start="271:35" pos:end="271:52"><name pos:start="271:35" pos:end="271:52"><name pos:start="271:35" pos:end="271:35">s</name><operator pos:start="271:36" pos:end="271:37">-&gt;</operator><name pos:start="271:38" pos:end="271:47">gb_buffers</name><operator pos:start="271:48" pos:end="271:48">.</operator><name pos:start="271:49" pos:end="271:52">size</name></name></expr></argument>,<argument pos:start="271:54" pos:end="271:73"><expr pos:start="271:54" pos:end="271:73"><name pos:start="271:54" pos:end="271:62">PROT_READ</name><operator pos:start="271:63" pos:end="271:63">|</operator><name pos:start="271:64" pos:end="271:73">PROT_WRITE</name></expr></argument>,<argument pos:start="271:75" pos:end="271:85"><expr pos:start="271:75" pos:end="271:85"><name pos:start="271:75" pos:end="271:85">MAP_PRIVATE</name></expr></argument>,<argument pos:start="271:87" pos:end="271:94"><expr pos:start="271:87" pos:end="271:94"><name pos:start="271:87" pos:end="271:94">video_fd</name></expr></argument>,<argument pos:start="271:96" pos:end="271:96"><expr pos:start="271:96" pos:end="271:96"><literal type="number" pos:start="271:96" pos:end="271:96">0</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

            <if_stmt pos:start="273:13" pos:end="279:13"><if pos:start="273:13" pos:end="279:13">if <condition pos:start="273:16" pos:end="273:51">(<expr pos:start="273:17" pos:end="273:50"><operator pos:start="273:17" pos:end="273:17">(</operator><name pos:start="273:18" pos:end="273:25">unsigned</name> <name pos:start="273:27" pos:end="273:30">char</name><operator pos:start="273:31" pos:end="273:31">*</operator><operator pos:start="273:32" pos:end="273:32">)</operator><operator pos:start="273:33" pos:end="273:33">-</operator><literal type="number" pos:start="273:34" pos:end="273:34">1</literal> <operator pos:start="273:36" pos:end="273:37">==</operator> <name pos:start="273:39" pos:end="273:50"><name pos:start="273:39" pos:end="273:39">s</name><operator pos:start="273:40" pos:end="273:41">-&gt;</operator><name pos:start="273:42" pos:end="273:50">video_buf</name></name></expr>)</condition> <block pos:start="273:53" pos:end="279:13">{<block_content pos:start="275:17" pos:end="277:26">

                <expr_stmt pos:start="275:17" pos:end="275:72"><expr pos:start="275:17" pos:end="275:71"><call pos:start="275:17" pos:end="275:71"><name pos:start="275:17" pos:end="275:22">av_log</name><argument_list pos:start="275:23" pos:end="275:71">(<argument pos:start="275:24" pos:end="275:25"><expr pos:start="275:24" pos:end="275:25"><name pos:start="275:24" pos:end="275:25">s1</name></expr></argument>, <argument pos:start="275:28" pos:end="275:39"><expr pos:start="275:28" pos:end="275:39"><name pos:start="275:28" pos:end="275:39">AV_LOG_ERROR</name></expr></argument>, <argument pos:start="275:42" pos:end="275:53"><expr pos:start="275:42" pos:end="275:53"><literal type="string" pos:start="275:42" pos:end="275:53">"mmap: %s\n"</literal></expr></argument>, <argument pos:start="275:56" pos:end="275:70"><expr pos:start="275:56" pos:end="275:70"><call pos:start="275:56" pos:end="275:70"><name pos:start="275:56" pos:end="275:63">strerror</name><argument_list pos:start="275:64" pos:end="275:70">(<argument pos:start="275:65" pos:end="275:69"><expr pos:start="275:65" pos:end="275:69"><name pos:start="275:65" pos:end="275:69">errno</name></expr></argument>)</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt>

                <goto pos:start="277:17" pos:end="277:26">goto <name pos:start="277:22" pos:end="277:25">fail</name>;</goto>

            </block_content>}</block></if></if_stmt>

        </block_content>}</block></if></if_stmt>

        <expr_stmt pos:start="283:9" pos:end="283:24"><expr pos:start="283:9" pos:end="283:23"><name pos:start="283:9" pos:end="283:19"><name pos:start="283:9" pos:end="283:9">s</name><operator pos:start="283:10" pos:end="283:11">-&gt;</operator><name pos:start="283:12" pos:end="283:19">gb_frame</name></name> <operator pos:start="283:21" pos:end="283:21">=</operator> <literal type="number" pos:start="283:23" pos:end="283:23">0</literal></expr>;</expr_stmt>

        <expr_stmt pos:start="285:9" pos:end="285:74"><expr pos:start="285:9" pos:end="285:73"><name pos:start="285:9" pos:end="285:21"><name pos:start="285:9" pos:end="285:9">s</name><operator pos:start="285:10" pos:end="285:11">-&gt;</operator><name pos:start="285:12" pos:end="285:21">time_frame</name></name> <operator pos:start="285:23" pos:end="285:23">=</operator> <call pos:start="285:25" pos:end="285:36"><name pos:start="285:25" pos:end="285:34">av_gettime</name><argument_list pos:start="285:35" pos:end="285:36">()</argument_list></call> <operator pos:start="285:38" pos:end="285:38">*</operator> <name pos:start="285:40" pos:end="285:52"><name pos:start="285:40" pos:end="285:40">s</name><operator pos:start="285:41" pos:end="285:42">-&gt;</operator><name pos:start="285:43" pos:end="285:52">frame_rate</name></name> <operator pos:start="285:54" pos:end="285:54">/</operator> <name pos:start="285:56" pos:end="285:73"><name pos:start="285:56" pos:end="285:56">s</name><operator pos:start="285:57" pos:end="285:58">-&gt;</operator><name pos:start="285:59" pos:end="285:73">frame_rate_base</name></name></expr>;</expr_stmt>



        <comment type="block" pos:start="289:9" pos:end="289:43">/* start to grab the first frame */</comment>

        <expr_stmt pos:start="291:9" pos:end="291:61"><expr pos:start="291:9" pos:end="291:60"><name pos:start="291:9" pos:end="291:23"><name pos:start="291:9" pos:end="291:9">s</name><operator pos:start="291:10" pos:end="291:11">-&gt;</operator><name pos:start="291:12" pos:end="291:17">gb_buf</name><operator pos:start="291:18" pos:end="291:18">.</operator><name pos:start="291:19" pos:end="291:23">frame</name></name> <operator pos:start="291:25" pos:end="291:25">=</operator> <name pos:start="291:27" pos:end="291:37"><name pos:start="291:27" pos:end="291:27">s</name><operator pos:start="291:28" pos:end="291:29">-&gt;</operator><name pos:start="291:30" pos:end="291:37">gb_frame</name></name> <operator pos:start="291:39" pos:end="291:39">%</operator> <name pos:start="291:41" pos:end="291:60"><name pos:start="291:41" pos:end="291:41">s</name><operator pos:start="291:42" pos:end="291:43">-&gt;</operator><name pos:start="291:44" pos:end="291:53">gb_buffers</name><operator pos:start="291:54" pos:end="291:54">.</operator><name pos:start="291:55" pos:end="291:60">frames</name></name></expr>;</expr_stmt>

        <expr_stmt pos:start="293:9" pos:end="293:34"><expr pos:start="293:9" pos:end="293:33"><name pos:start="293:9" pos:end="293:24"><name pos:start="293:9" pos:end="293:9">s</name><operator pos:start="293:10" pos:end="293:11">-&gt;</operator><name pos:start="293:12" pos:end="293:17">gb_buf</name><operator pos:start="293:18" pos:end="293:18">.</operator><name pos:start="293:19" pos:end="293:24">height</name></name> <operator pos:start="293:26" pos:end="293:26">=</operator> <name pos:start="293:28" pos:end="293:33">height</name></expr>;</expr_stmt>

        <expr_stmt pos:start="295:9" pos:end="295:32"><expr pos:start="295:9" pos:end="295:31"><name pos:start="295:9" pos:end="295:23"><name pos:start="295:9" pos:end="295:9">s</name><operator pos:start="295:10" pos:end="295:11">-&gt;</operator><name pos:start="295:12" pos:end="295:17">gb_buf</name><operator pos:start="295:18" pos:end="295:18">.</operator><name pos:start="295:19" pos:end="295:23">width</name></name> <operator pos:start="295:25" pos:end="295:25">=</operator> <name pos:start="295:27" pos:end="295:31">width</name></expr>;</expr_stmt>

        <expr_stmt pos:start="297:9" pos:end="297:40"><expr pos:start="297:9" pos:end="297:39"><name pos:start="297:9" pos:end="297:24"><name pos:start="297:9" pos:end="297:9">s</name><operator pos:start="297:10" pos:end="297:11">-&gt;</operator><name pos:start="297:12" pos:end="297:17">gb_buf</name><operator pos:start="297:18" pos:end="297:18">.</operator><name pos:start="297:19" pos:end="297:24">format</name></name> <operator pos:start="297:26" pos:end="297:26">=</operator> <name pos:start="297:28" pos:end="297:39"><name pos:start="297:28" pos:end="297:31">pict</name><operator pos:start="297:32" pos:end="297:32">.</operator><name pos:start="297:33" pos:end="297:39">palette</name></name></expr>;</expr_stmt>



        <expr_stmt pos:start="301:9" pos:end="301:58"><expr pos:start="301:9" pos:end="301:57"><name pos:start="301:9" pos:end="301:11">ret</name> <operator pos:start="301:13" pos:end="301:13">=</operator> <call pos:start="301:15" pos:end="301:57"><name pos:start="301:15" pos:end="301:19">ioctl</name><argument_list pos:start="301:20" pos:end="301:57">(<argument pos:start="301:21" pos:end="301:28"><expr pos:start="301:21" pos:end="301:28"><name pos:start="301:21" pos:end="301:28">video_fd</name></expr></argument>, <argument pos:start="301:31" pos:end="301:44"><expr pos:start="301:31" pos:end="301:44"><name pos:start="301:31" pos:end="301:44">VIDIOCMCAPTURE</name></expr></argument>, <argument pos:start="301:47" pos:end="301:56"><expr pos:start="301:47" pos:end="301:56"><operator pos:start="301:47" pos:end="301:47">&amp;</operator><name pos:start="301:48" pos:end="301:56"><name pos:start="301:48" pos:end="301:48">s</name><operator pos:start="301:49" pos:end="301:50">-&gt;</operator><name pos:start="301:51" pos:end="301:56">gb_buf</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <if_stmt pos:start="303:9" pos:end="319:9"><if pos:start="303:9" pos:end="319:9">if <condition pos:start="303:12" pos:end="303:20">(<expr pos:start="303:13" pos:end="303:19"><name pos:start="303:13" pos:end="303:15">ret</name> <operator pos:start="303:17" pos:end="303:17">&lt;</operator> <literal type="number" pos:start="303:19" pos:end="303:19">0</literal></expr>)</condition> <block pos:start="303:22" pos:end="319:9">{<block_content pos:start="305:13" pos:end="317:22">

            <if_stmt pos:start="305:13" pos:end="315:13"><if pos:start="305:13" pos:end="311:13">if <condition pos:start="305:16" pos:end="305:32">(<expr pos:start="305:17" pos:end="305:31"><name pos:start="305:17" pos:end="305:21">errno</name> <operator pos:start="305:23" pos:end="305:24">!=</operator> <name pos:start="305:26" pos:end="305:31">EAGAIN</name></expr>)</condition> <block pos:start="305:34" pos:end="311:13">{<block_content pos:start="307:13" pos:end="309:98">

            <label pos:start="307:13" pos:end="307:18"><name pos:start="307:13" pos:end="307:17">fail1</name>:</label>

                <expr_stmt pos:start="309:17" pos:end="309:98"><expr pos:start="309:17" pos:end="309:97"><call pos:start="309:17" pos:end="309:97"><name pos:start="309:17" pos:end="309:22">av_log</name><argument_list pos:start="309:23" pos:end="309:97">(<argument pos:start="309:24" pos:end="309:25"><expr pos:start="309:24" pos:end="309:25"><name pos:start="309:24" pos:end="309:25">s1</name></expr></argument>, <argument pos:start="309:28" pos:end="309:39"><expr pos:start="309:28" pos:end="309:39"><name pos:start="309:28" pos:end="309:39">AV_LOG_ERROR</name></expr></argument>, <argument pos:start="309:42" pos:end="309:96"><expr pos:start="309:42" pos:end="309:96"><literal type="string" pos:start="309:42" pos:end="309:96">"Fatal: grab device does not support suitable format\n"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

            </block_content>}</block></if> <else pos:start="311:15" pos:end="315:13">else <block pos:start="311:20" pos:end="315:13">{<block_content pos:start="313:17" pos:end="313:98">

                <expr_stmt pos:start="313:17" pos:end="313:98"><expr pos:start="313:17" pos:end="313:97"><call pos:start="313:17" pos:end="313:97"><name pos:start="313:17" pos:end="313:22">av_log</name><argument_list pos:start="313:23" pos:end="313:97">(<argument pos:start="313:24" pos:end="313:25"><expr pos:start="313:24" pos:end="313:25"><name pos:start="313:24" pos:end="313:25">s1</name></expr></argument>, <argument pos:start="313:28" pos:end="313:39"><expr pos:start="313:28" pos:end="313:39"><name pos:start="313:28" pos:end="313:39">AV_LOG_ERROR</name></expr></argument>,<argument pos:start="313:41" pos:end="313:96"><expr pos:start="313:41" pos:end="313:96"><literal type="string" pos:start="313:41" pos:end="313:96">"Fatal: grab device does not receive any video signal\n"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

            </block_content>}</block></else></if_stmt>

            <goto pos:start="317:13" pos:end="317:22">goto <name pos:start="317:18" pos:end="317:21">fail</name>;</goto>

        </block_content>}</block></if></if_stmt>

        <for pos:start="321:9" pos:end="327:9">for <control pos:start="321:13" pos:end="321:50">(<init pos:start="321:14" pos:end="321:19"><expr pos:start="321:14" pos:end="321:18"><name pos:start="321:14" pos:end="321:14">j</name> <operator pos:start="321:16" pos:end="321:16">=</operator> <literal type="number" pos:start="321:18" pos:end="321:18">1</literal></expr>;</init> <condition pos:start="321:21" pos:end="321:45"><expr pos:start="321:21" pos:end="321:44"><name pos:start="321:21" pos:end="321:21">j</name> <operator pos:start="321:23" pos:end="321:23">&lt;</operator> <name pos:start="321:25" pos:end="321:44"><name pos:start="321:25" pos:end="321:25">s</name><operator pos:start="321:26" pos:end="321:27">-&gt;</operator><name pos:start="321:28" pos:end="321:37">gb_buffers</name><operator pos:start="321:38" pos:end="321:38">.</operator><name pos:start="321:39" pos:end="321:44">frames</name></name></expr>;</condition> <incr pos:start="321:47" pos:end="321:49"><expr pos:start="321:47" pos:end="321:49"><name pos:start="321:47" pos:end="321:47">j</name><operator pos:start="321:48" pos:end="321:49">++</operator></expr></incr>)</control> <block pos:start="321:52" pos:end="327:9">{<block_content pos:start="323:11" pos:end="325:54">

          <expr_stmt pos:start="323:11" pos:end="323:30"><expr pos:start="323:11" pos:end="323:29"><name pos:start="323:11" pos:end="323:25"><name pos:start="323:11" pos:end="323:11">s</name><operator pos:start="323:12" pos:end="323:13">-&gt;</operator><name pos:start="323:14" pos:end="323:19">gb_buf</name><operator pos:start="323:20" pos:end="323:20">.</operator><name pos:start="323:21" pos:end="323:25">frame</name></name> <operator pos:start="323:27" pos:end="323:27">=</operator> <name pos:start="323:29" pos:end="323:29">j</name></expr>;</expr_stmt>

          <expr_stmt pos:start="325:11" pos:end="325:54"><expr pos:start="325:11" pos:end="325:53"><call pos:start="325:11" pos:end="325:53"><name pos:start="325:11" pos:end="325:15">ioctl</name><argument_list pos:start="325:16" pos:end="325:53">(<argument pos:start="325:17" pos:end="325:24"><expr pos:start="325:17" pos:end="325:24"><name pos:start="325:17" pos:end="325:24">video_fd</name></expr></argument>, <argument pos:start="325:27" pos:end="325:40"><expr pos:start="325:27" pos:end="325:40"><name pos:start="325:27" pos:end="325:40">VIDIOCMCAPTURE</name></expr></argument>, <argument pos:start="325:43" pos:end="325:52"><expr pos:start="325:43" pos:end="325:52"><operator pos:start="325:43" pos:end="325:43">&amp;</operator><name pos:start="325:44" pos:end="325:52"><name pos:start="325:44" pos:end="325:44">s</name><operator pos:start="325:45" pos:end="325:46">-&gt;</operator><name pos:start="325:47" pos:end="325:52">gb_buf</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        </block_content>}</block></for>

        <expr_stmt pos:start="329:9" pos:end="329:43"><expr pos:start="329:9" pos:end="329:42"><name pos:start="329:9" pos:end="329:23"><name pos:start="329:9" pos:end="329:9">s</name><operator pos:start="329:10" pos:end="329:11">-&gt;</operator><name pos:start="329:12" pos:end="329:23">frame_format</name></name> <operator pos:start="329:25" pos:end="329:25">=</operator> <name pos:start="329:27" pos:end="329:42"><name pos:start="329:27" pos:end="329:27">s</name><operator pos:start="329:28" pos:end="329:29">-&gt;</operator><name pos:start="329:30" pos:end="329:35">gb_buf</name><operator pos:start="329:36" pos:end="329:36">.</operator><name pos:start="329:37" pos:end="329:42">format</name></name></expr>;</expr_stmt>

        <expr_stmt pos:start="331:9" pos:end="331:24"><expr pos:start="331:9" pos:end="331:23"><name pos:start="331:9" pos:end="331:19"><name pos:start="331:9" pos:end="331:9">s</name><operator pos:start="331:10" pos:end="331:11">-&gt;</operator><name pos:start="331:12" pos:end="331:19">use_mmap</name></name> <operator pos:start="331:21" pos:end="331:21">=</operator> <literal type="number" pos:start="331:23" pos:end="331:23">1</literal></expr>;</expr_stmt>

    </block_content>}</block></else></if_stmt>



    <for pos:start="337:5" pos:end="349:5">for <control pos:start="337:9" pos:end="337:37">(<init pos:start="337:10" pos:end="337:15"><expr pos:start="337:10" pos:end="337:14"><name pos:start="337:10" pos:end="337:10">j</name> <operator pos:start="337:12" pos:end="337:12">=</operator> <literal type="number" pos:start="337:14" pos:end="337:14">0</literal></expr>;</init> <condition pos:start="337:17" pos:end="337:32"><expr pos:start="337:17" pos:end="337:31"><name pos:start="337:17" pos:end="337:17">j</name> <operator pos:start="337:19" pos:end="337:19">&lt;</operator> <name pos:start="337:21" pos:end="337:31">vformat_num</name></expr>;</condition> <incr pos:start="337:34" pos:end="337:36"><expr pos:start="337:34" pos:end="337:36"><name pos:start="337:34" pos:end="337:34">j</name><operator pos:start="337:35" pos:end="337:36">++</operator></expr></incr>)</control> <block pos:start="337:39" pos:end="349:5">{<block_content pos:start="339:9" pos:end="347:9">

        <if_stmt pos:start="339:9" pos:end="347:9"><if pos:start="339:9" pos:end="347:9">if <condition pos:start="339:12" pos:end="339:56">(<expr pos:start="339:13" pos:end="339:55"><name pos:start="339:13" pos:end="339:27"><name pos:start="339:13" pos:end="339:13">s</name><operator pos:start="339:14" pos:end="339:15">-&gt;</operator><name pos:start="339:16" pos:end="339:27">frame_format</name></name> <operator pos:start="339:29" pos:end="339:30">==</operator> <name pos:start="339:32" pos:end="339:47"><name pos:start="339:32" pos:end="339:44">video_formats</name><index pos:start="339:45" pos:end="339:47">[<expr pos:start="339:46" pos:end="339:46"><name pos:start="339:46" pos:end="339:46">j</name></expr>]</index></name><operator pos:start="339:48" pos:end="339:48">.</operator><name pos:start="339:49" pos:end="339:55">palette</name></expr>)</condition> <block pos:start="339:58" pos:end="347:9">{<block_content pos:start="341:13" pos:end="345:18">

            <expr_stmt pos:start="341:13" pos:end="341:69"><expr pos:start="341:13" pos:end="341:68"><name pos:start="341:13" pos:end="341:22">frame_size</name> <operator pos:start="341:24" pos:end="341:24">=</operator> <name pos:start="341:26" pos:end="341:30">width</name> <operator pos:start="341:32" pos:end="341:32">*</operator> <name pos:start="341:34" pos:end="341:39">height</name> <operator pos:start="341:41" pos:end="341:41">*</operator> <name pos:start="341:43" pos:end="341:58"><name pos:start="341:43" pos:end="341:55">video_formats</name><index pos:start="341:56" pos:end="341:58">[<expr pos:start="341:57" pos:end="341:57"><name pos:start="341:57" pos:end="341:57">j</name></expr>]</index></name><operator pos:start="341:59" pos:end="341:59">.</operator><name pos:start="341:60" pos:end="341:64">depth</name> <operator pos:start="341:66" pos:end="341:66">/</operator> <literal type="number" pos:start="341:68" pos:end="341:68">8</literal></expr>;</expr_stmt>

            <expr_stmt pos:start="343:13" pos:end="343:58"><expr pos:start="343:13" pos:end="343:57"><name pos:start="343:13" pos:end="343:30"><name pos:start="343:13" pos:end="343:14">st</name><operator pos:start="343:15" pos:end="343:16">-&gt;</operator><name pos:start="343:17" pos:end="343:21">codec</name><operator pos:start="343:22" pos:end="343:23">-&gt;</operator><name pos:start="343:24" pos:end="343:30">pix_fmt</name></name> <operator pos:start="343:32" pos:end="343:32">=</operator> <name pos:start="343:34" pos:end="343:49"><name pos:start="343:34" pos:end="343:46">video_formats</name><index pos:start="343:47" pos:end="343:49">[<expr pos:start="343:48" pos:end="343:48"><name pos:start="343:48" pos:end="343:48">j</name></expr>]</index></name><operator pos:start="343:50" pos:end="343:50">.</operator><name pos:start="343:51" pos:end="343:57">pix_fmt</name></expr>;</expr_stmt>

            <break pos:start="345:13" pos:end="345:18">break;</break>

        </block_content>}</block></if></if_stmt>

    </block_content>}</block></for>



    <if_stmt pos:start="353:5" pos:end="355:18"><if pos:start="353:5" pos:end="355:18">if <condition pos:start="353:8" pos:end="353:25">(<expr pos:start="353:9" pos:end="353:24"><name pos:start="353:9" pos:end="353:9">j</name> <operator pos:start="353:11" pos:end="353:12">&gt;=</operator> <name pos:start="353:14" pos:end="353:24">vformat_num</name></expr>)</condition><block type="pseudo" pos:start="355:9" pos:end="355:18"><block_content pos:start="355:9" pos:end="355:18">

        <goto pos:start="355:9" pos:end="355:18">goto <name pos:start="355:14" pos:end="355:17">fail</name>;</goto></block_content></block></if></if_stmt>



    <expr_stmt pos:start="359:5" pos:end="359:21"><expr pos:start="359:5" pos:end="359:20"><name pos:start="359:5" pos:end="359:9"><name pos:start="359:5" pos:end="359:5">s</name><operator pos:start="359:6" pos:end="359:7">-&gt;</operator><name pos:start="359:8" pos:end="359:9">fd</name></name> <operator pos:start="359:11" pos:end="359:11">=</operator> <name pos:start="359:13" pos:end="359:20">video_fd</name></expr>;</expr_stmt>

    <expr_stmt pos:start="361:5" pos:end="361:31"><expr pos:start="361:5" pos:end="361:30"><name pos:start="361:5" pos:end="361:17"><name pos:start="361:5" pos:end="361:5">s</name><operator pos:start="361:6" pos:end="361:7">-&gt;</operator><name pos:start="361:8" pos:end="361:17">frame_size</name></name> <operator pos:start="361:19" pos:end="361:19">=</operator> <name pos:start="361:21" pos:end="361:30">frame_size</name></expr>;</expr_stmt>



    <expr_stmt pos:start="365:5" pos:end="365:45"><expr pos:start="365:5" pos:end="365:44"><name pos:start="365:5" pos:end="365:25"><name pos:start="365:5" pos:end="365:6">st</name><operator pos:start="365:7" pos:end="365:8">-&gt;</operator><name pos:start="365:9" pos:end="365:13">codec</name><operator pos:start="365:14" pos:end="365:15">-&gt;</operator><name pos:start="365:16" pos:end="365:25">codec_type</name></name> <operator pos:start="365:27" pos:end="365:27">=</operator> <name pos:start="365:29" pos:end="365:44">CODEC_TYPE_VIDEO</name></expr>;</expr_stmt>

    <expr_stmt pos:start="367:5" pos:end="367:44"><expr pos:start="367:5" pos:end="367:43"><name pos:start="367:5" pos:end="367:23"><name pos:start="367:5" pos:end="367:6">st</name><operator pos:start="367:7" pos:end="367:8">-&gt;</operator><name pos:start="367:9" pos:end="367:13">codec</name><operator pos:start="367:14" pos:end="367:15">-&gt;</operator><name pos:start="367:16" pos:end="367:23">codec_id</name></name> <operator pos:start="367:25" pos:end="367:25">=</operator> <name pos:start="367:27" pos:end="367:43">CODEC_ID_RAWVIDEO</name></expr>;</expr_stmt>

    <expr_stmt pos:start="369:5" pos:end="369:29"><expr pos:start="369:5" pos:end="369:28"><name pos:start="369:5" pos:end="369:20"><name pos:start="369:5" pos:end="369:6">st</name><operator pos:start="369:7" pos:end="369:8">-&gt;</operator><name pos:start="369:9" pos:end="369:13">codec</name><operator pos:start="369:14" pos:end="369:15">-&gt;</operator><name pos:start="369:16" pos:end="369:20">width</name></name> <operator pos:start="369:22" pos:end="369:22">=</operator> <name pos:start="369:24" pos:end="369:28">width</name></expr>;</expr_stmt>

    <expr_stmt pos:start="371:5" pos:end="371:31"><expr pos:start="371:5" pos:end="371:30"><name pos:start="371:5" pos:end="371:21"><name pos:start="371:5" pos:end="371:6">st</name><operator pos:start="371:7" pos:end="371:8">-&gt;</operator><name pos:start="371:9" pos:end="371:13">codec</name><operator pos:start="371:14" pos:end="371:15">-&gt;</operator><name pos:start="371:16" pos:end="371:21">height</name></name> <operator pos:start="371:23" pos:end="371:23">=</operator> <name pos:start="371:25" pos:end="371:30">height</name></expr>;</expr_stmt>

    <expr_stmt pos:start="373:5" pos:end="373:47"><expr pos:start="373:5" pos:end="373:46"><name pos:start="373:5" pos:end="373:28"><name pos:start="373:5" pos:end="373:6">st</name><operator pos:start="373:7" pos:end="373:8">-&gt;</operator><name pos:start="373:9" pos:end="373:13">codec</name><operator pos:start="373:14" pos:end="373:15">-&gt;</operator><name pos:start="373:16" pos:end="373:24">time_base</name><operator pos:start="373:25" pos:end="373:25">.</operator><name pos:start="373:26" pos:end="373:28">den</name></name>      <operator pos:start="373:35" pos:end="373:35">=</operator> <name pos:start="373:37" pos:end="373:46">frame_rate</name></expr>;</expr_stmt>

    <expr_stmt pos:start="375:5" pos:end="375:47"><expr pos:start="375:5" pos:end="375:46"><name pos:start="375:5" pos:end="375:28"><name pos:start="375:5" pos:end="375:6">st</name><operator pos:start="375:7" pos:end="375:8">-&gt;</operator><name pos:start="375:9" pos:end="375:13">codec</name><operator pos:start="375:14" pos:end="375:15">-&gt;</operator><name pos:start="375:16" pos:end="375:24">time_base</name><operator pos:start="375:25" pos:end="375:25">.</operator><name pos:start="375:26" pos:end="375:28">num</name></name> <operator pos:start="375:30" pos:end="375:30">=</operator> <name pos:start="375:32" pos:end="375:46">frame_rate_base</name></expr>;</expr_stmt>

    <expr_stmt pos:start="377:5" pos:end="377:74"><expr pos:start="377:5" pos:end="377:73"><name pos:start="377:5" pos:end="377:23"><name pos:start="377:5" pos:end="377:6">st</name><operator pos:start="377:7" pos:end="377:8">-&gt;</operator><name pos:start="377:9" pos:end="377:13">codec</name><operator pos:start="377:14" pos:end="377:15">-&gt;</operator><name pos:start="377:16" pos:end="377:23">bit_rate</name></name> <operator pos:start="377:25" pos:end="377:25">=</operator> <name pos:start="377:27" pos:end="377:36">frame_size</name> <operator pos:start="377:38" pos:end="377:38">*</operator> <literal type="number" pos:start="377:40" pos:end="377:40">1</literal><operator pos:start="377:41" pos:end="377:41">/</operator><call pos:start="377:42" pos:end="377:69"><name pos:start="377:42" pos:end="377:47">av_q2d</name><argument_list pos:start="377:48" pos:end="377:69">(<argument pos:start="377:49" pos:end="377:68"><expr pos:start="377:49" pos:end="377:68"><name pos:start="377:49" pos:end="377:68"><name pos:start="377:49" pos:end="377:50">st</name><operator pos:start="377:51" pos:end="377:52">-&gt;</operator><name pos:start="377:53" pos:end="377:57">codec</name><operator pos:start="377:58" pos:end="377:59">-&gt;</operator><name pos:start="377:60" pos:end="377:68">time_base</name></name></expr></argument>)</argument_list></call> <operator pos:start="377:71" pos:end="377:71">*</operator> <literal type="number" pos:start="377:73" pos:end="377:73">8</literal></expr>;</expr_stmt>



    <return pos:start="381:5" pos:end="381:13">return <expr pos:start="381:12" pos:end="381:12"><literal type="number" pos:start="381:12" pos:end="381:12">0</literal></expr>;</return>

 <label pos:start="383:2" pos:end="383:6"><name pos:start="383:2" pos:end="383:5">fail</name>:</label>

    <if_stmt pos:start="385:5" pos:end="387:24"><if pos:start="385:5" pos:end="387:24">if <condition pos:start="385:8" pos:end="385:22">(<expr pos:start="385:9" pos:end="385:21"><name pos:start="385:9" pos:end="385:16">video_fd</name> <operator pos:start="385:18" pos:end="385:19">&gt;=</operator> <literal type="number" pos:start="385:21" pos:end="385:21">0</literal></expr>)</condition><block type="pseudo" pos:start="387:9" pos:end="387:24"><block_content pos:start="387:9" pos:end="387:24">

        <expr_stmt pos:start="387:9" pos:end="387:24"><expr pos:start="387:9" pos:end="387:23"><call pos:start="387:9" pos:end="387:23"><name pos:start="387:9" pos:end="387:13">close</name><argument_list pos:start="387:14" pos:end="387:23">(<argument pos:start="387:15" pos:end="387:22"><expr pos:start="387:15" pos:end="387:22"><name pos:start="387:15" pos:end="387:22">video_fd</name></expr></argument>)</argument_list></call></expr>;</expr_stmt></block_content></block></if></if_stmt>

    <expr_stmt pos:start="389:5" pos:end="389:16"><expr pos:start="389:5" pos:end="389:15"><call pos:start="389:5" pos:end="389:15"><name pos:start="389:5" pos:end="389:11">av_free</name><argument_list pos:start="389:12" pos:end="389:15">(<argument pos:start="389:13" pos:end="389:14"><expr pos:start="389:13" pos:end="389:14"><name pos:start="389:13" pos:end="389:14">st</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    <return pos:start="391:5" pos:end="391:24">return <expr pos:start="391:12" pos:end="391:23"><call pos:start="391:12" pos:end="391:23"><name pos:start="391:12" pos:end="391:18">AVERROR</name><argument_list pos:start="391:19" pos:end="391:23">(<argument pos:start="391:20" pos:end="391:22"><expr pos:start="391:20" pos:end="391:22"><name pos:start="391:20" pos:end="391:22">EIO</name></expr></argument>)</argument_list></call></expr>;</return>

</block_content>}</block></function>
</unit>
