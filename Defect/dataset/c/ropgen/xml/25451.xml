<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<unit xmlns="http://www.srcML.org/srcML/src" xmlns:pos="http://www.srcML.org/srcML/position" revision="1.0.0" language="C" filename="dataset/ropgen/aug/0/25451.c" pos:tabs="8"><function pos:start="1:1" pos:end="253:1"><type pos:start="1:1" pos:end="1:3"><name pos:start="1:1" pos:end="1:3">int</name></type> <name pos:start="1:5" pos:end="1:19">MPV_frame_start</name><parameter_list pos:start="1:20" pos:end="1:61">(<parameter pos:start="1:21" pos:end="1:37"><decl pos:start="1:21" pos:end="1:37"><type pos:start="1:21" pos:end="1:37"><name pos:start="1:21" pos:end="1:34">MpegEncContext</name> <modifier pos:start="1:36" pos:end="1:36">*</modifier></type><name pos:start="1:37" pos:end="1:37">s</name></decl></parameter>, <parameter pos:start="1:40" pos:end="1:60"><decl pos:start="1:40" pos:end="1:60"><type pos:start="1:40" pos:end="1:60"><name pos:start="1:40" pos:end="1:53">AVCodecContext</name> <modifier pos:start="1:55" pos:end="1:55">*</modifier></type><name pos:start="1:56" pos:end="1:60">avctx</name></decl></parameter>)</parameter_list>

<block pos:start="3:1" pos:end="253:1">{<block_content pos:start="5:5" pos:end="251:13">

    <decl_stmt pos:start="5:5" pos:end="5:10"><decl pos:start="5:5" pos:end="5:9"><type pos:start="5:5" pos:end="5:7"><name pos:start="5:5" pos:end="5:7">int</name></type> <name pos:start="5:9" pos:end="5:9">i</name></decl>;</decl_stmt>

    <decl_stmt pos:start="7:5" pos:end="7:17"><decl pos:start="7:5" pos:end="7:16"><type pos:start="7:5" pos:end="7:13"><name pos:start="7:5" pos:end="7:11">Picture</name> <modifier pos:start="7:13" pos:end="7:13">*</modifier></type><name pos:start="7:14" pos:end="7:16">pic</name></decl>;</decl_stmt>

    <expr_stmt pos:start="9:5" pos:end="9:22"><expr pos:start="9:5" pos:end="9:21"><name pos:start="9:5" pos:end="9:17"><name pos:start="9:5" pos:end="9:5">s</name><operator pos:start="9:6" pos:end="9:7">-&gt;</operator><name pos:start="9:8" pos:end="9:17">mb_skipped</name></name> <operator pos:start="9:19" pos:end="9:19">=</operator> <literal type="number" pos:start="9:21" pos:end="9:21">0</literal></expr>;</expr_stmt>



    <expr_stmt pos:start="13:5" pos:end="13:99"><expr pos:start="13:5" pos:end="13:98"><call pos:start="13:5" pos:end="13:98"><name pos:start="13:5" pos:end="13:10">assert</name><argument_list pos:start="13:11" pos:end="13:98">(<argument pos:start="13:12" pos:end="13:97"><expr pos:start="13:12" pos:end="13:97"><name pos:start="13:12" pos:end="13:30"><name pos:start="13:12" pos:end="13:12">s</name><operator pos:start="13:13" pos:end="13:14">-&gt;</operator><name pos:start="13:15" pos:end="13:30">last_picture_ptr</name></name><operator pos:start="13:31" pos:end="13:32">==</operator><name pos:start="13:33" pos:end="13:36">NULL</name> <operator pos:start="13:38" pos:end="13:39">||</operator> <name pos:start="13:41" pos:end="13:53"><name pos:start="13:41" pos:end="13:41">s</name><operator pos:start="13:42" pos:end="13:43">-&gt;</operator><name pos:start="13:44" pos:end="13:53">out_format</name></name> <operator pos:start="13:55" pos:end="13:56">!=</operator> <name pos:start="13:58" pos:end="13:65">FMT_H264</name> <operator pos:start="13:67" pos:end="13:68">||</operator> <name pos:start="13:70" pos:end="13:80"><name pos:start="13:70" pos:end="13:70">s</name><operator pos:start="13:71" pos:end="13:72">-&gt;</operator><name pos:start="13:73" pos:end="13:80">codec_id</name></name> <operator pos:start="13:82" pos:end="13:83">==</operator> <name pos:start="13:85" pos:end="13:97">CODEC_ID_SVQ3</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>



    <comment type="block" pos:start="17:5" pos:end="17:33">/* mark&amp;release old frames */</comment>

    <if_stmt pos:start="19:5" pos:end="49:5"><if pos:start="19:5" pos:end="49:5">if <condition pos:start="19:8" pos:end="19:135">(<expr pos:start="19:9" pos:end="19:134"><name pos:start="19:9" pos:end="19:20"><name pos:start="19:9" pos:end="19:9">s</name><operator pos:start="19:10" pos:end="19:11">-&gt;</operator><name pos:start="19:12" pos:end="19:20">pict_type</name></name> <operator pos:start="19:22" pos:end="19:23">!=</operator> <name pos:start="19:25" pos:end="19:33">FF_B_TYPE</name> <operator pos:start="19:35" pos:end="19:36">&amp;&amp;</operator> <name pos:start="19:38" pos:end="19:56"><name pos:start="19:38" pos:end="19:38">s</name><operator pos:start="19:39" pos:end="19:40">-&gt;</operator><name pos:start="19:41" pos:end="19:56">last_picture_ptr</name></name> <operator pos:start="19:58" pos:end="19:59">&amp;&amp;</operator> <name pos:start="19:61" pos:end="19:79"><name pos:start="19:61" pos:end="19:61">s</name><operator pos:start="19:62" pos:end="19:63">-&gt;</operator><name pos:start="19:64" pos:end="19:79">last_picture_ptr</name></name> <operator pos:start="19:81" pos:end="19:82">!=</operator> <name pos:start="19:84" pos:end="19:102"><name pos:start="19:84" pos:end="19:84">s</name><operator pos:start="19:85" pos:end="19:86">-&gt;</operator><name pos:start="19:87" pos:end="19:102">next_picture_ptr</name></name> <operator pos:start="19:104" pos:end="19:105">&amp;&amp;</operator> <name pos:start="19:107" pos:end="19:134"><name pos:start="19:107" pos:end="19:107">s</name><operator pos:start="19:108" pos:end="19:109">-&gt;</operator><name pos:start="19:110" pos:end="19:125">last_picture_ptr</name><operator pos:start="19:126" pos:end="19:127">-&gt;</operator><name pos:start="19:128" pos:end="19:131">data</name><index pos:start="19:132" pos:end="19:134">[<expr pos:start="19:133" pos:end="19:133"><literal type="number" pos:start="19:133" pos:end="19:133">0</literal></expr>]</index></name></expr>)</condition> <block pos:start="19:137" pos:end="49:5">{<block_content pos:start="21:7" pos:end="47:7">

      <if_stmt pos:start="21:7" pos:end="47:7"><if pos:start="21:7" pos:end="47:7">if<condition pos:start="21:9" pos:end="21:67">(<expr pos:start="21:10" pos:end="21:66"><name pos:start="21:10" pos:end="21:22"><name pos:start="21:10" pos:end="21:10">s</name><operator pos:start="21:11" pos:end="21:12">-&gt;</operator><name pos:start="21:13" pos:end="21:22">out_format</name></name> <operator pos:start="21:24" pos:end="21:25">!=</operator> <name pos:start="21:27" pos:end="21:34">FMT_H264</name> <operator pos:start="21:36" pos:end="21:37">||</operator> <name pos:start="21:39" pos:end="21:49"><name pos:start="21:39" pos:end="21:39">s</name><operator pos:start="21:40" pos:end="21:41">-&gt;</operator><name pos:start="21:42" pos:end="21:49">codec_id</name></name> <operator pos:start="21:51" pos:end="21:52">==</operator> <name pos:start="21:54" pos:end="21:66">CODEC_ID_SVQ3</name></expr>)</condition><block pos:start="21:68" pos:end="47:7">{<block_content pos:start="23:11" pos:end="45:9">

          <expr_stmt pos:start="23:11" pos:end="23:52"><expr pos:start="23:11" pos:end="23:51"><call pos:start="23:11" pos:end="23:51"><name pos:start="23:11" pos:end="23:27">free_frame_buffer</name><argument_list pos:start="23:28" pos:end="23:51">(<argument pos:start="23:29" pos:end="23:29"><expr pos:start="23:29" pos:end="23:29"><name pos:start="23:29" pos:end="23:29">s</name></expr></argument>, <argument pos:start="23:32" pos:end="23:50"><expr pos:start="23:32" pos:end="23:50"><name pos:start="23:32" pos:end="23:50"><name pos:start="23:32" pos:end="23:32">s</name><operator pos:start="23:33" pos:end="23:34">-&gt;</operator><name pos:start="23:35" pos:end="23:50">last_picture_ptr</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>



        <comment type="block" pos:start="27:9" pos:end="27:40">/* release forgotten pictures */</comment>

        <comment type="block" pos:start="29:9" pos:end="29:30">/* if(mpeg124/h263) */</comment>

        <if_stmt pos:start="31:9" pos:end="45:9"><if pos:start="31:9" pos:end="45:9">if<condition pos:start="31:11" pos:end="31:24">(<expr pos:start="31:12" pos:end="31:23"><operator pos:start="31:12" pos:end="31:12">!</operator><name pos:start="31:13" pos:end="31:23"><name pos:start="31:13" pos:end="31:13">s</name><operator pos:start="31:14" pos:end="31:15">-&gt;</operator><name pos:start="31:16" pos:end="31:23">encoding</name></name></expr>)</condition><block pos:start="31:25" pos:end="45:9">{<block_content pos:start="33:13" pos:end="43:13">

            <for pos:start="33:13" pos:end="43:13">for<control pos:start="33:16" pos:end="33:46">(<init pos:start="33:17" pos:end="33:20"><expr pos:start="33:17" pos:end="33:19"><name pos:start="33:17" pos:end="33:17">i</name><operator pos:start="33:18" pos:end="33:18">=</operator><literal type="number" pos:start="33:19" pos:end="33:19">0</literal></expr>;</init> <condition pos:start="33:22" pos:end="33:41"><expr pos:start="33:22" pos:end="33:40"><name pos:start="33:22" pos:end="33:22">i</name><operator pos:start="33:23" pos:end="33:23">&lt;</operator><name pos:start="33:24" pos:end="33:40">MAX_PICTURE_COUNT</name></expr>;</condition> <incr pos:start="33:43" pos:end="33:45"><expr pos:start="33:43" pos:end="33:45"><name pos:start="33:43" pos:end="33:43">i</name><operator pos:start="33:44" pos:end="33:45">++</operator></expr></incr>)</control><block pos:start="33:47" pos:end="43:13">{<block_content pos:start="35:17" pos:end="41:17">

                <if_stmt pos:start="35:17" pos:end="41:17"><if pos:start="35:17" pos:end="41:17">if<condition pos:start="35:19" pos:end="35:109">(<expr pos:start="35:20" pos:end="35:108"><name pos:start="35:20" pos:end="35:32"><name pos:start="35:20" pos:end="35:20">s</name><operator pos:start="35:21" pos:end="35:22">-&gt;</operator><name pos:start="35:23" pos:end="35:29">picture</name><index pos:start="35:30" pos:end="35:32">[<expr pos:start="35:31" pos:end="35:31"><name pos:start="35:31" pos:end="35:31">i</name></expr>]</index></name><operator pos:start="35:33" pos:end="35:33">.</operator><name pos:start="35:34" pos:end="35:40"><name pos:start="35:34" pos:end="35:37">data</name><index pos:start="35:38" pos:end="35:40">[<expr pos:start="35:39" pos:end="35:39"><literal type="number" pos:start="35:39" pos:end="35:39">0</literal></expr>]</index></name> <operator pos:start="35:42" pos:end="35:43">&amp;&amp;</operator> <operator pos:start="35:45" pos:end="35:45">&amp;</operator><name pos:start="35:46" pos:end="35:58"><name pos:start="35:46" pos:end="35:46">s</name><operator pos:start="35:47" pos:end="35:48">-&gt;</operator><name pos:start="35:49" pos:end="35:55">picture</name><index pos:start="35:56" pos:end="35:58">[<expr pos:start="35:57" pos:end="35:57"><name pos:start="35:57" pos:end="35:57">i</name></expr>]</index></name> <operator pos:start="35:60" pos:end="35:61">!=</operator> <name pos:start="35:63" pos:end="35:81"><name pos:start="35:63" pos:end="35:63">s</name><operator pos:start="35:64" pos:end="35:65">-&gt;</operator><name pos:start="35:66" pos:end="35:81">next_picture_ptr</name></name> <operator pos:start="35:83" pos:end="35:84">&amp;&amp;</operator> <name pos:start="35:86" pos:end="35:98"><name pos:start="35:86" pos:end="35:86">s</name><operator pos:start="35:87" pos:end="35:88">-&gt;</operator><name pos:start="35:89" pos:end="35:95">picture</name><index pos:start="35:96" pos:end="35:98">[<expr pos:start="35:97" pos:end="35:97"><name pos:start="35:97" pos:end="35:97">i</name></expr>]</index></name><operator pos:start="35:99" pos:end="35:99">.</operator><name pos:start="35:100" pos:end="35:108">reference</name></expr>)</condition><block pos:start="35:110" pos:end="41:17">{<block_content pos:start="37:21" pos:end="39:57">

                    <expr_stmt pos:start="37:21" pos:end="37:78"><expr pos:start="37:21" pos:end="37:77"><call pos:start="37:21" pos:end="37:77"><name pos:start="37:21" pos:end="37:26">av_log</name><argument_list pos:start="37:27" pos:end="37:77">(<argument pos:start="37:28" pos:end="37:32"><expr pos:start="37:28" pos:end="37:32"><name pos:start="37:28" pos:end="37:32">avctx</name></expr></argument>, <argument pos:start="37:35" pos:end="37:46"><expr pos:start="37:35" pos:end="37:46"><name pos:start="37:35" pos:end="37:46">AV_LOG_ERROR</name></expr></argument>, <argument pos:start="37:49" pos:end="37:76"><expr pos:start="37:49" pos:end="37:76"><literal type="string" pos:start="37:49" pos:end="37:76">"releasing zombie picture\n"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

                    <expr_stmt pos:start="39:21" pos:end="39:57"><expr pos:start="39:21" pos:end="39:56"><call pos:start="39:21" pos:end="39:56"><name pos:start="39:21" pos:end="39:37">free_frame_buffer</name><argument_list pos:start="39:38" pos:end="39:56">(<argument pos:start="39:39" pos:end="39:39"><expr pos:start="39:39" pos:end="39:39"><name pos:start="39:39" pos:end="39:39">s</name></expr></argument>, <argument pos:start="39:42" pos:end="39:55"><expr pos:start="39:42" pos:end="39:55"><operator pos:start="39:42" pos:end="39:42">&amp;</operator><name pos:start="39:43" pos:end="39:55"><name pos:start="39:43" pos:end="39:43">s</name><operator pos:start="39:44" pos:end="39:45">-&gt;</operator><name pos:start="39:46" pos:end="39:52">picture</name><index pos:start="39:53" pos:end="39:55">[<expr pos:start="39:54" pos:end="39:54"><name pos:start="39:54" pos:end="39:54">i</name></expr>]</index></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

                </block_content>}</block></if></if_stmt>

            </block_content>}</block></for>

        </block_content>}</block></if></if_stmt>

      </block_content>}</block></if></if_stmt>

    </block_content>}</block></if></if_stmt>

<label pos:start="51:1" pos:end="51:6"><name pos:start="51:1" pos:end="51:5">alloc</name>:</label>

    <if_stmt pos:start="53:5" pos:end="115:5"><if pos:start="53:5" pos:end="115:5">if<condition pos:start="53:7" pos:end="53:20">(<expr pos:start="53:8" pos:end="53:19"><operator pos:start="53:8" pos:end="53:8">!</operator><name pos:start="53:9" pos:end="53:19"><name pos:start="53:9" pos:end="53:9">s</name><operator pos:start="53:10" pos:end="53:11">-&gt;</operator><name pos:start="53:12" pos:end="53:19">encoding</name></name></expr>)</condition><block pos:start="53:21" pos:end="115:5">{<block_content pos:start="57:9" pos:end="113:100">

        <comment type="block" pos:start="55:9" pos:end="55:42">/* release non reference frames */</comment>

        <for pos:start="57:9" pos:end="65:9">for<control pos:start="57:12" pos:end="57:42">(<init pos:start="57:13" pos:end="57:16"><expr pos:start="57:13" pos:end="57:15"><name pos:start="57:13" pos:end="57:13">i</name><operator pos:start="57:14" pos:end="57:14">=</operator><literal type="number" pos:start="57:15" pos:end="57:15">0</literal></expr>;</init> <condition pos:start="57:18" pos:end="57:37"><expr pos:start="57:18" pos:end="57:36"><name pos:start="57:18" pos:end="57:18">i</name><operator pos:start="57:19" pos:end="57:19">&lt;</operator><name pos:start="57:20" pos:end="57:36">MAX_PICTURE_COUNT</name></expr>;</condition> <incr pos:start="57:39" pos:end="57:41"><expr pos:start="57:39" pos:end="57:41"><name pos:start="57:39" pos:end="57:39">i</name><operator pos:start="57:40" pos:end="57:41">++</operator></expr></incr>)</control><block pos:start="57:43" pos:end="65:9">{<block_content pos:start="59:13" pos:end="63:13">

            <if_stmt pos:start="59:13" pos:end="63:13"><if pos:start="59:13" pos:end="63:13">if<condition pos:start="59:15" pos:end="59:114">(<expr pos:start="59:16" pos:end="59:64"><name pos:start="59:16" pos:end="59:28"><name pos:start="59:16" pos:end="59:16">s</name><operator pos:start="59:17" pos:end="59:18">-&gt;</operator><name pos:start="59:19" pos:end="59:25">picture</name><index pos:start="59:26" pos:end="59:28">[<expr pos:start="59:27" pos:end="59:27"><name pos:start="59:27" pos:end="59:27">i</name></expr>]</index></name><operator pos:start="59:29" pos:end="59:29">.</operator><name pos:start="59:30" pos:end="59:36"><name pos:start="59:30" pos:end="59:33">data</name><index pos:start="59:34" pos:end="59:36">[<expr pos:start="59:35" pos:end="59:35"><literal type="number" pos:start="59:35" pos:end="59:35">0</literal></expr>]</index></name> <operator pos:start="59:38" pos:end="59:39">&amp;&amp;</operator> <operator pos:start="59:41" pos:end="59:41">!</operator><name pos:start="59:42" pos:end="59:54"><name pos:start="59:42" pos:end="59:42">s</name><operator pos:start="59:43" pos:end="59:44">-&gt;</operator><name pos:start="59:45" pos:end="59:51">picture</name><index pos:start="59:52" pos:end="59:54">[<expr pos:start="59:53" pos:end="59:53"><name pos:start="59:53" pos:end="59:53">i</name></expr>]</index></name><operator pos:start="59:55" pos:end="59:55">.</operator><name pos:start="59:56" pos:end="59:64">reference</name></expr> <comment type="block" pos:start="59:66" pos:end="59:113">/*&amp;&amp; s-&gt;picture[i].type!=FF_BUFFER_TYPE_SHARED*/</comment>)</condition><block pos:start="59:115" pos:end="63:13">{<block_content pos:start="61:17" pos:end="61:53">

                <expr_stmt pos:start="61:17" pos:end="61:53"><expr pos:start="61:17" pos:end="61:52"><call pos:start="61:17" pos:end="61:52"><name pos:start="61:17" pos:end="61:33">free_frame_buffer</name><argument_list pos:start="61:34" pos:end="61:52">(<argument pos:start="61:35" pos:end="61:35"><expr pos:start="61:35" pos:end="61:35"><name pos:start="61:35" pos:end="61:35">s</name></expr></argument>, <argument pos:start="61:38" pos:end="61:51"><expr pos:start="61:38" pos:end="61:51"><operator pos:start="61:38" pos:end="61:38">&amp;</operator><name pos:start="61:39" pos:end="61:51"><name pos:start="61:39" pos:end="61:39">s</name><operator pos:start="61:40" pos:end="61:41">-&gt;</operator><name pos:start="61:42" pos:end="61:48">picture</name><index pos:start="61:49" pos:end="61:51">[<expr pos:start="61:50" pos:end="61:50"><name pos:start="61:50" pos:end="61:50">i</name></expr>]</index></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

            </block_content>}</block></if></if_stmt>

        </block_content>}</block></for>



        <if_stmt pos:start="69:9" pos:end="79:9"><if pos:start="69:9" pos:end="71:40">if<condition pos:start="69:11" pos:end="69:75">(<expr pos:start="69:12" pos:end="69:74"><name pos:start="69:12" pos:end="69:33"><name pos:start="69:12" pos:end="69:12">s</name><operator pos:start="69:13" pos:end="69:14">-&gt;</operator><name pos:start="69:15" pos:end="69:33">current_picture_ptr</name></name> <operator pos:start="69:35" pos:end="69:36">&amp;&amp;</operator> <name pos:start="69:38" pos:end="69:68"><name pos:start="69:38" pos:end="69:38">s</name><operator pos:start="69:39" pos:end="69:40">-&gt;</operator><name pos:start="69:41" pos:end="69:59">current_picture_ptr</name><operator pos:start="69:60" pos:end="69:61">-&gt;</operator><name pos:start="69:62" pos:end="69:65">data</name><index pos:start="69:66" pos:end="69:68">[<expr pos:start="69:67" pos:end="69:67"><literal type="number" pos:start="69:67" pos:end="69:67">0</literal></expr>]</index></name><operator pos:start="69:69" pos:end="69:70">==</operator><name pos:start="69:71" pos:end="69:74">NULL</name></expr>)</condition><block type="pseudo" pos:start="71:13" pos:end="71:40"><block_content pos:start="71:13" pos:end="71:40">

            <expr_stmt pos:start="71:13" pos:end="71:40"><expr pos:start="71:13" pos:end="71:39"><name pos:start="71:13" pos:end="71:15">pic</name><operator pos:start="71:16" pos:end="71:16">=</operator> <name pos:start="71:18" pos:end="71:39"><name pos:start="71:18" pos:end="71:18">s</name><operator pos:start="71:19" pos:end="71:20">-&gt;</operator><name pos:start="71:21" pos:end="71:39">current_picture_ptr</name></name></expr>;</expr_stmt></block_content></block></if> <comment type="line" pos:start="71:42" pos:end="71:118">//we already have a unused image (maybe it was set before reading the header)</comment>

        <else pos:start="73:9" pos:end="79:9">else<block pos:start="73:13" pos:end="79:9">{<block_content pos:start="75:13" pos:end="77:32">

            <expr_stmt pos:start="75:13" pos:end="75:44"><expr pos:start="75:13" pos:end="75:43"><name pos:start="75:13" pos:end="75:13">i</name><operator pos:start="75:14" pos:end="75:14">=</operator> <call pos:start="75:16" pos:end="75:43"><name pos:start="75:16" pos:end="75:37">ff_find_unused_picture</name><argument_list pos:start="75:38" pos:end="75:43">(<argument pos:start="75:39" pos:end="75:39"><expr pos:start="75:39" pos:end="75:39"><name pos:start="75:39" pos:end="75:39">s</name></expr></argument>, <argument pos:start="75:42" pos:end="75:42"><expr pos:start="75:42" pos:end="75:42"><literal type="number" pos:start="75:42" pos:end="75:42">0</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

            <expr_stmt pos:start="77:13" pos:end="77:32"><expr pos:start="77:13" pos:end="77:31"><name pos:start="77:13" pos:end="77:15">pic</name><operator pos:start="77:16" pos:end="77:16">=</operator> <operator pos:start="77:18" pos:end="77:18">&amp;</operator><name pos:start="77:19" pos:end="77:31"><name pos:start="77:19" pos:end="77:19">s</name><operator pos:start="77:20" pos:end="77:21">-&gt;</operator><name pos:start="77:22" pos:end="77:28">picture</name><index pos:start="77:29" pos:end="77:31">[<expr pos:start="77:30" pos:end="77:30"><name pos:start="77:30" pos:end="77:30">i</name></expr>]</index></name></expr>;</expr_stmt>

        </block_content>}</block></else></if_stmt>



        <expr_stmt pos:start="83:9" pos:end="83:26"><expr pos:start="83:9" pos:end="83:25"><name pos:start="83:9" pos:end="83:22"><name pos:start="83:9" pos:end="83:11">pic</name><operator pos:start="83:12" pos:end="83:13">-&gt;</operator><name pos:start="83:14" pos:end="83:22">reference</name></name><operator pos:start="83:23" pos:end="83:23">=</operator> <literal type="number" pos:start="83:25" pos:end="83:25">0</literal></expr>;</expr_stmt>

        <if_stmt pos:start="85:9" pos:end="95:9"><if pos:start="85:9" pos:end="95:9">if <condition pos:start="85:12" pos:end="85:25">(<expr pos:start="85:13" pos:end="85:24"><operator pos:start="85:13" pos:end="85:13">!</operator><name pos:start="85:14" pos:end="85:24"><name pos:start="85:14" pos:end="85:14">s</name><operator pos:start="85:15" pos:end="85:16">-&gt;</operator><name pos:start="85:17" pos:end="85:24">dropable</name></name></expr>)</condition><block pos:start="85:26" pos:end="95:9">{<block_content pos:start="87:13" pos:end="93:35">

            <if_stmt pos:start="87:13" pos:end="93:35"><if pos:start="87:13" pos:end="89:54">if <condition pos:start="87:16" pos:end="87:45">(<expr pos:start="87:17" pos:end="87:44"><name pos:start="87:17" pos:end="87:27"><name pos:start="87:17" pos:end="87:17">s</name><operator pos:start="87:18" pos:end="87:19">-&gt;</operator><name pos:start="87:20" pos:end="87:27">codec_id</name></name> <operator pos:start="87:29" pos:end="87:30">==</operator> <name pos:start="87:32" pos:end="87:44">CODEC_ID_H264</name></expr>)</condition><block type="pseudo" pos:start="89:17" pos:end="89:54"><block_content pos:start="89:17" pos:end="89:54">

                <expr_stmt pos:start="89:17" pos:end="89:54"><expr pos:start="89:17" pos:end="89:53"><name pos:start="89:17" pos:end="89:30"><name pos:start="89:17" pos:end="89:19">pic</name><operator pos:start="89:20" pos:end="89:21">-&gt;</operator><name pos:start="89:22" pos:end="89:30">reference</name></name> <operator pos:start="89:32" pos:end="89:32">=</operator> <name pos:start="89:34" pos:end="89:53"><name pos:start="89:34" pos:end="89:34">s</name><operator pos:start="89:35" pos:end="89:36">-&gt;</operator><name pos:start="89:37" pos:end="89:53">picture_structure</name></name></expr>;</expr_stmt></block_content></block></if>

            <if type="elseif" pos:start="91:13" pos:end="93:35">else if <condition pos:start="91:21" pos:end="91:47">(<expr pos:start="91:22" pos:end="91:46"><name pos:start="91:22" pos:end="91:33"><name pos:start="91:22" pos:end="91:22">s</name><operator pos:start="91:23" pos:end="91:24">-&gt;</operator><name pos:start="91:25" pos:end="91:33">pict_type</name></name> <operator pos:start="91:35" pos:end="91:36">!=</operator> <name pos:start="91:38" pos:end="91:46">FF_B_TYPE</name></expr>)</condition><block type="pseudo" pos:start="93:17" pos:end="93:35"><block_content pos:start="93:17" pos:end="93:35">

                <expr_stmt pos:start="93:17" pos:end="93:35"><expr pos:start="93:17" pos:end="93:34"><name pos:start="93:17" pos:end="93:30"><name pos:start="93:17" pos:end="93:19">pic</name><operator pos:start="93:20" pos:end="93:21">-&gt;</operator><name pos:start="93:22" pos:end="93:30">reference</name></name> <operator pos:start="93:32" pos:end="93:32">=</operator> <literal type="number" pos:start="93:34" pos:end="93:34">3</literal></expr>;</expr_stmt></block_content></block></if></if_stmt>

        </block_content>}</block></if></if_stmt>



        <expr_stmt pos:start="99:9" pos:end="99:61"><expr pos:start="99:9" pos:end="99:60"><name pos:start="99:9" pos:end="99:33"><name pos:start="99:9" pos:end="99:11">pic</name><operator pos:start="99:12" pos:end="99:13">-&gt;</operator><name pos:start="99:14" pos:end="99:33">coded_picture_number</name></name><operator pos:start="99:34" pos:end="99:34">=</operator> <name pos:start="99:36" pos:end="99:58"><name pos:start="99:36" pos:end="99:36">s</name><operator pos:start="99:37" pos:end="99:38">-&gt;</operator><name pos:start="99:39" pos:end="99:58">coded_picture_number</name></name><operator pos:start="99:59" pos:end="99:60">++</operator></expr>;</expr_stmt>



        <if_stmt pos:start="103:9" pos:end="105:22"><if pos:start="103:9" pos:end="105:22">if<condition pos:start="103:11" pos:end="103:43">(<expr pos:start="103:12" pos:end="103:42"><call pos:start="103:12" pos:end="103:38"><name pos:start="103:12" pos:end="103:27">ff_alloc_picture</name><argument_list pos:start="103:28" pos:end="103:38">(<argument pos:start="103:29" pos:end="103:29"><expr pos:start="103:29" pos:end="103:29"><name pos:start="103:29" pos:end="103:29">s</name></expr></argument>, <argument pos:start="103:32" pos:end="103:34"><expr pos:start="103:32" pos:end="103:34"><name pos:start="103:32" pos:end="103:34">pic</name></expr></argument>, <argument pos:start="103:37" pos:end="103:37"><expr pos:start="103:37" pos:end="103:37"><literal type="number" pos:start="103:37" pos:end="103:37">0</literal></expr></argument>)</argument_list></call> <operator pos:start="103:40" pos:end="103:40">&lt;</operator> <literal type="number" pos:start="103:42" pos:end="103:42">0</literal></expr>)</condition><block type="pseudo" pos:start="105:13" pos:end="105:22"><block_content pos:start="105:13" pos:end="105:22">

            <return pos:start="105:13" pos:end="105:22">return <expr pos:start="105:20" pos:end="105:21"><operator pos:start="105:20" pos:end="105:20">-</operator><literal type="number" pos:start="105:21" pos:end="105:21">1</literal></expr>;</return></block_content></block></if></if_stmt>



        <expr_stmt pos:start="109:9" pos:end="109:36"><expr pos:start="109:9" pos:end="109:35"><name pos:start="109:9" pos:end="109:30"><name pos:start="109:9" pos:end="109:9">s</name><operator pos:start="109:10" pos:end="109:11">-&gt;</operator><name pos:start="109:12" pos:end="109:30">current_picture_ptr</name></name><operator pos:start="109:31" pos:end="109:31">=</operator> <name pos:start="109:33" pos:end="109:35">pic</name></expr>;</expr_stmt>

        <expr_stmt pos:start="111:9" pos:end="111:68"><expr pos:start="111:9" pos:end="111:67"><name pos:start="111:9" pos:end="111:47"><name pos:start="111:9" pos:end="111:9">s</name><operator pos:start="111:10" pos:end="111:11">-&gt;</operator><name pos:start="111:12" pos:end="111:30">current_picture_ptr</name><operator pos:start="111:31" pos:end="111:32">-&gt;</operator><name pos:start="111:33" pos:end="111:47">top_field_first</name></name><operator pos:start="111:48" pos:end="111:48">=</operator> <name pos:start="111:50" pos:end="111:67"><name pos:start="111:50" pos:end="111:50">s</name><operator pos:start="111:51" pos:end="111:52">-&gt;</operator><name pos:start="111:53" pos:end="111:67">top_field_first</name></name></expr>;</expr_stmt> <comment type="line" pos:start="111:70" pos:end="111:111">//FIXME use only the vars from current_pic</comment>

        <expr_stmt pos:start="113:9" pos:end="113:100"><expr pos:start="113:9" pos:end="113:99"><name pos:start="113:9" pos:end="113:48"><name pos:start="113:9" pos:end="113:9">s</name><operator pos:start="113:10" pos:end="113:11">-&gt;</operator><name pos:start="113:12" pos:end="113:30">current_picture_ptr</name><operator pos:start="113:31" pos:end="113:32">-&gt;</operator><name pos:start="113:33" pos:end="113:48">interlaced_frame</name></name><operator pos:start="113:49" pos:end="113:49">=</operator> <operator pos:start="113:51" pos:end="113:51">!</operator><name pos:start="113:52" pos:end="113:71"><name pos:start="113:52" pos:end="113:52">s</name><operator pos:start="113:53" pos:end="113:54">-&gt;</operator><name pos:start="113:55" pos:end="113:71">progressive_frame</name></name> <operator pos:start="113:73" pos:end="113:74">&amp;&amp;</operator> <operator pos:start="113:76" pos:end="113:76">!</operator><name pos:start="113:77" pos:end="113:99"><name pos:start="113:77" pos:end="113:77">s</name><operator pos:start="113:78" pos:end="113:79">-&gt;</operator><name pos:start="113:80" pos:end="113:99">progressive_sequence</name></name></expr>;</expr_stmt>

    </block_content>}</block></if></if_stmt>



    <expr_stmt pos:start="119:5" pos:end="119:52"><expr pos:start="119:5" pos:end="119:51"><name pos:start="119:5" pos:end="119:37"><name pos:start="119:5" pos:end="119:5">s</name><operator pos:start="119:6" pos:end="119:7">-&gt;</operator><name pos:start="119:8" pos:end="119:26">current_picture_ptr</name><operator pos:start="119:27" pos:end="119:28">-&gt;</operator><name pos:start="119:29" pos:end="119:37">pict_type</name></name><operator pos:start="119:38" pos:end="119:38">=</operator> <name pos:start="119:40" pos:end="119:51"><name pos:start="119:40" pos:end="119:40">s</name><operator pos:start="119:41" pos:end="119:42">-&gt;</operator><name pos:start="119:43" pos:end="119:51">pict_type</name></name></expr>;</expr_stmt>

<comment type="line" pos:start="121:1" pos:end="121:39">//    if(s-&gt;flags &amp;&amp; CODEC_FLAG_QSCALE)</comment>

  <comment type="line" pos:start="123:3" pos:end="123:71">//      s-&gt;current_picture_ptr-&gt;quality= s-&gt;new_picture_ptr-&gt;quality;</comment>

    <expr_stmt pos:start="125:5" pos:end="125:65"><expr pos:start="125:5" pos:end="125:64"><name pos:start="125:5" pos:end="125:37"><name pos:start="125:5" pos:end="125:5">s</name><operator pos:start="125:6" pos:end="125:7">-&gt;</operator><name pos:start="125:8" pos:end="125:26">current_picture_ptr</name><operator pos:start="125:27" pos:end="125:28">-&gt;</operator><name pos:start="125:29" pos:end="125:37">key_frame</name></name><operator pos:start="125:38" pos:end="125:38">=</operator> <name pos:start="125:40" pos:end="125:51"><name pos:start="125:40" pos:end="125:40">s</name><operator pos:start="125:41" pos:end="125:42">-&gt;</operator><name pos:start="125:43" pos:end="125:51">pict_type</name></name> <operator pos:start="125:53" pos:end="125:54">==</operator> <name pos:start="125:56" pos:end="125:64">FF_I_TYPE</name></expr>;</expr_stmt>



    <expr_stmt pos:start="129:5" pos:end="129:65"><expr pos:start="129:5" pos:end="129:64"><call pos:start="129:5" pos:end="129:64"><name pos:start="129:5" pos:end="129:19">ff_copy_picture</name><argument_list pos:start="129:20" pos:end="129:64">(<argument pos:start="129:21" pos:end="129:39"><expr pos:start="129:21" pos:end="129:39"><operator pos:start="129:21" pos:end="129:21">&amp;</operator><name pos:start="129:22" pos:end="129:39"><name pos:start="129:22" pos:end="129:22">s</name><operator pos:start="129:23" pos:end="129:24">-&gt;</operator><name pos:start="129:25" pos:end="129:39">current_picture</name></name></expr></argument>, <argument pos:start="129:42" pos:end="129:63"><expr pos:start="129:42" pos:end="129:63"><name pos:start="129:42" pos:end="129:63"><name pos:start="129:42" pos:end="129:42">s</name><operator pos:start="129:43" pos:end="129:44">-&gt;</operator><name pos:start="129:45" pos:end="129:63">current_picture_ptr</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>



    <if_stmt pos:start="133:5" pos:end="141:5"><if pos:start="133:5" pos:end="141:5">if <condition pos:start="133:8" pos:end="133:34">(<expr pos:start="133:9" pos:end="133:33"><name pos:start="133:9" pos:end="133:20"><name pos:start="133:9" pos:end="133:9">s</name><operator pos:start="133:10" pos:end="133:11">-&gt;</operator><name pos:start="133:12" pos:end="133:20">pict_type</name></name> <operator pos:start="133:22" pos:end="133:23">!=</operator> <name pos:start="133:25" pos:end="133:33">FF_B_TYPE</name></expr>)</condition> <block pos:start="133:36" pos:end="141:5">{<block_content pos:start="135:9" pos:end="139:56">

        <expr_stmt pos:start="135:9" pos:end="135:49"><expr pos:start="135:9" pos:end="135:48"><name pos:start="135:9" pos:end="135:27"><name pos:start="135:9" pos:end="135:9">s</name><operator pos:start="135:10" pos:end="135:11">-&gt;</operator><name pos:start="135:12" pos:end="135:27">last_picture_ptr</name></name><operator pos:start="135:28" pos:end="135:28">=</operator> <name pos:start="135:30" pos:end="135:48"><name pos:start="135:30" pos:end="135:30">s</name><operator pos:start="135:31" pos:end="135:32">-&gt;</operator><name pos:start="135:33" pos:end="135:48">next_picture_ptr</name></name></expr>;</expr_stmt>

        <if_stmt pos:start="137:9" pos:end="139:56"><if pos:start="137:9" pos:end="139:56">if<condition pos:start="137:11" pos:end="137:24">(<expr pos:start="137:12" pos:end="137:23"><operator pos:start="137:12" pos:end="137:12">!</operator><name pos:start="137:13" pos:end="137:23"><name pos:start="137:13" pos:end="137:13">s</name><operator pos:start="137:14" pos:end="137:15">-&gt;</operator><name pos:start="137:16" pos:end="137:23">dropable</name></name></expr>)</condition><block type="pseudo" pos:start="139:13" pos:end="139:56"><block_content pos:start="139:13" pos:end="139:56">

            <expr_stmt pos:start="139:13" pos:end="139:56"><expr pos:start="139:13" pos:end="139:55"><name pos:start="139:13" pos:end="139:31"><name pos:start="139:13" pos:end="139:13">s</name><operator pos:start="139:14" pos:end="139:15">-&gt;</operator><name pos:start="139:16" pos:end="139:31">next_picture_ptr</name></name><operator pos:start="139:32" pos:end="139:32">=</operator> <name pos:start="139:34" pos:end="139:55"><name pos:start="139:34" pos:end="139:34">s</name><operator pos:start="139:35" pos:end="139:36">-&gt;</operator><name pos:start="139:37" pos:end="139:55">current_picture_ptr</name></name></expr>;</expr_stmt></block_content></block></if></if_stmt>

    </block_content>}</block></if></if_stmt>

<comment type="block" pos:start="143:1" pos:end="151:37">/*    av_log(s-&gt;avctx, AV_LOG_DEBUG, "L%p N%p C%p L%p N%p C%p type:%d drop:%d\n", s-&gt;last_picture_ptr, s-&gt;next_picture_ptr,s-&gt;current_picture_ptr,

        s-&gt;last_picture_ptr    ? s-&gt;last_picture_ptr-&gt;data[0] : NULL,

        s-&gt;next_picture_ptr    ? s-&gt;next_picture_ptr-&gt;data[0] : NULL,

        s-&gt;current_picture_ptr ? s-&gt;current_picture_ptr-&gt;data[0] : NULL,

        s-&gt;pict_type, s-&gt;dropable);*/</comment>



    <if_stmt pos:start="155:5" pos:end="155:83"><if pos:start="155:5" pos:end="155:83">if<condition pos:start="155:7" pos:end="155:27">(<expr pos:start="155:8" pos:end="155:26"><name pos:start="155:8" pos:end="155:26"><name pos:start="155:8" pos:end="155:8">s</name><operator pos:start="155:9" pos:end="155:10">-&gt;</operator><name pos:start="155:11" pos:end="155:26">last_picture_ptr</name></name></expr>)</condition><block type="pseudo" pos:start="155:29" pos:end="155:83"><block_content pos:start="155:29" pos:end="155:83"> <expr_stmt pos:start="155:29" pos:end="155:83"><expr pos:start="155:29" pos:end="155:82"><call pos:start="155:29" pos:end="155:82"><name pos:start="155:29" pos:end="155:43">ff_copy_picture</name><argument_list pos:start="155:44" pos:end="155:82">(<argument pos:start="155:45" pos:end="155:60"><expr pos:start="155:45" pos:end="155:60"><operator pos:start="155:45" pos:end="155:45">&amp;</operator><name pos:start="155:46" pos:end="155:60"><name pos:start="155:46" pos:end="155:46">s</name><operator pos:start="155:47" pos:end="155:48">-&gt;</operator><name pos:start="155:49" pos:end="155:60">last_picture</name></name></expr></argument>, <argument pos:start="155:63" pos:end="155:81"><expr pos:start="155:63" pos:end="155:81"><name pos:start="155:63" pos:end="155:81"><name pos:start="155:63" pos:end="155:63">s</name><operator pos:start="155:64" pos:end="155:65">-&gt;</operator><name pos:start="155:66" pos:end="155:81">last_picture_ptr</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt></block_content></block></if></if_stmt>

    <if_stmt pos:start="157:5" pos:end="157:83"><if pos:start="157:5" pos:end="157:83">if<condition pos:start="157:7" pos:end="157:27">(<expr pos:start="157:8" pos:end="157:26"><name pos:start="157:8" pos:end="157:26"><name pos:start="157:8" pos:end="157:8">s</name><operator pos:start="157:9" pos:end="157:10">-&gt;</operator><name pos:start="157:11" pos:end="157:26">next_picture_ptr</name></name></expr>)</condition><block type="pseudo" pos:start="157:29" pos:end="157:83"><block_content pos:start="157:29" pos:end="157:83"> <expr_stmt pos:start="157:29" pos:end="157:83"><expr pos:start="157:29" pos:end="157:82"><call pos:start="157:29" pos:end="157:82"><name pos:start="157:29" pos:end="157:43">ff_copy_picture</name><argument_list pos:start="157:44" pos:end="157:82">(<argument pos:start="157:45" pos:end="157:60"><expr pos:start="157:45" pos:end="157:60"><operator pos:start="157:45" pos:end="157:45">&amp;</operator><name pos:start="157:46" pos:end="157:60"><name pos:start="157:46" pos:end="157:46">s</name><operator pos:start="157:47" pos:end="157:48">-&gt;</operator><name pos:start="157:49" pos:end="157:60">next_picture</name></name></expr></argument>, <argument pos:start="157:63" pos:end="157:81"><expr pos:start="157:63" pos:end="157:81"><name pos:start="157:63" pos:end="157:81"><name pos:start="157:63" pos:end="157:63">s</name><operator pos:start="157:64" pos:end="157:65">-&gt;</operator><name pos:start="157:66" pos:end="157:81">next_picture_ptr</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt></block_content></block></if></if_stmt>



    <if_stmt pos:start="161:5" pos:end="169:5"><if pos:start="161:5" pos:end="169:5">if<condition pos:start="161:7" pos:end="161:150">(<expr pos:start="161:8" pos:end="161:149"><name pos:start="161:8" pos:end="161:19"><name pos:start="161:8" pos:end="161:8">s</name><operator pos:start="161:9" pos:end="161:10">-&gt;</operator><name pos:start="161:11" pos:end="161:19">pict_type</name></name> <operator pos:start="161:21" pos:end="161:22">!=</operator> <name pos:start="161:24" pos:end="161:32">FF_I_TYPE</name> <operator pos:start="161:34" pos:end="161:35">&amp;&amp;</operator> <operator pos:start="161:37" pos:end="161:37">(</operator><name pos:start="161:38" pos:end="161:56"><name pos:start="161:38" pos:end="161:38">s</name><operator pos:start="161:39" pos:end="161:40">-&gt;</operator><name pos:start="161:41" pos:end="161:56">last_picture_ptr</name></name><operator pos:start="161:57" pos:end="161:58">==</operator><name pos:start="161:59" pos:end="161:62">NULL</name> <operator pos:start="161:64" pos:end="161:65">||</operator> <name pos:start="161:67" pos:end="161:94"><name pos:start="161:67" pos:end="161:67">s</name><operator pos:start="161:68" pos:end="161:69">-&gt;</operator><name pos:start="161:70" pos:end="161:85">last_picture_ptr</name><operator pos:start="161:86" pos:end="161:87">-&gt;</operator><name pos:start="161:88" pos:end="161:91">data</name><index pos:start="161:92" pos:end="161:94">[<expr pos:start="161:93" pos:end="161:93"><literal type="number" pos:start="161:93" pos:end="161:93">0</literal></expr>]</index></name><operator pos:start="161:95" pos:end="161:96">==</operator><name pos:start="161:97" pos:end="161:100">NULL</name><operator pos:start="161:101" pos:end="161:101">)</operator> <operator pos:start="161:103" pos:end="161:104">&amp;&amp;</operator> <operator pos:start="161:106" pos:end="161:106">!</operator><name pos:start="161:107" pos:end="161:117"><name pos:start="161:107" pos:end="161:107">s</name><operator pos:start="161:108" pos:end="161:109">-&gt;</operator><name pos:start="161:110" pos:end="161:117">dropable</name></name> <operator pos:start="161:119" pos:end="161:120">&amp;&amp;</operator> <name pos:start="161:122" pos:end="161:132"><name pos:start="161:122" pos:end="161:122">s</name><operator pos:start="161:123" pos:end="161:124">-&gt;</operator><name pos:start="161:125" pos:end="161:132">codec_id</name></name> <operator pos:start="161:134" pos:end="161:135">!=</operator> <name pos:start="161:137" pos:end="161:149">CODEC_ID_H264</name></expr>)</condition><block pos:start="161:151" pos:end="169:5">{<block_content pos:start="163:9" pos:end="167:19">

        <expr_stmt pos:start="163:9" pos:end="163:77"><expr pos:start="163:9" pos:end="163:76"><call pos:start="163:9" pos:end="163:76"><name pos:start="163:9" pos:end="163:14">av_log</name><argument_list pos:start="163:15" pos:end="163:76">(<argument pos:start="163:16" pos:end="163:20"><expr pos:start="163:16" pos:end="163:20"><name pos:start="163:16" pos:end="163:20">avctx</name></expr></argument>, <argument pos:start="163:23" pos:end="163:34"><expr pos:start="163:23" pos:end="163:34"><name pos:start="163:23" pos:end="163:34">AV_LOG_ERROR</name></expr></argument>, <argument pos:start="163:37" pos:end="163:75"><expr pos:start="163:37" pos:end="163:75"><literal type="string" pos:start="163:37" pos:end="163:75">"warning: first frame is no keyframe\n"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <expr_stmt pos:start="165:9" pos:end="165:42"><expr pos:start="165:9" pos:end="165:41"><call pos:start="165:9" pos:end="165:41"><name pos:start="165:9" pos:end="165:14">assert</name><argument_list pos:start="165:15" pos:end="165:41">(<argument pos:start="165:16" pos:end="165:40"><expr pos:start="165:16" pos:end="165:40"><name pos:start="165:16" pos:end="165:27"><name pos:start="165:16" pos:end="165:16">s</name><operator pos:start="165:17" pos:end="165:18">-&gt;</operator><name pos:start="165:19" pos:end="165:27">pict_type</name></name> <operator pos:start="165:29" pos:end="165:30">!=</operator> <name pos:start="165:32" pos:end="165:40">FF_B_TYPE</name></expr></argument>)</argument_list></call></expr>;</expr_stmt> <comment type="line" pos:start="165:44" pos:end="165:104">//these should have been dropped if we don't have a reference</comment>

        <goto pos:start="167:9" pos:end="167:19">goto <name pos:start="167:14" pos:end="167:18">alloc</name>;</goto>

    </block_content>}</block></if></if_stmt>



    <expr_stmt pos:start="173:5" pos:end="173:95"><expr pos:start="173:5" pos:end="173:94"><call pos:start="173:5" pos:end="173:94"><name pos:start="173:5" pos:end="173:10">assert</name><argument_list pos:start="173:11" pos:end="173:94">(<argument pos:start="173:12" pos:end="173:93"><expr pos:start="173:12" pos:end="173:93"><name pos:start="173:12" pos:end="173:23"><name pos:start="173:12" pos:end="173:12">s</name><operator pos:start="173:13" pos:end="173:14">-&gt;</operator><name pos:start="173:15" pos:end="173:23">pict_type</name></name> <operator pos:start="173:25" pos:end="173:26">==</operator> <name pos:start="173:28" pos:end="173:36">FF_I_TYPE</name> <operator pos:start="173:38" pos:end="173:39">||</operator> <operator pos:start="173:41" pos:end="173:41">(</operator><name pos:start="173:42" pos:end="173:60"><name pos:start="173:42" pos:end="173:42">s</name><operator pos:start="173:43" pos:end="173:44">-&gt;</operator><name pos:start="173:45" pos:end="173:60">last_picture_ptr</name></name> <operator pos:start="173:62" pos:end="173:63">&amp;&amp;</operator> <name pos:start="173:65" pos:end="173:92"><name pos:start="173:65" pos:end="173:65">s</name><operator pos:start="173:66" pos:end="173:67">-&gt;</operator><name pos:start="173:68" pos:end="173:83">last_picture_ptr</name><operator pos:start="173:84" pos:end="173:85">-&gt;</operator><name pos:start="173:86" pos:end="173:89">data</name><index pos:start="173:90" pos:end="173:92">[<expr pos:start="173:91" pos:end="173:91"><literal type="number" pos:start="173:91" pos:end="173:91">0</literal></expr>]</index></name><operator pos:start="173:93" pos:end="173:93">)</operator></expr></argument>)</argument_list></call></expr>;</expr_stmt>



    <if_stmt pos:start="177:5" pos:end="197:5"><if pos:start="177:5" pos:end="197:5">if<condition pos:start="177:7" pos:end="177:69">(<expr pos:start="177:8" pos:end="177:68"><name pos:start="177:8" pos:end="177:27"><name pos:start="177:8" pos:end="177:8">s</name><operator pos:start="177:9" pos:end="177:10">-&gt;</operator><name pos:start="177:11" pos:end="177:27">picture_structure</name></name><operator pos:start="177:28" pos:end="177:29">!=</operator><name pos:start="177:30" pos:end="177:39">PICT_FRAME</name> <operator pos:start="177:41" pos:end="177:42">&amp;&amp;</operator> <name pos:start="177:44" pos:end="177:56"><name pos:start="177:44" pos:end="177:44">s</name><operator pos:start="177:45" pos:end="177:46">-&gt;</operator><name pos:start="177:47" pos:end="177:56">out_format</name></name> <operator pos:start="177:58" pos:end="177:59">!=</operator> <name pos:start="177:61" pos:end="177:68">FMT_H264</name></expr>)</condition><block pos:start="177:70" pos:end="197:5">{<block_content pos:start="179:9" pos:end="195:9">

        <decl_stmt pos:start="179:9" pos:end="179:14"><decl pos:start="179:9" pos:end="179:13"><type pos:start="179:9" pos:end="179:11"><name pos:start="179:9" pos:end="179:11">int</name></type> <name pos:start="179:13" pos:end="179:13">i</name></decl>;</decl_stmt>

        <for pos:start="181:9" pos:end="195:9">for<control pos:start="181:12" pos:end="181:26">(<init pos:start="181:13" pos:end="181:16"><expr pos:start="181:13" pos:end="181:15"><name pos:start="181:13" pos:end="181:13">i</name><operator pos:start="181:14" pos:end="181:14">=</operator><literal type="number" pos:start="181:15" pos:end="181:15">0</literal></expr>;</init> <condition pos:start="181:18" pos:end="181:21"><expr pos:start="181:18" pos:end="181:20"><name pos:start="181:18" pos:end="181:18">i</name><operator pos:start="181:19" pos:end="181:19">&lt;</operator><literal type="number" pos:start="181:20" pos:end="181:20">4</literal></expr>;</condition> <incr pos:start="181:23" pos:end="181:25"><expr pos:start="181:23" pos:end="181:25"><name pos:start="181:23" pos:end="181:23">i</name><operator pos:start="181:24" pos:end="181:25">++</operator></expr></incr>)</control><block pos:start="181:27" pos:end="195:9">{<block_content pos:start="183:13" pos:end="193:44">

            <if_stmt pos:start="183:13" pos:end="187:13"><if pos:start="183:13" pos:end="187:13">if<condition pos:start="183:15" pos:end="183:57">(<expr pos:start="183:16" pos:end="183:56"><name pos:start="183:16" pos:end="183:35"><name pos:start="183:16" pos:end="183:16">s</name><operator pos:start="183:17" pos:end="183:18">-&gt;</operator><name pos:start="183:19" pos:end="183:35">picture_structure</name></name> <operator pos:start="183:37" pos:end="183:38">==</operator> <name pos:start="183:40" pos:end="183:56">PICT_BOTTOM_FIELD</name></expr>)</condition><block pos:start="183:58" pos:end="187:13">{<block_content pos:start="185:18" pos:end="185:78">

                 <expr_stmt pos:start="185:18" pos:end="185:78"><expr pos:start="185:18" pos:end="185:77"><name pos:start="185:18" pos:end="185:43"><name pos:start="185:18" pos:end="185:18">s</name><operator pos:start="185:19" pos:end="185:20">-&gt;</operator><name pos:start="185:21" pos:end="185:35">current_picture</name><operator pos:start="185:36" pos:end="185:36">.</operator><name pos:start="185:37" pos:end="185:40">data</name><index pos:start="185:41" pos:end="185:43">[<expr pos:start="185:42" pos:end="185:42"><name pos:start="185:42" pos:end="185:42">i</name></expr>]</index></name> <operator pos:start="185:45" pos:end="185:46">+=</operator> <name pos:start="185:48" pos:end="185:77"><name pos:start="185:48" pos:end="185:48">s</name><operator pos:start="185:49" pos:end="185:50">-&gt;</operator><name pos:start="185:51" pos:end="185:65">current_picture</name><operator pos:start="185:66" pos:end="185:66">.</operator><name pos:start="185:67" pos:end="185:74">linesize</name><index pos:start="185:75" pos:end="185:77">[<expr pos:start="185:76" pos:end="185:76"><name pos:start="185:76" pos:end="185:76">i</name></expr>]</index></name></expr>;</expr_stmt>

            </block_content>}</block></if></if_stmt>

            <expr_stmt pos:start="189:13" pos:end="189:48"><expr pos:start="189:13" pos:end="189:47"><name pos:start="189:13" pos:end="189:42"><name pos:start="189:13" pos:end="189:13">s</name><operator pos:start="189:14" pos:end="189:15">-&gt;</operator><name pos:start="189:16" pos:end="189:30">current_picture</name><operator pos:start="189:31" pos:end="189:31">.</operator><name pos:start="189:32" pos:end="189:39">linesize</name><index pos:start="189:40" pos:end="189:42">[<expr pos:start="189:41" pos:end="189:41"><name pos:start="189:41" pos:end="189:41">i</name></expr>]</index></name> <operator pos:start="189:44" pos:end="189:45">*=</operator> <literal type="number" pos:start="189:47" pos:end="189:47">2</literal></expr>;</expr_stmt>

            <expr_stmt pos:start="191:13" pos:end="191:44"><expr pos:start="191:13" pos:end="191:43"><name pos:start="191:13" pos:end="191:39"><name pos:start="191:13" pos:end="191:13">s</name><operator pos:start="191:14" pos:end="191:15">-&gt;</operator><name pos:start="191:16" pos:end="191:27">last_picture</name><operator pos:start="191:28" pos:end="191:28">.</operator><name pos:start="191:29" pos:end="191:36">linesize</name><index pos:start="191:37" pos:end="191:39">[<expr pos:start="191:38" pos:end="191:38"><name pos:start="191:38" pos:end="191:38">i</name></expr>]</index></name> <operator pos:start="191:41" pos:end="191:42">*=</operator><literal type="number" pos:start="191:43" pos:end="191:43">2</literal></expr>;</expr_stmt>

            <expr_stmt pos:start="193:13" pos:end="193:44"><expr pos:start="193:13" pos:end="193:43"><name pos:start="193:13" pos:end="193:39"><name pos:start="193:13" pos:end="193:13">s</name><operator pos:start="193:14" pos:end="193:15">-&gt;</operator><name pos:start="193:16" pos:end="193:27">next_picture</name><operator pos:start="193:28" pos:end="193:28">.</operator><name pos:start="193:29" pos:end="193:36">linesize</name><index pos:start="193:37" pos:end="193:39">[<expr pos:start="193:38" pos:end="193:38"><name pos:start="193:38" pos:end="193:38">i</name></expr>]</index></name> <operator pos:start="193:41" pos:end="193:42">*=</operator><literal type="number" pos:start="193:43" pos:end="193:43">2</literal></expr>;</expr_stmt>

        </block_content>}</block></for>

    </block_content>}</block></if></if_stmt>



    <expr_stmt pos:start="201:5" pos:end="201:36"><expr pos:start="201:5" pos:end="201:35"><name pos:start="201:5" pos:end="201:15"><name pos:start="201:5" pos:end="201:5">s</name><operator pos:start="201:6" pos:end="201:7">-&gt;</operator><name pos:start="201:8" pos:end="201:15">hurry_up</name></name><operator pos:start="201:16" pos:end="201:16">=</operator> <name pos:start="201:18" pos:end="201:35"><name pos:start="201:18" pos:end="201:18">s</name><operator pos:start="201:19" pos:end="201:20">-&gt;</operator><name pos:start="201:21" pos:end="201:25">avctx</name><operator pos:start="201:26" pos:end="201:27">-&gt;</operator><name pos:start="201:28" pos:end="201:35">hurry_up</name></name></expr>;</expr_stmt>

    <expr_stmt pos:start="203:5" pos:end="203:51"><expr pos:start="203:5" pos:end="203:50"><name pos:start="203:5" pos:end="203:24"><name pos:start="203:5" pos:end="203:5">s</name><operator pos:start="203:6" pos:end="203:7">-&gt;</operator><name pos:start="203:8" pos:end="203:24">error_recognition</name></name><operator pos:start="203:25" pos:end="203:25">=</operator> <name pos:start="203:27" pos:end="203:50"><name pos:start="203:27" pos:end="203:31">avctx</name><operator pos:start="203:32" pos:end="203:33">-&gt;</operator><name pos:start="203:34" pos:end="203:50">error_recognition</name></name></expr>;</expr_stmt>



    <comment type="block" pos:start="207:5" pos:end="209:91">/* set dequantizer, we can't do it during init as it might change for mpeg4

       and we can't do it in the header decode as init is not called for mpeg4 there yet */</comment>

    <if_stmt pos:start="211:5" pos:end="229:5"><if pos:start="211:5" pos:end="217:5">if<condition pos:start="211:7" pos:end="211:59">(<expr pos:start="211:8" pos:end="211:58"><name pos:start="211:8" pos:end="211:20"><name pos:start="211:8" pos:end="211:8">s</name><operator pos:start="211:9" pos:end="211:10">-&gt;</operator><name pos:start="211:11" pos:end="211:20">mpeg_quant</name></name> <operator pos:start="211:22" pos:end="211:23">||</operator> <name pos:start="211:25" pos:end="211:35"><name pos:start="211:25" pos:end="211:25">s</name><operator pos:start="211:26" pos:end="211:27">-&gt;</operator><name pos:start="211:28" pos:end="211:35">codec_id</name></name> <operator pos:start="211:37" pos:end="211:38">==</operator> <name pos:start="211:40" pos:end="211:58">CODEC_ID_MPEG2VIDEO</name></expr>)</condition><block pos:start="211:60" pos:end="217:5">{<block_content pos:start="213:9" pos:end="215:64">

        <expr_stmt pos:start="213:9" pos:end="213:64"><expr pos:start="213:9" pos:end="213:63"><name pos:start="213:9" pos:end="213:31"><name pos:start="213:9" pos:end="213:9">s</name><operator pos:start="213:10" pos:end="213:11">-&gt;</operator><name pos:start="213:12" pos:end="213:31">dct_unquantize_intra</name></name> <operator pos:start="213:33" pos:end="213:33">=</operator> <name pos:start="213:35" pos:end="213:63"><name pos:start="213:35" pos:end="213:35">s</name><operator pos:start="213:36" pos:end="213:37">-&gt;</operator><name pos:start="213:38" pos:end="213:63">dct_unquantize_mpeg2_intra</name></name></expr>;</expr_stmt>

        <expr_stmt pos:start="215:9" pos:end="215:64"><expr pos:start="215:9" pos:end="215:63"><name pos:start="215:9" pos:end="215:31"><name pos:start="215:9" pos:end="215:9">s</name><operator pos:start="215:10" pos:end="215:11">-&gt;</operator><name pos:start="215:12" pos:end="215:31">dct_unquantize_inter</name></name> <operator pos:start="215:33" pos:end="215:33">=</operator> <name pos:start="215:35" pos:end="215:63"><name pos:start="215:35" pos:end="215:35">s</name><operator pos:start="215:36" pos:end="215:37">-&gt;</operator><name pos:start="215:38" pos:end="215:63">dct_unquantize_mpeg2_inter</name></name></expr>;</expr_stmt>

    </block_content>}</block></if><if type="elseif" pos:start="217:6" pos:end="223:5">else if<condition pos:start="217:13" pos:end="217:68">(<expr pos:start="217:14" pos:end="217:67"><name pos:start="217:14" pos:end="217:26"><name pos:start="217:14" pos:end="217:14">s</name><operator pos:start="217:15" pos:end="217:16">-&gt;</operator><name pos:start="217:17" pos:end="217:26">out_format</name></name> <operator pos:start="217:28" pos:end="217:29">==</operator> <name pos:start="217:31" pos:end="217:38">FMT_H263</name> <operator pos:start="217:40" pos:end="217:41">||</operator> <name pos:start="217:43" pos:end="217:55"><name pos:start="217:43" pos:end="217:43">s</name><operator pos:start="217:44" pos:end="217:45">-&gt;</operator><name pos:start="217:46" pos:end="217:55">out_format</name></name> <operator pos:start="217:57" pos:end="217:58">==</operator> <name pos:start="217:60" pos:end="217:67">FMT_H261</name></expr>)</condition><block pos:start="217:69" pos:end="223:5">{<block_content pos:start="219:9" pos:end="221:63">

        <expr_stmt pos:start="219:9" pos:end="219:63"><expr pos:start="219:9" pos:end="219:62"><name pos:start="219:9" pos:end="219:31"><name pos:start="219:9" pos:end="219:9">s</name><operator pos:start="219:10" pos:end="219:11">-&gt;</operator><name pos:start="219:12" pos:end="219:31">dct_unquantize_intra</name></name> <operator pos:start="219:33" pos:end="219:33">=</operator> <name pos:start="219:35" pos:end="219:62"><name pos:start="219:35" pos:end="219:35">s</name><operator pos:start="219:36" pos:end="219:37">-&gt;</operator><name pos:start="219:38" pos:end="219:62">dct_unquantize_h263_intra</name></name></expr>;</expr_stmt>

        <expr_stmt pos:start="221:9" pos:end="221:63"><expr pos:start="221:9" pos:end="221:62"><name pos:start="221:9" pos:end="221:31"><name pos:start="221:9" pos:end="221:9">s</name><operator pos:start="221:10" pos:end="221:11">-&gt;</operator><name pos:start="221:12" pos:end="221:31">dct_unquantize_inter</name></name> <operator pos:start="221:33" pos:end="221:33">=</operator> <name pos:start="221:35" pos:end="221:62"><name pos:start="221:35" pos:end="221:35">s</name><operator pos:start="221:36" pos:end="221:37">-&gt;</operator><name pos:start="221:38" pos:end="221:62">dct_unquantize_h263_inter</name></name></expr>;</expr_stmt>

    </block_content>}</block></if><else pos:start="223:6" pos:end="229:5">else<block pos:start="223:10" pos:end="229:5">{<block_content pos:start="225:9" pos:end="227:64">

        <expr_stmt pos:start="225:9" pos:end="225:64"><expr pos:start="225:9" pos:end="225:63"><name pos:start="225:9" pos:end="225:31"><name pos:start="225:9" pos:end="225:9">s</name><operator pos:start="225:10" pos:end="225:11">-&gt;</operator><name pos:start="225:12" pos:end="225:31">dct_unquantize_intra</name></name> <operator pos:start="225:33" pos:end="225:33">=</operator> <name pos:start="225:35" pos:end="225:63"><name pos:start="225:35" pos:end="225:35">s</name><operator pos:start="225:36" pos:end="225:37">-&gt;</operator><name pos:start="225:38" pos:end="225:63">dct_unquantize_mpeg1_intra</name></name></expr>;</expr_stmt>

        <expr_stmt pos:start="227:9" pos:end="227:64"><expr pos:start="227:9" pos:end="227:63"><name pos:start="227:9" pos:end="227:31"><name pos:start="227:9" pos:end="227:9">s</name><operator pos:start="227:10" pos:end="227:11">-&gt;</operator><name pos:start="227:12" pos:end="227:31">dct_unquantize_inter</name></name> <operator pos:start="227:33" pos:end="227:33">=</operator> <name pos:start="227:35" pos:end="227:63"><name pos:start="227:35" pos:end="227:35">s</name><operator pos:start="227:36" pos:end="227:37">-&gt;</operator><name pos:start="227:38" pos:end="227:63">dct_unquantize_mpeg1_inter</name></name></expr>;</expr_stmt>

    </block_content>}</block></else></if_stmt>



    <if_stmt pos:start="233:5" pos:end="241:5"><if pos:start="233:5" pos:end="241:5">if<condition pos:start="233:7" pos:end="233:24">(<expr pos:start="233:8" pos:end="233:23"><name pos:start="233:8" pos:end="233:23"><name pos:start="233:8" pos:end="233:8">s</name><operator pos:start="233:9" pos:end="233:10">-&gt;</operator><name pos:start="233:11" pos:end="233:23">dct_error_sum</name></name></expr>)</condition><block pos:start="233:25" pos:end="241:5">{<block_content pos:start="235:9" pos:end="239:34">

        <expr_stmt pos:start="235:9" pos:end="235:57"><expr pos:start="235:9" pos:end="235:56"><call pos:start="235:9" pos:end="235:56"><name pos:start="235:9" pos:end="235:14">assert</name><argument_list pos:start="235:15" pos:end="235:56">(<argument pos:start="235:16" pos:end="235:55"><expr pos:start="235:16" pos:end="235:55"><name pos:start="235:16" pos:end="235:40"><name pos:start="235:16" pos:end="235:16">s</name><operator pos:start="235:17" pos:end="235:18">-&gt;</operator><name pos:start="235:19" pos:end="235:23">avctx</name><operator pos:start="235:24" pos:end="235:25">-&gt;</operator><name pos:start="235:26" pos:end="235:40">noise_reduction</name></name> <operator pos:start="235:42" pos:end="235:43">&amp;&amp;</operator> <name pos:start="235:45" pos:end="235:55"><name pos:start="235:45" pos:end="235:45">s</name><operator pos:start="235:46" pos:end="235:47">-&gt;</operator><name pos:start="235:48" pos:end="235:55">encoding</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>



        <expr_stmt pos:start="239:9" pos:end="239:34"><expr pos:start="239:9" pos:end="239:33"><call pos:start="239:9" pos:end="239:33"><name pos:start="239:9" pos:end="239:30">update_noise_reduction</name><argument_list pos:start="239:31" pos:end="239:33">(<argument pos:start="239:32" pos:end="239:32"><expr pos:start="239:32" pos:end="239:32"><name pos:start="239:32" pos:end="239:32">s</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    </block_content>}</block></if></if_stmt>



    <if_stmt pos:start="245:5" pos:end="247:45"><if pos:start="245:5" pos:end="247:45">if<condition pos:start="245:7" pos:end="245:63">(<expr pos:start="245:8" pos:end="245:62"><name pos:start="245:8" pos:end="245:31">CONFIG_MPEG_XVMC_DECODER</name> <operator pos:start="245:33" pos:end="245:34">&amp;&amp;</operator> <name pos:start="245:36" pos:end="245:62"><name pos:start="245:36" pos:end="245:36">s</name><operator pos:start="245:37" pos:end="245:38">-&gt;</operator><name pos:start="245:39" pos:end="245:43">avctx</name><operator pos:start="245:44" pos:end="245:45">-&gt;</operator><name pos:start="245:46" pos:end="245:62">xvmc_acceleration</name></name></expr>)</condition><block type="pseudo" pos:start="247:9" pos:end="247:45"><block_content pos:start="247:9" pos:end="247:45">

        <return pos:start="247:9" pos:end="247:45">return <expr pos:start="247:16" pos:end="247:44"><call pos:start="247:16" pos:end="247:44"><name pos:start="247:16" pos:end="247:34">ff_xvmc_field_start</name><argument_list pos:start="247:35" pos:end="247:44">(<argument pos:start="247:36" pos:end="247:36"><expr pos:start="247:36" pos:end="247:36"><name pos:start="247:36" pos:end="247:36">s</name></expr></argument>, <argument pos:start="247:39" pos:end="247:43"><expr pos:start="247:39" pos:end="247:43"><name pos:start="247:39" pos:end="247:43">avctx</name></expr></argument>)</argument_list></call></expr>;</return></block_content></block></if></if_stmt>



    <return pos:start="251:5" pos:end="251:13">return <expr pos:start="251:12" pos:end="251:12"><literal type="number" pos:start="251:12" pos:end="251:12">0</literal></expr>;</return>

</block_content>}</block></function>
</unit>
