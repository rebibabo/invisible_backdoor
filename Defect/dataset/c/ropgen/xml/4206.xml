<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<unit xmlns="http://www.srcML.org/srcML/src" xmlns:pos="http://www.srcML.org/srcML/position" revision="1.0.0" language="C" filename="dataset/ropgen/aug/0/4206.c" pos:tabs="8"><function pos:start="1:1" pos:end="159:1"><type pos:start="1:1" pos:end="1:10"><specifier pos:start="1:1" pos:end="1:6">static</specifier> <name pos:start="1:8" pos:end="1:10">int</name></type> <name pos:start="1:12" pos:end="1:21">find_pte64</name><parameter_list pos:start="1:22" pos:end="3:66">(<parameter pos:start="1:23" pos:end="1:38"><decl pos:start="1:23" pos:end="1:38"><type pos:start="1:23" pos:end="1:38"><name pos:start="1:23" pos:end="1:33">CPUPPCState</name> <modifier pos:start="1:35" pos:end="1:35">*</modifier></type><name pos:start="1:36" pos:end="1:38">env</name></decl></parameter>, <parameter pos:start="1:41" pos:end="1:66"><decl pos:start="1:41" pos:end="1:66"><type pos:start="1:41" pos:end="1:66"><name pos:start="1:41" pos:end="1:61"><name pos:start="1:41" pos:end="1:46">struct</name> <name pos:start="1:48" pos:end="1:61">mmu_ctx_hash64</name></name> <modifier pos:start="1:63" pos:end="1:63">*</modifier></type><name pos:start="1:64" pos:end="1:66">ctx</name></decl></parameter>,

                      <parameter pos:start="3:23" pos:end="3:36"><decl pos:start="3:23" pos:end="3:36"><type pos:start="3:23" pos:end="3:36"><name pos:start="3:23" pos:end="3:31">ppc_slb_t</name> <modifier pos:start="3:33" pos:end="3:33">*</modifier></type><name pos:start="3:34" pos:end="3:36">slb</name></decl></parameter>, <parameter pos:start="3:39" pos:end="3:56"><decl pos:start="3:39" pos:end="3:56"><type pos:start="3:39" pos:end="3:56"><name pos:start="3:39" pos:end="3:50">target_ulong</name></type> <name pos:start="3:52" pos:end="3:56">eaddr</name></decl></parameter>, <parameter pos:start="3:59" pos:end="3:65"><decl pos:start="3:59" pos:end="3:65"><type pos:start="3:59" pos:end="3:65"><name pos:start="3:59" pos:end="3:61">int</name></type> <name pos:start="3:63" pos:end="3:65">rwx</name></decl></parameter>)</parameter_list>

<block pos:start="5:1" pos:end="159:1">{<block_content pos:start="7:5" pos:end="157:15">

    <decl_stmt pos:start="7:5" pos:end="7:32"><decl pos:start="7:5" pos:end="7:19"><type pos:start="7:5" pos:end="7:10"><name pos:start="7:5" pos:end="7:10">hwaddr</name></type> <name pos:start="7:12" pos:end="7:19">pteg_off</name></decl>, <decl pos:start="7:22" pos:end="7:31"><type ref="prev" pos:start="7:5" pos:end="7:10"/><name pos:start="7:22" pos:end="7:31">pte_offset</name></decl>;</decl_stmt>

    <decl_stmt pos:start="9:5" pos:end="9:25"><decl pos:start="9:5" pos:end="9:24"><type pos:start="9:5" pos:end="9:20"><name pos:start="9:5" pos:end="9:20">ppc_hash_pte64_t</name></type> <name pos:start="9:22" pos:end="9:24">pte</name></decl>;</decl_stmt>

    <decl_stmt pos:start="11:5" pos:end="11:34"><decl pos:start="11:5" pos:end="11:17"><type pos:start="11:5" pos:end="11:12"><name pos:start="11:5" pos:end="11:12">uint64_t</name></type> <name pos:start="11:14" pos:end="11:17">vsid</name></decl>, <decl pos:start="11:20" pos:end="11:27"><type ref="prev" pos:start="11:5" pos:end="11:12"/><name pos:start="11:20" pos:end="11:27">pageaddr</name></decl>, <decl pos:start="11:30" pos:end="11:33"><type ref="prev" pos:start="11:5" pos:end="11:12"/><name pos:start="11:30" pos:end="11:33">ptem</name></decl>;</decl_stmt>

    <decl_stmt pos:start="13:5" pos:end="13:16"><decl pos:start="13:5" pos:end="13:15"><type pos:start="13:5" pos:end="13:10"><name pos:start="13:5" pos:end="13:10">hwaddr</name></type> <name pos:start="13:12" pos:end="13:15">hash</name></decl>;</decl_stmt>

    <decl_stmt pos:start="15:5" pos:end="15:39"><decl pos:start="15:5" pos:end="15:20"><type pos:start="15:5" pos:end="15:7"><name pos:start="15:5" pos:end="15:7">int</name></type> <name pos:start="15:9" pos:end="15:20">segment_bits</name></decl>, <decl pos:start="15:23" pos:end="15:38"><type ref="prev" pos:start="15:5" pos:end="15:7"/><name pos:start="15:23" pos:end="15:38">target_page_bits</name></decl>;</decl_stmt>

    <decl_stmt pos:start="17:5" pos:end="17:12"><decl pos:start="17:5" pos:end="17:11"><type pos:start="17:5" pos:end="17:7"><name pos:start="17:5" pos:end="17:7">int</name></type> <name pos:start="17:9" pos:end="17:11">ret</name></decl>;</decl_stmt>



    <expr_stmt pos:start="21:5" pos:end="21:13"><expr pos:start="21:5" pos:end="21:12"><name pos:start="21:5" pos:end="21:7">ret</name> <operator pos:start="21:9" pos:end="21:9">=</operator> <operator pos:start="21:11" pos:end="21:11">-</operator><literal type="number" pos:start="21:12" pos:end="21:12">1</literal></expr>;</expr_stmt> <comment type="block" pos:start="21:15" pos:end="21:34">/* No entry found */</comment>



    <if_stmt pos:start="25:5" pos:end="37:5"><if pos:start="25:5" pos:end="31:5">if <condition pos:start="25:8" pos:end="25:31">(<expr pos:start="25:9" pos:end="25:30"><name pos:start="25:9" pos:end="25:17"><name pos:start="25:9" pos:end="25:11">slb</name><operator pos:start="25:12" pos:end="25:13">-&gt;</operator><name pos:start="25:14" pos:end="25:17">vsid</name></name> <operator pos:start="25:19" pos:end="25:19">&amp;</operator> <name pos:start="25:21" pos:end="25:30">SLB_VSID_B</name></expr>)</condition> <block pos:start="25:33" pos:end="31:5">{<block_content pos:start="27:9" pos:end="29:26">

        <expr_stmt pos:start="27:9" pos:end="27:64"><expr pos:start="27:9" pos:end="27:63"><name pos:start="27:9" pos:end="27:12">vsid</name> <operator pos:start="27:14" pos:end="27:14">=</operator> <operator pos:start="27:16" pos:end="27:16">(</operator><name pos:start="27:17" pos:end="27:25"><name pos:start="27:17" pos:end="27:19">slb</name><operator pos:start="27:20" pos:end="27:21">-&gt;</operator><name pos:start="27:22" pos:end="27:25">vsid</name></name> <operator pos:start="27:27" pos:end="27:27">&amp;</operator> <name pos:start="27:29" pos:end="27:41">SLB_VSID_VSID</name><operator pos:start="27:42" pos:end="27:42">)</operator> <operator pos:start="27:44" pos:end="27:45">&gt;&gt;</operator> <name pos:start="27:47" pos:end="27:63">SLB_VSID_SHIFT_1T</name></expr>;</expr_stmt>

        <expr_stmt pos:start="29:9" pos:end="29:26"><expr pos:start="29:9" pos:end="29:25"><name pos:start="29:9" pos:end="29:20">segment_bits</name> <operator pos:start="29:22" pos:end="29:22">=</operator> <literal type="number" pos:start="29:24" pos:end="29:25">40</literal></expr>;</expr_stmt>

    </block_content>}</block></if> <else pos:start="31:7" pos:end="37:5">else <block pos:start="31:12" pos:end="37:5">{<block_content pos:start="33:9" pos:end="35:26">

        <expr_stmt pos:start="33:9" pos:end="33:61"><expr pos:start="33:9" pos:end="33:60"><name pos:start="33:9" pos:end="33:12">vsid</name> <operator pos:start="33:14" pos:end="33:14">=</operator> <operator pos:start="33:16" pos:end="33:16">(</operator><name pos:start="33:17" pos:end="33:25"><name pos:start="33:17" pos:end="33:19">slb</name><operator pos:start="33:20" pos:end="33:21">-&gt;</operator><name pos:start="33:22" pos:end="33:25">vsid</name></name> <operator pos:start="33:27" pos:end="33:27">&amp;</operator> <name pos:start="33:29" pos:end="33:41">SLB_VSID_VSID</name><operator pos:start="33:42" pos:end="33:42">)</operator> <operator pos:start="33:44" pos:end="33:45">&gt;&gt;</operator> <name pos:start="33:47" pos:end="33:60">SLB_VSID_SHIFT</name></expr>;</expr_stmt>

        <expr_stmt pos:start="35:9" pos:end="35:26"><expr pos:start="35:9" pos:end="35:25"><name pos:start="35:9" pos:end="35:20">segment_bits</name> <operator pos:start="35:22" pos:end="35:22">=</operator> <literal type="number" pos:start="35:24" pos:end="35:25">28</literal></expr>;</expr_stmt>

    </block_content>}</block></else></if_stmt>



    <expr_stmt pos:start="41:5" pos:end="43:50"><expr pos:start="41:5" pos:end="43:49"><name pos:start="41:5" pos:end="41:20">target_page_bits</name> <operator pos:start="41:22" pos:end="41:22">=</operator> <ternary pos:start="41:24" pos:end="43:49"><condition pos:start="41:24" pos:end="43:9"><expr pos:start="41:24" pos:end="41:47"><operator pos:start="41:24" pos:end="41:24">(</operator><name pos:start="41:25" pos:end="41:33"><name pos:start="41:25" pos:end="41:27">slb</name><operator pos:start="41:28" pos:end="41:29">-&gt;</operator><name pos:start="41:30" pos:end="41:33">vsid</name></name> <operator pos:start="41:35" pos:end="41:35">&amp;</operator> <name pos:start="41:37" pos:end="41:46">SLB_VSID_L</name><operator pos:start="41:47" pos:end="41:47">)</operator></expr>

        ?</condition><then pos:start="43:11" pos:end="43:30"> <expr pos:start="43:11" pos:end="43:30"><name pos:start="43:11" pos:end="43:30">TARGET_PAGE_BITS_16M</name></expr> </then><else pos:start="43:32" pos:end="43:49">: <expr pos:start="43:34" pos:end="43:49"><name pos:start="43:34" pos:end="43:49">TARGET_PAGE_BITS</name></expr></else></ternary></expr>;</expr_stmt>

    <expr_stmt pos:start="45:5" pos:end="47:47"><expr pos:start="45:5" pos:end="47:46"><name pos:start="45:5" pos:end="45:12"><name pos:start="45:5" pos:end="45:7">ctx</name><operator pos:start="45:8" pos:end="45:9">-&gt;</operator><name pos:start="45:10" pos:end="45:12">key</name></name> <operator pos:start="45:14" pos:end="45:14">=</operator> <operator pos:start="45:16" pos:end="45:16">!</operator><operator pos:start="45:17" pos:end="45:17">!</operator><operator pos:start="45:18" pos:end="45:18">(</operator><ternary pos:start="45:19" pos:end="47:45"><condition pos:start="45:19" pos:end="45:26"><expr pos:start="45:19" pos:end="45:24"><name pos:start="45:19" pos:end="45:24">msr_pr</name></expr> ?</condition><then pos:start="45:28" pos:end="45:52"> <expr pos:start="45:28" pos:end="45:52"><operator pos:start="45:28" pos:end="45:28">(</operator><name pos:start="45:29" pos:end="45:37"><name pos:start="45:29" pos:end="45:31">slb</name><operator pos:start="45:32" pos:end="45:33">-&gt;</operator><name pos:start="45:34" pos:end="45:37">vsid</name></name> <operator pos:start="45:39" pos:end="45:39">&amp;</operator> <name pos:start="45:41" pos:end="45:51">SLB_VSID_KP</name><operator pos:start="45:52" pos:end="45:52">)</operator></expr>

                  </then><else pos:start="47:19" pos:end="47:45">: <expr pos:start="47:21" pos:end="47:45"><operator pos:start="47:21" pos:end="47:21">(</operator><name pos:start="47:22" pos:end="47:30"><name pos:start="47:22" pos:end="47:24">slb</name><operator pos:start="47:25" pos:end="47:26">-&gt;</operator><name pos:start="47:27" pos:end="47:30">vsid</name></name> <operator pos:start="47:32" pos:end="47:32">&amp;</operator> <name pos:start="47:34" pos:end="47:44">SLB_VSID_KS</name><operator pos:start="47:45" pos:end="47:45">)</operator></expr></else></ternary><operator pos:start="47:46" pos:end="47:46">)</operator></expr>;</expr_stmt>



    <expr_stmt pos:start="51:5" pos:end="53:58"><expr pos:start="51:5" pos:end="53:57"><name pos:start="51:5" pos:end="51:12">pageaddr</name> <operator pos:start="51:14" pos:end="51:14">=</operator> <name pos:start="51:16" pos:end="51:20">eaddr</name> <operator pos:start="51:22" pos:end="51:22">&amp;</operator> <operator pos:start="51:24" pos:end="51:24">(</operator><operator pos:start="51:25" pos:end="51:25">(</operator><literal type="number" pos:start="51:26" pos:end="51:29">1ULL</literal> <operator pos:start="51:31" pos:end="51:32">&lt;&lt;</operator> <name pos:start="51:34" pos:end="51:45">segment_bits</name><operator pos:start="51:46" pos:end="51:46">)</operator>

                            <operator pos:start="53:29" pos:end="53:29">-</operator> <operator pos:start="53:31" pos:end="53:31">(</operator><literal type="number" pos:start="53:32" pos:end="53:35">1ULL</literal> <operator pos:start="53:37" pos:end="53:38">&lt;&lt;</operator> <name pos:start="53:40" pos:end="53:55">target_page_bits</name><operator pos:start="53:56" pos:end="53:56">)</operator><operator pos:start="53:57" pos:end="53:57">)</operator></expr>;</expr_stmt>

    <if_stmt pos:start="55:5" pos:end="63:5"><if pos:start="55:5" pos:end="59:5">if <condition pos:start="55:8" pos:end="55:31">(<expr pos:start="55:9" pos:end="55:30"><name pos:start="55:9" pos:end="55:17"><name pos:start="55:9" pos:end="55:11">slb</name><operator pos:start="55:12" pos:end="55:13">-&gt;</operator><name pos:start="55:14" pos:end="55:17">vsid</name></name> <operator pos:start="55:19" pos:end="55:19">&amp;</operator> <name pos:start="55:21" pos:end="55:30">SLB_VSID_B</name></expr>)</condition> <block pos:start="55:33" pos:end="59:5">{<block_content pos:start="57:9" pos:end="57:68">

        <expr_stmt pos:start="57:9" pos:end="57:68"><expr pos:start="57:9" pos:end="57:67"><name pos:start="57:9" pos:end="57:12">hash</name> <operator pos:start="57:14" pos:end="57:14">=</operator> <name pos:start="57:16" pos:end="57:19">vsid</name> <operator pos:start="57:21" pos:end="57:21">^</operator> <operator pos:start="57:23" pos:end="57:23">(</operator><name pos:start="57:24" pos:end="57:27">vsid</name> <operator pos:start="57:29" pos:end="57:30">&lt;&lt;</operator> <literal type="number" pos:start="57:32" pos:end="57:33">25</literal><operator pos:start="57:34" pos:end="57:34">)</operator> <operator pos:start="57:36" pos:end="57:36">^</operator> <operator pos:start="57:38" pos:end="57:38">(</operator><name pos:start="57:39" pos:end="57:46">pageaddr</name> <operator pos:start="57:48" pos:end="57:49">&gt;&gt;</operator> <name pos:start="57:51" pos:end="57:66">target_page_bits</name><operator pos:start="57:67" pos:end="57:67">)</operator></expr>;</expr_stmt>

    </block_content>}</block></if> <else pos:start="59:7" pos:end="63:5">else <block pos:start="59:12" pos:end="63:5">{<block_content pos:start="61:9" pos:end="61:53">

        <expr_stmt pos:start="61:9" pos:end="61:53"><expr pos:start="61:9" pos:end="61:52"><name pos:start="61:9" pos:end="61:12">hash</name> <operator pos:start="61:14" pos:end="61:14">=</operator> <name pos:start="61:16" pos:end="61:19">vsid</name> <operator pos:start="61:21" pos:end="61:21">^</operator> <operator pos:start="61:23" pos:end="61:23">(</operator><name pos:start="61:24" pos:end="61:31">pageaddr</name> <operator pos:start="61:33" pos:end="61:34">&gt;&gt;</operator> <name pos:start="61:36" pos:end="61:51">target_page_bits</name><operator pos:start="61:52" pos:end="61:52">)</operator></expr>;</expr_stmt>

    </block_content>}</block></else></if_stmt>

    <comment type="block" pos:start="65:5" pos:end="65:60">/* Only 5 bits of the page index are used in the AVPN */</comment>

    <expr_stmt pos:start="67:5" pos:end="69:61"><expr pos:start="67:5" pos:end="69:60"><name pos:start="67:5" pos:end="67:8">ptem</name> <operator pos:start="67:10" pos:end="67:10">=</operator> <operator pos:start="67:12" pos:end="67:12">(</operator><name pos:start="67:13" pos:end="67:21"><name pos:start="67:13" pos:end="67:15">slb</name><operator pos:start="67:16" pos:end="67:17">-&gt;</operator><name pos:start="67:18" pos:end="67:21">vsid</name></name> <operator pos:start="67:23" pos:end="67:23">&amp;</operator> <name pos:start="67:25" pos:end="67:37">SLB_VSID_PTEM</name><operator pos:start="67:38" pos:end="67:38">)</operator> <operator pos:start="67:40" pos:end="67:40">|</operator>

        <operator pos:start="69:9" pos:end="69:9">(</operator><operator pos:start="69:10" pos:end="69:10">(</operator><name pos:start="69:11" pos:end="69:18">pageaddr</name> <operator pos:start="69:20" pos:end="69:21">&gt;&gt;</operator> <literal type="number" pos:start="69:23" pos:end="69:24">16</literal><operator pos:start="69:25" pos:end="69:25">)</operator> <operator pos:start="69:27" pos:end="69:27">&amp;</operator> <operator pos:start="69:29" pos:end="69:29">(</operator><operator pos:start="69:30" pos:end="69:30">(</operator><literal type="number" pos:start="69:31" pos:end="69:34">1ULL</literal> <operator pos:start="69:36" pos:end="69:37">&lt;&lt;</operator> <name pos:start="69:39" pos:end="69:50">segment_bits</name><operator pos:start="69:51" pos:end="69:51">)</operator> <operator pos:start="69:53" pos:end="69:53">-</operator> <literal type="number" pos:start="69:55" pos:end="69:58">0x80</literal><operator pos:start="69:59" pos:end="69:59">)</operator><operator pos:start="69:60" pos:end="69:60">)</operator></expr>;</expr_stmt>



    <expr_stmt pos:start="73:5" pos:end="73:13"><expr pos:start="73:5" pos:end="73:12"><name pos:start="73:5" pos:end="73:7">ret</name> <operator pos:start="73:9" pos:end="73:9">=</operator> <operator pos:start="73:11" pos:end="73:11">-</operator><literal type="number" pos:start="73:12" pos:end="73:12">1</literal></expr>;</expr_stmt>



    <comment type="block" pos:start="77:5" pos:end="77:34">/* Page address translation */</comment>

    <expr_stmt pos:start="79:5" pos:end="83:50"><expr pos:start="79:5" pos:end="83:49"><call pos:start="79:5" pos:end="83:49"><name pos:start="79:5" pos:end="79:11">LOG_MMU</name><argument_list pos:start="79:12" pos:end="83:49">(<argument pos:start="79:13" pos:end="81:40"><expr pos:start="79:13" pos:end="81:40"><literal type="string" pos:start="79:13" pos:end="79:24">"htab_base "</literal> <name pos:start="79:26" pos:end="79:39">TARGET_FMT_plx</name> <literal type="string" pos:start="79:41" pos:end="79:53">" htab_mask "</literal> <name pos:start="79:55" pos:end="79:68">TARGET_FMT_plx</name>

            <literal type="string" pos:start="81:13" pos:end="81:20">" hash "</literal> <name pos:start="81:22" pos:end="81:35">TARGET_FMT_plx</name> <literal type="string" pos:start="81:37" pos:end="81:40">"\n"</literal></expr></argument>,

            <argument pos:start="83:13" pos:end="83:26"><expr pos:start="83:13" pos:end="83:26"><name pos:start="83:13" pos:end="83:26"><name pos:start="83:13" pos:end="83:15">env</name><operator pos:start="83:16" pos:end="83:17">-&gt;</operator><name pos:start="83:18" pos:end="83:26">htab_base</name></name></expr></argument>, <argument pos:start="83:29" pos:end="83:42"><expr pos:start="83:29" pos:end="83:42"><name pos:start="83:29" pos:end="83:42"><name pos:start="83:29" pos:end="83:31">env</name><operator pos:start="83:32" pos:end="83:33">-&gt;</operator><name pos:start="83:34" pos:end="83:42">htab_mask</name></name></expr></argument>, <argument pos:start="83:45" pos:end="83:48"><expr pos:start="83:45" pos:end="83:48"><name pos:start="83:45" pos:end="83:48">hash</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>





    <comment type="block" pos:start="89:5" pos:end="89:29">/* Primary PTEG lookup */</comment>

    <expr_stmt pos:start="91:5" pos:end="97:63"><expr pos:start="91:5" pos:end="97:62"><call pos:start="91:5" pos:end="97:62"><name pos:start="91:5" pos:end="91:11">LOG_MMU</name><argument_list pos:start="91:12" pos:end="97:62">(<argument pos:start="91:13" pos:end="95:40"><expr pos:start="91:13" pos:end="95:40"><literal type="string" pos:start="91:13" pos:end="91:21">"0 htab="</literal> <name pos:start="91:23" pos:end="91:36">TARGET_FMT_plx</name> <literal type="string" pos:start="91:38" pos:end="91:40">"/"</literal> <name pos:start="91:42" pos:end="91:55">TARGET_FMT_plx</name>

            <literal type="string" pos:start="93:13" pos:end="93:20">" vsid="</literal> <name pos:start="93:22" pos:end="93:34">TARGET_FMT_lx</name> <literal type="string" pos:start="93:36" pos:end="93:43">" ptem="</literal> <name pos:start="93:45" pos:end="93:57">TARGET_FMT_lx</name>

            <literal type="string" pos:start="95:13" pos:end="95:20">" hash="</literal> <name pos:start="95:22" pos:end="95:35">TARGET_FMT_plx</name> <literal type="string" pos:start="95:37" pos:end="95:40">"\n"</literal></expr></argument>,

            <argument pos:start="97:13" pos:end="97:26"><expr pos:start="97:13" pos:end="97:26"><name pos:start="97:13" pos:end="97:26"><name pos:start="97:13" pos:end="97:15">env</name><operator pos:start="97:16" pos:end="97:17">-&gt;</operator><name pos:start="97:18" pos:end="97:26">htab_base</name></name></expr></argument>, <argument pos:start="97:29" pos:end="97:42"><expr pos:start="97:29" pos:end="97:42"><name pos:start="97:29" pos:end="97:42"><name pos:start="97:29" pos:end="97:31">env</name><operator pos:start="97:32" pos:end="97:33">-&gt;</operator><name pos:start="97:34" pos:end="97:42">htab_mask</name></name></expr></argument>, <argument pos:start="97:45" pos:end="97:48"><expr pos:start="97:45" pos:end="97:48"><name pos:start="97:45" pos:end="97:48">vsid</name></expr></argument>, <argument pos:start="97:51" pos:end="97:54"><expr pos:start="97:51" pos:end="97:54"><name pos:start="97:51" pos:end="97:54">ptem</name></expr></argument>,  <argument pos:start="97:58" pos:end="97:61"><expr pos:start="97:58" pos:end="97:61"><name pos:start="97:58" pos:end="97:61">hash</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    <expr_stmt pos:start="99:5" pos:end="99:59"><expr pos:start="99:5" pos:end="99:58"><name pos:start="99:5" pos:end="99:12">pteg_off</name> <operator pos:start="99:14" pos:end="99:14">=</operator> <operator pos:start="99:16" pos:end="99:16">(</operator><name pos:start="99:17" pos:end="99:20">hash</name> <operator pos:start="99:22" pos:end="99:22">*</operator> <name pos:start="99:24" pos:end="99:40">HASH_PTEG_SIZE_64</name><operator pos:start="99:41" pos:end="99:41">)</operator> <operator pos:start="99:43" pos:end="99:43">&amp;</operator> <name pos:start="99:45" pos:end="99:58"><name pos:start="99:45" pos:end="99:47">env</name><operator pos:start="99:48" pos:end="99:49">-&gt;</operator><name pos:start="99:50" pos:end="99:58">htab_mask</name></name></expr>;</expr_stmt>

    <expr_stmt pos:start="101:5" pos:end="101:70"><expr pos:start="101:5" pos:end="101:69"><name pos:start="101:5" pos:end="101:14">pte_offset</name> <operator pos:start="101:16" pos:end="101:16">=</operator> <call pos:start="101:18" pos:end="101:69"><name pos:start="101:18" pos:end="101:39">ppc_hash64_pteg_search</name><argument_list pos:start="101:40" pos:end="101:69">(<argument pos:start="101:41" pos:end="101:43"><expr pos:start="101:41" pos:end="101:43"><name pos:start="101:41" pos:end="101:43">env</name></expr></argument>, <argument pos:start="101:46" pos:end="101:53"><expr pos:start="101:46" pos:end="101:53"><name pos:start="101:46" pos:end="101:53">pteg_off</name></expr></argument>, <argument pos:start="101:56" pos:end="101:56"><expr pos:start="101:56" pos:end="101:56"><literal type="number" pos:start="101:56" pos:end="101:56">0</literal></expr></argument>, <argument pos:start="101:59" pos:end="101:62"><expr pos:start="101:59" pos:end="101:62"><name pos:start="101:59" pos:end="101:62">ptem</name></expr></argument>, <argument pos:start="101:65" pos:end="101:68"><expr pos:start="101:65" pos:end="101:68"><operator pos:start="101:65" pos:end="101:65">&amp;</operator><name pos:start="101:66" pos:end="101:68">pte</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    <if_stmt pos:start="103:5" pos:end="121:5"><if pos:start="103:5" pos:end="121:5">if <condition pos:start="103:8" pos:end="103:25">(<expr pos:start="103:9" pos:end="103:24"><name pos:start="103:9" pos:end="103:18">pte_offset</name> <operator pos:start="103:20" pos:end="103:21">==</operator> <operator pos:start="103:23" pos:end="103:23">-</operator><literal type="number" pos:start="103:24" pos:end="103:24">1</literal></expr>)</condition> <block pos:start="103:27" pos:end="121:5">{<block_content pos:start="107:9" pos:end="119:74">

        <comment type="block" pos:start="105:9" pos:end="105:35">/* Secondary PTEG lookup */</comment>

        <expr_stmt pos:start="107:9" pos:end="113:51"><expr pos:start="107:9" pos:end="113:50"><call pos:start="107:9" pos:end="113:50"><name pos:start="107:9" pos:end="107:15">LOG_MMU</name><argument_list pos:start="107:16" pos:end="113:50">(<argument pos:start="107:17" pos:end="111:44"><expr pos:start="107:17" pos:end="111:44"><literal type="string" pos:start="107:17" pos:end="107:25">"1 htab="</literal> <name pos:start="107:27" pos:end="107:40">TARGET_FMT_plx</name> <literal type="string" pos:start="107:42" pos:end="107:44">"/"</literal> <name pos:start="107:46" pos:end="107:59">TARGET_FMT_plx</name>

                <literal type="string" pos:start="109:17" pos:end="109:24">" vsid="</literal> <name pos:start="109:26" pos:end="109:38">TARGET_FMT_lx</name> <literal type="string" pos:start="109:40" pos:end="109:46">" api="</literal> <name pos:start="109:48" pos:end="109:60">TARGET_FMT_lx</name>

                <literal type="string" pos:start="111:17" pos:end="111:24">" hash="</literal> <name pos:start="111:26" pos:end="111:39">TARGET_FMT_plx</name> <literal type="string" pos:start="111:41" pos:end="111:44">"\n"</literal></expr></argument>, <argument pos:start="111:47" pos:end="111:60"><expr pos:start="111:47" pos:end="111:60"><name pos:start="111:47" pos:end="111:60"><name pos:start="111:47" pos:end="111:49">env</name><operator pos:start="111:50" pos:end="111:51">-&gt;</operator><name pos:start="111:52" pos:end="111:60">htab_base</name></name></expr></argument>,

                <argument pos:start="113:17" pos:end="113:30"><expr pos:start="113:17" pos:end="113:30"><name pos:start="113:17" pos:end="113:30"><name pos:start="113:17" pos:end="113:19">env</name><operator pos:start="113:20" pos:end="113:21">-&gt;</operator><name pos:start="113:22" pos:end="113:30">htab_mask</name></name></expr></argument>, <argument pos:start="113:33" pos:end="113:36"><expr pos:start="113:33" pos:end="113:36"><name pos:start="113:33" pos:end="113:36">vsid</name></expr></argument>, <argument pos:start="113:39" pos:end="113:42"><expr pos:start="113:39" pos:end="113:42"><name pos:start="113:39" pos:end="113:42">ptem</name></expr></argument>, <argument pos:start="113:45" pos:end="113:49"><expr pos:start="113:45" pos:end="113:49"><operator pos:start="113:45" pos:end="113:45">~</operator><name pos:start="113:46" pos:end="113:49">hash</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>



        <expr_stmt pos:start="117:9" pos:end="117:64"><expr pos:start="117:9" pos:end="117:63"><name pos:start="117:9" pos:end="117:16">pteg_off</name> <operator pos:start="117:18" pos:end="117:18">=</operator> <operator pos:start="117:20" pos:end="117:20">(</operator><operator pos:start="117:21" pos:end="117:21">~</operator><name pos:start="117:22" pos:end="117:25">hash</name> <operator pos:start="117:27" pos:end="117:27">*</operator> <name pos:start="117:29" pos:end="117:45">HASH_PTEG_SIZE_64</name><operator pos:start="117:46" pos:end="117:46">)</operator> <operator pos:start="117:48" pos:end="117:48">&amp;</operator> <name pos:start="117:50" pos:end="117:63"><name pos:start="117:50" pos:end="117:52">env</name><operator pos:start="117:53" pos:end="117:54">-&gt;</operator><name pos:start="117:55" pos:end="117:63">htab_mask</name></name></expr>;</expr_stmt>

        <expr_stmt pos:start="119:9" pos:end="119:74"><expr pos:start="119:9" pos:end="119:73"><name pos:start="119:9" pos:end="119:18">pte_offset</name> <operator pos:start="119:20" pos:end="119:20">=</operator> <call pos:start="119:22" pos:end="119:73"><name pos:start="119:22" pos:end="119:43">ppc_hash64_pteg_search</name><argument_list pos:start="119:44" pos:end="119:73">(<argument pos:start="119:45" pos:end="119:47"><expr pos:start="119:45" pos:end="119:47"><name pos:start="119:45" pos:end="119:47">env</name></expr></argument>, <argument pos:start="119:50" pos:end="119:57"><expr pos:start="119:50" pos:end="119:57"><name pos:start="119:50" pos:end="119:57">pteg_off</name></expr></argument>, <argument pos:start="119:60" pos:end="119:60"><expr pos:start="119:60" pos:end="119:60"><literal type="number" pos:start="119:60" pos:end="119:60">1</literal></expr></argument>, <argument pos:start="119:63" pos:end="119:66"><expr pos:start="119:63" pos:end="119:66"><name pos:start="119:63" pos:end="119:66">ptem</name></expr></argument>, <argument pos:start="119:69" pos:end="119:72"><expr pos:start="119:69" pos:end="119:72"><operator pos:start="119:69" pos:end="119:69">&amp;</operator><name pos:start="119:70" pos:end="119:72">pte</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    </block_content>}</block></if></if_stmt>



    <if_stmt pos:start="125:5" pos:end="141:5"><if pos:start="125:5" pos:end="141:5">if <condition pos:start="125:8" pos:end="125:25">(<expr pos:start="125:9" pos:end="125:24"><name pos:start="125:9" pos:end="125:18">pte_offset</name> <operator pos:start="125:20" pos:end="125:21">!=</operator> <operator pos:start="125:23" pos:end="125:23">-</operator><literal type="number" pos:start="125:24" pos:end="125:24">1</literal></expr>)</condition> <block pos:start="125:27" pos:end="141:5">{<block_content pos:start="127:9" pos:end="139:9">

        <expr_stmt pos:start="127:9" pos:end="127:56"><expr pos:start="127:9" pos:end="127:55"><name pos:start="127:9" pos:end="127:11">ret</name> <operator pos:start="127:13" pos:end="127:13">=</operator> <call pos:start="127:15" pos:end="127:55"><name pos:start="127:15" pos:end="127:25">pte64_check</name><argument_list pos:start="127:26" pos:end="127:55">(<argument pos:start="127:27" pos:end="127:29"><expr pos:start="127:27" pos:end="127:29"><name pos:start="127:27" pos:end="127:29">ctx</name></expr></argument>, <argument pos:start="127:32" pos:end="127:39"><expr pos:start="127:32" pos:end="127:39"><name pos:start="127:32" pos:end="127:39"><name pos:start="127:32" pos:end="127:34">pte</name><operator pos:start="127:35" pos:end="127:35">.</operator><name pos:start="127:36" pos:end="127:39">pte0</name></name></expr></argument>, <argument pos:start="127:42" pos:end="127:49"><expr pos:start="127:42" pos:end="127:49"><name pos:start="127:42" pos:end="127:49"><name pos:start="127:42" pos:end="127:44">pte</name><operator pos:start="127:45" pos:end="127:45">.</operator><name pos:start="127:46" pos:end="127:49">pte1</name></name></expr></argument>, <argument pos:start="127:52" pos:end="127:54"><expr pos:start="127:52" pos:end="127:54"><name pos:start="127:52" pos:end="127:54">rwx</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <expr_stmt pos:start="129:9" pos:end="131:44"><expr pos:start="129:9" pos:end="131:43"><call pos:start="129:9" pos:end="131:43"><name pos:start="129:9" pos:end="129:15">LOG_MMU</name><argument_list pos:start="129:16" pos:end="131:43">(<argument pos:start="129:17" pos:end="129:73"><expr pos:start="129:17" pos:end="129:73"><literal type="string" pos:start="129:17" pos:end="129:39">"found PTE at addr %08"</literal> <name pos:start="129:41" pos:end="129:51">HWADDR_PRIx</name> <literal type="string" pos:start="129:53" pos:end="129:73">" prot=%01x ret=%d\n"</literal></expr></argument>,

                <argument pos:start="131:17" pos:end="131:26"><expr pos:start="131:17" pos:end="131:26"><name pos:start="131:17" pos:end="131:26"><name pos:start="131:17" pos:end="131:19">ctx</name><operator pos:start="131:20" pos:end="131:21">-&gt;</operator><name pos:start="131:22" pos:end="131:26">raddr</name></name></expr></argument>, <argument pos:start="131:29" pos:end="131:37"><expr pos:start="131:29" pos:end="131:37"><name pos:start="131:29" pos:end="131:37"><name pos:start="131:29" pos:end="131:31">ctx</name><operator pos:start="131:32" pos:end="131:33">-&gt;</operator><name pos:start="131:34" pos:end="131:37">prot</name></name></expr></argument>, <argument pos:start="131:40" pos:end="131:42"><expr pos:start="131:40" pos:end="131:42"><name pos:start="131:40" pos:end="131:42">ret</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <comment type="block" pos:start="133:9" pos:end="133:31">/* Update page flags */</comment>

        <if_stmt pos:start="135:9" pos:end="139:9"><if pos:start="135:9" pos:end="139:9">if <condition pos:start="135:12" pos:end="135:71">(<expr pos:start="135:13" pos:end="135:70"><call pos:start="135:13" pos:end="135:65"><name pos:start="135:13" pos:end="135:39">ppc_hash64_pte_update_flags</name><argument_list pos:start="135:40" pos:end="135:65">(<argument pos:start="135:41" pos:end="135:43"><expr pos:start="135:41" pos:end="135:43"><name pos:start="135:41" pos:end="135:43">ctx</name></expr></argument>, <argument pos:start="135:46" pos:end="135:54"><expr pos:start="135:46" pos:end="135:54"><operator pos:start="135:46" pos:end="135:46">&amp;</operator><name pos:start="135:47" pos:end="135:54"><name pos:start="135:47" pos:end="135:49">pte</name><operator pos:start="135:50" pos:end="135:50">.</operator><name pos:start="135:51" pos:end="135:54">pte1</name></name></expr></argument>, <argument pos:start="135:57" pos:end="135:59"><expr pos:start="135:57" pos:end="135:59"><name pos:start="135:57" pos:end="135:59">ret</name></expr></argument>, <argument pos:start="135:62" pos:end="135:64"><expr pos:start="135:62" pos:end="135:64"><name pos:start="135:62" pos:end="135:64">rwx</name></expr></argument>)</argument_list></call> <operator pos:start="135:67" pos:end="135:68">==</operator> <literal type="number" pos:start="135:70" pos:end="135:70">1</literal></expr>)</condition> <block pos:start="135:73" pos:end="139:9">{<block_content pos:start="137:13" pos:end="137:62">

            <expr_stmt pos:start="137:13" pos:end="137:62"><expr pos:start="137:13" pos:end="137:61"><call pos:start="137:13" pos:end="137:61"><name pos:start="137:13" pos:end="137:34">ppc_hash64_store_hpte1</name><argument_list pos:start="137:35" pos:end="137:61">(<argument pos:start="137:36" pos:end="137:38"><expr pos:start="137:36" pos:end="137:38"><name pos:start="137:36" pos:end="137:38">env</name></expr></argument>, <argument pos:start="137:41" pos:end="137:50"><expr pos:start="137:41" pos:end="137:50"><name pos:start="137:41" pos:end="137:50">pte_offset</name></expr></argument>, <argument pos:start="137:53" pos:end="137:60"><expr pos:start="137:53" pos:end="137:60"><name pos:start="137:53" pos:end="137:60"><name pos:start="137:53" pos:end="137:55">pte</name><operator pos:start="137:56" pos:end="137:56">.</operator><name pos:start="137:57" pos:end="137:60">pte1</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        </block_content>}</block></if></if_stmt>

    </block_content>}</block></if></if_stmt>



    <comment type="block" pos:start="145:5" pos:end="147:40">/* We have a TLB that saves 4K pages, so let's

     * split a huge page to 4k chunks */</comment>

    <if_stmt pos:start="149:5" pos:end="155:5"><if pos:start="149:5" pos:end="155:5">if <condition pos:start="149:8" pos:end="149:45">(<expr pos:start="149:9" pos:end="149:44"><name pos:start="149:9" pos:end="149:24">target_page_bits</name> <operator pos:start="149:26" pos:end="149:27">!=</operator> <name pos:start="149:29" pos:end="149:44">TARGET_PAGE_BITS</name></expr>)</condition> <block pos:start="149:47" pos:end="155:5">{<block_content pos:start="151:9" pos:end="153:41">

        <expr_stmt pos:start="151:9" pos:end="153:41"><expr pos:start="151:9" pos:end="153:40"><name pos:start="151:9" pos:end="151:18"><name pos:start="151:9" pos:end="151:11">ctx</name><operator pos:start="151:12" pos:end="151:13">-&gt;</operator><name pos:start="151:14" pos:end="151:18">raddr</name></name> <operator pos:start="151:20" pos:end="151:21">|=</operator> <operator pos:start="151:23" pos:end="151:23">(</operator><name pos:start="151:24" pos:end="151:28">eaddr</name> <operator pos:start="151:30" pos:end="151:30">&amp;</operator> <operator pos:start="151:32" pos:end="151:32">(</operator><operator pos:start="151:33" pos:end="151:33">(</operator><literal type="number" pos:start="151:34" pos:end="151:34">1</literal> <operator pos:start="151:36" pos:end="151:37">&lt;&lt;</operator> <name pos:start="151:39" pos:end="151:54">target_page_bits</name><operator pos:start="151:55" pos:end="151:55">)</operator> <operator pos:start="151:57" pos:end="151:57">-</operator> <literal type="number" pos:start="151:59" pos:end="151:59">1</literal><operator pos:start="151:60" pos:end="151:60">)</operator><operator pos:start="151:61" pos:end="151:61">)</operator>

                      <operator pos:start="153:23" pos:end="153:23">&amp;</operator> <name pos:start="153:25" pos:end="153:40">TARGET_PAGE_MASK</name></expr>;</expr_stmt>

    </block_content>}</block></if></if_stmt>

    <return pos:start="157:5" pos:end="157:15">return <expr pos:start="157:12" pos:end="157:14"><name pos:start="157:12" pos:end="157:14">ret</name></expr>;</return>

</block_content>}</block></function>
</unit>
