<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<unit xmlns="http://www.srcML.org/srcML/src" xmlns:pos="http://www.srcML.org/srcML/position" revision="1.0.0" language="C" filename="dataset/ropgen/aug/0/5096.c" pos:tabs="8"><function pos:start="1:1" pos:end="81:1"><type pos:start="1:1" pos:end="1:11"><specifier pos:start="1:1" pos:end="1:6">static</specifier> <name pos:start="1:8" pos:end="1:11">void</name></type> <name pos:start="1:13" pos:end="1:28">v9fs_xattrcreate</name><parameter_list pos:start="1:29" pos:end="1:42">(<parameter pos:start="1:30" pos:end="1:41"><decl pos:start="1:30" pos:end="1:41"><type pos:start="1:30" pos:end="1:35"><name pos:start="1:30" pos:end="1:33">void</name> <modifier pos:start="1:35" pos:end="1:35">*</modifier></type><name pos:start="1:36" pos:end="1:41">opaque</name></decl></parameter>)</parameter_list>

<block pos:start="3:1" pos:end="81:1">{<block_content pos:start="5:5" pos:end="79:28">

    <decl_stmt pos:start="5:5" pos:end="5:14"><decl pos:start="5:5" pos:end="5:13"><type pos:start="5:5" pos:end="5:7"><name pos:start="5:5" pos:end="5:7">int</name></type> <name pos:start="5:9" pos:end="5:13">flags</name></decl>;</decl_stmt>

    <decl_stmt pos:start="7:5" pos:end="7:16"><decl pos:start="7:5" pos:end="7:15"><type pos:start="7:5" pos:end="7:11"><name pos:start="7:5" pos:end="7:11">int32_t</name></type> <name pos:start="7:13" pos:end="7:15">fid</name></decl>;</decl_stmt>

    <decl_stmt pos:start="9:5" pos:end="9:17"><decl pos:start="9:5" pos:end="9:16"><type pos:start="9:5" pos:end="9:11"><name pos:start="9:5" pos:end="9:11">int64_t</name></type> <name pos:start="9:13" pos:end="9:16">size</name></decl>;</decl_stmt>

    <decl_stmt pos:start="11:5" pos:end="11:20"><decl pos:start="11:5" pos:end="11:19"><type pos:start="11:5" pos:end="11:11"><name pos:start="11:5" pos:end="11:11">ssize_t</name></type> <name pos:start="11:13" pos:end="11:15">err</name> <init pos:start="11:17" pos:end="11:19">= <expr pos:start="11:19" pos:end="11:19"><literal type="number" pos:start="11:19" pos:end="11:19">0</literal></expr></init></decl>;</decl_stmt>

    <decl_stmt pos:start="13:5" pos:end="13:20"><decl pos:start="13:5" pos:end="13:19"><type pos:start="13:5" pos:end="13:14"><name pos:start="13:5" pos:end="13:14">V9fsString</name></type> <name pos:start="13:16" pos:end="13:19">name</name></decl>;</decl_stmt>

    <decl_stmt pos:start="15:5" pos:end="15:22"><decl pos:start="15:5" pos:end="15:21"><type pos:start="15:5" pos:end="15:10"><name pos:start="15:5" pos:end="15:10">size_t</name></type> <name pos:start="15:12" pos:end="15:17">offset</name> <init pos:start="15:19" pos:end="15:21">= <expr pos:start="15:21" pos:end="15:21"><literal type="number" pos:start="15:21" pos:end="15:21">7</literal></expr></init></decl>;</decl_stmt>

    <decl_stmt pos:start="17:5" pos:end="17:28"><decl pos:start="17:5" pos:end="17:27"><type pos:start="17:5" pos:end="17:18"><name pos:start="17:5" pos:end="17:16">V9fsFidState</name> <modifier pos:start="17:18" pos:end="17:18">*</modifier></type><name pos:start="17:19" pos:end="17:27">file_fidp</name></decl>;</decl_stmt>

    <decl_stmt pos:start="19:5" pos:end="19:29"><decl pos:start="19:5" pos:end="19:28"><type pos:start="19:5" pos:end="19:18"><name pos:start="19:5" pos:end="19:16">V9fsFidState</name> <modifier pos:start="19:18" pos:end="19:18">*</modifier></type><name pos:start="19:19" pos:end="19:28">xattr_fidp</name></decl>;</decl_stmt>

    <decl_stmt pos:start="21:5" pos:end="21:26"><decl pos:start="21:5" pos:end="21:25"><type pos:start="21:5" pos:end="21:13"><name pos:start="21:5" pos:end="21:11">V9fsPDU</name> <modifier pos:start="21:13" pos:end="21:13">*</modifier></type><name pos:start="21:14" pos:end="21:16">pdu</name> <init pos:start="21:18" pos:end="21:25">= <expr pos:start="21:20" pos:end="21:25"><name pos:start="21:20" pos:end="21:25">opaque</name></expr></init></decl>;</decl_stmt>

    <decl_stmt pos:start="23:5" pos:end="23:26"><decl pos:start="23:5" pos:end="23:25"><type pos:start="23:5" pos:end="23:15"><name pos:start="23:5" pos:end="23:13">V9fsState</name> <modifier pos:start="23:15" pos:end="23:15">*</modifier></type><name pos:start="23:16" pos:end="23:16">s</name> <init pos:start="23:18" pos:end="23:25">= <expr pos:start="23:20" pos:end="23:25"><name pos:start="23:20" pos:end="23:25"><name pos:start="23:20" pos:end="23:22">pdu</name><operator pos:start="23:23" pos:end="23:24">-&gt;</operator><name pos:start="23:25" pos:end="23:25">s</name></name></expr></init></decl>;</decl_stmt>



    <expr_stmt pos:start="27:5" pos:end="29:46"><expr pos:start="27:5" pos:end="29:45"><call pos:start="27:5" pos:end="29:45"><name pos:start="27:5" pos:end="27:17">pdu_unmarshal</name><argument_list pos:start="27:18" pos:end="29:45">(<argument pos:start="27:19" pos:end="27:21"><expr pos:start="27:19" pos:end="27:21"><name pos:start="27:19" pos:end="27:21">pdu</name></expr></argument>, <argument pos:start="27:24" pos:end="27:29"><expr pos:start="27:24" pos:end="27:29"><name pos:start="27:24" pos:end="27:29">offset</name></expr></argument>, <argument pos:start="27:32" pos:end="27:37"><expr pos:start="27:32" pos:end="27:37"><literal type="string" pos:start="27:32" pos:end="27:37">"dsqd"</literal></expr></argument>,

                  <argument pos:start="29:19" pos:end="29:22"><expr pos:start="29:19" pos:end="29:22"><operator pos:start="29:19" pos:end="29:19">&amp;</operator><name pos:start="29:20" pos:end="29:22">fid</name></expr></argument>, <argument pos:start="29:25" pos:end="29:29"><expr pos:start="29:25" pos:end="29:29"><operator pos:start="29:25" pos:end="29:25">&amp;</operator><name pos:start="29:26" pos:end="29:29">name</name></expr></argument>, <argument pos:start="29:32" pos:end="29:36"><expr pos:start="29:32" pos:end="29:36"><operator pos:start="29:32" pos:end="29:32">&amp;</operator><name pos:start="29:33" pos:end="29:36">size</name></expr></argument>, <argument pos:start="29:39" pos:end="29:44"><expr pos:start="29:39" pos:end="29:44"><operator pos:start="29:39" pos:end="29:39">&amp;</operator><name pos:start="29:40" pos:end="29:44">flags</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    <expr_stmt pos:start="31:5" pos:end="31:75"><expr pos:start="31:5" pos:end="31:74"><call pos:start="31:5" pos:end="31:74"><name pos:start="31:5" pos:end="31:26">trace_v9fs_xattrcreate</name><argument_list pos:start="31:27" pos:end="31:74">(<argument pos:start="31:28" pos:end="31:35"><expr pos:start="31:28" pos:end="31:35"><name pos:start="31:28" pos:end="31:35"><name pos:start="31:28" pos:end="31:30">pdu</name><operator pos:start="31:31" pos:end="31:32">-&gt;</operator><name pos:start="31:33" pos:end="31:35">tag</name></name></expr></argument>, <argument pos:start="31:38" pos:end="31:44"><expr pos:start="31:38" pos:end="31:44"><name pos:start="31:38" pos:end="31:44"><name pos:start="31:38" pos:end="31:40">pdu</name><operator pos:start="31:41" pos:end="31:42">-&gt;</operator><name pos:start="31:43" pos:end="31:44">id</name></name></expr></argument>, <argument pos:start="31:47" pos:end="31:49"><expr pos:start="31:47" pos:end="31:49"><name pos:start="31:47" pos:end="31:49">fid</name></expr></argument>, <argument pos:start="31:52" pos:end="31:60"><expr pos:start="31:52" pos:end="31:60"><name pos:start="31:52" pos:end="31:60"><name pos:start="31:52" pos:end="31:55">name</name><operator pos:start="31:56" pos:end="31:56">.</operator><name pos:start="31:57" pos:end="31:60">data</name></name></expr></argument>, <argument pos:start="31:63" pos:end="31:66"><expr pos:start="31:63" pos:end="31:66"><name pos:start="31:63" pos:end="31:66">size</name></expr></argument>, <argument pos:start="31:69" pos:end="31:73"><expr pos:start="31:69" pos:end="31:73"><name pos:start="31:69" pos:end="31:73">flags</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>



    <expr_stmt pos:start="35:5" pos:end="35:34"><expr pos:start="35:5" pos:end="35:33"><name pos:start="35:5" pos:end="35:13">file_fidp</name> <operator pos:start="35:15" pos:end="35:15">=</operator> <call pos:start="35:17" pos:end="35:33"><name pos:start="35:17" pos:end="35:23">get_fid</name><argument_list pos:start="35:24" pos:end="35:33">(<argument pos:start="35:25" pos:end="35:27"><expr pos:start="35:25" pos:end="35:27"><name pos:start="35:25" pos:end="35:27">pdu</name></expr></argument>, <argument pos:start="35:30" pos:end="35:32"><expr pos:start="35:30" pos:end="35:32"><name pos:start="35:30" pos:end="35:32">fid</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    <if_stmt pos:start="37:5" pos:end="43:5"><if pos:start="37:5" pos:end="43:5">if <condition pos:start="37:8" pos:end="37:26">(<expr pos:start="37:9" pos:end="37:25"><name pos:start="37:9" pos:end="37:17">file_fidp</name> <operator pos:start="37:19" pos:end="37:20">==</operator> <name pos:start="37:22" pos:end="37:25">NULL</name></expr>)</condition> <block pos:start="37:28" pos:end="43:5">{<block_content pos:start="39:9" pos:end="41:23">

        <expr_stmt pos:start="39:9" pos:end="39:22"><expr pos:start="39:9" pos:end="39:21"><name pos:start="39:9" pos:end="39:11">err</name> <operator pos:start="39:13" pos:end="39:13">=</operator> <operator pos:start="39:15" pos:end="39:15">-</operator><name pos:start="39:16" pos:end="39:21">EINVAL</name></expr>;</expr_stmt>

        <goto pos:start="41:9" pos:end="41:23">goto <name pos:start="41:14" pos:end="41:22">out_nofid</name>;</goto>

    </block_content>}</block></if></if_stmt>

    <comment type="block" pos:start="45:5" pos:end="45:42">/* Make the file fid point to xattr */</comment>

    <expr_stmt pos:start="47:5" pos:end="47:27"><expr pos:start="47:5" pos:end="47:26"><name pos:start="47:5" pos:end="47:14">xattr_fidp</name> <operator pos:start="47:16" pos:end="47:16">=</operator> <name pos:start="47:18" pos:end="47:26">file_fidp</name></expr>;</expr_stmt>

    <expr_stmt pos:start="49:5" pos:end="49:40"><expr pos:start="49:5" pos:end="49:39"><name pos:start="49:5" pos:end="49:24"><name pos:start="49:5" pos:end="49:14">xattr_fidp</name><operator pos:start="49:15" pos:end="49:16">-&gt;</operator><name pos:start="49:17" pos:end="49:24">fid_type</name></name> <operator pos:start="49:26" pos:end="49:26">=</operator> <name pos:start="49:28" pos:end="49:39">P9_FID_XATTR</name></expr>;</expr_stmt>

    <expr_stmt pos:start="51:5" pos:end="51:40"><expr pos:start="51:5" pos:end="51:39"><name pos:start="51:5" pos:end="51:35"><name pos:start="51:5" pos:end="51:14">xattr_fidp</name><operator pos:start="51:15" pos:end="51:16">-&gt;</operator><name pos:start="51:17" pos:end="51:18">fs</name><operator pos:start="51:19" pos:end="51:19">.</operator><name pos:start="51:20" pos:end="51:24">xattr</name><operator pos:start="51:25" pos:end="51:25">.</operator><name pos:start="51:26" pos:end="51:35">copied_len</name></name> <operator pos:start="51:37" pos:end="51:37">=</operator> <literal type="number" pos:start="51:39" pos:end="51:39">0</literal></expr>;</expr_stmt>

    <expr_stmt pos:start="53:5" pos:end="53:36"><expr pos:start="53:5" pos:end="53:35"><name pos:start="53:5" pos:end="53:28"><name pos:start="53:5" pos:end="53:14">xattr_fidp</name><operator pos:start="53:15" pos:end="53:16">-&gt;</operator><name pos:start="53:17" pos:end="53:18">fs</name><operator pos:start="53:19" pos:end="53:19">.</operator><name pos:start="53:20" pos:end="53:24">xattr</name><operator pos:start="53:25" pos:end="53:25">.</operator><name pos:start="53:26" pos:end="53:28">len</name></name> <operator pos:start="53:30" pos:end="53:30">=</operator> <name pos:start="53:32" pos:end="53:35">size</name></expr>;</expr_stmt>

    <expr_stmt pos:start="55:5" pos:end="55:39"><expr pos:start="55:5" pos:end="55:38"><name pos:start="55:5" pos:end="55:30"><name pos:start="55:5" pos:end="55:14">xattr_fidp</name><operator pos:start="55:15" pos:end="55:16">-&gt;</operator><name pos:start="55:17" pos:end="55:18">fs</name><operator pos:start="55:19" pos:end="55:19">.</operator><name pos:start="55:20" pos:end="55:24">xattr</name><operator pos:start="55:25" pos:end="55:25">.</operator><name pos:start="55:26" pos:end="55:30">flags</name></name> <operator pos:start="55:32" pos:end="55:32">=</operator> <name pos:start="55:34" pos:end="55:38">flags</name></expr>;</expr_stmt>

    <expr_stmt pos:start="57:5" pos:end="57:49"><expr pos:start="57:5" pos:end="57:48"><call pos:start="57:5" pos:end="57:48"><name pos:start="57:5" pos:end="57:20">v9fs_string_init</name><argument_list pos:start="57:21" pos:end="57:48">(<argument pos:start="57:22" pos:end="57:47"><expr pos:start="57:22" pos:end="57:47"><operator pos:start="57:22" pos:end="57:22">&amp;</operator><name pos:start="57:23" pos:end="57:47"><name pos:start="57:23" pos:end="57:32">xattr_fidp</name><operator pos:start="57:33" pos:end="57:34">-&gt;</operator><name pos:start="57:35" pos:end="57:36">fs</name><operator pos:start="57:37" pos:end="57:37">.</operator><name pos:start="57:38" pos:end="57:42">xattr</name><operator pos:start="57:43" pos:end="57:43">.</operator><name pos:start="57:44" pos:end="57:47">name</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    <expr_stmt pos:start="59:5" pos:end="59:56"><expr pos:start="59:5" pos:end="59:55"><call pos:start="59:5" pos:end="59:55"><name pos:start="59:5" pos:end="59:20">v9fs_string_copy</name><argument_list pos:start="59:21" pos:end="59:55">(<argument pos:start="59:22" pos:end="59:47"><expr pos:start="59:22" pos:end="59:47"><operator pos:start="59:22" pos:end="59:22">&amp;</operator><name pos:start="59:23" pos:end="59:47"><name pos:start="59:23" pos:end="59:32">xattr_fidp</name><operator pos:start="59:33" pos:end="59:34">-&gt;</operator><name pos:start="59:35" pos:end="59:36">fs</name><operator pos:start="59:37" pos:end="59:37">.</operator><name pos:start="59:38" pos:end="59:42">xattr</name><operator pos:start="59:43" pos:end="59:43">.</operator><name pos:start="59:44" pos:end="59:47">name</name></name></expr></argument>, <argument pos:start="59:50" pos:end="59:54"><expr pos:start="59:50" pos:end="59:54"><operator pos:start="59:50" pos:end="59:50">&amp;</operator><name pos:start="59:51" pos:end="59:54">name</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    <if_stmt pos:start="61:5" pos:end="69:5"><if pos:start="61:5" pos:end="65:5">if <condition pos:start="61:8" pos:end="61:13">(<expr pos:start="61:9" pos:end="61:12"><name pos:start="61:9" pos:end="61:12">size</name></expr>)</condition> <block pos:start="61:15" pos:end="65:5">{<block_content pos:start="63:9" pos:end="63:52">

        <expr_stmt pos:start="63:9" pos:end="63:52"><expr pos:start="63:9" pos:end="63:51"><name pos:start="63:9" pos:end="63:34"><name pos:start="63:9" pos:end="63:18">xattr_fidp</name><operator pos:start="63:19" pos:end="63:20">-&gt;</operator><name pos:start="63:21" pos:end="63:22">fs</name><operator pos:start="63:23" pos:end="63:23">.</operator><name pos:start="63:24" pos:end="63:28">xattr</name><operator pos:start="63:29" pos:end="63:29">.</operator><name pos:start="63:30" pos:end="63:34">value</name></name> <operator pos:start="63:36" pos:end="63:36">=</operator> <call pos:start="63:38" pos:end="63:51"><name pos:start="63:38" pos:end="63:45">g_malloc</name><argument_list pos:start="63:46" pos:end="63:51">(<argument pos:start="63:47" pos:end="63:50"><expr pos:start="63:47" pos:end="63:50"><name pos:start="63:47" pos:end="63:50">size</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    </block_content>}</block></if> <else pos:start="65:7" pos:end="69:5">else <block pos:start="65:12" pos:end="69:5">{<block_content pos:start="67:9" pos:end="67:42">

        <expr_stmt pos:start="67:9" pos:end="67:42"><expr pos:start="67:9" pos:end="67:41"><name pos:start="67:9" pos:end="67:34"><name pos:start="67:9" pos:end="67:18">xattr_fidp</name><operator pos:start="67:19" pos:end="67:20">-&gt;</operator><name pos:start="67:21" pos:end="67:22">fs</name><operator pos:start="67:23" pos:end="67:23">.</operator><name pos:start="67:24" pos:end="67:28">xattr</name><operator pos:start="67:29" pos:end="67:29">.</operator><name pos:start="67:30" pos:end="67:34">value</name></name> <operator pos:start="67:36" pos:end="67:36">=</operator> <name pos:start="67:38" pos:end="67:41">NULL</name></expr>;</expr_stmt>

    </block_content>}</block></else></if_stmt>

    <expr_stmt pos:start="71:5" pos:end="71:17"><expr pos:start="71:5" pos:end="71:16"><name pos:start="71:5" pos:end="71:7">err</name> <operator pos:start="71:9" pos:end="71:9">=</operator> <name pos:start="71:11" pos:end="71:16">offset</name></expr>;</expr_stmt>

    <expr_stmt pos:start="73:5" pos:end="73:28"><expr pos:start="73:5" pos:end="73:27"><call pos:start="73:5" pos:end="73:27"><name pos:start="73:5" pos:end="73:11">put_fid</name><argument_list pos:start="73:12" pos:end="73:27">(<argument pos:start="73:13" pos:end="73:15"><expr pos:start="73:13" pos:end="73:15"><name pos:start="73:13" pos:end="73:15">pdu</name></expr></argument>, <argument pos:start="73:18" pos:end="73:26"><expr pos:start="73:18" pos:end="73:26"><name pos:start="73:18" pos:end="73:26">file_fidp</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

<label pos:start="75:1" pos:end="75:10"><name pos:start="75:1" pos:end="75:9">out_nofid</name>:</label>

    <expr_stmt pos:start="77:5" pos:end="77:30"><expr pos:start="77:5" pos:end="77:29"><call pos:start="77:5" pos:end="77:29"><name pos:start="77:5" pos:end="77:16">complete_pdu</name><argument_list pos:start="77:17" pos:end="77:29">(<argument pos:start="77:18" pos:end="77:18"><expr pos:start="77:18" pos:end="77:18"><name pos:start="77:18" pos:end="77:18">s</name></expr></argument>, <argument pos:start="77:21" pos:end="77:23"><expr pos:start="77:21" pos:end="77:23"><name pos:start="77:21" pos:end="77:23">pdu</name></expr></argument>, <argument pos:start="77:26" pos:end="77:28"><expr pos:start="77:26" pos:end="77:28"><name pos:start="77:26" pos:end="77:28">err</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    <expr_stmt pos:start="79:5" pos:end="79:28"><expr pos:start="79:5" pos:end="79:27"><call pos:start="79:5" pos:end="79:27"><name pos:start="79:5" pos:end="79:20">v9fs_string_free</name><argument_list pos:start="79:21" pos:end="79:27">(<argument pos:start="79:22" pos:end="79:26"><expr pos:start="79:22" pos:end="79:26"><operator pos:start="79:22" pos:end="79:22">&amp;</operator><name pos:start="79:23" pos:end="79:26">name</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

</block_content>}</block></function>
</unit>
