<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<unit xmlns="http://www.srcML.org/srcML/src" xmlns:pos="http://www.srcML.org/srcML/position" revision="1.0.0" language="C" filename="dataset/ropgen/aug/1/13843.c" pos:tabs="8"><function pos:start="1:1" pos:end="185:1"><type pos:start="1:1" pos:end="1:10"><specifier pos:start="1:1" pos:end="1:6">static</specifier> <name pos:start="1:8" pos:end="1:10">int</name></type> <name pos:start="1:12" pos:end="1:19">quantize</name><parameter_list pos:start="1:20" pos:end="1:113">(<parameter pos:start="1:21" pos:end="1:40"><decl pos:start="1:21" pos:end="1:40"><type pos:start="1:21" pos:end="1:40"><name pos:start="1:21" pos:end="1:37">CinepakEncContext</name> <modifier pos:start="1:39" pos:end="1:39">*</modifier></type><name pos:start="1:40" pos:end="1:40">s</name></decl></parameter>, <parameter pos:start="1:43" pos:end="1:47"><decl pos:start="1:43" pos:end="1:47"><type pos:start="1:43" pos:end="1:47"><name pos:start="1:43" pos:end="1:45">int</name></type> <name pos:start="1:47" pos:end="1:47">h</name></decl></parameter>, <parameter pos:start="1:50" pos:end="1:64"><decl pos:start="1:50" pos:end="1:64"><type pos:start="1:50" pos:end="1:64"><name pos:start="1:50" pos:end="1:58">AVPicture</name> <modifier pos:start="1:60" pos:end="1:60">*</modifier></type><name pos:start="1:61" pos:end="1:64">pict</name></decl></parameter>, <parameter pos:start="1:67" pos:end="1:76"><decl pos:start="1:67" pos:end="1:76"><type pos:start="1:67" pos:end="1:76"><name pos:start="1:67" pos:end="1:69">int</name></type> <name pos:start="1:71" pos:end="1:76">v1mode</name></decl></parameter>, <parameter pos:start="1:79" pos:end="1:86"><decl pos:start="1:79" pos:end="1:86"><type pos:start="1:79" pos:end="1:86"><name pos:start="1:79" pos:end="1:81">int</name></type> <name pos:start="1:83" pos:end="1:86">size</name></decl></parameter>, <parameter pos:start="1:89" pos:end="1:94"><decl pos:start="1:89" pos:end="1:94"><type pos:start="1:89" pos:end="1:94"><name pos:start="1:89" pos:end="1:91">int</name></type> <name pos:start="1:93" pos:end="1:94">v4</name></decl></parameter>, <parameter pos:start="1:97" pos:end="1:112"><decl pos:start="1:97" pos:end="1:112"><type pos:start="1:97" pos:end="1:112"><name pos:start="1:97" pos:end="1:106">strip_info</name> <modifier pos:start="1:108" pos:end="1:108">*</modifier></type><name pos:start="1:109" pos:end="1:112">info</name></decl></parameter>)</parameter_list>

<block pos:start="3:1" pos:end="185:1">{<block_content pos:start="5:5" pos:end="183:13">

    <decl_stmt pos:start="5:5" pos:end="5:52"><decl pos:start="5:5" pos:end="5:9"><type pos:start="5:5" pos:end="5:7"><name pos:start="5:5" pos:end="5:7">int</name></type> <name pos:start="5:9" pos:end="5:9">x</name></decl>, <decl pos:start="5:12" pos:end="5:12"><type ref="prev" pos:start="5:5" pos:end="5:7"/><name pos:start="5:12" pos:end="5:12">y</name></decl>, <decl pos:start="5:15" pos:end="5:15"><type ref="prev" pos:start="5:5" pos:end="5:7"/><name pos:start="5:15" pos:end="5:15">i</name></decl>, <decl pos:start="5:18" pos:end="5:18"><type ref="prev" pos:start="5:5" pos:end="5:7"/><name pos:start="5:18" pos:end="5:18">j</name></decl>, <decl pos:start="5:21" pos:end="5:21"><type ref="prev" pos:start="5:5" pos:end="5:7"/><name pos:start="5:21" pos:end="5:21">k</name></decl>, <decl pos:start="5:24" pos:end="5:25"><type ref="prev" pos:start="5:5" pos:end="5:7"/><name pos:start="5:24" pos:end="5:25">x2</name></decl>, <decl pos:start="5:28" pos:end="5:29"><type ref="prev" pos:start="5:5" pos:end="5:7"/><name pos:start="5:28" pos:end="5:29">y2</name></decl>, <decl pos:start="5:32" pos:end="5:33"><type ref="prev" pos:start="5:5" pos:end="5:7"/><name pos:start="5:32" pos:end="5:33">x3</name></decl>, <decl pos:start="5:36" pos:end="5:37"><type ref="prev" pos:start="5:5" pos:end="5:7"/><name pos:start="5:36" pos:end="5:37">y3</name></decl>, <decl pos:start="5:40" pos:end="5:44"><type ref="prev" pos:start="5:5" pos:end="5:7"/><name pos:start="5:40" pos:end="5:44">plane</name></decl>, <decl pos:start="5:47" pos:end="5:51"><type ref="prev" pos:start="5:5" pos:end="5:7"/><name pos:start="5:47" pos:end="5:51">shift</name></decl>;</decl_stmt>

    <decl_stmt pos:start="7:5" pos:end="7:62"><decl pos:start="7:5" pos:end="7:61"><type pos:start="7:5" pos:end="7:7"><name pos:start="7:5" pos:end="7:7">int</name></type> <name pos:start="7:9" pos:end="7:18">entry_size</name> <init pos:start="7:20" pos:end="7:61">= <expr pos:start="7:22" pos:end="7:61"><ternary pos:start="7:22" pos:end="7:61"><condition pos:start="7:22" pos:end="7:55"><expr pos:start="7:22" pos:end="7:53"><name pos:start="7:22" pos:end="7:31"><name pos:start="7:22" pos:end="7:22">s</name><operator pos:start="7:23" pos:end="7:24">-&gt;</operator><name pos:start="7:25" pos:end="7:31">pix_fmt</name></name> <operator pos:start="7:33" pos:end="7:34">==</operator> <name pos:start="7:36" pos:end="7:53">AV_PIX_FMT_YUV420P</name></expr> ?</condition><then pos:start="7:57" pos:end="7:57"> <expr pos:start="7:57" pos:end="7:57"><literal type="number" pos:start="7:57" pos:end="7:57">6</literal></expr> </then><else pos:start="7:59" pos:end="7:61">: <expr pos:start="7:61" pos:end="7:61"><literal type="number" pos:start="7:61" pos:end="7:61">4</literal></expr></else></ternary></expr></init></decl>;</decl_stmt>

    <decl_stmt pos:start="9:5" pos:end="9:67"><decl pos:start="9:5" pos:end="9:66"><type pos:start="9:5" pos:end="9:9"><name pos:start="9:5" pos:end="9:7">int</name> <modifier pos:start="9:9" pos:end="9:9">*</modifier></type><name pos:start="9:10" pos:end="9:17">codebook</name> <init pos:start="9:19" pos:end="9:66">= <expr pos:start="9:21" pos:end="9:66"><ternary pos:start="9:21" pos:end="9:66"><condition pos:start="9:21" pos:end="9:28"><expr pos:start="9:21" pos:end="9:26"><name pos:start="9:21" pos:end="9:26">v1mode</name></expr> ?</condition><then pos:start="9:30" pos:end="9:46"> <expr pos:start="9:30" pos:end="9:46"><name pos:start="9:30" pos:end="9:46"><name pos:start="9:30" pos:end="9:33">info</name><operator pos:start="9:34" pos:end="9:35">-&gt;</operator><name pos:start="9:36" pos:end="9:46">v1_codebook</name></name></expr> </then><else pos:start="9:48" pos:end="9:66">: <expr pos:start="9:50" pos:end="9:66"><name pos:start="9:50" pos:end="9:66"><name pos:start="9:50" pos:end="9:53">info</name><operator pos:start="9:54" pos:end="9:55">-&gt;</operator><name pos:start="9:56" pos:end="9:66">v4_codebook</name></name></expr></else></ternary></expr></init></decl>;</decl_stmt>

    <decl_stmt pos:start="11:5" pos:end="11:28"><decl pos:start="11:5" pos:end="11:27"><type pos:start="11:5" pos:end="11:11"><name pos:start="11:5" pos:end="11:11">int64_t</name></type> <name pos:start="11:13" pos:end="11:23">total_error</name> <init pos:start="11:25" pos:end="11:27">= <expr pos:start="11:27" pos:end="11:27"><literal type="number" pos:start="11:27" pos:end="11:27">0</literal></expr></init></decl>;</decl_stmt>

    <decl_stmt pos:start="13:5" pos:end="13:39"><decl pos:start="13:5" pos:end="13:38"><type pos:start="13:5" pos:end="13:11"><name pos:start="13:5" pos:end="13:11">uint8_t</name></type> <name pos:start="13:13" pos:end="13:38"><name pos:start="13:13" pos:end="13:23">vq_pict_buf</name><index pos:start="13:24" pos:end="13:38">[<expr pos:start="13:25" pos:end="13:37"><operator pos:start="13:25" pos:end="13:25">(</operator><name pos:start="13:26" pos:end="13:32">MB_AREA</name><operator pos:start="13:33" pos:end="13:33">*</operator><literal type="number" pos:start="13:34" pos:end="13:34">3</literal><operator pos:start="13:35" pos:end="13:35">)</operator><operator pos:start="13:36" pos:end="13:36">/</operator><literal type="number" pos:start="13:37" pos:end="13:37">2</literal></expr>]</index></name></decl>;</decl_stmt>

    <decl_stmt pos:start="15:5" pos:end="15:32"><decl pos:start="15:5" pos:end="15:22"><type pos:start="15:5" pos:end="15:13"><name pos:start="15:5" pos:end="15:13">AVPicture</name></type> <name pos:start="15:15" pos:end="15:22">sub_pict</name></decl>, <decl pos:start="15:25" pos:end="15:31"><type ref="prev" pos:start="15:5" pos:end="15:13"/><name pos:start="15:25" pos:end="15:31">vq_pict</name></decl>;</decl_stmt>



    <for pos:start="19:5" pos:end="97:5">for<control pos:start="19:8" pos:end="19:39">(<init pos:start="19:9" pos:end="19:18"><expr pos:start="19:9" pos:end="19:17"><name pos:start="19:9" pos:end="19:9">i</name> <operator pos:start="19:11" pos:end="19:11">=</operator> <name pos:start="19:13" pos:end="19:13">y</name> <operator pos:start="19:15" pos:end="19:15">=</operator> <literal type="number" pos:start="19:17" pos:end="19:17">0</literal></expr>;</init> <condition pos:start="19:20" pos:end="19:25"><expr pos:start="19:20" pos:end="19:24"><name pos:start="19:20" pos:end="19:20">y</name> <operator pos:start="19:22" pos:end="19:22">&lt;</operator> <name pos:start="19:24" pos:end="19:24">h</name></expr>;</condition> <incr pos:start="19:27" pos:end="19:38"><expr pos:start="19:27" pos:end="19:38"><name pos:start="19:27" pos:end="19:27">y</name> <operator pos:start="19:29" pos:end="19:30">+=</operator> <name pos:start="19:32" pos:end="19:38">MB_SIZE</name></expr></incr>)</control> <block pos:start="19:41" pos:end="97:5">{<block_content pos:start="21:9" pos:end="95:9">

        <for pos:start="21:9" pos:end="95:9">for<control pos:start="21:12" pos:end="21:63">(<init pos:start="21:13" pos:end="21:18"><expr pos:start="21:13" pos:end="21:17"><name pos:start="21:13" pos:end="21:13">x</name> <operator pos:start="21:15" pos:end="21:15">=</operator> <literal type="number" pos:start="21:17" pos:end="21:17">0</literal></expr>;</init> <condition pos:start="21:20" pos:end="21:28"><expr pos:start="21:20" pos:end="21:27"><name pos:start="21:20" pos:end="21:20">x</name> <operator pos:start="21:22" pos:end="21:22">&lt;</operator> <name pos:start="21:24" pos:end="21:27"><name pos:start="21:24" pos:end="21:24">s</name><operator pos:start="21:25" pos:end="21:26">-&gt;</operator><name pos:start="21:27" pos:end="21:27">w</name></name></expr>;</condition> <incr pos:start="21:30" pos:end="21:62"><expr pos:start="21:30" pos:end="21:41"><name pos:start="21:30" pos:end="21:30">x</name> <operator pos:start="21:32" pos:end="21:33">+=</operator> <name pos:start="21:35" pos:end="21:41">MB_SIZE</name></expr><operator pos:start="21:42" pos:end="21:42">,</operator> <expr pos:start="21:44" pos:end="21:62"><name pos:start="21:44" pos:end="21:44">i</name> <operator pos:start="21:46" pos:end="21:47">+=</operator> <ternary pos:start="21:49" pos:end="21:62"><condition pos:start="21:49" pos:end="21:56"><expr pos:start="21:49" pos:end="21:54"><name pos:start="21:49" pos:end="21:54">v1mode</name></expr> ?</condition><then pos:start="21:58" pos:end="21:58"> <expr pos:start="21:58" pos:end="21:58"><literal type="number" pos:start="21:58" pos:end="21:58">1</literal></expr> </then><else pos:start="21:60" pos:end="21:62">: <expr pos:start="21:62" pos:end="21:62"><literal type="number" pos:start="21:62" pos:end="21:62">4</literal></expr></else></ternary></expr></incr>)</control> <block pos:start="21:65" pos:end="95:9">{<block_content pos:start="23:13" pos:end="93:13">

            <decl_stmt pos:start="23:13" pos:end="23:57"><decl pos:start="23:13" pos:end="23:56"><type pos:start="23:13" pos:end="23:17"><name pos:start="23:13" pos:end="23:15">int</name> <modifier pos:start="23:17" pos:end="23:17">*</modifier></type><name pos:start="23:18" pos:end="23:21">base</name> <init pos:start="23:23" pos:end="23:56">= <expr pos:start="23:25" pos:end="23:56"><name pos:start="23:25" pos:end="23:41"><name pos:start="23:25" pos:end="23:25">s</name><operator pos:start="23:26" pos:end="23:27">-&gt;</operator><name pos:start="23:28" pos:end="23:41">codebook_input</name></name> <operator pos:start="23:43" pos:end="23:43">+</operator> <name pos:start="23:45" pos:end="23:45">i</name><operator pos:start="23:46" pos:end="23:46">*</operator><name pos:start="23:47" pos:end="23:56">entry_size</name></expr></init></decl>;</decl_stmt>



            <if_stmt pos:start="27:13" pos:end="93:13"><if pos:start="27:13" pos:end="55:13">if<condition pos:start="27:15" pos:end="27:22">(<expr pos:start="27:16" pos:end="27:21"><name pos:start="27:16" pos:end="27:21">v1mode</name></expr>)</condition> <block pos:start="27:24" pos:end="55:13">{<block_content pos:start="31:17" pos:end="53:17">

                <comment type="line" pos:start="29:17" pos:end="29:27">//subsample</comment>

                <for pos:start="31:17" pos:end="53:17">for<control pos:start="31:20" pos:end="31:57">(<init pos:start="31:21" pos:end="31:31"><expr pos:start="31:21" pos:end="31:30"><name pos:start="31:21" pos:end="31:21">j</name> <operator pos:start="31:23" pos:end="31:23">=</operator> <name pos:start="31:25" pos:end="31:26">y2</name> <operator pos:start="31:28" pos:end="31:28">=</operator> <literal type="number" pos:start="31:30" pos:end="31:30">0</literal></expr>;</init> <condition pos:start="31:33" pos:end="31:48"><expr pos:start="31:33" pos:end="31:47"><name pos:start="31:33" pos:end="31:34">y2</name> <operator pos:start="31:36" pos:end="31:36">&lt;</operator> <name pos:start="31:38" pos:end="31:47">entry_size</name></expr>;</condition> <incr pos:start="31:50" pos:end="31:56"><expr pos:start="31:50" pos:end="31:56"><name pos:start="31:50" pos:end="31:51">y2</name> <operator pos:start="31:53" pos:end="31:54">+=</operator> <literal type="number" pos:start="31:56" pos:end="31:56">2</literal></expr></incr>)</control> <block pos:start="31:59" pos:end="53:17">{<block_content pos:start="33:21" pos:end="51:21">

                    <for pos:start="33:21" pos:end="51:21">for<control pos:start="33:24" pos:end="33:53">(<init pos:start="33:25" pos:end="33:31"><expr pos:start="33:25" pos:end="33:30"><name pos:start="33:25" pos:end="33:26">x2</name> <operator pos:start="33:28" pos:end="33:28">=</operator> <literal type="number" pos:start="33:30" pos:end="33:30">0</literal></expr>;</init> <condition pos:start="33:33" pos:end="33:39"><expr pos:start="33:33" pos:end="33:38"><name pos:start="33:33" pos:end="33:34">x2</name> <operator pos:start="33:36" pos:end="33:36">&lt;</operator> <literal type="number" pos:start="33:38" pos:end="33:38">4</literal></expr>;</condition> <incr pos:start="33:41" pos:end="33:52"><expr pos:start="33:41" pos:end="33:47"><name pos:start="33:41" pos:end="33:42">x2</name> <operator pos:start="33:44" pos:end="33:45">+=</operator> <literal type="number" pos:start="33:47" pos:end="33:47">2</literal></expr><operator pos:start="33:48" pos:end="33:48">,</operator> <expr pos:start="33:50" pos:end="33:52"><name pos:start="33:50" pos:end="33:50">j</name><operator pos:start="33:51" pos:end="33:52">++</operator></expr></incr>)</control> <block pos:start="33:55" pos:end="51:21">{<block_content pos:start="35:25" pos:end="49:132">

                        <expr_stmt pos:start="35:25" pos:end="35:59"><expr pos:start="35:25" pos:end="35:58"><name pos:start="35:25" pos:end="35:29">plane</name> <operator pos:start="35:31" pos:end="35:31">=</operator> <ternary pos:start="35:33" pos:end="35:58"><condition pos:start="35:33" pos:end="35:40"><expr pos:start="35:33" pos:end="35:38"><name pos:start="35:33" pos:end="35:34">y2</name> <operator pos:start="35:36" pos:end="35:36">&lt;</operator> <literal type="number" pos:start="35:38" pos:end="35:38">4</literal></expr> ?</condition><then pos:start="35:42" pos:end="35:42"> <expr pos:start="35:42" pos:end="35:42"><literal type="number" pos:start="35:42" pos:end="35:42">0</literal></expr> </then><else pos:start="35:44" pos:end="35:58">: <expr pos:start="35:46" pos:end="35:58"><literal type="number" pos:start="35:46" pos:end="35:48">1</literal> <operator pos:start="35:48" pos:end="35:48">+</operator> <operator pos:start="35:50" pos:end="35:50">(</operator><name pos:start="35:51" pos:end="35:52">x2</name> <operator pos:start="35:54" pos:end="35:55">&gt;&gt;</operator> <literal type="number" pos:start="35:57" pos:end="35:57">1</literal><operator pos:start="35:58" pos:end="35:58">)</operator></expr></else></ternary></expr>;</expr_stmt>

                        <expr_stmt pos:start="37:25" pos:end="37:47"><expr pos:start="37:25" pos:end="37:46"><name pos:start="37:25" pos:end="37:29">shift</name> <operator pos:start="37:31" pos:end="37:31">=</operator> <ternary pos:start="37:33" pos:end="37:46"><condition pos:start="37:33" pos:end="37:40"><expr pos:start="37:33" pos:end="37:38"><name pos:start="37:33" pos:end="37:34">y2</name> <operator pos:start="37:36" pos:end="37:36">&lt;</operator> <literal type="number" pos:start="37:38" pos:end="37:38">4</literal></expr> ?</condition><then pos:start="37:42" pos:end="37:42"> <expr pos:start="37:42" pos:end="37:42"><literal type="number" pos:start="37:42" pos:end="37:42">0</literal></expr> </then><else pos:start="37:44" pos:end="37:46">: <expr pos:start="37:46" pos:end="37:46"><literal type="number" pos:start="37:46" pos:end="37:46">1</literal></expr></else></ternary></expr>;</expr_stmt>

                        <expr_stmt pos:start="39:25" pos:end="39:44"><expr pos:start="39:25" pos:end="39:43"><name pos:start="39:25" pos:end="39:26">x3</name> <operator pos:start="39:28" pos:end="39:28">=</operator> <ternary pos:start="39:30" pos:end="39:43"><condition pos:start="39:30" pos:end="39:36"><expr pos:start="39:30" pos:end="39:34"><name pos:start="39:30" pos:end="39:34">shift</name></expr> ?</condition><then pos:start="39:38" pos:end="39:38"> <expr pos:start="39:38" pos:end="39:38"><literal type="number" pos:start="39:38" pos:end="39:38">0</literal></expr> </then><else pos:start="39:40" pos:end="39:43">: <expr pos:start="39:42" pos:end="39:43"><name pos:start="39:42" pos:end="39:43">x2</name></expr></else></ternary></expr>;</expr_stmt>

                        <expr_stmt pos:start="41:25" pos:end="41:44"><expr pos:start="41:25" pos:end="41:43"><name pos:start="41:25" pos:end="41:26">y3</name> <operator pos:start="41:28" pos:end="41:28">=</operator> <ternary pos:start="41:30" pos:end="41:43"><condition pos:start="41:30" pos:end="41:36"><expr pos:start="41:30" pos:end="41:34"><name pos:start="41:30" pos:end="41:34">shift</name></expr> ?</condition><then pos:start="41:38" pos:end="41:38"> <expr pos:start="41:38" pos:end="41:38"><literal type="number" pos:start="41:38" pos:end="41:38">0</literal></expr> </then><else pos:start="41:40" pos:end="41:43">: <expr pos:start="41:42" pos:end="41:43"><name pos:start="41:42" pos:end="41:43">y2</name></expr></else></ternary></expr>;</expr_stmt>

                        <expr_stmt pos:start="43:25" pos:end="49:132"><expr pos:start="43:25" pos:end="49:131"><name pos:start="43:25" pos:end="43:31"><name pos:start="43:25" pos:end="43:28">base</name><index pos:start="43:29" pos:end="43:31">[<expr pos:start="43:30" pos:end="43:30"><name pos:start="43:30" pos:end="43:30">j</name></expr>]</index></name> <operator pos:start="43:33" pos:end="43:33">=</operator> <operator pos:start="43:35" pos:end="43:35">(</operator><name pos:start="43:36" pos:end="43:125"><name pos:start="43:36" pos:end="43:39">pict</name><operator pos:start="43:40" pos:end="43:41">-&gt;</operator><name pos:start="43:42" pos:end="43:45">data</name><index pos:start="43:46" pos:end="43:52">[<expr pos:start="43:47" pos:end="43:51"><name pos:start="43:47" pos:end="43:51">plane</name></expr>]</index><index pos:start="43:53" pos:end="43:125">[<expr pos:start="43:54" pos:end="43:124"><operator pos:start="43:54" pos:end="43:54">(</operator><operator pos:start="43:55" pos:end="43:55">(</operator><name pos:start="43:56" pos:end="43:56">x</name><operator pos:start="43:57" pos:end="43:57">+</operator><name pos:start="43:58" pos:end="43:59">x3</name><operator pos:start="43:60" pos:end="43:60">)</operator> <operator pos:start="43:62" pos:end="43:63">&gt;&gt;</operator> <name pos:start="43:65" pos:end="43:69">shift</name><operator pos:start="43:70" pos:end="43:70">)</operator> <operator pos:start="43:72" pos:end="43:72">+</operator>      <operator pos:start="43:79" pos:end="43:79">(</operator><operator pos:start="43:80" pos:end="43:80">(</operator><name pos:start="43:81" pos:end="43:81">y</name><operator pos:start="43:82" pos:end="43:82">+</operator><name pos:start="43:83" pos:end="43:84">y3</name><operator pos:start="43:85" pos:end="43:85">)</operator> <operator pos:start="43:87" pos:end="43:88">&gt;&gt;</operator> <name pos:start="43:90" pos:end="43:94">shift</name><operator pos:start="43:95" pos:end="43:95">)</operator>      <operator pos:start="43:102" pos:end="43:102">*</operator> <name pos:start="43:104" pos:end="43:124"><name pos:start="43:104" pos:end="43:107">pict</name><operator pos:start="43:108" pos:end="43:109">-&gt;</operator><name pos:start="43:110" pos:end="43:117">linesize</name><index pos:start="43:118" pos:end="43:124">[<expr pos:start="43:119" pos:end="43:123"><name pos:start="43:119" pos:end="43:123">plane</name></expr>]</index></name></expr>]</index></name> <operator pos:start="43:127" pos:end="43:127">+</operator>

                                   <name pos:start="45:36" pos:end="45:125"><name pos:start="45:36" pos:end="45:39">pict</name><operator pos:start="45:40" pos:end="45:41">-&gt;</operator><name pos:start="45:42" pos:end="45:45">data</name><index pos:start="45:46" pos:end="45:52">[<expr pos:start="45:47" pos:end="45:51"><name pos:start="45:47" pos:end="45:51">plane</name></expr>]</index><index pos:start="45:53" pos:end="45:125">[<expr pos:start="45:54" pos:end="45:124"><operator pos:start="45:54" pos:end="45:54">(</operator><operator pos:start="45:55" pos:end="45:55">(</operator><name pos:start="45:56" pos:end="45:56">x</name><operator pos:start="45:57" pos:end="45:57">+</operator><name pos:start="45:58" pos:end="45:59">x3</name><operator pos:start="45:60" pos:end="45:60">)</operator> <operator pos:start="45:62" pos:end="45:63">&gt;&gt;</operator> <name pos:start="45:65" pos:end="45:69">shift</name><operator pos:start="45:70" pos:end="45:70">)</operator> <operator pos:start="45:72" pos:end="45:72">+</operator> <literal type="number" pos:start="45:74" pos:end="45:76">1</literal> <operator pos:start="45:76" pos:end="45:76">+</operator>  <operator pos:start="45:79" pos:end="45:79">(</operator><operator pos:start="45:80" pos:end="45:80">(</operator><name pos:start="45:81" pos:end="45:81">y</name><operator pos:start="45:82" pos:end="45:82">+</operator><name pos:start="45:83" pos:end="45:84">y3</name><operator pos:start="45:85" pos:end="45:85">)</operator> <operator pos:start="45:87" pos:end="45:88">&gt;&gt;</operator> <name pos:start="45:90" pos:end="45:94">shift</name><operator pos:start="45:95" pos:end="45:95">)</operator>      <operator pos:start="45:102" pos:end="45:102">*</operator> <name pos:start="45:104" pos:end="45:124"><name pos:start="45:104" pos:end="45:107">pict</name><operator pos:start="45:108" pos:end="45:109">-&gt;</operator><name pos:start="45:110" pos:end="45:117">linesize</name><index pos:start="45:118" pos:end="45:124">[<expr pos:start="45:119" pos:end="45:123"><name pos:start="45:119" pos:end="45:123">plane</name></expr>]</index></name></expr>]</index></name> <operator pos:start="45:127" pos:end="45:127">+</operator>

                                   <name pos:start="47:36" pos:end="47:125"><name pos:start="47:36" pos:end="47:39">pict</name><operator pos:start="47:40" pos:end="47:41">-&gt;</operator><name pos:start="47:42" pos:end="47:45">data</name><index pos:start="47:46" pos:end="47:52">[<expr pos:start="47:47" pos:end="47:51"><name pos:start="47:47" pos:end="47:51">plane</name></expr>]</index><index pos:start="47:53" pos:end="47:125">[<expr pos:start="47:54" pos:end="47:124"><operator pos:start="47:54" pos:end="47:54">(</operator><operator pos:start="47:55" pos:end="47:55">(</operator><name pos:start="47:56" pos:end="47:56">x</name><operator pos:start="47:57" pos:end="47:57">+</operator><name pos:start="47:58" pos:end="47:59">x3</name><operator pos:start="47:60" pos:end="47:60">)</operator> <operator pos:start="47:62" pos:end="47:63">&gt;&gt;</operator> <name pos:start="47:65" pos:end="47:69">shift</name><operator pos:start="47:70" pos:end="47:70">)</operator> <operator pos:start="47:72" pos:end="47:72">+</operator>     <operator pos:start="47:78" pos:end="47:78">(</operator><operator pos:start="47:79" pos:end="47:79">(</operator><operator pos:start="47:80" pos:end="47:80">(</operator><name pos:start="47:81" pos:end="47:81">y</name><operator pos:start="47:82" pos:end="47:82">+</operator><name pos:start="47:83" pos:end="47:84">y3</name><operator pos:start="47:85" pos:end="47:85">)</operator> <operator pos:start="47:87" pos:end="47:88">&gt;&gt;</operator> <name pos:start="47:90" pos:end="47:94">shift</name><operator pos:start="47:95" pos:end="47:95">)</operator> <operator pos:start="47:97" pos:end="47:97">+</operator> <literal type="number" pos:start="47:99" pos:end="47:99">1</literal><operator pos:start="47:100" pos:end="47:100">)</operator> <operator pos:start="47:102" pos:end="47:102">*</operator> <name pos:start="47:104" pos:end="47:124"><name pos:start="47:104" pos:end="47:107">pict</name><operator pos:start="47:108" pos:end="47:109">-&gt;</operator><name pos:start="47:110" pos:end="47:117">linesize</name><index pos:start="47:118" pos:end="47:124">[<expr pos:start="47:119" pos:end="47:123"><name pos:start="47:119" pos:end="47:123">plane</name></expr>]</index></name></expr>]</index></name> <operator pos:start="47:127" pos:end="47:127">+</operator>

                                   <name pos:start="49:36" pos:end="49:125"><name pos:start="49:36" pos:end="49:39">pict</name><operator pos:start="49:40" pos:end="49:41">-&gt;</operator><name pos:start="49:42" pos:end="49:45">data</name><index pos:start="49:46" pos:end="49:52">[<expr pos:start="49:47" pos:end="49:51"><name pos:start="49:47" pos:end="49:51">plane</name></expr>]</index><index pos:start="49:53" pos:end="49:125">[<expr pos:start="49:54" pos:end="49:124"><operator pos:start="49:54" pos:end="49:54">(</operator><operator pos:start="49:55" pos:end="49:55">(</operator><name pos:start="49:56" pos:end="49:56">x</name><operator pos:start="49:57" pos:end="49:57">+</operator><name pos:start="49:58" pos:end="49:59">x3</name><operator pos:start="49:60" pos:end="49:60">)</operator> <operator pos:start="49:62" pos:end="49:63">&gt;&gt;</operator> <name pos:start="49:65" pos:end="49:69">shift</name><operator pos:start="49:70" pos:end="49:70">)</operator> <operator pos:start="49:72" pos:end="49:72">+</operator> <literal type="number" pos:start="49:74" pos:end="49:76">1</literal> <operator pos:start="49:76" pos:end="49:76">+</operator> <operator pos:start="49:78" pos:end="49:78">(</operator><operator pos:start="49:79" pos:end="49:79">(</operator><operator pos:start="49:80" pos:end="49:80">(</operator><name pos:start="49:81" pos:end="49:81">y</name><operator pos:start="49:82" pos:end="49:82">+</operator><name pos:start="49:83" pos:end="49:84">y3</name><operator pos:start="49:85" pos:end="49:85">)</operator> <operator pos:start="49:87" pos:end="49:88">&gt;&gt;</operator> <name pos:start="49:90" pos:end="49:94">shift</name><operator pos:start="49:95" pos:end="49:95">)</operator> <operator pos:start="49:97" pos:end="49:97">+</operator> <literal type="number" pos:start="49:99" pos:end="49:99">1</literal><operator pos:start="49:100" pos:end="49:100">)</operator> <operator pos:start="49:102" pos:end="49:102">*</operator> <name pos:start="49:104" pos:end="49:124"><name pos:start="49:104" pos:end="49:107">pict</name><operator pos:start="49:108" pos:end="49:109">-&gt;</operator><name pos:start="49:110" pos:end="49:117">linesize</name><index pos:start="49:118" pos:end="49:124">[<expr pos:start="49:119" pos:end="49:123"><name pos:start="49:119" pos:end="49:123">plane</name></expr>]</index></name></expr>]</index></name><operator pos:start="49:126" pos:end="49:126">)</operator> <operator pos:start="49:128" pos:end="49:129">&gt;&gt;</operator> <literal type="number" pos:start="49:131" pos:end="49:131">2</literal></expr>;</expr_stmt>

                    </block_content>}</block></for>

                </block_content>}</block></for>

            </block_content>}</block></if> <else pos:start="55:15" pos:end="93:13">else <block pos:start="55:20" pos:end="93:13">{<block_content pos:start="59:17" pos:end="91:17">

                <comment type="line" pos:start="57:17" pos:end="57:22">//copy</comment>

                <for pos:start="59:17" pos:end="91:17">for<control pos:start="59:20" pos:end="59:54">(<init pos:start="59:21" pos:end="59:31"><expr pos:start="59:21" pos:end="59:30"><name pos:start="59:21" pos:end="59:21">j</name> <operator pos:start="59:23" pos:end="59:23">=</operator> <name pos:start="59:25" pos:end="59:26">y2</name> <operator pos:start="59:28" pos:end="59:28">=</operator> <literal type="number" pos:start="59:30" pos:end="59:30">0</literal></expr>;</init> <condition pos:start="59:33" pos:end="59:45"><expr pos:start="59:33" pos:end="59:44"><name pos:start="59:33" pos:end="59:34">y2</name> <operator pos:start="59:36" pos:end="59:36">&lt;</operator> <name pos:start="59:38" pos:end="59:44">MB_SIZE</name></expr>;</condition> <incr pos:start="59:47" pos:end="59:53"><expr pos:start="59:47" pos:end="59:53"><name pos:start="59:47" pos:end="59:48">y2</name> <operator pos:start="59:50" pos:end="59:51">+=</operator> <literal type="number" pos:start="59:53" pos:end="59:53">2</literal></expr></incr>)</control> <block pos:start="59:56" pos:end="91:17">{<block_content pos:start="61:21" pos:end="89:21">

                    <for pos:start="61:21" pos:end="89:21">for<control pos:start="61:24" pos:end="61:54">(<init pos:start="61:25" pos:end="61:31"><expr pos:start="61:25" pos:end="61:30"><name pos:start="61:25" pos:end="61:26">x2</name> <operator pos:start="61:28" pos:end="61:28">=</operator> <literal type="number" pos:start="61:30" pos:end="61:30">0</literal></expr>;</init> <condition pos:start="61:33" pos:end="61:45"><expr pos:start="61:33" pos:end="61:44"><name pos:start="61:33" pos:end="61:34">x2</name> <operator pos:start="61:36" pos:end="61:36">&lt;</operator> <name pos:start="61:38" pos:end="61:44">MB_SIZE</name></expr>;</condition> <incr pos:start="61:47" pos:end="61:53"><expr pos:start="61:47" pos:end="61:53"><name pos:start="61:47" pos:end="61:48">x2</name> <operator pos:start="61:50" pos:end="61:51">+=</operator> <literal type="number" pos:start="61:53" pos:end="61:53">2</literal></expr></incr>)</control> <block pos:start="61:56" pos:end="89:21">{<block_content pos:start="63:25" pos:end="87:25">

                        <for pos:start="63:25" pos:end="87:25">for<control pos:start="63:28" pos:end="63:60">(<init pos:start="63:29" pos:end="63:34"><expr pos:start="63:29" pos:end="63:33"><name pos:start="63:29" pos:end="63:29">k</name> <operator pos:start="63:31" pos:end="63:31">=</operator> <literal type="number" pos:start="63:33" pos:end="63:33">0</literal></expr>;</init> <condition pos:start="63:36" pos:end="63:50"><expr pos:start="63:36" pos:end="63:49"><name pos:start="63:36" pos:end="63:36">k</name> <operator pos:start="63:38" pos:end="63:38">&lt;</operator> <name pos:start="63:40" pos:end="63:49">entry_size</name></expr>;</condition> <incr pos:start="63:52" pos:end="63:59"><expr pos:start="63:52" pos:end="63:54"><name pos:start="63:52" pos:end="63:52">k</name><operator pos:start="63:53" pos:end="63:54">++</operator></expr><operator pos:start="63:55" pos:end="63:55">,</operator> <expr pos:start="63:57" pos:end="63:59"><name pos:start="63:57" pos:end="63:57">j</name><operator pos:start="63:58" pos:end="63:59">++</operator></expr></incr>)</control> <block pos:start="63:62" pos:end="87:25">{<block_content pos:start="65:29" pos:end="85:87">

                            <expr_stmt pos:start="65:29" pos:end="65:55"><expr pos:start="65:29" pos:end="65:54"><name pos:start="65:29" pos:end="65:33">plane</name> <operator pos:start="65:35" pos:end="65:35">=</operator> <ternary pos:start="65:37" pos:end="65:54"><condition pos:start="65:37" pos:end="65:44"><expr pos:start="65:37" pos:end="65:42"><name pos:start="65:37" pos:end="65:37">k</name> <operator pos:start="65:39" pos:end="65:40">&gt;=</operator> <literal type="number" pos:start="65:42" pos:end="65:42">4</literal></expr> ?</condition><then pos:start="65:46" pos:end="65:50"> <expr pos:start="65:46" pos:end="65:50"><name pos:start="65:46" pos:end="65:46">k</name> <operator pos:start="65:48" pos:end="65:48">-</operator> <literal type="number" pos:start="65:50" pos:end="65:50">3</literal></expr> </then><else pos:start="65:52" pos:end="65:54">: <expr pos:start="65:54" pos:end="65:54"><literal type="number" pos:start="65:54" pos:end="65:54">0</literal></expr></else></ternary></expr>;</expr_stmt>



                            <if_stmt pos:start="69:29" pos:end="81:29"><if pos:start="69:29" pos:end="75:29">if<condition pos:start="69:31" pos:end="69:38">(<expr pos:start="69:32" pos:end="69:37"><name pos:start="69:32" pos:end="69:32">k</name> <operator pos:start="69:34" pos:end="69:35">&gt;=</operator> <literal type="number" pos:start="69:37" pos:end="69:37">4</literal></expr>)</condition> <block pos:start="69:40" pos:end="75:29">{<block_content pos:start="71:33" pos:end="73:49">

                                <expr_stmt pos:start="71:33" pos:end="71:49"><expr pos:start="71:33" pos:end="71:48"><name pos:start="71:33" pos:end="71:34">x3</name> <operator pos:start="71:36" pos:end="71:36">=</operator> <operator pos:start="71:38" pos:end="71:38">(</operator><name pos:start="71:39" pos:end="71:39">x</name><operator pos:start="71:40" pos:end="71:40">+</operator><name pos:start="71:41" pos:end="71:42">x2</name><operator pos:start="71:43" pos:end="71:43">)</operator> <operator pos:start="71:45" pos:end="71:46">&gt;&gt;</operator> <literal type="number" pos:start="71:48" pos:end="71:48">1</literal></expr>;</expr_stmt>

                                <expr_stmt pos:start="73:33" pos:end="73:49"><expr pos:start="73:33" pos:end="73:48"><name pos:start="73:33" pos:end="73:34">y3</name> <operator pos:start="73:36" pos:end="73:36">=</operator> <operator pos:start="73:38" pos:end="73:38">(</operator><name pos:start="73:39" pos:end="73:39">y</name><operator pos:start="73:40" pos:end="73:40">+</operator><name pos:start="73:41" pos:end="73:42">y2</name><operator pos:start="73:43" pos:end="73:43">)</operator> <operator pos:start="73:45" pos:end="73:46">&gt;&gt;</operator> <literal type="number" pos:start="73:48" pos:end="73:48">1</literal></expr>;</expr_stmt>

                            </block_content>}</block></if> <else pos:start="75:31" pos:end="81:29">else <block pos:start="75:36" pos:end="81:29">{<block_content pos:start="77:33" pos:end="79:55">

                                <expr_stmt pos:start="77:33" pos:end="77:54"><expr pos:start="77:33" pos:end="77:53"><name pos:start="77:33" pos:end="77:34">x3</name> <operator pos:start="77:36" pos:end="77:36">=</operator> <name pos:start="77:38" pos:end="77:38">x</name> <operator pos:start="77:40" pos:end="77:40">+</operator> <name pos:start="77:42" pos:end="77:43">x2</name> <operator pos:start="77:45" pos:end="77:45">+</operator> <operator pos:start="77:47" pos:end="77:47">(</operator><name pos:start="77:48" pos:end="77:48">k</name> <operator pos:start="77:50" pos:end="77:50">&amp;</operator> <literal type="number" pos:start="77:52" pos:end="77:52">1</literal><operator pos:start="77:53" pos:end="77:53">)</operator></expr>;</expr_stmt>

                                <expr_stmt pos:start="79:33" pos:end="79:55"><expr pos:start="79:33" pos:end="79:54"><name pos:start="79:33" pos:end="79:34">y3</name> <operator pos:start="79:36" pos:end="79:36">=</operator> <name pos:start="79:38" pos:end="79:38">y</name> <operator pos:start="79:40" pos:end="79:40">+</operator> <name pos:start="79:42" pos:end="79:43">y2</name> <operator pos:start="79:45" pos:end="79:45">+</operator> <operator pos:start="79:47" pos:end="79:47">(</operator><name pos:start="79:48" pos:end="79:48">k</name> <operator pos:start="79:50" pos:end="79:51">&gt;&gt;</operator> <literal type="number" pos:start="79:53" pos:end="79:53">1</literal><operator pos:start="79:54" pos:end="79:54">)</operator></expr>;</expr_stmt>

                            </block_content>}</block></else></if_stmt>



                            <expr_stmt pos:start="85:29" pos:end="85:87"><expr pos:start="85:29" pos:end="85:86"><name pos:start="85:29" pos:end="85:35"><name pos:start="85:29" pos:end="85:32">base</name><index pos:start="85:33" pos:end="85:35">[<expr pos:start="85:34" pos:end="85:34"><name pos:start="85:34" pos:end="85:34">j</name></expr>]</index></name> <operator pos:start="85:37" pos:end="85:37">=</operator> <name pos:start="85:39" pos:end="85:86"><name pos:start="85:39" pos:end="85:42">pict</name><operator pos:start="85:43" pos:end="85:44">-&gt;</operator><name pos:start="85:45" pos:end="85:48">data</name><index pos:start="85:49" pos:end="85:55">[<expr pos:start="85:50" pos:end="85:54"><name pos:start="85:50" pos:end="85:54">plane</name></expr>]</index><index pos:start="85:56" pos:end="85:86">[<expr pos:start="85:57" pos:end="85:85"><name pos:start="85:57" pos:end="85:58">x3</name> <operator pos:start="85:60" pos:end="85:60">+</operator> <name pos:start="85:62" pos:end="85:63">y3</name><operator pos:start="85:64" pos:end="85:64">*</operator><name pos:start="85:65" pos:end="85:85"><name pos:start="85:65" pos:end="85:68">pict</name><operator pos:start="85:69" pos:end="85:70">-&gt;</operator><name pos:start="85:71" pos:end="85:78">linesize</name><index pos:start="85:79" pos:end="85:85">[<expr pos:start="85:80" pos:end="85:84"><name pos:start="85:80" pos:end="85:84">plane</name></expr>]</index></name></expr>]</index></name></expr>;</expr_stmt>

                        </block_content>}</block></for>

                    </block_content>}</block></for>

                </block_content>}</block></for>

            </block_content>}</block></else></if_stmt>

        </block_content>}</block></for>

    </block_content>}</block></for>



    <expr_stmt pos:start="101:5" pos:end="101:104"><expr pos:start="101:5" pos:end="101:103"><call pos:start="101:5" pos:end="101:103"><name pos:start="101:5" pos:end="101:16">ff_init_elbg</name><argument_list pos:start="101:17" pos:end="101:103">(<argument pos:start="101:18" pos:end="101:34"><expr pos:start="101:18" pos:end="101:34"><name pos:start="101:18" pos:end="101:34"><name pos:start="101:18" pos:end="101:18">s</name><operator pos:start="101:19" pos:end="101:20">-&gt;</operator><name pos:start="101:21" pos:end="101:34">codebook_input</name></name></expr></argument>, <argument pos:start="101:37" pos:end="101:46"><expr pos:start="101:37" pos:end="101:46"><name pos:start="101:37" pos:end="101:46">entry_size</name></expr></argument>, <argument pos:start="101:49" pos:end="101:49"><expr pos:start="101:49" pos:end="101:49"><name pos:start="101:49" pos:end="101:49">i</name></expr></argument>, <argument pos:start="101:52" pos:end="101:59"><expr pos:start="101:52" pos:end="101:59"><name pos:start="101:52" pos:end="101:59">codebook</name></expr></argument>, <argument pos:start="101:62" pos:end="101:65"><expr pos:start="101:62" pos:end="101:65"><name pos:start="101:62" pos:end="101:65">size</name></expr></argument>, <argument pos:start="101:68" pos:end="101:68"><expr pos:start="101:68" pos:end="101:68"><literal type="number" pos:start="101:68" pos:end="101:68">1</literal></expr></argument>, <argument pos:start="101:71" pos:end="101:89"><expr pos:start="101:71" pos:end="101:89"><name pos:start="101:71" pos:end="101:89"><name pos:start="101:71" pos:end="101:71">s</name><operator pos:start="101:72" pos:end="101:73">-&gt;</operator><name pos:start="101:74" pos:end="101:89">codebook_closest</name></name></expr></argument>, <argument pos:start="101:92" pos:end="101:102"><expr pos:start="101:92" pos:end="101:102"><operator pos:start="101:92" pos:end="101:92">&amp;</operator><name pos:start="101:93" pos:end="101:102"><name pos:start="101:93" pos:end="101:93">s</name><operator pos:start="101:94" pos:end="101:95">-&gt;</operator><name pos:start="101:96" pos:end="101:102">randctx</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    <expr_stmt pos:start="103:5" pos:end="103:102"><expr pos:start="103:5" pos:end="103:101"><call pos:start="103:5" pos:end="103:101"><name pos:start="103:5" pos:end="103:14">ff_do_elbg</name><argument_list pos:start="103:15" pos:end="103:101">(<argument pos:start="103:16" pos:end="103:32"><expr pos:start="103:16" pos:end="103:32"><name pos:start="103:16" pos:end="103:32"><name pos:start="103:16" pos:end="103:16">s</name><operator pos:start="103:17" pos:end="103:18">-&gt;</operator><name pos:start="103:19" pos:end="103:32">codebook_input</name></name></expr></argument>, <argument pos:start="103:35" pos:end="103:44"><expr pos:start="103:35" pos:end="103:44"><name pos:start="103:35" pos:end="103:44">entry_size</name></expr></argument>, <argument pos:start="103:47" pos:end="103:47"><expr pos:start="103:47" pos:end="103:47"><name pos:start="103:47" pos:end="103:47">i</name></expr></argument>, <argument pos:start="103:50" pos:end="103:57"><expr pos:start="103:50" pos:end="103:57"><name pos:start="103:50" pos:end="103:57">codebook</name></expr></argument>, <argument pos:start="103:60" pos:end="103:63"><expr pos:start="103:60" pos:end="103:63"><name pos:start="103:60" pos:end="103:63">size</name></expr></argument>, <argument pos:start="103:66" pos:end="103:66"><expr pos:start="103:66" pos:end="103:66"><literal type="number" pos:start="103:66" pos:end="103:66">1</literal></expr></argument>, <argument pos:start="103:69" pos:end="103:87"><expr pos:start="103:69" pos:end="103:87"><name pos:start="103:69" pos:end="103:87"><name pos:start="103:69" pos:end="103:69">s</name><operator pos:start="103:70" pos:end="103:71">-&gt;</operator><name pos:start="103:72" pos:end="103:87">codebook_closest</name></name></expr></argument>, <argument pos:start="103:90" pos:end="103:100"><expr pos:start="103:90" pos:end="103:100"><operator pos:start="103:90" pos:end="103:90">&amp;</operator><name pos:start="103:91" pos:end="103:100"><name pos:start="103:91" pos:end="103:91">s</name><operator pos:start="103:92" pos:end="103:93">-&gt;</operator><name pos:start="103:94" pos:end="103:100">randctx</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>



    <comment type="line" pos:start="107:5" pos:end="107:47">//setup vq_pict, which contains a single MB</comment>

    <expr_stmt pos:start="109:5" pos:end="109:34"><expr pos:start="109:5" pos:end="109:33"><name pos:start="109:5" pos:end="109:19"><name pos:start="109:5" pos:end="109:11">vq_pict</name><operator pos:start="109:12" pos:end="109:12">.</operator><name pos:start="109:13" pos:end="109:16">data</name><index pos:start="109:17" pos:end="109:19">[<expr pos:start="109:18" pos:end="109:18"><literal type="number" pos:start="109:18" pos:end="109:18">0</literal></expr>]</index></name> <operator pos:start="109:21" pos:end="109:21">=</operator> <name pos:start="109:23" pos:end="109:33">vq_pict_buf</name></expr>;</expr_stmt>

    <expr_stmt pos:start="111:5" pos:end="111:34"><expr pos:start="111:5" pos:end="111:33"><name pos:start="111:5" pos:end="111:23"><name pos:start="111:5" pos:end="111:11">vq_pict</name><operator pos:start="111:12" pos:end="111:12">.</operator><name pos:start="111:13" pos:end="111:20">linesize</name><index pos:start="111:21" pos:end="111:23">[<expr pos:start="111:22" pos:end="111:22"><literal type="number" pos:start="111:22" pos:end="111:22">0</literal></expr>]</index></name> <operator pos:start="111:25" pos:end="111:25">=</operator> <name pos:start="111:27" pos:end="111:33">MB_SIZE</name></expr>;</expr_stmt>

    <expr_stmt pos:start="113:5" pos:end="113:44"><expr pos:start="113:5" pos:end="113:43"><name pos:start="113:5" pos:end="113:19"><name pos:start="113:5" pos:end="113:11">vq_pict</name><operator pos:start="113:12" pos:end="113:12">.</operator><name pos:start="113:13" pos:end="113:16">data</name><index pos:start="113:17" pos:end="113:19">[<expr pos:start="113:18" pos:end="113:18"><literal type="number" pos:start="113:18" pos:end="113:18">1</literal></expr>]</index></name> <operator pos:start="113:21" pos:end="113:21">=</operator> <operator pos:start="113:23" pos:end="113:23">&amp;</operator><name pos:start="113:24" pos:end="113:43"><name pos:start="113:24" pos:end="113:34">vq_pict_buf</name><index pos:start="113:35" pos:end="113:43">[<expr pos:start="113:36" pos:end="113:42"><name pos:start="113:36" pos:end="113:42">MB_AREA</name></expr>]</index></name></expr>;</expr_stmt>

    <expr_stmt pos:start="115:5" pos:end="115:55"><expr pos:start="115:5" pos:end="115:54"><name pos:start="115:5" pos:end="115:19"><name pos:start="115:5" pos:end="115:11">vq_pict</name><operator pos:start="115:12" pos:end="115:12">.</operator><name pos:start="115:13" pos:end="115:16">data</name><index pos:start="115:17" pos:end="115:19">[<expr pos:start="115:18" pos:end="115:18"><literal type="number" pos:start="115:18" pos:end="115:18">2</literal></expr>]</index></name> <operator pos:start="115:21" pos:end="115:21">=</operator> <name pos:start="115:23" pos:end="115:37"><name pos:start="115:23" pos:end="115:29">vq_pict</name><operator pos:start="115:30" pos:end="115:30">.</operator><name pos:start="115:31" pos:end="115:34">data</name><index pos:start="115:35" pos:end="115:37">[<expr pos:start="115:36" pos:end="115:36"><literal type="number" pos:start="115:36" pos:end="115:36">1</literal></expr>]</index></name> <operator pos:start="115:39" pos:end="115:39">+</operator> <operator pos:start="115:41" pos:end="115:41">(</operator><name pos:start="115:42" pos:end="115:48">MB_AREA</name> <operator pos:start="115:50" pos:end="115:51">&gt;&gt;</operator> <literal type="number" pos:start="115:53" pos:end="115:53">2</literal><operator pos:start="115:54" pos:end="115:54">)</operator></expr>;</expr_stmt>

    <expr_stmt pos:start="117:5" pos:end="117:61"><expr pos:start="117:5" pos:end="117:60"><name pos:start="117:5" pos:end="117:23"><name pos:start="117:5" pos:end="117:11">vq_pict</name><operator pos:start="117:12" pos:end="117:12">.</operator><name pos:start="117:13" pos:end="117:20">linesize</name><index pos:start="117:21" pos:end="117:23">[<expr pos:start="117:22" pos:end="117:22"><literal type="number" pos:start="117:22" pos:end="117:22">1</literal></expr>]</index></name> <operator pos:start="117:25" pos:end="117:25">=</operator> <name pos:start="117:27" pos:end="117:45"><name pos:start="117:27" pos:end="117:33">vq_pict</name><operator pos:start="117:34" pos:end="117:34">.</operator><name pos:start="117:35" pos:end="117:42">linesize</name><index pos:start="117:43" pos:end="117:45">[<expr pos:start="117:44" pos:end="117:44"><literal type="number" pos:start="117:44" pos:end="117:44">2</literal></expr>]</index></name> <operator pos:start="117:47" pos:end="117:47">=</operator> <name pos:start="117:49" pos:end="117:55">MB_SIZE</name> <operator pos:start="117:57" pos:end="117:58">&gt;&gt;</operator> <literal type="number" pos:start="117:60" pos:end="117:60">1</literal></expr>;</expr_stmt>



    <comment type="line" pos:start="121:5" pos:end="121:18">//copy indices</comment>

    <for pos:start="123:5" pos:end="175:5">for<control pos:start="123:8" pos:end="123:43">(<init pos:start="123:9" pos:end="123:22"><expr pos:start="123:9" pos:end="123:21"><name pos:start="123:9" pos:end="123:9">i</name> <operator pos:start="123:11" pos:end="123:11">=</operator> <name pos:start="123:13" pos:end="123:13">j</name> <operator pos:start="123:15" pos:end="123:15">=</operator> <name pos:start="123:17" pos:end="123:17">y</name> <operator pos:start="123:19" pos:end="123:19">=</operator> <literal type="number" pos:start="123:21" pos:end="123:21">0</literal></expr>;</init> <condition pos:start="123:24" pos:end="123:29"><expr pos:start="123:24" pos:end="123:28"><name pos:start="123:24" pos:end="123:24">y</name> <operator pos:start="123:26" pos:end="123:26">&lt;</operator> <name pos:start="123:28" pos:end="123:28">h</name></expr>;</condition> <incr pos:start="123:31" pos:end="123:42"><expr pos:start="123:31" pos:end="123:42"><name pos:start="123:31" pos:end="123:31">y</name> <operator pos:start="123:33" pos:end="123:34">+=</operator> <name pos:start="123:36" pos:end="123:42">MB_SIZE</name></expr></incr>)</control> <block pos:start="123:45" pos:end="175:5">{<block_content pos:start="125:9" pos:end="173:9">

        <for pos:start="125:9" pos:end="173:9">for<control pos:start="125:12" pos:end="125:68">(<init pos:start="125:13" pos:end="125:18"><expr pos:start="125:13" pos:end="125:17"><name pos:start="125:13" pos:end="125:13">x</name> <operator pos:start="125:15" pos:end="125:15">=</operator> <literal type="number" pos:start="125:17" pos:end="125:17">0</literal></expr>;</init> <condition pos:start="125:20" pos:end="125:28"><expr pos:start="125:20" pos:end="125:27"><name pos:start="125:20" pos:end="125:20">x</name> <operator pos:start="125:22" pos:end="125:22">&lt;</operator> <name pos:start="125:24" pos:end="125:27"><name pos:start="125:24" pos:end="125:24">s</name><operator pos:start="125:25" pos:end="125:26">-&gt;</operator><name pos:start="125:27" pos:end="125:27">w</name></name></expr>;</condition> <incr pos:start="125:30" pos:end="125:67"><expr pos:start="125:30" pos:end="125:41"><name pos:start="125:30" pos:end="125:30">x</name> <operator pos:start="125:32" pos:end="125:33">+=</operator> <name pos:start="125:35" pos:end="125:41">MB_SIZE</name></expr><operator pos:start="125:42" pos:end="125:42">,</operator> <expr pos:start="125:44" pos:end="125:46"><name pos:start="125:44" pos:end="125:44">j</name><operator pos:start="125:45" pos:end="125:46">++</operator></expr><operator pos:start="125:47" pos:end="125:47">,</operator> <expr pos:start="125:49" pos:end="125:67"><name pos:start="125:49" pos:end="125:49">i</name> <operator pos:start="125:51" pos:end="125:52">+=</operator> <ternary pos:start="125:54" pos:end="125:67"><condition pos:start="125:54" pos:end="125:61"><expr pos:start="125:54" pos:end="125:59"><name pos:start="125:54" pos:end="125:59">v1mode</name></expr> ?</condition><then pos:start="125:63" pos:end="125:63"> <expr pos:start="125:63" pos:end="125:63"><literal type="number" pos:start="125:63" pos:end="125:63">1</literal></expr> </then><else pos:start="125:65" pos:end="125:67">: <expr pos:start="125:67" pos:end="125:67"><literal type="number" pos:start="125:67" pos:end="125:67">4</literal></expr></else></ternary></expr></incr>)</control> <block pos:start="125:70" pos:end="173:9">{<block_content pos:start="127:13" pos:end="171:13">

            <decl_stmt pos:start="127:13" pos:end="127:36"><decl pos:start="127:13" pos:end="127:35"><type pos:start="127:13" pos:end="127:21"><name pos:start="127:13" pos:end="127:19">mb_info</name> <modifier pos:start="127:21" pos:end="127:21">*</modifier></type><name pos:start="127:22" pos:end="127:23">mb</name> <init pos:start="127:25" pos:end="127:35">= <expr pos:start="127:27" pos:end="127:35"><operator pos:start="127:27" pos:end="127:27">&amp;</operator><name pos:start="127:28" pos:end="127:35"><name pos:start="127:28" pos:end="127:28">s</name><operator pos:start="127:29" pos:end="127:30">-&gt;</operator><name pos:start="127:31" pos:end="127:32">mb</name><index pos:start="127:33" pos:end="127:35">[<expr pos:start="127:34" pos:end="127:34"><name pos:start="127:34" pos:end="127:34">j</name></expr>]</index></name></expr></init></decl>;</decl_stmt>



            <comment type="line" pos:start="131:13" pos:end="131:42">//point sub_pict to current MB</comment>

            <expr_stmt pos:start="133:13" pos:end="133:54"><expr pos:start="133:13" pos:end="133:53"><call pos:start="133:13" pos:end="133:53"><name pos:start="133:13" pos:end="133:27">get_sub_picture</name><argument_list pos:start="133:28" pos:end="133:53">(<argument pos:start="133:29" pos:end="133:29"><expr pos:start="133:29" pos:end="133:29"><name pos:start="133:29" pos:end="133:29">s</name></expr></argument>, <argument pos:start="133:32" pos:end="133:32"><expr pos:start="133:32" pos:end="133:32"><name pos:start="133:32" pos:end="133:32">x</name></expr></argument>, <argument pos:start="133:35" pos:end="133:35"><expr pos:start="133:35" pos:end="133:35"><name pos:start="133:35" pos:end="133:35">y</name></expr></argument>, <argument pos:start="133:38" pos:end="133:41"><expr pos:start="133:38" pos:end="133:41"><name pos:start="133:38" pos:end="133:41">pict</name></expr></argument>, <argument pos:start="133:44" pos:end="133:52"><expr pos:start="133:44" pos:end="133:52"><operator pos:start="133:44" pos:end="133:44">&amp;</operator><name pos:start="133:45" pos:end="133:52">sub_pict</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>



            <if_stmt pos:start="137:13" pos:end="171:13"><if pos:start="137:13" pos:end="153:13">if<condition pos:start="137:15" pos:end="137:22">(<expr pos:start="137:16" pos:end="137:21"><name pos:start="137:16" pos:end="137:21">v1mode</name></expr>)</condition> <block pos:start="137:24" pos:end="153:13">{<block_content pos:start="139:17" pos:end="151:44">

                <expr_stmt pos:start="139:17" pos:end="139:55"><expr pos:start="139:17" pos:end="139:54"><name pos:start="139:17" pos:end="139:29"><name pos:start="139:17" pos:end="139:18">mb</name><operator pos:start="139:19" pos:end="139:20">-&gt;</operator><name pos:start="139:21" pos:end="139:29">v1_vector</name></name> <operator pos:start="139:31" pos:end="139:31">=</operator> <name pos:start="139:33" pos:end="139:54"><name pos:start="139:33" pos:end="139:33">s</name><operator pos:start="139:34" pos:end="139:35">-&gt;</operator><name pos:start="139:36" pos:end="139:51">codebook_closest</name><index pos:start="139:52" pos:end="139:54">[<expr pos:start="139:53" pos:end="139:53"><name pos:start="139:53" pos:end="139:53">i</name></expr>]</index></name></expr>;</expr_stmt>



                <comment type="line" pos:start="143:17" pos:end="143:46">//fill in vq_pict with V1 data</comment>

                <expr_stmt pos:start="145:17" pos:end="145:56"><expr pos:start="145:17" pos:end="145:55"><call pos:start="145:17" pos:end="145:55"><name pos:start="145:17" pos:end="145:32">decode_v1_vector</name><argument_list pos:start="145:33" pos:end="145:55">(<argument pos:start="145:34" pos:end="145:34"><expr pos:start="145:34" pos:end="145:34"><name pos:start="145:34" pos:end="145:34">s</name></expr></argument>, <argument pos:start="145:37" pos:end="145:44"><expr pos:start="145:37" pos:end="145:44"><operator pos:start="145:37" pos:end="145:37">&amp;</operator><name pos:start="145:38" pos:end="145:44">vq_pict</name></expr></argument>, <argument pos:start="145:47" pos:end="145:48"><expr pos:start="145:47" pos:end="145:48"><name pos:start="145:47" pos:end="145:48">mb</name></expr></argument>, <argument pos:start="145:51" pos:end="145:54"><expr pos:start="145:51" pos:end="145:54"><name pos:start="145:51" pos:end="145:54">info</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>



                <expr_stmt pos:start="149:17" pos:end="149:77"><expr pos:start="149:17" pos:end="149:76"><name pos:start="149:17" pos:end="149:28"><name pos:start="149:17" pos:end="149:18">mb</name><operator pos:start="149:19" pos:end="149:20">-&gt;</operator><name pos:start="149:21" pos:end="149:28">v1_error</name></name> <operator pos:start="149:30" pos:end="149:30">=</operator> <call pos:start="149:32" pos:end="149:76"><name pos:start="149:32" pos:end="149:52">compute_mb_distortion</name><argument_list pos:start="149:53" pos:end="149:76">(<argument pos:start="149:54" pos:end="149:54"><expr pos:start="149:54" pos:end="149:54"><name pos:start="149:54" pos:end="149:54">s</name></expr></argument>, <argument pos:start="149:57" pos:end="149:65"><expr pos:start="149:57" pos:end="149:65"><operator pos:start="149:57" pos:end="149:57">&amp;</operator><name pos:start="149:58" pos:end="149:65">sub_pict</name></expr></argument>, <argument pos:start="149:68" pos:end="149:75"><expr pos:start="149:68" pos:end="149:75"><operator pos:start="149:68" pos:end="149:68">&amp;</operator><name pos:start="149:69" pos:end="149:75">vq_pict</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

                <expr_stmt pos:start="151:17" pos:end="151:44"><expr pos:start="151:17" pos:end="151:43"><name pos:start="151:17" pos:end="151:27">total_error</name> <operator pos:start="151:29" pos:end="151:30">+=</operator> <name pos:start="151:32" pos:end="151:43"><name pos:start="151:32" pos:end="151:33">mb</name><operator pos:start="151:34" pos:end="151:35">-&gt;</operator><name pos:start="151:36" pos:end="151:43">v1_error</name></name></expr>;</expr_stmt>

            </block_content>}</block></if> <else pos:start="153:15" pos:end="171:13">else <block pos:start="153:20" pos:end="171:13">{<block_content pos:start="155:17" pos:end="169:48">

                <for pos:start="155:17" pos:end="157:68">for<control pos:start="155:20" pos:end="155:38">(<init pos:start="155:21" pos:end="155:26"><expr pos:start="155:21" pos:end="155:25"><name pos:start="155:21" pos:end="155:21">k</name> <operator pos:start="155:23" pos:end="155:23">=</operator> <literal type="number" pos:start="155:25" pos:end="155:25">0</literal></expr>;</init> <condition pos:start="155:28" pos:end="155:33"><expr pos:start="155:28" pos:end="155:32"><name pos:start="155:28" pos:end="155:28">k</name> <operator pos:start="155:30" pos:end="155:30">&lt;</operator> <literal type="number" pos:start="155:32" pos:end="155:32">4</literal></expr>;</condition> <incr pos:start="155:35" pos:end="155:37"><expr pos:start="155:35" pos:end="155:37"><name pos:start="155:35" pos:end="155:35">k</name><operator pos:start="155:36" pos:end="155:37">++</operator></expr></incr>)</control><block type="pseudo" pos:start="157:21" pos:end="157:68"><block_content pos:start="157:21" pos:end="157:68">

                    <expr_stmt pos:start="157:21" pos:end="157:68"><expr pos:start="157:21" pos:end="157:67"><name pos:start="157:21" pos:end="157:40"><name pos:start="157:21" pos:end="157:22">mb</name><operator pos:start="157:23" pos:end="157:24">-&gt;</operator><name pos:start="157:25" pos:end="157:33">v4_vector</name><index pos:start="157:34" pos:end="157:37">[<expr pos:start="157:35" pos:end="157:36"><name pos:start="157:35" pos:end="157:36">v4</name></expr>]</index><index pos:start="157:38" pos:end="157:40">[<expr pos:start="157:39" pos:end="157:39"><name pos:start="157:39" pos:end="157:39">k</name></expr>]</index></name> <operator pos:start="157:42" pos:end="157:42">=</operator> <name pos:start="157:44" pos:end="157:67"><name pos:start="157:44" pos:end="157:44">s</name><operator pos:start="157:45" pos:end="157:46">-&gt;</operator><name pos:start="157:47" pos:end="157:62">codebook_closest</name><index pos:start="157:63" pos:end="157:67">[<expr pos:start="157:64" pos:end="157:66"><name pos:start="157:64" pos:end="157:64">i</name><operator pos:start="157:65" pos:end="157:65">+</operator><name pos:start="157:66" pos:end="157:66">k</name></expr>]</index></name></expr>;</expr_stmt></block_content></block></for>



                <comment type="line" pos:start="161:17" pos:end="161:46">//fill in vq_pict with V4 data</comment>

                <expr_stmt pos:start="163:17" pos:end="163:71"><expr pos:start="163:17" pos:end="163:70"><call pos:start="163:17" pos:end="163:70"><name pos:start="163:17" pos:end="163:32">decode_v4_vector</name><argument_list pos:start="163:33" pos:end="163:70">(<argument pos:start="163:34" pos:end="163:34"><expr pos:start="163:34" pos:end="163:34"><name pos:start="163:34" pos:end="163:34">s</name></expr></argument>, <argument pos:start="163:37" pos:end="163:44"><expr pos:start="163:37" pos:end="163:44"><operator pos:start="163:37" pos:end="163:37">&amp;</operator><name pos:start="163:38" pos:end="163:44">vq_pict</name></expr></argument>, <argument pos:start="163:47" pos:end="163:63"><expr pos:start="163:47" pos:end="163:63"><name pos:start="163:47" pos:end="163:63"><name pos:start="163:47" pos:end="163:48">mb</name><operator pos:start="163:49" pos:end="163:50">-&gt;</operator><name pos:start="163:51" pos:end="163:59">v4_vector</name><index pos:start="163:60" pos:end="163:63">[<expr pos:start="163:61" pos:end="163:62"><name pos:start="163:61" pos:end="163:62">v4</name></expr>]</index></name></expr></argument>, <argument pos:start="163:66" pos:end="163:69"><expr pos:start="163:66" pos:end="163:69"><name pos:start="163:66" pos:end="163:69">info</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>



                <expr_stmt pos:start="167:17" pos:end="167:81"><expr pos:start="167:17" pos:end="167:80"><name pos:start="167:17" pos:end="167:32"><name pos:start="167:17" pos:end="167:18">mb</name><operator pos:start="167:19" pos:end="167:20">-&gt;</operator><name pos:start="167:21" pos:end="167:28">v4_error</name><index pos:start="167:29" pos:end="167:32">[<expr pos:start="167:30" pos:end="167:31"><name pos:start="167:30" pos:end="167:31">v4</name></expr>]</index></name> <operator pos:start="167:34" pos:end="167:34">=</operator> <call pos:start="167:36" pos:end="167:80"><name pos:start="167:36" pos:end="167:56">compute_mb_distortion</name><argument_list pos:start="167:57" pos:end="167:80">(<argument pos:start="167:58" pos:end="167:58"><expr pos:start="167:58" pos:end="167:58"><name pos:start="167:58" pos:end="167:58">s</name></expr></argument>, <argument pos:start="167:61" pos:end="167:69"><expr pos:start="167:61" pos:end="167:69"><operator pos:start="167:61" pos:end="167:61">&amp;</operator><name pos:start="167:62" pos:end="167:69">sub_pict</name></expr></argument>, <argument pos:start="167:72" pos:end="167:79"><expr pos:start="167:72" pos:end="167:79"><operator pos:start="167:72" pos:end="167:72">&amp;</operator><name pos:start="167:73" pos:end="167:79">vq_pict</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

                <expr_stmt pos:start="169:17" pos:end="169:48"><expr pos:start="169:17" pos:end="169:47"><name pos:start="169:17" pos:end="169:27">total_error</name> <operator pos:start="169:29" pos:end="169:30">+=</operator> <name pos:start="169:32" pos:end="169:47"><name pos:start="169:32" pos:end="169:33">mb</name><operator pos:start="169:34" pos:end="169:35">-&gt;</operator><name pos:start="169:36" pos:end="169:43">v4_error</name><index pos:start="169:44" pos:end="169:47">[<expr pos:start="169:45" pos:end="169:46"><name pos:start="169:45" pos:end="169:46">v4</name></expr>]</index></name></expr>;</expr_stmt>

            </block_content>}</block></else></if_stmt>

        </block_content>}</block></for>

    </block_content>}</block></for>



    <comment type="line" pos:start="179:5" pos:end="179:102">//av_log(s-&gt;avctx, AV_LOG_INFO, "mode %i size %i i %i error %li\n", v1mode, size, i, total_error);</comment>



    <return pos:start="183:5" pos:end="183:13">return <expr pos:start="183:12" pos:end="183:12"><literal type="number" pos:start="183:12" pos:end="183:12">0</literal></expr>;</return>

</block_content>}</block></function>
</unit>
