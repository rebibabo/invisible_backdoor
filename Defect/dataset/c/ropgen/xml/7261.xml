<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<unit xmlns="http://www.srcML.org/srcML/src" xmlns:pos="http://www.srcML.org/srcML/position" revision="1.0.0" language="C" filename="dataset/ropgen/aug/1/7261.c" pos:tabs="8"><function pos:start="1:1" pos:end="163:1"><type pos:start="1:1" pos:end="1:10"><specifier pos:start="1:1" pos:end="1:6">static</specifier> <name pos:start="1:8" pos:end="1:10">int</name></type> <name pos:start="1:12" pos:end="1:29">dc1394_read_header</name><parameter_list pos:start="1:30" pos:end="1:74">(<parameter pos:start="1:31" pos:end="1:48"><decl pos:start="1:31" pos:end="1:48"><type pos:start="1:31" pos:end="1:48"><name pos:start="1:31" pos:end="1:45">AVFormatContext</name> <modifier pos:start="1:47" pos:end="1:47">*</modifier></type><name pos:start="1:48" pos:end="1:48">c</name></decl></parameter>, <parameter pos:start="1:51" pos:end="1:73"><decl pos:start="1:51" pos:end="1:73"><type pos:start="1:51" pos:end="1:73"><name pos:start="1:51" pos:end="1:68">AVFormatParameters</name> <modifier pos:start="1:70" pos:end="1:70">*</modifier></type> <name pos:start="1:72" pos:end="1:73">ap</name></decl></parameter>)</parameter_list>

<block pos:start="3:1" pos:end="163:1">{<block_content pos:start="5:5" pos:end="161:14">

    <decl_stmt pos:start="5:5" pos:end="5:39"><decl pos:start="5:5" pos:end="5:38"><type pos:start="5:5" pos:end="5:16"><name pos:start="5:5" pos:end="5:15">dc1394_data</name><modifier pos:start="5:16" pos:end="5:16">*</modifier></type> <name pos:start="5:18" pos:end="5:23">dc1394</name> <init pos:start="5:25" pos:end="5:38">= <expr pos:start="5:27" pos:end="5:38"><name pos:start="5:27" pos:end="5:38"><name pos:start="5:27" pos:end="5:27">c</name><operator pos:start="5:28" pos:end="5:29">-&gt;</operator><name pos:start="5:30" pos:end="5:38">priv_data</name></name></expr></init></decl>;</decl_stmt>

    <decl_stmt pos:start="7:5" pos:end="7:18"><decl pos:start="7:5" pos:end="7:17"><type pos:start="7:5" pos:end="7:13"><name pos:start="7:5" pos:end="7:12">AVStream</name><modifier pos:start="7:13" pos:end="7:13">*</modifier></type> <name pos:start="7:15" pos:end="7:17">vst</name></decl>;</decl_stmt>

    <decl_stmt pos:start="9:5" pos:end="9:27"><decl pos:start="9:5" pos:end="9:26"><type pos:start="9:5" pos:end="9:13"><name pos:start="9:5" pos:end="9:12">nodeid_t</name><modifier pos:start="9:13" pos:end="9:13">*</modifier></type> <name pos:start="9:15" pos:end="9:26">camera_nodes</name></decl>;</decl_stmt>

    <decl_stmt pos:start="11:5" pos:end="11:12"><decl pos:start="11:5" pos:end="11:11"><type pos:start="11:5" pos:end="11:7"><name pos:start="11:5" pos:end="11:7">int</name></type> <name pos:start="11:9" pos:end="11:11">res</name></decl>;</decl_stmt>

    <decl_stmt pos:start="13:5" pos:end="13:36"><decl pos:start="13:5" pos:end="13:35"><type pos:start="13:5" pos:end="13:32"><name pos:start="13:5" pos:end="13:30"><name pos:start="13:5" pos:end="13:10">struct</name> <name pos:start="13:12" pos:end="13:30">dc1394_frame_format</name></name> <modifier pos:start="13:32" pos:end="13:32">*</modifier></type><name pos:start="13:33" pos:end="13:35">fmt</name></decl>;</decl_stmt>

    <decl_stmt pos:start="15:5" pos:end="15:34"><decl pos:start="15:5" pos:end="15:33"><type pos:start="15:5" pos:end="15:30"><name pos:start="15:5" pos:end="15:28"><name pos:start="15:5" pos:end="15:10">struct</name> <name pos:start="15:12" pos:end="15:28">dc1394_frame_rate</name></name> <modifier pos:start="15:30" pos:end="15:30">*</modifier></type><name pos:start="15:31" pos:end="15:33">fps</name></decl>;</decl_stmt>



    <for pos:start="19:5" pos:end="23:19">for <control pos:start="19:9" pos:end="19:55">(<init pos:start="19:10" pos:end="19:36"><expr pos:start="19:10" pos:end="19:35"><name pos:start="19:10" pos:end="19:12">fmt</name> <operator pos:start="19:14" pos:end="19:14">=</operator> <name pos:start="19:16" pos:end="19:35">dc1394_frame_formats</name></expr>;</init> <condition pos:start="19:38" pos:end="19:48"><expr pos:start="19:38" pos:end="19:47"><name pos:start="19:38" pos:end="19:47"><name pos:start="19:38" pos:end="19:40">fmt</name><operator pos:start="19:41" pos:end="19:42">-&gt;</operator><name pos:start="19:43" pos:end="19:47">width</name></name></expr>;</condition> <incr pos:start="19:50" pos:end="19:54"><expr pos:start="19:50" pos:end="19:54"><name pos:start="19:50" pos:end="19:52">fmt</name><operator pos:start="19:53" pos:end="19:54">++</operator></expr></incr>)</control><block type="pseudo" pos:start="21:10" pos:end="23:19"><block_content pos:start="21:10" pos:end="23:19">

         <if_stmt pos:start="21:10" pos:end="23:19"><if pos:start="21:10" pos:end="23:19">if <condition pos:start="21:13" pos:end="21:97">(<expr pos:start="21:14" pos:end="21:96"><name pos:start="21:14" pos:end="21:25"><name pos:start="21:14" pos:end="21:16">fmt</name><operator pos:start="21:17" pos:end="21:18">-&gt;</operator><name pos:start="21:19" pos:end="21:25">pix_fmt</name></name> <operator pos:start="21:27" pos:end="21:28">==</operator> <name pos:start="21:30" pos:end="21:40"><name pos:start="21:30" pos:end="21:31">ap</name><operator pos:start="21:32" pos:end="21:33">-&gt;</operator><name pos:start="21:34" pos:end="21:40">pix_fmt</name></name> <operator pos:start="21:42" pos:end="21:43">&amp;&amp;</operator> <name pos:start="21:45" pos:end="21:54"><name pos:start="21:45" pos:end="21:47">fmt</name><operator pos:start="21:48" pos:end="21:49">-&gt;</operator><name pos:start="21:50" pos:end="21:54">width</name></name> <operator pos:start="21:56" pos:end="21:57">==</operator> <name pos:start="21:59" pos:end="21:67"><name pos:start="21:59" pos:end="21:60">ap</name><operator pos:start="21:61" pos:end="21:62">-&gt;</operator><name pos:start="21:63" pos:end="21:67">width</name></name> <operator pos:start="21:69" pos:end="21:70">&amp;&amp;</operator> <name pos:start="21:72" pos:end="21:82"><name pos:start="21:72" pos:end="21:74">fmt</name><operator pos:start="21:75" pos:end="21:76">-&gt;</operator><name pos:start="21:77" pos:end="21:82">height</name></name> <operator pos:start="21:84" pos:end="21:85">==</operator> <name pos:start="21:87" pos:end="21:96"><name pos:start="21:87" pos:end="21:88">ap</name><operator pos:start="21:89" pos:end="21:90">-&gt;</operator><name pos:start="21:91" pos:end="21:96">height</name></name></expr>)</condition><block type="pseudo" pos:start="23:14" pos:end="23:19"><block_content pos:start="23:14" pos:end="23:19">

             <break pos:start="23:14" pos:end="23:19">break;</break></block_content></block></if></if_stmt></block_content></block></for>



    <for pos:start="27:5" pos:end="31:19">for <control pos:start="27:9" pos:end="27:58">(<init pos:start="27:10" pos:end="27:34"><expr pos:start="27:10" pos:end="27:33"><name pos:start="27:10" pos:end="27:12">fps</name> <operator pos:start="27:14" pos:end="27:14">=</operator> <name pos:start="27:16" pos:end="27:33">dc1394_frame_rates</name></expr>;</init> <condition pos:start="27:36" pos:end="27:51"><expr pos:start="27:36" pos:end="27:50"><name pos:start="27:36" pos:end="27:50"><name pos:start="27:36" pos:end="27:38">fps</name><operator pos:start="27:39" pos:end="27:40">-&gt;</operator><name pos:start="27:41" pos:end="27:50">frame_rate</name></name></expr>;</condition> <incr pos:start="27:53" pos:end="27:57"><expr pos:start="27:53" pos:end="27:57"><name pos:start="27:53" pos:end="27:55">fps</name><operator pos:start="27:56" pos:end="27:57">++</operator></expr></incr>)</control><block type="pseudo" pos:start="29:10" pos:end="31:19"><block_content pos:start="29:10" pos:end="31:19">

         <if_stmt pos:start="29:10" pos:end="31:19"><if pos:start="29:10" pos:end="31:19">if <condition pos:start="29:13" pos:end="29:87">(<expr pos:start="29:14" pos:end="29:86"><name pos:start="29:14" pos:end="29:28"><name pos:start="29:14" pos:end="29:16">fps</name><operator pos:start="29:17" pos:end="29:18">-&gt;</operator><name pos:start="29:19" pos:end="29:28">frame_rate</name></name> <operator pos:start="29:30" pos:end="29:31">==</operator> <call pos:start="29:33" pos:end="29:86"><name pos:start="29:33" pos:end="29:42">av_rescale</name><argument_list pos:start="29:43" pos:end="29:86">(<argument pos:start="29:44" pos:end="29:47"><expr pos:start="29:44" pos:end="29:47"><literal type="number" pos:start="29:44" pos:end="29:47">1000</literal></expr></argument>, <argument pos:start="29:50" pos:end="29:66"><expr pos:start="29:50" pos:end="29:66"><name pos:start="29:50" pos:end="29:66"><name pos:start="29:50" pos:end="29:51">ap</name><operator pos:start="29:52" pos:end="29:53">-&gt;</operator><name pos:start="29:54" pos:end="29:62">time_base</name><operator pos:start="29:63" pos:end="29:63">.</operator><name pos:start="29:64" pos:end="29:66">den</name></name></expr></argument>, <argument pos:start="29:69" pos:end="29:85"><expr pos:start="29:69" pos:end="29:85"><name pos:start="29:69" pos:end="29:85"><name pos:start="29:69" pos:end="29:70">ap</name><operator pos:start="29:71" pos:end="29:72">-&gt;</operator><name pos:start="29:73" pos:end="29:81">time_base</name><operator pos:start="29:82" pos:end="29:82">.</operator><name pos:start="29:83" pos:end="29:85">num</name></name></expr></argument>)</argument_list></call></expr>)</condition><block type="pseudo" pos:start="31:14" pos:end="31:19"><block_content pos:start="31:14" pos:end="31:19">

             <break pos:start="31:14" pos:end="31:19">break;</break></block_content></block></if></if_stmt></block_content></block></for>



    <comment type="block" pos:start="35:5" pos:end="35:31">/* create a video stream */</comment>

    <expr_stmt pos:start="37:5" pos:end="37:30"><expr pos:start="37:5" pos:end="37:29"><name pos:start="37:5" pos:end="37:7">vst</name> <operator pos:start="37:9" pos:end="37:9">=</operator> <call pos:start="37:11" pos:end="37:29"><name pos:start="37:11" pos:end="37:23">av_new_stream</name><argument_list pos:start="37:24" pos:end="37:29">(<argument pos:start="37:25" pos:end="37:25"><expr pos:start="37:25" pos:end="37:25"><name pos:start="37:25" pos:end="37:25">c</name></expr></argument>, <argument pos:start="37:28" pos:end="37:28"><expr pos:start="37:28" pos:end="37:28"><literal type="number" pos:start="37:28" pos:end="37:28">0</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    <if_stmt pos:start="39:5" pos:end="41:18"><if pos:start="39:5" pos:end="41:18">if <condition pos:start="39:8" pos:end="39:13">(<expr pos:start="39:9" pos:end="39:12"><operator pos:start="39:9" pos:end="39:9">!</operator><name pos:start="39:10" pos:end="39:12">vst</name></expr>)</condition><block type="pseudo" pos:start="41:9" pos:end="41:18"><block_content pos:start="41:9" pos:end="41:18">

        <return pos:start="41:9" pos:end="41:18">return <expr pos:start="41:16" pos:end="41:17"><operator pos:start="41:16" pos:end="41:16">-</operator><literal type="number" pos:start="41:17" pos:end="41:17">1</literal></expr>;</return></block_content></block></if></if_stmt>

    <expr_stmt pos:start="43:5" pos:end="43:38"><expr pos:start="43:5" pos:end="43:37"><call pos:start="43:5" pos:end="43:37"><name pos:start="43:5" pos:end="43:19">av_set_pts_info</name><argument_list pos:start="43:20" pos:end="43:37">(<argument pos:start="43:21" pos:end="43:23"><expr pos:start="43:21" pos:end="43:23"><name pos:start="43:21" pos:end="43:23">vst</name></expr></argument>, <argument pos:start="43:26" pos:end="43:27"><expr pos:start="43:26" pos:end="43:27"><literal type="number" pos:start="43:26" pos:end="43:27">64</literal></expr></argument>, <argument pos:start="43:30" pos:end="43:30"><expr pos:start="43:30" pos:end="43:30"><literal type="number" pos:start="43:30" pos:end="43:30">1</literal></expr></argument>, <argument pos:start="43:33" pos:end="43:36"><expr pos:start="43:33" pos:end="43:36"><literal type="number" pos:start="43:33" pos:end="43:36">1000</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    <expr_stmt pos:start="45:5" pos:end="45:46"><expr pos:start="45:5" pos:end="45:45"><name pos:start="45:5" pos:end="45:26"><name pos:start="45:5" pos:end="45:7">vst</name><operator pos:start="45:8" pos:end="45:9">-&gt;</operator><name pos:start="45:10" pos:end="45:14">codec</name><operator pos:start="45:15" pos:end="45:16">-&gt;</operator><name pos:start="45:17" pos:end="45:26">codec_type</name></name> <operator pos:start="45:28" pos:end="45:28">=</operator> <name pos:start="45:30" pos:end="45:45">CODEC_TYPE_VIDEO</name></expr>;</expr_stmt>

    <expr_stmt pos:start="47:5" pos:end="47:45"><expr pos:start="47:5" pos:end="47:44"><name pos:start="47:5" pos:end="47:24"><name pos:start="47:5" pos:end="47:7">vst</name><operator pos:start="47:8" pos:end="47:9">-&gt;</operator><name pos:start="47:10" pos:end="47:14">codec</name><operator pos:start="47:15" pos:end="47:16">-&gt;</operator><name pos:start="47:17" pos:end="47:24">codec_id</name></name> <operator pos:start="47:26" pos:end="47:26">=</operator> <name pos:start="47:28" pos:end="47:44">CODEC_ID_RAWVIDEO</name></expr>;</expr_stmt>

    <expr_stmt pos:start="49:5" pos:end="49:48"><expr pos:start="49:5" pos:end="49:47"><name pos:start="49:5" pos:end="49:29"><name pos:start="49:5" pos:end="49:7">vst</name><operator pos:start="49:8" pos:end="49:9">-&gt;</operator><name pos:start="49:10" pos:end="49:14">codec</name><operator pos:start="49:15" pos:end="49:16">-&gt;</operator><name pos:start="49:17" pos:end="49:25">time_base</name><operator pos:start="49:26" pos:end="49:26">.</operator><name pos:start="49:27" pos:end="49:29">den</name></name> <operator pos:start="49:31" pos:end="49:31">=</operator> <name pos:start="49:33" pos:end="49:47"><name pos:start="49:33" pos:end="49:35">fps</name><operator pos:start="49:36" pos:end="49:37">-&gt;</operator><name pos:start="49:38" pos:end="49:47">frame_rate</name></name></expr>;</expr_stmt>

    <expr_stmt pos:start="51:5" pos:end="51:37"><expr pos:start="51:5" pos:end="51:36"><name pos:start="51:5" pos:end="51:29"><name pos:start="51:5" pos:end="51:7">vst</name><operator pos:start="51:8" pos:end="51:9">-&gt;</operator><name pos:start="51:10" pos:end="51:14">codec</name><operator pos:start="51:15" pos:end="51:16">-&gt;</operator><name pos:start="51:17" pos:end="51:25">time_base</name><operator pos:start="51:26" pos:end="51:26">.</operator><name pos:start="51:27" pos:end="51:29">num</name></name> <operator pos:start="51:31" pos:end="51:31">=</operator> <literal type="number" pos:start="51:33" pos:end="51:36">1000</literal></expr>;</expr_stmt>

    <expr_stmt pos:start="53:5" pos:end="53:35"><expr pos:start="53:5" pos:end="53:34"><name pos:start="53:5" pos:end="53:21"><name pos:start="53:5" pos:end="53:7">vst</name><operator pos:start="53:8" pos:end="53:9">-&gt;</operator><name pos:start="53:10" pos:end="53:14">codec</name><operator pos:start="53:15" pos:end="53:16">-&gt;</operator><name pos:start="53:17" pos:end="53:21">width</name></name> <operator pos:start="53:23" pos:end="53:23">=</operator> <name pos:start="53:25" pos:end="53:34"><name pos:start="53:25" pos:end="53:27">fmt</name><operator pos:start="53:28" pos:end="53:29">-&gt;</operator><name pos:start="53:30" pos:end="53:34">width</name></name></expr>;</expr_stmt>

    <expr_stmt pos:start="55:5" pos:end="55:37"><expr pos:start="55:5" pos:end="55:36"><name pos:start="55:5" pos:end="55:22"><name pos:start="55:5" pos:end="55:7">vst</name><operator pos:start="55:8" pos:end="55:9">-&gt;</operator><name pos:start="55:10" pos:end="55:14">codec</name><operator pos:start="55:15" pos:end="55:16">-&gt;</operator><name pos:start="55:17" pos:end="55:22">height</name></name> <operator pos:start="55:24" pos:end="55:24">=</operator> <name pos:start="55:26" pos:end="55:36"><name pos:start="55:26" pos:end="55:28">fmt</name><operator pos:start="55:29" pos:end="55:30">-&gt;</operator><name pos:start="55:31" pos:end="55:36">height</name></name></expr>;</expr_stmt>

    <expr_stmt pos:start="57:5" pos:end="57:39"><expr pos:start="57:5" pos:end="57:38"><name pos:start="57:5" pos:end="57:23"><name pos:start="57:5" pos:end="57:7">vst</name><operator pos:start="57:8" pos:end="57:9">-&gt;</operator><name pos:start="57:10" pos:end="57:14">codec</name><operator pos:start="57:15" pos:end="57:16">-&gt;</operator><name pos:start="57:17" pos:end="57:23">pix_fmt</name></name> <operator pos:start="57:25" pos:end="57:25">=</operator> <name pos:start="57:27" pos:end="57:38"><name pos:start="57:27" pos:end="57:29">fmt</name><operator pos:start="57:30" pos:end="57:31">-&gt;</operator><name pos:start="57:32" pos:end="57:38">pix_fmt</name></name></expr>;</expr_stmt>



    <comment type="block" pos:start="61:5" pos:end="61:21">/* packet init */</comment>

    <expr_stmt pos:start="63:5" pos:end="63:36"><expr pos:start="63:5" pos:end="63:35"><call pos:start="63:5" pos:end="63:35"><name pos:start="63:5" pos:end="63:18">av_init_packet</name><argument_list pos:start="63:19" pos:end="63:35">(<argument pos:start="63:20" pos:end="63:34"><expr pos:start="63:20" pos:end="63:34"><operator pos:start="63:20" pos:end="63:20">&amp;</operator><name pos:start="63:21" pos:end="63:34"><name pos:start="63:21" pos:end="63:26">dc1394</name><operator pos:start="63:27" pos:end="63:28">-&gt;</operator><name pos:start="63:29" pos:end="63:34">packet</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    <expr_stmt pos:start="65:5" pos:end="65:84"><expr pos:start="65:5" pos:end="65:83"><name pos:start="65:5" pos:end="65:23"><name pos:start="65:5" pos:end="65:10">dc1394</name><operator pos:start="65:11" pos:end="65:12">-&gt;</operator><name pos:start="65:13" pos:end="65:18">packet</name><operator pos:start="65:19" pos:end="65:19">.</operator><name pos:start="65:20" pos:end="65:23">size</name></name> <operator pos:start="65:25" pos:end="65:25">=</operator> <call pos:start="65:27" pos:end="65:83"><name pos:start="65:27" pos:end="65:44">avpicture_get_size</name><argument_list pos:start="65:45" pos:end="65:83">(<argument pos:start="65:46" pos:end="65:57"><expr pos:start="65:46" pos:end="65:57"><name pos:start="65:46" pos:end="65:57"><name pos:start="65:46" pos:end="65:48">fmt</name><operator pos:start="65:49" pos:end="65:50">-&gt;</operator><name pos:start="65:51" pos:end="65:57">pix_fmt</name></name></expr></argument>, <argument pos:start="65:60" pos:end="65:69"><expr pos:start="65:60" pos:end="65:69"><name pos:start="65:60" pos:end="65:69"><name pos:start="65:60" pos:end="65:62">fmt</name><operator pos:start="65:63" pos:end="65:64">-&gt;</operator><name pos:start="65:65" pos:end="65:69">width</name></name></expr></argument>, <argument pos:start="65:72" pos:end="65:82"><expr pos:start="65:72" pos:end="65:82"><name pos:start="65:72" pos:end="65:82"><name pos:start="65:72" pos:end="65:74">fmt</name><operator pos:start="65:75" pos:end="65:76">-&gt;</operator><name pos:start="65:77" pos:end="65:82">height</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    <expr_stmt pos:start="67:5" pos:end="67:45"><expr pos:start="67:5" pos:end="67:44"><name pos:start="67:5" pos:end="67:31"><name pos:start="67:5" pos:end="67:10">dc1394</name><operator pos:start="67:11" pos:end="67:12">-&gt;</operator><name pos:start="67:13" pos:end="67:18">packet</name><operator pos:start="67:19" pos:end="67:19">.</operator><name pos:start="67:20" pos:end="67:31">stream_index</name></name> <operator pos:start="67:33" pos:end="67:33">=</operator> <name pos:start="67:35" pos:end="67:44"><name pos:start="67:35" pos:end="67:37">vst</name><operator pos:start="67:38" pos:end="67:39">-&gt;</operator><name pos:start="67:40" pos:end="67:44">index</name></name></expr>;</expr_stmt>

    <expr_stmt pos:start="69:5" pos:end="69:41"><expr pos:start="69:5" pos:end="69:40"><name pos:start="69:5" pos:end="69:24"><name pos:start="69:5" pos:end="69:10">dc1394</name><operator pos:start="69:11" pos:end="69:12">-&gt;</operator><name pos:start="69:13" pos:end="69:18">packet</name><operator pos:start="69:19" pos:end="69:19">.</operator><name pos:start="69:20" pos:end="69:24">flags</name></name> <operator pos:start="69:26" pos:end="69:27">|=</operator> <name pos:start="69:29" pos:end="69:40">PKT_FLAG_KEY</name></expr>;</expr_stmt>



    <expr_stmt pos:start="73:5" pos:end="73:30"><expr pos:start="73:5" pos:end="73:29"><name pos:start="73:5" pos:end="73:25"><name pos:start="73:5" pos:end="73:10">dc1394</name><operator pos:start="73:11" pos:end="73:12">-&gt;</operator><name pos:start="73:13" pos:end="73:25">current_frame</name></name> <operator pos:start="73:27" pos:end="73:27">=</operator> <literal type="number" pos:start="73:29" pos:end="73:29">0</literal></expr>;</expr_stmt>

    <expr_stmt pos:start="75:5" pos:end="75:34"><expr pos:start="75:5" pos:end="75:33"><name pos:start="75:5" pos:end="75:15"><name pos:start="75:5" pos:end="75:10">dc1394</name><operator pos:start="75:11" pos:end="75:12">-&gt;</operator><name pos:start="75:13" pos:end="75:15">fps</name></name> <operator pos:start="75:17" pos:end="75:17">=</operator> <name pos:start="75:19" pos:end="75:33"><name pos:start="75:19" pos:end="75:21">fps</name><operator pos:start="75:22" pos:end="75:23">-&gt;</operator><name pos:start="75:24" pos:end="75:33">frame_rate</name></name></expr>;</expr_stmt>



    <expr_stmt pos:start="79:5" pos:end="79:86"><expr pos:start="79:5" pos:end="79:85"><name pos:start="79:5" pos:end="79:24"><name pos:start="79:5" pos:end="79:7">vst</name><operator pos:start="79:8" pos:end="79:9">-&gt;</operator><name pos:start="79:10" pos:end="79:14">codec</name><operator pos:start="79:15" pos:end="79:16">-&gt;</operator><name pos:start="79:17" pos:end="79:24">bit_rate</name></name> <operator pos:start="79:26" pos:end="79:26">=</operator> <call pos:start="79:28" pos:end="79:85"><name pos:start="79:28" pos:end="79:37">av_rescale</name><argument_list pos:start="79:38" pos:end="79:85">(<argument pos:start="79:39" pos:end="79:61"><expr pos:start="79:39" pos:end="79:61"><name pos:start="79:39" pos:end="79:57"><name pos:start="79:39" pos:end="79:44">dc1394</name><operator pos:start="79:45" pos:end="79:46">-&gt;</operator><name pos:start="79:47" pos:end="79:52">packet</name><operator pos:start="79:53" pos:end="79:53">.</operator><name pos:start="79:54" pos:end="79:57">size</name></name> <operator pos:start="79:59" pos:end="79:59">*</operator> <literal type="number" pos:start="79:61" pos:end="79:61">8</literal></expr></argument>, <argument pos:start="79:64" pos:end="79:78"><expr pos:start="79:64" pos:end="79:78"><name pos:start="79:64" pos:end="79:78"><name pos:start="79:64" pos:end="79:66">fps</name><operator pos:start="79:67" pos:end="79:68">-&gt;</operator><name pos:start="79:69" pos:end="79:78">frame_rate</name></name></expr></argument>, <argument pos:start="79:81" pos:end="79:84"><expr pos:start="79:81" pos:end="79:84"><literal type="number" pos:start="79:81" pos:end="79:84">1000</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>



    <comment type="block" pos:start="83:5" pos:end="83:36">/* Now lets prep the hardware */</comment>

    <expr_stmt pos:start="85:5" pos:end="85:45"><expr pos:start="85:5" pos:end="85:44"><name pos:start="85:5" pos:end="85:18"><name pos:start="85:5" pos:end="85:10">dc1394</name><operator pos:start="85:11" pos:end="85:12">-&gt;</operator><name pos:start="85:13" pos:end="85:18">handle</name></name> <operator pos:start="85:20" pos:end="85:20">=</operator> <call pos:start="85:22" pos:end="85:44"><name pos:start="85:22" pos:end="85:41">dc1394_create_handle</name><argument_list pos:start="85:42" pos:end="85:44">(<argument pos:start="85:43" pos:end="85:43"><expr pos:start="85:43" pos:end="85:43"><literal type="number" pos:start="85:43" pos:end="85:43">0</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt> <comment type="block" pos:start="85:47" pos:end="85:78">/* FIXME: gotta have ap-&gt;port */</comment>

    <if_stmt pos:start="87:5" pos:end="93:5"><if pos:start="87:5" pos:end="93:5">if <condition pos:start="87:8" pos:end="87:24">(<expr pos:start="87:9" pos:end="87:23"><operator pos:start="87:9" pos:end="87:9">!</operator><name pos:start="87:10" pos:end="87:23"><name pos:start="87:10" pos:end="87:15">dc1394</name><operator pos:start="87:16" pos:end="87:17">-&gt;</operator><name pos:start="87:18" pos:end="87:23">handle</name></name></expr>)</condition> <block pos:start="87:26" pos:end="93:5">{<block_content pos:start="89:9" pos:end="91:17">

        <expr_stmt pos:start="89:9" pos:end="89:94"><expr pos:start="89:9" pos:end="89:93"><call pos:start="89:9" pos:end="89:93"><name pos:start="89:9" pos:end="89:14">av_log</name><argument_list pos:start="89:15" pos:end="89:93">(<argument pos:start="89:16" pos:end="89:16"><expr pos:start="89:16" pos:end="89:16"><name pos:start="89:16" pos:end="89:16">c</name></expr></argument>, <argument pos:start="89:19" pos:end="89:30"><expr pos:start="89:19" pos:end="89:30"><name pos:start="89:19" pos:end="89:30">AV_LOG_ERROR</name></expr></argument>, <argument pos:start="89:33" pos:end="89:74"><expr pos:start="89:33" pos:end="89:74"><literal type="string" pos:start="89:33" pos:end="89:74">"Can't acquire dc1394 handle on port %d\n"</literal></expr></argument>, <argument pos:start="89:77" pos:end="89:77"><expr pos:start="89:77" pos:end="89:77"><literal type="number" pos:start="89:77" pos:end="89:77">0</literal></expr></argument> <comment type="block" pos:start="89:79" pos:end="89:92">/* ap-&gt;port */</comment>)</argument_list></call></expr>;</expr_stmt>

        <goto pos:start="91:9" pos:end="91:17">goto <name pos:start="91:14" pos:end="91:16">out</name>;</goto>

    </block_content>}</block></if></if_stmt>

    <expr_stmt pos:start="95:5" pos:end="95:68"><expr pos:start="95:5" pos:end="95:67"><name pos:start="95:5" pos:end="95:16">camera_nodes</name> <operator pos:start="95:18" pos:end="95:18">=</operator> <call pos:start="95:20" pos:end="95:67"><name pos:start="95:20" pos:end="95:42">dc1394_get_camera_nodes</name><argument_list pos:start="95:43" pos:end="95:67">(<argument pos:start="95:44" pos:end="95:57"><expr pos:start="95:44" pos:end="95:57"><name pos:start="95:44" pos:end="95:57"><name pos:start="95:44" pos:end="95:49">dc1394</name><operator pos:start="95:50" pos:end="95:51">-&gt;</operator><name pos:start="95:52" pos:end="95:57">handle</name></name></expr></argument>, <argument pos:start="95:60" pos:end="95:63"><expr pos:start="95:60" pos:end="95:63"><operator pos:start="95:60" pos:end="95:60">&amp;</operator><name pos:start="95:61" pos:end="95:63">res</name></expr></argument>, <argument pos:start="95:66" pos:end="95:66"><expr pos:start="95:66" pos:end="95:66"><literal type="number" pos:start="95:66" pos:end="95:66">1</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    <if_stmt pos:start="97:5" pos:end="103:5"><if pos:start="97:5" pos:end="103:5">if <condition pos:start="97:8" pos:end="97:71">(<expr pos:start="97:9" pos:end="97:70"><operator pos:start="97:9" pos:end="97:9">!</operator><name pos:start="97:10" pos:end="97:21">camera_nodes</name> <operator pos:start="97:23" pos:end="97:24">||</operator> <name pos:start="97:26" pos:end="97:50"><name pos:start="97:26" pos:end="97:37">camera_nodes</name><index pos:start="97:38" pos:end="97:50">[<expr pos:start="97:39" pos:end="97:49"><name pos:start="97:39" pos:end="97:49"><name pos:start="97:39" pos:end="97:40">ap</name><operator pos:start="97:41" pos:end="97:42">-&gt;</operator><name pos:start="97:43" pos:end="97:49">channel</name></name></expr>]</index></name> <operator pos:start="97:52" pos:end="97:53">==</operator> <name pos:start="97:55" pos:end="97:70">DC1394_NO_CAMERA</name></expr>)</condition> <block pos:start="97:73" pos:end="103:5">{<block_content pos:start="99:9" pos:end="101:24">

        <expr_stmt pos:start="99:9" pos:end="99:91"><expr pos:start="99:9" pos:end="99:90"><call pos:start="99:9" pos:end="99:90"><name pos:start="99:9" pos:end="99:14">av_log</name><argument_list pos:start="99:15" pos:end="99:90">(<argument pos:start="99:16" pos:end="99:16"><expr pos:start="99:16" pos:end="99:16"><name pos:start="99:16" pos:end="99:16">c</name></expr></argument>, <argument pos:start="99:19" pos:end="99:30"><expr pos:start="99:19" pos:end="99:30"><name pos:start="99:19" pos:end="99:30">AV_LOG_ERROR</name></expr></argument>, <argument pos:start="99:33" pos:end="99:76"><expr pos:start="99:33" pos:end="99:76"><literal type="string" pos:start="99:33" pos:end="99:76">"There's no IIDC camera on the channel %d\n"</literal></expr></argument>, <argument pos:start="99:79" pos:end="99:89"><expr pos:start="99:79" pos:end="99:89"><name pos:start="99:79" pos:end="99:89"><name pos:start="99:79" pos:end="99:80">ap</name><operator pos:start="99:81" pos:end="99:82">-&gt;</operator><name pos:start="99:83" pos:end="99:89">channel</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <goto pos:start="101:9" pos:end="101:24">goto <name pos:start="101:14" pos:end="101:23">out_handle</name>;</goto>

    </block_content>}</block></if></if_stmt>

    <expr_stmt pos:start="105:5" pos:end="119:52"><expr pos:start="105:5" pos:end="119:51"><name pos:start="105:5" pos:end="105:7">res</name> <operator pos:start="105:9" pos:end="105:9">=</operator> <call pos:start="105:11" pos:end="119:51"><name pos:start="105:11" pos:end="105:34">dc1394_dma_setup_capture</name><argument_list pos:start="105:35" pos:end="119:51">(<argument pos:start="105:36" pos:end="105:49"><expr pos:start="105:36" pos:end="105:49"><name pos:start="105:36" pos:end="105:49"><name pos:start="105:36" pos:end="105:41">dc1394</name><operator pos:start="105:42" pos:end="105:43">-&gt;</operator><name pos:start="105:44" pos:end="105:49">handle</name></name></expr></argument>, <argument pos:start="105:52" pos:end="105:76"><expr pos:start="105:52" pos:end="105:76"><name pos:start="105:52" pos:end="105:76"><name pos:start="105:52" pos:end="105:63">camera_nodes</name><index pos:start="105:64" pos:end="105:76">[<expr pos:start="105:65" pos:end="105:75"><name pos:start="105:65" pos:end="105:75"><name pos:start="105:65" pos:end="105:66">ap</name><operator pos:start="105:67" pos:end="105:68">-&gt;</operator><name pos:start="105:69" pos:end="105:75">channel</name></name></expr>]</index></name></expr></argument>,

                                   <argument pos:start="107:36" pos:end="107:36"><expr pos:start="107:36" pos:end="107:36"><literal type="number" pos:start="107:36" pos:end="107:36">0</literal></expr></argument>,

                                   <argument pos:start="109:36" pos:end="109:59"><expr pos:start="109:36" pos:end="109:59"><name pos:start="109:36" pos:end="109:59">FORMAT_VGA_NONCOMPRESSED</name></expr></argument>,

                                   <argument pos:start="111:36" pos:end="111:53"><expr pos:start="111:36" pos:end="111:53"><name pos:start="111:36" pos:end="111:53"><name pos:start="111:36" pos:end="111:38">fmt</name><operator pos:start="111:39" pos:end="111:40">-&gt;</operator><name pos:start="111:41" pos:end="111:53">frame_size_id</name></name></expr></argument>,

                                   <argument pos:start="113:36" pos:end="113:44"><expr pos:start="113:36" pos:end="113:44"><name pos:start="113:36" pos:end="113:44">SPEED_400</name></expr></argument>,

                                   <argument pos:start="115:36" pos:end="115:53"><expr pos:start="115:36" pos:end="115:53"><name pos:start="115:36" pos:end="115:53"><name pos:start="115:36" pos:end="115:38">fps</name><operator pos:start="115:39" pos:end="115:40">-&gt;</operator><name pos:start="115:41" pos:end="115:53">frame_rate_id</name></name></expr></argument>, <argument pos:start="115:56" pos:end="115:56"><expr pos:start="115:56" pos:end="115:56"><literal type="number" pos:start="115:56" pos:end="115:56">8</literal></expr></argument>, <argument pos:start="115:59" pos:end="115:59"><expr pos:start="115:59" pos:end="115:59"><literal type="number" pos:start="115:59" pos:end="115:59">1</literal></expr></argument>,

                                   <argument pos:start="117:36" pos:end="117:46"><expr pos:start="117:36" pos:end="117:46"><name pos:start="117:36" pos:end="117:46"><name pos:start="117:36" pos:end="117:36">c</name><operator pos:start="117:37" pos:end="117:38">-&gt;</operator><name pos:start="117:39" pos:end="117:46">filename</name></name></expr></argument>,

                                   <argument pos:start="119:36" pos:end="119:50"><expr pos:start="119:36" pos:end="119:50"><operator pos:start="119:36" pos:end="119:36">&amp;</operator><name pos:start="119:37" pos:end="119:50"><name pos:start="119:37" pos:end="119:42">dc1394</name><operator pos:start="119:43" pos:end="119:44">-&gt;</operator><name pos:start="119:45" pos:end="119:50">camera</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    <expr_stmt pos:start="121:5" pos:end="121:43"><expr pos:start="121:5" pos:end="121:42"><call pos:start="121:5" pos:end="121:42"><name pos:start="121:5" pos:end="121:28">dc1394_free_camera_nodes</name><argument_list pos:start="121:29" pos:end="121:42">(<argument pos:start="121:30" pos:end="121:41"><expr pos:start="121:30" pos:end="121:41"><name pos:start="121:30" pos:end="121:41">camera_nodes</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    <if_stmt pos:start="123:5" pos:end="129:5"><if pos:start="123:5" pos:end="129:5">if <condition pos:start="123:8" pos:end="123:30">(<expr pos:start="123:9" pos:end="123:29"><name pos:start="123:9" pos:end="123:11">res</name> <operator pos:start="123:13" pos:end="123:14">!=</operator> <name pos:start="123:16" pos:end="123:29">DC1394_SUCCESS</name></expr>)</condition> <block pos:start="123:32" pos:end="129:5">{<block_content pos:start="125:9" pos:end="127:24">

        <expr_stmt pos:start="125:9" pos:end="125:78"><expr pos:start="125:9" pos:end="125:77"><call pos:start="125:9" pos:end="125:77"><name pos:start="125:9" pos:end="125:14">av_log</name><argument_list pos:start="125:15" pos:end="125:77">(<argument pos:start="125:16" pos:end="125:16"><expr pos:start="125:16" pos:end="125:16"><name pos:start="125:16" pos:end="125:16">c</name></expr></argument>, <argument pos:start="125:19" pos:end="125:30"><expr pos:start="125:19" pos:end="125:30"><name pos:start="125:19" pos:end="125:30">AV_LOG_ERROR</name></expr></argument>, <argument pos:start="125:33" pos:end="125:76"><expr pos:start="125:33" pos:end="125:76"><literal type="string" pos:start="125:33" pos:end="125:76">"Can't prepare camera for the DMA capture\n"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <goto pos:start="127:9" pos:end="127:24">goto <name pos:start="127:14" pos:end="127:23">out_handle</name>;</goto>

    </block_content>}</block></if></if_stmt>



    <expr_stmt pos:start="133:5" pos:end="133:77"><expr pos:start="133:5" pos:end="133:76"><name pos:start="133:5" pos:end="133:7">res</name> <operator pos:start="133:9" pos:end="133:9">=</operator> <call pos:start="133:11" pos:end="133:76"><name pos:start="133:11" pos:end="133:39">dc1394_start_iso_transmission</name><argument_list pos:start="133:40" pos:end="133:76">(<argument pos:start="133:41" pos:end="133:54"><expr pos:start="133:41" pos:end="133:54"><name pos:start="133:41" pos:end="133:54"><name pos:start="133:41" pos:end="133:46">dc1394</name><operator pos:start="133:47" pos:end="133:48">-&gt;</operator><name pos:start="133:49" pos:end="133:54">handle</name></name></expr></argument>, <argument pos:start="133:57" pos:end="133:75"><expr pos:start="133:57" pos:end="133:75"><name pos:start="133:57" pos:end="133:75"><name pos:start="133:57" pos:end="133:62">dc1394</name><operator pos:start="133:63" pos:end="133:64">-&gt;</operator><name pos:start="133:65" pos:end="133:70">camera</name><operator pos:start="133:71" pos:end="133:71">.</operator><name pos:start="133:72" pos:end="133:75">node</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    <if_stmt pos:start="135:5" pos:end="141:5"><if pos:start="135:5" pos:end="141:5">if <condition pos:start="135:8" pos:end="135:30">(<expr pos:start="135:9" pos:end="135:29"><name pos:start="135:9" pos:end="135:11">res</name> <operator pos:start="135:13" pos:end="135:14">!=</operator> <name pos:start="135:16" pos:end="135:29">DC1394_SUCCESS</name></expr>)</condition> <block pos:start="135:32" pos:end="141:5">{<block_content pos:start="137:9" pos:end="139:28">

        <expr_stmt pos:start="137:9" pos:end="137:74"><expr pos:start="137:9" pos:end="137:73"><call pos:start="137:9" pos:end="137:73"><name pos:start="137:9" pos:end="137:14">av_log</name><argument_list pos:start="137:15" pos:end="137:73">(<argument pos:start="137:16" pos:end="137:16"><expr pos:start="137:16" pos:end="137:16"><name pos:start="137:16" pos:end="137:16">c</name></expr></argument>, <argument pos:start="137:19" pos:end="137:30"><expr pos:start="137:19" pos:end="137:30"><name pos:start="137:19" pos:end="137:30">AV_LOG_ERROR</name></expr></argument>, <argument pos:start="137:33" pos:end="137:72"><expr pos:start="137:33" pos:end="137:72"><literal type="string" pos:start="137:33" pos:end="137:72">"Can't start isochronous transmission\n"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <goto pos:start="139:9" pos:end="139:28">goto <name pos:start="139:14" pos:end="139:27">out_handle_dma</name>;</goto>

    </block_content>}</block></if></if_stmt>



    <return pos:start="145:5" pos:end="145:13">return <expr pos:start="145:12" pos:end="145:12"><literal type="number" pos:start="145:12" pos:end="145:12">0</literal></expr>;</return>



<label pos:start="149:1" pos:end="149:15"><name pos:start="149:1" pos:end="149:14">out_handle_dma</name>:</label>

    <expr_stmt pos:start="151:5" pos:end="151:57"><expr pos:start="151:5" pos:end="151:56"><call pos:start="151:5" pos:end="151:56"><name pos:start="151:5" pos:end="151:23">dc1394_dma_unlisten</name><argument_list pos:start="151:24" pos:end="151:56">(<argument pos:start="151:25" pos:end="151:38"><expr pos:start="151:25" pos:end="151:38"><name pos:start="151:25" pos:end="151:38"><name pos:start="151:25" pos:end="151:30">dc1394</name><operator pos:start="151:31" pos:end="151:32">-&gt;</operator><name pos:start="151:33" pos:end="151:38">handle</name></name></expr></argument>, <argument pos:start="151:41" pos:end="151:55"><expr pos:start="151:41" pos:end="151:55"><operator pos:start="151:41" pos:end="151:41">&amp;</operator><name pos:start="151:42" pos:end="151:55"><name pos:start="151:42" pos:end="151:47">dc1394</name><operator pos:start="151:48" pos:end="151:49">-&gt;</operator><name pos:start="151:50" pos:end="151:55">camera</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    <expr_stmt pos:start="153:5" pos:end="153:63"><expr pos:start="153:5" pos:end="153:62"><call pos:start="153:5" pos:end="153:62"><name pos:start="153:5" pos:end="153:29">dc1394_dma_release_camera</name><argument_list pos:start="153:30" pos:end="153:62">(<argument pos:start="153:31" pos:end="153:44"><expr pos:start="153:31" pos:end="153:44"><name pos:start="153:31" pos:end="153:44"><name pos:start="153:31" pos:end="153:36">dc1394</name><operator pos:start="153:37" pos:end="153:38">-&gt;</operator><name pos:start="153:39" pos:end="153:44">handle</name></name></expr></argument>, <argument pos:start="153:47" pos:end="153:61"><expr pos:start="153:47" pos:end="153:61"><operator pos:start="153:47" pos:end="153:47">&amp;</operator><name pos:start="153:48" pos:end="153:61"><name pos:start="153:48" pos:end="153:53">dc1394</name><operator pos:start="153:54" pos:end="153:55">-&gt;</operator><name pos:start="153:56" pos:end="153:61">camera</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

<label pos:start="155:1" pos:end="155:11"><name pos:start="155:1" pos:end="155:10">out_handle</name>:</label>

    <expr_stmt pos:start="157:5" pos:end="157:42"><expr pos:start="157:5" pos:end="157:41"><call pos:start="157:5" pos:end="157:41"><name pos:start="157:5" pos:end="157:25">dc1394_destroy_handle</name><argument_list pos:start="157:26" pos:end="157:41">(<argument pos:start="157:27" pos:end="157:40"><expr pos:start="157:27" pos:end="157:40"><name pos:start="157:27" pos:end="157:40"><name pos:start="157:27" pos:end="157:32">dc1394</name><operator pos:start="157:33" pos:end="157:34">-&gt;</operator><name pos:start="157:35" pos:end="157:40">handle</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

<label pos:start="159:1" pos:end="159:4"><name pos:start="159:1" pos:end="159:3">out</name>:</label>

    <return pos:start="161:5" pos:end="161:14">return <expr pos:start="161:12" pos:end="161:13"><operator pos:start="161:12" pos:end="161:12">-</operator><literal type="number" pos:start="161:13" pos:end="161:13">1</literal></expr>;</return>

</block_content>}</block></function>
</unit>
