<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<unit xmlns="http://www.srcML.org/srcML/src" xmlns:pos="http://www.srcML.org/srcML/position" revision="1.0.0" language="C" filename="dataset/ropgen/aug/0/21209.c" pos:tabs="8"><function pos:start="1:1" pos:end="169:1"><type pos:start="1:1" pos:end="1:3"><name pos:start="1:1" pos:end="1:3">int</name></type> <name pos:start="1:5" pos:end="1:17">get_segment64</name><parameter_list pos:start="1:18" pos:end="3:55">(<parameter pos:start="1:19" pos:end="1:34"><decl pos:start="1:19" pos:end="1:34"><type pos:start="1:19" pos:end="1:34"><name pos:start="1:19" pos:end="1:29">CPUPPCState</name> <modifier pos:start="1:31" pos:end="1:31">*</modifier></type><name pos:start="1:32" pos:end="1:34">env</name></decl></parameter>, <parameter pos:start="1:37" pos:end="1:50"><decl pos:start="1:37" pos:end="1:50"><type pos:start="1:37" pos:end="1:50"><name pos:start="1:37" pos:end="1:45">mmu_ctx_t</name> <modifier pos:start="1:47" pos:end="1:47">*</modifier></type><name pos:start="1:48" pos:end="1:50">ctx</name></decl></parameter>,

                  <parameter pos:start="3:19" pos:end="3:36"><decl pos:start="3:19" pos:end="3:36"><type pos:start="3:19" pos:end="3:36"><name pos:start="3:19" pos:end="3:30">target_ulong</name></type> <name pos:start="3:32" pos:end="3:36">eaddr</name></decl></parameter>, <parameter pos:start="3:39" pos:end="3:44"><decl pos:start="3:39" pos:end="3:44"><type pos:start="3:39" pos:end="3:44"><name pos:start="3:39" pos:end="3:41">int</name></type> <name pos:start="3:43" pos:end="3:44">rw</name></decl></parameter>, <parameter pos:start="3:47" pos:end="3:54"><decl pos:start="3:47" pos:end="3:54"><type pos:start="3:47" pos:end="3:54"><name pos:start="3:47" pos:end="3:49">int</name></type> <name pos:start="3:51" pos:end="3:54">type</name></decl></parameter>)</parameter_list>

<block pos:start="5:1" pos:end="169:1">{<block_content pos:start="7:5" pos:end="167:15">

    <decl_stmt pos:start="7:5" pos:end="7:16"><decl pos:start="7:5" pos:end="7:15"><type pos:start="7:5" pos:end="7:10"><name pos:start="7:5" pos:end="7:10">hwaddr</name></type> <name pos:start="7:12" pos:end="7:15">hash</name></decl>;</decl_stmt>

    <decl_stmt pos:start="9:5" pos:end="9:22"><decl pos:start="9:5" pos:end="9:21"><type pos:start="9:5" pos:end="9:16"><name pos:start="9:5" pos:end="9:16">target_ulong</name></type> <name pos:start="9:18" pos:end="9:21">vsid</name></decl>;</decl_stmt>

    <decl_stmt pos:start="11:5" pos:end="11:29"><decl pos:start="11:5" pos:end="11:10"><type pos:start="11:5" pos:end="11:7"><name pos:start="11:5" pos:end="11:7">int</name></type> <name pos:start="11:9" pos:end="11:10">pr</name></decl>, <decl pos:start="11:13" pos:end="11:28"><type ref="prev" pos:start="11:5" pos:end="11:7"/><name pos:start="11:13" pos:end="11:28">target_page_bits</name></decl>;</decl_stmt>

    <decl_stmt pos:start="13:5" pos:end="13:18"><decl pos:start="13:5" pos:end="13:11"><type pos:start="13:5" pos:end="13:7"><name pos:start="13:5" pos:end="13:7">int</name></type> <name pos:start="13:9" pos:end="13:11">ret</name></decl>, <decl pos:start="13:14" pos:end="13:17"><type ref="prev" pos:start="13:5" pos:end="13:7"/><name pos:start="13:14" pos:end="13:17">ret2</name></decl>;</decl_stmt>



    <expr_stmt pos:start="17:5" pos:end="17:16"><expr pos:start="17:5" pos:end="17:15"><name pos:start="17:5" pos:end="17:6">pr</name> <operator pos:start="17:8" pos:end="17:8">=</operator> <name pos:start="17:10" pos:end="17:15">msr_pr</name></expr>;</expr_stmt>

    <expr_stmt pos:start="19:5" pos:end="19:23"><expr pos:start="19:5" pos:end="19:22"><name pos:start="19:5" pos:end="19:14"><name pos:start="19:5" pos:end="19:7">ctx</name><operator pos:start="19:8" pos:end="19:9">-&gt;</operator><name pos:start="19:10" pos:end="19:14">eaddr</name></name> <operator pos:start="19:16" pos:end="19:16">=</operator> <name pos:start="19:18" pos:end="19:22">eaddr</name></expr>;</expr_stmt>

    <decl_stmt pos:start="21:5" pos:end="21:19"><decl pos:start="21:5" pos:end="21:18"><type pos:start="21:5" pos:end="21:15"><name pos:start="21:5" pos:end="21:13">ppc_slb_t</name> <modifier pos:start="21:15" pos:end="21:15">*</modifier></type><name pos:start="21:16" pos:end="21:18">slb</name></decl>;</decl_stmt>

    <decl_stmt pos:start="23:5" pos:end="23:26"><decl pos:start="23:5" pos:end="23:25"><type pos:start="23:5" pos:end="23:16"><name pos:start="23:5" pos:end="23:16">target_ulong</name></type> <name pos:start="23:18" pos:end="23:25">pageaddr</name></decl>;</decl_stmt>

    <decl_stmt pos:start="25:5" pos:end="25:21"><decl pos:start="25:5" pos:end="25:20"><type pos:start="25:5" pos:end="25:7"><name pos:start="25:5" pos:end="25:7">int</name></type> <name pos:start="25:9" pos:end="25:20">segment_bits</name></decl>;</decl_stmt>



    <expr_stmt pos:start="29:5" pos:end="29:28"><expr pos:start="29:5" pos:end="29:27"><call pos:start="29:5" pos:end="29:27"><name pos:start="29:5" pos:end="29:11">LOG_MMU</name><argument_list pos:start="29:12" pos:end="29:27">(<argument pos:start="29:13" pos:end="29:26"><expr pos:start="29:13" pos:end="29:26"><literal type="string" pos:start="29:13" pos:end="29:26">"Check SLBs\n"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    <expr_stmt pos:start="31:5" pos:end="31:33"><expr pos:start="31:5" pos:end="31:32"><name pos:start="31:5" pos:end="31:7">slb</name> <operator pos:start="31:9" pos:end="31:9">=</operator> <call pos:start="31:11" pos:end="31:32"><name pos:start="31:11" pos:end="31:20">slb_lookup</name><argument_list pos:start="31:21" pos:end="31:32">(<argument pos:start="31:22" pos:end="31:24"><expr pos:start="31:22" pos:end="31:24"><name pos:start="31:22" pos:end="31:24">env</name></expr></argument>, <argument pos:start="31:27" pos:end="31:31"><expr pos:start="31:27" pos:end="31:31"><name pos:start="31:27" pos:end="31:31">eaddr</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    <if_stmt pos:start="33:5" pos:end="37:5"><if pos:start="33:5" pos:end="37:5">if <condition pos:start="33:8" pos:end="33:13">(<expr pos:start="33:9" pos:end="33:12"><operator pos:start="33:9" pos:end="33:9">!</operator><name pos:start="33:10" pos:end="33:12">slb</name></expr>)</condition> <block pos:start="33:15" pos:end="37:5">{<block_content pos:start="35:9" pos:end="35:18">

        <return pos:start="35:9" pos:end="35:18">return <expr pos:start="35:16" pos:end="35:17"><operator pos:start="35:16" pos:end="35:16">-</operator><literal type="number" pos:start="35:17" pos:end="35:17">5</literal></expr>;</return>

    </block_content>}</block></if></if_stmt>



    <if_stmt pos:start="41:5" pos:end="53:5"><if pos:start="41:5" pos:end="47:5">if <condition pos:start="41:8" pos:end="41:31">(<expr pos:start="41:9" pos:end="41:30"><name pos:start="41:9" pos:end="41:17"><name pos:start="41:9" pos:end="41:11">slb</name><operator pos:start="41:12" pos:end="41:13">-&gt;</operator><name pos:start="41:14" pos:end="41:17">vsid</name></name> <operator pos:start="41:19" pos:end="41:19">&amp;</operator> <name pos:start="41:21" pos:end="41:30">SLB_VSID_B</name></expr>)</condition> <block pos:start="41:33" pos:end="47:5">{<block_content pos:start="43:9" pos:end="45:26">

        <expr_stmt pos:start="43:9" pos:end="43:64"><expr pos:start="43:9" pos:end="43:63"><name pos:start="43:9" pos:end="43:12">vsid</name> <operator pos:start="43:14" pos:end="43:14">=</operator> <operator pos:start="43:16" pos:end="43:16">(</operator><name pos:start="43:17" pos:end="43:25"><name pos:start="43:17" pos:end="43:19">slb</name><operator pos:start="43:20" pos:end="43:21">-&gt;</operator><name pos:start="43:22" pos:end="43:25">vsid</name></name> <operator pos:start="43:27" pos:end="43:27">&amp;</operator> <name pos:start="43:29" pos:end="43:41">SLB_VSID_VSID</name><operator pos:start="43:42" pos:end="43:42">)</operator> <operator pos:start="43:44" pos:end="43:45">&gt;&gt;</operator> <name pos:start="43:47" pos:end="43:63">SLB_VSID_SHIFT_1T</name></expr>;</expr_stmt>

        <expr_stmt pos:start="45:9" pos:end="45:26"><expr pos:start="45:9" pos:end="45:25"><name pos:start="45:9" pos:end="45:20">segment_bits</name> <operator pos:start="45:22" pos:end="45:22">=</operator> <literal type="number" pos:start="45:24" pos:end="45:25">40</literal></expr>;</expr_stmt>

    </block_content>}</block></if> <else pos:start="47:7" pos:end="53:5">else <block pos:start="47:12" pos:end="53:5">{<block_content pos:start="49:9" pos:end="51:26">

        <expr_stmt pos:start="49:9" pos:end="49:61"><expr pos:start="49:9" pos:end="49:60"><name pos:start="49:9" pos:end="49:12">vsid</name> <operator pos:start="49:14" pos:end="49:14">=</operator> <operator pos:start="49:16" pos:end="49:16">(</operator><name pos:start="49:17" pos:end="49:25"><name pos:start="49:17" pos:end="49:19">slb</name><operator pos:start="49:20" pos:end="49:21">-&gt;</operator><name pos:start="49:22" pos:end="49:25">vsid</name></name> <operator pos:start="49:27" pos:end="49:27">&amp;</operator> <name pos:start="49:29" pos:end="49:41">SLB_VSID_VSID</name><operator pos:start="49:42" pos:end="49:42">)</operator> <operator pos:start="49:44" pos:end="49:45">&gt;&gt;</operator> <name pos:start="49:47" pos:end="49:60">SLB_VSID_SHIFT</name></expr>;</expr_stmt>

        <expr_stmt pos:start="51:9" pos:end="51:26"><expr pos:start="51:9" pos:end="51:25"><name pos:start="51:9" pos:end="51:20">segment_bits</name> <operator pos:start="51:22" pos:end="51:22">=</operator> <literal type="number" pos:start="51:24" pos:end="51:25">28</literal></expr>;</expr_stmt>

    </block_content>}</block></else></if_stmt>



    <expr_stmt pos:start="57:5" pos:end="59:50"><expr pos:start="57:5" pos:end="59:49"><name pos:start="57:5" pos:end="57:20">target_page_bits</name> <operator pos:start="57:22" pos:end="57:22">=</operator> <ternary pos:start="57:24" pos:end="59:49"><condition pos:start="57:24" pos:end="59:9"><expr pos:start="57:24" pos:end="57:47"><operator pos:start="57:24" pos:end="57:24">(</operator><name pos:start="57:25" pos:end="57:33"><name pos:start="57:25" pos:end="57:27">slb</name><operator pos:start="57:28" pos:end="57:29">-&gt;</operator><name pos:start="57:30" pos:end="57:33">vsid</name></name> <operator pos:start="57:35" pos:end="57:35">&amp;</operator> <name pos:start="57:37" pos:end="57:46">SLB_VSID_L</name><operator pos:start="57:47" pos:end="57:47">)</operator></expr>

        ?</condition><then pos:start="59:11" pos:end="59:30"> <expr pos:start="59:11" pos:end="59:30"><name pos:start="59:11" pos:end="59:30">TARGET_PAGE_BITS_16M</name></expr> </then><else pos:start="59:32" pos:end="59:49">: <expr pos:start="59:34" pos:end="59:49"><name pos:start="59:34" pos:end="59:49">TARGET_PAGE_BITS</name></expr></else></ternary></expr>;</expr_stmt>

    <expr_stmt pos:start="61:5" pos:end="63:47"><expr pos:start="61:5" pos:end="63:46"><name pos:start="61:5" pos:end="61:12"><name pos:start="61:5" pos:end="61:7">ctx</name><operator pos:start="61:8" pos:end="61:9">-&gt;</operator><name pos:start="61:10" pos:end="61:12">key</name></name> <operator pos:start="61:14" pos:end="61:14">=</operator> <operator pos:start="61:16" pos:end="61:16">!</operator><operator pos:start="61:17" pos:end="61:17">!</operator><operator pos:start="61:18" pos:end="61:18">(</operator><ternary pos:start="61:19" pos:end="63:45"><condition pos:start="61:19" pos:end="61:22"><expr pos:start="61:19" pos:end="61:20"><name pos:start="61:19" pos:end="61:20">pr</name></expr> ?</condition><then pos:start="61:24" pos:end="61:48"> <expr pos:start="61:24" pos:end="61:48"><operator pos:start="61:24" pos:end="61:24">(</operator><name pos:start="61:25" pos:end="61:33"><name pos:start="61:25" pos:end="61:27">slb</name><operator pos:start="61:28" pos:end="61:29">-&gt;</operator><name pos:start="61:30" pos:end="61:33">vsid</name></name> <operator pos:start="61:35" pos:end="61:35">&amp;</operator> <name pos:start="61:37" pos:end="61:47">SLB_VSID_KP</name><operator pos:start="61:48" pos:end="61:48">)</operator></expr>

                  </then><else pos:start="63:19" pos:end="63:45">: <expr pos:start="63:21" pos:end="63:45"><operator pos:start="63:21" pos:end="63:21">(</operator><name pos:start="63:22" pos:end="63:30"><name pos:start="63:22" pos:end="63:24">slb</name><operator pos:start="63:25" pos:end="63:26">-&gt;</operator><name pos:start="63:27" pos:end="63:30">vsid</name></name> <operator pos:start="63:32" pos:end="63:32">&amp;</operator> <name pos:start="63:34" pos:end="63:44">SLB_VSID_KS</name><operator pos:start="63:45" pos:end="63:45">)</operator></expr></else></ternary><operator pos:start="63:46" pos:end="63:46">)</operator></expr>;</expr_stmt>

    <expr_stmt pos:start="65:5" pos:end="65:41"><expr pos:start="65:5" pos:end="65:40"><name pos:start="65:5" pos:end="65:11"><name pos:start="65:5" pos:end="65:7">ctx</name><operator pos:start="65:8" pos:end="65:9">-&gt;</operator><name pos:start="65:10" pos:end="65:11">nx</name></name> <operator pos:start="65:13" pos:end="65:13">=</operator> <operator pos:start="65:15" pos:end="65:15">!</operator><operator pos:start="65:16" pos:end="65:16">!</operator><operator pos:start="65:17" pos:end="65:17">(</operator><name pos:start="65:18" pos:end="65:26"><name pos:start="65:18" pos:end="65:20">slb</name><operator pos:start="65:21" pos:end="65:22">-&gt;</operator><name pos:start="65:23" pos:end="65:26">vsid</name></name> <operator pos:start="65:28" pos:end="65:28">&amp;</operator> <name pos:start="65:30" pos:end="65:39">SLB_VSID_N</name><operator pos:start="65:40" pos:end="65:40">)</operator></expr>;</expr_stmt>



    <expr_stmt pos:start="69:5" pos:end="71:58"><expr pos:start="69:5" pos:end="71:57"><name pos:start="69:5" pos:end="69:12">pageaddr</name> <operator pos:start="69:14" pos:end="69:14">=</operator> <name pos:start="69:16" pos:end="69:20">eaddr</name> <operator pos:start="69:22" pos:end="69:22">&amp;</operator> <operator pos:start="69:24" pos:end="69:24">(</operator><operator pos:start="69:25" pos:end="69:25">(</operator><literal type="number" pos:start="69:26" pos:end="69:29">1ULL</literal> <operator pos:start="69:31" pos:end="69:32">&lt;&lt;</operator> <name pos:start="69:34" pos:end="69:45">segment_bits</name><operator pos:start="69:46" pos:end="69:46">)</operator>

                            <operator pos:start="71:29" pos:end="71:29">-</operator> <operator pos:start="71:31" pos:end="71:31">(</operator><literal type="number" pos:start="71:32" pos:end="71:35">1ULL</literal> <operator pos:start="71:37" pos:end="71:38">&lt;&lt;</operator> <name pos:start="71:40" pos:end="71:55">target_page_bits</name><operator pos:start="71:56" pos:end="71:56">)</operator><operator pos:start="71:57" pos:end="71:57">)</operator></expr>;</expr_stmt>

    <if_stmt pos:start="73:5" pos:end="81:5"><if pos:start="73:5" pos:end="77:5">if <condition pos:start="73:8" pos:end="73:31">(<expr pos:start="73:9" pos:end="73:30"><name pos:start="73:9" pos:end="73:17"><name pos:start="73:9" pos:end="73:11">slb</name><operator pos:start="73:12" pos:end="73:13">-&gt;</operator><name pos:start="73:14" pos:end="73:17">vsid</name></name> <operator pos:start="73:19" pos:end="73:19">&amp;</operator> <name pos:start="73:21" pos:end="73:30">SLB_VSID_B</name></expr>)</condition> <block pos:start="73:33" pos:end="77:5">{<block_content pos:start="75:9" pos:end="75:68">

        <expr_stmt pos:start="75:9" pos:end="75:68"><expr pos:start="75:9" pos:end="75:67"><name pos:start="75:9" pos:end="75:12">hash</name> <operator pos:start="75:14" pos:end="75:14">=</operator> <name pos:start="75:16" pos:end="75:19">vsid</name> <operator pos:start="75:21" pos:end="75:21">^</operator> <operator pos:start="75:23" pos:end="75:23">(</operator><name pos:start="75:24" pos:end="75:27">vsid</name> <operator pos:start="75:29" pos:end="75:30">&lt;&lt;</operator> <literal type="number" pos:start="75:32" pos:end="75:33">25</literal><operator pos:start="75:34" pos:end="75:34">)</operator> <operator pos:start="75:36" pos:end="75:36">^</operator> <operator pos:start="75:38" pos:end="75:38">(</operator><name pos:start="75:39" pos:end="75:46">pageaddr</name> <operator pos:start="75:48" pos:end="75:49">&gt;&gt;</operator> <name pos:start="75:51" pos:end="75:66">target_page_bits</name><operator pos:start="75:67" pos:end="75:67">)</operator></expr>;</expr_stmt>

    </block_content>}</block></if> <else pos:start="77:7" pos:end="81:5">else <block pos:start="77:12" pos:end="81:5">{<block_content pos:start="79:9" pos:end="79:53">

        <expr_stmt pos:start="79:9" pos:end="79:53"><expr pos:start="79:9" pos:end="79:52"><name pos:start="79:9" pos:end="79:12">hash</name> <operator pos:start="79:14" pos:end="79:14">=</operator> <name pos:start="79:16" pos:end="79:19">vsid</name> <operator pos:start="79:21" pos:end="79:21">^</operator> <operator pos:start="79:23" pos:end="79:23">(</operator><name pos:start="79:24" pos:end="79:31">pageaddr</name> <operator pos:start="79:33" pos:end="79:34">&gt;&gt;</operator> <name pos:start="79:36" pos:end="79:51">target_page_bits</name><operator pos:start="79:52" pos:end="79:52">)</operator></expr>;</expr_stmt>

    </block_content>}</block></else></if_stmt>

    <comment type="block" pos:start="83:5" pos:end="83:60">/* Only 5 bits of the page index are used in the AVPN */</comment>

    <expr_stmt pos:start="85:5" pos:end="87:61"><expr pos:start="85:5" pos:end="87:60"><name pos:start="85:5" pos:end="85:13"><name pos:start="85:5" pos:end="85:7">ctx</name><operator pos:start="85:8" pos:end="85:9">-&gt;</operator><name pos:start="85:10" pos:end="85:13">ptem</name></name> <operator pos:start="85:15" pos:end="85:15">=</operator> <operator pos:start="85:17" pos:end="85:17">(</operator><name pos:start="85:18" pos:end="85:26"><name pos:start="85:18" pos:end="85:20">slb</name><operator pos:start="85:21" pos:end="85:22">-&gt;</operator><name pos:start="85:23" pos:end="85:26">vsid</name></name> <operator pos:start="85:28" pos:end="85:28">&amp;</operator> <name pos:start="85:30" pos:end="85:42">SLB_VSID_PTEM</name><operator pos:start="85:43" pos:end="85:43">)</operator> <operator pos:start="85:45" pos:end="85:45">|</operator>

        <operator pos:start="87:9" pos:end="87:9">(</operator><operator pos:start="87:10" pos:end="87:10">(</operator><name pos:start="87:11" pos:end="87:18">pageaddr</name> <operator pos:start="87:20" pos:end="87:21">&gt;&gt;</operator> <literal type="number" pos:start="87:23" pos:end="87:24">16</literal><operator pos:start="87:25" pos:end="87:25">)</operator> <operator pos:start="87:27" pos:end="87:27">&amp;</operator> <operator pos:start="87:29" pos:end="87:29">(</operator><operator pos:start="87:30" pos:end="87:30">(</operator><literal type="number" pos:start="87:31" pos:end="87:34">1ULL</literal> <operator pos:start="87:36" pos:end="87:37">&lt;&lt;</operator> <name pos:start="87:39" pos:end="87:50">segment_bits</name><operator pos:start="87:51" pos:end="87:51">)</operator> <operator pos:start="87:53" pos:end="87:53">-</operator> <literal type="number" pos:start="87:55" pos:end="87:58">0x80</literal><operator pos:start="87:59" pos:end="87:59">)</operator><operator pos:start="87:60" pos:end="87:60">)</operator></expr>;</expr_stmt>



    <expr_stmt pos:start="91:5" pos:end="93:37"><expr pos:start="91:5" pos:end="93:36"><call pos:start="91:5" pos:end="93:36"><name pos:start="91:5" pos:end="91:11">LOG_MMU</name><argument_list pos:start="91:12" pos:end="93:36">(<argument pos:start="91:13" pos:end="91:64"><expr pos:start="91:13" pos:end="91:64"><literal type="string" pos:start="91:13" pos:end="91:45">"pte segment: key=%d nx %d vsid "</literal> <name pos:start="91:47" pos:end="91:59">TARGET_FMT_lx</name> <literal type="string" pos:start="91:61" pos:end="91:64">"\n"</literal></expr></argument>,

            <argument pos:start="93:13" pos:end="93:20"><expr pos:start="93:13" pos:end="93:20"><name pos:start="93:13" pos:end="93:20"><name pos:start="93:13" pos:end="93:15">ctx</name><operator pos:start="93:16" pos:end="93:17">-&gt;</operator><name pos:start="93:18" pos:end="93:20">key</name></name></expr></argument>, <argument pos:start="93:23" pos:end="93:29"><expr pos:start="93:23" pos:end="93:29"><name pos:start="93:23" pos:end="93:29"><name pos:start="93:23" pos:end="93:25">ctx</name><operator pos:start="93:26" pos:end="93:27">-&gt;</operator><name pos:start="93:28" pos:end="93:29">nx</name></name></expr></argument>, <argument pos:start="93:32" pos:end="93:35"><expr pos:start="93:32" pos:end="93:35"><name pos:start="93:32" pos:end="93:35">vsid</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

    <expr_stmt pos:start="95:5" pos:end="95:13"><expr pos:start="95:5" pos:end="95:12"><name pos:start="95:5" pos:end="95:7">ret</name> <operator pos:start="95:9" pos:end="95:9">=</operator> <operator pos:start="95:11" pos:end="95:11">-</operator><literal type="number" pos:start="95:12" pos:end="95:12">1</literal></expr>;</expr_stmt>



    <comment type="block" pos:start="99:5" pos:end="99:58">/* Check if instruction fetch is allowed, if needed */</comment>

    <if_stmt pos:start="101:5" pos:end="163:5"><if pos:start="101:5" pos:end="157:5">if <condition pos:start="101:8" pos:end="101:44">(<expr pos:start="101:9" pos:end="101:43"><name pos:start="101:9" pos:end="101:12">type</name> <operator pos:start="101:14" pos:end="101:15">!=</operator> <name pos:start="101:17" pos:end="101:27">ACCESS_CODE</name> <operator pos:start="101:29" pos:end="101:30">||</operator> <name pos:start="101:32" pos:end="101:38"><name pos:start="101:32" pos:end="101:34">ctx</name><operator pos:start="101:35" pos:end="101:36">-&gt;</operator><name pos:start="101:37" pos:end="101:38">nx</name></name> <operator pos:start="101:40" pos:end="101:41">==</operator> <literal type="number" pos:start="101:43" pos:end="101:43">0</literal></expr>)</condition> <block pos:start="101:46" pos:end="157:5">{<block_content pos:start="105:9" pos:end="155:9">

        <comment type="block" pos:start="103:9" pos:end="103:38">/* Page address translation */</comment>

        <expr_stmt pos:start="105:9" pos:end="109:54"><expr pos:start="105:9" pos:end="109:53"><call pos:start="105:9" pos:end="109:53"><name pos:start="105:9" pos:end="105:15">LOG_MMU</name><argument_list pos:start="105:16" pos:end="109:53">(<argument pos:start="105:17" pos:end="107:44"><expr pos:start="105:17" pos:end="107:44"><literal type="string" pos:start="105:17" pos:end="105:28">"htab_base "</literal> <name pos:start="105:30" pos:end="105:43">TARGET_FMT_plx</name> <literal type="string" pos:start="105:45" pos:end="105:57">" htab_mask "</literal> <name pos:start="105:59" pos:end="105:72">TARGET_FMT_plx</name>

                <literal type="string" pos:start="107:17" pos:end="107:24">" hash "</literal> <name pos:start="107:26" pos:end="107:39">TARGET_FMT_plx</name> <literal type="string" pos:start="107:41" pos:end="107:44">"\n"</literal></expr></argument>,

                <argument pos:start="109:17" pos:end="109:30"><expr pos:start="109:17" pos:end="109:30"><name pos:start="109:17" pos:end="109:30"><name pos:start="109:17" pos:end="109:19">env</name><operator pos:start="109:20" pos:end="109:21">-&gt;</operator><name pos:start="109:22" pos:end="109:30">htab_base</name></name></expr></argument>, <argument pos:start="109:33" pos:end="109:46"><expr pos:start="109:33" pos:end="109:46"><name pos:start="109:33" pos:end="109:46"><name pos:start="109:33" pos:end="109:35">env</name><operator pos:start="109:36" pos:end="109:37">-&gt;</operator><name pos:start="109:38" pos:end="109:46">htab_mask</name></name></expr></argument>, <argument pos:start="109:49" pos:end="109:52"><expr pos:start="109:49" pos:end="109:52"><name pos:start="109:49" pos:end="109:52">hash</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <expr_stmt pos:start="111:9" pos:end="111:28"><expr pos:start="111:9" pos:end="111:27"><name pos:start="111:9" pos:end="111:20"><name pos:start="111:9" pos:end="111:11">ctx</name><operator pos:start="111:12" pos:end="111:13">-&gt;</operator><name pos:start="111:14" pos:end="111:17">hash</name><index pos:start="111:18" pos:end="111:20">[<expr pos:start="111:19" pos:end="111:19"><literal type="number" pos:start="111:19" pos:end="111:19">0</literal></expr>]</index></name> <operator pos:start="111:22" pos:end="111:22">=</operator> <name pos:start="111:24" pos:end="111:27">hash</name></expr>;</expr_stmt>

        <expr_stmt pos:start="113:9" pos:end="113:29"><expr pos:start="113:9" pos:end="113:28"><name pos:start="113:9" pos:end="113:20"><name pos:start="113:9" pos:end="113:11">ctx</name><operator pos:start="113:12" pos:end="113:13">-&gt;</operator><name pos:start="113:14" pos:end="113:17">hash</name><index pos:start="113:18" pos:end="113:20">[<expr pos:start="113:19" pos:end="113:19"><literal type="number" pos:start="113:19" pos:end="113:19">1</literal></expr>]</index></name> <operator pos:start="113:22" pos:end="113:22">=</operator> <operator pos:start="113:24" pos:end="113:24">~</operator><name pos:start="113:25" pos:end="113:28">hash</name></expr>;</expr_stmt>



        <comment type="block" pos:start="117:9" pos:end="117:59">/* Initialize real address with an invalid value */</comment>

        <expr_stmt pos:start="119:9" pos:end="119:35"><expr pos:start="119:9" pos:end="119:34"><name pos:start="119:9" pos:end="119:18"><name pos:start="119:9" pos:end="119:11">ctx</name><operator pos:start="119:12" pos:end="119:13">-&gt;</operator><name pos:start="119:14" pos:end="119:18">raddr</name></name> <operator pos:start="119:20" pos:end="119:20">=</operator> <operator pos:start="119:22" pos:end="119:22">(</operator><name pos:start="119:23" pos:end="119:28">hwaddr</name><operator pos:start="119:29" pos:end="119:29">)</operator><operator pos:start="119:30" pos:end="119:30">-</operator><literal type="number" pos:start="119:31" pos:end="119:34">1ULL</literal></expr>;</expr_stmt>

        <expr_stmt pos:start="121:9" pos:end="129:30"><expr pos:start="121:9" pos:end="129:29"><call pos:start="121:9" pos:end="129:29"><name pos:start="121:9" pos:end="121:15">LOG_MMU</name><argument_list pos:start="121:16" pos:end="129:29">(<argument pos:start="121:17" pos:end="125:44"><expr pos:start="121:17" pos:end="125:44"><literal type="string" pos:start="121:17" pos:end="121:25">"0 htab="</literal> <name pos:start="121:27" pos:end="121:40">TARGET_FMT_plx</name> <literal type="string" pos:start="121:42" pos:end="121:44">"/"</literal> <name pos:start="121:46" pos:end="121:59">TARGET_FMT_plx</name>

                <literal type="string" pos:start="123:17" pos:end="123:24">" vsid="</literal> <name pos:start="123:26" pos:end="123:38">TARGET_FMT_lx</name> <literal type="string" pos:start="123:40" pos:end="123:47">" ptem="</literal> <name pos:start="123:49" pos:end="123:61">TARGET_FMT_lx</name>

                <literal type="string" pos:start="125:17" pos:end="125:24">" hash="</literal> <name pos:start="125:26" pos:end="125:39">TARGET_FMT_plx</name> <literal type="string" pos:start="125:41" pos:end="125:44">"\n"</literal></expr></argument>,

                <argument pos:start="127:17" pos:end="127:30"><expr pos:start="127:17" pos:end="127:30"><name pos:start="127:17" pos:end="127:30"><name pos:start="127:17" pos:end="127:19">env</name><operator pos:start="127:20" pos:end="127:21">-&gt;</operator><name pos:start="127:22" pos:end="127:30">htab_base</name></name></expr></argument>, <argument pos:start="127:33" pos:end="127:46"><expr pos:start="127:33" pos:end="127:46"><name pos:start="127:33" pos:end="127:46"><name pos:start="127:33" pos:end="127:35">env</name><operator pos:start="127:36" pos:end="127:37">-&gt;</operator><name pos:start="127:38" pos:end="127:46">htab_mask</name></name></expr></argument>, <argument pos:start="127:49" pos:end="127:52"><expr pos:start="127:49" pos:end="127:52"><name pos:start="127:49" pos:end="127:52">vsid</name></expr></argument>, <argument pos:start="127:55" pos:end="127:63"><expr pos:start="127:55" pos:end="127:63"><name pos:start="127:55" pos:end="127:63"><name pos:start="127:55" pos:end="127:57">ctx</name><operator pos:start="127:58" pos:end="127:59">-&gt;</operator><name pos:start="127:60" pos:end="127:63">ptem</name></name></expr></argument>,

                <argument pos:start="129:17" pos:end="129:28"><expr pos:start="129:17" pos:end="129:28"><name pos:start="129:17" pos:end="129:28"><name pos:start="129:17" pos:end="129:19">ctx</name><operator pos:start="129:20" pos:end="129:21">-&gt;</operator><name pos:start="129:22" pos:end="129:25">hash</name><index pos:start="129:26" pos:end="129:28">[<expr pos:start="129:27" pos:end="129:27"><literal type="number" pos:start="129:27" pos:end="129:27">0</literal></expr>]</index></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <comment type="block" pos:start="131:9" pos:end="131:34">/* Primary table lookup */</comment>

        <expr_stmt pos:start="133:9" pos:end="133:66"><expr pos:start="133:9" pos:end="133:65"><name pos:start="133:9" pos:end="133:11">ret</name> <operator pos:start="133:13" pos:end="133:13">=</operator> <call pos:start="133:15" pos:end="133:65"><name pos:start="133:15" pos:end="133:24">find_pte64</name><argument_list pos:start="133:25" pos:end="133:65">(<argument pos:start="133:26" pos:end="133:28"><expr pos:start="133:26" pos:end="133:28"><name pos:start="133:26" pos:end="133:28">env</name></expr></argument>, <argument pos:start="133:31" pos:end="133:33"><expr pos:start="133:31" pos:end="133:33"><name pos:start="133:31" pos:end="133:33">ctx</name></expr></argument>, <argument pos:start="133:36" pos:end="133:36"><expr pos:start="133:36" pos:end="133:36"><literal type="number" pos:start="133:36" pos:end="133:36">0</literal></expr></argument>, <argument pos:start="133:39" pos:end="133:40"><expr pos:start="133:39" pos:end="133:40"><name pos:start="133:39" pos:end="133:40">rw</name></expr></argument>, <argument pos:start="133:43" pos:end="133:46"><expr pos:start="133:43" pos:end="133:46"><name pos:start="133:43" pos:end="133:46">type</name></expr></argument>, <argument pos:start="133:49" pos:end="133:64"><expr pos:start="133:49" pos:end="133:64"><name pos:start="133:49" pos:end="133:64">target_page_bits</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <if_stmt pos:start="135:9" pos:end="155:9"><if pos:start="135:9" pos:end="155:9">if <condition pos:start="135:12" pos:end="135:20">(<expr pos:start="135:13" pos:end="135:19"><name pos:start="135:13" pos:end="135:15">ret</name> <operator pos:start="135:17" pos:end="135:17">&lt;</operator> <literal type="number" pos:start="135:19" pos:end="135:19">0</literal></expr>)</condition> <block pos:start="135:22" pos:end="155:9">{<block_content pos:start="139:13" pos:end="153:13">

            <comment type="block" pos:start="137:13" pos:end="137:40">/* Secondary table lookup */</comment>

            <expr_stmt pos:start="139:13" pos:end="145:67"><expr pos:start="139:13" pos:end="145:66"><call pos:start="139:13" pos:end="145:66"><name pos:start="139:13" pos:end="139:19">LOG_MMU</name><argument_list pos:start="139:20" pos:end="145:66">(<argument pos:start="139:21" pos:end="143:48"><expr pos:start="139:21" pos:end="143:48"><literal type="string" pos:start="139:21" pos:end="139:29">"1 htab="</literal> <name pos:start="139:31" pos:end="139:44">TARGET_FMT_plx</name> <literal type="string" pos:start="139:46" pos:end="139:48">"/"</literal> <name pos:start="139:50" pos:end="139:63">TARGET_FMT_plx</name>

                    <literal type="string" pos:start="141:21" pos:end="141:28">" vsid="</literal> <name pos:start="141:30" pos:end="141:42">TARGET_FMT_lx</name> <literal type="string" pos:start="141:44" pos:end="141:50">" api="</literal> <name pos:start="141:52" pos:end="141:64">TARGET_FMT_lx</name>

                    <literal type="string" pos:start="143:21" pos:end="143:28">" hash="</literal> <name pos:start="143:30" pos:end="143:43">TARGET_FMT_plx</name> <literal type="string" pos:start="143:45" pos:end="143:48">"\n"</literal></expr></argument>, <argument pos:start="143:51" pos:end="143:64"><expr pos:start="143:51" pos:end="143:64"><name pos:start="143:51" pos:end="143:64"><name pos:start="143:51" pos:end="143:53">env</name><operator pos:start="143:54" pos:end="143:55">-&gt;</operator><name pos:start="143:56" pos:end="143:64">htab_base</name></name></expr></argument>,

                    <argument pos:start="145:21" pos:end="145:34"><expr pos:start="145:21" pos:end="145:34"><name pos:start="145:21" pos:end="145:34"><name pos:start="145:21" pos:end="145:23">env</name><operator pos:start="145:24" pos:end="145:25">-&gt;</operator><name pos:start="145:26" pos:end="145:34">htab_mask</name></name></expr></argument>, <argument pos:start="145:37" pos:end="145:40"><expr pos:start="145:37" pos:end="145:40"><name pos:start="145:37" pos:end="145:40">vsid</name></expr></argument>, <argument pos:start="145:43" pos:end="145:51"><expr pos:start="145:43" pos:end="145:51"><name pos:start="145:43" pos:end="145:51"><name pos:start="145:43" pos:end="145:45">ctx</name><operator pos:start="145:46" pos:end="145:47">-&gt;</operator><name pos:start="145:48" pos:end="145:51">ptem</name></name></expr></argument>, <argument pos:start="145:54" pos:end="145:65"><expr pos:start="145:54" pos:end="145:65"><name pos:start="145:54" pos:end="145:65"><name pos:start="145:54" pos:end="145:56">ctx</name><operator pos:start="145:57" pos:end="145:58">-&gt;</operator><name pos:start="145:59" pos:end="145:62">hash</name><index pos:start="145:63" pos:end="145:65">[<expr pos:start="145:64" pos:end="145:64"><literal type="number" pos:start="145:64" pos:end="145:64">1</literal></expr>]</index></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

            <expr_stmt pos:start="147:13" pos:end="147:71"><expr pos:start="147:13" pos:end="147:70"><name pos:start="147:13" pos:end="147:16">ret2</name> <operator pos:start="147:18" pos:end="147:18">=</operator> <call pos:start="147:20" pos:end="147:70"><name pos:start="147:20" pos:end="147:29">find_pte64</name><argument_list pos:start="147:30" pos:end="147:70">(<argument pos:start="147:31" pos:end="147:33"><expr pos:start="147:31" pos:end="147:33"><name pos:start="147:31" pos:end="147:33">env</name></expr></argument>, <argument pos:start="147:36" pos:end="147:38"><expr pos:start="147:36" pos:end="147:38"><name pos:start="147:36" pos:end="147:38">ctx</name></expr></argument>, <argument pos:start="147:41" pos:end="147:41"><expr pos:start="147:41" pos:end="147:41"><literal type="number" pos:start="147:41" pos:end="147:41">1</literal></expr></argument>, <argument pos:start="147:44" pos:end="147:45"><expr pos:start="147:44" pos:end="147:45"><name pos:start="147:44" pos:end="147:45">rw</name></expr></argument>, <argument pos:start="147:48" pos:end="147:51"><expr pos:start="147:48" pos:end="147:51"><name pos:start="147:48" pos:end="147:51">type</name></expr></argument>, <argument pos:start="147:54" pos:end="147:69"><expr pos:start="147:54" pos:end="147:69"><name pos:start="147:54" pos:end="147:69">target_page_bits</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>

            <if_stmt pos:start="149:13" pos:end="153:13"><if pos:start="149:13" pos:end="153:13">if <condition pos:start="149:16" pos:end="149:27">(<expr pos:start="149:17" pos:end="149:26"><name pos:start="149:17" pos:end="149:20">ret2</name> <operator pos:start="149:22" pos:end="149:23">!=</operator> <operator pos:start="149:25" pos:end="149:25">-</operator><literal type="number" pos:start="149:26" pos:end="149:26">1</literal></expr>)</condition> <block pos:start="149:29" pos:end="153:13">{<block_content pos:start="151:17" pos:end="151:27">

                <expr_stmt pos:start="151:17" pos:end="151:27"><expr pos:start="151:17" pos:end="151:26"><name pos:start="151:17" pos:end="151:19">ret</name> <operator pos:start="151:21" pos:end="151:21">=</operator> <name pos:start="151:23" pos:end="151:26">ret2</name></expr>;</expr_stmt>

            </block_content>}</block></if></if_stmt>

        </block_content>}</block></if></if_stmt>

    </block_content>}</block></if> <else pos:start="157:7" pos:end="163:5">else <block pos:start="157:12" pos:end="163:5">{<block_content pos:start="159:9" pos:end="161:17">

        <expr_stmt pos:start="159:9" pos:end="159:39"><expr pos:start="159:9" pos:end="159:38"><call pos:start="159:9" pos:end="159:38"><name pos:start="159:9" pos:end="159:15">LOG_MMU</name><argument_list pos:start="159:16" pos:end="159:38">(<argument pos:start="159:17" pos:end="159:37"><expr pos:start="159:17" pos:end="159:37"><literal type="string" pos:start="159:17" pos:end="159:37">"No access allowed\n"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>

        <expr_stmt pos:start="161:9" pos:end="161:17"><expr pos:start="161:9" pos:end="161:16"><name pos:start="161:9" pos:end="161:11">ret</name> <operator pos:start="161:13" pos:end="161:13">=</operator> <operator pos:start="161:15" pos:end="161:15">-</operator><literal type="number" pos:start="161:16" pos:end="161:16">3</literal></expr>;</expr_stmt>

    </block_content>}</block></else></if_stmt>



    <return pos:start="167:5" pos:end="167:15">return <expr pos:start="167:12" pos:end="167:14"><name pos:start="167:12" pos:end="167:14">ret</name></expr>;</return>

</block_content>}</block></function>
</unit>
